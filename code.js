var Laya=window.Laya=function(t,e){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?i.__presubstr.call(this,t):i.__presubstr.call(this,t,e>0?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;n<t;n++)i[n]=e;return i},__extend:function(t,e){function n(){i.un(this,"constructor",t)}for(var o in e)if(e.hasOwnProperty(o)){var r=Object.getOwnPropertyDescriptor(e,o),a=r.get,s=r.set;a||s?a&&s?Object.defineProperty(t,o,r):(a&&Object.defineProperty(t,o,a),s&&Object.defineProperty(t,o,s)):t[o]=e[o]}n.prototype=e.prototype,t.prototype=new n,i.un(t.prototype,"__imps",i.__copy({},e.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(e,n){if(!i.__packages[e]){i.__packages[e]=!0;var o=t,r=e.split(".");if(r.length>1)for(var a=0,s=r.length-1;a<s;a++){var l=o[r[a]];o=l||(o[r[a]]={})}o[r[r.length-1]]||(o[r[r.length-1]]=n||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},__int:function(t){return t?parseInt(t):0},interface:function(e,n){i.__package(e,{});var o=i.__internals,r=o[e]=o[e]||{self:e};if(n){var a=n.split(",");r.extend=[];for(u=0;u<a.length;u++){var s=a[u];o[s]=o[s]||{self:s},r.extend.push(o[s])}}for(var l=t,h=e.split("."),u=0;u<h.length-1;u++)l=l[h[u]];l[h[h.length-1]]={__interface__:e}},class:function(e,n,o,r){if(o&&i.__extend(e,o),n)if(i.__package(n,e),i.__classmap[n]=e,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var a=n.split(".");r=r||a[a.length-1],i[r]&&console.log("Warning!,this class["+r+"] already exist:",i[r]),i[r]=e}}else"Main"==n?t.Main=e:(i[n]&&console.log("Error!,this class["+n+"] already exist:",i[n]),i[n]=e);var s=i.un,l=e.prototype;s(l,"hasOwnProperty",i.__hasOwnProperty),s(l,"__class",e),s(l,"__super",o),s(l,"__className",n),s(e,"__super",o),s(e,"__className",n),s(e,"__isclass",!0),s(e,"super",function(t){this.__super.call(t)})},imps:function(t,e){function n(t){var e,r;if((e=i.__internals[t])&&(o[t]=!0,r=e.extend))for(var a=0;a<r.length;a++)n(r[a].self)}if(!e)return null;var o=t.__imps||i.un(t,"__imps",{});for(var r in e)n(r)},superSet:function(t,e,i,n){var o=t.prototype["_$set_"+i];o&&o.call(e,n)},superGet:function(t,e,i){var n=t.prototype["_$get_"+i];return n?n.call(e):null},getset:function(t,e,n,o,r){t?(o&&(e["_$GET_"+n]=o),r&&(e["_$SET_"+n]=r)):(o&&i.un(e,"_$get_"+n,o),r&&i.un(e,"_$set_"+n,r)),o&&r?Object.defineProperty(e,n,{get:o,set:r,enumerable:!1,configurable:!0}):(o&&Object.defineProperty(e,n,{get:o,enumerable:!1,configurable:!0}),r&&Object.defineProperty(e,n,{set:r,enumerable:!1,configurable:!0}))},static:function(t,e){for(var i=0,n=e.length;i<n;i+=2)"length"==e[i]?t.length=e[i+1].call(t):function(){var n=e[i],o=e[i+1];Object.defineProperty(t,n,{get:function(){return delete this[n],this[n]=o.call(this)},set:function(t){delete this[n],this[n]=t},enumerable:!0,configurable:!0})}()},un:function(t,e,n){return n||(n=t[e]),i.__propun.value=n,Object.defineProperty(t,e,i.__propun),n},uns:function(t,e){e.forEach(function(e){i.un(t,e)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document);!function(t,e,i){i.un,i.uns,i.static,i.class,i.getset,i.__newvec}(window,document,Laya),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset;i.__newvec;i.interface("laya.runtime.IMarket"),i.interface("laya.filters.IFilter"),i.interface("laya.display.ILayout"),i.interface("laya.resource.IDispose"),i.interface("laya.runtime.IPlatform"),i.interface("laya.resource.IDestroy"),i.interface("laya.runtime.IConchNode"),i.interface("laya.filters.IFilterAction"),i.interface("laya.runtime.ICPlatformClass"),i.interface("laya.resource.ICreateResource"),i.interface("laya.runtime.IConchRenderObject"),i.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var a=function(){function e(){}return o(e,"laya.utils.RunDriver"),e.FILTER_ACTIONS=[],e.pixelRatio=-1,e._charSizeTestDiv=null,e.now=function(){return Date.now()},e.getWindow=function(){return t},e.getPixelRatio=function(){if(e.pixelRatio<0){var t=k.context,i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;(e.pixelRatio=(k.window.devicePixelRatio||1)/i)<1&&(e.pixelRatio=1)}return e.pixelRatio},e.getIncludeStr=function(t){return null},e.createShaderCondition=function(t){var e="(function() {return "+t+";})";return i._runScript(e)},e.fontMap=[],e.measureText=function(t,i){var n=e.hanzi.test(t);if(n&&e.fontMap[i])return e.fontMap[i];var o=k.context;o.font=i;var r=o.measureText(t);return n&&(e.fontMap[i]=r),r},e.getWebGLContext=function(t){},e.beginFlush=function(){},e.endFinish=function(){},e.addToAtlas=null,e.flashFlushImage=function(t){},e.drawToCanvas=function(t,e,i,n,o,r){var a=vt.create("2D"),s=new N(i,n,a);return G.renders[e]._fun(t,s,o,r),a},e.createParticleTemplate2D=null,e.createGLTextur=null,e.createWebGLContext2D=null,e.changeWebGLSize=function(t,e){},e.createRenderSprite=function(t,e){return new G(t,e)},e.createFilterAction=function(t){return new w},e.createGraphics=function(){return new f},e.clear=function(t){P._context.ctx.clear()},e.cancelLoadByUrl=function(t){},e.clearAtlas=function(t){},e.isAtlas=function(t){return!1},e.addTextureToAtlas=function(t){},e.getTexturePixels=function(t,e,i,n,o){return null},e.skinAniSprite=function(){return null},e.update3DLoop=function(){},n(e,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),e}(),s=(r(1,i,"alertGlobalError",null,function(t){var e=0;k.window.onerror=t?function(t,i,n,o,r){e++<5&&r&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+r.stack||r)}:null}),i.init=function(t,e,n){for(var o=[],r=2,a=arguments.length;r<a;r++)o.push(arguments[r]);if(!i._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=i._arrayBufferSlice),i._isinit=!0,k.__init__(),A.__init__(),f.__init__(),i.timer=new z,i.scaleTimer=new z,i.loader=new st,Q.__init__();for(var r=0,s=o.length;r<s;r++)o[r].enable&&o[r].enable();return d.__init__(),c.__init__(),U.__init__(),O.beginCheck(),i._currentStage=i.stage=new mt,i.stage.conchModel&&i.stage.conchModel.setRootNode(),i._getUrlPath(),i.render=new P(0,0),i.stage.size(t,e),G.__init__(),m.__init__(),y.instance.__init__(i.stage,P.canvas),wt.__init__(),L.autoStopMusic=!0,D.__init__(),P.canvas}},i._getUrlPath=function(){var t=k.window.location,e=t.pathname;e=":"==e.charAt(2)?e.substring(1):e,R.rootPath=R.basePath=R.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)},i._arrayBufferSlice=function(t,e){var i=new Uint8Array(this,t,e-t),n=new Uint8Array(i.length);return n.set(i),n.buffer},i._runScript=function(t){return k.window[i._evcode](t)},i.stage=null,i.timer=null,i.scaleTimer=null,i.loader=null,i.version="1.7.22",i.render=null,i._currentStage=null,i._isinit=!1,i.MiniAdpter={init:function(){t.navigator&&t.navigator.userAgent&&t.navigator.userAgent.indexOf("MiniGame")>-1&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},n(i,["conchMarket",function(){return this.conchMarket=t.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=t.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function t(){}return o(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.showCanvasMark=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t}()),l=function(){function t(){this._events=null}var e;o(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){return!!(this._events&&this._events[t])},i.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,o=i.length;n<o;n++){var r=i[n];r&&(null!=e?r.runWith(e):r.run()),r&&!r.once||(i.splice(n,1),n--,o--)}0===i.length&&this._events&&delete this._events[t]}return!0},i.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},i._createListener=function(t,i,n,o,r,a){void 0===a&&(a=!0),a&&this.off(t,i,n,r);var s=e.create(i||this,n,o,r);this._events||(this._events={});var l=this._events;return l[t]?l[t].run?l[t]=[l[t],s]:l[t].push(s):l[t]=s,this},i.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var o=this._events[t];if(null!=i)if(o.run)e&&o.caller!==e||o.method!==i||n&&!o.once||(delete this._events[t],o.recover());else{for(var r=0,a=0,s=o.length;a<s;a++){var l=o[a];l?!l||e&&l.caller!==e||l.method!==i||n&&!l.once||(r++,o[a]=null,l.recover()):r++}r===s&&delete this._events[t]}return this},i.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},i._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,i,n,o){e.__super.call(this,t,i,n,o)}o(e,"",h);return e.prototype.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,o){return void 0===o&&(o=!0),e._pool.length?e._pool.pop().setTo(t,i,n,o):new e(t,i,n,o)},e._pool=[],e}()},t}(),h=function(){function t(t,e,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,e,i,n)}o(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,n,o){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=o,this},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,o){return void 0===o&&(o=!0),t._pool.length?t._pool.pop().setTo(e,i,n,o):new t(e,i,n,o)},t._pool=[],t._gid=1,t}(),u=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}o(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,i.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],h.create(this,this.onLoaded))},e.onLoaded=function(){this.parseFont(at.getRes(this._path),at.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");if(!i[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=parseInt(i[0].getAttributeNode("size").nodeValue);var n=i[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];var o;o=t.getElementsByTagName("char");var r=0;for(r=0;r<o.length;r++){var a=o[r],s=parseInt(a.getAttributeNode("id").nodeValue),l=parseInt(a.getAttributeNode("xoffset").nodeValue)/1,h=parseInt(a.getAttributeNode("yoffset").nodeValue)/1,u=parseInt(a.getAttributeNode("xadvance").nodeValue)/1,c=new M;c.x=parseInt(a.getAttributeNode("x").nodeValue),c.y=parseInt(a.getAttributeNode("y").nodeValue),c.width=parseInt(a.getAttributeNode("width").nodeValue),c.height=parseInt(a.getAttributeNode("height").nodeValue);var d=ht.create(e,c.x,c.y,c.width,c.height,l,h);this._maxWidth=Math.max(this._maxWidth,u+this.letterSpacing),this._fontCharDic[s]=d,this._fontWidthMap[s]=u}}},e.parseFont2=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=t.getElementsByTagName("info");this.fontSize=parseInt(i[0].attributes.size.nodeValue);var n=i[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];var o=t.getElementsByTagName("char"),r=0;for(r=0;r<o.length;r++){var a=o[r].attributes,s=parseInt(a.id.nodeValue),l=parseInt(a.xoffset.nodeValue)/1,h=parseInt(a.yoffset.nodeValue)/1,u=parseInt(a.xadvance.nodeValue)/1,c=new M;c.x=parseInt(a.x.nodeValue),c.y=parseInt(a.y.nodeValue),c.width=parseInt(a.width.nodeValue),c.height=parseInt(a.height.nodeValue);var d=ht.create(e,c.x,c.y,c.width,c.height,l,h);this._maxWidth=Math.max(this._maxWidth,u+this.letterSpacing),this._fontCharDic[s]=d,this._fontWidthMap[s]=u}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "==t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e.drawText=function(t,e,i,n,o,r){var a,s=this.getTextWidth(t),l=0;"center"===o&&(l=(r-s)/2),"right"===o&&(l=r-s);for(var h=0,u=0,c=t.length;u<c;u++)(a=this.getCharTexture(t.charAt(u)))&&(e.graphics.drawTexture(a,i+h+l,n),h+=this.getCharWidth(t.charAt(u)))},t}(),c=function(){function t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t._TF_EMPTY}o(t,"laya.display.css.Style");var e=t.prototype;return e.getTransform=function(){return this._tf},e.setTransform=function(e){this._tf="none"!==e&&e?e:t._TF_EMPTY},e.setTranslateX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.translateX=e},e.setTranslateY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.translateY=e},e.setScaleX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.scaleX=e},e.setScale=function(e,i){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.scaleX=e,this._tf.scaleY=i},e.setScaleY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.scaleY=e},e.setRotate=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.rotate=e},e.setSkewX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.skewX=e},e.setSkewY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new p),this._tf.skewY=e},e.destroy=function(){this.scrollRect=null},e.render=function(t,e,i,n){},e.getCSSStyle=function(){return tt.EMPTY},e._enableLayout=function(){return!1},r(0,e,"scaleX",function(){return this._tf.scaleX},function(t){this.setScaleX(t)}),r(0,e,"transform",function(){return this.getTransform()},function(t){this.setTransform(t)}),r(0,e,"translateX",function(){return this._tf.translateX},function(t){this.setTranslateX(t)}),r(0,e,"translateY",function(){return this._tf.translateY},function(t){this.setTranslateY(t)}),r(0,e,"scaleY",function(){return this._tf.scaleY},function(t){this.setScaleY(t)}),r(0,e,"block",function(){return 0!=(1&this._type)}),r(0,e,"skewY",function(){return this._tf.skewY},function(t){this.setSkewY(t)}),r(0,e,"rotate",function(){return this._tf.rotate},function(t){this.setRotate(t)}),r(0,e,"skewX",function(){return this._tf.skewX},function(t){this.setSkewX(t)}),r(0,e,"paddingLeft",function(){return 0}),r(0,e,"paddingTop",function(){return 0}),r(0,e,"absolute",function(){return!0}),t.__init__=function(){t._TF_EMPTY=new p,t.EMPTY=new t},t.EMPTY=null,t._TF_EMPTY=null,t}(),d=function(){function t(e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=V.create(t.defaultColor),this.family=t.defaultFamily,this.stroke=t._STROKE,this.size=t.defaultSize,e&&e!==t.EMPTY&&e.copyTo(this)}o(t,"laya.display.css.Font");var e=t.prototype;return e.set=function(t){this._text=null;for(var e=t.split(" "),i=0,n=e.length;i<n;i++){var o=e[i];switch(o){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}o.indexOf("px")>0&&(this.size=parseInt(o),this.family=e[i+1],i++)}},e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e.copyTo=function(e){e._type=this._type,e._text=this._text,e._weight=this._weight,e._color=this._color,e.family=this.family,e.stroke=this.stroke!=t._STROKE?this.stroke.slice():t._STROKE,e.indent=this.indent,e.size=this.size},r(0,e,"password",function(){return 0!=(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),r(0,e,"color",function(){return this._color.strColor},function(t){this._color=V.create(t)}),r(0,e,"italic",function(){return 0!=(512&this._type)},function(t){t?this._type|=512:this._type&=-513}),r(0,e,"bold",function(){return 0!=(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),r(0,e,"weight",function(){return""+this._weight},function(t){var e=0;switch(t){case"normal":break;case"bold":this.bold=!0,e=700;break;case"bolder":e=800;break;case"lighter":e=100;break;default:e=parseInt(t)}this._weight=e,this._text=null}),r(0,e,"decoration",function(){return this._decoration?this._decoration.value:null},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e[0]}e[1]&&(this._decoration.color=V.create(e)),this._decoration.value=t}),t.__init__=function(){t.EMPTY=new t(null)},t.EMPTY=null,t.defaultColor="#000000",t.defaultSize=12,t.defaultFamily="Arial",t.defaultFont="12px Arial",t._STROKE=[0,"#000000"],t._ITALIC=512,t._PASSWORD=1024,t._BOLD=2048,t}(),p=function(){function t(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return o(t,"laya.display.css.TransformInfo"),t}(),f=function(){function e(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,P.isConchNode){this._nativeObj=new t._conchGraphics,this.id=this._nativeObj.conchID}}o(e,"laya.display.Graphics");var n=e.prototype;return n.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},n.clear=function(t){void 0===t&&(t=!1);var i=0,n=0;if(t){var o=this._one;if(this._cmds){for(n=this._cmds.length,i=0;i<n;i++)!(o=this._cmds[i])||o.callee!==P._context._drawTexture&&o.callee!==P._context._drawTextureWithTransform||(o[0]=null,e._cache.push(o));this._cmds.length=0}else o&&(!o||o.callee!==P._context._drawTexture&&o.callee!==P._context._drawTextureWithTransform||(o[0]=null,e._cache.push(o)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(i=0,n=this._vectorgraphArray.length;i<n;i++)K.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}},n._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},n._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new g,this._graphicBounds._graphics=this)},n._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},n._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},n.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t)},n.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},n._addCmd=function(t){this._cmds=this._cmds||[],t.callee=t.shift(),this._cmds.push(t)},n.setFilters=function(t){this._saveToCmd(P._context._setFilters,t)},n.drawTexture=function(t,i,n,o,r,a,s){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=1),!t||s<.01)return null;o||(o=t.sourceWidth),r||(r=t.sourceHeight),s=s<0?0:s>1?1:s;var l=!P.isWebGL&&(k.onFirefox||k.onEdge||k.onIE||k.onSafari)?.5:0,h=o/t.sourceWidth,u=r/t.sourceHeight;if(o=t.width*h,r=t.height*u,t.loaded&&(o<=0||r<=0))return null;i+=t.offsetX*h,n+=t.offsetY*u,this._sp&&(this._sp._renderType|=512);var c;return i-=l,n-=l,o+=2*l,r+=2*l,e._cache.length?((c=e._cache.pop())[0]=t,c[1]=i,c[2]=n,c[3]=o,c[4]=r,c[5]=a,c[6]=s):c=[t,i,n,o,r,a,s],c.callee=a||1!=s?P._context._drawTextureWithTransform:P._context._drawTexture,null!=this._one||a||1!=s?this._saveToCmd(c.callee,c):(this._one=c,this._render=this._renderOneImg),t.loaded||t.once("loaded",this,this._textureLoaded,[t,c]),this._repaint(),c},n.cleanByTexture=function(t,e,i,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),!t)return this.clear();if(this._one&&this._render===this._renderOneImg){n||(n=t.sourceWidth),o||(o=t.sourceHeight);var r=n/t.sourceWidth,a=o/t.sourceHeight;n=t.width*r,o=t.height*a,e+=t.offsetX*r,i+=t.offsetY*a,this._one[0]=t,this._one[1]=e,this._one[2]=i,this._one[3]=n,this._one[4]=o,this._repaint()}else this.clear(),t&&this.drawTexture(t,e,i,n,o)},n.drawTextures=function(t,e){t&&this._saveToCmd(P._context._drawTextures,[t,e])},n.fillTexture=function(t,e,i,n,o,r,a){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r="repeat"),t){var s=[t,e,i,n,o,r,a||T.EMPTY,{}];t.loaded||t.once("loaded",this,this._textureLoaded,[t,s]),this._saveToCmd(P._context._fillTexture,s)}},n._textureLoaded=function(t,e){e[3]=e[3]||t.width,e[4]=e[4]||t.height,this._repaint()},n.fillCircle=function(t,e,i,n,o,r,a){i.bitmap.enableMerageInAtlas=!1;var s=new Float32Array(2*(a+1)),l=new Float32Array(2*(a+1)),h=new Uint16Array(3*a),u=2*Math.PI/a,c=0;s[0]=n,s[1]=o,l[0]=n/i.width,l[1]=o/i.height;for(var d=2,p=0;p<a;p++){var f=r*Math.cos(c)+n,g=r*Math.sin(c)+o;s[d]=f,s[d+1]=g,l[d]=f/i.width,l[d+1]=g/i.height,c+=u,d+=2}for(d=0,p=0;p<a;p++)h[d++]=0,h[d++]=p+1,h[d++]=p+2>=a+1?1:p+2;this.drawTriangles(i,t,e,s,l,h)},n.drawTriangles=function(t,e,i,n,o,r,a,s,l,h){void 0===s&&(s=1),this._saveToCmd(P._context.drawTriangles,[t,e,i,n,o,r,a,s,l,h])},n._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._repaint(),e},n.clipRect=function(t,e,i,n){this._saveToCmd(P._context._clipRect,[t,e,i,n])},n.fillText=function(t,e,i,n,o,r,a){void 0===a&&(a=0),this._saveToCmd(P._context._fillText,[t,e,i,n||d.defaultFont,o,r])},n.fillBorderText=function(t,e,i,n,o,r,a,s){this._saveToCmd(P._context._fillBorderText,[t,e,i,n||d.defaultFont,o,r,a,s])},n.strokeText=function(t,e,i,n,o,r,a){this._saveToCmd(P._context._strokeText,[t,e,i,n||d.defaultFont,o,r,a])},n.alpha=function(t){t=t<0?0:t>1?1:t,this._saveToCmd(P._context._alpha,[t])},n.setAlpha=function(t){t=t<0?0:t>1?1:t,this._saveToCmd(P._context._setAlpha,[t])},n.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(P._context._transform,[t,e,i])},n.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(P._context._rotate,[t,e,i])},n.scale=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(P._context._scale,[t,e,i,n])},n.translate=function(t,e){this._saveToCmd(P._context._translate,[t,e])},n.save=function(){this._saveToCmd(P._context._save,[])},n.restore=function(){this._saveToCmd(P._context._restore,[])},n.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i].callee))return e[i][0].toUpperCase?e[i][0]=t:e[i][0].setText(t),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t:this._one[0].setText(t),!0;return!1},n._isTextCmd=function(t){return t===P._context._fillText||t===P._context._fillBorderText||t===P._context._strokeText},n.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i].callee)&&(e[i][4]=t,e[i][0].toUpperCase||(e[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t,this._one[0].toUpperCase||(this._one[0].changed=!0))},n.loadImage=function(t,e,n,o,r,a){function s(t){t&&(l.drawTexture(t,e,n,o,r),null!=a&&a.call(l._sp,t))}var l=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var u=at.getRes(t);u?s(u):i.loader.load(t,h.create(null,s),null,"image")},n._renderEmpty=function(t,e,i,n){},n._renderAll=function(t,e,i,n){for(var o,r=this._cmds,a=0,s=r.length;a<s;a++)(o=r[a]).callee.call(e,i,n,o)},n._renderOne=function(t,e,i,n){this._one.callee.call(e,i,n,this._one)},n._renderOneImg=function(t,e,i,n){this._one.callee.call(e,i,n,this._one),2305!==t._renderType&&(t._renderType|=1)},n.drawLine=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=0;P.isWebGL&&(a=K.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var s=r%2==0?0:.5,l=[t+s,e+s,i+s,n+s,o,r,a];this._saveToCmd(P._context._drawLine,l)},n.drawLines=function(t,e,i,n,o){void 0===o&&(o=1);var r=0;if(i&&!(i.length<4)){P.isWebGL&&(r=K.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var a=o%2==0?0:.5,s=[t+a,e+a,i,n,o,r];this._saveToCmd(P._context._drawLines,s)}},n.drawCurves=function(t,e,i,n,o){void 0===o&&(o=1);var r=[t,e,i,n,o];this._saveToCmd(P._context._drawCurves,r)},n.drawRect=function(t,e,i,n,o,r,a){void 0===a&&(a=1);var s=r?a/2:0,l=r?a:0,h=[t+s,e+s,i-l,n-l,o,r,a];this._saveToCmd(P._context._drawRect,h)},n.drawCircle=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=o?r/2:0,s=0;P.isWebGL&&(s=K.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(s));var l=[t,e,i-a,n,o,r,s];this._saveToCmd(P._context._drawCircle,l)},n.drawPie=function(t,e,i,n,o,r,a,s){void 0===s&&(s=1);var l=a?s/2:0,h=a?s:0,u=0;P.isWebGL&&(u=K.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(u));var c=[t+l,e+l,i-h,n,o,r,a,s,u];c[3]=J.toRadian(n),c[4]=J.toRadian(o),this._saveToCmd(P._context._drawPie,c)},n.drawPoly=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=0,s=!1;P.isWebGL&&(a=K.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a),s=!(i.length>6));var l=o?r%2==0?0:.5:0,h=[t+l,e+l,i,n,o,r,a,s];this._saveToCmd(P._context._drawPoly,h)},n.drawPath=function(t,e,i,n,o){var r=[t,e,i,n,o];this._saveToCmd(P._context._drawPath,r)},r(0,n,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512),this._cmds=t,this._render=this._renderAll,this._repaint()}),e.__init__=function(){if(P.isConchNode){for(var t=laya.display.Graphics.prototype,e=k.window.ConchGraphics.prototype,i=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],n=0,o=i.length;n<=o;n++){var r=i[n];t[r]=e[r]}t._saveToCmd=null,e.drawImageS&&(t.drawTextures=function(t,e){if(t&&t.loaded&&t.bitmap&&t.source){var i=t.uv,n=t.bitmap.width,o=t.bitmap.height;this.drawImageS(t.bitmap.source,i[0]*n,i[1]*o,(i[2]-i[0])*n,(i[5]-i[3])*o,t.offsetX,t.offsetY,t.width,t.height,e)}}),t.drawTexture=function(t,e,i,n,o,r,a){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=1),t)if(t.loaded){if(t.loaded&&t.bitmap&&t.source&&(n||(n=t.sourceWidth),o||(o=t.sourceHeight),a=a<0?0:a>1?1:a,n=n-t.sourceWidth+t.width,o=o-t.sourceHeight+t.height,!(n<=0||o<=0))){e+=t.offsetX,i+=t.offsetY;var s=t.uv,l=t.bitmap.width,h=t.bitmap.height;s[4]<s[0]&&s[5]<s[1]?this.drawImageM(t.bitmap.source,s[4]*l,s[5]*h,(s[0]-s[4])*l,(s[1]-s[5])*h,e,i,n,o,r,a):this.drawImageM(t.bitmap.source,s[0]*l,s[1]*h,(s[2]-s[0])*l,(s[5]-s[3])*h,e,i,n,o,r,a),this._repaint()}}else t.once("loaded",this,function(){this.drawTexture(t,e,i,n,o,r)})},t.fillTexture=function(t,e,i,n,o,r,a){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r="repeat"),t&&t.loaded){var s,l=P._context.ctx,h=t.bitmap.width,u=t.bitmap.height,c=t.uv;s=t.uv!=ht.DEF_UV?l.createPattern(t.bitmap.source,r,c[0]*h,c[1]*u,(c[2]-c[0])*h,(c[5]-c[3])*u):l.createPattern(t.bitmap.source,r);var d=0,p=0;a&&(e+=a.x%t.width,i+=a.y%t.height,d-=a.x%t.width,p-=a.y%t.height),this._fillImage(s,e,i,d,p,n,o)}}}},e._cache=[],e}(),g=function(){function t(){this._cacheBoundsType=!1}o(t,"laya.display.GraphicsBounds");var e=t.prototype;return e.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},e.reset=function(){this._temp&&(this._temp.length=0)},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=M._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=J.copyArray(this._rstBoundPoints,this._temp)},e._getCmdPoints=function(e){void 0===e&&(e=!1);var i,n=P._context,o=this._graphics.cmds;if(i=this._temp||(this._temp=[]),i.length=0,o||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),o=t._tempCmds),!o)return i;var r;(r=t._tempMatrixArrays).length=0;var a=t._initMatrix;a.identity();for(var s,l,h=t._tempMatrix,u=NaN,c=NaN,d=NaN,p=NaN,f=NaN,g=NaN,_=0,m=o.length;_<m;_++)if((s=o[_]).callee)switch(s.callee){case n._save:case 7:r.push(a),a=a.clone();break;case n._restore:case 8:a=r.pop();break;case n._scale:case 5:h.identity(),h.translate(-s[2],-s[3]),h.scale(s[0],s[1]),h.translate(s[2],s[3]),this._switchMatrix(a,h);break;case n._rotate:case 3:h.identity(),h.translate(-s[1],-s[2]),h.rotate(s[0]),h.translate(s[1],s[2]),this._switchMatrix(a,h);break;case n._translate:case 6:h.identity(),h.translate(s[0],s[1]),this._switchMatrix(a,h);break;case n._transform:case 4:h.identity(),h.translate(-s[1],-s[2]),h.concat(s[0]),h.translate(s[1],s[2]),this._switchMatrix(a,h);break;case 16:case 24:t._addPointArrToRst(i,M._getBoundPointS(s[0],s[1],s[2],s[3]),a);break;case 17:a.copyTo(h),h.concat(s[4]),t._addPointArrToRst(i,M._getBoundPointS(s[0],s[1],s[2],s[3]),h);break;case n._drawTexture:l=s[0],e?s[3]&&s[4]?t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],s[3],s[4]),a):(l=s[0],t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],l.width,l.height),a)):(u=(s[3]||l.sourceWidth)/l.width,c=(s[4]||l.sourceHeight)/l.height,d=u*l.sourceWidth,p=c*l.sourceHeight,f=l.offsetX>0?l.offsetX:0,g=l.offsetY>0?l.offsetY:0,f*=u,g*=c,t._addPointArrToRst(i,M._getBoundPointS(s[1]-f,s[2]-g,d,p),a));break;case n._fillTexture:s[3]&&s[4]?t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],s[3],s[4]),a):(l=s[0],t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],l.width,l.height),a));break;case n._drawTextureWithTransform:var y;s[5]?(a.copyTo(h),h.concat(s[5]),y=h):y=a,e?s[3]&&s[4]?t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],s[3],s[4]),y):(l=s[0],t._addPointArrToRst(i,M._getBoundPointS(s[1],s[2],l.width,l.height),y)):(l=s[0],u=(s[3]||l.sourceWidth)/l.width,c=(s[4]||l.sourceHeight)/l.height,d=u*l.sourceWidth,p=c*l.sourceHeight,f=l.offsetX>0?l.offsetX:0,g=l.offsetY>0?l.offsetY:0,f*=u,g*=c,t._addPointArrToRst(i,M._getBoundPointS(s[1]-f,s[2]-g,d,p),y));break;case n._drawRect:case 13:t._addPointArrToRst(i,M._getBoundPointS(s[0],s[1],s[2],s[3]),a);break;case n._drawCircle:case n._fillCircle:case 14:t._addPointArrToRst(i,M._getBoundPointS(s[0]-s[2],s[1]-s[2],s[2]+s[2],s[2]+s[2]),a);break;case n._drawLine:case 20:t._tempPoints.length=0;var v=NaN;v=.5*s[5],s[0]==s[2]?t._tempPoints.push(s[0]+v,s[1],s[2]+v,s[3],s[0]-v,s[1],s[2]-v,s[3]):s[1]==s[3]?t._tempPoints.push(s[0],s[1]+v,s[2],s[3]+v,s[0],s[1]-v,s[2],s[3]-v):t._tempPoints.push(s[0],s[1],s[2],s[3]),t._addPointArrToRst(i,t._tempPoints,a);break;case n._drawCurves:case 22:t._addPointArrToRst(i,b.I.getBezierPoints(s[2]),a,s[0],s[1]);break;case n._drawPoly:case n._drawLines:case 18:t._addPointArrToRst(i,s[2],a,s[0],s[1]);break;case n._drawPath:case 19:t._addPointArrToRst(i,this._getPathPoints(s[2]),a,s[0],s[1]);break;case n._drawPie:case 15:t._addPointArrToRst(i,this._getPiePoints(s[0],s[1],s[2],s[3],s[4]),a)}return i.length>200?i=J.copyArray(i,M._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=C.scanPList(i)),i},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},e._getPiePoints=function(e,i,n,o,r){var a=t._tempPoints;t._tempPoints.length=0,a.push(e,i);var s=(r-o)%(2*Math.PI)/10,l=NaN,h=o;for(l=0;l<=10;l++)a.push(e+n*Math.cos(h),i+n*Math.sin(h)),h+=s;return a},e._getPathPoints=function(e){var i=0,n=0,o=t._tempPoints;o.length=0,n=e.length;var r;for(i=0;i<n;i++)(r=e[i]).length>1&&(o.push(r[1],r[2]),r.length>3&&o.push(r[3],r[4]));return o},t._addPointArrToRst=function(e,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a=0,s=0;for(s=i.length,a=0;a<s;a+=2)t._addPointToRst(e,i[a]+o,i[a+1]+r,n)},t._addPointToRst=function(t,e,i,n){var o=T.TEMP;o.setTo(e||0,i||0),n.transformPoint(o),t.push(o.x,o.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],n(t,["_tempMatrix",function(){return this._tempMatrix=new x},"_initMatrix",function(){return this._initMatrix=new x}]),t}(),_=function(){function t(){}o(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},r(0,e,"stageY",function(){return i.stage.mouseY}),r(0,e,"charCode",function(){return this.nativeEvent.charCode}),r(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=i.stage,n=0,o=t.length;n<o;n++){var r=t[n],a=T.TEMP;a.setTo(r.clientX,r.clientY),e._canvasTransform.invertTransformPoint(a),e.transform.invertTransformPoint(a),r.stageX=a.x,r.stageY=a.y}return t}),r(0,e,"keyLocation",function(){return this.nativeEvent.keyLocation}),r(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),r(0,e,"altKey",function(){return this.nativeEvent.altKey}),r(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),r(0,e,"stageX",function(){return i.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLE_CHANGED="enablechanged",t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.MATERIAL_CHANGED="materialchanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.DOMINO_FILTER_CHANGE="dominofilterchange",t}(),m=(function(){function t(){}o(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.ENTER=13,t.ESCAPE=27,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.INSERT=45}(),function(){function t(){}return o(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){k.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t)},!0)},t._dispatch=function(e,n){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===n?t._pressKeys[t._event.keyCode]=!0:"keyup"===n&&(t._pressKeys[t._event.keyCode]=null);for(var o=i.stage.focus&&null!=i.stage.focus.event&&i.stage.focus.displayedInStage?i.stage.focus:i.stage,r=o;r;)r.event(n,t._event.setTo(n,r,o)),r=r.parent}},t.hasKeyDown=function(e){return t._pressKeys[e]},t._pressKeys={},t.enabled=!0,n(t,["_event",function(){return this._event=new _}]),t}()),y=(function(){function t(){}o(t,"laya.events.KeyLocation"),t.STANDARD=0,t.LEFT=1,t.RIGHT=2,t.NUM_PAD=3}(),function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new _,this._matrix=new x,this._point=new T,this._rect=new M,this._prePoint=new T,this._curTouchID=NaN}o(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,i){var n=this;this._stage=e;var o=this,r=this._eventList;i.oncontextmenu=function(e){if(t.enabled)return!1},i.addEventListener("mousedown",function(e){t.enabled&&(k.onIE||e.preventDefault(),r.push(e),o.mouseDownTime=k.now())}),i.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),r.push(e),o.mouseDownTime=-k.now())},!0),i.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var i=k.now();if(i-o._lastMoveTimer<10)return;o._lastMoveTimer=i,r.push(e)}},!0),i.addEventListener("mouseout",function(e){t.enabled&&r.push(e)}),i.addEventListener("mouseover",function(e){t.enabled&&r.push(e)}),i.addEventListener("touchstart",function(e){t.enabled&&(r.push(e),t._isFirstTouch||wt.isInputting||e.preventDefault(),o.mouseDownTime=k.now())}),i.addEventListener("touchend",function(e){t.enabled?(t._isFirstTouch||wt.isInputting||e.preventDefault(),t._isFirstTouch=!1,r.push(e),o.mouseDownTime=-k.now()):n._curTouchID=NaN},!0),i.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),r.push(e))},!0),i.addEventListener("touchcancel",function(e){t.enabled?(e.preventDefault(),r.push(e)):n._curTouchID=NaN},!0),i.addEventListener("mousewheel",function(e){t.enabled&&r.push(e)}),i.addEventListener("DOMMouseScroll",function(e){t.enabled&&r.push(e)})},e.initEvent=function(t,e){this._event._stoped=!1,this._event.nativeEvent=e||t,this._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=t.identifier||0,this._tTouchID=this._event.touchId;var i;(i=v.I._event)._stoped=!1,i.nativeEvent=this._event.nativeEvent,i.touchId=this._event.touchId},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=v.I.getLastOvers(),i=0,n=e.length;i<n;i++){var o=e[i];o.event("mousewheel",this._event.setTo("mousewheel",o,this._target))}},e.onMouseMove=function(t){v.I.onMouseMove(t,this._tTouchID)},e.onMouseDown=function(t){if(wt.isInputting&&i.stage.focus&&i.stage.focus.focus&&!i.stage.focus.contains(this._target)){var e=i.stage.focus._tf||i.stage.focus,n=t._tf||t;n instanceof laya.display.Input&&n.multiline==e.multiline?e._focusOut():e.focus=!1}v.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},e.onMouseUp=function(t){v.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},e.check=function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var o=t.scrollRect;if(o&&(this._rect.setTo(o.x,o.y,o.width,o.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var r=t._childs.length-1;r>-1;r--){var a=t._childs[r];if(!a.destroyed&&a.mouseEnabled&&a.visible&&this.check(a,e,i,n))return!0}}var s=!(!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent)||this.hitTest(t,e,i);return s?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),s},e.hitTest=function(t,e,i){var n=!1;if(t.scrollRect&&(e-=t.scrollRect.x,i-=t.scrollRect.y),t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,i);if(t.width>0&&t.height>0||t.mouseThrough||t.hitArea)if(t.mouseThrough)n=t.getGraphicBounds().contains(e,i);else{var o=this._rect;t.hitArea?o=t.hitArea:o.setTo(0,0,t.width,t.height),n=o.contains(e,i)}return n},e.runEvent=function(){var e=this._eventList.length;if(e){for(var i,n=0,o=0,r=0;n<e;){var a=this._eventList[n];switch("mousemove"!==a.type&&(this._prePoint.x=this._prePoint.y=-1e6),a.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(this._isLeftMouse=0===a.button,this.initEvent(a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===a.button,this.initEvent(a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-a.clientX)+Math.abs(this._prePoint.y-a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=a.clientX,this._prePoint.y=a.clientY,this.initEvent(a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,this._isLeftMouse=!0;var s=a.changedTouches;for(o=0,r=s.length;o<r;o++)i=s[o],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=i.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[i.identifier]=this._id++,this.initEvent(i,a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":t._isTouchRespond=!0,this._isLeftMouse=!0;var l=a.changedTouches;for(o=0,r=l.length;o<r;o++)if(i=l[o],t.multiTouchEnabled||i.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(i,a);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var h=a.changedTouches;for(o=0,r=h.length;o<r;o++)i=h[o],(t.multiTouchEnabled||i.identifier==this._curTouchID)&&(this.initEvent(i,a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(a);break;case"mouseout":v.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}n++}this._eventList.length=0}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,t._isFirstTouch=!0,n(t,["instance",function(){return this.instance=new t}]),t}()),v=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new _}o(t,"laya.events.TouchManager");var e=t.prototype;return e._clearTempArrs=function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0},e.getTouchFromArr=function(t,e){var i=0,n=0;n=e.length;var o;for(i=0;i<n;i++)if((o=e[i]).id==t)return o;return null},e.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;i>=0;i--)e[i].id==t&&e.splice(i,1)},e.createTouchO=function(t,e){var i;return i=H.getItem("TouchData")||{},i.id=e,i.tar=t,i},e.onMouseDown=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var o,r,a;o=this.getTouchFromArr(i,this.preOvers),a=this.getEles(e,null,t._tEleArr),o?o.tar=e:(r=this.createTouchO(e,i),this.preOvers.push(r)),k.onMobile&&this.sendEvents(a,"mouseover");var s;s=n?this.preDowns:this.preRightDowns,(o=this.getTouchFromArr(i,s))?o.tar=e:(r=this.createTouchO(e,i),s.push(r)),this.sendEvents(a,n?"mousedown":"rightmousedown"),this._clearTempArrs()}},e.sendEvents=function(t,e){var i=0,n=0;n=t.length,this._event._stoped=!1;var o;o=t[0];var r;for(i=0;i<n;i++){if((r=t[i]).destroyed)return;if(r.event(e,this._event.setTo(e,r,o)),this._event._stoped)break}},e.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},e.checkMouseOutAndOverOfMove=function(e,i,n){if(void 0===n&&(n=0),i!=e){var o,r,a=0,s=0;if(i.contains(e))r=this.getEles(e,i,t._tEleArr),this.sendEvents(r,"mouseover");else if(e.contains(i))r=this.getEles(i,e,t._tEleArr),this.sendEvents(r,"mouseout");else{(r=t._tEleArr).length=0;var l;l=this.getEles(i,null,t._oldArr);var h;h=this.getEles(e,null,t._newArr),s=l.length;var u=0;for(a=0;a<s;a++){if(o=l[a],(u=h.indexOf(o))>=0){h.splice(u,h.length-u);break}r.push(o)}r.length>0&&this.sendEvents(r,"mouseout"),h.length>0&&this.sendEvents(h,"mouseover")}}},e.onMouseMove=function(e,i){if(this.enable){var n,o;(n=this.getTouchFromArr(i,this.preOvers))?(this.checkMouseOutAndOverOfMove(e,n.tar),n.tar=e,o=this.getEles(e,null,t._tEleArr)):(o=this.getEles(e,null,t._tEleArr),this.sendEvents(o,"mouseover"),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(o,"mousemove"),this._clearTempArrs()}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(i.stage),t._tEleArr)},e.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout")},e.onMouseUp=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var o,r,a,s,l,h=0,u=0,c=k.onMobile;r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,n?"mouseup":"rightmouseup");var d;if(d=n?this.preDowns:this.preRightDowns,o=this.getTouchFromArr(i,d)){var p=!1,f=k.now();if(p=f-this._lastClickTime<300,this._lastClickTime=f,e==o.tar)l=r;else for(a=this.getEles(o.tar,null,t._oldArr),(l=t._newArr).length=0,u=a.length,h=0;h<u;h++)s=a[h],r.indexOf(s)>=0&&l.push(s);l.length>0&&this.sendEvents(l,n?"click":"rightclick"),n&&p&&this.sendEvents(l,"doubleclick"),this.removeTouchFromArr(i,d),o.tar=null,H.recover("TouchData",o)}else;(o=this.getTouchFromArr(i,this.preOvers))&&c&&((l=this.getEles(o.tar,null,l))&&l.length>0&&this.sendEvents(l,"mouseout"),this.removeTouchFromArr(i,this.preOvers),o.tar=null,H.recover("TouchData",o)),this._clearTempArrs()}},t._oldArr=[],t._newArr=[],t._tEleArr=[],n(t,["I",function(){return this.I=new t}]),t}(),I=function(){function t(){this._action=null}o(t,"laya.filters.Filter");var e=t.prototype;return i.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){},r(0,e,"type",function(){return-1}),r(0,e,"action",function(){return this._action}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t}(),w=function(){function t(){this.data=null}o(t,"laya.filters.ColorFilterAction");var e=t.prototype;return i.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,i=t.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var n,o=e.getImageData(0,0,i.width,i.height),r=o.data,a=0,s=r.length;a<s;a+=4)n=this.getColor(r[a],r[a+1],r[a+2],r[a+3]),0!=r[a+3]&&(r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3]);return e.putImageData(o,0,0),t},e.getColor=function(t,e,i,n){var o=[];if(this.data._mat&&this.data._alpha){var r=this.data._mat,a=this.data._alpha;o[0]=r[0]*t+r[1]*e+r[2]*i+r[3]*n+a[0],o[1]=r[4]*t+r[5]*e+r[6]*i+r[7]*n+a[1],o[2]=r[8]*t+r[9]*e+r[10]*i+r[11]*n+a[2],o[3]=r[12]*t+r[13]*e+r[14]*i+r[15]*n+a[3]}return o},t}(),b=(function(){function t(){}o(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t},t.isPOT=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx,t.ty,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty}}(),function(){function t(){this._controlPoints=[new T,new T,new T],this._calFun=this.getPoint2}o(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],o=this._controlPoints[2],r=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*o.x,a=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*o.y;e.push(r,a)},e.getPoint3=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],o=this._controlPoints[2],r=this._controlPoints[3],a=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*o.x*t*t*(1-t)+r.x*Math.pow(t,3),s=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*o.y*t*t*(1-t)+r.y*Math.pow(t,3);e.push(a,s)},e.insertPoints=function(t,e){var i=NaN,n=NaN;for(n=1/(t=t>0?t:5),i=0;i<=1;i+=n)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n=0,o=0;if((o=t.length)<2*(i+1))return[];var r;switch(r=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(new T);for(n=0;n<2*i;n+=2)this._switchPoint(t[n],t[n+1]);for(n=2*i;n<o;n+=2)this._switchPoint(t[n],t[n+1]),n/2%i==0&&this.insertPoints(e,r);return r},n(t,["I",function(){return this.I=new t}]),t}()),C=function(){function t(){}return o(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t._getPoints=function(e,i,n){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new T);return n||(n=[]),n.length=0,i?t.getFrom(n,t._mPointList,e):t.getFromR(n,t._mPointList,e),n},t.getFrom=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e.pop());return t},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var n=0,o=e.length/2,r=t._getPoints(o,i,t._tempPointList);for(n=0;n<o;n++)r[n].setTo(e[n+n],e[n+n+1]);return r},t.pointListToPlist=function(e){var i,n=0,o=e.length,r=t._temPList;for(r.length=0,n=0;n<o;n++)i=e[n],r.push(i.x,i.y);return r},t.scanPList=function(e){return J.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,n,o,r=0,a=0,s=0,l=e.length,h={};for((n=t._temArr).length=0,r=(l=e.length)-1;r>=0;r--)o=(i=e[r]).x+"_"+i.y,h.hasOwnProperty(o)||(h[o]=!0,n.push(i));for(l=n.length,J.copyArray(e,n),r=1;r<l;r++)(e[r].y<e[s].y||e[r].y==e[s].y&&e[r].x<e[s].x)&&(s=r);for(i=e[0],e[0]=e[s],e[s]=i,r=1;r<l-1;r++){for(s=r,a=r+1;a<l;a++)(t.multiply(e[a],e[s],e[0])>0||0==t.multiply(e[a],e[s],e[0])&&t.dis(e[0],e[a])<t.dis(e[0],e[s]))&&(s=a);i=e[r],e[r]=e[s],e[s]=i}if(n=t._temArr,n.length=0,e.length<3)return J.copyArray(n,e);for(n.push(e[0],e[1],e[2]),r=3;r<l;r++){for(;n.length>=2&&t.multiply(e[r],n[n.length-1],n[n.length-2])>=0;)n.pop();e[r]&&n.push(e[r])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),S=function(){function t(){}return o(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},t.lerp=function(t,e,i){return t*(1-i)+e*i},t.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},t.lerpVector3=function(t,e,i,n){var o=t[0],r=t[1],a=t[2];n[0]=o+i*(e[0]-o),n[1]=r+i*(e[1]-r),n[2]=a+i*(e[2]-a)},t.lerpVector4=function(t,e,i,n){var o=t[0],r=t[1],a=t[2],s=t[3];n[0]=o+i*(e[0]-o),n[1]=r+i*(e[1]-r),n[2]=a+i*(e[2]-a),n[3]=s+i*(e[3]-s)},t.slerpQuaternionArray=function(t,e,i,n,o,r,a){var s,l,h,u,c,d=t[e+0],p=t[e+1],f=t[e+2],g=t[e+3],_=i[n+0],m=i[n+1],y=i[n+2],v=i[n+3];return(l=d*_+p*m+f*y+g*v)<0&&(l=-l,_=-_,m=-m,y=-y,v=-v),1-l>1e-6?(s=Math.acos(l),h=Math.sin(s),u=Math.sin((1-o)*s)/h,c=Math.sin(o*s)/h):(u=1-o,c=o),r[a+0]=u*d+c*_,r[a+1]=u*p+c*m,r[a+2]=u*f+c*y,r[a+3]=u*g+c*v,r},t.getRotation=function(t,e,i,n){return Math.atan2(n-e,i-t)/Math.PI*180},t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o;return o=i?n?t.sortNumBigFirst:t.sortBigFirst:n?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return o(t[e],i[e])}},t}(),x=function(){function t(t,e,i,n,o,r){this.inPool=!1,this.bTransform=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=r,this._checkTransform()}o(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.c,r=this.tx;this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this.bTransform=!0},e.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),o=this.a,r=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*o,this.d+=i*r,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,o=this.d,r=this.tx,a=e*o-i*n,s=o/a,l=-i/a,h=-n/a,u=e/a,c=(n*this.ty-o*r)/a,d=-(e*this.ty-i*r)/a;return t.setTo(s*t.x+h*t.y+c,l*t.x+u*t.y+d)},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},e.transformPointArray=function(t,e){for(var i=t.length,n=0;n<i;n+=2){var o=t[n],r=t[n+1];e[n]=this.a*o+this.c*r+this.tx,e[n+1]=this.b*o+this.d*r+this.ty}return e},e.transformPointArrayScale=function(t,e){for(var i=t.length,n=0;n<i;n+=2){var o=t[n],r=t[n+1];e[n]=this.a*o+this.c*r,e[n+1]=this.b*o+this.d*r}return e},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,o=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*o)/r,this.ty=-(t*this.ty-e*o)/r,this},e.setTo=function(t,e,i,n,o,r){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=r,this},e.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.scaleEx=function(t,e){var i=this.a,n=this.b,o=this.c,r=this.d;0!==n||0!==o?(this.a=t*i,this.b=t*n,this.c=e*o,this.d=e*r):(this.a=t*i,this.b=0*r,this.c=0*i,this.d=e*r),this.bTransform=!0},e.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.b,r=this.c,a=this.d;0!==o||0!==r?(this.a=e*n+i*r,this.b=e*o+i*a,this.c=-i*n+e*r,this.d=-i*o+e*a):(this.a=e*n,this.b=i*a,this.c=-i*n,this.d=e*a),this.bTransform=!0},e.clone=function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e.bTransform=this.bTransform,e},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){if(!this.inPool){var e=t._cache;this.inPool=!0,e._length||(e._length=0),e[e._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},t.mul=function(t,e,i){var n=t.a,o=t.b,r=t.c,a=t.d,s=t.tx,l=t.ty,h=e.a,u=e.b,c=e.c,d=e.d,p=e.tx,f=e.ty;return 0!==u||0!==c?(i.a=n*h+o*c,i.b=n*u+o*d,i.c=r*h+a*c,i.d=r*u+a*d,i.tx=h*s+c*l+p,i.ty=u*s+d*l+f):(i.a=n*h,i.b=o*d,i.c=r*h,i.d=a*d,i.tx=h*s+p,i.ty=d*l+f),i},t.mul16=function(t,e,i){var n=t.a,o=t.b,r=t.c,a=t.d,s=t.tx,l=t.ty,h=e.a,u=e.b,c=e.c,d=e.d,p=e.tx,f=e.ty;return 0!==u||0!==c?(i[0]=n*h+o*c,i[1]=n*u+o*d,i[4]=r*h+a*c,i[5]=r*u+a*d,i[12]=h*s+c*l+p,i[13]=u*s+d*l+f):(i[0]=n*h,i[1]=o*d,i[4]=r*h,i[5]=a*d,i[12]=h*s+p,i[13]=d*l+f),i},t.mulPre=function(t,e,i,n,o,r,a,s){var l=t.a,h=t.b,u=t.c,c=t.d,d=t.tx,p=t.ty;return 0!==i||0!==n?(s.a=l*e+h*n,s.b=l*i+h*o,s.c=u*e+c*n,s.d=u*i+c*o,s.tx=e*d+n*p+r,s.ty=i*d+o*p+a):(s.a=l*e,s.b=h*o,s.c=u*e,s.d=c*o,s.tx=e*d+r,s.ty=o*p+a),s},t.mulPos=function(t,e,i,n,o,r,a,s){var l=t.a,h=t.b,u=t.c,c=t.d,d=t.tx,p=t.ty;return 0!==h||0!==u?(s.a=e*l+i*u,s.b=e*h+i*c,s.c=n*l+o*u,s.d=n*h+o*c,s.tx=l*r+u*a+d,s.ty=h*r+c*a+p):(s.a=e*l,s.b=i*c,s.c=n*l,s.d=o*c,s.tx=l*r+d,s.ty=c*a+p),s},t.preMul=function(t,e,i){var n=t.a,o=t.b,r=t.c,a=t.d,s=e.a,l=e.b,h=e.c,u=e.d,c=e.tx,d=e.ty;return i.a=s*n,i.b=i.c=0,i.d=u*a,i.tx=c*n+t.tx,i.ty=d*a+t.ty,0===l&&0===h&&0===o&&0===r||(i.a+=l*r,i.d+=h*o,i.b+=s*o+l*a,i.c+=h*n+u*r,i.tx+=d*r,i.ty+=c*o),i},t.preMulXY=function(t,e,i,n){var o=t.a,r=t.b,a=t.c,s=t.d;return n.a=o,n.b=r,n.c=a,n.d=s,n.tx=e*o+t.tx+i*a,n.ty=i*s+t.ty+e*r,n},t.create=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.inPool=!1,i},t.EMPTY=new t,t.TEMP=new t,t._cache=[],t}(),T=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}o(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}},t.TEMP=new t,t.EMPTY=new t,t}(),M=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}o(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom)},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equals=function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height)},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},e.isEmpty=function(){return this.width<=0||this.height<=0},r(0,e,"right",function(){return this.x+this.width}),r(0,e,"bottom",function(){return this.y+this.height}),t._getBoundPointS=function(e,i,n,o){var r=t._temA;return r.length=0,0==n||0==o?r:(r.push(e,i,e+n,i,e,i+o,e+n,i+o),r)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i||new t;var n,o,r,a,s,l=e.length,h=T.TEMP;for(r=s=-(o=a=99999),n=0;n<l;n+=2)h.x=e[n],h.y=e[n+1],o=o<h.x?o:h.x,a=a<h.y?a:h.y,r=r>h.x?r:h.x,s=s>h.y?s:h.y;return i.setTo(o,a,r-o,s-a)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),L=function(){function t(){}return o(t,"laya.media.SoundManager"),r(1,t,"useAudioMusic",function(){return t._useAudioMusic},function(e){t._useAudioMusic=e,t._musicClass=e?et:null}),r(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){i.stage.off("blur",null,t._stageOnBlur),i.stage.off("focus",null,t._stageOnFocus),i.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(i.stage.on("blur",null,t._stageOnBlur),i.stage.on("focus",null,t._stageOnFocus),i.stage.on("visibilitychange",null,t._visibilityChange))}),r(1,t,"muted",function(){return t._muted},function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e)}),r(1,t,"musicMuted",function(){return t._musicMuted},function(e){e!=t._musicMuted&&(e?(t._tMusic&&t._musicChannel&&!t._musicChannel.isStopped?t._musicChannel.pause():t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._tMusic&&t._musicChannel&&t._musicChannel.resume()))}),r(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t.disposeSoundIfNotUsed=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)if(t._channels[i].url==e)return;t.destroySound(e)},t._visibilityChange=function(){i.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),i.stage.once("mousedown",null,t._stageOnFocus)},t._recoverWebAudio=function(){ot.ctx&&"running"!=ot.ctx.state&&ot.ctx.resume&&ot.ctx.resume()},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),i.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())},t.playSound=function(e,n,o,r,a){if(void 0===n&&(n=1),void 0===a&&(a=0),!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),(e=R.formatURL(e))==t._tMusic){if(t._musicMuted)return null}else{if(P.isConchApp){var s=J.getFileExtension(e);if("wav"!=s&&"ogg"!=s)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var l;k.onMiniGame||(l=i.loader.getRes(e)),r||(r=t._soundClass),l||((l=new r).load(e),k.onMiniGame||at.cacheRes(e,l));var h;return(h=l.play(a,n))?(h.url=e,h.volume=e==t._tMusic?t.musicVolume:t.soundVolume,h.completeHandler=o,h):null},t.destroySound=function(t){var e=i.loader.getRes(t);e&&(at.clearRes(t),e.dispose())},t.playMusic=function(e,i,n,o){return void 0===i&&(i=0),void 0===o&&(o=0),e=R.formatURL(e),t._tMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n,t._musicClass,o)},t.stopSound=function(e){e=R.formatURL(e);var i,n=0;for(n=t._channels.length-1;n>=0;n--)(i=t._channels[n]).url==e&&i.stop()},t.stopAll=function(){t._tMusic=null;var e=0;for(e=t._channels.length-1;e>=0;e--)t._channels[e].stop()},t.stopAllSound=function(){var e,i=0;for(i=t._channels.length-1;i>=0;i--)(e=t._channels[i]).url!=t._tMusic&&e.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._tMusic=null},t.setSoundVolume=function(e,i){if(i)i=R.formatURL(i),t._setVolume(i,e);else{t.soundVolume=e;var n,o=0;for(o=t._channels.length-1;o>=0;o--)(n=t._channels[o]).url!=t._tMusic&&(n.volume=e)}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._tMusic,e)},t._setVolume=function(e,i){e=R.formatURL(e);var n,o=0;for(o=t._channels.length-1;o>=0;o--)(n=t._channels[o]).url==e&&(n.volume=i)},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._tMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t.autoReleaseSound=!0,t}(),D=function(){function e(){}var i;return o(e,"laya.net.LocalStorage"),e.__init__=function(){e._baseClass||(e._baseClass=i,i.init()),e.items=e._baseClass.items,e.support=e._baseClass.support},e.setItem=function(t,i){e._baseClass.setItem(t,i)},e.getItem=function(t){return e._baseClass.getItem(t)},e.setJSON=function(t,i){e._baseClass.setJSON(t,i)},e.getJSON=function(t){return e._baseClass.getJSON(t)},e.removeItem=function(t){e._baseClass.removeItem(t)},e.clear=function(){e._baseClass.clear()},e._baseClass=null,e.items=null,e.support=!1,e.__init$=function(){i=function(){function e(){}return o(e,""),e.init=function(){try{e.support=!0,e.items=t.localStorage,e.setItem("laya","1"),e.removeItem("laya")}catch(t){e.support=!1}e.support||console.log("LocalStorage is not supprot or browser is private mode.")},e.setItem=function(t,i){try{e.support&&e.items.setItem(t,i)}catch(t){console.warn("set localStorage failed",t)}},e.getItem=function(t){return e.support?e.items.getItem(t):null},e.setJSON=function(t,i){try{e.support&&e.items.setItem(t,JSON.stringify(i))}catch(t){console.warn("set localStorage failed",t)}},e.getJSON=function(t){return JSON.parse(e.support?e.items.getItem(t):null)},e.removeItem=function(t){e.support&&e.items.removeItem(t)},e.clear=function(){e.support&&e.items.clear()},e.items=null,e.support=!1,e}()},e}(),E=(function(){function t(){}o(t,"laya.net.ResourceVersion"),t.enable=function(e,n,o){void 0===o&&(o=2),laya.net.ResourceVersion.type=o,i.loader.load(e,h.create(null,t.onManifestLoaded,[n]),null,"json"),R.customFormat=t.addVersionPrefix},t.onManifestLoaded=function(e,i){t.manifest=i,e.run(),i||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t.addVersionPrefix=function(e){return t.manifest&&t.manifest[e]?2==t.type?t.manifest[e]:t.manifest[e]+"/"+e:e},t.FOLDER_VERSION=1,t.FILENAME_VERSION=2,t.manifest=null,t.type=1}(),function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}o(t,"laya.net.TTFLoader");var e=t.prototype;return e.load=function(t){this._url=t;var e=t.split(".ttf")[0].split("/");this.fontName=e[e.length-1],k.window.conch?this._loadConch():k.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e._loadConch=function(){this._http=new rt,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e._onHttpLoaded=function(t){k.window.conch.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()},e._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e._complete=function(){i.timer.clear(this,this._complete),i.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e._checkComplete=function(){a.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e._loadWithFontFace=function(){var t=new k.window.FontFace(this.fontName,"url('"+this._url+"')");k.window.document.fonts.add(t);var e=this;t.loaded.then(function(){e._complete()}),t.load()},e._createDiv=function(){this._div=k.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",k.document.body.appendChild(this._div)},e._loadWithCSS=function(){var t=this,e=k.createElement("style");e.type="text/css",k.document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=a.measureText("LayaTTFFont",this._fontTxt).width;var n=this;e.onload=function(){i.timer.once(1e4,n,t._complete)},i.timer.loop(20,this,this._checkComplete),this._createDiv()},t._testString="LayaTTFFont",t}()),R=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}o(t,"laya.net.URL");var e=t.prototype;return r(0,e,"path",function(){return this._path}),r(0,e,"url",function(){return this._url}),t.formatURL=function(e,i){if(!e)return"null path";if(e.indexOf(":")>0)return e;null!=t.customFormat&&(e=t.customFormat(e,i));var n=e.charAt(0);if("."===n)return t.formatRelativePath((i||t.basePath)+e);if("~"===n)return t.rootPath+e.substring(1);if("d"===n){if(0===e.indexOf("data:image"))return e}else if("/"===n)return e;return(i||t.basePath)+e},t.formatRelativePath=function(t){for(var e=t.split("/"),i=0,n=e.length;i<n;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},t.isAbsolute=function(t){return t.indexOf(":")>0||"/"==t.charAt(0)},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.version={},t.basePath="",t.rootPath="",t.customFormat=function(e){var i=t.version[e];return!P.isConchApp&&i&&(e+="?v="+i),e},t}(),P=function(){function e(t,n){function o(t){i.stage._loop(),k.window.requestAnimationFrame(o)}this._timeId=0;var r=e._mainCanvas.source.style;r.position="absolute",r.top=r.left="0px",r.background="#000000",e._mainCanvas.source.id="layaCanvas";var a=laya.renders.Render.isWebGL;e._mainCanvas.source.width=t,e._mainCanvas.source.height=n,a&&e.WebGL.init(e._mainCanvas,t,n),k.container.appendChild(e._mainCanvas.source),(e._context=new N(t,n,a?null:e._mainCanvas)).ctx.setIsMainContext(),k.window.requestAnimationFrame(o),i.stage.on("visibilitychange",this,this._onVisibilitychange)}o(e,"laya.renders.Render");var n=e.prototype;return n._onVisibilitychange=function(){i.stage.isVisibility?0!=this._timeId&&k.window.clearInterval(this._timeId):this._timeId=k.window.setInterval(this._enterFrame,1e3)},n._enterFrame=function(t){i.stage._loop()},r(1,e,"context",function(){return e._context}),r(1,e,"canvas",function(){return e._mainCanvas.source}),e._context=null,e._mainCanvas=null,e.WebGL=null,e.isConchNode=!1,e.isConchApp=!1,e.isConchWebGL=!1,e.isWebGL=!1,e.is3DMode=!1,e.optimizeTextureMemory=function(t,e){return!0},e.__init$=function(){t.ConchRenderType=t.ConchRenderType||1,t.ConchRenderType|=t.conch?4:0,e.isConchNode=5==(5&t.ConchRenderType),e.isConchApp=4==(4&t.ConchRenderType),e.isConchWebGL=6==t.ConchRenderType},e}(),N=function(){function t(e,i,n){this.x=0,this.y=0,this._drawTexture=function(t,e,i){i[0].loaded&&this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],t,e)},this._fillTexture=function(t,e,i){i[0].loaded&&this.ctx.fillTexture(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._drawTextureWithTransform=function(t,e,i){i[0].loaded&&this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],t,e,i[6])},this._fillQuadrangle=function(t,e,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},this._drawRect=function(t,e,i){var n=this.ctx;null!=i[4]&&(n.fillStyle=i[4],n.fillRect(t+i[0],e+i[1],i[2],i[3],null)),null!=i[5]&&(n.strokeStyle=i[5],n.lineWidth=i[6],n.strokeRect(t+i[0],e+i[1],i[2],i[3],i[6]))},this._drawPie=function(t,e,i){var n=this.ctx;P.isWebGL&&n.setPathId(i[8]),n.beginPath(),P.isWebGL?(n.movePath(i[0]+t,i[1]+e),n.moveTo(0,0)):n.moveTo(t+i[0],e+i[1]),n.arc(t+i[0],e+i[1],i[2],i[3],i[4]),n.closePath(),this._fillAndStroke(i[5],i[6],i[7],!0)},this._clipRect=function(t,e,i){this.ctx.clipRect(t+i[0],e+i[1],i[2],i[3])},this._fillRect=function(t,e,i){this.ctx.fillRect(t+i[0],e+i[1],i[2],i[3],i[4])},this._drawCircle=function(e,i,n){var o=this.ctx;P.isWebGL&&o.setPathId(n[6]),Y.drawCall++,o.beginPath(),P.isWebGL&&o.movePath(n[0]+e,n[1]+i),o.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),o.closePath(),this._fillAndStroke(n[3],n[4],n[5],!0)},this._fillCircle=function(e,i,n){Y.drawCall++;var o=this.ctx;o.beginPath(),o.fillStyle=n[3],o.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),o.fill()},this._setShader=function(t,e,i){this.ctx.setShader(i[0])},this._drawLine=function(t,e,i){var n=this.ctx;P.isWebGL&&n.setPathId(i[6]),n.beginPath(),n.strokeStyle=i[4],n.lineWidth=i[5],P.isWebGL?(n.movePath(t,e),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3])):(n.moveTo(t+i[0],e+i[1]),n.lineTo(t+i[2],e+i[3])),n.stroke()},this._drawLines=function(t,e,i){var n=this.ctx;P.isWebGL&&n.setPathId(i[5]),n.beginPath(),t+=i[0],e+=i[1],P.isWebGL&&n.movePath(t,e),n.strokeStyle=i[3],n.lineWidth=i[4];var o=i[2],r=2,a=o.length;if(P.isWebGL)for(n.moveTo(o[0],o[1]);r<a;)n.lineTo(o[r++],o[r++]);else for(n.moveTo(t+o[0],e+o[1]);r<a;)n.lineTo(t+o[r++],e+o[r++]);n.stroke()},this._drawLinesWebGL=function(t,e,i){this.ctx.drawLines(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},this._drawCurves=function(t,e,i){this.ctx.drawCurves(t,e,i)},this._draw=function(t,e,i){i[0].call(null,this,t,e)},this._transformByMatrix=function(t,e,i){this.ctx.transformByMatrix(i[0])},this._setTransform=function(t,e,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},this._setTransformByMatrix=function(t,e,i){this.ctx.setTransformByMatrix(i[0])},this._save=function(t,e,i){this.ctx.save()},this._restore=function(t,e,i){this.ctx.restore()},this._translate=function(t,e,i){this.ctx.translate(i[0],i[1])},this._transform=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e);var n=i[0];this.ctx.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.ctx.translate(-t-i[1],-e-i[2])},this._rotate=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e),this.ctx.rotate(i[0]),this.ctx.translate(-t-i[1],-e-i[2])},this._scale=function(t,e,i){this.ctx.translate(i[2]+t,i[3]+e),this.ctx.scale(i[0],i[1]),this.ctx.translate(-t-i[2],-e-i[3])},this._alpha=function(t,e,i){this.ctx.globalAlpha*=i[0]},this._setAlpha=function(t,e,i){this.ctx.globalAlpha=i[0]},this._fillText=function(t,e,i){this.ctx.fillText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5])},this._strokeText=function(t,e,i){this.ctx.strokeText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6])},this._fillBorderText=function(t,e,i){this.ctx.fillBorderText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._blendMode=function(t,e,i){this.ctx.globalCompositeOperation=i[0]},this._beginClip=function(t,e,i){this.ctx.beginClip&&this.ctx.beginClip(t+i[0],e+i[1],i[2],i[3])},this._setIBVB=function(t,e,i){this.ctx.setIBVB(i[0]+t,i[1]+e,i[2],i[3],i[4],i[5],i[6],i[7])},this._fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1]+t,i[2]+e,i[3],i[4])},this._drawPath=function(t,e,i){var n=this.ctx;P.isWebGL&&n.setPathId(-1),n.beginPath(),t+=i[0],e+=i[1],P.isWebGL&&n.movePath(t,e);for(var o=i[2],r=0,a=o.length;r<a;r++){var s=o[r];switch(s[0]){case"moveTo":P.isWebGL?n.moveTo(s[1],s[2]):n.moveTo(t+s[1],e+s[2]);break;case"lineTo":P.isWebGL?n.lineTo(s[1],s[2]):n.lineTo(t+s[1],e+s[2]);break;case"arcTo":P.isWebGL?n.arcTo(s[1],s[2],s[3],s[4],s[5]):n.arcTo(t+s[1],e+s[2],t+s[3],e+s[4],s[5]);break;case"closePath":n.closePath()}}var l=i[3];null!=l&&(n.fillStyle=l.fillStyle,n.fill());var h=i[4];null!=h&&(n.strokeStyle=h.strokeStyle,n.lineWidth=h.lineWidth||1,n.lineJoin=h.lineJoin,n.lineCap=h.lineCap,n.miterLimit=h.miterLimit,n.stroke())},this.drawPoly=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},this._drawPoly=function(t,e,i){var n=this.ctx,o=i[2],r=2,a=o.length;if(P.isWebGL)for(n.setPathId(i[6]),n.beginPath(),t+=i[0],e+=i[1],n.movePath(t,e),n.moveTo(o[0],o[1]);r<a;)n.lineTo(o[r++],o[r++]);else for(n.beginPath(),t+=i[0],e+=i[1],n.moveTo(t+o[0],e+o[1]);r<a;)n.lineTo(t+o[r++],e+o[r++]);n.closePath(),this._fillAndStroke(i[3],i[4],i[5],i[7])},this._drawSkin=function(t,e,i){var n=i[0];if(n){var o=this.ctx;n.render(o,t,e)}},this._drawParticle=function(t,e,i){this.ctx.drawParticle(t+this.x,e+this.y,i[0])},this._setFilters=function(t,e,i){this.ctx.setFilters(i)},n?this.ctx=n.getContext("2d"):(n=vt.create("3D"),this.ctx=a.createWebGLContext2D(n),n._setContext(this.ctx)),n.size(e,i),this.canvas=n}o(t,"laya.renders.RenderContext");var e=t.prototype;return e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e.drawTexture=function(t,e,i,n,o){t.loaded&&this.ctx.drawTexture(t,e,i,n,o,this.x,this.y)},e._drawTextures=function(t,e,i){i[0].loaded&&this.ctx.drawTextures(i[0],i[1],t+this.x,e+this.y)},e.drawTextureWithTransform=function(t,e,i,n,o,r,a){t.loaded&&this.ctx.drawTextureWithTransform(t,e,i,n,o,r,this.x,this.y,a)},e.fillQuadrangle=function(t,e,i,n,o){this.ctx.fillQuadrangle(t,e,i,n,o)},e.drawCanvas=function(t,e,i,n,o){this.ctx.drawCanvas(t,e+this.x,i+this.y,n,o)},e.drawRect=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=this.ctx;a.strokeStyle=o,a.lineWidth=r,a.strokeRect(t+this.x,e+this.y,i,n,r)},e._fillAndStroke=function(t,e,i,n){void 0===n&&(n=!1);var o=this.ctx;null!=t&&(o.fillStyle=t,P.isWebGL?o.fill(n):o.fill()),null!=e&&i>0&&(o.strokeStyle=e,o.lineWidth=i,o.stroke())},e.clipRect=function(t,e,i,n){this.ctx.clipRect(t+this.x,e+this.y,i,n)},e.fillRect=function(t,e,i,n,o){this.ctx.fillRect(t+this.x,e+this.y,i,n,o)},e.drawCircle=function(e,i,n,o,r){void 0===r&&(r=1),Y.drawCall++;var a=this.ctx;a.beginPath(),a.strokeStyle=o,a.lineWidth=r,a.arc(e+this.x,i+this.y,n,0,t.PI2),a.stroke()},e.drawTriangles=function(t,e,i){if(P.isWebGL)this.ctx.drawTriangles(i[0],t+i[1],e+i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9]);else{var n=i[5],o=0,r=n.length,a=this.ctx;for(o=0;o<r;o+=3){var s=2*n[o],l=2*n[o+1],h=2*n[o+2];a.drawTriangle(i[0],i[3],i[4],s,l,h,i[6],!0)}}},e.fillCircle=function(e,i,n,o){Y.drawCall++;var r=this.ctx;r.beginPath(),r.fillStyle=o,r.arc(e+this.x,i+this.y,n,0,t.PI2),r.fill()},e.setShader=function(t){this.ctx.setShader(t)},e.drawLine=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=this.ctx;a.beginPath(),a.strokeStyle=o,a.lineWidth=r,a.moveTo(this.x+t,this.y+e),a.lineTo(this.x+i,this.y+n),a.stroke()},e.clear=function(){this.ctx.clear()},e.transformByMatrix=function(t){this.ctx.transformByMatrix(t)},e.setTransform=function(t,e,i,n,o,r){this.ctx.setTransform(t,e,i,n,o,r)},e.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t)},e.save=function(){this.ctx.save()},e.restore=function(){this.ctx.restore()},e.translate=function(t,e){this.ctx.translate(t,e)},e.transform=function(t,e,i,n,o,r){this.ctx.transform(t,e,i,n,o,r)},e.rotate=function(t){this.ctx.rotate(t)},e.scale=function(t,e){this.ctx.scale(t,e)},e.alpha=function(t){this.ctx.globalAlpha*=t},e.setAlpha=function(t){this.ctx.globalAlpha=t},e.fillWords=function(t,e,i,n,o,r){void 0===r&&(r=0),this.ctx.fillWords(t,e,i,n,o,r)},e.fillBorderWords=function(t,e,i,n,o,r,a){this.ctx.fillBorderWords(t,e,i,n,o,r,a)},e.fillText=function(t,e,i,n,o,r){this.ctx.fillText(t,e+this.x,i+this.y,n,o,r)},e.strokeText=function(t,e,i,n,o,r,a){this.ctx.strokeText(t,e+this.x,i+this.y,n,o,r,a)},e.blendMode=function(t){this.ctx.globalCompositeOperation=t},e.flush=function(){this.ctx.flush&&this.ctx.flush()},e.addRenderObject=function(t){this.ctx.addRenderObject(t)},e.beginClip=function(t,e,i,n){this.ctx.beginClip&&this.ctx.beginClip(t,e,i,n)},e.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e.fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],i.length>4?i[4]:null)},t.PI2=2*Math.PI,t}(),G=function(){function t(e,i){switch(this._next=i||t.NORENDER,e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=I._filter);case 69905:return void(this._fun=t._initRenderFun)}this.onCreate(e)}o(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(t){},e._style=function(t,e,i,n){t._style.render(t,e,i,n);var o=this._next;o._fun.call(o,t,e,i,n)},e._no=function(t,e,i,n){},e._custom=function(t,e,i,n){t.customRender(e,i,n);var o=t._style._tf;this._next._fun.call(this._next,t,e,i-o.translateX,n-o.translateY)},e._clip=function(e,i,n,o){var r=this._next;if(r!=t.NORENDER){var a=e._style.scrollRect;i.ctx.save(),i.ctx.clipRect(n,o,a.width,a.height),r._fun.call(r,e,i,n-a.x,o-a.y),i.ctx.restore()}},e._blend=function(t,e,i,n){var o=t._style;o.blendMode&&(e.ctx.globalCompositeOperation=o.blendMode);var r=this._next;r._fun.call(r,t,e,i,n),e.ctx.globalCompositeOperation="source-over"},e._mask=function(t,e,i,n){var o=this._next;o._fun.call(o,t,e,i,n);var r=t.mask;r&&(e.ctx.globalCompositeOperation="destination-in",(r.numChildren>0||!r.graphics._isOnlyOne())&&(r.cacheAsBitmap=!0),r.render(e,i-t.pivotX,n-t.pivotY)),e.ctx.globalCompositeOperation="source-over"},e._graphics=function(t,e,i,n){var o=t._style._tf;t._graphics&&t._graphics._render(t,e,i-o.translateX,n-o.translateY);var r=this._next;r._fun.call(r,t,e,i,n)},e._image=function(t,e,i,n){var o=t._style;e.ctx.drawTexture2(i,n,o._tf.translateX,o._tf.translateY,t.transform,o.alpha,o.blendMode,t._graphics._one)},e._image2=function(t,e,i,n){var o=t._style._tf;e.ctx.drawTexture2(i,n,o.translateX,o.translateY,t.transform,1,null,t._graphics._one)},e._alpha=function(t,e,i,n){var o;if((o=t._style.alpha)>.01||t._needRepaint()){var r=e.ctx.globalAlpha;e.ctx.globalAlpha*=o;var a=this._next;a._fun.call(a,t,e,i,n),e.ctx.globalAlpha=r}},e._transform=function(e,i,n,o){var r=e.transform,a=this._next;r&&a!=t.NORENDER?(i.save(),i.transform(r.a,r.b,r.c,r.d,r.tx+n,r.ty+o),a._fun.call(a,e,i,0,0),i.restore()):a._fun.call(a,e,i,n,o)},e._childs=function(t,e,i,n){var o=t._style,r=o._tf;if(i=i-r.translateX+o.paddingLeft,n=n-r.translateY+o.paddingTop,o._calculation){var a=t._getWords();if(a){var s=o;s&&(s.stroke?e.fillBorderWords(a,i,n,s.font,s.color,s.strokeColor,s.stroke):e.fillWords(a,i,n,s.font,s.color,"none"!=s.textDecoration&&s.underLine?1:0))}}var l,h=t._childs,u=h.length;if(t.viewport||t.optimizeScrollRect&&t._style.scrollRect){var c=t.viewport||t._style.scrollRect,d=c.x,p=c.y,f=c.right,g=c.bottom,_=NaN,m=NaN;for(y=0;y<u;++y)(l=h[y]).visible&&(_=l._x)<f&&_+l.width>d&&(m=l._y)<g&&m+l.height>p&&l.render(e,i,n)}else for(var y=0;y<u;++y)(l=h[y])._style.visible&&l.render(e,i,n)},e._canvas=function(t,e,i,n){var o=t._$P.cacheCanvas;if(o){"bitmap"===o.type?Y.canvasBitmap++:Y.canvasNormal++;var r=o.ctx;if(t._needRepaint()||!r)this._canvas_repaint(t,e,i,n);else{var a=o._cacheRec;e.drawCanvas(r.canvas,i+a.x,n+a.y,a.width,a.height)}}else this._next._fun.call(this._next,t,e,i,n)},e._canvas_repaint=function(t,e,n,o){var r=t._$P.cacheCanvas,a=this._next;if(r){var s,l,h,u,c=r.ctx,d=t._needRepaint()||!c,p=r.type;if("bitmap"===p?Y.canvasBitmap++:Y.canvasNormal++,d){r._cacheRec||(r._cacheRec=new M);var f,g;P.isWebGL&&"bitmap"!==p?r._cacheRec.setTo(-t.pivotX,-t.pivotY,1,1):((u=t.getSelfBounds()).x=u.x-t.pivotX,u.y=u.y-t.pivotY,u.x=u.x-16,u.y=u.y-16,u.width=u.width+32,u.height=u.height+32,u.x=Math.floor(u.x+n)-n,u.y=Math.floor(u.y+o)-o,u.width=Math.floor(u.width),u.height=Math.floor(u.height),r._cacheRec.copyFrom(u)),u=r._cacheRec;var _=P.isWebGL?1:k.pixelRatio*i.stage.clientScaleX,m=P.isWebGL?1:k.pixelRatio*i.stage.clientScaleY;if(!P.isWebGL){var y,v=1,I=1;for(y=t;y&&y!=i.stage;)v*=y.scaleX,I*=y.scaleY,y=y.parent;P.isWebGL?(v<1&&(_*=v),I<1&&(m*=I)):(v>1&&(_*=v),I>1&&(m*=I))}if(t.scrollRect){var w=t.scrollRect;u.x-=w.x,u.y-=w.y}if(f=u.width*_,g=u.height*m,l=u.x,h=u.y,P.isWebGL&&"bitmap"===p&&(f>2048||g>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),r.ctx&&(H.recover("RenderContext",r.ctx),r.ctx.canvas.size(0,0),r.ctx=null),void a._fun.call(a,t,e,n,o);c||(c=r.ctx=H.getItem("RenderContext")||new N(f,g,vt.create("AUTO"))),c.ctx.sprite=t,(s=c.canvas).clear(),(s.width!=f||s.height!=g)&&s.size(f,g),"bitmap"===p?s.context.asBitmap=!0:"normal"===p&&(s.context.asBitmap=!1);var b;if(1!=_||1!=m){var C=c.ctx;C.save(),C.scale(_,m),!P.isConchWebGL&&P.isConchApp&&(b=t._$P.cf)&&C.setFilterMatrix&&C.setFilterMatrix(b._mat,b._alpha),a._fun.call(a,t,c,-l,-h),C.restore(),P.isConchApp&&!P.isConchWebGL||t._applyFilters()}else C=c.ctx,!P.isConchWebGL&&P.isConchApp&&(b=t._$P.cf)&&C.setFilterMatrix&&C.setFilterMatrix(b._mat,b._alpha),a._fun.call(a,t,c,-l,-h),P.isConchApp&&!P.isConchWebGL||t._applyFilters();t._$P.staticCache&&(r.reCache=!1),Y.canvasReCache++}else l=(u=r._cacheRec).x,h=u.y,s=c.canvas;e.drawCanvas(s,n+l,o+h,u.width,u.height)}else a._fun.call(a,t,c,n,o)},t.__init__=function(){var e,i=0,n=0;for(e=a.createRenderSprite(69905,null),n=t.renders.length=4096,i=0;i<n;i++)t.renders[i]=e;t.renders[0]=a.createRenderSprite(0,null),function(e,i){for(var n=0,o=0;o<e.length;o++)n|=e[o],t.renders[n]=i}([1,512,4,2],new t(1,null)),t.renders[513]=a.createRenderSprite(513,null),t.renders[517]=new t(517,null)},t._initRenderFun=function(e,i,n,o){var r=e._renderType;(t.renders[r]=t._getTypeRender(r))._fun(e,i,n,o)},t._getTypeRender=function(t){for(var e=null,i=2048;i>1;)i&t&&(e=a.createRenderSprite(i,e)),i>>=1;return e},t.IMAGE=1,t.ALPHA=2,t.TRANSFORM=4,t.BLEND=8,t.CANVAS=16,t.FILTERS=32,t.MASK=64,t.CLIP=128,t.STYLE=256,t.GRAPHICS=512,t.CUSTOM=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),A=function(){function t(){this._repaint=!1}o(t,"laya.resource.Context");var e=t.prototype;return e.replaceReset=function(){var e=0,i=0;i=t.replaceKeys.length;var n;for(e=0;e<i;e++)n=t.replaceKeys[e],this[t.newKeys[e]]=this[n]},e.replaceResotre=function(){this.__restore(),this.__reset()},e.setIsMainContext=function(){},e.drawTextures=function(t,e,i,n){Y.drawCall+=e.length/2;for(var o=t.width,r=t.height,a=0,s=e.length;a<s;a+=2)this.drawTexture(t,e[a],e[a+1],o,r,i,n)},e.drawCanvas=function(t,e,i,n,o){Y.drawCall++,this.drawImage(t.source,e,i,n,o)},e.fillRect=function(t,e,i,n,o){Y.drawCall++,o&&(this.fillStyle=o),this.__fillRect(t,e,i,n)},e.fillText=function(t,e,i,n,o,r){Y.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=o,this.textAlign=r,this.textBaseline="top"),this.__fillText(t,e,i)},e.fillBorderText=function(t,e,i,n,o,r,a,s){Y.drawCall++,this.font=n,this.fillStyle=o,this.textBaseline="top",this.strokeStyle=r,this.lineWidth=a,this.textAlign=s,this.__strokeText(t,e,i),this.__fillText(t,e,i)},e.strokeText=function(t,e,i,n,o,r,a){Y.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=o,this.lineWidth=r,this.textAlign=a,this.textBaseline="top"),this.__strokeText(t,e,i)},e.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,n){Y.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},e.drawTexture=function(t,e,i,n,o,r,a){Y.drawCall++;var s=t.uv,l=t.bitmap.width,h=t.bitmap.height;this.drawImage(t.source,s[0]*l,s[1]*h,(s[2]-s[0])*l,(s[5]-s[3])*h,e+r,i+a,n,o)},e.drawTextureWithTransform=function(t,e,i,n,o,r,a,s,l){Y.drawCall++;var h=t.uv,u=t.bitmap.width,c=t.bitmap.height;this.save(),1!=l&&(this.globalAlpha*=l),r?(this.transform(r.a,r.b,r.c,r.d,r.tx+a,r.ty+s),this.drawImage(t.source,h[0]*u,h[1]*c,(h[2]-h[0])*u,(h[5]-h[3])*c,e,i,n,o)):this.drawImage(t.source,h[0]*u,h[1]*c,(h[2]-h[0])*u,(h[5]-h[3])*c,e+a,i+s,n,o),this.restore()},e.drawTexture2=function(t,e,i,n,o,r,a,s){var l=s[0];if(l.loaded&&l.bitmap&&l.source){Y.drawCall++;var h=1!==r;if(h){var u=this.globalAlpha;this.globalAlpha*=r}var c=l.uv,d=l.bitmap.width,p=l.bitmap.height;o?(this.save(),this.transform(o.a,o.b,o.c,o.d,o.tx+t,o.ty+e),this.drawImage(l.source,c[0]*d,c[1]*p,(c[2]-c[0])*d,(c[5]-c[3])*p,s[1]-i,s[2]-n,s[3],s[4]),this.restore()):this.drawImage(l.source,c[0]*d,c[1]*p,(c[2]-c[0])*d,(c[5]-c[3])*p,s[1]-i+t,s[2]-n+e,s[3],s[4]),h&&(this.globalAlpha=u)}},e.fillTexture=function(t,e,i,n,o,r,a,s){if(!s.pat){if(t.uv!=ht.DEF_UV){var l=new vt("2D");l.getContext("2d"),l.size(t.width,t.height),l.context.drawTexture(t,0,0,t.width,t.height,0,0),t=new ht(l)}s.pat=this.createPattern(t.bitmap.source,r)}var h=e,u=i,c=0,d=0;a&&(h+=a.x%t.width,u+=a.y%t.height,c-=a.x%t.width,d-=a.y%t.height),this.translate(h,u),this.fillRect(c,d,n,o,s.pat),this.translate(-h,-u)},e.drawTriangle=function(t,e,i,n,o,r,a,s){var l=t.bitmap,h=l.source,u=t.width,c=t.height,d=l.width,p=l.height,f=i[n]*d,g=i[o]*d,_=i[r]*d,m=i[n+1]*p,y=i[o+1]*p,v=i[r+1]*p,I=e[n],w=e[o],b=e[r],C=e[n+1],S=e[o+1],x=e[r+1];if(s){var T=(I+w+b)/3,M=(C+S+x)/3,L=I-T,D=C-M,E=Math.sqrt(L*L+D*D);I=T+L/E*(E+1),C=M+D/E*(E+1),D=S-M,w=T+(L=w-T)/(E=Math.sqrt(L*L+D*D))*(E+1),S=M+D/E*(E+1),D=x-M,b=T+(L=b-T)/(E=Math.sqrt(L*L+D*D))*(E+1),x=M+D/E*(E+1)}this.save(),a&&this.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),this.beginPath(),this.moveTo(I,C),this.lineTo(w,S),this.lineTo(b,x),this.closePath(),this.clip();var R=1/(f*y+m*_+g*v-y*_-m*g-f*v),P=I*y+m*b+w*v-y*b-m*w-I*v,N=f*w+I*_+g*b-w*_-I*g-f*b,G=f*y*b+m*w*_+I*g*v-I*y*_-m*g*b-f*w*v,A=C*y+m*x+S*v-y*x-m*S-C*v,U=f*S+C*_+g*x-S*_-C*g-f*x,k=f*y*x+m*S*_+C*g*v-C*y*_-m*g*x-f*S*v;this.transform(P*R,A*R,N*R,U*R,G*R,k*R),this.drawImage(h,t.uv[0]*d,t.uv[1]*p,u,c,t.uv[0]*d,t.uv[1]*p,u,c),this.restore()},e.flush=function(){return 0},e.fillWords=function(t,e,i,n,o,r){n&&(this.font=n),o&&(this.fillStyle=o);this.textBaseline="top",this.textAlign="left";for(var a=0,s=t.length;a<s;a++){var l=t[a];if(this.__fillText(l.char,l.x+e,l.y+i),1===r){var h=l.height,u=.5*l.style.letterSpacing;u||(u=0),this.beginPath(),this.strokeStyle=o,this.lineWidth=1,this.moveTo(e+l.x-u+.5,i+l.y+h+.5),this.lineTo(e+l.x+l.width+u+.5,i+l.y+h+.5),this.stroke()}}},e.fillBorderWords=function(t,e,i,n,o,r,a){n&&(this.font=n),o&&(this.fillStyle=o),this.textBaseline="top",this.lineWidth=a,this.textAlign="left",this.strokeStyle=r;for(var s=0,l=t.length;s<l;s++){var h=t[s];this.__strokeText(h.char,h.x+e,h.y+i),this.__fillText(h.char,h.x+e,h.y+i)}},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},e.drawCurves=function(t,e,i){this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.moveTo(t+n[0],e+n[1]);for(var o=2,r=n.length;o<r;)this.quadraticCurveTo(t+n[o++],e+n[o++],t+n[o++],e+n[o++]);this.stroke()},t.__init__=function(t){var e=laya.resource.Context.prototype;if(!(t=t||CanvasRenderingContext2D.prototype).inited){t.inited=!0,t.__fillText=t.fillText,t.__fillRect=t.fillRect,t.__strokeText=t.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(i){t[i]=e[i]})}},t.replaceCanvasGetSet=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);if(!i||!i.configurable)return!1;var n,o={};for(n in i)"set"!=n&&(o[n]=i[n]);var r=i.set;return o.set=function(t){r.call(this,t);var e=this.getContext("2d");e&&"__reset"in e&&e.__reset()},Object.defineProperty(t,e,o),!0},t.replaceGetSet=function(e,i){var n=Object.getOwnPropertyDescriptor(e,i);if(!n||!n.configurable)return!1;var o,r={};for(o in n)"set"!=o&&(r[o]=n[o]);var a=n.set,s="___"+i+"__";return t.newKeys.push(s),r.set=function(t){t!=this[s]&&(this[s]=t,a.call(this,t))},Object.defineProperty(e,i,r),!0},t._default=new t,t.newKeys=[],n(t,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),t}(),U=function(){function t(e){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++t._uniqueIDCounter,this._name=e||"Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t._resourceManagers.push(this),this._resources=[]}o(t,"laya.resource.ResourceManager");var e=t.prototype;return i.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);return-1===this._resources.indexOf(t)&&(t._resourceManager=this,this._resources.push(t),this.addSize(t.memorySize),!0)},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e&&(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,!0)},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){t[e].destroy()}t.length=0},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var n=e[i];n.resourceManager.removeResource(n),n.destroy()}e.length=0},e.addSize=function(t){t&&(this.autoRelease&&t>0&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t)},e.garbageCollection=function(t){var e=this._resources;(e=e.slice()).sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t._lastUseFrameCount-e._lastUseFrameCount});for(var i=Y.loopCount,n=0,o=e.length;n<o;n++){var r=e[n];if(!(i-r._lastUseFrameCount>1))return void(this._memorySize>=t&&(this._isOverflow=!0));if(r.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1)}},r(0,e,"id",function(){return this._id}),r(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),r(0,e,"memorySize",function(){return this._memorySize}),r(1,t,"systemResourceManager",function(){return t._systemResourceManager}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var o=0;o<t.currentResourceManager._resources.length;o++)t.currentResourceManager._resources[o].releaseResource(e),t.currentResourceManager._resources[o].activeResource(e)}t.currentResourceManager=i},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var o=0;o<t.currentResourceManager._resources.length;o++){var r=t.currentResourceManager._resources[o];!r.released&&r.releaseResource(e)}}t.currentResourceManager=i},t._uniqueIDCounter=0,t._isResourceManagersSorted=!1,t._resourceManagers=[],n(t,["_systemResourceManager",function(){return this._systemResourceManager=new t("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=t._systemResourceManager}]),t}(),k=(function(){function t(){}o(t,"laya.system.System"),t.changeDefinition=function(t,e){i[t]=e;var n=t+"=classObj";i._runScript(n)},t.__init__=function(){P.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function n(){}return o(n,"laya.utils.Browser"),r(1,n,"pixelRatio",function(){return n.__init__(),n.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:a.getPixelRatio()}),r(1,n,"height",function(){return n.__init__(),(i.stage&&i.stage.canvasRotation?n.clientWidth:n.clientHeight)*n.pixelRatio}),r(1,n,"clientWidth",function(){return n.__init__(),n.window.innerWidth||n.document.body.clientWidth}),r(1,n,"window",function(){return n.__init__(),n._window}),r(1,n,"clientHeight",function(){return n.__init__(),n.window.innerHeight||n.document.body.clientHeight||n.document.documentElement.clientHeight}),r(1,n,"width",function(){return n.__init__(),(i.stage&&i.stage.canvasRotation?n.clientHeight:n.clientWidth)*n.pixelRatio}),r(1,n,"container",function(){return n.__init__(),n._container||((n._container=n.createElement("div")).id="layaContainer",n.document.body.appendChild(n._container)),n._container},function(t){n._container=t}),r(1,n,"document",function(){return n.__init__(),n._document}),n.__init__=function(){if(!n._window){n._window=a.getWindow(),n._document=n.window.document,n._window.addEventListener("message",function(t){laya.utils.Browser._onMessage(t)},!1),n.document.__createElement=n.document.createElement,t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)};var i=t.document.body.style;i["-webkit-user-select"]="none",i["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",n.userAgent=n.window.navigator.userAgent,n.onIOS=!!(n.u=n.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),n.onMobile=n.u.indexOf("Mobile")>-1,n.onIPhone=n.u.indexOf("iPhone")>-1,n.onMac=n.u.indexOf("Mac OS X")>-1,n.onIPad=n.u.indexOf("iPad")>-1,n.onAndroid=n.u.indexOf("Android")>-1||n.u.indexOf("Adr")>-1,n.onWP=n.u.indexOf("Windows Phone")>-1,n.onQQBrowser=n.u.indexOf("QQBrowser")>-1,n.onMQQBrowser=n.u.indexOf("MQQBrowser")>-1||n.u.indexOf("Mobile")>-1&&n.u.indexOf("QQ")>-1,n.onIE=!!n.window.ActiveXObject||"ActiveXObject"in n.window,n.onWeiXin=n.u.indexOf("MicroMessenger")>-1,n.onPC=!n.onMobile,n.onSafari=n.u.indexOf("Safari")>-1,n.onFirefox=n.u.indexOf("Firefox")>-1,n.onEdge=n.u.indexOf("Edge")>-1,n.onMiniGame=n.u.indexOf("MiniGame")>-1,n.onLimixiu=n.u.indexOf("limixiu")>-1,n.httpProtocol="http:"==n.window.location.protocol,n.onMiniGame&&null==n.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),n.webAudioEnabled=!!(n.window.AudioContext||n.window.webkitAudioContext||n.window.mozAudioContext),n.soundType=n.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",nt=n.webAudioEnabled?ot:et,n.webAudioEnabled&&ot.initWebAudio(),et._initMusicAudio(),n.enableTouch="ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch,t.focus(),L._soundClass=nt,L._musicClass=et,P._mainCanvas=P._mainCanvas||vt.create("2D"),n.canvas||(n.canvas=vt.create("2D"),n.context=n.canvas.getContext("2d"))}},n._onMessage=function(t){if(t.data&&"size"==t.data.name){if(n.window.innerWidth=t.data.width,n.window.innerHeight=t.data.height,n.window.__innerHeight=t.data.clientHeight,!n.document.createEvent)return void console.warn("no document.createEvent");var e=n.document.createEvent("HTMLEvents");return e.initEvent("resize",!1,!1),void n.window.dispatchEvent(e)}},n.createElement=function(t){return n.__init__(),n.document.__createElement(t)},n.getElementById=function(t){return n.__init__(),n.document.getElementById(t)},n.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},n.now=function(){return a.now()},n._window=null,n._document=null,n._container=null,n.userAgent=null,n.u=null,n.onIOS=!1,n.onMac=!1,n.onMobile=!1,n.onIPhone=!1,n.onIPad=!1,n.onAndroid=!1,n.onWP=!1,n.onQQBrowser=!1,n.onMQQBrowser=!1,n.onSafari=!1,n.onFirefox=!1,n.onEdge=!1,n.onIE=!1,n.onWeiXin=!1,n.onMiniGame=!1,n.onLimixiu=!1,n.onPC=!1,n.httpProtocol=!1,n.webAudioEnabled=!1,n.soundType=null,n.enableTouch=!1,n.canvas=null,n.context=null,n.__init$=function(){},n}()),B=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}o(t,"laya.utils.Byte");var e=t.prototype;return e.___resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(e){throw"___resizeBuffer err:"+t}},e.getString=function(){return this.rUTF(this.getUint16())},e.getFloat32Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Float32Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getUint8Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Uint8Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getInt16Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Int16Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t},e.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t},e.writeFloat32=function(t){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4},e.writeFloat64=function(t){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8},e.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t},e.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t},e.writeInt32=function(t){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4},e.writeUint32=function(t){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4},e.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t},e.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t},e.writeUint16=function(t){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2},e.writeInt16=function(t){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2},e.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},e.writeUint8=function(t){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++},e._getUInt8=function(t){return this._d_.getUint8(t)},e._getUint16=function(t){return this._d_.getUint16(t,this._xd_)},e._getMatrix=function(){return new x(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},e.rUTF=function(t){for(var e="",i=this._pos_+t,n=0,o=String.fromCharCode,r=this._u8d_;this._pos_<i;)(n=r[this._pos_++])<128?0!=n&&(e+=o(n)):e+=o(n<224?(63&n)<<6|127&r[this._pos_++]:n<240?(31&n)<<12|(127&r[this._pos_++])<<6|127&r[this._pos_++]:(15&n)<<18|(127&r[this._pos_++])<<12|r[this._pos_++]<<6&127|127&r[this._pos_++]),0;return e},e.getCustomString=function(t){for(var e="",i=0,n=0,o=String.fromCharCode,r=this._u8d_;t>0;)if((n=r[this._pos_])<128)e+=o(n),this._pos_++,t--;else for(i=n-128,this._pos_++,t-=i;i>0;)n=r[this._pos_++],e+=o(r[this._pos_++]<<8|n),i--;return e},e.clear=function(){this._pos_=0,this.length=0},e.__getBuffer=function(){return this._d_.buffer},e.writeUTFBytes=function(t){for(var e=0,i=(t+="").length;e<i;e++){var n=t.charCodeAt(e);n<=127?this.writeByte(n):n<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2):n<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}},e.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;if(i>=65536)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e,i,this._xd_)},e.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e.getUTFString=function(){return this.readUTFString()},e.readUTFBytes=function(t){if(void 0===t&&(t=-1),0==t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this.rUTF(t)},e.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t)},e.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},e.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e.getByte=function(){return this.readByte()},e.ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i},e.readArrayBuffer=function(t){var e;return e=this._u8d_.buffer.slice(this._pos_,this._pos_+t),this._pos_=this._pos_+t,e},r(0,e,"buffer",function(){var t=this._d_.buffer;return t.byteLength==this.length?t:t.slice(0,this.length)}),r(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"==t}),r(0,e,"length",function(){return this._length},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t}),r(0,e,"pos",function(){return this._pos_},function(t){this._pos_=t}),r(0,e,"bytesAvailable",function(){return this._length-this._pos_}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian"}return t._sysEndian},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t}(),O=function(){function t(){}return o(t,"laya.utils.CacheManager"),t.regCacheByFunction=function(e,i){t.unRegCacheByFunction(e,i);var n;n={tryDispose:e,getCacheList:i},t._cacheList.push(n)},t.unRegCacheByFunction=function(e,i){var n=0,o=0;for(o=t._cacheList.length,n=0;n<o;n++)if(t._cacheList[n].tryDispose==e&&t._cacheList[n].getCacheList==i)return void t._cacheList.splice(n,1)},t.forceDispose=function(){var e=0,i=t._cacheList.length;for(e=0;e<i;e++)t._cacheList[e].tryDispose(!0)},t.beginCheck=function(e){void 0===e&&(e=15e3),i.timer.loop(e,null,t._checkLoop)},t.stopCheck=function(){i.timer.clear(null,t._checkLoop)},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var i=k.now(),n=0,o=0;for(o=n=e.length;n>0&&(t._index++,t._index=t._index%o,e[t._index].tryDispose(!1),!(k.now()-i>t.loopTimeLimit));)n--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),W=function(){function t(){}return o(t,"laya.utils.ClassUtils"),t.regClass=function(e,i){t._classMap[e]=i},t.getRegClass=function(e){return t._classMap[e]},t.getInstance=function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)},t.createByJson=function(e,i,n,o,r){"string"==typeof e&&(e=JSON.parse(e));var a=e.props;if(!i&&!(i=r?r.runWith(e):t.getInstance(a.runtime||e.type)))return null;var s=e.child;if(s)for(var l=0,h=s.length;l<h;l++){var u=s[l];if("render"!==u.props.name&&"render"!==u.props.renderType||!i._$set_itemRender)if("Graphic"==u.type)t.addGraphicsToSprite(u,i);else if(t.isDrawType(u.type))t.addGraphicToSprite(u,i,!0);else{var c=t.createByJson(u,null,n,o,r);"Script"==u.type?c.hasOwnProperty("owner")?c.owner=i:c.hasOwnProperty("target")&&(c.target=i):"mask"==u.props.renderType?i.mask=c:i.addChild(c)}else i.itemRender=u}if(a)for(var d in a){var p=a[d];"var"===d&&n?n[p]=i:p instanceof Array&&"function"==typeof i[d]?i[d].apply(i,p):i[d]=p}return o&&e.customProps&&o.runWith([i,e]),i.created&&i.created(),i},t.addGraphicsToSprite=function(e,i){var n;if((n=e.child)&&!(n.length<1)){var o;o=t._getGraphicsFromSprite(e,i);var r=0,a=0;e.props&&(r=t._getObjVar(e.props,"x",0),a=t._getObjVar(e.props,"y",0)),0!=r&&0!=a&&o.translate(r,a);var s=0,l=0;for(l=n.length,s=0;s<l;s++)t._addGraphicToGraphics(n[s],o);0!=r&&0!=a&&o.translate(-r,-a)}},t.addGraphicToSprite=function(e,i,n){void 0===n&&(n=!1);var o;o=n?t._getGraphicsFromSprite(e,i):i.graphics,t._addGraphicToGraphics(e,o)},t._getGraphicsFromSprite=function(t,e){var i;if(!t||!t.props)return e.graphics;var n;switch(n=t.props.renderType){case"hit":case"unHit":var o;e.hitArea||(e.hitArea=new X),(o=e.hitArea)[n]||(o[n]=new f),i=o[n]}return i||(i=e.graphics),i},t._getTransformData=function(e){var i;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(i=i||new x).translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0));var n=t._getObjVar(e,"scaleX",1),o=t._getObjVar(e,"scaleY",1),r=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0);return 1==n&&1==o&&0==r||((i=i||new x).scale(n,o),i.rotate(.0174532922222222*r)),i},t._addGraphicToGraphics=function(e,i){var n;if(n=e.props){var o;if(o=t.DrawTypeDic[e.type]){var r;r=i;var a,s=t._getParams(n,o[1],o[2],o[3]);((a=t._tM)||1!=t._alpha)&&(r.save(),a&&r.transform(a),1!=t._alpha&&r.alpha(t._alpha)),r[o[0]].apply(r,s),(a||1!=t._alpha)&&r.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=at.getRes(t[0]),t},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e},t.isDrawType=function(e){return"Image"!=e&&t.DrawTypeDic.hasOwnProperty(e)},t._getParams=function(e,i,n,o){void 0===n&&(n=0);var r;(r=t._temParam).length=i.length;var a=0,s=0;for(s=i.length,a=0;a<s;a++)r[a]=t._getObjVar(e,i[a][0],i[a][1]);t._alpha=t._getObjVar(e,"alpha",1);var l;return(l=t._getTransformData(e))?(n||(n=0),l.translate(r[n],r[n+1]),r[n]=r[n+1]=0,t._tM=l):t._tM=null,o&&t[o]&&(r=t[o](r)),r},t._getPointListByStr=function(t){var e,i=0,n=0;for(n=(e=t.split(",")).length,i=0;i<n;i++)e[i]=parseFloat(e[i]);return e},t._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},t._temParam=[],t._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t.getClass=function(e){var n=t._classMap[e]||e;return"string"==typeof n?i.__classmap[n]:n},t._tM=null,t._alpha=NaN,n(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}(),V=function(){function t(e){if(this._color=[],"string"==typeof e){this.strColor=e,null===e&&(e="#000000"),"#"==e.charAt(0)&&(e=e.substr(1));var i=e.length;if(3==i||4==i){for(var n="",o=0;o<i;o++)n+=e[o]+e[o];e=n}var r=this.numColor=parseInt(e,16);if(8==e.length)return void(this._color=[parseInt(e.substr(0,2),16)/255,((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255])}else r=this.numColor=e,this.strColor=J.toHexColor(r);this._color=[((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255,1],this._color.__id=++t._COLODID}return o(t,"laya.utils.Color"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=t._SAVE[e+""];return null!=i?i:(t._SAVE_SIZE<1e3||t._initSaveMap(),t._SAVE[e+""]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),F=(function(){function t(){this._values=[],this._keys=[]}o(t,"laya.utils.Dictionary");var e=t.prototype;e.set=function(t,e){var i=this.indexOf(t);i>=0?this._values[i]=e:(this._keys.push(t),this._values.push(e))},e.indexOf=function(t){var e=this._keys.indexOf(t);return e>=0?e:(t="string"==typeof t?Number(t):"number"==typeof t?t.toString():t,this._keys.indexOf(t))},e.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e]},e.remove=function(t){var e=this.indexOf(t);return e>=0&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},e.clear=function(){this._values.length=0,this._keys.length=0},r(0,e,"values",function(){return this._values}),r(0,e,"keys",function(){return this._keys})}(),function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}o(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,n,o,r,a,s,l){void 0===l&&(l=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=n,this.elasticDistance=e?o:0,this.elasticBackTime=r,this.data=a,this._disableMouseEvent=s,this.ratio=l,this._parent=t.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,i.stage.on("mouseup",this,this.onStageMouseUp),i.stage.on("mouseout",this,this.onStageMouseUp),i.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){i.timer.clear(this,this.loop),i.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(y.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,n=t.y,o=e-this._lastX,r=n-this._lastY;if(this._clickOnly){if(!(Math.abs(o*i.stage._canvasTransform.getScaleX())>1||Math.abs(r*i.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),y.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(o,r);0===o&&0===r||(this._lastX=e,this._lastY=n,this.target.x+=o*this._elasticRateX,this.target.y+=r*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(t){if(y.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),i.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,n=Math.min(e,6),o=this._offsets.length-n,r=e-1;r>o;r--)this._offsetY+=this._offsets[r--],this._offsetX+=this._offsets[r];this._offsetX=this._offsetX/n*2,this._offsetY=this._offsetY/n*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),i.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=j.to(this.target,i,this.elasticBackTime,Z.sineOut,h.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(i.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}()),Z=function(){function t(){}return o(t,"laya.utils.Ease"),t.linearNone=function(t,e,i,n){return i*t/n+e},t.linearIn=function(t,e,i,n){return i*t/n+e},t.linearInOut=function(t,e,i,n){return i*t/n+e},t.linearOut=function(t,e,i,n){return i*t/n+e},t.bounceIn=function(e,i,n,o){return n-t.bounceOut(o-e,0,n,o)+i},t.bounceInOut=function(e,i,n,o){return e<.5*o?.5*t.bounceIn(2*e,0,n,o)+i:.5*t.bounceOut(2*e-o,0,n,o)+.5*n+i},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,n,o){return void 0===o&&(o=1.70158),i*(t/=n)*t*((o+1)*t-o)+e},t.backInOut=function(t,e,i,n,o){return void 0===o&&(o=1.70158),(t/=.5*n)<1?.5*i*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},t.backOut=function(t,e,i,n,o){return void 0===o&&(o=1.70158),i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},t.elasticIn=function(e,i,n,o,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var s;return 0==e?i:1==(e/=o)?i+n:(a||(a=.3*o),!r||n>0&&r<n||n<0&&r<-n?(r=n,s=a/4):s=a/t.PI2*Math.asin(n/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e*o-s)*t.PI2/a)+i)},t.elasticInOut=function(e,i,n,o,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var s;return 0==e?i:2==(e/=.5*o)?i+n:(a||(a=o*(.3*1.5)),!r||n>0&&r<n||n<0&&r<-n?(r=n,s=a/4):s=a/t.PI2*Math.asin(n/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*o-s)*t.PI2/a)*-.5+i:r*Math.pow(2,-10*(e-=1))*Math.sin((e*o-s)*t.PI2/a)*.5+n+i)},t.elasticOut=function(e,i,n,o,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var s;return 0==e?i:1==(e/=o)?i+n:(a||(a=.3*o),!r||n>0&&r<n||n<0&&r<-n?(r=n,s=a/4):s=a/t.PI2*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*o-s)*t.PI2/a)+n+i)},t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.sineIn=function(e,i,n,o){return-n*Math.cos(e/o*t.HALF_PI)+n+i},t.sineOut=function(e,i,n,o){return n*Math.sin(e/o*t.HALF_PI)+i},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(2-Math.pow(2,-10*--t))+e},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),X=function(){function t(){this._hit=null,this._unHit=null}o(t,"laya.utils.HitArea");var e=t.prototype;return e.isHit=function(e,i){return!!t.isHitGraphic(e,i,this.hit)&&!t.isHitGraphic(e,i,this.unHit)},e.contains=function(t,e){return this.isHit(t,e)},r(0,e,"hit",function(){return this._hit||(this._hit=new f),this._hit},function(t){this._hit=t}),r(0,e,"unHit",function(){return this._unHit||(this._unHit=new f),this._unHit},function(t){this._unHit=t}),t.isHitGraphic=function(e,i,n){if(!n)return!1;var o;if(!(o=n.cmds)&&n._one&&((o=t._cmds).length=1,o[0]=n._one),!o)return!1;var r=0,a=0;a=o.length;var s;for(r=0;r<a;r++)if(s=o[r]){var l=P._context;switch(s.callee){case l._translate:case 6:e-=s[0],i-=s[1]}if(t.isHitCmd(e,i,s))return!0}return!1},t.isHitCmd=function(e,i,n){if(!n)return!1;var o=P._context,r=!1;switch(n.callee){case o._drawRect:case 13:t._rec.setTo(n[0],n[1],n[2],n[3]),r=t._rec.contains(e,i);break;case o._drawCircle:case o._fillCircle:case 14:r=(e-=n[0])*e+(i-=n[1])*i<n[2]*n[2];break;case o._drawPoly:case 18:e-=n[0],i-=n[1],r=t.ptInPolygon(e,i,n[2])}return r},t.ptInPolygon=function(e,i,n){var o;(o=t._ptPoint).setTo(e,i);var r=0,a=NaN,s=NaN,l=NaN,h=NaN,u=0;u=n.length;for(var c=0;c<u;c+=2)if(a=n[c],s=n[c+1],l=n[(c+2)%u],h=n[(c+3)%u],s!=h&&!(o.y<Math.min(s,h)||o.y>=Math.max(s,h))){(o.y-s)*(l-a)/(h-s)+a>o.x&&r++}return r%2==1},t._cmds=[],n(t,["_rec",function(){return this._rec=new M},"_ptPoint",function(){return this._ptPoint=new T}]),t}(),H=(function(){function t(e,i,n,o){this.char=e,this.charNum=e.charCodeAt(0),this._x=this._y=0,this.width=i,this.height=n,this.style=o,this.isWord=!t._isWordRegExp.test(e)}o(t,"laya.utils.HTMLChar");var e=t.prototype;i.imps(e,{"laya.display.ILayout":!0}),e.setSprite=function(t){this._sprite=t},e.getSprite=function(){return this._sprite},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},r(0,e,"width",function(){return this._w},function(t){this._w=t}),r(0,e,"x",function(){return this._x},function(t){this._sprite&&(this._sprite.x=t),this._x=t}),r(0,e,"y",function(){return this._y},function(t){this._sprite&&(this._sprite.y=t),this._y=t}),r(0,e,"height",function(){return this._h},function(t){this._h=t}),t._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function t(){}o(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=k.window.document.createElement("div"),k.window.document.body.appendChild(t._logdiv),t._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},t.toggle=function(){var e=t._logdiv.style;"1px"==e.width?e.width=e.height="50%":e.width=e.height="1px"},t.print=function(e){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=e+"\n",t._logdiv.scrollTop=t._logdiv.scrollHeight)},t.clear=function(){t._logdiv.innerText="",t._count=0},t._logdiv=null,t._count=0,t.maxCount=20}(),function(){function t(){}o(t,"laya.utils.Mouse"),r(1,t,"cursor",function(){return t._style.cursor},function(e){t._style.cursor=e}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")},t.show=function(){"none"==t.cursor&&(t.cursor=t._preCursor?t._preCursor:"auto")},t._preCursor=null,n(t,["_style",function(){return this._style=k.document.body.style}])}(),function(){function t(){}return o(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0)},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.getItemByClass=function(e,i){var n=t.getPoolBySign(e),o=n.length?n.pop():new i;return o.__InPool=!1,o},t.getItemByCreateFun=function(e,i,n){var o=t.getPoolBySign(e),r=o.length?o.pop():i.call(n);return r.__InPool=!1,r},t.getItem=function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},t._poolDic={},t.InPoolSign="__InPool",t}()),Y=(function(){function t(){this.sign=null,this.maxCount=1e3}o(t,"laya.utils.PoolCache");var e=t.prototype;e.getCacheList=function(){return H.getPoolBySign(this.sign)},e.tryDispose=function(t){var e;(e=H.getPoolBySign(this.sign)).length>this.maxCount&&e.splice(this.maxCount,e.length-this.maxCount)},t.addPoolCacheManager=function(e,i){void 0===i&&(i=100);var n;(n=new t).sign=e,n.maxCount=i,O.regCacheByFunction(J.bind(n.tryDispose,n),J.bind(n.getCacheList,n))}}(),function(){function t(){}return o(t,"laya.utils.Stat"),r(1,t,"onclick",null,function(e){t._sp&&t._sp.on("click",t._sp,e),t._canvas&&(t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents="")}),t.show=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0),!P.isConchApp||P.isConchWebGL?(P.isConchWebGL||k.onMiniGame||k.onLimixiu||(t._useCanvas=!0),t._show=!0,t._fpsData.length=60,t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},P.isWebGL?(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},P.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._useCanvas?t.createUIPre(e,i):t.createUI(e,i),t.enable()):k.window.conch.showFPS&&k.window.conch.showFPS(e,i)},t.createUIPre=function(e,i){var n=k.pixelRatio;t._width=130*n,t._vx=75*n,t._height=n*(12*t._view.length+3*n)+4,t._fontSize=12*n;for(var o=0;o<t._view.length;o++)t._view[o].x=4,t._view[o].y=o*t._fontSize+2*n;t._canvas||((t._canvas=new vt("2D")).size(t._width,t._height),(t._ctx=t._canvas.getContext("2d")).textBaseline="top",t._ctx.font=t._fontSize+"px Sans-serif",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e+"px;top:"+i+"px;width:"+t._width/n+"px;height:"+t._height/n+"px;"),t._first=!0,t.loop(),t._first=!1,k.container.appendChild(t._canvas.source)},t.createUI=function(e,i){var n=t._sp,o=k.pixelRatio;n||(n=new ct,(t._leftText=new _t).pos(5,5),t._leftText.color="#ffffff",n.addChild(t._leftText),(t._txt=new _t).pos(80*o,5),t._txt.color="#ffffff",n.addChild(t._txt),t._sp=n),n.pos(e,i);for(var r="",a=0;a<t._view.length;a++){r+=t._view[a].title+"\n"}t._leftText.text=r;var s=138*o,l=o*(12*t._view.length+3*o)+4;t._txt.fontSize=t._fontSize*o,t._leftText.fontSize=t._fontSize*o,n.size(s,l),n.graphics.clear(),n.graphics.setAlpha(.5),n.graphics.drawRect(0,0,s,l,"#999999"),n.graphics.setAlpha(1),t.loop()},t.enable=function(){i.timer.frameLoop(1,t,t.loop)},t.hide=function(){t._show=!1,i.timer.clear(t,t.loop),t._canvas&&k.removeElement(t._canvas.source)},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.spriteRenderUseCacheCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var e=k.now();if(!(e-t._timer<1e3)){var i=t._count;if(t.FPS=Math.round(1e3*i/(e-t._timer)),t._show){t.trianglesFaces=Math.round(t.trianglesFaces/i),t._useCanvas?(t.drawCall=Math.round(t.drawCall/i)-2,t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-1):(t.drawCall=Math.round(t.drawCall/i)-2,t.shaderCall=Math.round(t.shaderCall/i)-4,t.spriteCount=Math.round(t.spriteCount/i)-4),t.spriteRenderUseCacheCount=Math.round(t.spriteRenderUseCacheCount/i),t.canvasNormal=Math.round(t.canvasNormal/i),t.canvasBitmap=Math.round(t.canvasBitmap/i),t.canvasReCache=Math.ceil(t.canvasReCache/i),t.treeNodeCollision=Math.round(t.treeNodeCollision/i),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/i);var n=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+n,t._spriteStr=t.spriteCount+(t.spriteRenderUseCacheCount?"/"+t.spriteRenderUseCacheCount:""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=U.systemResourceManager.memorySize,t._useCanvas?t.renderInfoPre():t.renderInfo(),t.clear()}t._count=0,t._timer=e}},t.renderInfoPre=function(){if(t._canvas){var e=t._ctx;e.clearRect(t._first?0:t._vx,0,t._width,t._height);for(var i=0;i<t._view.length;i++){var n=t._view[i];t._first&&(e.fillStyle="white",e.fillText(n.title,n.x,n.y,null,null,null)),e.fillStyle=n.color;var o=t[n.value];"M"==n.units&&(o=Math.floor(o/1048576*100)/100+" M"),e.fillText(o+"",n.x+t._vx,n.y,null,null,null)}}},t.renderInfo=function(){for(var e="",i=0;i<t._view.length;i++){var n=t._view[i],o=t[n.value];"M"==n.units&&(o=Math.floor(o/1048576*100)/100+" M"),"K"==n.units&&(o=Math.floor(o/1024*100)/100+" K"),e+=o+"\n"}t._txt.text=e},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.spriteRenderUseCacheCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._spriteStr=null,t._fpsData=[],t._timer=0,t._count=0,t._view=[],t._fontSize=12,t._txt=null,t._leftText=null,t._sp=null,t._show=!1,t._useCanvas=!1,t._canvas=null,t._ctx=null,t._first=!1,t._vx=NaN,t._width=0,t._height=100,t}()),z=(function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}o(t,"laya.utils.StringKey");var e=t.prototype;e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e}}(),function(){function t(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}var e;o(t,"laya.utils.Timer");var n=t.prototype;return n._init=function(){i.timer&&i.timer.frameLoop(1,this,this._update)},n._now=function(){return Date.now()},n._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var t=this.currFrame=this.currFrame+this.scale,e=this._now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var n=this._handlers;for(this._count=0,a=0,s=n.length;a<s;a++)if(null!==(l=n[a]).method){var o=l.userFrame?t:i;if(o>=l.exeTime)if(l.repeat)if(l.jumpFrame)for(;o>=l.exeTime;)l.exeTime+=l.delay,l.run(!1);else l.exeTime+=l.delay,l.run(!1),o>l.exeTime&&(l.exeTime+=Math.ceil((o-l.exeTime)/l.delay)*l.delay);else l.run(!0)}else this._count++;(this._count>30||t%200==0)&&this._clearHandlers();for(var r=this._laters,a=0,s=r.length-1;a<=s;a++){var l=r[a];null!==l.method&&(this._map[l.key]=null,l.run(!1)),this._recoverHandler(l),a===s&&(s=r.length-1)}r.length=0}},n._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;e<i;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=t,this._temp.length=0},n._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)},n._create=function(i,n,o,r,a,s,l){if(!o)return a.apply(r,s),null;if(l){var h=this._getHandler(r,a);if(h)return h.repeat=n,h.userFrame=i,h.delay=o,h.caller=r,h.method=a,h.args=s,h.exeTime=o+(i?this.currFrame:this.currTimer+this._now()-this._lastTimer),h}return h=t._pool.length>0?t._pool.pop():new e,h.repeat=n,h.userFrame=i,h.delay=o,h.caller=r,h.method=a,h.args=s,h.exeTime=o+(i?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(h),this._handlers.push(h),h},n._indexHandler=function(t){var e=t.caller,i=t.method,n=e?e.$_GID||(e.$_GID=J.getGID()):0,o=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=n+o,this._map[t.key]=t},n.once=function(t,e,i,n,o){void 0===o&&(o=!0),this._create(!1,!1,t,e,i,n,o)},n.loop=function(t,e,i,n,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var a=this._create(!1,!0,t,e,i,n,o);a&&(a.jumpFrame=r)},n.frameOnce=function(t,e,i,n,o){void 0===o&&(o=!0),this._create(!0,!1,t,e,i,n,o)},n.frameLoop=function(t,e,i,n,o){void 0===o&&(o=!0),this._create(!0,!0,t,e,i,n,o)},n.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t._pool.length},n.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},n.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;e<i;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},n._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=J.getGID()):0,n=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+n]},n.callLater=function(i,n,o){if(null==this._getHandler(i,n)){if(t._pool.length)var r=t._pool.pop();else r=new e;r.caller=i,r.method=n,r.args=o,this._indexHandler(r),this._laters.push(r)}},n.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},n.runTimer=function(t,e){this.runCallLater(t,e)},r(0,n,"delta",function(){return this._delta}),t._pool=[],t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}o(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},t}()),j=function(){function t(){this.gid=0}o(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,n,o,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,e,i,n,o,r,a,!0,!1,!0)},e.from=function(t,e,i,n,o,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,e,i,n,o,r,a,!1,!1,!0)},e._create=function(e,n,o,r,a,s,l,h,u,c){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=o,this._ease=r||n.ease||t.easeNone,this._complete=a||n.complete,this._delay=s,this._props=[],this._usedTimer=0,this._startTimer=k.now(),this._usedPool=u,this._delayParam=null,this.update=n.update;var d=e.$_GID||(e.$_GID=J.getGID());return t.tweenMap[d]?(l&&t.clearTween(e),t.tweenMap[d].push(this)):t.tweenMap[d]=[this],c?s<=0?this.firstStart(e,n,h):(this._delayParam=[e,n,h],i.scaleTimer.once(s,this,this.firstStart,this._delayParam)):this._initProps(e,n,h),this},e.firstStart=function(t,e,i){this._delayParam=null,t.destroyed?this.clear():(this._initProps(t,e,i),this._beginLoop())},e._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var o=i?t[n]:e[n],r=i?e[n]:t[n];this._props.push([n,o,r-o]),i||(t[n]=o)}},e._beginLoop=function(){i.scaleTimer.frameLoop(1,this,this._doEase)},e._doEase=function(){this._updateEase(k.now())},e._updateEase=function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(n<0)){if(n>=this._duration)return this.complete();for(var o=n>0?this._ease(n,0,1,this._duration):0,r=this._props,a=0,s=r.length;a<s;a++){var l=r[a];i[l[0]]=l[1]+o*l[2]}this.update&&this.update.run()}}},e.complete=function(){if(this._target){i.scaleTimer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,n=this._complete,o=0,r=e.length;o<r;o++){var a=e[o];t[a[0]]=a[1]+a[2]}this.update&&this.update.run(),this.clear(),n&&n.run()}},e.pause=function(){i.scaleTimer.clear(this,this._beginLoop),i.scaleTimer.clear(this,this._doEase),i.scaleTimer.clear(this,this.firstStart);var t=NaN;(t=k.now()-this._startTimer-this._delay)<0&&(this._usedTimer=t)},e.setStartTime=function(t){this._startTimer=t},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),i.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,H.recover("tween",this))},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;i<n;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=k.now(),this._delayParam)i.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var t=this._props,e=0,n=t.length;e<n;e++){var o=t[e];this._target[o[0]]=o[1]}i.scaleTimer.once(this._delay,this,this._beginLoop)}},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=k.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?i.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},r(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=k.now()-this._delay-e}),t.to=function(e,i,n,o,r,a,s,l){return void 0===a&&(a=0),void 0===s&&(s=!1),void 0===l&&(l=!0),H.getItemByClass("tween",t)._create(e,i,n,o,r,a,s,!0,l,!0)},t.from=function(e,i,n,o,r,a,s,l){return void 0===a&&(a=0),void 0===s&&(s=!1),void 0===l&&(l=!0),H.getItemByClass("tween",t)._create(e,i,n,o,r,a,s,!1,l,!0)},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,o=i.length;n<o;n++)i[n]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,n){return i*t/n+e},t.tweenMap={},t}(),J=function(){function t(){}return o(t,"laya.utils.Utils"),t.toRadian=function(e){return e*t._pi2},t.toAngle=function(e){return e*t._pi},t.toHexColor=function(t){if(t<0||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},t.getGID=function(){return t._gid++},t.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;i<n;i++)t.push(e[i]);return t},t.clearArray=function(t){return t?(t.length=0,t):t},t.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,n=e.length;for(i=0;i<n;i++)t[i]=e[i];return t},t.getGlobalRecByPoints=function(t,e,i,n,o){var r;r=new T(e,i),r=t.localToGlobal(r);var a;return a=new T(n,o),a=t.localToGlobal(a),M._getWrapRec([r.x,r.y,a.x,a.y])},t.getGlobalPosAndScale=function(e){return t.getGlobalRecByPoints(e,0,0,1,1)},t.bind=function(t,e){return t.bind(e)},t.measureText=function(t,e){return a.measureText(t,e)},t.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,n=0,o=t.length,r=NaN;i<o;){for(e=t[n=i],r=t[n]._zOrder;--n>-1&&t[n]._zOrder>r;)t[n+1]=t[n];t[n+1]=e,i++}var a=e.parent.conchModel;if(a)if(null!=a.updateZOrder)a.updateZOrder();else{for(i=0;i<o;i++)a.removeChild(t[i].conchModel);for(i=0;i<o;i++)a.addChildAt(t[i].conchModel,i)}return!0},t.transPointList=function(t,e,i){var n=0,o=t.length;for(n=0;n<o;n+=2)t[n]+=e,t[n+1]+=i},t.parseInt=function(t,e){void 0===e&&(e=0);var i=k.window.parseInt(t,e);return isNaN(i)?0:i},t.getFileExtension=function(e){t._extReg.lastIndex=e.lastIndexOf(".");var i=t._extReg.exec(e);return i&&i.length>1?i[1].toLowerCase():null},t.getTransformRelativeToWindow=function(t,e,n){var o=i.stage,r=laya.utils.Utils.getGlobalPosAndScale(t),a=o._canvasTransform.clone(),s=a.tx,l=a.ty;a.rotate(-Math.PI/180*i.stage.canvasDegree),a.scale(i.stage.clientScaleX,i.stage.clientScaleY);var h=i.stage.canvasDegree%180!=0,u=NaN,c=NaN;h?(u=n+r.y,c=e+r.x,u*=a.d,c*=a.a,90==i.stage.canvasDegree?(u=s-u,c+=l):(u+=s,c=l-c)):(u=e+r.x,c=n+r.y,u*=a.a,c*=a.d,u+=s,c+=l);var d=NaN,p=NaN;return h?(d=a.d*r.height,p=a.a*r.width):(d=a.a*r.width,p=a.d*r.height),{x:u,y:c,scaleX:d,scaleY:p}},t.fitDOMElementInArea=function(e,n,o,r,a,s){e._fitLayaAirInitialized||(e._fitLayaAirInitialized=!0,e.style.transformOrigin=e.style.webKittransformOrigin="left top",e.style.position="absolute");var l=t.getTransformRelativeToWindow(n,o,r);e.style.transform=e.style.webkitTransform="scale("+l.scaleX+","+l.scaleY+") rotate("+i.stage.canvasDegree+"deg)",e.style.width=a+"px",e.style.height=s+"px",e.style.left=l.x+"px",e.style.top=l.y+"px"},t.isOkTextureList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;i<n;i++)if(!(e=t[i])||!e.source)return!1;return!0},t.isOKCmdList=function(t){if(!t)return!1;var e,i,n=0,o=t.length,r=P._context;for(n=0;n<o;n++)switch((e=t[n]).callee){case r._drawTexture:case r._fillTexture:case r._drawTextureWithTransform:if(!(i=e[0])||!i.source)return!1}return!0},t._gid=1,t._pi=180/Math.PI,t._pi2=Math.PI/180,t._extReg=/\.(\w+)\??/g,t.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),(e=(new DOMParser).parseFromString(t,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},t}(),K=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],P.isWebGL&&O.regCacheByFunction(J.bind(this.startDispose,this),J.bind(this.getCacheList,this))}o(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(t){var e;for(e in this.useDic)this.useDic[e]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),Q=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new k.window.WeakMap:{},t.supportWeakMap||t._maps.push(this)}o(t,"laya.utils.WeakObject");var e=t.prototype;return e.set=function(e,i){if(null!=e)if(t.supportWeakMap){var n=e;"string"!=typeof e&&"number"!=typeof e||(n=t._keys[e])||(n=t._keys[e]={k:e}),this._obj.set(n,i)}else"string"==typeof e||"number"==typeof e?this._obj[e]=i:(e.$_GID||(e.$_GID=J.getGID()),this._obj[e.$_GID]=i)},e.get=function(e){if(null==e)return null;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return i?this._obj.get(i):null}return"string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID]},e.del=function(e){if(null!=e)if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;if(!i)return;this._obj.delete(i)}else"string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID]},e.has=function(e){if(null==e)return!1;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return this._obj.has(i)}return"string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID]},t.__init__=function(){(t.supportWeakMap=null!=k.window.WeakMap)||i.timer.loop(t.delInterval,null,t.clearCache)},t.clearCache=function(){for(var e=0,i=t._maps.length;e<i;e++){t._maps[e]._obj={}}},t.supportWeakMap=!1,t.delInterval=3e5,t._keys={},t._maps=[],n(t,["I",function(){return this.I=new t}]),t}(),$=function(){function t(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}o(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):NaN},e.charAt=function(t){return this._text?this._text.charAt(t):null},r(0,e,"length",function(){return this._text?this._text.length:0}),t}(),q=function(t){function e(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,e.__super.call(this),this._childs=e.ARRAY_EMPTY,this._$P=e.PROP_EMPTY,this.timer=i.scaleTimer,this.conchModel=P.isConchNode?this.createConchModel():null}o(e,"laya.display.Node",l);var n=e.prototype;return n._setBit=function(t,e){if(1==t){this._getBit(t)!=e&&this._updateDisplayedInstage()}e?this._bits|=t:this._bits&=~t},n._getBit=function(t){return 0!=(this._bits&t)},n._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},n._setUpNoticeType=function(t){var e=this;for(e._setBit(t,!0),e=e.parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e.parent}},n.on=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!1)},n.once=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!0)},n.createConchModel=function(){return null},n.destroy=function(t){void 0===t&&(t=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},n.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;t>-1;t--)this._childs[t].destroy(!0)},n.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var i=this.getChildIndex(t);i!==this._childs.length-1&&(this._childs.splice(i,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged())}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged();return t},n.addChildren=function(t){for(var e=arguments,i=0,n=e.length;i<n;)this.addChild(e[i++])},n.addChildAt=function(t,i){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),i>=0&&i<=this._childs.length){if(t._parent===this){var n=this.getChildIndex(t);this._childs.splice(n,1),this._childs.splice(i,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,i)),this._childChanged()}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(i,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,i),t.parent=this;return t}throw new Error("appendChildAt:The index is out of bounds")},n.getChildIndex=function(t){return this._childs.indexOf(t)},n.getChildByName=function(t){var e=this._childs;if(e)for(var i=0,n=e.length;i<n;i++){var o=e[i];if(o.name===t)return o}return null},n._get$P=function(t){return this._$P[t]},n._set$P=function(t,i){return this.destroyed||(this._$P===e.PROP_EMPTY&&(this._$P={}),this._$P[t]=i),i},n.getChildAt=function(t){return this._childs[t]},n.setChildIndex=function(t,e){var i=this._childs;if(e<0||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(n<0)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged(),t},n._childChanged=function(t){},n.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e)},n.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},n.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e},n.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._childs&&this._childs.length>0){var n=this._childs;if(0===t&&i>=a){var o=n;this._childs=e.ARRAY_EMPTY}else o=n.splice(t,i-t);for(var r=0,a=o.length;r<a;r++)o[r].parent=null,this.conchModel&&this.conchModel.removeChild(o[r].conchModel)}return this},n.replaceChild=function(t,e){var i=this._childs.indexOf(e);return i>-1?(this._childs.splice(i,1,t),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(t.conchModel,i)),e.parent=null,t.parent=this,t):null},n._updateDisplayedInstage=function(){var t;t=this;var e=i.stage;for(this._displayedInStage=!1;t;){if(t._getBit(1)){this._displayedInStage=t._displayedInStage;break}if(t==e||t._displayedInStage){this._displayedInStage=!0;break}t=t.parent}},n._setDisplay=function(t){this._displayedInStage!==t&&(this._displayedInStage=t,t?this.event("display"):this.event("undisplay"))},n._displayChild=function(t,e){var i=t._childs;if(i)for(var n=0,o=i.length;n<o;n++){var r=i[n];r._getBit(1)&&(r._childs.length>0?this._displayChild(r,e):r._setDisplay(e))}t._setDisplay(e)},n.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this)return!0;t=t.parent}return!1},n.timerLoop=function(t,e,i,n,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1),this.timer.loop(t,e,i,n,o,r)},n.timerOnce=function(t,e,i,n,o){void 0===o&&(o=!0),this.timer._create(!1,!1,t,e,i,n,o)},n.frameLoop=function(t,e,i,n,o){void 0===o&&(o=!0),this.timer._create(!0,!0,t,e,i,n,o)},n.frameOnce=function(t,e,i,n,o){void 0===o&&(o=!0),this.timer._create(!0,!1,t,e,i,n,o)},n.clearTimer=function(t,e){this.timer.clear(t,e)},r(0,n,"numChildren",function(){return this._childs.length}),r(0,n,"destroyed",function(){return this._destroyed}),r(0,n,"parent",function(){return this._parent},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t))}),r(0,n,"displayedInStage",function(){return this._getBit(1)?this._displayedInStage:(this._setUpNoticeType(1),this._displayedInStage)}),e.ARRAY_EMPTY=[],e.PROP_EMPTY={},e.NOTICE_DISPLAY=1,e.MOUSEENABLE=2,e}(),tt=function(t){function e(t){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,e.__super.call(this),this._padding=e._PADDING,this._spacing=e._SPACING,this._aligns=e._ALIGNS,this._font=d.EMPTY,this._ower=t}o(e,"laya.display.css.CSSStyle",t);var i=e.prototype;return i.destroy=function(){this._ower=null,this._font=null,this._rect=null},i.inherit=function(t){this._font=t._font,this._spacing=t._spacing===e._SPACING?e._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight},i._widthAuto=function(){return 0!=(262144&this._type)},i.widthed=function(t){return 0!=(8&this._type)},i._calculation=function(t,e){function i(t,e,i){return t*i[0]+e*i[1]+i[2]}function n(t){var e=r.width,n=o.width;a.width&&(o.width=i(e,n,a.width)),a.height&&(o.height=i(e,n,a.height)),a.left&&(o.x=i(e,n,a.left)),a.top&&(o.y=i(e,n,a.top))}if(e.indexOf("%")<0)return!1;var o=this._ower,r=o.parent,a=this._rect;null===a&&(r._getCSSStyle()._type|=524288,r.on("resize",this,n),this._rect=a={input:{}});var s=e.split(" ");return s[0]=parseFloat(s[0])/100,1==s.length?s[1]=s[2]=0:(s[1]=parseFloat(s[1])/100,s[2]=parseFloat(s[2])),a[t]=s,a.input[t]=e,n(),!0},i.heighted=function(t){return 0!=(8192&this._type)},i.size=function(t,e){var i=this._ower,n=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,n=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,n=!0),n&&(i._layoutLater(),524288&this._type&&i.event("resize",this))},i._getAlign=function(){return this._aligns[0]},i._getValign=function(){return this._aligns[1]},i._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},i._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new d(this._font))},i.render=function(t,e,i,n){var o=t.width,r=t.height;i-=t.pivotX,n-=t.pivotY,this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(i,n,o,r,this._bgground.color),this._border&&this._border.color&&e.drawRect(i,n,o,r,this._border.color.strColor,this._border.size)},i.getCSSStyle=function(){return this},i.cssText=function(t){this.attrs(e.parseOneCSS(t,";"))},i.attrs=function(t){if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e];this[n[0]]=n[1]}},i.setTransform=function(t){"none"===t?this._tf=c._TF_EMPTY:this.attrs(e.parseOneCSS(t,","))},i.translate=function(t,e){this._tf===c._TF_EMPTY&&(this._tf=new p),this._tf.translateX=t,this._tf.translateY=e},i.scale=function(t,e){this._tf===c._TF_EMPTY&&(this._tf=new p),this._tf.scaleX=t,this._tf.scaleY=e},i._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},r(0,i,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2}),r(0,i,"valign",function(){return e._valigndef[this._aligns[1]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e._valigndef[t]}),r(0,i,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),r(0,i,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),r(0,i,"fontWeight",function(){return this._font.weight},function(t){this._createFont().weight=t}),r(0,i,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=parseInt(t)}e.x=t}),r(0,i,"_translate",null,function(t){this.translate(t[0],t[1])}),r(0,i,"absolute",function(){return 0!=(4&this._type)}),r(0,i,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=parseInt(t)}e.y=t}),r(0,i,"align",function(){return e._aligndef[this._aligns[0]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e._aligndef[t]}),r(0,i,"bold",function(){return this._font.bold},function(t){this._createFont().bold=t}),r(0,i,"padding",function(){return this._padding},function(t){this._padding=t}),r(0,i,"leading",function(){return this._spacing[1]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t}),r(0,i,"lineElement",function(){return 0!=(65536&this._type)},function(t){t?this._type|=65536:this._type&=-65537}),r(0,i,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769}),r(0,i,"textDecoration",function(){return this._font.decoration},function(t){this._createFont().decoration=t}),r(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),r(0,i,"background",null,function(t){t?(this._bgground||(this._bgground={}),this._bgground.color=t,this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),r(0,i,"wordWrap",function(){return 0==(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),r(0,i,"color",function(){return this._font.color},function(t){this._createFont().color=t}),r(0,i,"password",function(){return this._font.password},function(t){this._createFont().password=t}),r(0,i,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._ower._renderType|=256}),r(0,i,"font",function(){return this._font.toString()},function(t){this._createFont().set(t)}),r(0,i,"weight",null,function(t){this._createFont().weight=t}),r(0,i,"letterSpacing",function(){return this._spacing[0]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t}),r(0,i,"fontSize",function(){return this._font.size},function(t){this._createFont().size=t}),r(0,i,"italic",function(){return this._font.italic},function(t){this._createFont().italic=t}),r(0,i,"fontFamily",function(){return this._font.family},function(t){this._createFont().family=t}),r(0,i,"stroke",function(){return this._font.stroke[0]},function(t){this._createFont().stroke===d._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t}),r(0,i,"strokeColor",function(){return this._font.stroke[1]},function(t){this._createFont().stroke===d._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t}),r(0,i,"border",function(){return this._border?this._border.value:""},function(t){if("none"!=t){this._border||(this._border={}),this._border.value=t;var e=t.split(" ");if(this._border.color=V.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var i=0;e[0].indexOf("px")>0?(this._border.size=parseInt(e[0]),i++):this._border.size=1,this._border.type=e[i],this._ower._renderType|=256}else this._border=null}),r(0,i,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t){t?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:V.create(t),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),r(0,i,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"==t?this._type|=4:this._type&=-5}),r(0,i,"display",null,function(t){switch(t){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),r(0,i,"paddingLeft",function(){return this.padding[3]}),r(0,i,"paddingTop",function(){return this.padding[0]}),r(0,i,"_scale",null,function(t){this._ower.scale(t[0],t[1])}),r(0,i,"_rotate",null,function(t){this._ower.rotation=t}),e.parseOneCSS=function(t,i){for(var n,o=[],r=t.split(i),a=0,s=r.length;a<s;a++){var l=r[a],h=l.indexOf(":"),u=l.substr(0,h).replace(/^\s+|\s+$/g,"");if(0!=u.length){var c=l.substr(h+1).replace(/^\s+|\s+$/g,""),d=[u,c];switch(u){case"italic":case"bold":d[1]="true"==c;break;case"line-height":d[0]="lineHeight",d[1]=parseInt(c);break;case"font-size":d[0]="fontSize",d[1]=parseInt(c);break;case"padding":(n=c.split(" ")).length>1||(n[1]=n[2]=n[3]=n[0]),d[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;case"rotate":d[0]="_rotate",d[1]=parseFloat(c);break;case"scale":n=c.split(" "),d[0]="_scale",d[1]=[parseFloat(n[0]),parseFloat(n[1])];break;case"translate":n=c.split(" "),d[0]="_translate",d[1]=[parseInt(n[0]),parseInt(n[1])];break;default:(d[0]=e._CSSTOVALUE[u])||(d[0]=u)}o.push(d)}}return o},e.parseCSS=function(t,i){for(var n;null!=(n=e._parseCSSRegExp.exec(t));)e.styleSheets[n[1]]=e.parseOneCSS(n[2],";")},e.EMPTY=new e(null),e._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},e._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e.styleSheets={},e.ALIGN_CENTER=1,e.ALIGN_RIGHT=2,e.VALIGN_MIDDLE=1,e.VALIGN_BOTTOM=2,e._CSS_BLOCK=1,e._DISPLAY_NONE=2,e._ABSOLUTE=4,e._WIDTH_SET=8,e._PADDING=[0,0,0,0],e._RECT=[-1,-1,-1,-1],e._SPACING=[0,0],e._ALIGNS=[0,0,0],e.ADDLAYOUTED=512,e._NEWFONT=4096,e._HEIGHT_SET=8192,e._BACKGROUND_SET=16384,e._FLOAT_RIGHT=32768,e._LINE_ELEMENT=65536,e._NOWARP=131072,e._WIDTHAUTO=262144,e._LISTERRESZIE=524288,e}(c),et=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}o(e,"laya.media.h5audio.AudioSound",l);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url])},i.load=function(t){function i(){o(),a.loaded=!0,a.event("complete")}function n(){r.load=null,o(),a.event("error")}function o(){r.removeEventListener("canplaythrough",i),r.removeEventListener("error",n)}t=R.formatURL(t),this.url=t;var r;if(t==L._tMusic?(e._initMusicAudio(),(r=e._musicAudio).src!=t&&(e._audioCache[r.src]=null,r=null)):r=e._audioCache[t],r&&r.readyState>=2)this.event("complete");else{r||(t==L._tMusic?(e._initMusicAudio(),r=e._musicAudio):r=k.createElement("audio"),e._audioCache[t]=r,r.src=t),r.addEventListener("canplaythrough",i),r.addEventListener("error",n);var a=this;this.audio=r,r.load?r.load():n()}},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var n;if(!(n=this.url==L._tMusic?e._musicAudio:e._audioCache[this.url]))return null;var o;o=H.getItem("audio:"+this.url),P.isConchApp?o||((o=k.createElement("audio")).src=this.url):this.url==L._tMusic?(e._initMusicAudio(),(o=e._musicAudio).src=this.url):o=o||n.cloneNode(!0);var r=new dt(o);return r.url=this.url,r.loops=i,r.startTime=t,r.play(),L.addChannel(r),r},r(0,i,"duration",function(){var t;return(t=e._audioCache[this.url])?t.duration:0}),e._initMusicAudio=function(){e._musicAudio||(e._musicAudio||(e._musicAudio=k.createElement("audio")),P.isConchApp||k.document.addEventListener("mousedown",e._makeMusicOK))},e._makeMusicOK=function(){k.document.removeEventListener("mousedown",e._makeMusicOK),e._musicAudio.src?e._musicAudio.play():(e._musicAudio.src="",e._musicAudio.load())},e._audioCache={},e._musicAudio=null,e}(),it=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}o(e,"laya.media.SoundChannel",l);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},r(0,i,"volume",function(){return 1},function(t){}),r(0,i,"position",function(){return 0}),r(0,i,"duration",function(){return 0}),e}(),nt=function(t){function e(){e.__super.call(this)}o(e,"laya.media.Sound",l);var i=e.prototype;return i.load=function(t){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},r(0,i,"duration",function(){return 0}),e}(),ot=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e.__super.call(this)}o(e,"laya.media.webaudio.WebAudioSound",l);var i=e.prototype;return i.load=function(t){var i=this;if(t=R.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)this._loaded(this.audioBuffer);else if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var n=new k.window.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){i._disposed?i._removeLoadEvents():(i.data=n.response,e.buffs.push({buffer:i.data,url:i.url}),e.decode())},n.onerror=function(t){i._err()},n.send()}},i._err=function(){if(this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var t,i=0,n=0;n=(t=this.__toPlays).length;var o;for(i=0;i<n;i++)(o=t[i])[2]&&!o[2].isStopped&&o[2].event("error");this.__toPlays.length=0}},i._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},i._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,i=0;i=(t=this.__toPlays).length;var n;for(e=0;e<i;e++)(n=t[e])[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i||new pt,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),L.addChannel(i),i},i.dispose=function(){this._disposed=!0,delete e._dataCache[this.url],delete e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},r(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode()},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode()},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0)}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(k.document.removeEventListener("mousedown",e._unlock,!0),k.document.removeEventListener("touchend",e._unlock,!0),k.document.removeEventListener("touchstart",e._unlock,!0),e._unlocked=!0))},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),k.document.addEventListener("mousedown",e._unlock,!0),k.document.addEventListener("touchend",e._unlock,!0),k.document.addEventListener("touchstart",e._unlock,!0))},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},n(e,["window",function(){return this.window=k.window},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new l}]),e}(),rt=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new k.window.XMLHttpRequest}o(e,"laya.net.HttpRequest",l);var i=e.prototype;return i.send=function(t,e,i,n,o){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null;var r=this,a=this._http;if(a.open(i,t,!0),o)for(var s=0;s<o.length;s++)a.setRequestHeader(o[s++],o[s]);else P.isConchApp||(e&&"string"!=typeof e?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));a.responseType="arraybuffer"!==n?"text":"arraybuffer",a.onerror=function(t){r._onError(t)},a.onabort=function(t){r._onAbort(t)},a.onprogress=function(t){r._onProgress(t)},a.onload=function(t){r._onLoad(t)},a.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(t){this.error("Request was aborted by user")},i._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},i.error=function(t){this.clear(),this.event("error",t)},i.complete=function(){this.clear();var t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=J.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},r(0,i,"url",function(){return this._http.responseURL}),r(0,i,"http",function(){return this._http}),r(0,i,"data",function(){return this._data}),e}(),at=function(t){function e(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,e.__super.call(this)}o(e,"laya.net.Loader",l);var n=e.prototype;return n.load=function(t,i,n,o,r){if(void 0===n&&(n=!0),void 0===r&&(r=!1),this._url=t,0===t.indexOf("data:image")?this._type=i="image":(this._type=i||(i=this.getTypeFromUrl(t)),t=R.formatURL(t)),this._cache=n,this._data=null,!r&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),void this.event("complete",this._data);if(o&&e.setGroup(t,o),null!=e.parserMap[i])return this._customParse=!0,void(e.parserMap[i]instanceof laya.utils.Handler?e.parserMap[i].runWith(this):e.parserMap[i].call(null,this));if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(t);if("sound"===i)return this._loadSound(t);if("ttf"===i)return this._loadTTF(t);var a;switch(i){case"atlas":case"plf":a="json";break;case"font":a="xml";break;case"pkm":a="arraybuffer";break;default:a=i}e.preLoadedMap[t]?this.onLoaded(e.preLoadedMap[t]):(this._http||(this._http=new rt,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(t,null,"get",a))},n.getTypeFromUrl=function(t){var i=J.getFileExtension(t);return i?e.typeMap[i]:(console.warn("Not recognize the resources suffix",t),"text")},n._loadTTF=function(t){t=R.formatURL(t);var e=new E;e.complete=h.create(this,this.onLoaded),e.load(t)},n._loadImage=function(t){function i(){n.onload=null,n.onerror=null,delete e.imgCache[t]}t=R.formatURL(t);var n,o=this,r=function(){i(),o.onLoaded(n)},a=function(){i(),o.event("error","Load image failed")};"nativeimage"===this._type?((n=new k.window.Image).crossOrigin="",n.onload=r,n.onerror=a,n.src=t,e.imgCache[t]=n):new bt.create(t,{onload:r,onerror:a,onCreate:function(i){n=i,e.imgCache[t]=i}})},n._loadSound=function(t){function e(){i.offAll()}var i=new L._soundClass,n=this;i.on("complete",this,function(){e(),n.onLoaded(i)}),i.on("error",this,function(){e(),i.dispose(),n.event("error","Load sound failed")}),i.load(t)},n.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},n.onError=function(t){this.event("error",t)},n.onLoaded=function(t){var i=this._type;if("plf"==i)this.parsePLFData(t),this.complete(t);else if("image"===i){var n=new ht(t);n.url=this._url,this.complete(n)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(t);else if("atlas"===i){if(!t.src&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var o=t.meta.image.split(","),r=this._url.indexOf("/")>=0?"/":"\\",a=this._url.lastIndexOf(r),s=a>=0?this._url.substr(0,a+1):"",l=0,h=o.length;l<h;l++)o[l]=s+o[l];else o=[this._url.replace(".json",".png")];o.reverse(),t.toLoads=o,t.pics=[]}return this.event("progress",.3+1/o.length*.6),this._loadImage(o.pop())}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,d=this._url.split("?")[0],p=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:d.substring(0,d.lastIndexOf("."))+"/",f=this._data.pics,g=R.formatURL(this._url),_=e.atlasMap[g]||(e.atlasMap[g]=[]);_.dir=p;var m=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){m=parseFloat(this._data.meta.scale);for(var y in c){var v=c[y],I=f[v.frame.idx?v.frame.idx:0],w=R.formatURL(p+y);I.scaleRate=m;var b;b=ht.create(I,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h),e.cacheRes(w,b),b.url=w,_.push(w)}}else for(y in c)I=f[(v=c[y]).frame.idx?v.frame.idx:0],w=R.formatURL(p+y),e.cacheRes(w,ht.create(I,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h)),e.loadedMap[w].url=w,_.push(w);delete this._data.pics,this.complete(this._data)}else if("font"==i){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var C=new u;C.parseFont(this._data,t);var S=this._url.split(".fnt")[0].split("/"),x=S[S.length-1];_t.registerBitmapFont(x,C),this._data=C,this.complete(this._data)}else if("pkm"==i){var T=bt.create(t,this._url),M=new ht(T);M.url=this._url,this.complete(M)}else this.complete(t)},n.parsePLFData=function(t){var i,n,o;for(i in t)switch(o=t[i],i){case"json":case"text":for(n in o)e.preLoadedMap[R.formatURL(n)]=o[n];break;default:for(n in o)e.preLoadedMap[R.formatURL(n)]=o[n]}},n.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(e._loaders.push(this),e._isWorking||e.checkNext())},n.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},r(0,n,"url",function(){return this._url}),r(0,n,"data",function(){return this._data}),r(0,n,"cache",function(){return this._cache}),r(0,n,"type",function(){return this._type}),e.checkNext=function(){e._isWorking=!0;for(var t=k.now();e._startIndex<e._loaders.length;)if(k.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,k.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(k.now()-t)+" url="+e._loaders[e._startIndex-1].url),void i.timer.frameOnce(1,null,e.checkNext);e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t,i){void 0===i&&(i=!1),t=R.formatURL(t);var n=e.getAtlas(t);if(n){for(var o=0,r=n.length;o<r;o++){var a=n[o],s=e.getRes(a);delete e.loadedMap[a],s&&s.destroy(i)}n.length=0,delete e.atlasMap[t],delete e.loadedMap[t]}else{var l=e.loadedMap[t];l&&(delete e.loadedMap[t],l instanceof laya.resource.Texture&&l.bitmap&&l.destroy(i))}},e.clearTextureRes=function(t){t=R.formatURL(t);var e=laya.net.Loader.getAtlas(t),i=e&&e.length>0?laya.net.Loader.getRes(e[0]):laya.net.Loader.getRes(t);i&&i.bitmap&&(P.isConchApp&&!P.isConchWebGL?i.bitmap.source.releaseTexture&&i.bitmap.source.releaseTexture():null==i.bitmap._atlaser&&i.bitmap.releaseResource(!0))},e.getRes=function(t){return e.loadedMap[R.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[R.formatURL(t)]},e.cacheRes=function(t,i){t=R.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=i},e.setGroup=function(t,i){e.groupMap[i]||(e.groupMap[i]=[]),e.groupMap[i].push(t)},e.clearResByGroup=function(t){if(e.groupMap[t]){var i=e.groupMap[t],n=0,o=i.length;for(n=0;n<o;n++)e.clearRes(i[n]);i.length=0}},e.TEXT="text",e.JSON="json",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.TTF="ttf",e.PLF="plf",e.PKM="pkm",e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf",ani:"json",sk:"arraybuffer"},e.parserMap={},e.groupMap={},e.maxTimeOut=100,e.loadedMap={},e.preLoadedMap={},e.atlasMap={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e.imgCache={},e}(),st=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var r;o(e,"laya.net.LoaderManager",l);var a=e.prototype;return a.create=function(t,e,i,n,o,r,a,s){if(void 0===r&&(r=1),void 0===a&&(a=!0),t instanceof Array){var l=t,u=l.length,c=0;if(i)var d=h.create(i.caller,i.method,i.args,!1);for(var p=0;p<u;p++){var f=l[p];"string"==typeof f&&(f=l[p]={url:f}),f.progress=0}for(p=0;p<u;p++){f=l[p];var g=i?h.create(null,function(t,e){t.progress=e;for(var i=0,n=0;n<u;n++)i+=l[n].progress;var o=i/u;d.runWith(o)},[f],!1):null,_=i||e?h.create(null,function(t,i){c++,t.progress=1,c===u&&e&&e.run()},[f]):null;this._create(f.url,_,g,f.clas||n,f.params||o,f.priority||r,a,f.group||s)}return!0}return this._create(t,e,i,n,o,r,a,s)},a._create=function(t,n,o,r,a,s,l,u){void 0===s&&(s=1),void 0===l&&(l=!0);var c=R.formatURL(t),d=this.getRes(c);if(d)!d.hasOwnProperty("loaded")||d.loaded?(o&&o.runWith(1),n&&n.run()):n&&i.loader._createListener(t,n.caller,n.method,n.args,!0,!1);else{var p=J.getFileExtension(t),f=e.createMap[p];if(!f)throw new Error("LoaderManager:unknown file("+t+") extension with: "+p+".");r||(r=f[0]);var g=f[1];"atlas"==p?this.load(t,n,o,g,s,l):(r===ht&&(g="htmlimage"),(d=r?new r:null).hasOwnProperty("_loaded")&&(d._loaded=!1),d._setUrl(t),u&&d._setGroup(u),this._createLoad(d,t,h.create(null,function(e){d&&!d.destroyed&&e&&d.onAsynLoaded.call(d,t,e,a),n&&n.run(),i.loader.event(t)}),o,g,s,!1,u,!0),l&&this.cacheRes(c,d))}return d},a.load=function(t,n,o,a,s,l,h,u){var c=this;if(void 0===s&&(s=1),void 0===l&&(l=!0),void 0===u&&(u=!1),t instanceof Array)return this._loadAssets(t,n,o,a,s,l,h);var d=at.getRes(t);if(null!=d)i.timer.frameOnce(1,null,function(){o&&o.runWith(1),n&&n.runWith(d),c._loaderCount||c.event("complete")});else{var p=e._resMap[t];p?(n&&p._createListener("complete",n.caller,n.method,n.args,!1,!1),o&&p._createListener("progress",o.caller,o.method,o.args,!1,!1)):((p=this._infoPool.length?this._infoPool.pop():new r).url=t,p.type=a,p.cache=l,p.group=h,p.ignoreCache=u,n&&p.on("complete",n.caller,n.method,n.args),o&&p.on("progress",o.caller,o.method,o.args),e._resMap[t]=p,s=s<this._maxPriority?s:this._maxPriority-1,this._resInfos[s].push(p),this._next())}return this},a._createLoad=function(t,n,o,a,s,l,h,u,c){var d=this;if(void 0===l&&(l=1),void 0===h&&(h=!0),void 0===c&&(c=!1),n instanceof Array)return this._loadAssets(n,o,a,s,l,h,u);var p=at.getRes(n);if(null!=p)i.timer.frameOnce(1,null,function(){a&&a.runWith(1),o&&o.runWith(p),d._loaderCount||d.event("complete")});else{var f=e._resMap[n];f?(o&&f._createListener("complete",o.caller,o.method,o.args,!1,!1),a&&f._createListener("progress",a.caller,a.method,a.args,!1,!1)):((f=this._infoPool.length?this._infoPool.pop():new r).url=n,f.clas=t,f.type=s,f.cache=h,f.group=u,f.ignoreCache=c,o&&f.on("complete",o.caller,o.method,o.args),a&&f.on("progress",a.caller,a.method,a.args),e._resMap[n]=f,l=l<this._maxPriority?l:this._maxPriority-1,this._resInfos[l].push(f),this._next())}return this},a._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var e=this._resInfos[t];e.length>0;){var i=e.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event("complete")}},a._doLoad=function(t){function e(e){i.offAll(),i._data=null,i._customParse=!1,n._loaders.push(i),n._endLoad(t,e instanceof Array?[e]:e),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new at;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(t){e(null)});var n=this;i._class=t.clas,i.load(t.url,t.type,t.cache,t.group,t.ignoreCache)},a._endLoad=function(t,n){var o=t.url;if(null==n){var r=this._failRes[o]||0;if(r<this.retryNum)return console.warn("[warn]Retry to load:",o),this._failRes[o]=r+1,void i.timer.once(this.retryDelay,this,this._addReTry,[t],!1);console.warn("[error]Failed to load:",o),this.event("error",o)}this._failRes[o]&&(this._failRes[o]=0),delete e._resMap[o],t.event("complete",n),t.offAll(),this._infoPool.push(t)},a._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},a.clearRes=function(t,e){void 0===e&&(e=!1),at.clearRes(t,e)},a.getRes=function(t){return at.getRes(t)},a.cacheRes=function(t,e){at.cacheRes(t,e)},a.clearTextureRes=function(t){at.clearTextureRes(t)},a.setGroup=function(t,e){at.setGroup(t,e)},a.clearResByGroup=function(t){at.clearResByGroup(t)},a.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var i=this._resInfos[t],n=i.length-1;n>-1;n--){var o=i[n];o&&(o.offAll(),this._infoPool.push(o))}i.length=0}this._loaderCount=0,e._resMap={}},a.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;e<i;e++)this.cancelLoadByUrl(t[e])},a.cancelLoadByUrl=function(t){for(var i=0;i<this._maxPriority;i++)for(var n=this._resInfos[i],o=n.length-1;o>-1;o--){var r=n[o];r&&r.url===t&&(n[o]=null,r.offAll(),this._infoPool.push(r))}e._resMap[t]&&delete e._resMap[t]},a._loadAssets=function(t,e,i,n,o,r,a){void 0===o&&(o=1),void 0===r&&(r=!0);for(var s=t.length,l=0,u=0,c=[],d=!0,p=0;p<s;p++){var f=t[p];"string"==typeof f&&(f={url:f,type:n,size:1,priority:o}),f.size||(f.size=1),f.progress=0,u+=f.size,c.push(f);var g=i?h.create(null,function(t,e){if(null!=i){t.progress=e;for(var n=0,o=0;o<c.length;o++){var r=c[o];n+=r.size*r.progress}var a=n/u;i.runWith(a)}},[f],!1):null,_=e||i?h.create(null,function(t,i){l++,t.progress=1,i||(d=!1),l===s&&e&&e.runWith(d)},[f]):null;this.load(f.url,_,g,f.type,f.priority||1,r,f.group||a)}return this},e.cacheRes=function(t,e){at.cacheRes(t,e)},e._resMap={},n(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e.__init$=function(){r=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,e.__super.call(this)}return o(e,"",l),e}()},e}(),lt=(function(t){function e(t){e.__super.call(this),t||(t=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var i=0,n=0,o=0;o<20;o++)o%5!=4?this._mat[i++]=t[o]:this._alpha[n++]=t[o];this._action=a.createFilterAction(32),this._action.data=this}o(e,"laya.filters.ColorFilter",I);var n=e.prototype;i.imps(n,{"laya.filters.IFilter":!0}),n.callNative=function(t){t._$P.cf=this;t.conchModel&&t.conchModel.setFilterMatrix&&t.conchModel.setFilterMatrix(this._mat,this._alpha)},r(0,n,"type",function(){return 32}),r(0,n,"action",function(){return this._action})}(),function(t){function e(t,i,n){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===i&&(i=0),e.__super.call(this),this._byteClass=n||B,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,t&&i>0&&i<65535&&this.connect(t,i)}o(e,"laya.net.Socket",l);var i=e.prototype;i.connect=function(t,e){var i="ws://"+t+":"+e;i="https:"==k.window.location.protocol?"wss://"+t+":"+e:"ws://"+t+":"+e,this.connectByUrl(i)},i.connectByUrl=function(t){var e=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new k.window.WebSocket(t,this.protocols):this._socket=new k.window.WebSocket(t),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(t){e._onOpen(t)},this._socket.onmessage=function(t){e._onMessage(t)},this._socket.onclose=function(t){e._onClose(t)},this._socket.onerror=function(t){e._onError(t)}},i.cleanSocket=function(){try{this._socket.close()}catch(t){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},i.close=function(){if(null!=this._socket)try{this._socket.close()}catch(t){}},i._onOpen=function(t){this._connected=!0,this.event("open",t)},i._onMessage=function(t){if(t&&t.data){var e=t.data;if(this.disableInput&&e)this.event("message",e);else{this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var i=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e&&("string"==typeof e?this._input.writeUTFBytes(e):this._input.writeArrayBuffer(e),this._addInputPosition=this._input.pos,this._input.pos=i),this.event("message",e)}}},i._onClose=function(t){this._connected=!1,this.event("close",t)},i._onError=function(t){this.event("error",t)},i.send=function(t){this._socket.send(t)},i.flush=function(){if(this._output&&this._output.length>0){var t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e){t=e}this._output.endian=this.endian,this._output.clear(),t&&this.event("error",t)}},r(0,i,"input",function(){return this._input}),r(0,i,"output",function(){return this._output}),r(0,i,"connected",function(){return this._connected}),r(0,i,"endian",function(){return this._endian},function(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t)}),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian"}(),function(t){function e(){this.worker=null,e.__super.call(this);var t=this;this.worker=new k.window.Worker(e.workerPath),this.worker.onmessage=function(e){t.workerMessage(e.data)}}o(e,"laya.net.WorkerLoader",l);var i=e.prototype;i.workerMessage=function(t){if(t)switch(t.type){case"Image":this.imageLoaded(t);break;case"Msg":this.event("image_msg",t.msg)}},i.imageLoaded=function(t){if(t&&t.buffer&&t.buffer.length<10)return e._enable=!1,this._myTrace("buffer lost when postmessage ,disable workerloader"),this.event(t.url,null),void this.event("image_err",t.url+"\n"+t.msg);if(!t.dataType)return this.event(t.url,null),void this.event("image_err",t.url+"\n"+t.msg);var i,n,o;switch(t.dataType){case"buffer":(o=(n=(i=new vt("2D")).source.getContext("2d")).createImageData(t.width,t.height)).data.set(t.buffer),i.size(o.width,o.height),n.putImageData(o,0,0),i.memorySize=0;break;case"imagedata":n=(i=new vt("2D")).source.getContext("2d"),o=t.imagedata,i.size(o.width,o.height),n.putImageData(o,0,0),o=t.imagedata,i.memorySize=0;break;case"imageBitmap":o=t.imageBitmap,P.isWebGL?i=o:(n=(i=new vt("2D")).source.getContext("2d"),i.size(o.width,o.height),n.drawImage(o,0,0),i.src=t.url)}P.isWebGL&&(i=new laya.webgl.resource.WebGLImage(i,t.url)),this.event(t.url,i)},i._myTrace=function(t){var e=arguments,i=[],n=0,o=e.length;for(n=0;n<o;n++)i.push(e[n]);this.event("image_msg",i.join(" "))},i.loadImage=function(t){var e;(e={}).type="load",e.url=t,this.worker.postMessage(e)},i._loadImage=function(t){var i=this;if(!e._enable||t.toLowerCase().indexOf(".png")<0)e._preLoadFun.call(i,t);else{t=R.formatURL(t);var n=function(o){laya.net.WorkerLoader.I.off(t,i,n),o?i.onLoaded(o):e._preLoadFun.call(i,t)};laya.net.WorkerLoader.I.on(t,i,n),laya.net.WorkerLoader.I.loadImage(t)}},r(1,e,"enable",function(){return e._enable},function(t){e.disableJSDecode&&!k.window.createImageBitmap||(e._enable=t)&&null==e._preLoadFun&&(e._enable=e.__init__())}),e.__init__=function(){return null==e._preLoadFun&&(!!k.window.Worker&&(e._preLoadFun=at.prototype._loadImage,at.prototype._loadImage=e.prototype._loadImage,e.I||(e.I=new e),!0))},e.workerSupported=function(){return!!k.window.Worker},e.IMAGE_LOADED="image_loaded",e.IMAGE_ERR="image_err",e.IMAGE_MSG="image_msg",e.I=null,e._preLoadFun=null,e._enable=!1,e.workerPath="libs/worker.js",e.disableJSDecode=!0}(),function(t){function e(){e.__super.call(this),this._$1__id=++e._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,e._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,U.currentResourceManager&&U.currentResourceManager.addResource(this)}o(e,"laya.resource.Resource",l);var n=e.prototype;return i.imps(n,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),n._setUrl=function(t){if(this._url!==t){var i;this._url&&((i=e._urlResourcesMap[this._url]).splice(i.indexOf(this),1),0===i.length&&delete e._urlResourcesMap[this._url]),t&&((i=e._urlResourcesMap[t])||(e._urlResourcesMap[t]=i=[]),i.push(this)),this._url=t}},n._getGroup=function(){return this._group},n._setGroup=function(t){if(this._group!==t){var i;this._group&&((i=e._groupResourcesMap[this._group]).splice(i.indexOf(this),1),0===i.length&&delete e._groupResourcesMap[this._group]),t&&((i=e._groupResourcesMap[t])||(e._groupResourcesMap[t]=i=[]),i.push(this)),this._group=t}},n._addReference=function(){this._referenceCount++},n._removeReference=function(){this._referenceCount--},n._clearReference=function(){this._referenceCount=0},n._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},n.recreateResource=function(){this.completeCreate()},n.disposeResource=function(){},n.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=Y.loopCount,!this._destroyed&&this.__loaded&&(this._released||t)&&this.recreateResource()},n.releaseResource=function(t){return void 0===t&&(t=!1),!(!t&&this.lock)&&(!(this._released&&!t)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},n.onAsynLoaded=function(t,e,i){throw new Error("Resource: must override this function!")},n.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e._idResourcesMap[this.id];var t;this._url&&((t=e._urlResourcesMap[this._url])&&(t.splice(t.indexOf(this),1),0===t.length&&delete e._urlResourcesMap[this.url]),at.clearRes(this._url),this.__loaded||a.cancelLoadByUrl(this._url)),this._group&&((t=e._groupResourcesMap[this._group]).splice(t.indexOf(this),1),0===t.length&&delete e._groupResourcesMap[this.url])}},n.completeCreate=function(){this._released=!1,this.event("recovered",this)},n.dispose=function(){this.destroy()},r(0,n,"memorySize",function(){return this._memorySize},function(t){var e=t-this._memorySize;this._memorySize=t,this.resourceManager&&this.resourceManager.addSize(e)}),r(0,n,"_loaded",null,function(t){this.__loaded=t}),r(0,n,"loaded",function(){return this.__loaded}),r(0,n,"id",function(){return this._$1__id}),r(0,n,"destroyed",function(){return this._destroyed}),r(0,n,"group",function(){return this._getGroup()},function(t){this._setGroup(t)}),r(0,n,"resourceManager",function(){return this._resourceManager}),r(0,n,"url",function(){return this._url}),r(0,n,"released",function(){return this._released}),r(0,n,"referenceCount",function(){return this._referenceCount}),e.getResourceByID=function(t){return e._idResourcesMap[t]},e.getResourceByURL=function(t,i){return void 0===i&&(i=0),e._urlResourcesMap[t][i]},e.getResourceCountByURL=function(t){return e._urlResourcesMap[t].length},e.destroyUnusedResources=function(t){var i;if(t){var n=e._groupResourcesMap[t];if(n)for(var o=n.slice(),r=0,a=o.length;r<a;r++)(i=o[r]).lock||0!==i._referenceCount||i.destroy()}else for(var s in e._idResourcesMap)(i=e._idResourcesMap[s]).lock||0!==i._referenceCount||i.destroy()},e._uniqueIDCounter=0,e._idResourcesMap={},e._urlResourcesMap={},e._groupResourcesMap={},e}()),ht=function(e){function n(t,e){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,n.__super.call(this),t&&null!=t._addReference&&t._addReference(),this.setTo(t,e)}o(n,"laya.resource.Texture",l);var s=n.prototype;return s._setUrl=function(t){this.url=t},s.setTo=function(e,i){if(e instanceof t.HTMLElement){var o=vt.create("2D",e);this.bitmap=o}else this.bitmap=e;if(this.uv=i||n.DEF_UV,e){this._w=e.width,this._h=e.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var r=this;if(this._loaded)a.addToAtlas&&a.addToAtlas(r);else{var s=e;s instanceof laya.resource.HTMLImage&&s.image&&s.image.addEventListener("load",function(t){a.addToAtlas&&a.addToAtlas(r)},!1)}}},s.active=function(){this.bitmap&&this.bitmap.activeResource()},s.destroy=function(t){if(void 0===t&&(t=!1),this.bitmap&&this.bitmap.referenceCount>0){var e=this.bitmap;t?(P.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose(),e._clearReference()):(e._removeReference(),0==e.referenceCount&&(P.isConchApp&&e.source&&e.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e.dispose())),this.url&&this===i.loader.getRes(this.url)&&i.loader.clearRes(this.url,t),this._loaded=!1}},s.load=function(t){var e=this;this._loaded=!1,t=R.customFormat(t);var i=this.bitmap||(this.bitmap=bt.create(t));i&&i._addReference();var n=this;i.onload=function(){i.onload=null,n._loaded=!0,e.sourceWidth=e._w=i.width,e.sourceHeight=e._h=i.height,n.event("loaded",this),a.addToAtlas&&a.addToAtlas(n)}},s.addTextureToAtlas=function(t){a.addTextureToAtlas(this)},s.getPixels=function(t,e,i,n){if(P.isConchApp){var o=this.bitmap;if(o.source&&o.source.getImageData){var r=o.source.getImageData(t,e,i,n),s=new Uint8Array(r);return Array.from(s)}return null}if(P.isWebGL)return a.getTexturePixels(this,t,e,i,n);k.canvas.size(i,n),k.canvas.clear(),k.context.drawTexture(this,-t,-e,this.width,this.height,0,0);return k.context.getImageData(0,0,i,n).data},s.onAsynLoaded=function(t,e){e&&e._addReference(),this.setTo(e,this.uv)},r(0,s,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),r(0,s,"loaded",function(){return this._loaded}),r(0,s,"released",function(){return!this.bitmap||this.bitmap.released}),r(0,s,"width",function(){return this._w?this._w:this.uv&&this.uv!==n.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),r(0,s,"repeat",function(){return!P.isWebGL||!this.bitmap||this.bitmap.repeat},function(t){t&&P.isWebGL&&this.bitmap&&(this.bitmap.repeat=t,t&&(this.bitmap.enableMerageInAtlas=!1))}),r(0,s,"height",function(){return this._h?this._h:this.uv&&this.uv!==n.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),r(0,s,"isLinearSampling",function(){return!P.isWebGL||9728!=this.bitmap.minFifter},function(t){!t&&P.isWebGL&&(t||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),n.moveUV=function(t,e,i){for(var n=0;n<8;n+=2)i[n]+=t,i[n+1]+=e;return i},n.create=function(t,e,i,o,r,s,l,h,u){void 0===s&&(s=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===u&&(u=0);var c=t instanceof laya.resource.Texture,d=c?t.uv:n.DEF_UV,p=c?t.bitmap:t,f=a.isAtlas(p);if(f){var g=p._atlaser,_=t._atlasID;if(-1==_)throw new Error("create texture error");p=g._inAtlasTextureBitmapValue[_],d=g._inAtlasTextureOriUVValue[_]}var m=new n(p,null);p.width&&e+o>p.width&&(o=p.width-e),p.height&&i+r>p.height&&(r=p.height-i),m.width=o,m.height=r,m.offsetX=s,m.offsetY=l,m.sourceWidth=h||o,m.sourceHeight=u||r;var y=1/p.width,v=1/p.height;e*=y,i*=v,o*=y,r*=v;var I=m.uv[0],w=m.uv[1],b=m.uv[4],C=m.uv[5],S=b-I,x=C-w,T=n.moveUV(d[0],d[1],[e,i,e+o,i,e+o,i+r,e,i+r]);m.uv=[I+T[0]*S,w+T[1]*x,b-(1-T[2])*S,w+T[3]*x,b-(1-T[4])*S,C-(1-T[5])*x,I+T[6]*S,C-(1-T[7])*x],f&&m.addTextureToAtlas();var M=p.scaleRate;return M&&1!=M?(m.sourceWidth/=M,m.sourceHeight/=M,m.width/=M,m.height/=M,m.scaleRate=M,m.offsetX/=M,m.offsetY/=M):m.scaleRate=1,m},n.createFromTexture=function(t,e,i,o,r){var a=t.scaleRate;1!=a&&(e*=a,i*=a,o*=a,r*=a);var s=M.TEMP.setTo(e-t.offsetX,i-t.offsetY,o,r),l=s.intersection(n._rect1.setTo(0,0,t.width,t.height),n._rect2);if(!l)return null;var h=n.create(t,l.x,l.y,l.width,l.height,l.x-s.x,l.y-s.y,o,r);return h.bitmap._removeReference(),h},n.DEF_UV=[0,0,1,0,1,1,0,1],n.INV_UV=[0,1,1,1,1,0,0,0],n._rect1=new M,n._rect2=new M,n}(),ut=function(t){function e(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,e.__super.call(this)}var n;o(e,"laya.utils.TimeLine",l);var a=e.prototype;return a.to=function(t,e,i,n,o){return void 0===o&&(o=0),this._create(t,e,i,n,o,!0)},a.from=function(t,e,i,n,o){return void 0===o&&(o=0),this._create(t,e,i,n,o,!1)},a._create=function(t,e,i,o,r,a){var s=H.getItemByClass("tweenData",n);return s.isTo=a,s.type=0,s.target=t,s.duration=i,s.data=e,s.startTime=this._startTime+r,s.endTime=s.startTime+s.duration,s.ease=o,this._startTime=Math.max(s.endTime,this._startTime),this._tweenDataList.push(s),this._startTimeSort=!0,this._endTimeSort=!0,this},a.addLabel=function(t,e){var i=H.getItemByClass("tweenData",n);return i.type=1,i.data=t,i.endTime=i.startTime=this._startTime+e,this._labelDic||(this._labelDic={}),this._labelDic[t]=i,this._tweenDataList.push(i),this},a.removeLabel=function(t){if(this._labelDic&&this._labelDic[t]){var e=this._labelDic[t];if(e){var i=this._tweenDataList.indexOf(e);i>-1&&this._tweenDataList.splice(i,1)}delete this._labelDic[t]}},a.gotoTime=function(t){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var e,i;for(var n in this._firstTweenDic)if(i=this._firstTweenDic[n])for(var o in i)i.diyTarget.hasOwnProperty(o)&&(i.diyTarget[o]=i[o]);for(n in this._tweenDic)(e=this._tweenDic[n]).clear(),delete this._tweenDic[n];this._index=0,this._gidIndex=0,this._currTime=t,this._lastTime=k.now();var r;null==this._endTweenDataList||this._endTimeSort?(this._endTimeSort=!1,this._endTweenDataList=r=this._tweenDataList.concat(),r.sort(function(t,e){return t.endTime>e.endTime?1:t.endTime<e.endTime?-1:0})):r=this._endTweenDataList;for(var a,s=0,l=r.length;s<l;s++)if(0==(a=r[s]).type){if(!(t>=a.endTime))break;this._index=Math.max(this._index,s+1);var u=a.data;if(a.isTo)for(var c in u)a.target[c]=u[c]}for(s=0,l=this._tweenDataList.length;s<l;s++)0==(a=this._tweenDataList[s]).type&&t>=a.startTime&&t<a.endTime&&(this._index=Math.max(this._index,s+1),this._gidIndex++,(e=H.getItemByClass("tween",j))._create(a.target,a.data,a.duration,a.ease,h.create(this,this._animComplete,[this._gidIndex]),0,!1,a.isTo,!0,!1),e.setStartTime(this._currTime-(t-a.startTime)),e._updateEase(this._currTime),e.gid=this._gidIndex,this._tweenDic[this._gidIndex]=e)}},a.gotoLabel=function(t){if(null!=this._labelDic){var e=this._labelDic[t];e&&this.gotoTime(e.startTime)}},a.pause=function(){i.timer.clear(this,this._update)},a.resume=function(){this.play(this._currTime,this._loopKey)},a.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(t,e){return t.startTime>e.startTime?1:t.startTime<e.startTime?-1:0});for(var n=0,o=this._tweenDataList.length;n<o;n++){var r=this._tweenDataList[n];if(null!=r&&0==r.type){var a=r.target,s=a.$_GID||(a.$_GID=J.getGID()),l=null;null==this._firstTweenDic[s]?((l={}).diyTarget=a,this._firstTweenDic[s]=l):l=this._firstTweenDic[s];for(var h in r.data)null==l[h]&&(l[h]=a[h])}}}"string"==typeof t?this.gotoLabel(t):this.gotoTime(t),this._loopKey=e,this._lastTime=k.now(),i.timer.frameLoop(1,this,this._update)}},a._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var t in this._tweenDic)(o=this._tweenDic[t]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var e=k.now(),i=e-this._lastTime,n=this._currTime+=i*this.scale;this._lastTime=e;for(t in this._tweenDic)(o=this._tweenDic[t])._updateEase(n);var o;if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var r=this._tweenDataList[this._index];n>=r.startTime&&(this._index++,0==r.type?(this._gidIndex++,(o=H.getItemByClass("tween",j))._create(r.target,r.data,r.duration,r.ease,h.create(this,this._animComplete,[this._gidIndex]),0,!1,r.isTo,!0,!1),o.setStartTime(n),o.gid=this._gidIndex,this._tweenDic[this._gidIndex]=o,o._updateEase(n)):this.event("label",r.data))}},a._animComplete=function(t){this._tweenDic[t]&&delete this._tweenDic[t]},a._complete=function(){this.event("complete")},a.reset=function(){var t;if(this._labelDic)for(t in this._labelDic)delete this._labelDic[t];for(t in this._tweenDic)this._tweenDic[t].clear(),delete this._tweenDic[t];for(t in this._firstTweenDic)delete this._firstTweenDic[t];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var e=0,n=0;for(n=this._tweenDataList.length,e=0;e<n;e++)this._tweenDataList[e]&&this._tweenDataList[e].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,i.timer.clear(this,this._update)},a.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},r(0,a,"index",function(){return this._frameIndex},function(t){this._frameIndex=t,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),r(0,a,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),e.to=function(t,i,n,o,r){return void 0===r&&(r=0),(new e).to(t,i,n,o,r)},e.from=function(t,i,n,o,r){return void 0===r&&(r=0),(new e).from(t,i,n,o,r)},e.__init$=function(){n=function(){function t(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}o(t,"");return t.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,H.recover("tweenData",this)},t}()},e}(),ct=function(e){function s(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,s.__super.call(this),this._style=c.EMPTY}o(s,"laya.display.Sprite",e);var l=s.prototype;return i.imps(l,{"laya.display.ILayout":!0}),l.createConchModel=function(){return new ConchNode},l.destroy=function(t){void 0===t&&(t=!0),this._releaseMem(),e.prototype.destroy.call(this,t),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},l.updateZOrder=function(){J.updateOrder(this._childs)&&this.repaint()},l.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},l.setBounds=function(t){this._set$P("uBounds",t)},l.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new M),M._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},l.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new M),M._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},l._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this._style._tf.translateX,i=this._style._tf.translateY,t=t||0!==this._style._tf.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?C.scanPList(n):M._getWrapRec(n,M.TEMP)._getBoundPoints()),!this.transform)return J.transPointList(n,this._x-e,this._y-i),n;var o=T.TEMP,r=0,a=n.length;for(r=0;r<a;r+=2)o.x=n[r],o.y=n[r+1],this.toParentPoint(o),n[r]=o.x,n[r+1]=o.y;return n},l.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):M.TEMP.setTo(0,0,0,0)},l._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e=J.clearArray(this._$P.temBM),i=M.TEMP;return i.copyFrom(this.scrollRect),J.concatArray(e,i._getBoundPoints()),e}for(var n,o,r,a=this._graphics?this._graphics.getBoundPoints():J.clearArray(this._$P.temBM),s=0,l=(r=this._childs).length;s<l;s++)(n=r[s])instanceof laya.display.Sprite&&1==n.visible&&(o=n._boundPointsToParent(t))&&(a=a?J.concatArray(a,o):o);return a},l.getStyle=function(){return this._style===c.EMPTY&&(this._style=new c),this._style},l.setStyle=function(t){this._style=t},l._adjustTransform=function(){this._tfChanged=!1;var t,e=this._style._tf,i=e.scaleX,n=e.scaleY;if(e.rotate||1!==i||1!==n||e.skewX||e.skewY){(t=this._transform||(this._transform=x.create())).bTransform=!0;var o=.0174532922222222*(e.rotate-e.skewX),r=.0174532922222222*(e.rotate+e.skewY),a=Math.cos(r),s=Math.sin(r),l=Math.sin(o),h=Math.cos(o);return t.a=i*a,t.b=i*s,t.c=-n*l,t.d=n*h,t.tx=t.ty=0,t}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t},l.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._x=t,this._y=e,this.conchModel&&this.conchModel.pos(this._x,this._y);var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=t,this.y=e}return this},l.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},l.size=function(t,e){return this.width=t,this.height=e,this},l.scale=function(t,e,i){void 0===i&&(i=!1);var n=this.getStyle(),o=n._tf;if(o.scaleX!=t||o.scaleY!=e){if(this.destroyed)return this;if(i){n.setScale(t,e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e),this._renderType|=4;var r=this._parent;r&&0===r._repaint&&(r._repaint=1,r.parentRepaint())}else this.scaleX=t,this.scaleY=e}return this},l.skew=function(t,e){return this.skewX=t,this.skewY=e,this},l.render=function(t,e,i){Y.spriteCount++,G.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},l.drawToCanvas=function(t,e,i,n){if(P.isConchNode){var o=vt.create("2D");return new N(t,e,o).ctx.setCanvasType(1),this.conchModel.drawToCanvas(o.source,i,n),o}return a.drawToCanvas(this,this._renderType,t,e,i,n)},l.customRender=function(t,e,i){this._renderType|=1024},l._applyFilters=function(){if(!P.isWebGL){var t;if((t=this._$P.filters)&&!(t.length<1))for(var e=0,i=t.length;e<i;e++)t[e].action.apply(this._$P.cacheCanvas)}},l._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,e=this._childs.length;t<e;t++)if(this._childs[t]._isHaveGlowFilter())return!0;return!1},l.localToGlobal=function(t,e){void 0===e&&(e=!1),!0===e&&(t=new T(t.x,t.y));for(var n=this;n&&n!=i.stage;)t=n.toParentPoint(t),n=n.parent;return t},l.globalToLocal=function(t,e){void 0===e&&(e=!1),e&&(t=new T(t.x,t.y));for(var n=this,o=[];n&&n!=i.stage;)o.push(n),n=n.parent;for(var r=o.length-1;r>=0;)t=(n=o[r]).fromParentPoint(t),r--;return t},l.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},l.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},l.on=function(t,i,n,o){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,i,n,o,!1)):e.prototype.on.call(this,t,i,n,o)},l.once=function(t,i,n,o){return 1!==this._mouseEnableState&&this.isMouseEvent(t)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t,i,n,o,!0)):e.prototype.once.call(this,t,i,n,o)},l._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t=this;for(t=t.parent;t&&1!==t._mouseEnableState&&!t._getBit(2);)t.mouseEnabled=!0,t._setBit(2,!0),t=t.parent}},l.loadImage=function(t,e,i,n,o,r){var a=this;return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.graphics.loadImage(t,e,i,n,o,function(t){a.destroyed||(a.size(e+(n||t.width),i+(o||t.height)),a.repaint(),r&&r.runWith(t))}),this},l.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},l._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},l._childChanged=function(t){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t&&this._get$P("hasZorder")&&i.timer.callLater(this,this.updateZOrder),this.repaint()},l.parentRepaint=function(){var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint())},l.startDrag=function(t,e,i,n,o,r,a){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===r&&(r=!1),void 0===a&&(a=.92),this._$P.dragging||this._set$P("dragging",new F),this._$P.dragging.start(this,t,e,i,n,o,r,a)},l.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},l._releaseMem=function(){if(this._$P){var t=this._$P.cacheCanvas;t&&t.ctx&&(H.recover("RenderContext",t.ctx),t.ctx.canvas.size(0,0),t.ctx=null);var e=this._$P._filterCache;e&&(e.destroy(),e.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},l._setDisplay=function(t){t||this._releaseMem(),e.prototype._setDisplay.call(this,t)},l.hitTestPoint=function(t,e){var i=this.globalToLocal(T.TEMP.setTo(t,e));t=i.x,e=i.y;return(this._$P.hitArea?this._$P.hitArea:this._width>0&&this._height>0?M.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(t,e)},l.getMousePoint=function(){return this.globalToLocal(T.TEMP.setTo(i.stage.mouseX,i.stage.mouseY))},l._getWords=function(){return null},l._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;if(e)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);return this._childs.forEach(function(e,i,n){e._style._enableLayout()&&e._addToLayout(t)}),!0},l._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))},l._isChar=function(){return!1},l._getCSSStyle=function(){return this._style.getCSSStyle()},l._setAttributes=function(t,e){switch(t){case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},l._layoutLater=function(){this.parent&&this.parent._layoutLater()},r(0,l,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(t){this._optimizeScrollRect!=t&&(this._optimizeScrollRect=t,this.conchModel&&this.conchModel.optimizeScrollRect(t))}),r(0,l,"customRenderEnable",null,function(t){if(t&&(this._renderType|=1024,P.isConchNode)){s.CustomList.push(this);var e=new vt("2d");e._setContext(new CanvasRenderingContext2D),this.customContext=new N(0,0,e),e.context.setCanvasType&&e.context.setCanvasType(2),this.conchModel.custom(e.context)}}),r(0,l,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t){this.cacheAs=t?this._$P.hasFilter?"none":"normal":"none"}),r(0,l,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t){var e=this._$P.cacheCanvas;if(t!==(e?e.type:"none")){if("none"!==t)this._getBit(1)||this._setUpNoticeType(1),e||(e=this._set$P("cacheCanvas",H.getItemByClass("cacheCanvas",Object))),e.type=t,e.reCache=!0,this._renderType|=16,"bitmap"==t&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e){var i=e;i&&i.ctx&&(H.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null),H.recover("cacheCanvas",e)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),r(0,l,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t),this._parent&&(t&&this._parent._set$P("hasZorder",!0),i.timer.callLater(this._parent,this.updateZOrder)))}),r(0,l,"rotation",function(){return this._style._tf.rotate},function(t){var e=this.getStyle();if(e._tf.rotate!==t){e.setRotate(t),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),r(0,l,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t){this._width!==t&&(this._width=t,this.conchModel&&this.conchModel.size(t,this._height),this.repaint())}),r(0,l,"x",function(){return this._x},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t,this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),r(0,l,"globalScaleY",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleY,e=e.parent;return t}),r(0,l,"hitArea",function(){return this._$P.hitArea},function(t){this._set$P("hitArea",t)}),r(0,l,"staticCache",function(){return this._$P.staticCache},function(t){this._set$P("staticCache",t),t||this.reCache()}),r(0,l,"texture",function(){return this._texture},function(t){this._texture!=t&&(this._texture=t,this.graphics.cleanByTexture(t,0,0))}),r(0,l,"y",function(){return this._y},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t,this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),r(0,l,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t){this._height!==t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,t),this.repaint())}),r(0,l,"blendMode",function(){return this._style.blendMode},function(t){this.getStyle().blendMode=t,this.conchModel&&this.conchModel.blendMode(t),t&&"source-over"!=t?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),r(0,l,"scaleX",function(){return this._style._tf.scaleX},function(t){var e=this.getStyle();if(e._tf.scaleX!==t){e.setScaleX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e._tf.scaleY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),r(0,l,"scaleY",function(){return this._style._tf.scaleY},function(t){var e=this.getStyle();if(e._tf.scaleY!==t){e.setScaleY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e._tf.scaleX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),r(0,l,"stage",function(){return i.stage}),r(0,l,"skewX",function(){return this._style._tf.skewX},function(t){var e=this.getStyle();if(e._tf.skewX!==t){e.setSkewX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t,e._tf.skewY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),r(0,l,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this.repaint(),t?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t.x,t.y,t.width,t.height)):(this._renderType&=-129,this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),r(0,l,"skewY",function(){return this._style._tf.skewY},function(t){var e=this.getStyle();if(e._tf.skewY!==t){e.setSkewY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e._tf.skewX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),r(0,l,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1,this._transform=t,t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0,this.conchModel&&this.conchModel.transform(t.a,t.b,t.c,t.d,this._x,this._y)),t?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),r(0,l,"pivotX",function(){return this._style._tf.translateX},function(t){this.getStyle().setTranslateX(t),this.conchModel&&this.conchModel.pivot(t,this._style._tf.translateY),this.repaint()}),r(0,l,"pivotY",function(){return this._style._tf.translateY},function(t){this.getStyle().setTranslateY(t),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t),this.repaint()}),r(0,l,"alpha",function(){return this._style.alpha},function(t){this._style&&this._style.alpha!==t&&(t=t<0?0:t>1?1:t,this.getStyle().alpha=t,this.conchModel&&this.conchModel.alpha(t),1!==t?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),r(0,l,"visible",function(){return this._style.visible},function(t){this._style&&this._style.visible!==t&&(this.getStyle().visible=t,this.conchModel&&this.conchModel.visible(t),this.parentRepaint())}),r(0,l,"graphics",function(){return this._graphics||(this.graphics=a.createGraphics())},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._renderType&=-2,this._renderType|=512,t._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),r(0,l,"filters",function(){return this._$P.filters},function(t){t&&0===t.length&&(t=null),this._$P.filters!=t&&(this._set$P("filters",t?t.slice():null),P.isConchApp&&(this.conchModel&&(s.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),P.isWebGL&&(t&&t.length?this._renderType|=32:this._renderType&=-33),t&&t.length>0?(this._getBit(1)||this._setUpNoticeType(1),P.isWebGL&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(P.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),r(0,l,"parent",e.prototype._$get_parent,function(t){i.superSet(q,this,"parent",t),t&&this._getBit(2)&&this._$2__onDisplay()}),r(0,l,"mask",function(){return this._$P._mask},function(t){t&&this.mask&&this.mask._$P.maskParent||(t?(this.cacheAs="bitmap",this._set$P("_mask",t),t._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(t?t.conchModel:null),this._renderType|=64,this.parentRepaint())}),r(0,l,"mouseEnabled",function(){return this._mouseEnableState>1},function(t){this._mouseEnableState=t?2:1}),r(0,l,"globalScaleX",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleX,e=e.parent;return t}),r(0,l,"mouseX",function(){return this.getMousePoint().x}),r(0,l,"mouseY",function(){return this.getMousePoint().y}),s.fromImage=function(t){return(new s).loadImage(t)},s.CustomList=[],n(s,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=t.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),s}(q),dt=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=J.bind(this.__onEnd,this),this._resumePlay=J.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}o(e,"laya.media.h5audio.AudioSoundChannel",it);var n=e.prototype;return n.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play()},n.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,k.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},n.play=function(){if(this.isStopped=!1,this._audio){try{this._audio.playbackRate=L.playbackRate,this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}L.addChannel(this),k.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()}},n.stop=function(){this.isStopped=!0,L.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&P.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),k.onIE||this._audio!=et._musicAudio&&H.recover("audio:"+this.url,this._audio),k.removeElement(this._audio),this._audio=null)},n.pause=function(){this.isStopped=!0,L.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,L.addChannel(this),"play"in this._audio&&this._audio.play())},r(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),r(0,n,"duration",function(){return this._audio?this._audio.duration:0}),r(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(),pt=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=ot.ctx,e.__super.call(this),this._onPlayEnd=J.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}o(e,"laya.media.webaudio.WebAudioSoundChannel",it);var n=e.prototype;return n.play=function(){if(L.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=k.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(L.playbackRate,this.context.currentTime,.001):i.playbackRate.value=L.playbackRate,i.start(0,this.startTime),this._currentTime=0}},n.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play()},n._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},n._tryClearBuffer=function(t){if(k.onMac)try{t.buffer=ot._miniBuffer}catch(t){e._tryCleanFailed=!0}else try{t.buffer=null}catch(t){e._tryCleanFailed=!0}},n.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,L.removeChannel(this),this.completeHandler=null,L.autoReleaseSound&&i.timer.once(5e3,null,L.disposeSoundIfNotUsed,[this.url],!1)},n.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,L.removeChannel(this),L.autoReleaseSound&&i.timer.once(5e3,null,L.disposeSoundIfNotUsed,[this.url],!1)},n.resume=function(){this.startTime=this._pauseTime,this.play()},r(0,n,"position",function(){return this.bufferSource?(k.now()-this._startTime)/1e3+this.startTime:0}),r(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),r(0,n,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.001):this.gain.gain.value=t)}),e._tryCleanFailed=!1,e.SetTargetDelay=.001,e}(),ft=function(t){function e(){e.__super.call(this),this._w=0,this._h=0}o(e,"laya.resource.Bitmap",lt);var i=e.prototype;return r(0,i,"width",function(){return this._w}),r(0,i,"height",function(){return this._h}),r(0,i,"source",function(){return this._source}),e}(),gt=function(t){function e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,e.__super.call(this),this._interval=s.animationInterval,this._setUpNoticeType(1)}o(e,"laya.display.AnimationPlayerBase",t);var i=e.prototype;return i.play=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=!0),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},i._getFrameByLabel=function(t){var e=0;for(e=0;e<this._count;e++)if(this._labels[e]&&this._labels[e].indexOf(t)>=0)return e;return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._checkResumePlaying),t.on("undisplay",this,this._checkResumePlaying))},i._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._checkResumePlaying()},i._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)},i.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromLabelList(this._labels[e],t)}else this._labels=null},i._removeLabelFromLabelList=function(t,e){if(t)for(var i=t.length-1;i>=0;i--)t[i]==e&&t.splice(i,1)},i.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},i._displayToIndex=function(t){},i.clear=function(){this.stop(),this._labels=null},r(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}),r(0,i,"isPlaying",function(){return this._isPlaying}),r(0,i,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,n=e.length;i<n;i++)this.event("label",e[i])}),r(0,i,"count",function(){return this._count}),e.WRAP_POSITIVE=0,e.WRAP_REVERSE=1,e.WRAP_PINGPONG=2,e}(ct),_t=function(t){function e(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e.__super.call(this),this.overflow=e.VISIBLE,this._style=new tt(this),this._style.wordWrap=!1}o(e,"laya.display.Text",t);var a=e.prototype;return a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._lines=null,this._words&&(this._words.length=0,this._words=null)},a._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=M.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},a.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=M.TEMP;return e.setTo(0,0,this.width,this.height),e},a._getCSSStyle=function(){return this._style},a.lang=function(t,i,n,o,r,a,s,l,h,u,c){if(t=e.langPacks&&e.langPacks[t]?e.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var d=0,p=arguments.length;d<p;d++)t=t.replace("{"+d+"}",arguments[d+1]);this._text=t}},a._isPassWordMode=function(){var t=this._style.password;return"prompt"in this&&this.prompt==this._text&&(t=!1),t},a._getPassWordTxt=function(t){var e;e="";for(var i=t.length;i>0;i--)e+="●";return e},a.renderText=function(t,e){var i=this.graphics;i.clear(!0);var n=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(k.onIPhone?laya.display.Text._fontFamilyMap[this.font]||this.font:this.font);k.context.font=n;var o=this.padding,r=o[3],a="left",s=this._lines,l=this.leading+this._charSize.height,h=this._currBitmapFont;h&&(l=this.leading+h.getMaxHeight());var u=o[0];if(!h&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(a="right",r=this._width-o[1]):"center"==this.align&&(a="center",r=.5*this._width+o[3]-o[1])),this._height>0){var c=this._textHeight>this._height?"top":this.valign;"middle"===c?u=.5*(this._height-e*l)+o[0]-o[2]:"bottom"===c&&(u=this._height-e*l-o[2])}var d=this._style;if(h&&h.autoScaleSize)var p=h.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),h&&h.autoScaleSize){var f=0,g=0;f=this._width?this._width-o[3]-o[1]:this._textWidth,g=this._height?this._height-o[0]-o[2]:this._textHeight,f*=p,g*=p,i.clipRect(o[3],o[0],f,g)}else i.clipRect(o[3],o[0],this._width?this._width-o[3]-o[1]:this._textWidth,this._height?this._height-o[0]-o[2]:this._textHeight);var _=d.password;"prompt"in this&&this.prompt==this._text&&(_=!1);for(var m=0,y=0,v=Math.min(this._lines.length,e+t)||1,I=t;I<v;I++){var w,b=s[I];if(_){var C=b.length;b="";for(var S=C;S>0;S--)b+="●"}if(void 0===b&&(b=""),m=r-(this._clipPoint?this._clipPoint.x:0),y=u+l*I-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(a,m,y,I),h){var x=this.width;h.autoScaleSize&&(x=this.width*p),h.drawText(b,this,m,y,this.align,x)}else P.isWebGL?(this._words||(this._words=[]),(w=this._words.length>I-t?this._words[I-t]:new $).setText(b)):w=b,d.stroke?i.fillBorderText(w,m,y,n,this.color,d.strokeColor,d.stroke,a):i.fillText(w,m,y,n,this.color,a)}if(h&&h.autoScaleSize){var T=1/p;this.scale(T,T)}this._clipPoint&&i.restore(),this._startX=r,this._startY=u},a.drawUnderline=function(t,e,i,n){var o=this._lineWidths[n];switch(t){case"center":e-=o/2;break;case"right":e-=o}i+=this._charSize.height,this._graphics.drawLine(e,i,e+o,i,this.underlineColor||this.color,1)},a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);k.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new T(0,0)):this._clipPoint=null;var t=this._lines.length;if(this.overflow!=e.VISIBLE){var i=this.overflow==e.HIDDEN?Math.floor:Math.ceil;t=Math.min(t,i((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var n=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(n,t),this.repaint()},a.evalTextSize=function(){var t=NaN,e=NaN;t=Math.max.apply(this,this._lineWidths),e=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},a.checkEnabledViewportOrNot=function(){return this.overflow==e.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},a.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},a.parseLines=function(t){var i=this.wordWrap||this.overflow==e.HIDDEN;if(i)var n=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var o=k.context.measureText(e._testWord);P.isConchApp&&0===o.width&&0===o.height&&(o=k.context.measureText("W")),this._charSize.width=o.width,this._charSize.height=o.height||this.fontSize}for(var r=t.replace(/\r\n/g,"\n").split("\n"),a=0,s=r.length;a<s;a++){var l=r[a];i?this.parseLine(l,n):(this._lineWidths.push(this.getTextWidth(l)),this._lines.push(l))}},a.parseLine=function(t,i){k.context;var n,o=this._lines,r=0,a=NaN,s=NaN,l=0;if((a=this.getTextWidth(t))<=i)return o.push(t),void this._lineWidths.push(a);a=this._charSize.width,0==(r=Math.floor(i/a))&&(r=1),s=a=this.getTextWidth(t.substring(0,r));for(var h=r,u=t.length;h<u;h++)if(a=this.getTextWidth(t.charAt(h)),(s+=a)>i)if(this.wordWrap){var c=t.substring(l,h);if(c.charCodeAt(c.length-1)<255?(n=/(?:\w|-)+$/.exec(c))&&(h=n.index+l,0==n.index?h+=c.length:c=t.substring(l,h)):e.RightToLeft&&(n=/([\u0600-\u06FF])+$/.exec(c))&&(h=n.index+l,0==n.index?h+=c.length:c=t.substring(l,h)),o.push(c),this._lineWidths.push(s-a),l=h,!(h+r<u)){o.push(t.substring(l,u)),this._lineWidths.push(this.getTextWidth(o[o.length-1])),l=-1;break}h+=r,s=a=this.getTextWidth(t.substring(l,h)),h--}else if(this.overflow==e.HIDDEN)return o.push(t.substring(0,h)),void this._lineWidths.push(this.getTextWidth(o[o.length-1]));this.wordWrap&&-1!=l&&(o.push(t.substring(l,u)),this._lineWidths.push(this.getTextWidth(o[o.length-1])))},a.getTextWidth=function(t){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t):k.context.measureText(t).width},a.getWordWrapWidth=function(){var t=this.padding,e=NaN;return(e=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(e=this.wordWrap?100:k.width),e<=0&&(e=100),e-t[3]-t[1]},a.getCharPoint=function(t,e){this._isChanged&&i.timer.runCallLater(this,this.typeset);for(var n=0,o=this._lines,r=0,a=0,s=o.length;a<s;a++){if(n+=o[a].length,t<n){var l=a;break}r=n}var h=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;k.context.font=h;var u=this.getTextWidth(this._text.substring(r,t));return(e||new T).setTo(this._startX+u-(this._clipPoint?this._clipPoint.x:0),this._startY+l*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},r(0,a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(i.superSet(ct,this,"width",t),this.isChanged=!0)}),r(0,a,"textWidth",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textWidth}),r(0,a,"height",function(){return this._height?this._height:this.textHeight},function(t){t!=this._height&&(i.superSet(ct,this,"height",t),this.isChanged=!0)}),r(0,a,"textHeight",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textHeight}),r(0,a,"padding",function(){return this._getCSSStyle().padding},function(t){this._getCSSStyle().padding=t,this.isChanged=!0}),r(0,a,"bold",function(){return this._getCSSStyle().bold},function(t){this._getCSSStyle().bold=t,this.isChanged=!0}),r(0,a,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"))}),r(0,a,"color",function(){return this._getCSSStyle().color},function(t){this._getCSSStyle().color!=t&&(this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),r(0,a,"font",function(){return this._getCSSStyle().fontFamily},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e._bitmapFonts&&e._bitmapFonts[t]&&(this._currBitmapFont=e._bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0}),r(0,a,"fontSize",function(){return this._getCSSStyle().fontSize},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0}),r(0,a,"italic",function(){return this._getCSSStyle().italic},function(t){this._getCSSStyle().italic=t,this.isChanged=!0}),r(0,a,"align",function(){return this._getCSSStyle().align},function(t){this._getCSSStyle().align=t,this.isChanged=!0}),r(0,a,"valign",function(){return this._getCSSStyle().valign},function(t){this._getCSSStyle().valign=t,this.isChanged=!0}),r(0,a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0}),r(0,a,"leading",function(){return this._getCSSStyle().leading},function(t){this._getCSSStyle().leading=t,this.isChanged=!0}),r(0,a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0}),r(0,a,"borderColor",function(){return this._getCSSStyle().borderColor},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0}),r(0,a,"stroke",function(){return this._getCSSStyle().stroke},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0}),r(0,a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0}),r(0,a,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&i.timer.callLater(this,this.typeset))}),r(0,a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!(this.overflow!=e.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var i=this._textWidth-this._width;t=t>i?i:t;var n=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t,this.renderText(this._lastVisibleLineIndex,n)}}),r(0,a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!(this.overflow!=e.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var i=this._textHeight-this._height,n=(t=t>i?i:t)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=n;var o=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=t,this.renderText(n,o)}}),r(0,a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),r(0,a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),r(0,a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),r(0,a,"underlineColor",function(){return this._underlineColor},function(t){this._underlineColor=t,this._isChanged=!0,this.typeset()}),e.registerBitmapFont=function(t,i){e._bitmapFonts||(e._bitmapFonts={}),e._bitmapFonts[t]=i},e.unregisterBitmapFont=function(t,i){if(void 0===i&&(i=!0),e._bitmapFonts&&e._bitmapFonts[t]){var n=e._bitmapFonts[t];i&&n.destroy(),delete e._bitmapFonts[t]}},e.setTextRightToLeft=function(){var t;(t=k.canvas.source.style).display="none",t.position="absolute",t.direction="rtl",P._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,k.document.body.appendChild(k.canvas.source)},e.supportFont=function(t){k.context.font="10px sans-serif";var e=k.context.measureText("abcji").width;k.context.font="10px "+t;var i=k.context.measureText("abcji").width;return console.log(e,i),e!==i},e._testWord="游",e.langPacks=null,e.VISIBLE="visible",e.SCROLL="scroll",e.HIDDEN="hidden",e.CharacterCache=!0,e.RightToLeft=!1,e._bitmapFonts=null,n(e,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),e}(ct),mt=function(t){function e(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",e.__super.call(this),this.offset=new T,this._canvasTransform=new x,this._previousOrientation=k.window.orientation;var t=this;this.transform=x.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var i=k.window,n=this;i.addEventListener("focus",function(){t._isFocused=!0,n.event("focus"),n.event("focuschange")}),i.addEventListener("blur",function(){t._isFocused=!1,n.event("blur"),n.event("focuschange"),n._isInputting()&&(wt.inputElement.target.focus=!1)});var o="visibilityState",r="visibilitychange",a=i.document;void 0!==a.hidden?(r="visibilitychange",o="visibilityState"):void 0!==a.mozHidden?(r="mozvisibilitychange",o="mozVisibilityState"):void 0!==a.msHidden?(r="msvisibilitychange",o="msVisibilityState"):void 0!==a.webkitHidden&&(r="webkitvisibilitychange",o="webkitVisibilityState"),i.document.addEventListener(r,function(){"hidden"==k.document[o]?n._setStageVisible(!1):n._setStageVisible(!0)}),i.document.addEventListener("qbrowserVisibilityChange",function(t){n._setStageVisible(!t.hidden)}),i.addEventListener("resize",function(){var e=k.window.orientation;null!=e&&e!=t._previousOrientation&&n._isInputting()&&(wt.inputElement.target.focus=!1),t._previousOrientation=e,n._isInputting()||n._resetCanvas()}),i.addEventListener("orientationchange",function(t){n._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),k.onMobile&&this.on("mousedown",this,this._onmouseMove)}o(e,"laya.display.Stage",t);var s=e.prototype;return s._setStageVisible=function(t){this._isVisibility!=t&&(this._isVisibility=t,this._isVisibility||this._isInputting()&&(wt.inputElement.target.focus=!1),this.event("visibilitychange"))},s._isInputting=function(){return k.onMobile&&wt.isInputting},s._changeCanvasSize=function(){this.setScreenSize(k.clientWidth*k.pixelRatio,k.clientHeight*k.pixelRatio)},s._resetCanvas=function(){if(this.screenAdaptationEnabled){var t=P._mainCanvas;t.source.style;t.size(1,1),i.timer.once(100,this,this._changeCanvasSize)}},s.setScreenSize=function(t,e){var i=!1;if("none"!==this._screenMode){if(i=(t/e<1?"vertical":"horizontal")!==this._screenMode){var n=e;e=t,t=n}}this.canvasRotation=i;var o=P._mainCanvas,r=o.source.style,s=this._canvasTransform.identity(),l=this._scaleMode,h=t/this.designWidth,u=e/this.designHeight,c=this.designWidth,d=this.designHeight,p=t,f=e,g=k.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,l){case"noscale":h=u=1,p=this.designWidth,f=this.designHeight;break;case"showall":h=u=Math.min(h,u),c=p=Math.round(this.designWidth*h),d=f=Math.round(this.designHeight*u);break;case"noborder":h=u=Math.max(h,u),p=Math.round(this.designWidth*h),f=Math.round(this.designHeight*u);break;case"full":h=u=1,this._width=c=t,this._height=d=e;break;case"fixedwidth":u=h,this._height=d=Math.round(e/h);break;case"fixedheight":h=u,this._width=c=Math.round(t/u);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(u=h,this._height=d=Math.round(e/h)):(h=u,this._width=c=Math.round(t/u))}this.conchModel&&this.conchModel.size(this._width,this._height),h*=this.scaleX,u*=this.scaleY,1===h&&1===u?this.transform.identity():(this.transform.a=this._formatData(h/(p/c)),this.transform.d=this._formatData(u/(f/d)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),o.size(c,d),a.changeWebGLSize(c,d),s.scale(p/c/g,f/d/g),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(t-p)/g:this.offset.x=.5*(t-p)/g,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(e-f)/g:this.offset.y=.5*(e-f)/g,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),s.translate(this.offset.x,this.offset.y),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(s.rotate(Math.PI/2),s.translate(e/g,0),this.canvasDegree=90):(s.rotate(-Math.PI/2),s.translate(0,t/g),this.canvasDegree=-90)),s.a=this._formatData(s.a),s.d=this._formatData(s.d),s.tx=this._formatData(s.tx),s.ty=this._formatData(s.ty),r.transformOrigin=r.webkitTransformOrigin=r.msTransformOrigin=r.mozTransformOrigin=r.oTransformOrigin="0px 0px 0px",r.transform=r.webkitTransform=r.msTransform=r.mozTransform=r.oTransform="matrix("+s.toString()+")",s.translate(parseInt(r.left)||0,parseInt(r.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},s._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},s.getMousePoint=function(){return T.TEMP.setTo(this.mouseX,this.mouseY)},s.repaint=function(){this._repaint=1},s.parentRepaint=function(){},s._loop=function(){return this.render(P.context,0,0),!0},s._onmouseMove=function(t){this._mouseMoveTime=k.now()},s.getTimeFromFrameStart=function(){return k.now()-this._frameStartTime},s.render=function(e,n,o){if("sleep"===this._frameRate&&!P.isConchApp){var r=k.now();if(!(r-this._frameStartTime>=1e3))return;this._frameStartTime=r}if(this._renderCount++,P.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=k.now();var s="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),l=this._renderCount%2==0;if(Y.renderSlow=!s,s||l||P.isConchApp){Y.loopCount++,y.instance.runEvent(),i.timer._update(),a.update3DLoop();var h,u=0,c=0;if(P.isConchNode)for(u=0,c=this._scenes.length;u<c;u++)(h=this._scenes[u])&&h._updateSceneConch();else for(u=0,c=this._scenes.length;u<c;u++)(h=this._scenes[u])&&h._updateScene();if(P.isConchNode){var d=ct.CustomList;for(u=0,c=d.length;u<c;u++){var p=d[u];p.customRender(p.customContext,0,0)}return}}P.isConchNode||this.renderingEnabled&&(s||!l||P.isConchWebGL)&&(P.isWebGL?(e.clear(),t.prototype.render.call(this,e,n,o),Y._show&&Y._sp&&Y._sp.render(e,n,o),a.clear(this._bgColor),a.beginFlush(),e.flush(),a.endFinish(),K.instance&&K.getInstance().endDispose()):(a.clear(this._bgColor),t.prototype.render.call(this,e,n,o),Y._show&&Y._sp&&Y._sp.render(e,n,o)))}else this._renderCount%5==0&&(Y.loopCount++,y.instance.runEvent(),i.timer._update())},s._requestFullscreen=function(){var t=k.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},s._fullScreenChanged=function(){i.stage.event("fullscreenchange")},s.exitFullscreen=function(){var t=k.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},r(0,s,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),r(0,s,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),r(0,s,"frameRate",function(){return this._frameRate},function(t){if(this._frameRate=t,P.isConchApp)switch(this._frameRate){case"slow":k.window.conch&&k.window.conchConfig.setSlowFrame&&k.window.conchConfig.setSlowFrame(!0);break;case"fast":k.window.conch&&k.window.conchConfig.setSlowFrame&&k.window.conchConfig.setSlowFrame(!1);break;case"mouse":k.window.conch&&k.window.conchConfig.setMouseFrame&&k.window.conchConfig.setMouseFrame(2e3);break;case"sleep":k.window.conch&&k.window.conchConfig.setLimitFPS&&k.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),r(0,s,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),r(0,s,"width",t.prototype._$get_width,function(t){this.designWidth=t,i.superSet(ct,this,"width",t),i.timer.callLater(this,this._changeCanvasSize)}),r(0,s,"alignH",function(){return this._alignH},function(t){this._alignH=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,s,"isFocused",function(){return this._isFocused}),r(0,s,"height",t.prototype._$get_height,function(t){this.designHeight=t,i.superSet(ct,this,"height",t),i.timer.callLater(this,this._changeCanvasSize)}),r(0,s,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||x.create()},t.prototype._$set_transform),r(0,s,"isVisibility",function(){return this._isVisibility}),r(0,s,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),r(0,s,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,s,"alignV",function(){return this._alignV},function(t){this._alignV=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,s,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this.conchModel&&this.conchModel.bgColor(t),P.isWebGL&&(t?e._wgColor=V.create(t)._color:k.onMiniGame||(e._wgColor=null)),k.onLimixiu?e._wgColor=V.create(t)._color:P.canvas.style.background=t||"none"}),r(0,s,"mouseX",function(){return Math.round(y.instance.mouseX/this.clientScaleX)}),r(0,s,"mouseY",function(){return Math.round(y.instance.mouseY/this.clientScaleY)}),r(0,s,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),r(0,s,"visible",t.prototype._$get_visible,function(t){if(this.visible!==t){i.superSet(ct,this,"visible",t);P._mainCanvas.source.style.visibility=t?"visible":"hidden"}}),r(0,s,"fullScreenEnabled",null,function(t){var e=k.document,i=P.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SCALE_FULL="full",e.SCALE_FIXED_WIDTH="fixedwidth",e.SCALE_FIXED_HEIGHT="fixedheight",e.SCALE_FIXED_AUTO="fixedauto",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_SLEEP="sleep",e.FRAME_MOUSE_THREDHOLD=2e3,n(e,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),e}(ct),yt=(function(t){function e(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,e.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}o(e,"laya.media.SoundNode",ct);var i=e.prototype;i._onParentChange=function(){this.target=this.parent},i.play=function(t,e){void 0===t&&(t=1),isNaN(t)&&(t=1),this.url&&(this.stop(),this._channel=L.playSound(this.url,t,e))},i.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},i._setPlayAction=function(t,e,i,n){void 0===n&&(n=!0),this[i]&&t&&(n?t.on(e,this,this[i]):t.off(e,this,this[i]))},i._setPlayActions=function(t,e,i,n){if(void 0===n&&(n=!0),t&&e){var o=e.split(","),r=0,a=0;for(a=o.length,r=0;r<a;r++)this._setPlayAction(t,o[r],i,n)}},r(0,i,"playEvent",null,function(t){this._playEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"play")}),r(0,i,"target",null,function(t){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=t,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),r(0,i,"stopEvent",null,function(t){this._stopEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"stop")})}(),function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this)}o(e,"laya.resource.FileBitmap",ft);var i=e.prototype;return r(0,i,"src",function(){return this._src},function(t){this._src=t}),r(0,i,"onload",null,function(t){}),r(0,i,"onerror",null,function(t){}),e}()),vt=function(t){function e(t,i){this._is2D=!1,e.__super.call(this);var n=this;if(this._source=this,"2D"===t||"AUTO"===t&&!P.isWebGL){this._is2D=!0,this._source=i||k.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var o=this;o.getContext=function(t,e){if(n._ctx)return n._ctx;var i=n._ctx=n._source.getContext(t,e);return i&&(i._canvas=o,P.isFlash||k.onLimixiu||(i.size=function(t,e){})),i}}this.lock=!0}o(e,"laya.resource.HTMLCanvas",ft);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.getMemSize=function(){return 0},i.size=function(t,e){(this._w!=t||this._h!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._w=t,this._h=e,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},i.getCanvas=function(){return this._source},i.toBase64=function(t,e,i){if(this._source)if(P.isConchApp&&this._source.toBase64)this._source.toBase64(t,e,i);else{var n=this._source.toDataURL(t,e);i.call(this,n)}},r(0,i,"context",function(){return this._ctx}),r(0,i,"asBitmap",null,function(t){}),e.create=function(t,i){return new e(t,i)},e.TYPE2D="2D",e.TYPE3D="3D",e.TYPEAUTO="AUTO",e._createContext=null,e}(),It=(function(t){function e(t,i,n,o,r,a,s,l){throw e.__super.call(this),new Error("不允许new！")}o(e,"laya.resource.HTMLSubImage",ft),e.create=function(t,i,n,o,r,a,s,l){return void 0===l&&(l=!1),new e(t,i,n,o,r,a,s,l)}}(),function(t){function e(){this._frames=null,this._url=null,e.__super.call(this),this._setControlNode(this)}o(e,"laya.display.Animation",t);var n=e.prototype;n.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},n.play=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=!0),i&&this._setFramesFromCache(i,n),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,this._frames&&this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},n._setFramesFromCache=function(t,i){if(void 0===i&&(i=!1),this._url&&(t=this._url+"#"+t),t&&e.framesMap[t]){var n;return(n=e.framesMap[t])instanceof Array?(this._frames=e.framesMap[t],this._count=this._frames.length):(n.nodeRoot&&(e.framesMap[t]=this._parseGraphicAnimationByData(n),n=e.framesMap[t]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0}return i&&console.log("ani not found:",t),!1},n._copyLabels=function(t){if(!t)return null;var e;e={};var i;for(i in t)e[i]=J.copyArray([],t[i]);return e},n._frameLoop=function(){this._style.visible&&this._style.alpha>.01&&t.prototype._frameLoop.call(this)},n._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},n.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},n.loadImages=function(t,i){return void 0===i&&(i=""),this._url="",this._setFramesFromCache(i)||(this.frames=e.framesMap[i]?e.framesMap[i]:e.createFrames(t,i)),this},n.loadAtlas=function(t,n,o){function r(i){t===i&&(a.frames=e.framesMap[o]?e.framesMap[o]:e.createFrames(t,o),n&&n.run())}void 0===o&&(o=""),this._url="";var a=this;return a._setFramesFromCache(o)||(at.getAtlas(t)?r(t):i.loader.load(t,h.create(null,r,[t]),null,"atlas")),this},n.loadAnimation=function(t,e,n){this._url=t;return this._actionName||(this._actionName=""),this._setFramesFromCache(this._actionName)?(this._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!n||at.getAtlas(n)?this._loadAnimationData(t,e,n):i.loader.load(n,h.create(this,this._loadAnimationData,[t,e,n]),null,"atlas"),this},n._loadAnimationData=function(t,n,o){function r(i){if(at.getRes(i)&&t===i){var o;if(e.framesMap[t+"#"])s._setFramesFromCache(a._actionName,!0),a.index=0,a._checkResumePlaying();else{var r=s._parseGraphicAnimation(at.getRes(t));if(!r)return;var l,h=r.animationList,u=0,c=h.length;for(u=0;u<c;u++)o=h[u],e.framesMap[t+"#"+o.name]=o,l||(l=o);l&&(e.framesMap[t+"#"]=l,s._setFramesFromCache(a._actionName,!0),a.index=0),a._checkResumePlaying()}n&&n.run()}}var a=this;if(!o||at.getAtlas(o)){var s=this;at.getRes(t)?r(t):i.loader.load(t,h.create(null,r,[t]),null,"json"),at.clearRes(t)}else console.warn("atlas load fail:"+o)},n._parseGraphicAnimation=function(t){return Ct.parseAnimationData(t)},n._parseGraphicAnimationByData=function(t){return Ct.parseAnimationByData(t)},r(0,n,"frames",function(){return this._frames},function(t){this._frames=t,t&&(this._count=t.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),r(0,n,"autoPlay",null,function(t){t?this.play():this.stop()}),r(0,n,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}),r(0,n,"autoAnimation",null,function(t){this.play(0,!0,t,!1)}),e.createFrames=function(t,i){var n,o,r=0,s=0;if("string"==typeof t){var l=at.getAtlas(t);if(l&&l.length)for(n=[],r=0,s=l.length;r<s;r++)(o=new a.createGraphics).drawTexture(at.getRes(l[r]),0,0),n.push(o)}else if(t instanceof Array)for(n=[],r=0,s=t.length;r<s;r++)(o=new a.createGraphics).loadImage(t[r],0,0),n.push(o);return i&&(e.framesMap[i]=n),n},e.clearCache=function(t){var i,n=e.framesMap,o=t+"#";for(i in n)i!==t&&0!=i.indexOf(o)||delete e.framesMap[i]},e.framesMap={}}(gt),function(t){function e(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,e.__super.call(this),null==e._sortIndexFun&&(e._sortIndexFun=S.sortByKey("index",!1,!0))}o(e,"laya.display.FrameAnimation",t);var i=e.prototype;return i._setUp=function(t,e){this._labels=null,this._animationNewFrames=null,this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._animationNewFrames=e.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._animationNewFrames},i.clear=function(){t.prototype.clear.call(this),this._targetDic=null,this._animationData=null},i._displayToIndex=function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(i=0;i<n;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e,i){i||(i=this._targetDic);var n=i[t.target];if(n){var o,r,a,s=t.frames,l=t.keys,h=0,u=l.length;for(h=0;h<u;h++)a=(r=s[o=l[h]]).length>e?r[e]:r[r.length-1],n[o]=a}},i._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,i=0,n=e.length;for(this._count=0,i=0;i<n;i++)t=e[i],this._calculateNodeKeyFrames(t);this._count+=1}},i._calculateNodeKeyFrames=function(t){var i,n,o=t.keyframes,r=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.initValues||(t.initValues={});for(i in o)n=o[i],t.frames[i]||(t.frames[i]=[]),this._targetDic&&this._targetDic[r]&&(t.initValues[i]=this._targetDic[r][i]),n.sort(e._sortIndexFun),t.keys.push(i),this._calculateNodePropFrames(n,t.frames[i],i,r)},i.resetToInitState=function(){if(this._targetDic&&this._animationData){var t,e,i=this._animationData.nodes,n=0,o=i.length;for(n=0;n<o;n++)if(t=i[n],e=t.initValues){var r=this._targetDic[t.target];if(r){var a;for(a in e)r[a]=e[a]}}}},i._calculateNodePropFrames=function(t,e,i,n){var o=0,r=t.length-1;for(e.length=t[r].index+1,o=0;o<r;o++)this._dealKeyFrame(t[o]),this._calculateFrameValues(t[o],t[o+1],e);0==r&&(e[t[0].index]=t[0].value,this._animationNewFrames&&(this._animationNewFrames[t[0].index]=!0)),this._dealKeyFrame(t[o])},i._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},i._calculateFrameValues=function(t,e,i){var n,o=0,r=t.index,a=e.index,s=t.value,l=e.value-t.value,h=a-r;if(a>this._count&&(this._count=a),t.tween)for(null==(n=Z[t.tweenMethod])&&(n=Z.linearNone),o=r;o<a;o++)i[o]=n(o-r,s,l,h),this._animationNewFrames&&(this._animationNewFrames[o]=!0);else for(o=r;o<a;o++)i[o]=s;this._animationNewFrames&&(this._animationNewFrames[t.index]=!0,this._animationNewFrames[e.index]=!0),i[e.index]=e.value},e._sortIndexFun=null,e}(gt)),wt=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=_t.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}o(e,"laya.display.Input",t);var a=e.prototype;return a.setSelection=function(t,e){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},a._onUnDisplay=function(t){this.focus=!1},a._onMouseDown=function(t){this.focus=!0},a._syncInputTransform=function(){var t=this.nativeInput,n=J.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),o=this._width-this.padding[1]-this.padding[3],r=this._height-this.padding[0]-this.padding[2];P.isConchApp?(t.setScale(n.scaleX,n.scaleY),t.setSize(o,r),t.setPos(n.x,n.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+n.scaleX+","+n.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=o+"px",t.style.height=r+"px",e.inputContainer.style.left=n.x+"px",e.inputContainer.style.top=n.y+"px")},a.select=function(){this.nativeInput.select()},a._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement),_t.RightToLeft&&(e.inputElement.style.direction="rtl")},a._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,P.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,i.stage.off("keydown",this,this._onKeyDown),i.stage.on("keydown",this,this._onKeyDown),i.stage.focus=this,this.event("focus"),k.onPC&&t.focus(),!k.onMiniGame){this._text;this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(k.onIPhone?_t._fontFamilyMap[this.font]||this.font:this.font),P.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!P.isConchApp&&k.onPC&&i.timer.frameLoop(1,this,this._syncInputTransform)},a._setPromptColor=function(){(e.promptStyleDOM=k.getElementById("promptStyle"))||((e.promptStyleDOM=k.createElement("style")).setAttribute("id","promptStyle"),k.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(i.superSet(_t,this,"text",this._content),i.superSet(_t,this,"color",this._originColor)):(i.superSet(_t,this,"text",this._prompt),i.superSet(_t,this,"color",this._promptColor)),i.stage.off("keydown",this,this._onKeyDown),i.stage.focus=null,this.event("blur"),P.isConchApp&&this.nativeInput.blur(),k.onPC&&i.timer.clear(this,this._syncInputTransform)},a._onKeyDown=function(t){13===t.keyCode&&(k.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},a.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e)},r(0,a,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),i.superSet(_t,this,"color",this._content?t:this._promptColor),this._originColor=t}),r(0,a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),r(0,a,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),r(0,a,"maxChars",function(){return this._maxChars},function(t){t<=0&&(t=1e5),this._maxChars=t}),r(0,a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){i.superSet(_t,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?i.superSet(_t,this,"text",t):(i.superSet(_t,this,"text",this._prompt),i.superSet(_t,this,"color",this.promptColor)))}),r(0,a,"nativeInput",function(){return this._multiline?e.area:e.input}),r(0,a,"prompt",function(){return this._prompt},function(t){!this._text&&t&&i.superSet(_t,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?i.superSet(_t,this,"text",this._text==this._prompt?t:this._text):i.superSet(_t,this,"text",t),this._prompt=_t.langPacks&&_t.langPacks[t]?_t.langPacks[t]:t}),r(0,a,"focus",function(){return this._focus},function(t){var i=this.nativeInput;this._focus!==t&&(t?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),k.document.body.scrollTop=0,i.blur(),P.isConchApp?i.setPos(-1e4,-1e4):e.inputContainer.contains(i)&&e.inputContainer.removeChild(i)))}),r(0,a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?((t="[^"+t+"]").indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),r(0,a,"editable",function(){return this._editable},function(t){this._editable=t,P.isConchApp&&e.input.setForbidEdit(!t)}),r(0,a,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||i.superSet(_t,this,"color",t)}),r(0,a,"type",function(){return this._type},function(t){this._getCSSStyle().password="password"==t,this._type=t,P.isConchApp&&this.nativeInput.setType(t)}),r(0,a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),r(0,a,"asPassword",function(){return this._getCSSStyle().password},function(t){this._getCSSStyle().password=t,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),e.__init__=function(){e._createInputElement(),k.onMobile&&P.canvas.addEventListener(e.IOS_IFRAME?k.onMiniGame?"touchend":"click":"touchend",e._popupInputMethod)},e._popupInputMethod=function(t){if(laya.display.Input.isInputting){laya.display.Input.inputElement.focus()}},e._createInputElement=function(){e._initInput(e.area=k.createElement("textarea")),e._initInput(e.input=k.createElement("input")),(e.inputContainer=k.createElement("div")).style.position="absolute",e.inputContainer.style.zIndex=1e5,k.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,i){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=i+"px"}},e._initInput=function(t){var i=t.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},P.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})},e._processInputting=function(t){var e=laya.display.Input.inputElement.target;if(e){var i=laya.display.Input.inputElement.value;e._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),e._restrictPattern.test(i)&&(i=i.replace(e._restrictPattern,""),laya.display.Input.inputElement.value=i)),e._text=i,e.event("input")}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,n(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=k.onIOS&&k.window.top!=k.window.self}]),e}(_t),bt=function(t){function e(t,i){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,e.__super.call(this),this._init_(t,i)}o(e,"laya.resource.HTMLImage",yt);var i=e.prototype;return i._init_=function(t,e){this._src=t,this._source=new k.window.Image,e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),0!=t.indexOf("data:image")&&(this._source.crossOrigin=""),t&&(this._source.src=t)},i.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var e=this;this._source=new k.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._source.onload=null,void(e._source=null);e._source.onload=null,e.memorySize=t._w*t._h*4,e._recreateLock=!1,e.completeCreate()},this._source.src=this._src}},i.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},i.onresize=function(){this._w=this._source.width,this._h=this._source.height},r(0,i,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),r(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror()}:null)}),r(0,i,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t,P.isConchApp&&this._source&&(this._source.enableMerageInAtlas=t)}),e.create=function(t,i){return new e(t,i)},e}(),Ct=(function(t){function e(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,e.__super.call(this)}o(e,"laya.display.EffectAnimation",t);var i=e.prototype;i._onOtherBegin=function(t){t!=this&&this.stop()},i.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},i._onPlayAction=function(){this.play(0,!1)},i.play=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,t,e,i,n))},i._recordInitData=function(){if(this._aniKeys){var t=0,e=0;e=this._aniKeys.length;var i;for(t=0;t<e;t++)i=this._aniKeys[t],this._initData[i]=this._target[i]}},i._displayToIndex=function(t){if(this._animationData){t<0&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(n=n>1?1:n,i=0;i<n;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e,i){if(this._target){var n;n=this._target;var o,r,a,s,l=t.frames,h=t.keys,u=0,c=h.length;s=t.secondFrames;var d,p,f,g,_=0;for(u=0;u<c;u++)r=l[o=h[u]],-1==(_=s[o])?a=this._initData[o]:e<_?(f=(p=t.keyframes[o])[0]).tween?(null==(d=Z[f.tweenMethod])&&(d=Z.linearNone),g=p[1],a=d(e,this._initData[o],g.value-this._initData[o],g.index)):a=this._initData[o]:a=r.length>e?r[e]:r[r.length-1],n[o]=a}},i._calculateNodeKeyFrames=function(e){t.prototype._calculateNodeKeyFrames.call(this,e);var i,n,o,r=e.keyframes;e.target;o={},e.secondFrames=o;for(i in r)(n=r[i]).length<=1?o[i]=-1:o[i]=n[1].index},r(0,i,"target",function(){return this._target},function(t){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=t,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),r(0,i,"playEvent",null,function(t){this._playEvents=t,t&&this.addEvent()}),r(0,i,"effectData",null,function(t){if(t){var e;(e=t.animations)&&e[0]&&(this._setUp({},e[0]),e[0].nodes&&e[0].nodes[0]&&(this._aniKeys=e[0].nodes[0].keys))}}),r(0,i,"effectClass",null,function(t){if(this._effectClass=W.getClass(t),this._effectClass){var e;if(e=this._effectClass.uiView){var i;(i=e.animations)&&i[0]&&(this._setUp({},i[0]),i[0].nodes&&i[0].nodes[0]&&(this._aniKeys=i[0].nodes[0].keys))}}}),e.EffectAnimationBegin="effectanimationbegin"}(It),function(t){function e(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e.__super.call(this)}var i;o(e,"laya.utils.GraphicAnimation",t);var r=e.prototype;return r._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i=0,n=e.length;for(i=0;i<n;i++)this._parseNodeList(e[i])}},r._calGraphicData=function(t){if(this._setUp(null,t),this._createGraphicData(),this._nodeIDAniDic){var e;for(e in this._nodeIDAniDic)this._nodeIDAniDic[e]=null}},r._createGraphicData=function(){var t=[],e=0,i=this.count,n=this._animationNewFrames;n||(n=[]);var o;for(e=0;e<i;e++)!n[e]&&o||(o=this._createFrameGraphic(e)),t.push(o);this._gList=t},r._createFrameGraphic=function(t){var i=a.createGraphics();return e._rootMatrix||(e._rootMatrix=new x),this._updateNodeGraphic(this._rootNode,t,e._rootMatrix,i),i},r._updateNodeGraphic=function(t,e,i,n,o){void 0===o&&(o=1);var r,a=(r=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId])).alpha*o;if(!(a<.01)){r.resultTransform||(r.resultTransform=x.create());var s;s=r.resultTransform,x.mul(r.transform,i,s);var l;r.skin&&(l=this._getTextureByUrl(r.skin))&&(s._checkTransform()?(n.drawTexture(l,0,0,r.width,r.height,s,a),r.resultTransform=null):n.drawTexture(l,s.tx,s.ty,r.width,r.height,null,a));var h;if(h=t.child){var u=0,c=0;for(c=h.length,u=0;u<c;u++)this._updateNodeGraphic(h[u],e,s,n,a)}}},r._updateNoChilds=function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var n=t.transform;n._checkTransform();!n.bTransform?e.drawTexture(i,n.tx,n.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,n.clone(),t.alpha)}}},r._updateNodeGraphic2=function(t,e,i){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),t.child){var o=n.transform;o._checkTransform();var r=!1,a=!1;a=(r=!o.bTransform)&&(0!=o.tx||0!=o.ty);var s=!1;(s=o.bTransform||1!=n.alpha)&&i.save(),1!=n.alpha&&i.alpha(n.alpha),r?a&&i.translate(o.tx,o.ty):i.transform(o.clone());var l;l=t.child;var h;if(n.skin&&(h=this._getTextureByUrl(n.skin))&&i.drawTexture(h,0,0,n.width,n.height),l){var u=0,c=0;for(c=l.length,u=0;u<c;u++)this._updateNodeGraphic2(l[u],e,i)}s?i.restore():r?a&&i.translate(-o.tx,-o.ty):i.transform(o.clone().invert())}else this._updateNoChilds(n,i)},r._calculateNodeKeyFrames=function(e){t.prototype._calculateNodeKeyFrames.call(this,e),this._nodeIDAniDic[e.target]=e},r.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},r._getParams=function(t,i,n,o){var r=e._temParam;r.length=i.length;var a=0,s=i.length;for(a=0;a<s;a++)r[a]=this._getObjVar(t,i[a][0],n,i[a][1],o);return r},r._getObjVar=function(t,e,i,n,o){if(t.hasOwnProperty(e)){var r=t[e];if(i>=r.length&&(i=r.length-1),void 0!=t[e][i])return t[e][i]}return o.hasOwnProperty(e)?o[e]:n},r._getNodeGraphicData=function(t,n,o){o||(o=i.create()),o.transform?o.transform.identity():o.transform=x.create();var r=this.getNodeDataByID(t);if(!r)return o;var a=r.frames,s=this._getParams(a,e._drawTextureCmd,n,this._nodeDefaultProps[t]),l=s[0],h=NaN,u=NaN,c=s[5],d=s[6],p=s[13],f=s[14],g=s[7],_=s[8],m=s[9],y=s[11],v=s[12];h=s[3],u=s[4],0!=h&&0!=u||(l=null),-1==h&&(h=0),-1==u&&(u=0);var I;o.skin=l,o.width=h,o.height=u,l&&((I=this._getTextureByUrl(l))?(h||(h=I.sourceWidth),u||(u=I.sourceHeight)):console.warn("lost skin:",l,",you may load pics first")),o.alpha=s[10];var w;w=o.transform,0!=p&&(c=p*h),0!=f&&(d=f*u),0==c&&0==d||w.translate(-c,-d);var b=null;if(m||1!==g||1!==_||y||v){(b=e._tempMt).identity(),b.bTransform=!0;var C=.0174532922222222*(m-y),S=.0174532922222222*(m+v),T=Math.cos(S),M=Math.sin(S),L=Math.sin(C),D=Math.cos(C);b.a=g*T,b.b=g*M,b.c=-_*L,b.d=_*D,b.tx=b.ty=0}return b&&(w=x.mul(w,b,w)),w.translate(s[1],s[2]),o},r._getTextureByUrl=function(t){return at.getRes(t)},r.setAniData=function(t,i){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var n,o={},r=[],a=t.animations,s=0,l=a.length;for(s=0;s<l;s++)if(n=a[s],this._labels=null,(!i||i==n.name)&&n){try{this._calGraphicData(n)}catch(t){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[]}var h={};h.interval=1e3/n.frameRate,h.frames=this._gList,h.labels=this._labels,h.name=n.name,r.push(h),o[n.name]=h}this.animationList=r,this.animationDic=o}e._temParam.length=0},r.parseByData=function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(t){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var n=t;return n.interval=1e3/i.frameRate,n.frames=this._gList,n.labels=this._labels,n.name=i.name,n},r.setUpAniData=function(t){if(t.animations){var e,i={},n=[],o=t.animations,r=0,a=o.length;for(r=0;r<a;r++)if(e=o[r]){var s={};s.name=e.name,s.aniO=e,s.nodeRoot=t,n.push(s),i[e.name]=s}this.animationList=n,this.animationDic=i}},r._clear=function(){if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic){var t,e;for(t in this._nodeGDic)(e=this._nodeGDic[t])&&e.recover()}this._nodeGDic=null},e.parseAnimationByData=function(t){e._I||(e._I=new e);var i;return i=e._I.parseByData(t),e._I._clear(),i},e.parseAnimationData=function(t){e._I||(e._I=new e),e._I.setUpAniData(t);var i;return i={},i.animationList=e._I.animationList,i.animationDic=e._I.animationDic,e._I._clear(),i},e._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],e._temParam=[],e._I=null,e._rootMatrix=null,n(e,["_tempMt",function(){return this._tempMt=new x}]),e.__init$=function(){i=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}o(t,"");return t.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),H.recover("GraphicNode",this)},t.create=function(){return H.getItemByClass("GraphicNode",t)},t}()},e}(It));i.__init([l,st,P,k,z,D,ut,Ct])}(window,document,Laya),function(t,e,i){i.un,i.uns,i.static;var n=i.class;i.getset,i.__newvec;new(function(){function t(){}return n(t,"LayaMain"),t}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=(i.__newvec,laya.utils.Browser),s=(laya.events.Event,laya.events.EventDispatcher),l=laya.resource.HTMLImage,h=laya.utils.Handler,u=laya.display.Input,c=laya.net.Loader,d=laya.net.LocalStorage,p=(laya.maths.Matrix,laya.renders.Render),f=laya.utils.RunDriver,g=laya.media.SoundChannel,_=laya.media.SoundManager,m=laya.net.URL,y=laya.utils.Utils,v=function(){function e(){}return o(e,"laya.wx.mini.MiniAdpter"),e.getJson=function(t){return JSON.parse(t)},e.init=function(n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!(e._inited||(e._inited=!0,(e.window=t).navigator.userAgent.indexOf("MiniGame")<0))){e.isZiYu=o,e.isPosMsgYu=n,e.EnvConfig={};try{laya.webgl.resource.WebGLCanvas.premulAlpha=!0}catch(t){}if(e.isZiYu||(I.setNativeFileDir("/layaairGame"),I.existDir(I.fileNativeDir,h.create(e,e.onMkdirCallBack))),"ios 10.1.1"===(e.systemInfo=wx.getSystemInfoSync()).system.toLowerCase())try{laya.webgl.resource.WebGLCharImage.canUseCanvas=!1}catch(t){}e.window.focus=function(){},i._getUrlPath=function(){},e.window.logtime=function(t){},e.window.alertTimeLog=function(t){},e.window.resetShareInfo=function(){},e.window.CanvasRenderingContext2D=function(){},e.window.CanvasRenderingContext2D.prototype=e.window.wx.createCanvas().getContext("2d").__proto__,e.window.document.body.appendChild=function(){},e.EnvConfig.pixelRatioInt=0,f.getPixelRatio=e.pixelRatio,e._preCreateElement=a.createElement,a.createElement=e.createElement,f.createShaderCondition=e.createShaderCondition,y.parseXMLFromString=e.parseXMLFromString,u._createInputElement=b._createInputElement,e.EnvConfig.load=c.prototype.load,c.prototype.load=S.prototype.load,c.prototype._loadImage=w.prototype._loadImage,d._baseClass=C,C.__init__(),e.onReciveData()}},e.onReciveData=function(){laya.wx.mini.MiniAdpter.isZiYu&&wx.onMessage(function(t){"opendatacontext"==t.isLoad?t.url&&(I.ziyuFileData[t.url]=t.atlasdata,I.ziyuFileTextureData[t.imgReadyUrl]=t.imgNativeUrl):"openJsondatacontext"==t.isLoad?t.url&&(I.ziyuFileData[t.url]=t.atlasdata):"openJsondatacontextPic"==t.isLoad&&(I.ziyuFileTextureData[t.imgReadyUrl]=t.imgNativeUrl)})},e.measureText=function(t){var i=e._measureText(t);return i||(i={width:16},console.warn("-------微信获取文字宽度失败----等待修复---------")),i},e.getUrlEncode=function(t,e){return-1!=t.indexOf(".fnt")?"utf8":"arraybuffer"==e?"":"ascii"},e.downLoadFile=function(t,e,i,n){void 0===e&&(e=""),void 0===n&&(n="ascii");I.getFileInfo(t)?null!=i&&i.runWith([0]):I.downLoadFile(t,e,i,n)},e.remove=function(t,e){I.deleteFile("",t,e,"",0)},e.removeAll=function(){I.deleteAll()},e.hasNativeFile=function(t){return I.isLocalNativeFile(t)},e.getFileInfo=function(t){return I.getFileInfo(t)},e.getFileList=function(){return I.filesListObj},e.exitMiniProgram=function(){e.window.wx.exitMiniProgram()},e.onMkdirCallBack=function(t,e){t||(I.filesListObj=JSON.parse(e.data))},e.pixelRatio=function(){if(!e.EnvConfig.pixelRatioInt)try{return e.EnvConfig.pixelRatioInt=e.systemInfo.pixelRatio,e.systemInfo.pixelRatio}catch(t){}return e.EnvConfig.pixelRatioInt},e.createElement=function(i){if("canvas"==i){var n;return 1==e.idx?e.isZiYu?(n=sharedCanvas).style={}:n=t.canvas:n=t.wx.createCanvas(),e.idx++,n}if("textarea"==i||"input"==i)return e.onCreateInput(i);if("div"==i){var o=e._preCreateElement(i);return o.contains=function(t){return null},o.removeChild=function(t){},o}return e._preCreateElement(i)},e.onCreateInput=function(t){var i=e._preCreateElement(t);return i.focus=b.wxinputFocus,i.blur=b.wxinputblur,i.style={},i.value=0,i.parentElement={},i.placeholder={},i.type={},i.setColor=function(t){},i.setType=function(t){},i.setFontFace=function(t){},i.addEventListener=function(t){},i.contains=function(t){return null},i.removeChild=function(t){},i},e.createShaderCondition=function(t){var e=this;return function(){return e[t.replace("this.","")]}},e.sendAtlasToOpenDataContext=function(t){if(!laya.wx.mini.MiniAdpter.isZiYu){var i=c.getRes(m.formatURL(t));if(!i)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";i.meta.image.split(",");if(i.meta&&i.meta.image)for(var n=i.meta.image.split(","),o=t.indexOf("/")>=0?"/":"\\",r=t.lastIndexOf(o),a=r>=0?t.substr(0,r+1):"",s=0,l=n.length;s<l;s++)n[s]=a+n[s];else n=[t.replace(".json",".png")];for(s=0;s<n.length;s++){var h=n[s];e.postInfoToContext(t,h,i)}}},e.postInfoToContext=function(t,e,i){var n={frames:i.frames,meta:i.meta},o=e,r=I.getFileInfo(m.formatURL(e));if(r)var a=r.md5,s=I.getFileNativePath(a);else s=o;if(!s)throw"获取图集的磁盘url路径不存在！";wx.postMessage({url:t,atlasdata:n,imgNativeUrl:s,imgReadyUrl:o,isLoad:"opendatacontext"})},e.sendSinglePicToOpenDataContext=function(t){var e=m.formatURL(t),i=I.getFileInfo(e);if(i){var n=i.md5,o=I.getFileNativePath(n);t=e}else o=t;if(!o)throw"获取图集的磁盘url路径不存在！";wx.postMessage({url:t,imgNativeUrl:o,imgReadyUrl:t,isLoad:"openJsondatacontextPic"})},e.sendJsonDataToDataContext=function(t){if(!laya.wx.mini.MiniAdpter.isZiYu){var e=c.getRes(t);if(!e)throw"传递的url没有获取到对应的图集数据信息，请确保图集已经过！";wx.postMessage({url:t,atlasdata:e,isLoad:"openJsondatacontext"})}},e.EnvConfig=null,e.window=null,e._preCreateElement=null,e._inited=!1,e.systemInfo=null,e.isZiYu=!1,e.isPosMsgYu=!1,e.autoCacheFile=!0,e.minClearSize=5242880,e.subNativeFiles=null,e.subNativeheads=[],e.subMaps=[],e.AutoCacheDownFile=!1,e._measureText=null,e.parseXMLFromString=function(e){var i;e=e.replace(/>\s+</g,"><");try{i=(new t.Parser.DOMParser).parseFromString(e,"text/xml")}catch(t){throw"需要引入xml解析库文件"}return i},e.idx=1,n(e,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]),e}(),I=function(){function e(){}return o(e,"laya.wx.mini.MiniFileMgr"),e.isLocalNativeFile=function(t){for(var e=0,i=v.nativefiles.length;e<i;e++)if(-1!=t.indexOf(v.nativefiles[e]))return!0;return!1},e.getFileInfo=function(t){var i=e.filesListObj[t];return null==i?null:i},e.read=function(t,i,n,o,r,a){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===r&&(r=!1),void 0===a&&(a="");var s;s=""==o||-1==o.indexOf("http://")&&-1==o.indexOf("https://")?t:e.getFileNativePath(t),e.fs.readFile({filePath:s,encoding:i,success:function(t){null!=n&&n.runWith([0,t])},fail:function(t){t&&""!=o?e.downFiles(o,i,n,o,r,a):null!=n&&n.runWith([1])}})},e.downFiles=function(t,i,n,o,r,a,s){void 0===i&&(i="ascii"),void 0===o&&(o=""),void 0===r&&(r=!1),void 0===a&&(a=""),void 0===s&&(s=!0);e.wxdown({url:t,success:function(l){200===l.statusCode?e.readFile(l.tempFilePath,i,n,o,r,a,s):403===l.statusCode?null!=n&&n.runWith([0,t]):null!=n&&n.runWith([1,l])},fail:function(t){null!=n&&n.runWith([1,t])}}).onProgressUpdate(function(t){null!=n&&n.runWith([2,t.progress])})},e.readFile=function(t,i,n,o,r,a,s){void 0===i&&(i="ascill"),void 0===o&&(o=""),void 0===r&&(r=!1),void 0===a&&(a=""),void 0===s&&(s=!0),e.fs.readFile({filePath:t,encoding:i,success:function(a){-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?(v.autoCacheFile||r)&&e.copyFile(t,o,n,i,s):null!=n&&n.runWith([0,a])},fail:function(t){t&&null!=n&&n.runWith([1,t])}})},e.downOtherFiles=function(t,i,n,o,r){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===r&&(r=!0),e.wxdown({url:t,success:function(t){200===t.statusCode?(v.autoCacheFile||o)&&-1==n.indexOf("wx.qlogo.cn")&&-1==n.indexOf(".php")?e.copyFile(t.tempFilePath,n,i,"",r):null!=i&&i.runWith([0,t.tempFilePath]):null!=i&&i.runWith([1,t])},fail:function(t){null!=i&&i.runWith([1,t])}})},e.downLoadFile=function(n,o,r,a){void 0===o&&(o=""),void 0===a&&(a="ascii"),t.navigator.userAgent.indexOf("MiniGame")<0?i.loader.load(n,r):"image"==o||"sound"==o?e.downOtherFiles(n,r,n,!0,!1):e.downFiles(n,a,r,n,!0,o,!1)},e.copyFile=function(t,i,n,o,r){void 0===o&&(o=""),void 0===r&&(r=!0);var a=t.split("/"),s=a[a.length-1],l=e.getFileInfo(i),h=e.getFileNativePath(s),u=e.getCacheUseSize();l?l.readyUrl!=i?e.fs.getFileInfo({filePath:t,success:function(t){r&&u+4194304+t.size>=52428800&&(t.size>v.minClearSize&&(v.minClearSize=t.size),e.onClearCacheRes()),e.deleteFile(s,i,n,o,t.size)},fail:function(t){null!=n&&n.runWith([1,t])}}):null!=n&&n.runWith([0]):e.fs.getFileInfo({filePath:t,success:function(a){r&&u+4194304+a.size>=52428800&&(a.size>v.minClearSize&&(v.minClearSize=a.size),e.onClearCacheRes()),e.fs.copyFile({srcPath:t,destPath:h,success:function(t){e.onSaveFile(i,s,!0,o,n,a.size)},fail:function(t){null!=n&&n.runWith([1,t])}})},fail:function(t){null!=n&&n.runWith([1,t])}})},e.onClearCacheRes=function(){var t=v.minClearSize,i=[];for(var n in e.filesListObj)i.push(e.filesListObj[n]);e.sortOn(i,"times",16);for(var o=0,r=1,a=i.length;r<a;r++){var s=i[r];if(o>=t)break;o+=s.size,e.deleteFile("",s.readyUrl)}},e.sortOn=function(t,e,i){return void 0===i&&(i=0),16==i?t.sort(function(t,i){return t[e]-i[e]}):18==i?t.sort(function(t,i){return i[e]-t[e]}):t.sort(function(t,i){return t[e]-i[e]})},e.getFileNativePath=function(t){return laya.wx.mini.MiniFileMgr.fileNativeDir+"/"+t},e.deleteFile=function(t,i,n,o,r){void 0===i&&(i=""),void 0===o&&(o=""),void 0===r&&(r=0);var a=e.getFileInfo(i),s=e.getFileNativePath(a.md5);e.fs.unlink({filePath:s,success:function(a){var s=""!=t;if(""!=t){var l=e.getFileNativePath(t);e.fs.copyFile({srcPath:t,destPath:l,success:function(r){e.onSaveFile(i,t,s,o,n,r.size)},fail:function(t){null!=n&&n.runWith([1,t])}})}else e.onSaveFile(i,t,s,o,n,r)},fail:function(t){}})},e.deleteAll=function(){var t=[];for(var i in e.filesListObj)t.push(e.filesListObj[i]);for(var n=1,o=t.length;n<o;n++){var r=t[n];e.deleteFile("",r.readyUrl)}laya.wx.mini.MiniFileMgr.filesListObj&&laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize=0),laya.wx.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)},e.onSaveFile=function(t,i,n,o,r,s){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===s&&(s=0);var l=t;if(null==e.filesListObj.fileUsedSize&&(e.filesListObj.fileUsedSize=0),n){e.getFileNativePath(i);e.filesListObj[l]={md5:i,readyUrl:t,size:s,times:a.now(),encoding:o},e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)+s,e.writeFilesList(l,JSON.stringify(e.filesListObj),!0),null!=r&&r.runWith([0])}else if(e.filesListObj[l]){var h=parseInt(e.filesListObj[l].size);e.filesListObj.fileUsedSize=parseInt(e.filesListObj.fileUsedSize)-h,delete e.filesListObj[l],e.writeFilesList(l,JSON.stringify(e.filesListObj),!1),null!=r&&r.runWith([0])}},e.writeFilesList=function(t,i,n){var o=e.fileNativeDir+"/"+e.fileListName;e.fs.writeFile({filePath:o,encoding:"utf8",data:i,success:function(t){},fail:function(t){}}),!v.isZiYu&&v.isPosMsgYu&&wx.postMessage({url:t,data:e.filesListObj[t],isLoad:"filenative",isAdd:n})},e.getCacheUseSize=function(){return e.filesListObj&&e.filesListObj.fileUsedSize?e.filesListObj.fileUsedSize:0},e.existDir=function(t,i){e.fs.mkdir({dirPath:t,success:function(t){null!=i&&i.runWith([0,{data:JSON.stringify({})}])},fail:function(t){-1!=t.errMsg.indexOf("file already exists")?e.readSync(e.fileListName,"utf8",i):null!=i&&i.runWith([1,t])}})},e.readSync=function(t,i,n,o){void 0===i&&(i="ascill"),void 0===o&&(o="");var r,a=e.getFileNativePath(t);try{r=e.fs.readFileSync(a,i),null!=n&&n.runWith([0,{data:r}])}catch(t){null!=n&&n.runWith([1])}},e.setNativeFileDir=function(t){e.fileNativeDir=wx.env.USER_DATA_PATH+t},e.filesListObj={},e.fileNativeDir=null,e.fileListName="layaairfiles.txt",e.ziyuFileData={},e.ziyuFileTextureData={},e.loadPath="",e.DESCENDING=2,e.NUMERIC=16,n(e,["fs",function(){return this.fs=wx.getFileSystemManager()},"wxdown",function(){return this.wxdown=wx.downloadFile}]),e}(),w=function(){function t(){}o(t,"laya.wx.mini.MiniImage");return t.prototype._loadImage=function(e){if(v.isZiYu)t.onCreateImage(e,this,!0);else{var i=!1;if(I.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=I.loadPath)e=e.split(I.loadPath)[1];else{var n=""!=m.rootPath?m.rootPath:m.basePath,o=e;""!=n&&(e=e.split(n)[1]),e||(e=o)}if(v.subNativeFiles&&0==v.subNativeheads.length)for(var r in v.subNativeFiles){var a=v.subNativeFiles[r];v.subNativeheads=v.subNativeheads.concat(a);for(var s=0;s<a.length;s++)v.subMaps[a[s]]=r+"/"+a[s]}if(v.subNativeFiles&&-1!=e.indexOf("/")){var l=e.split("/")[0]+"/";if(l&&-1!=v.subNativeheads.indexOf(l)){var u=v.subMaps[l];e=e.replace(l,u)}}}else i=!0,e=m.formatURL(e);I.getFileInfo(e)?t.onCreateImage(e,this,!i):-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?v.isZiYu?t.onCreateImage(e,this,!0):I.downOtherFiles(e,new h(t,t.onDownImgCallBack,[e,this]),e):t.onCreateImage(e,this,!0)}},t.onDownImgCallBack=function(e,i,n,o){void 0===o&&(o=""),n?i.onError(null):t.onCreateImage(e,i,!1,o)},t.onCreateImage=function(t,e,i,n){function o(){u.onload=null,u.onerror=null,delete e.imgCache[t]}void 0===i&&(i=!1),void 0===n&&(n="");var r;if(v.autoCacheFile)if(i)if(v.isZiYu){var s=m.formatURL(t);r=I.ziyuFileTextureData[s]?I.ziyuFileTextureData[s]:t}else r=t;else if(""!=n)r=n;else{var h=I.getFileInfo(t).md5;r=I.getFileNativePath(h)}else r=i?t:n;null==e.imgCache&&(e.imgCache={});var u,c=function(){o(),e._url=m.formatURL(e._url),e.onLoaded(u)},d=function(){o(),e.event("error","Load image failed")};"nativeimage"==e._type?((u=new a.window.Image).crossOrigin="",u.onload=c,u.onerror=d,u.src=r,e.imgCache[t]=u):new l.create(r,{onload:c,onerror:d,onCreate:function(i){u=i,e.imgCache[t]=i}})},t}(),b=function(){function e(){}return o(e,"laya.wx.mini.MiniInput"),e._createInputElement=function(){u._initInput(u.area=a.createElement("textarea")),u._initInput(u.input=a.createElement("input")),u.inputContainer=a.createElement("div"),u.inputContainer.style.position="absolute",u.inputContainer.style.zIndex=1e5,a.container.appendChild(u.inputContainer),u.inputContainer.setPos=function(t,e){u.inputContainer.style.left=t+"px",u.inputContainer.style.top=e+"px"},i.stage.on("resize",null,e._onStageResize),wx.onWindowResize&&wx.onWindowResize(function(e){t.dispatchEvent&&t.dispatchEvent("resize")}),_._soundClass=x,_._musicClass=x;var n=v.systemInfo.model,o=v.systemInfo.system;-1!=n.indexOf("iPhone")&&(a.onIPhone=!0,a.onIOS=!0,a.onIPad=!0,a.onAndroid=!1),-1==o.indexOf("Android")&&-1==o.indexOf("Adr")||(a.onAndroid=!0,a.onIPhone=!1,a.onIOS=!1,a.onIPad=!1)},e._onStageResize=function(){i.stage._canvasTransform.identity().scale(a.width/p.canvas.width/f.getPixelRatio(),a.height/p.canvas.height/f.getPixelRatio())},e.wxinputFocus=function(t){var e=u.inputElement.target;e&&!e.editable||(v.window.wx.offKeyboardConfirm(),v.window.wx.offKeyboardInput(),v.window.wx.showKeyboard({defaultValue:e.text,maxLength:e.maxChars,multiple:e.multiline,confirmHold:!0,confirmType:"done",success:function(t){},fail:function(t){}}),v.window.wx.onKeyboardConfirm(function(t){var i=t?t.value:"";e.text=i,e.event("input"),laya.wx.mini.MiniInput.inputEnter()}),v.window.wx.onKeyboardInput(function(t){var i=t?t.value:"";e.multiline||-1==i.indexOf("\n")?(e.text=i,e.event("input")):laya.wx.mini.MiniInput.inputEnter()}))},e.inputEnter=function(){u.inputElement.target.focus=!1},e.wxinputblur=function(){e.hideKeyboard()},e.hideKeyboard=function(){v.window.wx.offKeyboardConfirm(),v.window.wx.offKeyboardInput(),v.window.wx.hideKeyboard({success:function(t){console.log("隐藏键盘")},fail:function(t){console.log("隐藏键盘出错:"+(t?t.errMsg:""))}})},e}(),C=function(){function t(){}return o(t,"laya.wx.mini.MiniLocalStorage"),t.__init__=function(){t.items=t},t.setItem=function(t,e){try{wx.setStorageSync(t,e)}catch(i){wx.setStorage({key:t,data:e})}},t.getItem=function(t){return wx.getStorageSync(t)},t.setJSON=function(e,i){t.setItem(e,i)},t.getJSON=function(e){return t.getItem(e)},t.removeItem=function(t){wx.removeStorageSync(t)},t.clear=function(){wx.clearStorageSync()},t.getStorageInfoSync=function(){try{var t=wx.getStorageInfoSync();return console.log(t.keys),console.log(t.currentSize),console.log(t.limitSize),t}catch(t){}return null},t.support=!0,t.items=null,t}(),S=(function(){function t(){}o(t,"laya.wx.mini.MiniLocation"),t.__init__=function(){v.window.navigator.geolocation.getCurrentPosition=t.getCurrentPosition,v.window.navigator.geolocation.watchPosition=t.watchPosition,v.window.navigator.geolocation.clearWatch=t.clearWatch},t.getCurrentPosition=function(t,e,i){var n;(n={}).success=function(e){null!=t&&t(e)},n.fail=e,v.window.wx.getLocation(n)},t.watchPosition=function(e,n,o){t._curID++;var r;return r={},r.success=e,r.error=n,t._watchDic[t._curID]=r,i.timer.loop(1e3,null,t._myLoop),t._curID},t.clearWatch=function(e){delete t._watchDic[e],t._hasWatch()||i.timer.clear(null,t._myLoop)},t._hasWatch=function(){var e;for(e in t._watchDic)if(t._watchDic[e])return!0;return!1},t._myLoop=function(){t.getCurrentPosition(t._mySuccess,t._myError)},t._mySuccess=function(e){var i={};i.coords=e,i.timestamp=a.now();var n;for(n in t._watchDic)t._watchDic[n].success&&t._watchDic[n].success(i)},t._myError=function(e){var i;for(i in t._watchDic)t._watchDic[i].error&&t._watchDic[i].error(e)},t._watchDic={},t._curID=0}(),function(t){function e(){e.__super.call(this)}o(e,"laya.wx.mini.MiniAccelerator",t);var i=e.prototype;i.on=function(i,n,o,r){return t.prototype.on.call(this,i,n,o,r),e.startListen(this.onDeviceOrientationChange),this},i.off=function(i,n,o,r){return void 0===r&&(r=!1),this.hasListener(i)||e.stopListen(),t.prototype.off.call(this,i,n,o,r)},e.__init__=function(){try{var t;if(!(t=laya.device.motion.Accelerator))return;t.prototype.on=e.prototype.on,t.prototype.off=e.prototype.off}catch(t){}},e.startListen=function(t){if(e._callBack=t,!e._isListening){e._isListening=!0;try{wx.onAccelerometerChange(e.onAccelerometerChange)}catch(t){}}},e.stopListen=function(){e._isListening=!1;try{wx.stopAccelerometer({})}catch(t){}},e.onAccelerometerChange=function(t){var i;(i={}).acceleration=t,i.accelerationIncludingGravity=t,i.rotationRate={},null!=e._callBack&&e._callBack(i)},e._isListening=!1,e._callBack=null}(s),function(t){function e(){e.__super.call(this)}o(e,"laya.wx.mini.MiniLoader",s);return e.prototype.load=function(t,i,n,o,r){void 0===n&&(n=!0),void 0===r&&(r=!1);if(this._url=t,0===t.indexOf("data:image")?this._type=i="image":this._type=i||(i=this.getTypeFromUrl(t)),this._cache=n,this._data=null,!r&&c.loadedMap[m.formatURL(t)])return this._data=c.loadedMap[m.formatURL(t)],this.event("progress",1),void this.event("complete",this._data);if(null!=c.parserMap[i])return this._customParse=!0,void(c.parserMap[i]instanceof laya.utils.Handler?c.parserMap[i].runWith(this):c.parserMap[i].call(null,this));var a=v.getUrlEncode(t,i),s=y.getFileExtension(t);if(-1!=e._fileTypeArr.indexOf(s))v.EnvConfig.load.call(this,t,i,n,o,r);else{if(v.isZiYu&&!I.ziyuFileData[t]&&(t=m.formatURL(t)),v.isZiYu&&I.ziyuFileData[t]){var l=I.ziyuFileData[t];return void this.onLoaded(l)}if(I.getFileInfo(t)){var u=I.getFileInfo(t);u.encoding=null==u.encoding?"ascii":u.encoding,I.readFile(t,u.encoding,new h(e,e.onReadNativeCallBack,[a,t,i,n,o,r,this]),t)}else{if(I.isLocalNativeFile(t)){if(v.subNativeFiles&&0==v.subNativeheads.length)for(var d in v.subNativeFiles){var p=v.subNativeFiles[d];v.subNativeheads=v.subNativeheads.concat(p);for(var f=0;f<p.length;f++)v.subMaps[p[f]]=d+"/"+p[f]}if(v.subNativeFiles&&-1!=t.indexOf("/")){var g=t.split("/")[0]+"/";if(g&&-1!=v.subNativeheads.indexOf(g)){var _=v.subMaps[g];t=t.replace(g,_)}}return void I.read(t,a,new h(e,e.onReadNativeCallBack,[a,t,i,n,o,r,this]))}var w=t;-1!=(t=m.formatURL(t)).indexOf("http://")||-1!=t.indexOf("https://")?v.EnvConfig.load.call(this,w,i,n,o,r):I.readFile(t,a,new h(e,e.onReadNativeCallBack,[a,t,i,n,o,r,this]),t)}}},e.onReadNativeCallBack=function(t,e,i,n,o,r,a,s,l){if(void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===s&&(s=0),s)1==s&&(console.log("-----------本地加载失败，尝试外网加载----"),v.EnvConfig.load.call(a,e,i,n,o,r));else{var h;h="json"==i||"atlas"==i?v.getJson(l.data):"xml"==i?y.parseXMLFromString(l.data):l.data,!v.isZiYu&&v.isPosMsgYu&&"arraybuffer"!=i&&wx.postMessage({url:e,data:h,isLoad:"filedata"}),a.onLoaded(h)}},n(e,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]),e}()),x=function(t){function e(){this._sound=null,this.url=null,this.loaded=!1,this.readyUrl=null,e.__super.call(this)}o(e,"laya.wx.mini.MiniSound",s);var i=e.prototype;return i.load=function(t){if(I.isLocalNativeFile(t)){if(-1!=t.indexOf("http://")||-1!=t.indexOf("https://"))if(""!=I.loadPath)t=t.split(I.loadPath)[1];else{var i=""!=m.rootPath?m.rootPath:m.basePath;""!=i&&(t=t.split(i)[1])}}else t=m.formatURL(t);if(this.url=t,this.readyUrl=t,e._audioCache[this.readyUrl])this.event("complete");else if(v.autoCacheFile&&I.getFileInfo(t))this.onDownLoadCallBack(t,0);else if(v.autoCacheFile)if(I.isLocalNativeFile(t)){var n=t;if(""!=(i=""!=m.rootPath?m.rootPath:m.basePath)&&(t=t.split(i)[1]),t||(t=n),v.subNativeFiles&&0==v.subNativeheads.length)for(var o in v.subNativeFiles){var r=v.subNativeFiles[o];v.subNativeheads=v.subNativeheads.concat(r);for(var a=0;a<r.length;a++)v.subMaps[r[a]]=o+"/"+r[a]}if(v.subNativeFiles&&-1!=t.indexOf("/")){var s=t.split("/")[0]+"/";if(s&&-1!=v.subNativeheads.indexOf(s)){var l=v.subMaps[s];t=t.replace(s,l)}}this.onDownLoadCallBack(t,0)}else I.downOtherFiles(t,h.create(this,this.onDownLoadCallBack,[t]),t);else this.onDownLoadCallBack(t,0)},i.onDownLoadCallBack=function(t,i){if(i)this.event("error");else{var n;if(v.autoCacheFile){var o=I.getFileInfo(t);if(o&&o.md5){var r=o.md5;n=I.getFileNativePath(r)}else n=t;this._sound=e._createSound(),this._sound.src=this.url=n}else this._sound=e._createSound(),this._sound.src=t;this._sound.onCanplay(e.bindToThis(this.onCanPlay,this)),this._sound.onError(e.bindToThis(this.onError,this))}},i.onError=function(t){try{console.log("-----1---------------minisound-----id:"+e._id),console.log(t)}catch(t){console.log("-----2---------------minisound-----id:"+e._id),console.log(t)}this.event("error"),this._sound.offError(null)},i.onCanPlay=function(){this.loaded=!0,this.event("complete"),this._sound.offCanplay(null)},i.play=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n;if(this.url==_._tMusic?(e._musicAudio||(e._musicAudio=e._createSound()),n=e._musicAudio):n=e._audioCache[this.readyUrl]?e._audioCache[this.readyUrl]._sound:e._createSound(),v.autoCacheFile&&I.getFileInfo(this.url)){var o=I.getFileInfo(this.url).md5;n.src=this.url=I.getFileNativePath(o)}else n.src=this.url;var r=new T(n,this);return r.url=this.url,r.loops=i,r.loop=0===i,r.startTime=t,r.play(),_.addChannel(r),r},i.dispose=function(){var t=e._audioCache[this.readyUrl];t&&(t.src="",t._sound&&(t._sound.destroy(),t._sound=null,t=null),delete e._audioCache[this.readyUrl])},r(0,i,"duration",function(){return this._sound.duration}),e._createSound=function(){return e._id++,v.window.wx.createInnerAudioContext()},e.bindToThis=function(t,e){return t.bind(e)},e._musicAudio=null,e._id=0,e._audioCache={},e}(),T=function(t){function e(t,i){this._audio=null,this._onEnd=null,this._miniSound=null,e.__super.call(this),this._audio=t,this._miniSound=i,this._onEnd=e.bindToThis(this.__onEnd,this),t.onEnded(this._onEnd)}o(e,"laya.wx.mini.MiniSoundChannel",g);var n=e.prototype;return n.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.startTime=0,this.play()},n.play=function(){this.isStopped=!1,_.addChannel(this),this._audio.play()},n.stop=function(){this.isStopped=!0,_.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.offEnded(null),this._audio=null,this._miniSound=null,this._onEnd=null)},n.pause=function(){this.isStopped=!0,this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,_.addChannel(this),this._audio.play())},r(0,n,"startTime",null,function(t){this._audio&&(this._audio.startTime=t)}),r(0,n,"autoplay",function(){return this._audio.autoplay},function(t){this._audio.autoplay=t}),r(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),r(0,n,"duration",function(){return this._audio?this._audio.duration:0}),r(0,n,"loop",function(){return this._audio.loop},function(t){this._audio.loop=t}),r(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e.bindToThis=function(t,e){return t.bind(e)},e}()}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=i.__newvec,s=laya.maths.Arith,l=laya.maths.Bezier,h=laya.resource.Bitmap,u=laya.utils.Browser,c=laya.utils.Byte,d=laya.utils.Color,p=(laya.filters.ColorFilter,i.Config),f=laya.resource.Context,g=(laya.events.Event,laya.filters.Filter),_=laya.display.Graphics,m=laya.resource.HTMLCanvas,y=(laya.utils.HTMLChar,laya.resource.HTMLImage),v=laya.resource.HTMLSubImage,I=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),w=laya.maths.Point,b=laya.maths.Rectangle,C=laya.renders.Render,S=(laya.renders.RenderContext,laya.renders.RenderSprite),x=laya.resource.Resource,T=laya.resource.ResourceManager,M=laya.utils.RunDriver,L=laya.display.Sprite,D=laya.display.Stage,E=laya.utils.Stat,R=laya.utils.StringKey,P=(laya.display.css.Style,laya.system.System),N=laya.display.Text,G=laya.resource.Texture,A=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),U=laya.utils.VectorGraphManager;laya.utils.WordText;i.interface("laya.webgl.shapes.IShape"),i.interface("laya.webgl.submit.ISubmit"),i.interface("laya.webgl.text.ICharSegment"),i.interface("laya.webgl.canvas.save.ISaveData"),i.interface("laya.webgl.resource.IMergeAtlasBitmap"),i.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var k=function(){function t(){}o(t,"laya.filters.webgl.FilterActionGL");var e=t.prototype;return i.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValue=function(t){},e.setValueMix=function(t){},e.apply3d=function(t,e,i,n,o){return null},e.apply=function(t){return null},r(0,e,"typeMix",function(){return 0}),t}(),B=function(){function t(){}return o(t,"laya.webgl.shader.ShaderValue"),t}(),O=function(){function t(t,e,n){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new i,void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._cells=null,this._rowInfo=null,this._init(t,e),this._atlasID=n}var e,i;o(t,"laya.webgl.atlas.AtlasGrid");var n=t.prototype;return n.getAltasID=function(){return this._atlasID},n.setAltasID=function(t){t>=0&&(this._atlasID=t)},n.addTex=function(t,e,i){var n=this._get(e,i);return 0==n.ret?n:(this._fill(n.x,n.y,e,i,t),this._texCount++,n)},n._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},n._init=function(t,i){if(this._width=t,this._height=i,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=a(this._height);for(var n=0;n<this._height;n++)this._rowInfo[n]=new e;return this._clear(),!0},n._get=function(t,e){var i=new V;if(t>=this._failSize.width&&e>=this._failSize.height)return i;for(var n=-1,o=-1,r=this._width,a=this._height,s=this._cells,l=0;l<a;l++)if(!(this._rowInfo[l].spaceCount<t))for(var h=0;h<r;){var u=3*(l*r+h);if(0!=s[u]||s[u+1]<t||s[u+2]<e)h+=s[u+1];else{n=h,o=l;for(var c=0;c<t;c++)if(s[3*c+u+2]<e){n=-1;break}if(!(n<0))return i.ret=!0,i.x=n,i.y=o,i;h+=s[u+1]}}return i},n._fill=function(t,e,i,n,o){var r=this._width,a=this._height;this._check(t+i<=r&&e+n<=a);for(var s=e;s<n+e;++s){this._check(this._rowInfo[s].spaceCount>=i),this._rowInfo[s].spaceCount-=i;for(var l=0;l<i;l++){var h=3*(t+s*r+l);this._check(0==this._cells[h]),this._cells[h]=o,this._cells[h+1]=i,this._cells[h+2]=n}}if(t>0)for(s=0;s<n;++s){var u=0;for(l=t-1;l>=0&&0==this._cells[3*((e+s)*r+l)];--l,++u);for(l=u;l>0;--l)this._cells[3*((e+s)*r+t-l)+1]=l,this._check(l>0)}if(e>0)for(l=t;l<t+i;++l){for(u=0,s=e-1;s>=0&&0==this._cells[3*(l+s*r)];--s,u++);for(s=u;s>0;--s)this._cells[3*(l+(e-s)*r)+2]=s,this._check(s>0)}},n._check=function(t){0==t&&console.log("xtexMerger 错误啦")},n._clear=function(){this._texCount=0;for(var t=0;t<this._height;t++)this._rowInfo[t].spaceCount=this._width;for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var n=3*(e*this._width+i);this._cells[n]=0,this._cells[n+1]=this._width-i,this._cells[n+2]=this._width-e}this._failSize.width=this._width+1,this._failSize.height=this._height+1},t.__init$=function(){e=function(){function t(){this.spaceCount=0}return o(t,""),t}(),i=function(){function t(){this.width=0,this.height=0}return o(t,""),t}()},t}(),W=function(){function t(t,e,i,n){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=t,this._height=e,this._gridSize=i,this._maxAtlaserCount=n,this._gridNumX=t/i,this._gridNumY=e/i,this._curAtlasIndex=0,this._atlaserArray=[]}o(t,"laya.webgl.atlas.AtlasResourceManager");var e=t.prototype;return e.setAtlasParam=function(e,i,n,o){if(1==this._setAtlasParam)return t._sid_=0,this._width=e,this._height=i,this._gridSize=n,this._maxAtlaserCount=o,this._gridNumX=e/n,this._gridNumY=i/n,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},e.pushData=function(e){var i=e.bitmap,n=-1,o=null,r=0,a=0,s=0;for(r=0,a=this._atlaserArray.length;r<a&&(s=(this._curAtlasIndex+r)%a,o=this._atlaserArray[s],-1==(n=o.findBitmapIsExist(i)));r++);if(-1!=n){var l=o.InAtlasWebGLImagesOffsetValue[n];return g=l[0],_=l[1],o.addToAtlas(e,g,_),!0}this._setAtlasParam=!1;for(var h=Math.ceil((e.bitmap.width+2)/this._gridSize),u=Math.ceil((e.bitmap.height+2)/this._gridSize),c=!1,d=0;d<2;d++){var p=this._maxAtlaserCount;for(r=0;r<p;r++){s=(this._curAtlasIndex+r)%p,this._atlaserArray.length-1>=s||this._atlaserArray.push(new Mt(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++));var f=this._atlaserArray[s],g=0,_=0,m=f.addTex(1,h,u);if(m.ret){g=m.x*this._gridSize+1,_=m.y*this._gridSize+1,i.lock=!0,f.addToAtlasTexture(i,g,_),f.addToAtlas(e,g,_),c=!0,this._curAtlasIndex=s;break}}if(c)break;this._atlaserArray.push(new Mt(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return c||console.log(">>>AtlasManager pushData error"),c},e.addToAtlas=function(t){laya.webgl.atlas.AtlasResourceManager.instance.pushData(t)},e.garbageCollection=function(){if(!0===this._needGC){for(var t=this._atlaserArray.length-this._maxAtlaserCount,e=0;e<t;e++)this._atlaserArray[e].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+t),this._atlaserArray.splice(0,t),this._needGC=!1}return!0},e.freeAll=function(){for(var t=0,e=this._atlaserArray.length;t<e;t++)this._atlaserArray[t].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},e.getAtlaserCount=function(){return this._atlaserArray.length},e.getAtlaserByIndex=function(t){return this._atlaserArray[t]},r(1,t,"instance",function(){return t._Instance||(t._Instance=new t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),t._Instance}),r(1,t,"enabled",function(){return p.atlasEnable}),r(1,t,"atlasLimitWidth",function(){return t._atlasLimitWidth},function(e){t._atlasLimitWidth=e}),r(1,t,"atlasLimitHeight",function(){return t._atlasLimitHeight},function(e){t._atlasLimitHeight=e}),t._enable=function(){p.atlasEnable=!0},t._disable=function(){p.atlasEnable=!1},t.__init__=function(){t.atlasTextureWidth=2048,t.atlasTextureHeight=2048,t.maxTextureCount=6,t.atlasLimitWidth=512,t.atlasLimitHeight=512},t._atlasLimitWidth=0,t._atlasLimitHeight=0,t.gridSize=16,t.atlasTextureWidth=0,t.atlasTextureHeight=0,t.maxTextureCount=0,t._atlasRestore=0,t.BOARDER_TYPE_NO=0,t.BOARDER_TYPE_RIGHT=1,t.BOARDER_TYPE_LEFT=2,t.BOARDER_TYPE_BOTTOM=4,t.BOARDER_TYPE_TOP=8,t.BOARDER_TYPE_ALL=15,t._sid_=0,t._Instance=null,t}(),V=function(){function t(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return o(t,"laya.webgl.atlas.MergeFillInfo"),t}(),F=function(){function t(){}return o(t,"laya.webgl.canvas.BlendMode"),t._init_=function(e){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]},t.BlendNormal=function(t){t.blendFunc(1,771)},t.BlendAdd=function(t){t.blendFunc(1,772)},t.BlendMultiply=function(t){t.blendFunc(774,771)},t.BlendScreen=function(t){t.blendFunc(1,1)},t.BlendOverlay=function(t){t.blendFunc(1,769)},t.BlendLight=function(t){t.blendFunc(1,1)},t.BlendNormalTarget=function(t){t.blendFunc(1,771)},t.BlendAddTarget=function(t){t.blendFunc(1,772)},t.BlendMultiplyTarget=function(t){t.blendFunc(774,771)},t.BlendScreenTarget=function(t){t.blendFunc(1,1)},t.BlendOverlayTarget=function(t){t.blendFunc(1,769)},t.BlendLightTarget=function(t){t.blendFunc(1,1)},t.BlendMask=function(t){t.blendFunc(0,770)},t.BlendDestinationOut=function(t){t.blendFunc(0,0)},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.LIGHT="light",t.OVERLAY="overlay",t.DESTINATIONOUT="destination-out",t.fns=[],t.targetFns=[],t}(),Z=function(){function t(t){this._color=d.create("black"),this.setValue(t)}o(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){if(t){if("string"==typeof t)return void(this._color=d.create(t));if(t instanceof laya.utils.Color)return void(this._color=t)}},e.reset=function(){this._color=d.create("black")},e.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.Color&&this._color.numColor===t.numColor},e.toColorStr=function(){return this._color.strColor},t.create=function(e){if(e){var i;if("string"==typeof e?i=d.create(e):e instanceof laya.utils.Color&&(i=e),i)return i._drawStyle||(i._drawStyle=new t(e))}return laya.webgl.canvas.DrawStyle.DEFAULT},n(t,["DEFAULT",function(){return this.DEFAULT=new t("#000000")}]),t}(),X=function(){function t(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];It.mainContext;this.ib=$t.create(35048),this.vb=qt.create(5)}o(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.addPoint=function(t,e){this.tempArray.push(t,e)},e.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},e.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},e.polygon=function(t,e,i,n,o,r){var a;return this.geomatrys.push(this._curGeomatry=a=new Rt(t,e,i,n,o,r)),n||(a.fill=!1),void 0==r&&(a.borderWidth=0),a},e.setGeomtry=function(t){this.geomatrys.push(this._curGeomatry=t)},e.drawLine=function(t,e,i,n,o){var r;return this.closePath?this.geomatrys.push(this._curGeomatry=r=new Et(t,e,i,n,o)):this.geomatrys.push(this._curGeomatry=r=new Dt(t,e,i,n,o)),r.fill=!1,r},e.update=function(){var t=this.ib._byteLength,e=this.geomatrys.length;this.offset=t;for(var i=this.geoStart;i<e;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=e,this.count=(this.ib._byteLength-t)/gt.BYTES_PIDX},e.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},e.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},t}(),H=function(){function t(){}o(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._dataObj[this._valueName]=this._value,t._cache[t._cache._length++]=this,this._newSubmit&&(e._curSubmit=rt.RENDERBASE,e._renderKey=0)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[1048576]="shader",e[2097152]="filters",e},t.save=function(e,i,n,o){if((e._saveMark._saveuse&i)!==i){e._saveMark._saveuse|=i;var r=t._cache,a=r._length>0?r[--r._length]:new t;a._value=n[a._valueName=t._namemap[i]],a._dataObj=n,a._newSubmit=o;var s=e._save;s[s._length++]=a}},t._cache=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),Y=function(){function t(){this._clipRect=new b}o(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._clipRect=this._clipSaveRect,t._cache[t._cache._length++]=this,this._submitScissor.submitLength=e._submits._length-this._submitScissor.submitIndex,e._curSubmit=rt.RENDERBASE,e._renderKey=0},t.save=function(e,i){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var n=t._cache,o=n._length>0?n[--n._length]:new t;o._clipSaveRect=e._clipRect,e._clipRect=o._clipRect.copyFrom(e._clipRect),o._submitScissor=i;var r=e._save;r[r._length++]=o}},n(t,["_cache",function(){return this._cache=H._createArray()}]),t}(),z=function(){function t(){this._contextX=0,this._contextY=0,this._clipRect=new b,this._rect=new b,this._matrix=new I}o(t,"laya.webgl.canvas.save.SaveClipRectStencil");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){ut.restore(e,this._rect,this._saveMatrix,this._contextX,this._contextY),e._clipRect=this._clipSaveRect,e._curMat=this._saveMatrix,e._x=this._contextX,e._y=this._contextY,t._cache[t._cache._length++]=this,e._curSubmit=rt.RENDERBASE},t.save=function(e,i,n,o,r,a,s,l,h,u){if(262144!=(262144&e._saveMark._saveuse)){e._saveMark._saveuse|=262144;var c=t._cache,d=c._length>0?c[--c._length]:new t;d._clipSaveRect=e._clipRect,d._clipRect.setTo(s,l,h,u),e._clipRect=d._clipRect,d._rect.x=n,d._rect.y=o,d._rect.width=r,d._rect.height=a,d._contextX=e._x,d._contextY=e._y,d._saveMatrix=e._curMat,e._curMat.copyTo(d._matrix),e._curMat=d._matrix,d._submitStencil=i;var p=e._save;p[p._length++]=d}},n(t,["_cache",function(){return this._cache=H._createArray()}]),t}(),j=function(){function t(){this._saveuse=0}o(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0},e.restore=function(e){e._saveMark=this._preSaveMark,t._no[t._no._length++]=this},t.Create=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;return n._saveuse=0,n._preSaveMark=e._saveMark,e._saveMark=n,n},n(t,["_no",function(){return this._no=H._createArray()}]),t}(),J=function(){function t(){this._matrix=new I}o(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat=this._savematrix,t._no[t._no._length++]=this},t.save=function(e){var i=e._saveMark;if(2048!=(2048&i._saveuse)){i._saveuse|=2048;var n=t._no,o=n._length>0?n[--n._length]:new t;o._savematrix=e._curMat,e._curMat=e._curMat.copyTo(o._matrix);var r=e._save;r[r._length++]=o}},n(t,["_no",function(){return this._no=H._createArray()}]),t}(),K=function(){function t(){}o(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat;e._x=this._x,e._y=this._y,t._no[t._no._length++]=this},t.save=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;n._x=e._x,n._y=e._y;var o=e._save;o[o._length++]=n},n(t,["_no",function(){return this._no=H._createArray()}]),t}(),Q=function(){function t(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new b}o(t,"laya.webgl.resource.RenderTargetMAX");var e=t.prototype;return e.setSP=function(t){this._sp=t},e.size=function(t,e){var n=this;this._width!==t||this._height!==e?(this.repaint=!0,this._width=t,this._height=e,this.target?this.target.size(t,e):this.target=Ut.create(t,e),this.target.hasListener("recovered")||this.target.on("recovered",this,function(t){i.timer.callLater(n._sp,n._sp.repaint)})):this.target.size(t,e)},e._flushToTarget=function(t,e){if(!e._destroy){var i=yt.worldScissorTest,n=yt.worldClipRect;yt.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,yt.worldScissorTest=!1,It.mainContext.disable(3089);var o=yt.worldAlpha,r=yt.worldMatrix4,a=yt.worldMatrix,s=yt.worldFilters,l=yt.worldShaderDefines;if(yt.worldMatrix=I.EMPTY,yt.restoreTempArray(),yt.worldMatrix4=yt.TEMPMAT4_ARRAY,yt.worldAlpha=1,yt.worldFilters=null,yt.worldShaderDefines=null,At.activeShader=null,e.start(),p.showCanvasMark?e.clear(0,1,0,.3):e.clear(0,0,0,0),t.flush(),e.end(),At.activeShader=null,yt.worldAlpha=o,yt.worldMatrix4=r,yt.worldMatrix=a,yt.worldFilters=s,yt.worldShaderDefines=l,yt.worldScissorTest=i,i){var h=yt.height-n.y-n.height;It.mainContext.scissor(n.x,h,n.width,n.height),It.mainContext.enable(3089)}yt.worldClipRect=n}},e.flush=function(t){this.repaint&&(this._flushToTarget(t,this.target),this.repaint=!1)},e.drawTo=function(t,e,i,n,o){t.drawTexture(this.target.getTexture(),e,i,n,o,0,0)},e.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},t}(),$=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new Lt}o(t,"laya.webgl.shader.d2.Shader2D");return t.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},t.__init__=function(){jt.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),jt.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),jt.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),jt.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),jt.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),jt.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),jt.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),jt.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;");var t,e;t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',jt.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',jt.preCompile2D(0,2,t,e,null),t="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",jt.preCompile2D(0,4,t,e,null),t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',jt.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",jt.preCompile2D(0,512,t,e,null)},t}(),q=function(){function t(t,e,i){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=i}o(t,"laya.webgl.shader.ShaderDefines");var e=t.prototype;return e.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},e.addInt=function(t){return this._value|=t,this._value},e.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},e.isDefine=function(t){return(this._value&t)===t},e.getValue=function(){return this._value},e.setValue=function(t){this._value=t},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e||t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,e,i,n){i[t]=e,n[e]=t},t._toText=function(t,e,i){var n=i[t];if(n)return n;for(var o={},r=1,a=0;a<32&&!((r=1<<a)>t);a++)if(t&r){var s=e[r];s&&(o[s]="")}return i[t]=o,o},t._toInt=function(t,e){for(var i=t.split("."),n=0,o=0,r=i.length;o<r;o++){var a=e[i[o]];if(!a)throw new Error("Defines to int err:"+t+"/"+i[o]);n|=a}return n},t}(),tt=function(){function t(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new I}o(t,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var e=t.prototype;return e.init=function(e,i,n){if(i)this._vs=i;else{this._vs=[];var o=e.width,r=e.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(o,0,1,0,1,1,1,1),this._vs.push(o,r,1,1,1,1,1,1),this._vs.push(0,r,0,1,1,1,1,1)}n?this._ps=n:(t._defaultPS||(t._defaultPS=[]).push(0,1,3,3,1,2),this._ps=t._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=e},e.init2=function(t,e,i,n,o){this.transform&&(this.transform=null),i?this._ps=i:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=n,this._uvs=o,this.mEleNum=this._ps.length,this.mTexture=t,(C.isConchNode||C.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},e._initMyData=function(){var e=0,i=0,n=4*this._verticles.length;this._vs=t._tempVS;var o=!1;if(C.isConchNode||C.isConchApp?(this._vs.length=n,o=!0):this._vs.length<n&&(this._vs.length=n,o=!0),t._tVSLen=n,o)for(;e<n;)this._vs[e]=this._verticles[i],this._vs[e+1]=this._verticles[i+1],this._vs[e+2]=this._uvs[i],this._vs[e+3]=this._uvs[i+1],this._vs[e+4]=1,this._vs[e+5]=1,this._vs[e+6]=1,this._vs[e+7]=1,e+=8,i+=2;else for(;e<n;)this._vs[e]=this._verticles[i],this._vs[e+1]=this._verticles[i+1],this._vs[e+2]=this._uvs[i],this._vs[e+3]=this._uvs[i+1],e+=8,i+=2},e.getData2=function(e,i,n){this.mVBBuffer=e,this.mIBBuffer=i,this._initMyData(),e.appendEx2(this._vs,Float32Array,t._tVSLen,4),this._indexStart=i._byteLength;var o;(o=t._tempIB).length<this._ps.length&&(o.length=this._ps.length);for(var r=0,a=this._ps.length;r<a;r++)o[r]=this._ps[r]+n;i.appendEx2(o,Uint16Array,this._ps.length,2)},e.getData=function(t,e,i){if(this.mVBBuffer=t,this.mIBBuffer=e,t.append(this.mVBData),this._indexStart=e._byteLength,this.mIBData.start!=i){for(var n=0,o=this._ps.length;n<o;n++)this.mIBData[n]=this._ps[n]+i;this.mIBData.start=i}e.append(this.mIBData)},e.render=function(t,e,i){if(C.isWebGL&&this.mTexture){t._renderKey=0,t._shader2D.glTexture=null,et.getInstance().addSkinMesh(this);var n=rt.createShape(t,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,St.create(512,0));this.transform||(this.transform=I.EMPTY),this.transform.translate(e,i),I.mul(this.transform,t._curMat,this._tempMatrix),this.transform.translate(-e,-i);var o=n.shaderValue,r=o.u_mmat2||yt.getMatrArray();yt.mat2MatArray(this._tempMatrix,r),o.textureHost=this.mTexture,o.offsetX=0,o.offsetY=0,o.u_mmat2=r,o.ALPHA=t._shader2D.ALPHA,t._submits[t._submits._length++]=n}else C.isConchApp&&this.mTexture&&(this.transform||(this.transform=I.EMPTY),t.setSkinMesh&&t.setSkinMesh(e,i,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},t._tempVS=[],t._tempIB=[],t._defaultPS=null,t._tVSLen=0,t}(),et=function(){function t(){this.ib=null,this.vb=null;It.mainContext;this.ib=$t.create(35048),this.vb=qt.create(8)}o(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)},e.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),it=function(){function t(t,e,i,n,o,r,a,s,l){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===l&&(l=0),this.x=t,this.y=e,this.width=i,this.height=n,this.edges=o,this.color=r,this.borderWidth=a,this.borderColor=s}o(t,"laya.webgl.shapes.BasePoly");var e=t.prototype;return i.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,i){},e.rebuild=function(t){},e.setMatrix=function(t){},e.needUpdate=function(t){return!0},e.sector=function(t,e,i){var n=this.x,o=this.y,r=this.edges,a=(this.r1-this.r0)/r,s=this.width,l=this.height,h=this.color,u=(h>>16&255)/255,c=(h>>8&255)/255,d=(255&h)/255;t.push(n,o,u,c,d);for(var p=0;p<r+1;p++)t.push(n+Math.sin(a*p+this.r0)*s,o+Math.cos(a*p+this.r0)*l),t.push(u,c,d);for(p=0;p<r;p++)e.push(i,i+p+1,i+p+2)},e.createLine2=function(t,e,i,n,o,r){var a,s,l,h,u,c,d,p,f,g,_,m,y,v,I,w,b,C,S,x,T=t.concat(),M=o,L=this.borderColor,D=(L>>16&255)/255,E=(L>>8&255)/255,R=(255&L)/255,P=T.length/2,N=n,G=i/2;l=T[0],h=T[1],g=l-(u=T[2]),f=(f=-(h-(c=T[3])))/(x=Math.sqrt(f*f+g*g))*G,g=g/x*G,M.push(l-f+this.x,h-g+this.y,D,E,R,l+f+this.x,h+g+this.y,D,E,R);for(var A=1;A<P-1;A++)l=T[2*(A-1)],h=T[2*(A-1)+1],u=T[2*A],c=T[2*A+1],d=T[2*(A+1)],p=T[2*(A+1)+1],g=l-u,m=u-d,I=(-(f=(f=-(h-c))/(x=Math.sqrt(f*f+g*g))*G)+l)*(-(g=g/x*G)+c)-(-f+u)*(-g+h),C=(-(_=(_=-(c-p))/(x=Math.sqrt(_*_+m*m))*G)+d)*(-(m=m/x*G)+c)-(-_+u)*(-m+p),S=(y=-g+h-(-g+c))*(b=-_+u-(-_+d))-(w=-m+p-(-m+c))*(v=-f+u-(-f+l)),Math.abs(S)<.1?(S+=10.1,M.push(u-f+this.x,c-g+this.y,D,E,R,u+f+this.x,c+g+this.y,D,E,R)):(((a=(v*C-b*I)/S)-u)*(a-u)+((s=(w*I-y*C)/S)-c)+(s-c),M.push(a+this.x,s+this.y,D,E,R,u-(a-u)+this.x,c-(s-c)+this.y,D,E,R));l=T[T.length-4],h=T[T.length-3],g=l-(u=T[T.length-2]),f=(f=-(h-(c=T[T.length-1])))/(x=Math.sqrt(f*f+g*g))*G,g=g/x*G,M.push(u-f+this.x,c-g+this.y,D,E,R,u+f+this.x,c+g+this.y,D,E,R);var U=r;for(A=1;A<U;A++)e.push(N+2*(A-1),N+2*(A-1)+1,N+2*A+1,N+2*A+1,N+2*A,N+2*(A-1));return M},e.createLine=function(t,e,i,n){var o=t.concat(),r=t,a=this.borderColor,s=(a>>16&255)/255,l=(a>>8&255)/255,h=(255&a)/255;o.splice(0,5);var u,c,d,p,f,g,_,m,y,v,I,w,b,C,S,x,T,M,L,D,E=o.length/5,R=n,P=i/2;d=o[0],p=o[1],v=d-(f=o[5]),y=(y=-(p-(g=o[6])))/(D=Math.sqrt(y*y+v*v))*P,v=v/D*P,r.push(d-y,p-v,s,l,h,d+y,p+v,s,l,h);for(var N=1;N<E-1;N++)d=o[5*(N-1)],p=o[5*(N-1)+1],f=o[5*N],g=o[5*N+1],_=o[5*(N+1)],m=o[5*(N+1)+1],v=d-f,w=f-_,S=(-(y=(y=-(p-g))/(D=Math.sqrt(y*y+v*v))*P)+d)*(-(v=v/D*P)+g)-(-y+f)*(-v+p),M=(-(I=(I=-(g-m))/(D=Math.sqrt(I*I+w*w))*P)+_)*(-(w=w/D*P)+g)-(-I+f)*(-w+m),L=(b=-v+p-(-v+g))*(T=-I+f-(-I+_))-(x=-w+m-(-w+g))*(C=-y+f-(-y+d)),Math.abs(L)<.1?(L+=10.1,r.push(f-y,g-v,s,l,h,f+y,g+v,s,l,h)):(((u=(C*M-T*S)/L)-f)*(u-f)+((c=(x*S-b*M)/L)-g)+(c-g),r.push(u,c,s,l,h,f-(u-f),g-(c-g),s,l,h));d=o[o.length-10],p=o[o.length-9],v=d-(f=o[o.length-5]),y=(y=-(p-(g=o[o.length-4])))/(D=Math.sqrt(y*y+v*v))*P,v=v/D*P,r.push(f-y,g-v,s,l,h,f+y,g+v,s,l,h);var G=this.edges+1;for(N=1;N<G;N++)e.push(R+2*(N-1),R+2*(N-1)+1,R+2*N+1,R+2*N+1,R+2*N,R+2*(N-1));return r},e.createLoopLine=function(t,e,i,n,o,r){var a=t.concat(),s=o||t,l=this.borderColor,h=(l>>16&255)/255,u=(l>>8&255)/255,c=(255&l)/255;a.splice(0,5);var d=[a[0],a[1]],p=[a[a.length-5],a[a.length-4]],f=p[0]+.5*(d[0]-p[0]),g=p[1]+.5*(d[1]-p[1]);a.unshift(f,g,0,0,0),a.push(f,g,0,0,0);var _,m,y,v,I,w,b,C,S,x,T,M,L,D,E,R,P,N,G,A,U=a.length/5,k=n,B=i/2;y=a[0],v=a[1],x=y-(I=a[5]),S=(S=-(v-(w=a[6])))/(A=Math.sqrt(S*S+x*x))*B,x=x/A*B,s.push(y-S,v-x,h,u,c,y+S,v+x,h,u,c);for(var O=1;O<U-1;O++)y=a[5*(O-1)],v=a[5*(O-1)+1],I=a[5*O],w=a[5*O+1],b=a[5*(O+1)],C=a[5*(O+1)+1],x=y-I,M=I-b,E=(-(S=(S=-(v-w))/(A=Math.sqrt(S*S+x*x))*B)+y)*(-(x=x/A*B)+w)-(-S+I)*(-x+v),N=(-(T=(T=-(w-C))/(A=Math.sqrt(T*T+M*M))*B)+b)*(-(M=M/A*B)+w)-(-T+I)*(-M+C),G=(L=-x+v-(-x+w))*(P=-T+I-(-T+b))-(R=-M+C-(-M+w))*(D=-S+I-(-S+y)),Math.abs(G)<.1?(G+=10.1,s.push(I-S,w-x,h,u,c,I+S,w+x,h,u,c)):(((_=(D*N-P*E)/G)-I)*(_-I)+((m=(R*E-L*N)/G)-w)+(m-w),s.push(_,m,h,u,c,I-(_-I),w-(m-w),h,u,c));r&&(e=r);var W=this.edges+1;for(O=1;O<W;O++)e.push(k+2*(O-1),k+2*(O-1)+1,k+2*O+1,k+2*O+1,k+2*O,k+2*(O-1));return e.push(k+2*(O-1),k+2*(O-1)+1,k+1,k+1,k,k+2*(O-1)),s},t}(),nt=function(){function t(){}return o(t,"laya.webgl.shapes.Earcut"),t.earcut=function(e,i,n){n=n||2;var o=i&&i.length,r=o?i[0]*n:e.length,a=t.linkedList(e,0,r,n,!0),s=[];if(!a)return s;var l,h,u,c,d,p,f;if(o&&(a=t.eliminateHoles(e,i,a,n)),e.length>80*n){l=u=e[0],h=c=e[1];for(var g=n;g<r;g+=n)d=e[g],p=e[g+1],d<l&&(l=d),p<h&&(h=p),d>u&&(u=d),p>c&&(c=p);f=0!==(f=Math.max(u-l,c-h))?1/f:0}return t.earcutLinked(a,s,n,l,h,f),s},t.linkedList=function(e,i,n,o,r){var a,s;if(r===t.signedArea(e,i,n,o)>0)for(a=i;a<n;a+=o)s=t.insertNode(a,e[a],e[a+1],s);else for(a=n-o;a>=i;a-=o)s=t.insertNode(a,e[a],e[a+1],s);return s&&t.equals(s,s.next)&&(t.removeNode(s),s=s.next),s},t.filterPoints=function(e,i){if(!e)return e;i||(i=e);var n,o=e;do{if(n=!1,o.steiner||!t.equals(o,o.next)&&0!==t.area(o.prev,o,o.next))o=o.next;else{if(t.removeNode(o),(o=i=o.prev)===o.next)break;n=!0}}while(n||o!==i);return i},t.earcutLinked=function(e,i,n,o,r,a,s){if(e){!s&&a&&t.indexCurve(e,o,r,a);for(var l,h,u=e;e.prev!==e.next;)if(l=e.prev,h=e.next,a?t.isEarHashed(e,o,r,a):t.isEar(e))i.push(l.i/n),i.push(e.i/n),i.push(h.i/n),t.removeNode(e),e=h.next,u=h.next;else if((e=h)===u){s?1===s?(e=t.cureLocalIntersections(e,i,n),t.earcutLinked(e,i,n,o,r,a,2)):2===s&&t.splitEarcut(e,i,n,o,r,a):t.earcutLinked(t.filterPoints(e,null),i,n,o,r,a,1);break}}},t.isEar=function(e){var i=e.prev,n=e,o=e.next;if(t.area(i,n,o)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(t.pointInTriangle(i.x,i.y,n.x,n.y,o.x,o.y,r.x,r.y)&&t.area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0},t.isEarHashed=function(e,i,n,o){var r=e.prev,a=e,s=e.next;if(t.area(r,a,s)>=0)return!1;for(var l=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,h=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,u=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,c=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,d=t.zOrder(l,h,i,n,o),p=t.zOrder(u,c,i,n,o),f=e.nextZ;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&t.pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&t.area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&t.pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&t.area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0},t.cureLocalIntersections=function(e,i,n){var o=e;do{var r=o.prev,a=o.next.next;!t.equals(r,a)&&t.intersects(r,o,o.next,a)&&t.locallyInside(r,a)&&t.locallyInside(a,r)&&(i.push(r.i/n),i.push(o.i/n),i.push(a.i/n),t.removeNode(o),t.removeNode(o.next),o=e=a),o=o.next}while(o!==e);return o},t.splitEarcut=function(e,i,n,o,r,a){var s=e;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&t.isValidDiagonal(s,l)){var h=t.splitPolygon(s,l);return s=t.filterPoints(s,s.next),h=t.filterPoints(h,h.next),t.earcutLinked(s,i,n,o,r,a),void t.earcutLinked(h,i,n,o,r,a)}l=l.next}s=s.next}while(s!==e)},t.eliminateHoles=function(e,i,n,o){var r,a,s,l,h,u=[];for(r=0,a=i.length;r<a;r++)s=i[r]*o,l=r<a-1?i[r+1]*o:e.length,(h=t.linkedList(e,s,l,o,!1))===h.next&&(h.steiner=!0),u.push(t.getLeftmost(h));for(u.sort(t.compareX),r=0;r<u.length;r++)t.eliminateHole(u[r],n),n=t.filterPoints(n,n.next);return n},t.compareX=function(t,e){return t.x-e.x},t.eliminateHole=function(e,i){if(i=t.findHoleBridge(e,i)){var n=t.splitPolygon(i,e);t.filterPoints(n,n.next)}},t.findHoleBridge=function(e,i){var n,o=i,r=e.x,a=e.y,s=-1/0;do{if(a<=o.y&&a>=o.next.y&&o.next.y!==o.y){var l=o.x+(a-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(l<=r&&l>s){if(s=l,l===r){if(a===o.y)return o;if(a===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==i);if(!n)return null;if(r===s)return n.prev;var h,u=n,c=n.x,d=n.y,p=1/0;for(o=n.next;o!==u;)r>=o.x&&o.x>=c&&r!==o.x&&t.pointInTriangle(a<d?r:s,a,c,d,a<d?s:r,a,o.x,o.y)&&((h=Math.abs(a-o.y)/(r-o.x))<p||h===p&&o.x>n.x)&&t.locallyInside(o,e)&&(n=o,p=h),o=o.next;return n},t.indexCurve=function(e,i,n,o){var r=e;do{null===r.z&&(r.z=t.zOrder(r.x,r.y,i,n,o)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,t.sortLinked(r)},t.sortLinked=function(t){var e,i,n,o,r,a,s,l,h=1;do{for(i=t,t=null,r=null,a=0;i;){for(a++,n=i,s=0,e=0;e<h&&(s++,n=n.nextZ);e++);for(l=h;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(o=i,i=i.nextZ,s--):(o=n,n=n.nextZ,l--),r?r.nextZ=o:t=o,o.prevZ=r,r=o;i=n}r.nextZ=null,h*=2}while(a>1);return t},t.zOrder=function(t,e,i,n,o){return t=32767*(t-i)*o,e=32767*(e-n)*o,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},t.getLeftmost=function(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i},t.pointInTriangle=function(t,e,i,n,o,r,a,s){return(o-a)*(e-s)-(t-a)*(r-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(r-s)-(o-a)*(n-s)>=0},t.isValidDiagonal=function(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!t.intersectsPolygon(e,i)&&t.locallyInside(e,i)&&t.locallyInside(i,e)&&t.middleInside(e,i)},t.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.intersects=function(e,i,n,o){return!!(t.equals(e,i)&&t.equals(n,o)||t.equals(e,o)&&t.equals(n,i))||t.area(e,i,n)>0!=t.area(e,i,o)>0&&t.area(n,o,e)>0!=t.area(n,o,i)>0},t.intersectsPolygon=function(e,i){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==i.i&&n.next.i!==i.i&&t.intersects(n,n.next,e,i))return!0;n=n.next}while(n!==e);return!1},t.locallyInside=function(e,i){return t.area(e.prev,e,e.next)<0?t.area(e,i,e.next)>=0&&t.area(e,e.prev,i)>=0:t.area(e,i,e.prev)<0||t.area(e,e.next,i)<0},t.middleInside=function(t,e){var i=t,n=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do{i.y>r!=i.next.y>r&&i.next.y!==i.y&&o<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n},t.splitPolygon=function(t,e){var i=new ot(t.i,t.x,t.y),n=new ot(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=o,o.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n},t.insertNode=function(t,e,i,n){var o=new ot(t,e,i);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o},t.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},t.signedArea=function(t,e,i,n){for(var o=0,r=e,a=i-n;r<i;r+=n)o+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return o},t}(),ot=function(){function t(t,e,i){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return o(t,"laya.webgl.shapes.EarcutNode"),t}(),rt=(function(){function t(t,e,i,n,o,r,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.fillColor=n,this.fillAlpha=o,this.shape=a,this.fill=r}o(t,"laya.webgl.shapes.GeometryData");var e=t.prototype;e.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},e.getIndexData=function(){return null},e.getVertexData=function(){return null},e.destroy=function(){this.shape=null}}(),function(){function t(t){if(t instanceof Float32Array)this.points=t;else if(t instanceof Array){t.length;this.points=new Float32Array(t)}}o(t,"laya.webgl.shapes.Vertex");var e=t.prototype;i.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,i){},e.needUpdate=function(t){return!1},e.rebuild=function(t){},e.setMatrix=function(t){}}(),function(){function t(t){void 0===t&&(t=1e4),this._renderType=t}o(t,"laya.webgl.submit.Submit");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.shaderValue.release(),this._vb=null},e.getRenderType=function(){return this._renderType},e.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return 1;this.shaderValue.texture=e}this._vb.bind_upload(this._ib);var i=It.mainContext;return this.shaderValue.upload(),F.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),F.activeBlendFunction=this._blendFn),E.drawCall++,E.trianglesFaces+=this._numEle/3,i.drawElements(4,this._numEle,5123,this._startIdx),1},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new St(0,0),e.shaderValue.ALPHA=-1234},t.createSubmit=function(e,i,n,o,r){var a=t._cache._length?t._cache[--t._cache._length]:new t;null==n&&((n=a._selfVb||(a._selfVb=qt.create(-1))).clear(),o=0),a._ib=i,a._vb=n,a._startIdx=o*gt.BYTES_PIDX,a._numEle=0;var s=e._nBlendType;a._blendFn=e._targets?F.targetFns[s]:F.fns[s],a.shaderValue=r,a.shaderValue.setValue(e._shader2D);var l=e._shader2D.filters;return l&&a.shaderValue.setFilters(l),a},t.createShape=function(e,i,n,o,r,a){var s=t._cache._length?t._cache[--t._cache._length]:new t;s._ib=i,s._vb=n,s._numEle=o,s._startIdx=r,s.shaderValue=a,s.shaderValue.setValue(e._shader2D);var l=e._nBlendType;return s._blendFn=e._targets?F.targetFns[l]:F.fns[l],s},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.RENDERBASE=null,t._cache=(t._cache=[],t._cache._length=0,t._cache),t}()),at=function(){function t(){this.fun=null,this.args=null}o(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(null,this.args),1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i){var n=t._cache._length?t._cache[--t._cache._length]:new t;return n.fun=i,n.args=e,n},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),st=function(){function t(){this.variables={}}o(t,"laya.webgl.submit.SubmitCMDScope");var e=t.prototype;return e.getValue=function(t){return this.variables[t]},e.addValue=function(t,e){return this.variables[t]=e},e.setValue=function(t,e){return this.variables.hasOwnProperty(t)?this.variables[t]=e:null},e.clear=function(){for(var t in this.variables)delete this.variables[t]},e.recycle=function(){this.clear(),t.POOL.push(this)},t.create=function(){var e=t.POOL.pop();return e||(e=new t),e},t.POOL=[],t}(),lt=function(){function t(){this.offset=0,this.startIndex=0,this._mat=I.create()}o(t,"laya.webgl.submit.SubmitOtherIBVB");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.getRenderType=function(){return 10009},e.renderSubmit=function(){var e=this._shaderValue.textureHost;if(e){var i=e.source;if(!e.bitmap||!i)return 1;this._shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=yt.worldMatrix4,o=I.TEMP;I.mulPre(this._mat,n[0],n[1],n[4],n[5],n[12],n[13],o);var r=yt.worldMatrix4=t.tempMatrix4;r[0]=o.a,r[1]=o.b,r[4]=o.c,r[5]=o.d,r[12]=o.tx,r[13]=o.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var a=It.mainContext;return F.activeBlendFunction!==this._blendFn&&(a.enable(3042),this._blendFn(a),F.activeBlendFunction=this._blendFn),E.drawCall++,E.trianglesFaces+=this._numEle/3,a.drawElements(4,this._numEle,5123,this.startIndex),yt.worldMatrix4=n,At.activeShader=null,1},t.create=function(e,i,n,o,r,a,s,l,h){void 0===h&&(h=0);var u=t._cache._length?t._cache[--t._cache._length]:new t;u._ib=n,u._vb=i,u._numEle=o,u._shader=r,u._shaderValue=a;var c=e._nBlendType;switch(u._blendFn=e._targets?F.targetFns[c]:F.fns[c],h){case 0:u.offset=0,u.startIndex=l/(gt.BYTES_PE*i.vertexStride)*1.5,u.startIndex*=gt.BYTES_PIDX;break;case 1:u.startIndex=s,u.offset=l}return u},t._cache=(t._cache=[],t._cache._length=0,t._cache),t.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(),ht=function(){function t(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new b,this.screenRect=new b}o(t,"laya.webgl.submit.SubmitScissor");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e._scissor=function(t,e,i,n){var o=yt.worldMatrix4,r=o[0],a=o[5];if(t=t*r+o[12],e=e*a+o[13],i*=r,n*=a,i<1||n<1)return!1;var s=t+i,l=e+n;t<0&&(t=0,i=s-t),e<0&&(e=0,n=l-e);var h=yt.worldClipRect;if(t=Math.max(t,h.x),e=Math.max(e,h.y),i=Math.min(s,h.right)-t,n=Math.min(l,h.bottom)-e,i<1||n<1)return!1;var u=yt.worldScissorTest;return this.screenRect.copyFrom(h),h.x=t,h.y=e,h.width=i,h.height=n,yt.worldScissorTest=!0,e=yt.height-e-n,It.mainContext.scissor(t,e,i,n),It.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),u?(e=yt.height-this.screenRect.y-this.screenRect.height,It.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),It.mainContext.enable(3089)):(It.mainContext.disable(3089),yt.worldScissorTest=!1),h.copyFrom(this.screenRect),!0},e._scissorWithTagart=function(t,e,i,n){if(i<1||n<1)return!1;var o=t+i,r=e+n;t<0&&(t=0,i=o-t),e<0&&(e=0,n=r-e);var a=yt.worldClipRect;if(t=Math.max(t,a.x),e=Math.max(e,a.y),i=Math.min(o,a.right)-t,n=Math.min(r,a.bottom)-e,i<1||n<1)return!1;var s=yt.worldScissorTest;return this.screenRect.copyFrom(a),yt.worldScissorTest=!0,a.x=t,a.y=e,a.width=i,a.height=n,e=yt.height-e-n,It.mainContext.scissor(t,e,i,n),It.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),s?(e=yt.height-this.screenRect.y-this.screenRect.height,It.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),It.mainContext.enable(3089)):(It.mainContext.disable(3089),yt.worldScissorTest=!1),a.copyFrom(this.screenRect),!0},e.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1)},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.context=null},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.context=e,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),ut=function(){function t(){this.step=0,this.blendMode=null,this.level=0}o(t,"laya.webgl.submit.SubmitStencil");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.do1=function(){var t=It.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7682)},e.do2=function(){var t=It.mainContext;t.stencilFunc(514,this.level+1,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},e.do3=function(){var t=It.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680),t.clear(1024),t.disable(2960)},e.do4=function(){var t=It.mainContext;0==this.level&&(t.enable(2960),t.clear(1024)),t.colorMask(!1,!1,!1,!1),t.stencilFunc(519,0,255),t.stencilOp(7680,7680,7682)},e.do5=function(){var t=It.mainContext;t.stencilFunc(514,this.level,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},e.do6=function(){var t=It.mainContext;F.targetFns[F.TOINT[this.blendMode]](t)},e.do7=function(){var t=It.mainContext;t.colorMask(!1,!1,!1,!1),t.stencilOp(7680,7680,7683)},e.do8=function(){var t=It.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7680)},t.restore=function(e,i,n,o,r){var a;if(e._renderKey=0,t._mask>0&&t._mask--,0==t._mask)a=laya.webgl.submit.SubmitStencil.create(3),e.addRenderObject(a),e._curSubmit=rt.RENDERBASE;else{a=laya.webgl.submit.SubmitStencil.create(7),e.addRenderObject(a);var s=e._vb;s._byteLength;if(_t.fillRectImgVb(s,null,i.x,i.y,i.width,i.height,G.DEF_UV,n,o,r,0,0)){e._shader2D.glTexture=null;var l=e._curSubmit=rt.createSubmit(e,e._ib,s,(s._byteLength-64)/32*3,St.create(2,0));l.shaderValue.ALPHA=1,e._submits[e._submits._length++]=l,e._curSubmit._numEle+=6,e._curSubmit=rt.RENDERBASE}else alert("clipRect calc stencil rect error");a=laya.webgl.submit.SubmitStencil.create(8),e.addRenderObject(a)}},t.restore2=function(e,i){var n;e._renderKey=0,t._mask>0&&t._mask--,0==t._mask?(n=laya.webgl.submit.SubmitStencil.create(3),e.addRenderObject(n),e._curSubmit=rt.RENDERBASE):(n=laya.webgl.submit.SubmitStencil.create(7),e.addRenderObject(n),e._submits[e._submits._length++]=i,n=laya.webgl.submit.SubmitStencil.create(8),e.addRenderObject(n))},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.step=e,5==e&&++t._mask,i.level=t._mask,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t._mask=0,t}(),ct=function(){function t(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}o(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){this._vb.bind_upload(this._ib);var t=this.scope.getValue(this.proName);return t&&(this.shaderValue.texture=t.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[t.width,t.height]),this.shaderValue.upload(),this.blend(),E.drawCall++,E.trianglesFaces+=this._numEle/3,It.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e.blend=function(){if(F.activeBlendFunction!==F.fns[this.blendType]){var t=It.mainContext;t.enable(3042),F.fns[this.blendType](t),F.activeBlendFunction=F.fns[this.blendType]}},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i,n,o,r,a){var s=t._cache._length?t._cache[--t._cache._length]:new t;return s._ib=i,s._vb=n,s.proName=a,s._startIdx=o*gt.BYTES_PIDX,s._numEle=0,s.blendType=e._nBlendType,s.shaderValue=r,s.shaderValue.setValue(e._shader2D),s},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),dt=function(){function t(){this._sourceStr=null}o(t,"laya.webgl.text.CharSegment");var e=t.prototype;return i.imps(e,{"laya.webgl.text.ICharSegment":!0}),e.textToSpit=function(t){this._sourceStr=t},e.getChar=function(t){return this._sourceStr.charAt(t)},e.getCharCode=function(t){return this._sourceStr.charCodeAt(t)},e.length=function(){return this._sourceStr.length},t}(),pt=function(){function t(){}var e;return o(t,"laya.webgl.text.DrawText"),t.__init__=function(){t._charsTemp=new Array,t._drawValue=new e,t._charSeg=new dt},t.customCharSeg=function(e){t._charSeg=e},t.getChar=function(e,i,n){var o=Ht.createOneChar(e,n);return-1!=i&&(t._charsCache[i]=o),o},t._drawSlow=function(e,i,n,o,r,a,s,l,h,u,c,d,p,f,g){var _,m,y=t._drawValue.value(a,l,h,u,p,f,g),v=0,I=0,w=t._charsTemp,b=0,C=NaN;if(o)for(w.length=o.length,v=0,I=o.length;v<I;v++)C=(m=o[v]).charNum+y.txtID,w[v]=_=t._charsCache[C]||t.getChar(m.char,C,y),_.active();else{var S=n instanceof laya.utils.WordText?n.toString():n;if(N.CharacterCache){t._charSeg.textToSpit(S);var x=t._charSeg.length();for(w.length=x,v=0,I=x;v<I;v++)C=t._charSeg.getCharCode(v)+y.txtID,w[v]=_=t._charsCache[C]||t.getChar(t._charSeg.getChar(v),C,y),_.active(),b+=_.cw}else w.length=0,(_=t.getChar(S,-1,y)).active(),b+=_.cw,w[0]=_}var T=0;null!==s&&"left"!==s&&(T=-("center"==s?b/2:b));var M,L,D=NaN,E=0;if(o)for(v=0,I=w.length;v<I;v++)(_=w[v]).isSpace||(m=o[v],D=_.borderSize,M=_.texture,i._drawText(M,c+T+m.x*p-D,d+m.y*f-D,M.width,M.height,r,0,0,0,0));else{for(v=0,I=w.length;v<I;v++)(_=w[v]).isSpace||(D=_.borderSize,M=_.texture,i._drawText(M,c+T-D,d-D,M.width,M.height,r,0,0,0,0),e&&((L=e[E++])||(L=e[E-1]=[]),L[0]=M,L[1]=T-D,L[2]=-D)),T+=_.cw;e&&(e.length=E)}},t._drawFast=function(t,e,i,n,o){for(var r,a,s=0,l=t.length;s<l;s++)(r=(a=t[s])[0]).active(),e._drawText(r,n+a[1],o+a[2],r.width,r.height,i,0,0,0,0)},t.drawText=function(e,n,o,r,a,s,l,h,u,c,d,f){if(void 0===f&&(f=0),!(n&&0===n.length||o&&0===o.length)){var g=r.a,_=r.d;(0!==r.b||0!==r.c)&&(g=_=1);var m=1!==g||1!==_;if(m&&i.stage.transform){var y=i.stage.transform;m=y.a===g&&y.d===_}else m=!1;if(m){var v=(r=r.copyTo(Ct._tmpMatrix)).tx,I=r.ty;r.scale(1/g,1/_),r._checkTransform(),c*=g,d*=_,c+=v-r.tx,d+=I-r.ty}else g=_=1;if(o)t._drawSlow(null,e,n,o,r,a,s,l,h,u,c,d,g,_,f);else{if(null===n.toUpperCase){var w=g+1e5*_,b=n;return void(b.changed||b.id!==w?(b.id=w,b.changed=!1,t._drawSlow(b.save,e,n,o,r,a,s,l,h,u,c,d,g,_,f)):t._drawFast(b.save,e,r,c,d))}var C=n+a.toString()+l+h+u+g+_+s,S=t._textsCache[C];N.CharacterCache?S?t._drawFast(S,e,r,c,d):(t._textsCache.__length||(t._textsCache.__length=0),t._textsCache.__length>p.WebGLTextCacheCount&&((t._textsCache={}).__length=0,t._curPoolIndex=0),t._textCachesPool[t._curPoolIndex]?(S=t._textsCache[C]=t._textCachesPool[t._curPoolIndex],S.length=0):t._textCachesPool[t._curPoolIndex]=S=t._textsCache[C]=[],t._textsCache.__length++,t._curPoolIndex++,t._drawSlow(S,e,n,o,r,a,s,l,h,u,c,d,g,_,f)):t._drawSlow(S,e,n,o,r,a,s,l,h,u,c,d,g,_,f)}}},t._charsTemp=null,t._textCachesPool=[],t._curPoolIndex=0,t._charsCache={},t._textsCache={},t._drawValue=null,t.d=[],t._charSeg=null,t.__init$=function(){e=function(){function t(){}o(t,"");return t.prototype.value=function(e,i,n,o,r,a,s){this.font=e,this.fillColor=i,this.borderColor=n,this.lineWidth=o,this.scaleX=r,this.scaleY=a,this.underLine=s;var l=e.toString()+r+a+o+i+n+s;return this.txtID=t._keymap[l],this.txtID||(this.txtID=1e-7*++t._keymapCount,t._keymap[l]=this.txtID),this},t.clear=function(){t._keymap={},t._keymapCount=1},t._keymap={},t._keymapCount=1,t}()},t}(),ft=function(){function t(e){this._index=0,this._size=14,this._italic=-2,t._cache2=t._cache2||[],this.setFont(e||"14px Arial")}o(t,"laya.webgl.text.FontInContext");var e=t.prototype;return e.setFont=function(e){var i=t._cache2[e];if(i)this._words=i[0],this._size=i[1];else{this._words=e.split(" ");for(var n=0,o=this._words.length;n<o;n++)if(this._words[n].indexOf("px")>0){this._index=n;break}this._size=parseInt(this._words[this._index]),t._cache2[e]=[this._words,this._size]}this._text=null,this._italic=-2},e.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},e.hasType=function(t){for(var e=0,i=this._words.length;e<i;e++)if(this._words[e]===t)return e;return-1},e.removeType=function(t){for(var e=0,i=this._words.length;e<i;e++)if(this._words[e]===t){this._words.splice(e,1),this._index>e&&this._index--;break}this._text=null,this._italic=-2},e.copyTo=function(t){return t._text=this._text,t._size=this._size,t._index=this._index,t._words=this._words.slice(),t._italic=-2,t},e.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},r(0,e,"size",function(){return this._size},function(t){this._size=t,this._words[this._index]=t+"px",this._text=null}),t.create=function(e){var i=t._cache[e];return i||(i=t._cache[e]=new t(e))},t.EMPTY=new t,t._cache={},t._cache2=null,t}(),gt=function(){function t(){}return o(t,"laya.webgl.utils.CONST3D2D"),t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,n(t,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),t}(),_t=function(){function t(){}return o(t,"laya.webgl.utils.GlUtils"),t.make2DProjection=function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},t.fillIBQuadrangle=function(t,e){if(e>65535/4)throw Error("IBQuadrangle count:"+e+" must<:"+Math.floor(65535/4));e=Math.floor(e),t._resizeBuffer(6*(e+1)*2,!1),t.byteLength=t.bufferLength;for(var i=t.getUint16Array(),n=0,o=0;o<e;o++)i[n++]=4*o,i[n++]=4*o+2,i[n++]=4*o+1,i[n++]=4*o,i[n++]=4*o+3,i[n++]=4*o+2;return t.setNeedUpload(),!0},t.expandIBQuadrangle=function(e,i){e.bufferLength>=6*i*2||t.fillIBQuadrangle(e,i)},t.mathCeilPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},t.fillQuadrangleImgVb=function(t,e,i,n,o,r,a,s){var l=16+(t._byteLength>>2);t.byteLength=l<<2;var h=t.getFloat32Array();h[(l-=16)+2]=o[0],h[l+3]=o[1],h[l+6]=o[2],h[l+7]=o[3],h[l+10]=o[4],h[l+11]=o[5],h[l+14]=o[6],h[l+15]=o[7];var u=r.a,c=r.b,d=r.c,p=r.d;if(1!==u||0!==c||0!==d||1!==p){r.bTransform=!0;var f=r.tx+a,g=r.ty+s;h[l]=(n[0]+e)*u+(n[1]+i)*d+f,h[l+1]=(n[0]+e)*c+(n[1]+i)*p+g,h[l+4]=(n[2]+e)*u+(n[3]+i)*d+f,h[l+5]=(n[2]+e)*c+(n[3]+i)*p+g,h[l+8]=(n[4]+e)*u+(n[5]+i)*d+f,h[l+9]=(n[4]+e)*c+(n[5]+i)*p+g,h[l+12]=(n[6]+e)*u+(n[7]+i)*d+f,h[l+13]=(n[6]+e)*c+(n[7]+i)*p+g}else r.bTransform=!1,e+=r.tx+a,i+=r.ty+s,h[l]=e+n[0],h[l+1]=i+n[1],h[l+4]=e+n[2],h[l+5]=i+n[3],h[l+8]=e+n[4],h[l+9]=i+n[5],h[l+12]=e+n[6],h[l+13]=i+n[7];return t._upload=!0,!0},t.fillTranglesVB=function(t,e,i,n,o,r,a){var s=(t._byteLength>>2)+n.length;t.byteLength=s<<2;var l=t.getFloat32Array();s-=n.length;for(var h=n.length,u=o.a,c=o.b,d=o.c,p=o.d,f=0;f<h;f+=4)if(l[s+f+2]=n[f+2],l[s+f+3]=n[f+3],1!==u||0!==c||0!==d||1!==p){o.bTransform=!0;var g=o.tx+r,_=o.ty+a;l[s+f]=(n[f]+e)*u+(n[f+1]+i)*d+g,l[s+f+1]=(n[f]+e)*c+(n[f+1]+i)*p+_}else o.bTransform=!1,e+=o.tx+r,i+=o.ty+a,l[s+f]=e+n[f],l[s+f+1]=i+n[f+1];return t._upload=!0,!0},t.copyPreImgVb=function(t,e,i){var n=t._byteLength>>2;t.byteLength=n+16<<2;for(var o=t.getFloat32Array(),r=0,a=n-16;r<4;r++)o[n]=o[a]+e,++a,o[++n]=o[a]+i,++a,o[++n]=o[a],++a,o[++n]=o[a],++n,++a;t._upload=!0},t.fillRectImgVb=function(t,e,i,n,o,r,a,s,l,h,u,c,d){void 0===d&&(d=!1);var p,f,g,_,m,y,v,I,w,b,C,S,x,T,M,L,D=1,E=s.a,R=s.b,P=s.c,N=s.d,G=e&&e.width<99999999;if(1!==E||0!==R||0!==P||1!==N?(s.bTransform=!0,0===R&&0===P&&(D=23,w=o+i,b=r+n,p=E*i+(C=s.tx+l),g=E*w+C,f=N*n+(S=s.ty+h),_=N*b+S)):(D=23,s.bTransform=!1,g=(p=i+s.tx+l)+o,_=(f=n+s.ty+h)+r),G&&(m=e.x,y=e.y,v=e.width+m,I=e.height+y),1!==D){if(Math.min(p,g)>=v)return!1;if(Math.min(f,_)>=I)return!1;if(Math.max(g,p)<=m)return!1;if(Math.max(_,f)<=y)return!1}var A=t._byteLength>>2;t.byteLength=A+16<<2;var U=t.getFloat32Array();switch(U[A+2]=a[0],U[A+3]=a[1],U[A+6]=a[2],U[A+7]=a[3],U[A+10]=a[4],U[A+11]=a[5],U[A+14]=a[6],U[A+15]=a[7],D){case 1:C=s.tx+l,S=s.ty+h;var k=E*i,B=P*n,O=N*n,W=R*i,V=E*(w=o+i),F=P*(b=r+n),Z=N*b,X=R*w;d?(x=k+B+C,M=Math.round(x)-x,T=O+W+S,L=Math.round(T)-T,U[A]=x+M,U[A+1]=T+L,U[A+4]=V+B+C+M,U[A+5]=O+X+S+L,U[A+8]=V+F+C+M,U[A+9]=Z+X+S+L,U[A+12]=k+F+C+M,U[A+13]=Z+W+S+L):(U[A]=k+B+C,U[A+1]=O+W+S,U[A+4]=V+B+C,U[A+5]=O+X+S,U[A+8]=V+F+C,U[A+9]=Z+X+S,U[A+12]=k+F+C,U[A+13]=Z+W+S);break;case 23:d?(x=p+u,M=Math.round(x)-x,T=f,L=Math.round(T)-T,U[A]=x+M,U[A+1]=T+L,U[A+4]=g+u+M,U[A+5]=f+L,U[A+8]=g+M,U[A+9]=_+L,U[A+12]=p+M,U[A+13]=_+L):(U[A]=p+u,U[A+1]=f,U[A+4]=g+u,U[A+5]=f,U[A+8]=g,U[A+9]=_,U[A+12]=p,U[A+13]=_)}return t._upload=!0,!0},t.fillLineVb=function(e,i,n,o,r,a,s,l){var h=.5*s,u=t._fillLineArray,c=-(o-a),d=n-r,p=Math.sqrt(c*c+d*d);c/=p,d/=p,c*=h,d*=h,u[0]=n-c,u[1]=o-d,u[4]=n+c,u[5]=o+d,u[8]=r+c,u[9]=a+d,u[12]=r-c,u[13]=a-d,l&&l.transformPointArray(u,u);var f=16+(e._byteLength>>2);return e.byteLength=f<<2,e.insertData(u,f-16),!0},t._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t}(),mt=(function(){function t(){}o(t,"laya.webgl.utils.MatirxArray"),t.ArrayMul=function(e,i,n){if(e)if(i)for(var o=NaN,r=NaN,a=NaN,s=NaN,l=0;l<4;l++)o=e[l],r=e[l+4],a=e[l+8],s=e[l+12],n[l]=o*i[0]+r*i[1]+a*i[2]+s*i[3],n[l+4]=o*i[4]+r*i[5]+a*i[6]+s*i[7],n[l+8]=o*i[8]+r*i[9]+a*i[10]+s*i[11],n[l+12]=o*i[12]+r*i[13]+a*i[14]+s*i[15];else t.copyArray(e,n);else t.copyArray(i,n)},t.copyArray=function(t,e){if(t&&e)for(var i=0;i<t.length;i++)e[i]=t[i]}}(),function(){function t(t,e,i){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new qt(t,35048),e&&this._vb._resizeBuffer(e,!1),this._ib=new $t,i&&this._ib._resizeBuffer(i,!1)}o(t,"laya.webgl.utils.Mesh2D");var e=t.prototype;return e.cloneWithNewVB=function(){var e=new t(this._stride,0,0);return e._ib=this._ib,e._quadNum=this._quadNum,e._attribInfo=this._attribInfo,e},e.cloneWithNewVBIB=function(){var e=new t(this._stride,0,0);return e._attribInfo=this._attribInfo,e},e.getVBW=function(){return this._vb.setNeedUpload(),this._vb},e.getVBR=function(){return this._vb},e.getIBR=function(){return this._ib},e.getIBW=function(){return this._ib.setNeedUpload(),this._ib},e.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),i=0,n=0,o=0;o<t;o++)e[i++]=n,e[i++]=n+2,e[i++]=n+1,e[i++]=n,e[i++]=n+3,e[i++]=n+2,n+=4;this._ib.setNeedUpload()},e.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},e.getEleNum=function(){return this._ib.getBuffer().byteLength/2},e.releaseMesh=function(){},e.destroy=function(){},e.clearVB=function(){this._vb.clear()},t._gvaoid=0,t}()),yt=function(){function t(){}return o(t,"laya.webgl.utils.RenderState2D"),t.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.mat2MatArray=function(e,i){var n=e,o=i;return o[0]=n.a,o[1]=n.b,o[2]=t.EMPTYMAT4_ARRAY[2],o[3]=t.EMPTYMAT4_ARRAY[3],o[4]=n.c,o[5]=n.d,o[6]=t.EMPTYMAT4_ARRAY[6],o[7]=t.EMPTYMAT4_ARRAY[7],o[8]=t.EMPTYMAT4_ARRAY[8],o[9]=t.EMPTYMAT4_ARRAY[9],o[10]=t.EMPTYMAT4_ARRAY[10],o[11]=t.EMPTYMAT4_ARRAY[11],o[12]=n.tx,o[13]=n.ty,o[14]=t.EMPTYMAT4_ARRAY[14],o[15]=t.EMPTYMAT4_ARRAY[15],i},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.worldAlpha=1,t.worldClipRect.x=t.worldClipRect.y=0,t.worldClipRect.width=t.width,t.worldClipRect.height=t.height,t.curRenderTarget=null},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldFilters=null,t.worldShaderDefines=null,t.curRenderTarget=null,t.width=0,t.height=0,n(t,["worldMatrix",function(){return this.worldMatrix=new I},"worldClipRect",function(){return this.worldClipRect=new b(0,0,99999999,99999999)}]),t}(),vt=function(){function t(t,i,n,o,r){function a(t){var i=[],n=new e(i);return s._compileToTree(n,t.split("\n"),0,i,r),n}var s=this,l=u.now();this._VS=a(i),this._PS=a(n),this._nameMap=o,u.now()-l>2&&console.log("ShaderCompile use time:"+(u.now()-l)+"  size:"+i.length+"/"+n.length)}var e,i;o(t,"laya.webgl.utils.ShaderCompile");var r=t.prototype;return r._compileToTree=function(i,n,o,r,a){var s,l,h,u,c,d,p,f=0,g=0,_=0,m=0;for(g=o;g<n.length;g++)if(!((h=n[g]).length<1)&&0!==(f=h.indexOf("//"))){if(f>=0&&(h=h.substr(0,f)),s=p||new e(r),p=null,s.text=h,s.noCompile=!0,(f=h.indexOf("#"))>=0){for(u="#",m=f+1,_=h.length;m<_;m++){var y=h.charAt(m);if(" "===y||"\t"===y||"?"===y)break;u+=y}switch(s.name=u,u){case"#ifdef":case"#ifndef":if(s.src=h,s.noCompile=null!=h.match(/[!&|()=<>]/),s.noCompile?console.log("function():Boolean{return "+h.substr(f+s.name.length)+"}"):(d=h.replace(/^\s*/,"").split(/\s+/),s.setCondition(d[1],"#ifdef"===u?1:2),s.text="//"+s.text),s.setParent(i),i=s,a)for(d=h.substr(m).split(t._splitToWordExps3),m=0;m<d.length;m++)(h=d[m]).length&&(a[h]=!0);continue;case"#if":if(s.src=h,s.noCompile=!0,s.setParent(i),i=s,a)for(d=h.substr(m).split(t._splitToWordExps3),m=0;m<d.length;m++)(h=d[m]).length&&"defined"!=h&&(a[h]=!0);continue;case"#else":s.src=h,l=(i=i.parent).childs[i.childs.length-1],s.noCompile=l.noCompile,s.noCompile||(s.condition=l.condition,s.conditionType=1==l.conditionType?2:1,s.text="//"+s.text+" "+l.text+" "+s.conditionType),s.setParent(i),i=s;continue;case"#endif":l=(i=i.parent).childs[i.childs.length-1],s.noCompile=l.noCompile,s.noCompile||(s.text="//"+s.text),s.setParent(i);continue;case"#include":d=t.splitToWords(h,null);var v=t.includes[d[1]];if(!v)throw"ShaderCompile error no this include file:"+d[1];if((f=d[0].indexOf("?"))<0){s.setParent(i),h=v.getWith("with"==d[2]?d[3]:null),this._compileToTree(s,h.split("\n"),0,r,a),s.text="";continue}s.setCondition(d[0].substr(f+1),1),s.text=v.getWith("with"==d[2]?d[3]:null);break;case"#import":c=(d=t.splitToWords(h,null))[1],r.push({node:s,file:t.includes[c],ofs:s.text.length});continue}}else{if((l=i.childs[i.childs.length-1])&&!l.name){r.length>0&&t.splitToWords(h,l),p=s,l.text+="\n"+h;continue}r.length>0&&t.splitToWords(h,s)}s.setParent(i)}},r.createShader=function(t,e,i){var n={},o="";if(t)for(var r in t)o+="#define "+r+"\n",n[r]=!0;var a=this._VS.toscript(n,[]),s=this._PS.toscript(n,[]);return(i||jt.create)(o+a.join("\n"),o+s.join("\n"),e,this._nameMap)},t._parseOne=function(e,i,n,o,r,a){var s={type:t.shaderParamsMap[n[o+1]],name:n[o+2],size:isNaN(parseInt(n[o+3]))?1:parseInt(n[o+3])};return a&&("attribute"==r?e.push(s):i.push(s)),":"==n[o+3]&&(s.type=n[o+4],o+=2),o+=2},t.addInclude=function(e,n){if(!n||0===n.length)throw new Error("add shader include file err:"+e);if(t.includes[e])throw new Error("add shader include file err, has add:"+e);t.includes[e]=new i(n)},t.preGetParams=function(e,i){var n=[e,i],o={},r=[],a=[],s={},l=[];o.attributes=r,o.uniforms=a,o.defines=s;for(var h=0,u=0,c=0;c<2;c++){n[c]=n[c].replace(t._removeAnnotation,"");var d,p=n[c].match(t._reg);for(h=0,u=p.length;h<u;h++){var f=p[h];if("attribute"==f||"uniform"==f)h=t._parseOne(r,a,p,h,f,!0);else{if("#define"==f){l[f=p[++h]]=1;continue}if("#ifdef"==f){s[d=p[++h]]=s[d]||[];for(h++;h<u;h++)if("attribute"==(f=p[h])||"uniform"==f)h=t._parseOne(r,a,p,h,f,l[d]);else if("#else"==f)for(h++;h<u;h++)if("attribute"==(f=p[h])||"uniform"==f)h=t._parseOne(r,a,p,h,f,!l[d]);else if("#endif"==f)break}}}}return o},t.splitToWords=function(t,e){for(var i,n,o=[],r=-1,a=0,s=t.length;a<s;a++)if(i=t.charAt(a)," \t=+-*/&%!<>()'\",;".indexOf(i)>=0){if(r>=0&&a-r>1&&(n=t.substr(r,a-r),o.push(n)),'"'==i||"'"==i){var l=t.indexOf(i,a+1);if(l<0)throw"Sharder err:"+t;o.push(t.substr(a+1,l-a-1)),a=l,r=-1;continue}"("==i&&e&&o.length>0&&(n=o[o.length-1]+";","vec4;main;".indexOf(n)<0&&(e.useFuns+=n)),r=-1}else r<0&&(r=a);return r<s&&s-r>1&&(n=t.substr(r,s-r),o.push(n)),o},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.IFDEF_PARENT=3,t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t.includes={},n(t,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),t.__init$=function(){e=function(){function t(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t}o(t,"");var e=t.prototype;return e.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t},e.setCondition=function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)},e.toscript=function(e,i){return this._toscript(e,i,++t.__id)},e._toscript=function(t,e,i){if(this.childs.length<1&&!this.text)return e;e.length;if(this.condition){var n=!!this.condition.call(t);if(2===this.conditionType&&(n=!n),!n)return e}if(this.text&&e.push(this.text),this.childs.length>0&&this.childs.forEach(function(n,o,r){n._toscript(t,e,i)}),this.includefiles.length>0&&this.useFuns.length>0)for(var o,r=0,a=this.includefiles.length;r<a;r++)this.includefiles[r].curUseID!=i&&(o=this.includefiles[r].file.getFunsScript(this.useFuns)).length>0&&(this.includefiles[r].curUseID=i,e[0]=o+e[0]);return e},t.__id=1,t}(),i=function(){function e(e){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e;for(var i=0,n=0,o=0;;){if((i=e.indexOf("#begin",i))<0)break;for(o=i+5;;){if((o=e.indexOf("#end",o))<0)break;if("i"!==e.charAt(o+4))break;o+=5}if(o<0)throw"add include err,no #end:"+e;n=e.indexOf("\n",i);var r=t.splitToWords(e.substr(i,n-i),null);"code"==r[1]?this.codes[r[2]]=e.substr(n+1,o-n-1):"function"==r[1]&&(n=e.indexOf("function",i),n+="function".length,this.funs[r[3]]=e.substr(n+1,o-n-1),this.funnames+=r[3]+";"),i=o+1}}o(e,"");var i=e.prototype;return i.getWith=function(t){var e=t?this.codes[t]:this.script;if(!e)throw"get with error:"+t;return e},i.getFunsScript=function(t){var e="";for(var i in this.funs)t.indexOf(i+";")>=0&&(e+=this.funs[i]);return e},e}()},t}(),It=function(){function t(){}return o(t,"laya.webgl.WebGL"),t._uint8ArraySlice=function(){for(var t=this.length,e=new Uint8Array(this.length),i=0;i<t;i++)e[i]=this[i];return e},t._float32ArraySlice=function(){for(var t=this.length,e=new Float32Array(this.length),i=0;i<t;i++)e[i]=this[i];return e},t._uint16ArraySlice=function(t){var e,i=arguments,n=0,o=0;if(0===i.length)for(n=this.length,e=new Uint16Array(n),o=0;o<n;o++)e[o]=this[o];else if(2===i.length){var r=i[0],a=i[1];if(a>r)for(n=a-r,e=new Uint16Array(n),o=r;o<a;o++)e[o-r]=this[o];else e=new Uint16Array(0)}return e},t.expandContext=function(){var t=f.prototype,e=CanvasRenderingContext2D.prototype;e.fillTrangles=t.fillTrangles,Jt.__int__(null),e.setIBVB=function(t,e,i,n,o,r,a,s,l,h){void 0===l&&(l=0),void 0===h&&(h=0),null===i&&(this._ib=this._ib||$t.QuadrangleIB,i=this._ib,_t.expandIBQuadrangle(i,n._byteLength/64+8)),this._setIBVB(t,e,i,n,o,r,a,s,l,h)},e.fillTrangles=function(t,e,i,n,o){this._curMat=this._curMat||I.create(),this._vb=this._vb||qt.create(),this._ib||(this._ib=$t.create(),_t.fillIBQuadrangle(this._ib,a/4));var r=this._vb,a=n.length>>4;_t.fillTranglesVB(r,e,i,n,o||this._curMat,0,0),_t.expandIBQuadrangle(this._ib,r._byteLength/64+8);var s=new St(1,0);s.textureHost=t;var l=new Qt("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");r._vertType=3,this._setIBVB(e,i,this._ib,r,6*a,o,l,s,0,0)}},t.enable=function(){if(u.__init__(),C.isConchApp&&!C.isConchWebGL)return M.skinAniSprite=function(){return new tt},t.expandContext(),!1;if(M.getWebGLContext=function(t){for(var e,i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<i.length;n++){try{e=t.getContext(i[n],{stencil:p.isStencil,alpha:p.isAlpha,antialias:p.isAntialias,premultipliedAlpha:p.premultipliedAlpha,preserveDrawingBuffer:p.preserveDrawingBuffer})}catch(t){}if(e)return e}return null},null==(t.mainContext=M.getWebGLContext(C._mainCanvas)))return!1;if(C.isWebGL)return!0;y.create=function(t,e){return new te(t,e)},v.create=function(t,e,i,n,o,r,a){return new zt(t,e,i,n,o,r,a)},C.WebGL=t,C.isWebGL=!0,pt.__init__(),M.createRenderSprite=function(t,e){return new xt(t,e)},M.createWebGLContext2D=function(t){return new Ct(t)},M.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},M.createGraphics=function(){return new bt};var e=M.createFilterAction;return M.createFilterAction=e||function(t){return new Tt},M.clear=function(t){yt.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=C.context.ctx,i=0==e._submits._length||p.preserveDrawingBuffer?d.create(t)._color:D._wgColor;i&&e.clearBG(i[0],i[1],i[2],i[3]),yt.clear()},M.addToAtlas=function(t,e){void 0===e&&(e=!1);var n=t.bitmap;C.optimizeTextureMemory(t.url,t)?i.__typeof(n,"laya.webgl.resource.IMergeAtlasBitmap")&&n.allowMerageInAtlas&&n.on("recovered",t,t.addTextureToAtlas):n.enableMerageInAtlas=!1},M.isAtlas=function(t){return t instanceof laya.webgl.atlas.AtlasWebGLCanvas},W._enable(),M.beginFlush=function(){for(var t=W.instance,e=t.getAtlaserCount(),i=0;i<e;i++){var n=t.getAtlaserByIndex(i).texture;n._flashCacheImageNeedFlush&&M.flashFlushImage(n)}},M.drawToCanvas=function(t,e,i,n,o,r){(i<=0||n<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),i|=0,n|=0,o|=0,r|=0;var a=Ut.create(i,n,6408,5121,0,!1);a.start(),a.clear(0,0,0,0),C.context.clear(),S.renders[e]._fun(t,C.context,o,yt.height-n+r),C.context.flush(),a.end();var s=a.getData(0,0,i,n);if(a.recycle(),s.byteLength==i*n*4){var l=new Xt;l._canvas=u.createElement("canvas"),l.size(i,n);var h=l._canvas.getContext("2d");u.canvas.size(i,n);var c=u.context,d=c.createImageData(i,n);return d.data.set(new Uint8ClampedArray(s.buffer)),l._imgData=d,c.putImageData(d,0,0),h.save(),h.translate(0,n),h.scale(1,-1),h.drawImage(u.canvas.source,0,0),h.restore(),l}console.log("drawToCanvas error: w:"+i+",h:"+n+",datalen:"+s.byteLength)},M.createFilterAction=function(t){var e;switch(t){case 32:e=new Tt}return e},M.addTextureToAtlas=function(t){t._uvID++,W._atlasRestore++,t.bitmap.enableMerageInAtlas&&W.instance.addToAtlas(t)},M.getTexturePixels=function(t,e,i,n,o){C.context.ctx.clear();var r=new L;r.graphics.drawTexture(t,-e,-i);var a=Ut.create(n,o);a.start(),a.clear(0,0,0,0),r.render(C.context,0,0),C.context.ctx.flush(),a.end();for(var s=a.getData(0,0,n,o),l=[],h=0,u=o-1;u>=0;u--)for(var c=0;c<n;c++)h=4*(u*n+c),l.push(s[h]),l.push(s[h+1]),l.push(s[h+2]),l.push(s[h+3]);return l},M.skinAniSprite=function(){return new tt},m.create=function(t,e){var i=new Xt;return i._imgData=e,i.flipY=!1,i},g._filterStart=function(t,e,i,n,o){var r=t.getValue("bounds"),a=Ut.create(r.width,r.height);if(a.start(),a.clear(0,0,0,0),t.addValue("src",a),t.addValue("ScissorTest",yt.worldScissorTest),yt.worldScissorTest){var s=new b;s.copyFrom(i.ctx._clipRect),t.addValue("clipRect",s),yt.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},g._filterEnd=function(t,e,i,n,o){var r=t.getValue("bounds");t.getValue("src").end();var a=Ut.create(r.width,r.height);a.start(),a.clear(0,0,0,0),t.addValue("out",a),e._set$P("_filterCache",a),e._set$P("_isHaveGlowFilter",t.getValue("_isHaveGlowFilter"))},g._EndTarget=function(t,e){t.getValue("src").recycle();t.getValue("out").end();if(t.getValue("ScissorTest")){yt.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e.ctx.save();var i=t.getValue("clipRect");e.ctx.clipRect(i.x,i.y,i.width,i.height)}},g._useSrc=function(t){var e=t.getValue("out");e.end(),(e=t.getValue("src")).start(),e.clear(0,0,0,0)},g._endSrc=function(t){t.getValue("src").end()},g._useOut=function(t){var e=t.getValue("src");e.end(),(e=t.getValue("out")).start(),e.clear(0,0,0,0)},g._endOut=function(t){t.getValue("out").end()},g._recycleScope=function(t){t.recycle()},g._filter=function(t,e,i,n){var o=this._next;if(o){var r=t.filters,a=r.length;if(1==a&&32==r[0].type)return e.ctx.save(),e.ctx.setFilters([r[0]]),o._fun.call(o,t,e,i,n),void e.ctx.restore();var s,l,h=st.create(),u=w.TEMP,c=e.ctx._getTransformMatrix(),d=I.create();c.copyTo(d);var p=0,f=0,_=!1,m=t._$P._filterCache?t._$P._filterCache:null;if(!m||t._repaint){_=t._isHaveGlowFilter(),h.addValue("_isHaveGlowFilter",_),_&&(p=50,f=25),(l=new b).copyFrom(t.getSelfBounds()),l.x+=t.x,l.y+=t.y,l.x-=t.pivotX+4,l.y-=t.pivotY+4;var y=l.x,v=l.y;if(l.width+=p+8,l.height+=p+8,u.x=l.x*d.a+l.y*d.c,u.y=l.y*d.d+l.x*d.b,l.x=u.x,l.y=u.y,u.x=l.width*d.a+l.height*d.c,u.y=l.height*d.d+l.width*d.b,l.width=u.x,l.height=u.y,l.width<=0||l.height<=0)return;m&&m.recycle(),h.addValue("bounds",l);var C=at.create([h,t,e,0,0],g._filterStart);e.addRenderObject(C),e.ctx._renderKey=0,e.ctx._shader2D.glTexture=null;var S=t.x-y+f,x=t.y-v+f;o._fun.call(o,t,e,S,x),C=at.create([h,t,e,0,0],g._filterEnd),e.addRenderObject(C);for(var T=0;T<a;T++){0!=T&&(C=at.create([h],g._useSrc),e.addRenderObject(C),s=St.create(1,0),I.TEMP.identity(),e.ctx.drawTarget(h,0,0,l.width,l.height,I.TEMP,"out",s,null,F.TOINT.overlay),C=at.create([h],g._useOut),e.addRenderObject(C));r[T].action.apply3d(h,t,e,0,0)}C=at.create([h,e],g._EndTarget),e.addRenderObject(C)}else{if((_=!!t._$P._isHaveGlowFilter&&t._$P._isHaveGlowFilter)&&(p=50,f=25),(l=t.getBounds()).width<=0||l.height<=0)return;l.width+=p,l.height+=p,u.x=l.x*d.a+l.y*d.c,u.y=l.y*d.d+l.x*d.b,l.x=u.x,l.y=u.y,u.x=l.width*d.a+l.height*d.c,u.y=l.height*d.d+l.width*d.b,l.width=u.x,l.height=u.y,h.addValue("out",m)}i=i-f-t.x,n=n-f-t.y,u.setTo(i,n),d.transformPoint(u),i=u.x+l.x,n=u.y+l.y,s=St.create(1,0),I.TEMP.identity(),e.ctx.drawTarget(h,i,n,l.width,l.height,I.TEMP,"out",s,null,F.TOINT.overlay),C=at.create([h],g._recycleScope),e.addRenderObject(C),d.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=t._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=t._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=t._uint8ArraySlice),!0},t.onStageResize=function(e,i){null!=t.mainContext&&(t.mainContext.viewport(0,0,e,i),yt.width=e,yt.height=i)},t.onInvalidGLRes=function(){W.instance.freeAll(),T.releaseContentManagers(!0),t.doNodeRepaint(i.stage),t.mainContext.viewport(0,0,yt.width,yt.height),i.stage.event("devicelost")},t.doNodeRepaint=function(e){0==e.numChildren&&e.repaint();for(var i=0;i<e.numChildren;i++)t.doNodeRepaint(e.getChildAt(i))},t.init=function(e,i,n){t.mainCanvas=e,m._createContext=function(t){return new Ct(t)},Xt._createContext=function(t){return new Ct(t)};var o=laya.webgl.WebGL.mainContext;if(null!=o.getShaderPrecisionFormat){var r=o.getShaderPrecisionFormat(35633,36338),a=o.getShaderPrecisionFormat(35632,36338);t.shaderHighPrecision=!(!r.precision||!a.precision)}else t.shaderHighPrecision=!1;if(t.compressAstc=o.getExtension("WEBGL_compressed_texture_astc"),t.compressAtc=o.getExtension("WEBGL_compressed_texture_atc"),t.compressEtc=o.getExtension("WEBGL_compressed_texture_etc"),t.compressEtc1=o.getExtension("WEBGL_compressed_texture_etc1"),t.compressPvrtc=o.getExtension("WEBGL_compressed_texture_pvrtc"),t.compressS3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),t.compressS3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),o.deleteTexture1=o.deleteTexture,o.deleteTexture=function(t){t==wt.curBindTexValue&&(wt.curBindTexValue=null),o.deleteTexture1(t)},t.onStageResize(i,n),null==t.mainContext)throw new Error("webGL getContext err!");P.__init__(),W.__init__(),Lt.__init__(),rt.__init__(),Ct.__init__(),St.__init__(),$.__init__(),Jt.__int__(o),F._init_(o),C.isConchApp&&conch.setOnInvalidGLRes(t.onInvalidGLRes)},t.compressAstc=null,t.compressAtc=null,t.compressEtc=null,t.compressEtc1=null,t.compressPvrtc=null,t.compressS3tc=null,t.compressS3tc_srgb=null,t.mainCanvas=null,t.mainContext=null,t.antialias=!0,t.shaderHighPrecision=!1,t._bg_null=[0,0,0,0],t}(),wt=function(){function t(){}return o(t,"laya.webgl.WebGLContext"),t.UseProgram=function(e){return t._useProgram!==e&&(It.mainContext.useProgram(e),t._useProgram=e,!0)},t.setDepthTest=function(e,i){i!==t._depthTest&&(t._depthTest=i,i?e.enable(2929):e.disable(2929))},t.setDepthMask=function(e,i){i!==t._depthMask&&(t._depthMask=i,e.depthMask(i))},t.setDepthFunc=function(e,i){i!==t._depthFunc&&(t._depthFunc=i,e.depthFunc(i))},t.setBlend=function(e,i){i!==t._blend&&(t._blend=i,i?e.enable(3042):e.disable(3042))},t.setBlendFunc=function(e,i,n){(i!==t._sFactor||n!==t._dFactor)&&(t._sFactor=i,t._dFactor=n,e.blendFunc(i,n))},t.setCullFace=function(e,i){i!==t._cullFace&&(t._cullFace=i,i?e.enable(2884):e.disable(2884))},t.setFrontFace=function(e,i){i!==t._frontFace&&(t._frontFace=i,e.frontFace(i))},t.bindTexture=function(e,i,n){e.bindTexture(i,n),t.curBindTexTarget=i,t.curBindTexValue=n},t.DEPTH_BUFFER_BIT=256,t.STENCIL_BUFFER_BIT=1024,t.COLOR_BUFFER_BIT=16384,t.POINTS=0,t.LINES=1,t.LINE_LOOP=2,t.LINE_STRIP=3,t.TRIANGLES=4,t.TRIANGLE_STRIP=5,t.TRIANGLE_FAN=6,t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t.ONE_MINUS_DST_COLOR=775,t.SRC_ALPHA_SATURATE=776,t.FUNC_ADD=32774,t.BLEND_EQUATION=32777,t.BLEND_EQUATION_RGB=32777,t.BLEND_EQUATION_ALPHA=34877,t.FUNC_SUBTRACT=32778,t.FUNC_REVERSE_SUBTRACT=32779,t.BLEND_DST_RGB=32968,t.BLEND_SRC_RGB=32969,t.BLEND_DST_ALPHA=32970,t.BLEND_SRC_ALPHA=32971,t.CONSTANT_COLOR=32769,t.ONE_MINUS_CONSTANT_COLOR=32770,t.CONSTANT_ALPHA=32771,t.ONE_MINUS_CONSTANT_ALPHA=32772,t.BLEND_COLOR=32773,t.ARRAY_BUFFER=34962,t.ELEMENT_ARRAY_BUFFER=34963,t.ARRAY_BUFFER_BINDING=34964,t.ELEMENT_ARRAY_BUFFER_BINDING=34965,t.STREAM_DRAW=35040,t.STATIC_DRAW=35044,t.DYNAMIC_DRAW=35048,t.BUFFER_SIZE=34660,t.BUFFER_USAGE=34661,t.CURRENT_VERTEX_ATTRIB=34342,t.FRONT=1028,t.BACK=1029,t.CULL_FACE=2884,t.FRONT_AND_BACK=1032,t.BLEND=3042,t.DITHER=3024,t.STENCIL_TEST=2960,t.DEPTH_TEST=2929,t.SCISSOR_TEST=3089,t.POLYGON_OFFSET_FILL=32823,t.SAMPLE_ALPHA_TO_COVERAGE=32926,t.SAMPLE_COVERAGE=32928,t.NO_ERROR=0,t.INVALID_ENUM=1280,t.INVALID_VALUE=1281,t.INVALID_OPERATION=1282,t.OUT_OF_MEMORY=1285,t.CW=2304,t.CCW=2305,t.LINE_WIDTH=2849,t.ALIASED_POINT_SIZE_RANGE=33901,t.ALIASED_LINE_WIDTH_RANGE=33902,t.CULL_FACE_MODE=2885,t.FRONT_FACE=2886,t.DEPTH_RANGE=2928,t.DEPTH_WRITEMASK=2930,t.DEPTH_CLEAR_VALUE=2931,t.DEPTH_FUNC=2932,t.STENCIL_CLEAR_VALUE=2961,t.STENCIL_FUNC=2962,t.STENCIL_FAIL=2964,t.STENCIL_PASS_DEPTH_FAIL=2965,t.STENCIL_PASS_DEPTH_PASS=2966,t.STENCIL_REF=2967,t.STENCIL_VALUE_MASK=2963,t.STENCIL_WRITEMASK=2968,t.STENCIL_BACK_FUNC=34816,t.STENCIL_BACK_FAIL=34817,t.STENCIL_BACK_PASS_DEPTH_FAIL=34818,t.STENCIL_BACK_PASS_DEPTH_PASS=34819,t.STENCIL_BACK_REF=36003,t.STENCIL_BACK_VALUE_MASK=36004,t.STENCIL_BACK_WRITEMASK=36005,t.VIEWPORT=2978,t.SCISSOR_BOX=3088,t.COLOR_CLEAR_VALUE=3106,t.COLOR_WRITEMASK=3107,t.UNPACK_ALIGNMENT=3317,t.PACK_ALIGNMENT=3333,t.MAX_TEXTURE_SIZE=3379,t.MAX_VIEWPORT_DIMS=3386,t.SUBPIXEL_BITS=3408,t.RED_BITS=3410,t.GREEN_BITS=3411,t.BLUE_BITS=3412,t.ALPHA_BITS=3413,t.DEPTH_BITS=3414,t.STENCIL_BITS=3415,t.POLYGON_OFFSET_UNITS=10752,t.POLYGON_OFFSET_FACTOR=32824,t.TEXTURE_BINDING_2D=32873,t.SAMPLE_BUFFERS=32936,t.SAMPLES=32937,t.SAMPLE_COVERAGE_VALUE=32938,t.SAMPLE_COVERAGE_INVERT=32939,t.NUM_COMPRESSED_TEXTURE_FORMATS=34466,t.COMPRESSED_TEXTURE_FORMATS=34467,t.DONT_CARE=4352,t.FASTEST=4353,t.NICEST=4354,t.GENERATE_MIPMAP_HINT=33170,t.BYTE=5120,t.UNSIGNED_BYTE=5121,t.SHORT=5122,t.UNSIGNED_SHORT=5123,t.INT=5124,t.UNSIGNED_INT=5125,t.FLOAT=5126,t.DEPTH_COMPONENT=6402,t.ALPHA=6406,t.RGB=6407,t.RGBA=6408,t.LUMINANCE=6409,t.LUMINANCE_ALPHA=6410,t.UNSIGNED_SHORT_4_4_4_4=32819,t.UNSIGNED_SHORT_5_5_5_1=32820,t.UNSIGNED_SHORT_5_6_5=33635,t.FRAGMENT_SHADER=35632,t.VERTEX_SHADER=35633,t.MAX_VERTEX_ATTRIBS=34921,t.MAX_VERTEX_UNIFORM_VECTORS=36347,t.MAX_VARYING_VECTORS=36348,t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,t.MAX_TEXTURE_IMAGE_UNITS=34930,t.MAX_FRAGMENT_UNIFORM_VECTORS=36349,t.SHADER_TYPE=35663,t.DELETE_STATUS=35712,t.LINK_STATUS=35714,t.VALIDATE_STATUS=35715,t.ATTACHED_SHADERS=35717,t.ACTIVE_UNIFORMS=35718,t.ACTIVE_ATTRIBUTES=35721,t.SHADING_LANGUAGE_VERSION=35724,t.CURRENT_PROGRAM=35725,t.NEVER=512,t.LESS=513,t.EQUAL=514,t.LEQUAL=515,t.GREATER=516,t.NOTEQUAL=517,t.GEQUAL=518,t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681,t.INCR=7682,t.DECR=7683,t.INVERT=5386,t.INCR_WRAP=34055,t.DECR_WRAP=34056,t.VENDOR=7936,t.RENDERER=7937,t.VERSION=7938,t.NEAREST=9728,t.LINEAR=9729,t.NEAREST_MIPMAP_NEAREST=9984,t.LINEAR_MIPMAP_NEAREST=9985,t.NEAREST_MIPMAP_LINEAR=9986,t.LINEAR_MIPMAP_LINEAR=9987,t.TEXTURE_MAG_FILTER=10240,t.TEXTURE_MIN_FILTER=10241,t.TEXTURE_WRAP_S=10242,t.TEXTURE_WRAP_T=10243,t.TEXTURE_2D=3553,t.TEXTURE=5890,t.TEXTURE_CUBE_MAP=34067,t.TEXTURE_BINDING_CUBE_MAP=34068,t.TEXTURE_CUBE_MAP_POSITIVE_X=34069,t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,t.MAX_CUBE_MAP_TEXTURE_SIZE=34076,t.TEXTURE0=33984,t.TEXTURE1=33985,t.TEXTURE2=33986,t.TEXTURE3=33987,t.TEXTURE4=33988,t.TEXTURE5=33989,t.TEXTURE6=33990,t.TEXTURE7=33991,t.TEXTURE8=33992,t.TEXTURE9=33993,t.TEXTURE10=33994,t.TEXTURE11=33995,t.TEXTURE12=33996,t.TEXTURE13=33997,t.TEXTURE14=33998,t.TEXTURE15=33999,t.TEXTURE16=34e3,t.TEXTURE17=34001,t.TEXTURE18=34002,t.TEXTURE19=34003,t.TEXTURE20=34004,t.TEXTURE21=34005,t.TEXTURE22=34006,t.TEXTURE23=34007,t.TEXTURE24=34008,t.TEXTURE25=34009,t.TEXTURE26=34010,t.TEXTURE27=34011,t.TEXTURE28=34012,t.TEXTURE29=34013,t.TEXTURE30=34014,t.TEXTURE31=34015,t.ACTIVE_TEXTURE=34016,t.REPEAT=10497,t.CLAMP_TO_EDGE=33071,t.MIRRORED_REPEAT=33648,t.FLOAT_VEC2=35664,t.FLOAT_VEC3=35665,t.FLOAT_VEC4=35666,t.INT_VEC2=35667,t.INT_VEC3=35668,t.INT_VEC4=35669,t.BOOL=35670,t.BOOL_VEC2=35671,t.BOOL_VEC3=35672,t.BOOL_VEC4=35673,t.FLOAT_MAT2=35674,t.FLOAT_MAT3=35675,t.FLOAT_MAT4=35676,t.SAMPLER_2D=35678,t.SAMPLER_CUBE=35680,t.VERTEX_ATTRIB_ARRAY_ENABLED=34338,t.VERTEX_ATTRIB_ARRAY_SIZE=34339,t.VERTEX_ATTRIB_ARRAY_STRIDE=34340,t.VERTEX_ATTRIB_ARRAY_TYPE=34341,t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,t.VERTEX_ATTRIB_ARRAY_POINTER=34373,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,t.COMPILE_STATUS=35713,t.LOW_FLOAT=36336,t.MEDIUM_FLOAT=36337,t.HIGH_FLOAT=36338,t.LOW_INT=36339,t.MEDIUM_INT=36340,t.HIGH_INT=36341,t.FRAMEBUFFER=36160,t.RENDERBUFFER=36161,t.RGBA4=32854,t.RGB5_A1=32855,t.RGB565=36194,t.DEPTH_COMPONENT16=33189,t.STENCIL_INDEX=6401,t.STENCIL_INDEX8=36168,t.DEPTH_STENCIL=34041,t.RENDERBUFFER_WIDTH=36162,t.RENDERBUFFER_HEIGHT=36163,t.RENDERBUFFER_INTERNAL_FORMAT=36164,t.RENDERBUFFER_RED_SIZE=36176,t.RENDERBUFFER_GREEN_SIZE=36177,t.RENDERBUFFER_BLUE_SIZE=36178,t.RENDERBUFFER_ALPHA_SIZE=36179,t.RENDERBUFFER_DEPTH_SIZE=36180,t.RENDERBUFFER_STENCIL_SIZE=36181,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,t.COLOR_ATTACHMENT0=36064,t.DEPTH_ATTACHMENT=36096,t.STENCIL_ATTACHMENT=36128,t.DEPTH_STENCIL_ATTACHMENT=33306,t.NONE=0,t.FRAMEBUFFER_COMPLETE=36053,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,t.FRAMEBUFFER_UNSUPPORTED=36061,t.FRAMEBUFFER_BINDING=36006,t.RENDERBUFFER_BINDING=36007,t.MAX_RENDERBUFFER_SIZE=34024,t.INVALID_FRAMEBUFFER_OPERATION=1286,t.UNPACK_FLIP_Y_WEBGL=37440,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,t.CONTEXT_LOST_WEBGL=37442,t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,t.BROWSER_DEFAULT_WEBGL=37444,t._useProgram=null,t._depthTest=!0,t._depthMask=!0,t._blend=!1,t._cullFace=!1,t.curBindTexTarget=null,t.curBindTexValue=null,n(t,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),t}(),bt=function(t){function e(){e.__super.call(this)}o(e,"laya.webgl.display.GraphicsGL",_);var i=e.prototype;return i.setShader=function(t){this._saveToCmd(C.context._setShader,[t])},i.setIBVB=function(t,e,i,n,o,r){this._saveToCmd(C.context._setIBVB,[t,e,i,n,o,r])},i.drawParticle=function(t,e,i){var n=M.createParticleTemplate2D(i);n.x=t,n.y=e,this._saveToCmd(C.context._drawParticle,[n])},e}(),Ct=function(t){function e(t){this._x=0,this._y=0,this._id=++e._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,e.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=e.MAXCLIPRECT,this.mOutPoint,this._canvas=t,e._contextcount++,C.isFlash?(this._ib=$t.create(35044),_t.fillIBQuadrangle(this._ib,16)):this._ib=$t.QuadrangleIB,this.clear()}var a;o(e,"laya.webgl.canvas.WebGLContext2D",f);var s=e.prototype;return s.setIsMainContext=function(){this._isMain=!0},s.clearBG=function(t,e,i,n){var o=It.mainContext;o.clearColor(t,e,i,n),o.clear(16384)},s._getSubmits=function(){return this._submits},s._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,e=this._submits._length;t<e;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},s.destroy=function(){--e._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas=null,this._ib&&this._ib!=$t.QuadrangleIB&&this._ib.releaseResource()},s.clear=function(){this._submits||(this._other=a.DEFAULT,this._curMat=I.create(),this._vb=qt.create(-1),this._submits=[],this._save=[j.Create(this)],this._save.length=10,this._shader2D=new $,this._triangleMesh=Gt.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=a.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=rt.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=Z.DEFAULT;for(var t=0,i=this._submits._length;t<i;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},s.size=function(t,e){if(this._width!=t||this._height!=e)if(0==t||0==e){0!=this._vb._byteLength&&(this._width=t,this._height=e,this._vb.clear(),this._vb.upload());for(var i=0,n=this._submits._length;i<n;i++)this._submits[i].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=t,this._height=e,this._targets&&this._targets.size(t,e),this._canvas.memorySize-=this._canvas.memorySize;0===t&&0===e&&this._releaseMem()},s._getTransformMatrix=function(){return this._curMat},s.translate=function(t,e){0===t&&0===e||(K.save(this),this._curMat.bTransform&&(J.save(this),this._curMat.transformPointN(w.TEMP.setTo(t,e)),t=w.TEMP.x,e=w.TEMP.y),this._x+=t,this._y+=e)},s.save=function(){this._save[this._save._length++]=j.Create(this)},s.restore=function(){var t=this._save._length;if(!(t<1))for(var e=t-1;e>=0;e--){var i=this._save[e];if(i.restore(this),i.isSaveMark())return void(this._save._length=e)}},s._fillText=function(t,e,i,n,o,r,a,s,l,h){void 0===h&&(h=0);var u=this._shader2D,c=this._curSubmit.shaderValue,p=o?ft.create(o):this._other.font;if(W.enabled)u.ALPHA!==c.ALPHA&&(u.glTexture=null),pt.drawText(this,t,e,this._curMat,p,l||this._other.textAlign,r,a,s,i,n,h);else{this._shader2D.defines.getValue();var f=r?d.create(r)._color:u.colorAdd;u.ALPHA===c.ALPHA&&f===u.colorAdd&&c.colorAdd===u.colorAdd||(u.glTexture=null,u.colorAdd=f),pt.drawText(this,t,e,this._curMat,p,l||this._other.textAlign,r,a,s,i,n,h)}},s.fillWords=function(t,e,i,n,o,r){this._fillText(null,t,e,i,n,o,null,-1,null,r)},s.fillBorderWords=function(t,e,i,n,o,r,a){this._fillBorderText(null,t,e,i,n,o,r,a,null)},s.fillText=function(t,e,i,n,o,r){this._fillText(t,null,e,i,n,o,null,-1,r)},s.strokeText=function(t,e,i,n,o,r,a){this._fillText(t,null,e,i,n,null,o,r||1,a)},s.fillBorderText=function(t,e,i,n,o,r,a,s){this._fillBorderText(t,null,e,i,n,o,r,a,s)},s._fillBorderText=function(t,i,n,o,r,a,s,l,h){if(!W.enabled)return this._fillText(t,i,n,o,r,null,s,l||1,h),void this._fillText(t,i,n,o,r,a,null,-1,h);var u=this._shader2D,c=this._curSubmit.shaderValue;u.ALPHA!==c.ALPHA&&(u.glTexture=null);var d=r?(e._fontTemp.setFont(r),e._fontTemp):this._other.font;pt.drawText(this,t,i,this._curMat,d,h||this._other.textAlign,a,s,l||1,n,o,0)},s.fillRect=function(t,e,i,n,o){var r=this._vb;if(_t.fillRectImgVb(r,this._clipRect,t,e,i,n,G.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var a=this._shader2D.fillStyle;o&&(this._shader2D.fillStyle=Z.create(o));var s=this._shader2D,l=this._curSubmit.shaderValue;if(s.fillStyle!==l.fillStyle||s.ALPHA!==l.ALPHA){s.glTexture=null;var h=this._curSubmit=rt.createSubmit(this,this._ib,r,(r._byteLength-64)/32*3,St.create(2,0));h.shaderValue.color=s.fillStyle._color._color,h.shaderValue.ALPHA=s.ALPHA,this._submits[this._submits._length++]=h}this._curSubmit._numEle+=6,this._shader2D.fillStyle=a}},s.fillTexture=function(t,e,n,o,r,a,s,l){if(t.loaded&&t.bitmap&&t.source){var h=this._vb,u=t.bitmap.width,c=t.bitmap.height,d=t.uv,p=s.x%t.width,f=s.y%t.height;if(u!=l.w||c!=l.h){if(!l.w&&!l.h)switch(l.oy=l.ox=0,a){case"repeat":l.width=o,l.height=r;break;case"repeat-x":l.width=o,f<0?t.height+f>r?l.height=r:l.height=t.height+f:(l.oy=f,t.height+f>r?l.height=r-f:l.height=t.height);break;case"repeat-y":p<0?t.width+p>o?l.width=o:l.width=t.width+p:(l.ox=p,t.width+p>o?l.width=o-p:l.width=t.width),l.height=r;break;case"no-repeat":p<0?t.width+p>o?l.width=o:l.width=t.width+p:(l.ox=p,t.width+p>o?l.width=o-p:l.width=t.width),f<0?t.height+f>r?l.height=r:l.height=t.height+f:(l.oy=f,t.height+f>r?l.height=r-f:l.height=t.height);break;default:l.width=o,l.height=r}l.w=u,l.h=c,l.uv=[0,0,l.width/u,0,l.width/u,l.height/c,0,l.height/c]}if(e+=l.ox,n+=l.oy,p-=l.ox,f-=l.oy,_t.fillRectImgVb(h,this._clipRect,e,n,l.width,l.height,l.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var g=Nt.create(this,this._ib,h,(h._byteLength-64)/32*3,St.create(256,0));this._submits[this._submits._length++]=g;var _=g.shaderValue;_.textureHost=t;var m=d[0]*u,y=d[1]*c,v=(d[2]-d[0])*u,I=(d[5]-d[3])*c,w=-p/u,b=-f/c;_.u_TexRange[0]=m/u,_.u_TexRange[1]=v/u,_.u_TexRange[2]=y/c,_.u_TexRange[3]=I/c,_.u_offset[0]=w,_.u_offset[1]=b,W.enabled&&!this._isMain&&g.addTexture(t,(h._byteLength>>2)-16),this._curSubmit=g,g._renderType=10017,g._numEle+=6}}else this.sprite&&i.timer.callLater(this,this._repaintSprite)},s.setShader=function(t){H.save(this,1048576,this._shader2D,!0),this._shader2D.shader=t},s.setFilters=function(t){H.save(this,2097152,this._shader2D,!0),this._shader2D.filters=t,this._curSubmit=rt.RENDERBASE,this._renderKey=0,this._drawCount++},s.drawTexture=function(t,e,i,n,o,r,a){this._drawTextureM(t,e,i,n,o,r,a,null,1)},s.addTextureVb=function(t,e,i){var n=this._curSubmit._vb||this._vb,o=n._byteLength>>2;n.byteLength=o+16<<2;for(var r=n.getFloat32Array(),a=0;a<16;a+=4)r[o++]=t[a]+e,r[o++]=t[a+1]+i,r[o++]=t[a+2],r[o++]=t[a+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),n._upload=!0},s.willDrawTexture=function(t,e){if(!(t.loaded&&t.bitmap&&t.source))return this.sprite&&i.timer.callLater(this,this._repaintSprite),0;var n=t.bitmap,o=n.id+this._shader2D.ALPHA*e+10016;if(o==this._renderKey)return o;var r=this._shader2D,a=r.ALPHA,s=this._curSubmit.shaderValue;r.ALPHA*=e,this._renderKey=o,this._drawCount++,r.glTexture=n;var l=this._vb,h=null,u=l._byteLength/32*3;return h=Nt.create(this,this._ib,l,u,St.create(1,0)),this._submits[this._submits._length++]=h,h.shaderValue.textureHost=t,h._renderType=10016,h._preIsSameTextureShader=10016===this._curSubmit._renderType&&r.ALPHA===s.ALPHA,this._curSubmit=h,r.ALPHA=a,o},s.drawTextures=function(t,n,o,r){if(t.loaded&&t.bitmap&&t.source){var a=this._clipRect;if(this._clipRect=e.MAXCLIPRECT,this._drawTextureM(t,n[0],n[1],t.width,t.height,o,r,null,1)){if(this._clipRect=a,E.drawCall++,!(n.length<4)){for(var s=this._curSubmit._vb||this._vb,l=this._curMat.a,h=this._curMat.d,u=2,c=n.length;u<c;u+=2)_t.copyPreImgVb(s,(n[u]-n[u-2])*l,(n[u+1]-n[u-1])*h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&i.timer.callLater(this,this._repaintSprite)},s._drawTextureM=function(t,e,n,o,r,a,s,l,h){if(!t.loaded||!t.source)return this.sprite&&i.timer.callLater(this,this._repaintSprite),!1;var u=this._curSubmit._vb||this._vb,c=t.bitmap;e+=a,n+=s,this._drawCount++;var d=c.id+this._shader2D.ALPHA*h+10016;if(d!=this._renderKey){this._renderKey=d;var p=this._curSubmit.shaderValue,f=this._shader2D,g=f.ALPHA;f.ALPHA*=h,f.glTexture=c;var _=this._vb,m=null,y=_._byteLength/32*3;m=Nt.create(this,this._ib,_,y,St.create(1,0)),this._submits[this._submits._length++]=m,m.shaderValue.textureHost=t,m._renderType=10016,m._preIsSameTextureShader=10016===this._curSubmit._renderType&&f.ALPHA===p.ALPHA,this._curSubmit=m,u=this._curSubmit._vb||this._vb,f.ALPHA=g}return!!_t.fillRectImgVb(u,this._clipRect,e,n,o||t.width,r||t.height,t.uv,l||this._curMat,this._x,this._y,0,0)&&(W.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},s._repaintSprite=function(){this.sprite&&this.sprite.repaint()},s._drawText=function(t,e,i,n,o,r,a,s,l,h){var u=t.bitmap;this._drawCount++;var c=u.id+this._shader2D.ALPHA+10016;if(c!=this._renderKey){this._renderKey=c;var d=this._curSubmit.shaderValue,p=this._shader2D;p.glTexture=u;var f=this._vb,g=null,_=f._byteLength/32*3;(g=W.enabled?Nt.create(this,this._ib,f,_,St.create(1,0)):Nt.create(this,this._ib,f,_,Kt.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&p.ALPHA===d.ALPHA,this._submits[this._submits._length++]=g,g.shaderValue.textureHost=t,g._renderType=10016,this._curSubmit=g}t.active();var m=this._curSubmit._vb||this._vb;_t.fillRectImgVb(m,this._clipRect,e+a,i+s,n||t.width,o||t.height,t.uv,r||this._curMat,this._x,this._y,l,h,!0)&&(W.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(m._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},s.drawTextureWithTransform=function(t,i,n,o,r,a,s,l,h){if(a){var u=this._curMat,c=this._x,d=this._y;(0!==s||0!==l)&&(this._x=s*u.a+l*u.c,this._y=l*u.d+s*u.b),a&&u.bTransform?(I.mul(a,u,e._tmpMatrix),(a=e._tmpMatrix)._checkTransform()):(this._x+=u.tx,this._y+=u.ty),this._drawTextureM(t,i,n,o,r,0,0,a,h),this._x=c,this._y=d}else this._drawTextureM(t,i,n,o,r,s,l,null,h)},s.fillQuadrangle=function(t,e,i,n,o){var r=this._curSubmit,a=this._vb,s=this._shader2D,l=r.shaderValue;if(this._renderKey=0,t.bitmap){var h=t.bitmap;s.glTexture==h&&s.ALPHA===l.ALPHA||(s.glTexture=h,(r=this._curSubmit=rt.createSubmit(this,this._ib,a,a._byteLength/32*3,St.create(1,0))).shaderValue.glTexture=h,this._submits[this._submits._length++]=r),_t.fillQuadrangleImgVb(a,e,i,n,t.uv,o||this._curMat,this._x,this._y)}else r.shaderValue.fillStyle&&r.shaderValue.fillStyle.equal(t)&&s.ALPHA===l.ALPHA||(s.glTexture=null,(r=this._curSubmit=rt.createSubmit(this,this._ib,a,a._byteLength/32*3,St.create(2,0))).shaderValue.defines.add(2),r.shaderValue.fillStyle=Z.create(t),this._submits[this._submits._length++]=r),_t.fillQuadrangleImgVb(a,e,i,n,G.DEF_UV,o||this._curMat,this._x,this._y);r._numEle+=6},s.drawTexture2=function(t,i,n,o,r,a,s,l){if(0!=a){var h=this._curMat;if(this._x=t*h.a+i*h.c,this._y=i*h.d+t*h.b,r&&(h.bTransform||r.bTransform?(I.mul(r,h,e._tmpMatrix),r=e._tmpMatrix):(this._x+=r.tx+h.tx,this._y+=r.ty+h.ty,r=I.EMPTY)),1!==a||s){var u=this._shader2D.ALPHA,c=this._nBlendType;this._shader2D.ALPHA=a,s&&(this._nBlendType=F.TOINT(s)),this._drawTextureM(l[0],l[1]-n,l[2]-o,l[3],l[4],0,0,r,1),this._shader2D.ALPHA=u,this._nBlendType=c}else this._drawTextureM(l[0],l[1]-n,l[2]-o,l[3],l[4],0,0,r,1);this._x=this._y=0}},s.drawCanvas=function(t,e,i,n,o){var r=t.context;if(this._renderKey=0,r._targets)this._submits[this._submits._length++]=Pt.create(r,0,null),this._curSubmit=rt.RENDERBASE,r._targets.drawTo(this,e,i,n,o);else{var a=this._submits[this._submits._length++]=Pt.create(r,this._shader2D.ALPHA,this._shader2D.filters),s=n/t.width,l=o/t.height,h=a._matrix;this._curMat.copyTo(h),1!=s&&1!=l&&h.scale(s,l);var u=h.tx,c=h.ty;h.tx=h.ty=0,h.transformPoint(w.TEMP.setTo(e,i)),h.translate(w.TEMP.x+u,w.TEMP.y+c),this._curSubmit=rt.RENDERBASE}p.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=r._targets?"yellow":"green",this.strokeRect(e-1,i-1,n+2,o+2,1),this.strokeRect(e,i,n,o,1),this.restore())},s.drawTarget=function(t,e,i,n,o,r,a,s,l,h){void 0===h&&(h=-1);var u=this._vb;if(_t.fillRectImgVb(u,this._clipRect,e,i,n,o,l||G.DEF_UV,r||this._curMat,this._x,this._y,0,0)){this._renderKey=0;this._shader2D.glTexture=null;this._curSubmit.shaderValue;var c=this._curSubmit=ct.create(this,this._ib,u,(u._byteLength-64)/32*3,s,a);c.blendType=-1==h?this._nBlendType:h,c.scope=t,this._submits[this._submits._length++]=c,this._curSubmit._numEle+=6}},s.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)},s._mixRGBandAlpha=function(t,e){var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24},s.drawTriangles=function(t,n,o,r,a,s,l,h,u,c){if(!t.loaded||!t.source)return this.sprite&&i.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;t.bitmap;var d=this._mixRGBandAlpha(4294967295,h),p=(r.length,s.length);this._renderKey=-1;var f=this._curSubmit=Nt.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,St.create(1,0));return f.shaderValue.textureHost=t,f._renderType=10016,this._submits[this._submits._length++]=f,l?(e._tmpMatrix.a=l.a,e._tmpMatrix.b=l.b,e._tmpMatrix.c=l.c,e._tmpMatrix.d=l.d,e._tmpMatrix.tx=l.tx+n,e._tmpMatrix.ty=l.ty+o,I.mul(e._tmpMatrix,this._curMat,e._tmpMatrix)):(e._tmpMatrix.a=this._curMat.a,e._tmpMatrix.b=this._curMat.b,e._tmpMatrix.c=this._curMat.c,e._tmpMatrix.d=this._curMat.d,e._tmpMatrix.tx=this._curMat.tx+n,e._tmpMatrix.ty=this._curMat.ty+o),this._triangleMesh.addData(r,a,s,e._tmpMatrix,d,this),this._curSubmit._numEle+=p,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},s.transform=function(t,e,i,n,o,r){J.save(this),I.mul(I.TEMP.setTo(t,e,i,n,o,r),this._curMat,this._curMat),this._curMat._checkTransform()},s.setTransformByMatrix=function(t){t.copyTo(this._curMat)},s.transformByMatrix=function(t){J.save(this),I.mul(t,this._curMat,this._curMat),this._curMat._checkTransform()},s.rotate=function(t){J.save(this),this._curMat.rotateEx(t)},s.scale=function(t,e){J.save(this),this._curMat.scaleEx(t,e)},s.clipRect=function(t,e,i,n){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var o=ut.create(4);this.addRenderObject(o);var r=this._vb,a=r._byteLength>>2;if(_t.fillRectImgVb(r,null,t,e,i,n,G.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var s=this._curSubmit=rt.createSubmit(this,this._ib,r,(r._byteLength-64)/32*3,St.create(2,0));s.shaderValue.ALPHA=1,this._submits[this._submits._length++]=s,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var l=ut.create(5);this.addRenderObject(l);var h=r.getFloat32Array(),u=Math.min(Math.min(Math.min(h[a+0],h[a+4]),h[a+8]),h[a+12]),c=Math.max(Math.max(Math.max(h[a+0],h[a+4]),h[a+8]),h[a+12]),d=Math.min(Math.min(Math.min(h[a+1],h[a+5]),h[a+9]),h[a+13]),p=Math.max(Math.max(Math.max(h[a+1],h[a+5]),h[a+9]),h[a+13]);z.save(this,l,t,e,i,n,u,d,c-u,p-d),this._curSubmit=rt.RENDERBASE}else{i*=this._curMat.a,n*=this._curMat.d;var f=w.TEMP;this._curMat.transformPoint(f.setTo(t,e)),i<0&&(f.x=f.x+i,i=-i),n<0&&(f.y=f.y+n,n=-n),this._renderKey=0;var g=this._curSubmit=ht.create(this);this._submits[this._submits._length++]=g,g.submitIndex=this._submits._length,g.submitLength=9999999,Y.save(this,g);var _=this._clipRect,m=_.x,y=_.y,v=f.x+i,I=f.y+n;m<f.x&&(_.x=f.x),y<f.y&&(_.y=f.y),_.width=Math.min(v,m+_.width)-_.x,_.height=Math.min(I,y+_.height)-_.y,this._shader2D.glTexture=null,g.clipRect.copyFrom(_),this._curSubmit=rt.RENDERBASE}},s.setIBVB=function(t,e,i,n,o,r,a,s,l,h,u){if(void 0===l&&(l=0),void 0===h&&(h=0),void 0===u&&(u=0),null===i){if(C.isFlash){var c=n;c._selfIB||(c._selfIB=$t.create(35044)),c._selfIB.clear(),i=c._selfIB}else i=this._ib;_t.expandIBQuadrangle(i,n._byteLength/(4*n.vertexStride*4))}if(!s||!a)throw Error("setIBVB must input:shader shaderValues");var d=lt.create(this,n,i,o,a,s,l,h,u);r||(r=I.EMPTY),r.translate(t,e),I.mul(r,this._curMat,d._mat),r.translate(-t,-e),this._submits[this._submits._length++]=d,this._curSubmit=rt.RENDERBASE,this._renderKey=0},s.addRenderObject=function(t){this._submits[this._submits._length++]=t},s.fillTrangles=function(t,e,i,n,o){var r=this._curSubmit,a=this._vb,s=this._shader2D,l=r.shaderValue,h=n.length>>4,u=t.bitmap;this._renderKey=0,s.glTexture==u&&s.ALPHA===l.ALPHA||((r=this._curSubmit=rt.createSubmit(this,this._ib,a,a._byteLength/32*3,St.create(1,0))).shaderValue.textureHost=t,this._submits[this._submits._length++]=r),_t.fillTranglesVB(a,e,i,n,o||this._curMat,this._x,this._y),r._numEle+=6*h},s.submitElement=function(t,e){var i=this._submits;for(e<0&&(e=i._length);t<e;)t+=i[t].renderSubmit()},s.finish=function(){It.mainContext.finish()},s.flush=function(){var t=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(t>this._ib.bufferLength/12&&_t.expandIBQuadrangle(this._ib,t),!this._isMain&&W.enabled&&W._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=W._atlasRestore;for(var e=this._submits,i=0,n=e._length;i<n;i++){var o=e[i];10016===o.getRenderType()&&o.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),et.instance&&et.getInstance().reset();var r=0;for(i=0,r=this.meshlist.length;i<r;i++){var a=this.meshlist[i];a.canReuse?a.releaseMesh():a.destroy()}return this.meshlist.length=0,this._curSubmit=rt.RENDERBASE,this._renderKey=0,this._triangleMesh=Gt.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},s.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=U.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},s.movePath=function(t,e){var i=t,n=e;t=this._curMat.a*i+this._curMat.c*n+this._curMat.tx,e=this._curMat.b*i+this._curMat.d*n+this._curMat.ty,this.mX+=t,this.mY+=e},s.beginPath=function(){var t=this._getPath();t.tempArray.length=0,t.closePath=!1,this.mX=0,this.mY=0},s.closePath=function(){this._path.closePath=!0},s.fill=function(t){void 0===t&&(t=!1);var e=this._getPath();this.drawPoly(0,0,e.tempArray,this.fillStyle._color.numColor,0,0,t)},s.stroke=function(){var t=this._getPath();if(this.lineWidth>0){if(-1==this.mId)t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e=U.getInstance().shapeLineDic[this.mId];e.rebuild(t.tempArray),t.setGeomtry(e)}else U.getInstance().addLine(this.mId,t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor));t.update();var i=[this.mX,this.mY],n=rt.createShape(this,t.ib,t.vb,t.count,t.offset,St.create(4,0));n.shaderValue.ALPHA=this._shader2D.ALPHA,n.shaderValue.u_pos=i,n.shaderValue.u_mmat2=yt.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=n,this._renderKey=-1}},s.line=function(t,e,i,n,o,r){var a=this._curSubmit,s=this._vb;if(_t.fillLineVb(s,this._clipRect,t,e,i,n,o,r)){this._renderKey=0;var l=this._shader2D,h=a.shaderValue;l.strokeStyle===h.strokeStyle&&l.ALPHA===h.ALPHA||(l.glTexture=null,(a=this._curSubmit=rt.createSubmit(this,this._ib,s,(s._byteLength-64)/32*3,St.create(2,0))).shaderValue.strokeStyle=l.strokeStyle,a.shaderValue.mainID=2,a.shaderValue.ALPHA=l.ALPHA,this._submits[this._submits._length++]=a),a._numEle+=6}},s.moveTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var o=t,r=e;t=this._curMat.a*o+this._curMat.c*r,e=this._curMat.b*o+this._curMat.d*r}n.addPoint(t,e)},s.lineTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var o=t,r=e;t=this._curMat.a*o+this._curMat.c*r,e=this._curMat.b*o+this._curMat.d*r}n.addPoint(t,e)},s.drawCurves=function(t,e,i){this.setPathId(-1),this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.movePath(t,e),this.moveTo(n[0],n[1]);for(var o=2,r=n.length;o<r;)this.quadraticCurveTo(n[o++],n[o++],n[o++],n[o++]);this.stroke()},s.arcTo=function(t,i,n,o,r){if(-1==this.mId||!this.mHaveKey){var a=0,s=0,l=0,h=this._getPath();this._curMat.copyTo(e._tmpMatrix),e._tmpMatrix.tx=e._tmpMatrix.ty=0,e._tempPoint.setTo(h.getEndPointX(),h.getEndPointY()),e._tmpMatrix.invertTransformPoint(e._tempPoint);var u=e._tempPoint.x-t,c=e._tempPoint.y-i,d=Math.sqrt(u*u+c*c);if(!(d<=1e-6)){var p=u/d,f=c/d,g=n-t,_=o-i,m=g*g+_*_,y=Math.sqrt(m);if(!(y<=1e-6)){var v=g/y,I=_/y,w=p+v,b=f+I,C=Math.sqrt(w*w+b*b);if(!(C<=1e-6)){var S=w/C,x=b/C,T=Math.acos(S*p+x*f),M=Math.PI/2-T,L=(d=r/Math.tan(M))*p+t,D=d*f+i,E=Math.sqrt(d*d+r*r),R=t+S*E,P=i+x*E,N=0,G=0,A=0;if(p*I-f*v>=0){var U=(N=2*M)/e.SEGNUM;G=Math.sin(U),A=Math.cos(U)}else U=(N=2*-M)/e.SEGNUM,G=Math.sin(U),A=Math.cos(U);s=this._curMat.a*L+this._curMat.c*D,l=this._curMat.b*L+this._curMat.d*D,s==this._path.getEndPointX()&&l==this._path.getEndPointY()||h.addPoint(s,l);var k=L-R,B=D-P;for(a=0;a<e.SEGNUM;a++){var O=k*A+B*G,W=-k*G+B*A;s=O+R,l=W+P,t=this._curMat.a*s+this._curMat.c*l,l=i=this._curMat.b*s+this._curMat.d*l,(s=t)==this._path.getEndPointX()&&l==this._path.getEndPointY()||h.addPoint(s,l),k=O,B=W}}}}}},s.arc=function(t,e,i,n,o,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!0),-1!=this.mId){var s=U.getInstance().shapeDic[this.mId];if(s&&this.mHaveKey&&!s.needUpdate(this._curMat))return;t=0,e=0}var l=0,h=0,u=0,c=0,d=0,p=0,f=0,g=0;if(h=o-n,r)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;h<0;)h+=2*Math.PI;u=h/(g=i<101?Math.max(10,h*i/5):i<201?Math.max(10,h*i/20):Math.max(10,h*i/40))/2,c=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),r&&(c=-c);var _=this._getPath(),m=NaN,y=NaN;for(f=0;f<=g;f++)l=n+h*(f/g),d=t+Math.cos(l)*i,p=e+Math.sin(l)*i,a&&(m=d,y=p,d=this._curMat.a*m+this._curMat.c*y,p=this._curMat.b*m+this._curMat.d*y),d==this._path.getEndPointX()&&p==this._path.getEndPointY()||_.addPoint(d,p);d=t+Math.cos(o)*i,p=e+Math.sin(o)*i,a&&(m=d,y=p,d=this._curMat.a*m+this._curMat.c*y,p=this._curMat.b*m+this._curMat.d*y),d==this._path.getEndPointX()&&p==this._path.getEndPointY()||_.addPoint(d,p)},s.quadraticCurveTo=function(t,e,i,n){var o=l.I,r=i,a=n;i=this._curMat.a*r+this._curMat.c*a,n=this._curMat.b*r+this._curMat.d*a,r=t,a=e,t=this._curMat.a*r+this._curMat.c*a,e=this._curMat.b*r+this._curMat.d*a;for(var s=o.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),t,e,i,n],30,2),h=0,u=s.length/2;h<u;h++)this.lineTo(s[2*h],s[2*h+1],!1);this.lineTo(i,n,!1)},s.rect=function(t,e,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new X),this._other.path.rect(t,e,i,n)},s.strokeRect=function(t,e,i,n,o){var r=.5*o;this.line(t-r,e,t+i+r,e,o,this._curMat),this.line(t+i,e,t+i,e+n,o,this._curMat),this.line(t,e,t,e+n,o,this._curMat),this.line(t-r,e+n,t+i+r,e+n,o,this._curMat)},s.clip=function(){},s.drawPoly=function(t,e,i,n,o,r,a){void 0===a&&(a=!1),this._renderKey=0,this._shader2D.glTexture=null;var s=this._getPath();if(-1==this.mId)s.polygon(t,e,i,n,o||1,r);else if(this.mHaveKey){var l=U.getInstance().shapeDic[this.mId];l.setMatrix(this._curMat),l.rebuild(s.tempArray),s.setGeomtry(l)}else{var h=s.polygon(t,e,i,n,o||1,r);U.getInstance().addShape(this.mId,h),h.setMatrix(this._curMat)}s.update();var u,c=[this.mX,this.mY];if(u=rt.createShape(this,s.ib,s.vb,s.count,s.offset,St.create(4,0)),u.shaderValue.ALPHA=this._shader2D.ALPHA,u.shaderValue.u_pos=c,u.shaderValue.u_mmat2=yt.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=u,o>0){if(this.mHaveLineKey){var d=U.getInstance().shapeLineDic[this.mId];d.rebuild(s.tempArray),s.setGeomtry(d)}else U.getInstance().addShape(this.mId,s.drawLine(t,e,i,o,r));s.update(),(u=rt.createShape(this,s.ib,s.vb,s.count,s.offset,St.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,u.shaderValue.u_mmat2=yt.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=u}},s.drawParticle=function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i},s._getPath=function(){return this._path||(this._path=new X)},r(0,s,"globalCompositeOperation",function(){return F.NAMES[this._nBlendType]},function(t){var e=F.TOINT[t];null==e||this._nBlendType===e||(H.save(this,65536,this,!0),this._curSubmit=rt.RENDERBASE,this._renderKey=0,this._nBlendType=e)}),r(0,s,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(H.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=Z.create(t))}),r(0,s,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){(t=Math.floor(1e3*t)/1e3)!=this._shader2D.ALPHA&&(H.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t)}),r(0,s,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new Q),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),r(0,s,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(H.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=Z.create(t))}),r(0,s,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),H.save(this,32768,this._other,!1),this._other.textAlign=t)}),r(0,s,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),H.save(this,256,this._other,!1),this._other.lineWidth=t)}),r(0,s,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),H.save(this,16384,this._other,!1),this._other.textBaseline=t)}),r(0,s,"font",null,function(t){t!=this._other.font.toString()&&(this._other=this._other.make(),H.save(this,8,this._other,!1),this._other.font===ft.EMPTY?this._other.font=new ft(t):this._other.font.setFont(t))}),e.__init__=function(){a.DEFAULT=new a},e._tempPoint=new w,e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._RECTVBSIZE=16,e.MAXCLIPRECT=new b(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new I,e.SEGNUM=32,e._contextcount=0,n(e,["_fontTemp",function(){return this._fontTemp=new ft},"_drawStyleTemp",function(){return this._drawStyleTemp=new Z(null)}]),e.__init$=function(){a=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=ft.EMPTY}o(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=ft.EMPTY},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},e}(),St=function(t){function e(t,i){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,e.__super.call(this),this.defines=new Lt,this.position=e._POSITION,this.mainID=t,this.subID=i,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t|i,this._inClassCache=e._cache[this._cacheID],t>0&&!this._inClassCache&&(this._inClassCache=e._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}o(e,"laya.webgl.shader.d2.value.Value2D",B);var i=e.prototype;return i.setValue=function(t){},i.refresh=function(){var t=this.size;return t[0]=yt.width,t[1]=yt.height,this.alpha=this.ALPHA*yt.worldAlpha,this.mmat=yt.worldMatrix4,this},i._ShaderWithCompile=function(){return jt.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Qt.create)},i._withWorldShaderDefines=function(){var t=yt.worldShaderDefines,e=jt.sharders[this.mainID|this.defines._value|t.getValue()];if(!e){var i,n,o={};i=this.defines.toNameDic();for(n in i)o[n]="";i=t.toNameDic();for(n in i)o[n]="";e=jt.withCompile2D(0,this.mainID,o,this.mainID|this.defines._value|t.getValue(),Qt.create)}var r=yt.worldFilters;if(!r)return e;for(var a,s=r.length,l=0;l<s;l++)(a=r[l])&&a.action.setValue(this);return e},i.upload=function(){var t=yt;this.alpha=this.ALPHA*t.worldAlpha,yt.worldMatrix4!==yt.TEMPMAT4_ARRAY&&this.defines.add(128),It.shaderHighPrecision&&this.defines.add(1024);var e,i=t.worldShaderDefines?this._withWorldShaderDefines():jt.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=t.width,this.size[1]=t.height,this.mmat=t.worldMatrix4,At.activeShader!==i?(i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick2||i._make2dQuick2(),i.upload(this,e)):(i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick1||i._make2dQuick1(),i.upload(this,e))},i.setFilters=function(t){if(this.filters=t,t)for(var e,i=t.length,n=0;n<i;n++)(e=t[n])&&(this.defines.add(e.type),e.action.setValue(this))},i.clear=function(){this.defines.setValue(this.subID)},i.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.fillStyle=null,this.strokeStyle=null,this.clear()},e._initone=function(t,i){e._typeClass[t]=i,e._cache[t]=[],e._cache[t]._length=0},e.__init__=function(){e._POSITION=[2,5126,!1,4*gt.BYTES_PE,0],e._TEXCOORD=[2,5126,!1,4*gt.BYTES_PE,2*gt.BYTES_PE],e._initone(2,Ot),e._initone(4,Ft),e._initone(256,Wt),e._initone(512,Bt),e._initone(1,Vt),e._initone(65,Kt),e._initone(9,Vt)},e.create=function(t,i){var n=e._cache[t|i];return n._length?n[--n._length]:new e._typeClass[t|i](i)},e._POSITION=null,e._TEXCOORD=null,e._cache=[],e._typeClass=[],e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e}(),xt=function(t){function e(t,i){e.__super.call(this,t,i)}o(e,"laya.webgl.utils.RenderSprite3D",S);var i=e.prototype;return i.onCreate=function(t){switch(t){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},i._mask=function(t,i,n,o){var r,a,s=this._next,l=t.mask;if(l){i.ctx.save();var h=i.ctx.globalCompositeOperation,u=new b;if(u.copyFrom(l.getBounds()),u.width=Math.round(u.width),u.height=Math.round(u.height),u.x=Math.round(u.x),u.y=Math.round(u.y),u.width>0&&u.height>0){var c=t._style._tf,d=st.create();d.addValue("bounds",u),r=at.create([d,i],laya.webgl.utils.RenderSprite3D.tmpTarget),i.addRenderObject(r),l.render(i,-u.x,-u.y),r=at.create([d],laya.webgl.utils.RenderSprite3D.endTmpTarget),i.addRenderObject(r),i.ctx.save(),i.clipRect(n-c.translateX+u.x,o-c.translateY+u.y,u.width,u.height),s._fun.call(s,t,i,n,o),i.ctx.restore(),a=ut.create(6),h=i.ctx.globalCompositeOperation,a.blendMode="mask",i.addRenderObject(a),I.TEMP.identity();var p=St.create(1,0),f=G.INV_UV,g=u.width,_=u.height;(u.width<32||u.height<32)&&((f=e.tempUV)[0]=0,f[1]=0,f[2]=u.width>=32?1:u.width/32,f[3]=0,f[4]=u.width>=32?1:u.width/32,f[5]=u.height>=32?1:u.height/32,f[6]=0,f[7]=u.height>=32?1:u.height/32,u.width=u.width>=32?u.width:32,u.height=u.height>=32?u.height:32,f[1]*=-1,f[3]*=-1,f[5]*=-1,f[7]*=-1,f[1]+=1,f[3]+=1,f[5]+=1,f[7]+=1),i.ctx.drawTarget(d,n+u.x-c.translateX,o+u.y-c.translateY,g,_,I.TEMP,"tmpTarget",p,f,6),r=at.create([d],laya.webgl.utils.RenderSprite3D.recycleTarget),i.addRenderObject(r),(a=ut.create(6)).blendMode=h,i.addRenderObject(a)}i.ctx.restore()}else s._fun.call(s,t,i,n,o)},i._blend=function(t,e,i,n){var o=t._style,r=this._next;o.blendMode?(e.ctx.save(),e.ctx.globalCompositeOperation=o.blendMode,r._fun.call(r,t,e,i,n),e.ctx.restore()):r._fun.call(r,t,e,i,n)},i._transform=function(t,e,i,n){var o=t.transform,r=this._next;if(o&&r!=S.NORENDER){var a=e.ctx;t._style;o.tx=i,o.ty=n;var s=a._getTransformMatrix(),l=s.clone();I.mul(o,s,s),s._checkTransform(),o.tx=o.ty=0,r._fun.call(r,t,e,0,0),l.copyTo(s),l.destroy()}else r._fun.call(r,t,e,i,n)},e.tmpTarget=function(t,e){var i=t.getValue("bounds"),n=Ut.create(i.width,i.height);n.start(),n.clear(0,0,0,0),t.addValue("tmpTarget",n)},e.endTmpTarget=function(t){t.getValue("tmpTarget").end()},e.recycleTarget=function(t){t.getValue("tmpTarget").recycle(),t.recycle()},n(e,["tempUV",function(){return this.tempUV=new Array(8)}]),e}(),Tt=function(t){function e(){this.data=null,e.__super.call(this)}o(e,"laya.filters.webgl.ColorFilterActionGL",k);var n=e.prototype;return i.imps(n,{"laya.filters.IFilterActionGL":!0}),n.setValue=function(t){t.colorMat=this.data._mat,t.colorAlpha=this.data._alpha},n.apply3d=function(t,e,i,n,o){var r=t.getValue("bounds"),a=St.create(1,0);a.setFilters([this.data]);var s=I.TEMP;s.identity(),i.ctx.drawTarget(t,0,0,r.width,r.height,s,"src",a)},e}(),Mt=function(t){function e(t,i,n,o,r){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,e.__super.call(this,t,i,r),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new Zt,this._atlasCanvas._atlaser=this,this._atlasCanvas.width=n,this._atlasCanvas.height=o,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}o(e,"laya.webgl.atlas.Atlaser",O);var i=e.prototype;return i.computeUVinAtlasTexture=function(t,e,i,n){var o=W.atlasTextureWidth,r=W.atlasTextureHeight,a=i/o,s=n/r,l=(i+t.bitmap.width)/o,h=(n+t.bitmap.height)/r,u=t.bitmap.width/o,c=t.bitmap.height/r;t.uv=[a+e[0]*u,s+e[1]*c,l-(1-e[2])*u,s+e[3]*c,l-(1-e[4])*u,h-(1-e[5])*c,a+e[6]*u,h-(1-e[7])*c]},i.findBitmapIsExist=function(t){if(t instanceof laya.webgl.resource.WebGLImage){var e=t,i=e.url,n=this._InAtlasWebGLImagesKey[i||e.id];if(n)return n.offsetInfoID}return-1},i.addToAtlasTexture=function(t,e,i){if(t instanceof laya.webgl.resource.WebGLImage){var n=t,o=n.url;this._InAtlasWebGLImagesKey[o||n.id]={bitmap:t,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([e,i])}this._atlasCanvas.texSubImage2D(e,i,t.atlasImgData||t.atlasSource),t.clearAtlasSource()},i.addToAtlas=function(t,e,i){t._atlasID=this._inAtlasTextureKey.length;var n=t.uv.slice(),o=t.bitmap;this._inAtlasTextureKey.push(t),this._inAtlasTextureOriUVValue.push(n),this._inAtlasTextureBitmapValue.push(o),this.computeUVinAtlasTexture(t,n,e,i),t.bitmap=this._atlasCanvas},i.clear=function(){for(var t=0,e=this._inAtlasTextureKey.length;t<e;t++)this._inAtlasTextureKey[t].bitmap=this._inAtlasTextureBitmapValue[t],this._inAtlasTextureKey[t].uv=this._inAtlasTextureOriUVValue[t],this._inAtlasTextureKey[t]._atlasID=-1,this._inAtlasTextureKey[t].bitmap.lock=!1,this._inAtlasTextureKey[t].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},i.dispose=function(){this.clear(),this._atlasCanvas.destroy()},r(0,i,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),r(0,i,"texture",function(){return this._atlasCanvas}),r(0,i,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),e}(),Lt=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap)}return o(e,"laya.webgl.shader.d2.ShaderDefines2D",q),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("COLOR2D",2),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64),e.reg("WORLDMAT",128),e.reg("FILLTEXTURE",256),e.reg("FSHIGHPRECISION",1024)},e.reg=function(t,i){q._reg(t,i,e.__name2int,e.__int2name)},e.toText=function(t,e,i){return q._toText(t,e,i)},e.toInt=function(t){return q._toInt(t,e.__name2int)},e.TEXTURE2D=1,e.COLOR2D=2,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.WORLDMAT=128,e.FILLTEXTURE=256,e.SKINMESH=512,e.SHADERDEFINE_FSHIGHPRECISION=1024,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e}(),Dt=(function(t){function e(t,i,n,o,r,a,s){e.__super.call(this,t,i,n,o,40,r,a,s)}o(e,"laya.webgl.shapes.Ellipse",it)}(),function(t){function e(t,i,n,o,r){this._points=[],this.rebuild(n),e.__super.call(this,t,i,0,0,0,r,o,r,0)}o(e,"laya.webgl.shapes.Line",it);var i=e.prototype;return i.rebuild=function(t){var e=t.length;e!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(e/2-1)),this.mFloat32Array=new Float32Array(5*e)),this._points.length=0;for(var i=NaN,n=NaN,o=-1,r=-1,a=t.length/2,s=0;s<a;s++)i=t[2*s],n=t[2*s+1],(Math.abs(o-i)>.01||Math.abs(r-n)>.01)&&this._points.push(i,n),o=i,r=n},i.getData=function(t,e,i){var n=[],o=[];this.borderWidth>0&&this.createLine2(this._points,n,this.borderWidth,i,o,this._points.length/2),this.mUint16Array.set(n,0),this.mFloat32Array.set(o,0),t.append(this.mUint16Array),e.append(this.mFloat32Array)},e}()),Et=function(t){function e(t,i,n,o,r){this._points=[];for(var a=NaN,s=NaN,l=-1,h=-1,u=n.length/2-1,c=0;c<u;c++)a=n[2*c],s=n[2*c+1],(Math.abs(l-a)>.01||Math.abs(h-s)>.01)&&this._points.push(a,s),l=a,h=s;a=n[2*u],s=n[2*u+1],l=this._points[0],h=this._points[1],(Math.abs(l-a)>.01||Math.abs(h-s)>.01)&&this._points.push(a,s),e.__super.call(this,t,i,0,0,this._points.length/2,0,o,r)}o(e,"laya.webgl.shapes.LoopLine",it);var i=e.prototype;return i.getData=function(t,e,i){if(this.borderWidth>0){for(var n=this.color,o=(n>>16&255)/255,r=(n>>8&255)/255,a=(255&n)/255,s=[],l=0,h=0,u=[],c=Math.floor(this._points.length/2),d=0;d<c;d++)l=this._points[2*d],h=this._points[2*d+1],s.push(this.x+l,this.y+h,o,r,a);this.createLoopLine(s,u,this.borderWidth,i+s.length/5),t.append(new Uint16Array(u)),e.append(new Float32Array(s))}},i.createLoopLine=function(t,e,i,n,o,r){t.length;var a=t.concat(),s=o||t,l=this.borderColor,h=(l>>16&255)/255,u=(l>>8&255)/255,c=(255&l)/255,d=[a[0],a[1]],p=[a[a.length-5],a[a.length-4]],f=p[0]+.5*(d[0]-p[0]),g=p[1]+.5*(d[1]-p[1]);a.unshift(f,g,0,0,0),a.push(f,g,0,0,0);var _,m,y,v,I,w,b,C,S,x,T,M,L,D,E,R,P,N,G,A,U=a.length/5,k=n,B=i/2;y=a[0],v=a[1],x=y-(I=a[5]),S=(S=-(v-(w=a[6])))/(A=Math.sqrt(S*S+x*x))*B,x=x/A*B,s.push(y-S,v-x,h,u,c,y+S,v+x,h,u,c);for(var O=1;O<U-1;O++)y=a[5*(O-1)],v=a[5*(O-1)+1],I=a[5*O],w=a[5*O+1],b=a[5*(O+1)],C=a[5*(O+1)+1],x=y-I,M=I-b,E=(-(S=(S=-(v-w))/(A=Math.sqrt(S*S+x*x))*B)+y)*(-(x=x/A*B)+w)-(-S+I)*(-x+v),N=(-(T=(T=-(w-C))/(A=Math.sqrt(T*T+M*M))*B)+b)*(-(M=M/A*B)+w)-(-T+I)*(-M+C),G=(L=-x+v-(-x+w))*(P=-T+I-(-T+b))-(R=-M+C-(-M+w))*(D=-S+I-(-S+y)),Math.abs(G)<.1?(G+=10.1,s.push(I-S,w-x,h,u,c,I+S,w+x,h,u,c)):(((_=(D*N-P*E)/G)-I)*(_-I)+((m=(R*E-L*N)/G)-w)+(m-w),s.push(_,m,h,u,c,I-(_-I),w-(m-w),h,u,c));r&&(e=r);var W=this.edges+1;for(O=1;O<W;O++)e.push(k+2*(O-1),k+2*(O-1)+1,k+2*O+1,k+2*O+1,k+2*O,k+2*(O-1));return e.push(k+2*(O-1),k+2*(O-1)+1,k+1,k+1,k,k+2*(O-1)),s},e}(),Rt=function(t){function e(t,i,n,o,r,a){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=I.create(),this._points=n.slice(0,n.length),e.__super.call(this,t,i,0,0,this._points.length/2,o,r,a)}o(e,"laya.webgl.shapes.Polygon",it);var i=e.prototype;return i.rebuild=function(t){this._repaint||(this._points.length=0,this._points=this._points.concat(t))},i.setMatrix=function(t){t.copyTo(this._mat)},i.needUpdate=function(t){return this._repaint=this._mat.a==t.a&&this._mat.b==t.b&&this._mat.c==t.c&&this._mat.d==t.d&&this._mat.tx==t.tx&&this._mat.ty==t.ty,!this._repaint},i.getData=function(t,e,i){var n,o=0,r=this._points,a=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=i){for(this._start=i,n=[],a=this.earcutTriangles.length,o=0;o<a;o++)n.push(this.earcutTriangles[o]+i);this.mUint16Array=new Uint16Array(n)}}else{this._start=i,n=[];var s=[],l=[],h=this.color,u=(h>>16&255)/255,c=(h>>8&255)/255,d=(255&h)/255;for(a=Math.floor(r.length/2),o=0;o<a;o++)s.push(this.x+r[2*o],this.y+r[2*o+1],u,c,d),l.push(this.x+r[2*o],this.y+r[2*o+1]);for(this.earcutTriangles=nt.earcut(l,null,2),a=this.earcutTriangles.length,o=0;o<a;o++)n.push(this.earcutTriangles[o]+i);this.mUint16Array=new Uint16Array(n),this.mFloat32Array=new Float32Array(s)}t.append(this.mUint16Array),e.append(this.mFloat32Array)},e}(),Pt=function(t){function e(){this._matrix=new I,this._matrix4=gt.defaultMatrix4.concat(),e.__super.call(this,1e4),this.shaderValue=new St(0,0)}o(e,"laya.webgl.submit.SubmitCanvas",rt);var i=e.prototype;return i.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t=yt.worldAlpha,e=yt.worldMatrix4,i=yt.worldMatrix,n=yt.worldFilters,o=yt.worldShaderDefines,r=this.shaderValue,a=this._matrix,s=this._matrix4,l=I.TEMP;return I.mul(a,i,l),s[0]=l.a,s[1]=l.b,s[4]=l.c,s[5]=l.d,s[12]=l.tx,s[13]=l.ty,yt.worldMatrix=l.clone(),yt.worldMatrix4=s,yt.worldAlpha=yt.worldAlpha*r.alpha,r.filters&&r.filters.length&&(yt.worldFilters=r.filters,yt.worldShaderDefines=r.defines),this._ctx_src.flush(),yt.worldAlpha=t,yt.worldMatrix4=e,yt.worldMatrix.destroy(),yt.worldMatrix=i,yt.worldFilters=n,yt.worldShaderDefines=o,1},i.releaseRender=function(){var t=e._cache;this._ctx_src=null,t[t._length++]=this},i.getRenderType=function(){return 10003},e.create=function(t,i,n){var o=e._cache._length?e._cache[--e._cache._length]:new e;o._ctx_src=t;var r=o.shaderValue;return r.alpha=i,r.defines.setValue(0),n&&n.length&&r.setFilters(n),o},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(),Nt=function(t){function e(t){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===t&&(t=1e4),e.__super.call(this,t)}o(e,"laya.webgl.submit.SubmitTexture",rt);var i=e.prototype;return i.releaseRender=function(){var t=e._cache;t[t._length++]=this,this.shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0},i.addTexture=function(t,e){this._texsID[this._texs.length]=t._uvID,this._texs.push(t),this._vbPos.push(e)},i.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var t=this.shaderValue.textureHost.bitmap;if(null!==t)for(var e=this._vb.getFloat32Array(),i=0,n=this._texs.length;i<n;i++){var o=this._texs[i];o.active();var r=o.uv;if(this._texsID[i]!==o._uvID){this._texsID[i]=o._uvID;var a=this._vbPos[i];e[a+2]=r[0],e[a+3]=r[1],e[a+6]=r[2],e[a+7]=r[3],e[a+10]=r[4],e[a+11]=r[5],e[a+14]=r[6],e[a+15]=r[7],this._vb.setNeedUpload()}o.bitmap!==t&&(this._isSameTexture=!1)}}},i.renderSubmit=function(){if(0===this._numEle)return e._shaderSet=!1,1;var t=this.shaderValue.textureHost;if(t){var i=t.source;if(!t.bitmap||!i)return e._shaderSet=!1,1;this.shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=It.mainContext;if(F.activeBlendFunction!==this._blendFn&&(n.enable(3042),this._blendFn(n),F.activeBlendFunction=this._blendFn),E.drawCall++,E.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&At.activeShader&&e._shaderSet?At.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),e._shaderSet=!0,this._texs.length>1&&!this._isSameTexture)for(var o=t.bitmap,r=0,a=At.activeShader,s=0,l=this._texs.length;s<l;s++){var h=this._texs[s];h.bitmap===o&&s+1!==l||(a.uploadTexture2D(h.source),n.drawElements(4,6*(s-r+1),5123,this._startIdx+6*r*gt.BYTES_PIDX),o=h.bitmap,r=s)}else n.drawElements(4,this._numEle,5123,this._startIdx);return 1},e.create=function(t,i,n,o,r){var a=e._cache._length?e._cache[--e._cache._length]:new e;null==n&&((n=a._selfVb||(a._selfVb=qt.create(-1))).clear(),o=0),a._ib=i,a._vb=n,a._startIdx=o*gt.BYTES_PIDX,a._numEle=0;var s=t._nBlendType;a._blendFn=t._targets?F.targetFns[s]:F.fns[s],a.shaderValue=r,a.shaderValue.setValue(t._shader2D);var l=t._shader2D.filters;return l&&a.shaderValue.setFilters(l),a},e._cache=(e._cache=[],e._cache._length=0,e._cache),e._shaderSet=!0,e}(),Gt=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}o(e,"laya.webgl.utils.MeshTexture",mt);var i=e.prototype;return i.addData=function(t,i,n,o,r,a){for(var s=t.length/2,l=this._vb.needSize(s*e.const_stride)>>2,h=this._vb.getFloat32Array(),u=0,c=0;c<s;c++){var d=t[u],p=t[u+1],f=d*o.a+p*o.c+o.tx,g=d*o.b+p*o.d+o.ty;h[l++]=f,h[l++]=g,h[l++]=i[u],h[l++]=i[u+1],u+=2}this._vb.setNeedUpload();var _=this.vertNum;if(_>0){var m=n.length;m>e.tmpIdx.length&&(e.tmpIdx=new Uint16Array(m));for(var y=0;y<m;y++)e.tmpIdx[y]=n[y]+_;this._ib.appendU16Array(e.tmpIdx,n.length)}else this._ib.append(n);this._ib.setNeedUpload(),this.vertNum+=s,this.indexNum+=n.length},i.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},i.destroy=function(){this._ib.destroy(),this._vb.destroy()},e.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e},e.const_stride=16,e._POOL=[],n(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),e}(),At=function(t){function e(){e.__super.call(this),this.lock=!0}return o(e,"laya.webgl.shader.BaseShader",x),e.activeShader=null,e.bindShader=null,e}(),Ut=function(t){function e(t,i,n,o,r,a,s,l,h){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===h&&(h=-1),this._type=1,this._w=t,this._h=i,this._surfaceFormat=n,this._surfaceType=o,this._depthStencilFormat=r,C.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=a,this._repeat=s,this._minFifter=l,this._magFifter=h,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e.__super.call(this,this.bitmap,G.INV_UV)}o(e,"laya.webgl.resource.RenderTarget2D",t);var n=e.prototype;return i.imps(n,{"laya.resource.IDispose":!0}),n.getType=function(){return this._type},n.getTexture=function(){return this},n.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},n.release=function(){this.destroy()},n.recycle=function(){e.POOL.push(this)},n.start=function(){var t=It.mainContext;return this._preRenderTarget=yt.curRenderTarget,yt.curRenderTarget=this,t.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t.viewport(0,0,this._w,this._h),this._svWidth=yt.width,this._svHeight=yt.height,yt.width=this._w,yt.height=this._h,At.activeShader=null),this},n.clear=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1);var o=It.mainContext;o.clearColor(t,e,i,n);var r=16384;switch(this._depthStencilFormat){case 33189:r|=256;break;case 36168:r|=1024;break;case 34041:r|=256,r|=1024}o.clear(r)},n.end=function(){var t=It.mainContext;t.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,yt.curRenderTarget=this._preRenderTarget,1==this._type?(t.viewport(0,0,this._svWidth,this._svHeight),yt.width=this._svWidth,yt.height=this._svHeight,At.activeShader=null):t.viewport(0,0,i.stage.width,i.stage.height)},n.getData=function(t,e,i,n){var o=It.mainContext;o.bindFramebuffer(36160,this.bitmap.frameBuffer);if(!(36053===o.checkFramebufferStatus(36160)))return o.bindFramebuffer(36160,null),null;var r=new Uint8Array(this._w*this._h*4);return o.readPixels(t,e,i,n,this._surfaceFormat,this._surfaceType,r),o.bindFramebuffer(36160,null),r},n.destroy=function(e){void 0===e&&(e=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,t.prototype.destroy.call(this))},n.dispose=function(){},n._createWebGLRenderTarget=function(){this.bitmap=new Yt(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(t){this.event("recovered")})},r(0,n,"surfaceFormat",function(){return this._surfaceFormat}),r(0,n,"magFifter",function(){return this._magFifter}),r(0,n,"surfaceType",function(){return this._surfaceType}),r(0,n,"mipMap",function(){return this._mipMap}),r(0,n,"depthStencilFormat",function(){return this._depthStencilFormat}),r(0,n,"minFifter",function(){return this._minFifter}),r(0,n,"source",function(){return this._alreadyResolved?i.superGet(G,this,"source"):null}),e.create=function(t,i,n,o,r,a,s,l,h){void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===h&&(h=-1);var u=e.POOL.pop();return u||(u=new e(t,i)),u.bitmap&&u._w==t&&u._h==i&&u._surfaceFormat==n&&u._surfaceType==o&&u._depthStencilFormat==r&&u._mipMap==a&&u._repeat==s&&u._minFifter==l&&u._magFifter==h||(u._w=t,u._h=i,u._surfaceFormat=n,u._surfaceType=o,u._depthStencilFormat=r,C.isConchWebGL&&34041===u._depthStencilFormat&&(u._depthStencilFormat=33189),u._mipMap=a,u._repeat=s,u._minFifter=l,u._magFifter=h,u.release(),u._createWebGLRenderTarget()),u},e.TYPE2D=1,e.TYPE3D=2,e.POOL=[],e}(G),kt=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),e._gl=It.mainContext}o(e,"laya.webgl.utils.Buffer",x);var i=e.prototype;return i._bind=function(){this.activeResource(),e._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(e._bindVertexBuffer=this._glBuffer),e._gl.bindBuffer(this._bufferType,e._bindActive[this._bufferType]=this._glBuffer),At.activeShader=null)},i.recreateResource=function(){this._glBuffer||(this._glBuffer=e._gl.createBuffer()),this.completeCreate()},i.disposeResource=function(){this._glBuffer&&(It.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},r(0,i,"bufferUsage",function(){return this._bufferUsage}),e._gl=null,e._bindActive={},e._bindVertexBuffer=null,e._enableAtributes=[],e}(),Bt=function(t){function e(t){this.texcoord=null,this.offsetX=300,this.offsetY=0,e.__super.call(this,512,0);var i=8*gt.BYTES_PE;this.position=[2,5126,!1,i,0],this.texcoord=[2,5126,!1,i,2*gt.BYTES_PE],this.color=[4,5126,!1,i,4*gt.BYTES_PE]}return o(e,"laya.webgl.shader.d2.skinAnishader.SkinSV",St),e}(),Ot=function(t){function e(t){e.__super.call(this,2,0),this.color=[]}o(e,"laya.webgl.shader.d2.value.Color2dSV",St);return e.prototype.setValue=function(t){t.fillStyle&&(this.color=t.fillStyle._color._color),t.strokeStyle&&(this.color=t.strokeStyle._color._color)},e}(),Wt=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=St._TEXCOORD,e.__super.call(this,256,0)}o(e,"laya.webgl.shader.d2.value.FillTextureSV",St);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(),Vt=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=St._TEXCOORD,void 0===t&&(t=0),e.__super.call(this,1,t)}o(e,"laya.webgl.shader.d2.value.TextureSV",St);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(),Ft=function(t){function e(t){this.a_color=null,this.u_pos=[0,0],e.__super.call(this,4,0),this.position=[2,5126,!1,5*gt.BYTES_PE,0],this.a_color=[3,5126,!1,5*gt.BYTES_PE,2*gt.BYTES_PE]}return o(e,"laya.webgl.shader.d2.value.PrimitiveSV",St),e}(),Zt=function(t){function e(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e.__super.call(this)}o(e,"laya.webgl.atlas.AtlasWebGLCanvas",t);var i=e.prototype;return i.recreateResource=function(){var t=It.mainContext,e=this._source=t.createTexture(),i=wt.curBindTexTarget,n=wt.curBindTexValue;wt.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),i&&n&&wt.bindTexture(t,i,n),this.memorySize=this._w*this._h*4,this.completeCreate()},i.disposeResource=function(){this._source&&(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.texSubImage2D=function(t,e,i){if(C.isFlash){this._flashCacheImage||(this._flashCacheImage=y.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var n=i.bitmapdata;this._flashCacheImage._image.copyPixels(n,0,0,n.width,n.height,t,e),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var o=It.mainContext,r=wt.curBindTexTarget,a=wt.curBindTexValue;wt.bindTexture(o,3553,this._source),C.isConchWebGL?(i!==ConchTextCanvas&&(t-1>=0&&o.texSubImage2DEx(!0,3553,0,t-1,e,6408,5121,i),t+1<=this._w&&o.texSubImage2DEx(!0,3553,0,t+1,e,6408,5121,i),e-1>=0&&o.texSubImage2DEx(!0,3553,0,t,e-1,6408,5121,i),e+1<=this._h&&o.texSubImage2DEx(!0,3553,0,t,e+1,6408,5121,i)),o.texSubImage2DEx(!0,3553,0,t,e,6408,5121,i)):(o.pixelStorei(37441,!0),t-1>=0&&o.texSubImage2D(3553,0,t-1,e,6408,5121,i),t+1<=this._w&&o.texSubImage2D(3553,0,t+1,e,6408,5121,i),e-1>=0&&o.texSubImage2D(3553,0,t,e-1,6408,5121,i),e+1<=this._h&&o.texSubImage2D(3553,0,t,e+1,6408,5121,i),o.texSubImage2D(3553,0,t,e,6408,5121,i),o.pixelStorei(37441,!1)),r&&a&&wt.bindTexture(o,r,a)}},i.texSubImage2DPixel=function(t,e,i,n,o){var r=It.mainContext,a=wt.curBindTexTarget,s=wt.curBindTexValue;wt.bindTexture(r,3553,this._source);var l=new Uint8Array(o.data);C.isConchWebGL?r.texSubImage2DEx(!0,3553,0,t,e,i,n,6408,5121,l):(r.pixelStorei(37441,!0),r.texSubImage2D(3553,0,t,e,i,n,6408,5121,l),r.pixelStorei(37441,!1)),a&&s&&wt.bindTexture(r,a,s)},r(0,i,"width",t.prototype._$get_width,function(t){this._w=t}),r(0,i,"height",t.prototype._$get_height,function(t){this._h=t}),e}(h),Xt=function(t){function e(){this.flipY=!0,this.alwaysChange=!1,e.__super.call(this)}o(e,"laya.webgl.resource.WebGLCanvas",h);var i=e.prototype;return i.getCanvas=function(){return this._canvas},i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._canvas&&(this._canvas.height=e,this._canvas.width=t))},i.activeResource=function(t){void 0===t&&(t=!1),this._source||this.recreateResource()},i.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},i.disposeResource=function(){this._source&&!this.iscpuSource&&(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.createWebGlTexture=function(){var t=It.mainContext;this._canvas;var i=this._source=t.createTexture();this.iscpuSource=!1;var n=wt.curBindTexTarget,o=wt.curBindTexValue;wt.bindTexture(t,3553,i),t.pixelStorei(37440,this.flipY?1:0),C.isConchWebGL?t.texImage2DEx(e.premulAlpha,3553,0,6408,6408,5121,this._imgData):(e.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),e.premulAlpha&&t.pixelStorei(37441,!1)),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,n&&o&&wt.bindTexture(t,n,o)},i.reloadCanvasData=function(){var t=It.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var i=wt.curBindTexTarget,n=wt.curBindTexValue;wt.bindTexture(t,3553,this._source),C.isConchWebGL?t.texImage2DEx(e.premulAlpha,3553,0,6408,6408,5121,this._imgData):(e.premulAlpha&&t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this._imgData),e.premulAlpha&&t.pixelStorei(37441,!1)),t.pixelStorei(37440,0),i&&n&&wt.bindTexture(t,i,n)},i.texSubImage2D=function(t,e,i){var n=It.mainContext,o=wt.curBindTexTarget,r=wt.curBindTexValue;wt.bindTexture(n,3553,this._source),C.isConchWebGL?n.texSubImage2DEx(!0,3553,0,e,i,6408,5121,t._source):(n.pixelStorei(37441,!0),n.texSubImage2D(3553,0,e,i,6408,5121,t._source),n.pixelStorei(37441,!1)),o&&r&&wt.bindTexture(n,o,r)},i.toBase64=function(t,e,i){var n=null;this._canvas&&(n=this._canvas.toDataURL(t,e)),i.call(this,n)},r(0,i,"context",function(){return this._ctx}),r(0,i,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),r(0,i,"asBitmap",null,function(t){this._ctx&&(this._ctx.asBitmap=t)}),e._createContext=null,e.premulAlpha=!1,e}(),Ht=function(t){function e(t,i){this.CborderSize=12,e.__super.call(this),this.char=t,this.isSpace=" "===t,this.xs=i.scaleX,this.ys=i.scaleY,this.font=i.font.toString(),this.fontSize=i.font.size,this.fillColor=i.fillColor,this.borderColor=i.borderColor,this.lineWidth=i.lineWidth,this.underLine=i.underLine;var n,o=C.isConchApp;o?((n=ConchTextCanvas)._source=ConchTextCanvas,n._source.canvas=ConchTextCanvas):n=u.canvas.source,this.canvas=n,this._enableMerageInAtlas=!0,this._ctx=o?n:this.canvas.getContext("2d",void 0);var r=A.measureText(this.char,this.font);this.cw=r.width*this.xs,this.ch=(r.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new G(this)}o(e,"laya.webgl.resource.WebGLCharImage",h);var n=e.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n.active=function(){this.texture.active()},n.recreateResource=function(){var t=C.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),t){var i=this.fontSize;1==this.xs&&1==this.ys||(i=parseInt(i*(this.xs>this.ys?this.xs:this.ys)+""));var n="normal 100 "+this.font;n=n.replace(e._fontSizeReg,i),this.borderColor&&(n+=" 1 "+this.borderColor),this._ctx.font=n,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,N.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var o=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(o,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},n.onresize=function(t,e){this._w=t,this._h=e,this._allowMerageInAtlas=!0},n.clearAtlasSource=function(){},r(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),r(0,n,"atlasSource",function(){return this.canvas}),r(0,n,"atlasImgData",function(){return!e.canUseCanvas&&this._ctx.getImageData?this._ctx.getImageData(0,0,this._w,this._h):null}),r(0,n,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t}),e.createOneChar=function(t,i){return new e(t,i)},e.canUseCanvas=!0,e._fontSizeReg=new RegExp("\\d+(?=px)","g"),e}(),Yt=function(t){function e(t,i,n,o,r,a,s,l,h){void 0===n&&(n=6408),void 0===o&&(o=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===l&&(l=-1),void 0===h&&(h=1),e.__super.call(this),this._w=t,this._h=i,this._surfaceFormat=n,this._surfaceType=o,this._depthStencilFormat=r,C.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=a,this._repeat=s,this._minFifter=l,this._magFifter=h}o(e,"laya.webgl.resource.WebGLRenderTarget",h);var i=e.prototype;return i.recreateResource=function(){var t=It.mainContext;this._frameBuffer||(this._frameBuffer=t.createFramebuffer()),this._source||(this._source=t.createTexture());var e=wt.curBindTexTarget,i=wt.curBindTexValue;wt.bindTexture(t,3553,this._source),t.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var n=this._minFifter,o=this._magFifter,r=this._repeat?10497:33071,a=s.isPOT(this._w,this._h);if(a?(this._mipMap?-1!==n||(n=9987):-1!==n||(n=9729),-1!==o||(o=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,o),t.texParameteri(3553,10242,r),t.texParameteri(3553,10243,r),this._mipMap&&t.generateMipmap(3553)):(-1!==n||(n=9729),-1!==o||(o=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,o),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=t.createRenderbuffer()),t.bindRenderbuffer(36161,this._depthStencilBuffer),t.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:t.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}t.bindFramebuffer(36160,null),e&&i&&wt.bindTexture(t,e,i),t.bindRenderbuffer(36161,null),a&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},i.disposeResource=function(){this._frameBuffer&&(It.mainContext.deleteTexture(this._source),It.mainContext.deleteFramebuffer(this._frameBuffer),It.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},r(0,i,"depthStencilBuffer",function(){return this._depthStencilBuffer}),r(0,i,"frameBuffer",function(){return this._frameBuffer}),e}(),zt=function(t){function e(t,i,n,o,r,a,s){this.offsetX=0,this.offsetY=0,e.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=a,this.canvas=t,this._ctx=t.getContext("2d",void 0),this._w=o,this._h=r,this.offsetX=i,this.offsetY=n,this.src=s,this._enableMerageInAtlas=!0,W.enabled&&this._w<W.atlasLimitWidth&&this._h<W.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}o(e,"laya.webgl.resource.WebGLSubImage",h);var n=e.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n.size=function(t,e){this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this.canvas&&(this.canvas.height=e,this.canvas.width=t)},n.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},n.createWebGlTexture=function(){var t=It.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e=this._source=t.createTexture(),i=wt.curBindTexTarget,n=wt.curBindTexValue;wt.bindTexture(t,3553,e),C.isConchWebGL?t.texImage2DEx(!0,3553,0,6408,6408,5121,this.canvas):(t.pixelStorei(37441,!0),t.texImage2D(3553,0,6408,6408,5121,this.canvas),t.pixelStorei(37441,!1));var o=this.minFifter,r=this.magFifter,a=this.repeat?10497:33071,l=s.isPOT(this.width,this.height);l?(this.mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==r||(r=9729),t.texParameteri(3553,10240,r),t.texParameteri(3553,10241,o),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==o||(o=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,o),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&wt.bindTexture(t,i,n),this.canvas=null,l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},n.disposeResource=function(){W.enabled&&this._allowMerageInAtlas||!this._source||(It.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n.clearAtlasSource=function(){},r(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),r(0,n,"atlasSource",function(){return this.canvas}),r(0,n,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(t){this._allowMerageInAtlas=t}),e}(),jt=function(t){function e(t,i,n,o){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e.__super.call(this),!t||!i)throw"Shader Error";this._id=++e._count,this._vs=t,this._ps=i,this._nameMap=o||{},null!=n&&(e.sharders[n]=this)}o(e,"laya.webgl.shader.Shader",At);var i=e.prototype;return i.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},i.disposeResource=function(){It.mainContext.deleteShader(this._vshader),It.mainContext.deleteShader(this._pshader),It.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},i._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t=[this._vs,this._ps],i=It.mainContext;if(this._program=i.createProgram(),this._vshader=e._createShader(i,t[0],35633),this._pshader=e._createShader(i,t[1],35632),i.attachShader(this._program,this._vshader),i.attachShader(this._program,this._pshader),i.linkProgram(this._program),!C.isConchApp&&!i.getProgramParameter(this._program,35714))throw i.getProgramInfoLog(this._program);var n,o=0,r=0,a=0;for(a=C.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35721):i.getProgramParameter(this._program,35721),o=0;o<a;o++){var s=null;n={vartype:"attribute",glfun:null,ivartype:0,attrib:s=C.isConchApp?i.getActiveAttribEx(this._vs,this._ps,"",o):i.getActiveAttrib(this._program,o),location:i.getAttribLocation(this._program,s.name),name:s.name,type:s.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(n)}var l=0;for(l=C.isConchApp?i.getProgramParameterEx(this._vs,this._ps,"",35718):i.getProgramParameter(this._program,35718),o=0;o<l;o++){var h=null;h=C.isConchApp?i.getActiveUniformEx(this._vs,this._ps,"",o):i.getActiveUniform(this._program,o),(n={vartype:"uniform",glfun:null,ivartype:1,attrib:s,location:i.getUniformLocation(this._program,h.name),name:h.name,type:h.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")>0&&(n.name=n.name.substr(0,n.name.length-3),n.isArray=!0,n.location=i.getUniformLocation(this._program,n.name)),this._params.push(n)}for(o=0,r=this._params.length;o<r;o++)if(n=this._params[o],n.indexOfParams=o,n.index=1,n.value=[n.location,null],n.codename=n.name,n.name=this._nameMap[n.codename]?this._nameMap[n.codename]:n.codename,this._paramsMap[n.name]=n,n._this=this,n.uploadedValue=[],"attribute"!==n.vartype)switch(n.type){case 5124:n.fun=n.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n.fun=n.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n.fun=n.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n.fun=n.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n.fun=n.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n.fun=this._uniform_sampler2D;break;case 35680:n.fun=this._uniform_samplerCube;break;case 35676:n.glfun=i.uniformMatrix4fv,n.fun=this._uniformMatrix4fv;break;case 35670:n.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else n.fun=this._attribute}},i.getUniform=function(t){return this._paramsMap[t]},i._attribute=function(t,e){var i=It.mainContext,n=kt._enableAtributes,o=t.location;return n[o]||i.enableVertexAttribArray(o),i.vertexAttribPointer(o,e[0],e[1],e[2],e[3],e[4]+this._offset),n[o]=kt._bindVertexBuffer,1},i._uniform1f=function(t,e){var i=t.uploadedValue;return i[0]!==e?(It.mainContext.uniform1f(t.location,i[0]=e),1):0},i._uniform1fv=function(t,e){if(e.length<4){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(It.mainContext.uniform1fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return It.mainContext.uniform1fv(t.location,e),1},i._uniform_vec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(It.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_vec2v=function(t,e){if(e.length<2){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(It.mainContext.uniform2fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return It.mainContext.uniform2fv(t.location,e),1},i._uniform_vec3=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(It.mainContext.uniform3f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3v=function(t,e){return It.mainContext.uniform3fv(t.location,e),1},i._uniform_vec4=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(It.mainContext.uniform4f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4v=function(t,e){return It.mainContext.uniform4fv(t.location,e),1},i._uniformMatrix2fv=function(t,e){return It.mainContext.uniformMatrix2fv(t.location,!1,e),1},i._uniformMatrix3fv=function(t,e){return It.mainContext.uniformMatrix3fv(t.location,!1,e),1},i._uniformMatrix4fv=function(t,e){return It.mainContext.uniformMatrix4fv(t.location,!1,e),1},i._uniform1i=function(t,e){var i=t.uploadedValue;return i[0]!==e?(It.mainContext.uniform1i(t.location,i[0]=e),1):0},i._uniform1iv=function(t,e){return It.mainContext.uniform1iv(t.location,e),1},i._uniform_ivec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(It.mainContext.uniform2i(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_ivec2v=function(t,e){return It.mainContext.uniform2iv(t.location,e),1},i._uniform_vec3i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(It.mainContext.uniform3i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3vi=function(t,e){return It.mainContext.uniform3iv(t.location,e),1},i._uniform_vec4i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(It.mainContext.uniform4i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4vi=function(t,e){return It.mainContext.uniform4iv(t.location,e),1},i._uniform_sampler2D=function(t,i){var n=It.mainContext,o=t.uploadedValue;return null==o[0]?(o[0]=this._curActTexIndex,n.uniform1i(t.location,this._curActTexIndex),n.activeTexture(e._TEXTURES[this._curActTexIndex]),wt.bindTexture(n,3553,i),this._curActTexIndex++,1):(n.activeTexture(e._TEXTURES[o[0]]),wt.bindTexture(n,3553,i),0)},i._uniform_samplerCube=function(t,i){var n=It.mainContext,o=t.uploadedValue;return null==o[0]?(o[0]=this._curActTexIndex,n.uniform1i(t.location,this._curActTexIndex),n.activeTexture(e._TEXTURES[this._curActTexIndex]),wt.bindTexture(n,34067,i),this._curActTexIndex++,1):(n.activeTexture(e._TEXTURES[o[0]]),wt.bindTexture(n,34067,i),0)},i._noSetValue=function(t){console.log("no....:"+t.name)},i.uploadOne=function(t,e){this.activeResource(),wt.UseProgram(this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)},i.uploadTexture2D=function(t){E.shaderCall++;var e=It.mainContext;e.activeTexture(33984),wt.bindTexture(e,3553,t)},i.upload=function(t,e){At.activeShader=At.bindShader=this,this._lastUseFrameCount===E.loopCount||this.activeResource(),wt.UseProgram(this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;It.mainContext;for(var i,n,o=e.length,r=0,a=0;a<o;a++)null!==(n=t[(i=e[a]).name])&&(r+=i.fun.call(this,i,n));E.shaderCall+=r},i.uploadArray=function(t,e,i){At.activeShader=this,At.bindShader=this,this.activeResource(),wt.UseProgram(this._program);this._params;for(var n,o,r=0,a=e-2;a>=0;a-=2)(o=this._paramsMap[t[a]])&&null!=(n=t[a+1])&&(i&&i[o.name]&&i[o.name].bind(),r+=o.fun.call(this,o,n));E.shaderCall+=r},i.getParams=function(){return this._params},e.getShader=function(t){return e.sharders[t]},e.create=function(t,i,n,o){return new e(t,i,n,o)},e.withCompile=function(t,i,n,o){if(n&&e.sharders[n])return e.sharders[n];var r=e._preCompileShader[2e-4*t];if(!r)throw new Error("withCompile shader err!"+t);return r.createShader(i,n,o)},e.withCompile2D=function(t,i,n,o,r){if(o&&e.sharders[o])return e.sharders[o];var a=e._preCompileShader[2e-4*t+i];if(!a)throw new Error("withCompile shader err!"+t+" "+i);return a.createShader(n,o,r)},e.addInclude=function(t,e){vt.addInclude(t,e)},e.preCompile=function(t,i,n,o){var r=2e-4*t;e._preCompileShader[r]=new vt(r,i,n,o)},e.preCompile2D=function(t,i,n,o,r){var a=2e-4*t+i;e._preCompileShader[a]=new vt(a,n,o,r)},e._createShader=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),n},e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e._count=0,e._preCompileShader={},e.SHADERNAME2ID=2e-4,e.sharders=(e.sharders=[],e.sharders.length=32,e.sharders),n(e,["nameKey",function(){return this.nameKey=new R}]),e}(),Jt=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e.__super.call(this),this.lock=!0}o(e,"laya.webgl.utils.Buffer2D",t);var i=e.prototype;return i.needSize=function(t){var e=this._byteLength;if(t){var i=this._byteLength+t;i<=this._buffer.byteLength||this._resizeBuffer(i<<1,!0),this._byteLength=i}return e},i._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),E.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,kt._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),kt._gl.bufferSubData(this._bufferType,0,this._buffer)},i._bufferSubData=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._maxsize=Math.max(this._maxsize,this._byteLength),E.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,kt._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e||i){var n=this._buffer.slice(e,i);kt._gl.bufferSubData(this._bufferType,t,n)}else kt._gl.bufferSubData(this._bufferType,t,this._buffer)},i._checkArrayUse=function(){},i._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},i._bind_subUpload=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(t,e,i),!0)},i._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this.memorySize=t,e&&this._buffer&&this._buffer.byteLength>0){var i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(this._buffer),0),this._buffer=i}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this},i.append=function(t){this._upload=!0;var e,i=0;i=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+i,!0),e=new Float32Array(this._buffer,this._byteLength)),e.set(t,0),this._byteLength+=i,this._checkArrayUse()},i.appendU16Array=function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);for(var i=new Uint16Array(this._buffer,this._byteLength,e),n=0;n<e;n++)i[n]=t[n];this._byteLength+=2*e,this._checkArrayUse()},i.appendEx=function(t,e){this._upload=!0;var i=0;i=t.byteLength,this._resizeBuffer(this._byteLength+i,!0),new e(this._buffer,this._byteLength).set(t,0),this._byteLength+=i,this._checkArrayUse()},i.appendEx2=function(t,e,i,n){void 0===n&&(n=1),this._upload=!0;var o,r=0;r=i*n,this._resizeBuffer(this._byteLength+r,!0),o=new e(this._buffer,this._byteLength);var a=0;for(a=0;a<i;a++)o[a]=t[a];this._byteLength+=r,this._checkArrayUse()},i.getBuffer=function(){return this._buffer},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.upload=function(){var t=this._bind_upload();return kt._gl.bindBuffer(this._bufferType,null),kt._bindActive[this._bufferType]=null,At.activeShader=null,t},i.subUpload=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._bind_subUpload();return kt._gl.bindBuffer(this._bufferType,null),kt._bindActive[this._bufferType]=null,At.activeShader=null,n},i.disposeResource=function(){t.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},i.clear=function(){this._byteLength=0,this._upload=!0},r(0,i,"bufferLength",function(){return this._buffer.byteLength}),r(0,i,"byteLength",null,function(t){this._byteLength!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._byteLength=t)}),e.__int__=function(t){$t.QuadrangleIB=$t.create(35044),_t.fillIBQuadrangle($t.QuadrangleIB,16)},e.FLOAT32=4,e.SHORT=2,e}(kt),Kt=(function(t){function e(t){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,e.__super.call(this,9)}o(e,"laya.webgl.shader.d2.value.GlowSV",t);var i=e.prototype;i.setValue=function(e){t.prototype.setValue.call(this,e)},i.clear=function(){t.prototype.clear.call(this)}}(Vt),function(t){function e(t){e.__super.call(this,64),this.defines.add(64)}o(e,"laya.webgl.shader.d2.value.TextSV",t);var i=e.prototype;return i.release=function(){e.pool[e._length++]=this,this.clear()},i.clear=function(){t.prototype.clear.call(this)},e.create=function(){return e._length?e.pool[--e._length]:new e(null)},e.pool=[],e._length=0,e}(Vt)),Qt=function(t){function e(t,i,n,o){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,e.__super.call(this,t,i,n,o)}o(e,"laya.webgl.shader.d2.Shader2X",t);var i=e.prototype;return i.upload2dQuick1=function(t){this.upload(t,this._params2dQuick1||this._make2dQuick1())},i._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var t,e=this._params,i=0,n=e.length;i<n;i++)t=e[i],(C.isFlash||"size"!==t.name&&"position"!==t.name&&"texcoord"!==t.name)&&this._params2dQuick1.push(t)}return this._params2dQuick1},i.disposeResource=function(){t.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},i.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},i._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;i<n;i++)t=e[i],(C.isFlash||"size"!==t.name)&&this._params2dQuick2.push(t)}return this._params2dQuick2},e.create=function(t,i,n,o){return new e(t,i,n,o)},e}(jt),$t=function(t){function e(t){this._uint8Array=null,this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,C.isFlash||(this._buffer=new ArrayBuffer(8))}o(e,"laya.webgl.utils.IndexBuffer2D",Jt);var i=e.prototype;return i._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},i.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},i.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},i.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},e.QuadrangleIB=null,e.create=function(t){return void 0===t&&(t=35044),new e(t)},e}(),qt=function(t){function e(t,i){this._floatArray32=null,this._vertexStride=0,e.__super.call(this),this._vertexStride=t,this._bufferUsage=i,this._bufferType=34962,C.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}o(e,"laya.webgl.utils.VertexBuffer2D",t);var i=e.prototype;return i.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},i.bind=function(t){t&&t._bind(),this._bind()},i.insertData=function(t,e){this.getFloat32Array().set(t,e),this._upload=!0},i.bind_upload=function(t){t._bind_upload()||t._bind(),this._bind_upload()||this._bind()},i._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},i.disposeResource=function(){return void t.prototype.disposeResource.call(this)},i.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},r(0,i,"vertexStride",function(){return this._vertexStride}),e.create=function(t,i){return void 0===i&&(i=35048),new e(t,i)},e}(Jt),te=function(t){function e(t,i,n,o){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,this.magFifter=0,void 0===n&&(n=6408),void 0===o&&(o=!0),e.__super.call(this,t,i),this._format=n,this._mipmap=o,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof t)this._url=t,this._src=t,this._image=new u.window.Image,i&&(i.onload&&(this.onload=i.onload),i.onerror&&(this.onerror=i.onerror),i.onCreate&&i.onCreate(this)),this._image.crossOrigin=t&&0==t.indexOf("data:")?null:"",t&&(this._image.src=t);else if(t instanceof ArrayBuffer){this._src=i,this._url=this._src;var r=new c(t);r.readUTFBytes(4),r.readUTFBytes(2),r.getInt16();r.endian="bigEndian",this._w=r.getInt16(),this._h=r.getInt16();r.getInt16(),r.getInt16();this._image=new Uint8Array(t,r.pos),this._format=It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,W.enabled&&this._w<W.atlasLimitWidth&&this._h<W.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else this._src=i,this._url=this._src,this._image=t.source||t,this.onresize();this._$5__enableMerageInAtlas=!0}o(e,"laya.webgl.resource.WebGLImage",y);var n=e.prototype;return i.imps(n,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n._init_=function(t,e){},n._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var t=It.mainContext,e=this._source=t.createTexture(),i=wt.curBindTexTarget,n=wt.curBindTexValue;if(wt.bindTexture(t,3553,e),C.isConchWebGL)switch(this._format){case 6408:t.texImage2DEx(!0,3553,0,this._format,6408,5121,this._image);break;case It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}else{switch(t.pixelStorei(37441,!0),this._format){case 6408:t.texImage2D(3553,0,this._format,6408,5121,this._image);break;case It.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image)}t.pixelStorei(37441,!1)}var o=this.minFifter,r=this.magFifter,a=this.repeat?10497:33071,l=s.isPOT(this._w,this._h);l?(this.mipmap?-1!==o||(o=9987):-1!==o||(o=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,o),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==o||(o=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,o),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&wt.bindTexture(t,i,n),this._image.onload=null,this._image=null,l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1},n.recreateResource=function(){var t=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var e=this;this._image=new u.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(e._needReleaseAgain)return e._needReleaseAgain=!1,e._image.onload=null,void(e._image=null);e._allowMerageInAtlas&&e._enableMerageInAtlas?(t.memorySize=0,t._recreateLock=!1):e._createWebGlTexture(),e.completeCreate()},this._image.src=this._src}},n.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(It.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},n.onresize=function(){this._w=this._image.width,this._h=this._image.height,W.enabled&&this._w<W.atlasLimitWidth&&this._h<W.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},n.clearAtlasSource=function(){this._image=null},r(0,n,"format",function(){return this._format}),r(0,n,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(t){this._$5__enableMerageInAtlas=t}),r(0,n,"mipmap",function(){return this._mipmap}),r(0,n,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),r(0,n,"atlasSource",function(){return this._image}),r(0,n,"onload",null,function(t){var e=this;this._onload=t,this._image&&(this._image.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),r(0,n,"onerror",null,function(t){var e=this;this._onerror=t,this._image&&(this._image.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e}();i.__init([pt,O,Ct,vt])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=i.__newvec,s=laya.maths.Bezier,l=laya.utils.Browser,h=laya.utils.Byte,u=(laya.events.Event,laya.events.EventDispatcher),c=laya.display.Graphics,d=laya.resource.HTMLCanvas,p=laya.utils.Handler,f=laya.net.Loader,g=laya.maths.MathUtil,_=laya.maths.Matrix,m=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle),y=laya.renders.Render,v=(laya.renders.RenderContext,laya.resource.Resource),I=laya.utils.RunDriver,w=laya.display.Sprite,b=laya.utils.Stat,C=laya.resource.Texture,S=(laya.net.URL,laya.utils.Utils),x=function(){function t(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return o(t,"laya.ani.AnimationContent"),t}(),T=function(){function t(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return o(t,"laya.ani.AnimationNodeContent"),t}(),M=function(){function t(){}return o(t,"laya.ani.AnimationParser01"),t.parse=function(t,e){var i=e.__getBuffer(),n=0,o=0,r=0,a=0,s=0,l=0,u=0,c=e.readUTFString();t._aniClassName=c;var d,p=e.readUTFString().split("\n"),f=e.getUint8(),g=e.getUint32(),_=e.getUint32();g>0&&(d=i.slice(g,_));var m=new h(d);for(_>0&&(t._publicExtData=i.slice(_,i.byteLength)),t._useParent=!!e.getUint8(),t._anis.length=f,n=0;n<f;n++){var y=t._anis[n]=new x;y.nodes=new Array;var v=y.name=p[e.getUint16()];t._aniMap[v]=n,y.bone3DMap={},y.playTime=e.getFloat32();var I=y.nodes.length=e.getUint8();for(y.totalKeyframeDatasLength=0,o=0;o<I;o++){var w=y.nodes[o]=new T;w.childs=[];var b=e.getInt16();b>=0&&(w.name=p[b],y.bone3DMap[w.name]=o),w.keyFrame=new Array,w.parentIndex=e.getInt16(),-1==w.parentIndex?w.parent=null:w.parent=y.nodes[w.parentIndex],w.lerpType=e.getUint8();var C=e.getUint32();m.pos=C;var S=w.keyframeWidth=m.getUint16();if(y.totalKeyframeDatasLength+=S,0===w.lerpType||1===w.lerpType)for(w.interpolationMethod=[],w.interpolationMethod.length=S,r=0;r<S;r++)w.interpolationMethod[r]=et.interpolation[m.getUint8()];null!=w.parent&&w.parent.childs.push(w);var M=e.getUint16();M>0&&(w.extenData=i.slice(e.pos,e.pos+M),e.pos+=M);var L=e.getUint16();w.keyFrame.length=L;var D,E=0;for(r=0,a=L;r<a;r++){if(D=w.keyFrame[r]=new K,D.duration=e.getFloat32(),D.startTime=E,2===w.lerpType){D.interpolationData=[];var R=e.getUint8(),P=0;switch(P=e.getFloat32()){case 254:for(D.interpolationData.length=S,u=0;u<S;u++)D.interpolationData[u]=0;break;case 255:for(D.interpolationData.length=S,u=0;u<S;u++)D.interpolationData[u]=5;break;default:for(D.interpolationData.push(P),l=1;l<R;l++)D.interpolationData.push(e.getFloat32())}}for(D.data=new Float32Array(S),s=0;s<S;s++)D.data[s]=e.getFloat32(),D.data[s]>-1e-8&&D.data[s]<1e-8&&(D.data[s]=0);E+=D.duration}D.startTime=y.playTime,w.playTime=y.playTime,t._calculateKeyFrame(w,L,S)}}},t}(),L=function(){function t(){}return o(t,"laya.ani.AnimationParser02"),t.READ_DATA=function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32()},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._reader.getUint16(),i=t._BLOCK.blockStarts=[],n=t._BLOCK.blockLengths=[],o=0;o<e;o++)i.push(t._reader.getUint32()),n.push(t._reader.getUint32())},t.READ_STRINGS=function(){var e=t._reader.getUint32(),i=t._reader.getUint16(),n=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var o=0;o<i;o++)t._strings[o]=t._reader.readUTFString();t._reader.pos=n},t.parse=function(e,i){t._templet=e,t._reader=i;i.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var n=0,o=t._BLOCK.count;n<o;n++){var r=i.getUint16(),a=t._strings[r],s=t["READ_"+a];if(null==s)throw new Error("model file err,no this function:"+r+" "+a);s.call()}},t.READ_ANIMATIONS=function(){var e=t._reader,i=e.__getBuffer(),n=0,o=0,r=0,a=0,s=e.getUint16(),l=[];for(l.length=s,n=0;n<s;n++)l[n]=et.interpolation[e.getByte()];var h=e.getUint8();for(t._templet._anis.length=h,n=0;n<h;n++){var u=t._templet._anis[n]={};u.nodes=new Array;var c=u.name=t._strings[e.getUint16()];t._templet._aniMap[c]=n,u.bone3DMap={},u.playTime=e.getFloat32();var d=u.nodes.length=e.getInt16();for(u.totalKeyframeDatasLength=0,o=0;o<d;o++){var p=u.nodes[o]={};p.keyframeWidth=s,p.childs=[];var f=e.getUint16();f>=0&&(p.name=t._strings[f],u.bone3DMap[p.name]=o),p.keyFrame=new Array,p.parentIndex=e.getInt16(),-1==p.parentIndex?p.parent=null:p.parent=u.nodes[p.parentIndex],u.totalKeyframeDatasLength+=s,p.interpolationMethod=l,null!=p.parent&&p.parent.childs.push(p);var g=e.getUint16();p.keyFrame.length=g;var _=null,m=null;for(r=0,a=g;r<a;r++){(_=p.keyFrame[r]={}).startTime=e.getFloat32(),m&&(m.duration=_.startTime-m.startTime);var y=t._DATA.offset,v=e.getUint32(),I=4*s,w=i.slice(y+v,y+v+I);_.data=new Float32Array(w),m=_}_.duration=0,p.playTime=u.playTime,t._templet._calculateKeyFrame(p,g,s)}}},t._templet=null,t._reader=null,t._strings=[],n(t,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),t}(),D=(function(){function t(){}o(t,"laya.ani.AnimationState"),t.stopped=0,t.paused=1,t.playing=2}(),function(){function t(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new j,this.resultMatrix=new _,this._children=[]}o(t,"laya.ani.bone.Bone");var e=t.prototype;return e.setTempMatrix=function(t){this._tempMatrix=t;var e=0,i=0;for(e=0,i=this._children.length;e<i;e++)this._children[e].setTempMatrix(this._tempMatrix)},e.update=function(t){this.rotation=this.transform.skX;var e;if(t)e=this.resultTransform.getMatrix(),_.mul(e,t,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)e=this.resultTransform.getMatrix(),_.mul(e,this.parentBone.resultMatrix,this.resultMatrix);else{var i=this.parentBone,n=NaN,o=NaN,r=NaN,a=this.parentBone.resultMatrix;e=this.resultTransform.getMatrix();var s=a.a*e.tx+a.c*e.ty+a.tx,l=a.b*e.tx+a.d*e.ty+a.ty,h=new _;this.inheritRotation?(n=Math.atan2(i.resultMatrix.b,i.resultMatrix.a),o=Math.cos(n),r=Math.sin(n),h.setTo(o,r,-r,o,0,0),_.mul(this._tempMatrix,h,_.TEMP),_.TEMP.copyTo(h),e=this.resultTransform.getMatrix(),_.mul(e,h,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI),this.resultMatrix.tx=s,this.resultMatrix.ty=l):(this.inheritScale,e=this.resultTransform.getMatrix(),_.TEMP.identity(),_.TEMP.d=this.d,_.mul(e,_.TEMP,this.resultMatrix),this.resultMatrix.tx=s,this.resultMatrix.ty=l)}else(e=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var u=0,c=0;for(u=0,c=this._children.length;u<c;u++)this._children[u].update()},e.updateChild=function(){var t=0,e=0;for(t=0,e=this._children.length;t<e;t++)this._children[t].update()},e.setRotation=function(t){this._sprite&&(this._sprite.rotation=180*t/Math.PI)},e.updateDraw=function(e,n){t.ShowBones&&!t.ShowBones[this.name]||(this._sprite?(this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=n+this.resultMatrix.ty):(this._sprite=new w,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),i.stage.addChild(this._sprite),this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=n+this.resultMatrix.ty));var o=0,r=0;for(o=0,r=this._children.length;o<r;o++)this._children[o].updateDraw(e,n)},e.addChild=function(t){this._children.push(t),t.parentBone=this},e.findBone=function(t){if(this.name==t)return this;var e,i,n=0,o=0;for(n=0,o=this._children.length;n<o;n++)if(e=this._children[n],i=e.findBone(t))return i;return null},e.localToWorld=function(t){var e=t[0],i=t[1];t[0]=e*this.resultMatrix.a+i*this.resultMatrix.c+this.resultMatrix.tx,t[1]=e*this.resultMatrix.b+i*this.resultMatrix.d+this.resultMatrix.ty},t.ShowBones={},t}()),E=function(){function t(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}o(t,"laya.ani.bone.BoneSlot");var e=t.prototype;return e.showSlotData=function(t,e){void 0===e&&(e=!0),this.currSlotData=t,e&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},e.showDisplayByName=function(t){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(t))},e.replaceDisplayByName=function(t,e){if(this.currSlotData){var i=0;i=this.currSlotData.getDisplayByName(t);var n=0;n=this.currSlotData.getDisplayByName(e),this.replaceDisplayByIndex(i,n)}},e.replaceDisplayByIndex=function(t,e){this.currSlotData&&(this._replaceDic[t]=e,this.displayIndex==t&&this.showDisplayByIndex(t))},e.showDisplayByIndex=function(t){if(null!=this._replaceDic[t]&&(t=this._replaceDic[t]),this.currSlotData&&t>-1&&t<this.currSlotData.displayArr.length){if(this.displayIndex=t,this.currDisplayData=this.currSlotData.displayArr[t],this.currDisplayData){var e=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!y.isConchApp||y.isConchApp&&w.RUNTIMEVERION>"0.9.15")&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},e.replaceSkin=function(t){this._diyTexture=t,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},e.setParentMatrix=function(t){this._parentMatrix=t},e.draw=function(e,i,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var r=this.currTexture;this._diyTexture&&(r=this._diyTexture);var a;switch(this.currDisplayData.type){case 0:if(e){var s=this.getDisplayMatrix();if(this._parentMatrix){var l=!1;if(s){_.mul(s,this._parentMatrix,_.TEMP);var h;if(n?(null==this._resultMatrix&&(this._resultMatrix=new _),h=this._resultMatrix):h=new _,!y.isWebGL&&this.currDisplayData.uvs||y.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var u=t._tempMatrix;u.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(u.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(l=!0,u.rotate(-Math.PI/2)),_.mul(u,_.TEMP,h)}else _.TEMP.copyTo(h);l?e.drawTexture(r,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,h):e.drawTexture(r,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,h)}}}break;case 1:if(n?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),a=this._skinSprite):a=t.createSkinMesh(),null==a)return;var c;if(null==this.currDisplayData.bones){var d=this.currDisplayData.weights;this.deformData&&(d=this.deformData);var p;this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),p=this._curDiyUV):p=this.currDisplayData.uvs,this._mVerticleArr=d;this.currDisplayData.triangles.length;c=this.currDisplayData.triangles,a.init2(r,null,c,this._mVerticleArr,p);var f=this.getDisplayMatrix();if(this._parentMatrix&&f){_.mul(f,this._parentMatrix,_.TEMP);var g;n?(null==this._resultMatrix&&(this._resultMatrix=new _),g=this._resultMatrix):g=new _,_.TEMP.copyTo(g),a.transform=g}}else this.skinMesh(i,a,o);e.drawSkin(a);break;case 2:if(n?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),a=this._skinSprite):a=t.createSkinMesh(),null==a)return;this.skinMesh(i,a,o),e.drawSkin(a)}}},e.skinMesh=function(t,e,i){var n,o=this.currTexture,r=this.currDisplayData.bones;this._diyTexture?(o=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),n=this._curDiyUV):n=this.currDisplayData.uvs;var a,s,l=this.currDisplayData.weights,h=this.currDisplayData.triangles,u=0,c=0,d=0,p=NaN,f=NaN,g=0,_=0,m=[],y=0,v=0;if(this.deformData&&this.deformData.length>0){var I=0;for(y=0,v=r.length;y<v;){for(d=r[y++]+y,u=0,c=0;y<d;y++)s=t[r[y]],p=l[g]+this.deformData[I++],f=l[g+1]+this.deformData[I++],_=l[g+2],u+=(p*s.a+f*s.c+s.tx)*_,c+=(p*s.b+f*s.d+s.ty)*_,g+=3;m.push(u,c)}}else for(y=0,v=r.length;y<v;){for(d=r[y++]+y,u=0,c=0;y<d;y++)s=t[r[y]],p=l[g],f=l[g+1],_=l[g+2],u+=(p*s.a+f*s.c+s.tx)*_,c+=(p*s.b+f*s.d+s.ty)*_,g+=3;m.push(u,c)}this._mVerticleArr=m,a=h,e.init2(o,null,a,this._mVerticleArr,n)},e.drawBonePoint=function(t){t&&this._parentMatrix&&t.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},e.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},e.getMatrix=function(){return this._resultMatrix},e.copy=function(){var e=new t;return e.type="copy",e.name=this.name,e.attachmentName=this.attachmentName,e.srcDisplayIndex=this.srcDisplayIndex,e.parent=this.parent,e.displayIndex=this.displayIndex,e.templet=this.templet,e.currSlotData=this.currSlotData,e.currTexture=this.currTexture,e.currDisplayData=this.currDisplayData,e},t.createSkinMesh=function(){return y.isWebGL||y.isConchApp?I.skinAniSprite():y.isWebGL?null:nt.useSimpleMeshInCanvas?new it:new tt},n(t,["_tempMatrix",function(){return this._tempMatrix=new _}]),t}(),R=function(){function t(){this.mesh=null,this.transform=null,this.context=null,this.mode=0}o(t,"laya.ani.bone.canvasmesh.CanvasMeshRender");var e=t.prototype;return e.renderToContext=function(t){this.context=t.ctx||t,this.mesh&&(0==this.mode?this._renderWithIndexes(this.mesh):this._renderNoIndexes(this.mesh))},e._renderNoIndexes=function(t){var e=0,i=t.vertices.length/2,n=0;for(e=0;e<i-2;e++)n=2*e,this._renderDrawTriangle(t,n,n+2,n+4)},e._renderWithIndexes=function(t){var e=t.indexes,i=0,n=e.length;for(i=0;i<n;i+=3){var o=2*e[i],r=2*e[i+1],a=2*e[i+2];this._renderDrawTriangle(t,o,r,a)}},e._renderDrawTriangle=function(t,e,i,n){var o=this.context,r=t.uvs,a=t.vertices,s=t.texture,l=s.bitmap,h=l.source,u=s.width,c=s.height,d=l.width,p=l.height,f=NaN,g=NaN,_=NaN,m=NaN,y=NaN,v=NaN;if(t.useUvTransform){var I=t.uvTransform;f=(r[e]*I.a+r[e+1]*I.c+I.tx)*d,g=(r[i]*I.a+r[i+1]*I.c+I.tx)*d,_=(r[n]*I.a+r[n+1]*I.c+I.tx)*d,m=(r[e]*I.b+r[e+1]*I.d+I.ty)*p,y=(r[i]*I.b+r[i+1]*I.d+I.ty)*p,v=(r[n]*I.b+r[n+1]*I.d+I.ty)*p}else f=r[e]*d,g=r[i]*d,_=r[n]*d,m=r[e+1]*p,y=r[i+1]*p,v=r[n+1]*p;var w=a[e],b=a[i],C=a[n],S=a[e+1],x=a[i+1],T=a[n+1];if(t.canvasPadding>0){var M=t.canvasPadding,L=t.canvasPadding,D=(w+b+C)/3,E=(S+x+T)/3,R=w-D,P=S-E,N=Math.sqrt(R*R+P*P);w=D+R/N*(N+M),S=E+P/N*(N+L),P=x-E,b=D+(R=b-D)/(N=Math.sqrt(R*R+P*P))*(N+M),x=E+P/N*(N+L),P=T-E,C=D+(R=C-D)/(N=Math.sqrt(R*R+P*P))*(N+M),T=E+P/N*(N+L)}if(o.save(),this.transform){var G=this.transform;o.transform(G.a,G.b,G.c,G.d,G.tx,G.ty)}o.beginPath(),o.moveTo(w,S),o.lineTo(b,x),o.lineTo(C,T),o.closePath(),o.clip();var A=1/(f*y+m*_+g*v-y*_-m*g-f*v),U=w*y+m*C+b*v-y*C-m*b-w*v,k=f*b+w*_+g*C-b*_-w*g-f*C,B=f*y*C+m*b*_+w*g*v-w*y*_-m*g*C-f*b*v,O=S*y+m*T+x*v-y*T-m*x-S*v,W=f*x+S*_+g*T-x*_-S*g-f*T,V=f*y*T+m*x*_+S*g*v-S*y*_-m*g*T-f*x*v;o.transform(U*A,O*A,k*A,W*A,B*A,V*A),o.drawImage(h,s.uv[0]*d,s.uv[1]*p,u,c,s.uv[0]*d,s.uv[1]*p,u,c),o.restore()},t}(),P=function(){function t(){this.texture=null,this.uvs=[0,0,1,0,1,1,0,1],this.vertices=[0,0,100,0,100,100,0,100],this.indexes=[0,1,3,3,1,2],this.uvTransform=null,this.useUvTransform=!1,this.canvasPadding=1}o(t,"laya.ani.bone.canvasmesh.MeshData");return t.prototype.getBounds=function(){return m._getWrapRec(this.vertices)},t}(),N=function(){function t(){this.skinName=null,this.deformSlotDataList=[]}return o(t,"laya.ani.bone.DeformAniData"),t}(),G=function(){function t(){this.deformSlotDisplayList=[]}return o(t,"laya.ani.bone.DeformSlotData"),t}(),A=function(){function t(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}o(t,"laya.ani.bone.DeformSlotDisplayData");var e=t.prototype;return e.binarySearch1=function(t,e){var i=0,n=t.length-2;if(0==n)return 1;for(var o=n>>>1;;){if(t[Math.floor(o+1)]<=e?i=o+1:n=o,i==n)return i+1;o=i+n>>>1}return 0},e.apply=function(t,e,i){if(void 0===i&&(i=1),t+=.05,!(this.timeList.length<=0)){var n=0;if(!(t<this.timeList[0])){var o=this.vectices[0].length,r=[],a=this.binarySearch1(this.timeList,t);if(this.frameIndex=a,t>=this.timeList[this.timeList.length-1]){var s=this.vectices[this.vectices.length-1];if(i<1)for(n=0;n<o;n++)r[n]+=(s[n]-r[n])*i;else for(n=0;n<o;n++)r[n]=s[n];this.deformData=r}else{this.tweenKeyList[this.frameIndex];var l=this.vectices[this.frameIndex-1],h=this.vectices[this.frameIndex],u=this.timeList[this.frameIndex-1],c=this.timeList[this.frameIndex];i=this.tweenKeyList[a-1]?(t-u)/(c-u):0;var d=NaN;for(n=0;n<o;n++)d=l[n],r[n]=d+(h[n]-d)*i;this.deformData=r}}}},t}(),U=function(){function t(){this.time=NaN,this.drawOrder=[]}return o(t,"laya.ani.bone.DrawOrderData"),t}(),k=function(){function t(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return o(t,"laya.ani.bone.EventData"),t}(),B=function(){function t(t,e){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=t,this._targetBone=e[t.targetBoneIndex],this.isSpine=t.isSpine,null==this._bones&&(this._bones=[]),this._bones.length=0;for(var i=0,n=t.boneIndexs.length;i<n;i++)this._bones.push(e[t.boneIndexs[i]]);this.name=t.name,this.mix=t.mix,this.bendDirection=t.bendDirection}o(t,"laya.ani.bone.IkConstraint");var e=t.prototype;return e.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},e._applyIk1=function(e,i,n,o){var r=e.parentBone,a=1/(r.resultMatrix.a*r.resultMatrix.d-r.resultMatrix.b*r.resultMatrix.c),s=i-r.resultMatrix.tx,l=n-r.resultMatrix.ty,h=(s*r.resultMatrix.d-l*r.resultMatrix.c)*a-e.transform.x,u=(l*r.resultMatrix.a-s*r.resultMatrix.b)*a-e.transform.y,c=Math.atan2(u,h)*t.radDeg-0-e.transform.skX;e.transform.scX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.transform.skX=e.transform.skY=e.transform.skX+c*o,e.update()},e.updatePos=function(t,e){this._sp&&this._sp.pos(t,e)},e._applyIk2=function(e,n,o,r,a,s){if(0!=s){var l=e.resultTransform.x,h=e.resultTransform.y,u=e.transform.scX,c=e.transform.scY,d=n.transform.scX,p=0,f=0,g=0;u<0?(u=-u,p=180,g=-1):(p=0,g=1),c<0&&(c=-c,g=-g),d<0?(d=-d,f=180):f=0;var _=n.resultTransform.x,m=NaN,y=NaN,v=NaN,I=e.resultMatrix.a,b=e.resultMatrix.c,C=e.resultMatrix.b,S=e.resultMatrix.d,x=Math.abs(u-c)<=1e-4;x?(y=I*_+b*(m=n.resultTransform.y)+e.resultMatrix.tx,v=C*_+S*m+e.resultMatrix.ty):(m=0,y=I*_+e.resultMatrix.tx,v=C*_+e.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new w,i.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(o,r,15,"#ffff00"),this._sp.graphics.drawCircle(y,v,15,"#ff00ff")),e.setRotation(Math.atan2(v-e.resultMatrix.ty,y-e.resultMatrix.tx));var T=e.parentBone;I=T.resultMatrix.a,b=T.resultMatrix.c,C=T.resultMatrix.b;var M=1/(I*(S=T.resultMatrix.d)-b*C),L=o-T.resultMatrix.tx,D=r-T.resultMatrix.ty,E=(L*S-D*b)*M-l,R=(D*I-L*C)*M-h,P=((L=y-T.resultMatrix.tx)*S-(D=v-T.resultMatrix.ty)*b)*M-l,N=(D*I-L*C)*M-h,G=Math.sqrt(P*P+N*N),A=n.length*d,U=NaN,k=NaN;if(x){var B=(E*E+R*R-G*G-(A*=u)*A)/(2*G*A);B<-1?B=-1:B>1&&(B=1),k=Math.acos(B)*a,I=G+A*B,b=A*Math.sin(k),U=Math.atan2(R*I-E*b,E*I+R*b)}else{var O=(I=u*A)*I,W=(b=c*A)*b,V=E*E+R*R,F=Math.atan2(R,E),Z=-2*W*G,X=W-O;if((S=Z*Z-4*X*(C=W*G*G+O*V-O*W))>0){var H=Math.sqrt(S);Z<0&&(H=-H);var Y=(H=-(Z+H)/2)/X,z=C/H,j=Math.abs(Y)<Math.abs(z)?Y:z;j*j<=V&&(D=Math.sqrt(V-j*j)*a,U=F-Math.atan2(D,j),k=Math.atan2(D/c,(j-G)/u))}var J=0,K=Number.MAX_VALUE,Q=0,$=0,q=0,tt=0,et=0,it=0;(S=(L=G+I)*L)>tt&&(q=0,tt=S,et=L),(S=(L=G-I)*L)<K&&(J=Math.PI,K=S,Q=L);var nt=Math.acos(-I*G/(O-W));(S=(L=I*Math.cos(nt)+G)*L+(D=b*Math.sin(nt))*D)<K&&(J=nt,K=S,Q=L,$=D),S>tt&&(q=nt,tt=S,et=L,it=D),V<=(K+tt)/2?(U=F-Math.atan2($*a,Q),k=J*a):(U=F-Math.atan2(it*a,et),k=q*a)}var ot=Math.atan2(m,_)*g,rt=e.resultTransform.skX;(U=(U-ot)*t.radDeg+p-rt)>180?U-=360:U<-180&&(U+=360),e.resultTransform.x=l,e.resultTransform.y=h,e.resultTransform.skX=e.resultTransform.skY=rt+U*s,rt=n.resultTransform.skX,(k=((k+ot)*t.radDeg-0)*g+f-(rt%=360))>180?k-=360:k<-180&&(k+=360),n.resultTransform.x=_,n.resultTransform.y=m,n.resultTransform.skX=n.resultTransform.skY=n.resultTransform.skY+k*s,e.update()}},e._applyIk3=function(e,n,o,r,a,s){if(0!=s){var l=NaN,h=NaN,u=n.resultMatrix.a*n.length,c=n.resultMatrix.b*n.length,d=u*u+c*c,p=Math.sqrt(d),f=e.resultMatrix.tx,g=e.resultMatrix.ty,_=n.resultMatrix.tx,m=n.resultMatrix.ty,y=_-f,v=m-g,I=y*y+v*v,b=Math.sqrt(I),C=(y=o-e.resultMatrix.tx)*y+(v=r-e.resultMatrix.ty)*v,S=Math.sqrt(C);if(p+b<=S||S+p<=b||S+b<=p){var x=NaN;_=f+(x=p+b<=S?1:-1)*(o-f)*b/S,m=g+x*(r-g)*b/S}else{var T=(I-d+C)/(2*C),M=Math.sqrt(I-T*T*C)/S,L=f+y*T,D=g+v*T,E=-v*M,R=y*M;a>0?(_=L-E,m=D-R):(_=L+E,m=D+R)}l=_,h=m,this.isDebug&&(this._sp||(this._sp=new w,i.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(f,g,15,"#ff00ff"),this._sp.graphics.drawCircle(o,r,15,"#ffff00"),this._sp.graphics.drawCircle(l,h,15,"#ff00ff"));var P=NaN;P=Math.atan2(h-e.resultMatrix.ty,l-e.resultMatrix.tx),e.setRotation(P);var N;(N=t._tempMatrix).identity(),N.rotate(P),N.scale(e.resultMatrix.getScaleX(),e.resultMatrix.getScaleY()),N.translate(e.resultMatrix.tx,e.resultMatrix.ty),N.copyTo(e.resultMatrix),e.updateChild();var G=NaN;G=Math.atan2(r-h,o-l),n.setRotation(G);var A;(A=t._tempMatrix).identity(),A.rotate(G),A.scale(n.resultMatrix.getScaleX(),n.resultMatrix.getScaleY()),A.translate(l,h),N.copyTo(n.resultMatrix),n.updateChild()}},n(t,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new _}]),t}(),O=function(){function t(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return o(t,"laya.ani.bone.IkConstraintData"),t}(),W=function(){function t(){}return o(t,"laya.ani.bone.MeshTools"),t.findEdge=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0);var n=0,o=0,r=0;for(o=t.length,r=-1,n=0;n<o;n+=2)(r<0||i==t[r+e]<t[n+e])&&(r=n);return r},t.findBestTriangle=function(e){var i=0;i=t.findEdge(e,1,!0);var n=0;n=t.findEdge(e,1,!1);var o=0;o=t.findEdge(e,0,!0);var r=0;r=t.findEdge(e,0,!1);var a;return a=t._bestTriangle,a.length=0,a.push(o,r),a.indexOf(i)<0&&a.push(i),a.indexOf(n)<0&&a.push(n),a},t.solveMesh=function(e,i){(i=i||[]).length=0;var n;n=e.uvs;var o;o=e.vertices;var r,a,s=0,l=0,h=0;s=(a=t.findBestTriangle(n))[0],l=a[1],h=a[2],t._absArr.length=0;return t.isNormalUV(e.texture.uv)&&t.adptTexture(e),r=t.solvePoints(e.texture.uv,n[s],n[s+1],n[l]-n[s],n[l+1]-n[s+1],n[h]-n[s],n[h+1]-n[s+1],t._absArr),t.transPoints(r,o[s],o[s+1],o[l]-o[s],o[l+1]-o[s+1],o[h]-o[s],o[h+1]-o[s+1],i)},t.findWrapRect=function(e){var i=0;i=t.findEdge(e,1,!0);var n=0;n=t.findEdge(e,1,!1);var o=0;o=t.findEdge(e,0,!0);var r=0;r=t.findEdge(e,0,!1);var a=NaN;a=e[o];var s=NaN;s=e[r];var l=NaN;l=e[i+1];var h=NaN;return[s,h=e[n+1],a-s,l-h]},t.adptTexture=function(e){var i;i=t.findWrapRect(e.uvs);var n,o,r=(n=e.texture).width,a=n.height;o=C.create(n,i[0]*r,i[1]*a,i[2]*r,i[3]*a),e.texture=o},t.isNormalUV=function(t){return 0==t[0]&&0==t[1]&&1==t[4]&&1==t[5]},t.solvePoints=function(e,i,n,o,r,a,s,l){l=l||[];var h=0,u=0;u=e.length;var c;for(h=0;h<u;h+=2)c=t.solve2(e[h],e[h+1],i,n,o,r,a,s),l.push(c[0],c[1]);return l},t.transPoints=function(e,i,n,o,r,a,s,l){l=l||[];var h=0,u=0;u=e.length;for(h=0;h<u;h+=2)t.transPoint(e[h],e[h+1],i,n,o,r,a,s,l);return l},t.transPoint=function(t,e,i,n,o,r,a,s,l){var h=NaN,u=NaN;return h=i+o*t+a*e,u=n+r*t+s*e,(l=l||[]).push(h,u),l},t.solve2=function(e,i,n,o,r,a,s,l,h,u){void 0===h&&(h=!1),u=u||[];var c=NaN,d=NaN;if(0==r)return t.solve2(e,i,n,o,s,l,r,a,!0,u);var p=NaN,f=NaN;return p=e-n,f=i-o,d=(f-p*a/r)/(l-s*a/r),c=(p-d*s)/r,h?u.push(d,c):u.push(c,d),u},t.solve=function(e,i,n,o){return t.solve2(e.x,e.y,i.x,i.y,n.x,n.y,o.x,o.y)},t._bestTriangle=[],t._absArr=[],t}(),V=function(){function t(t,e){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=t,this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.bones=[];for(var i=this.data.bones,n=0,o=i.length;n<o;n++)this.bones.push(e[i[n]])}o(t,"laya.ani.bone.PathConstraint");var e=t.prototype;return e.apply=function(t,e){if(this.target){var i=this.translateMix,n=this.translateMix,o=n>0,r=this.data.spacingMode,a="length"==r,s=this.data.rotateMode,l="tangent"==s,h="chainScale"==s,u=[],c=this.bones.length,d=l?c:c+1,p=[];this._spaces=p,p[0]=this.position;var f=this.spacing;if(h||a)for(var g=0,_=d-1;g<_;){var m=this.bones[g],y=m.length,v=y*m.resultMatrix.a,I=y*m.resultMatrix.b;y=Math.sqrt(v*v+I*I),h&&(u[g]=y),p[++g]=a?Math.max(0,y+f):f}else for(g=1;g<d;g++)p[g]=f;var w=this.computeWorldPositions(this.target,t,e,d,l,"percent"==this.data.positionMode,"percent"==r);if(this._debugKey){for(g=0;g<w.length;g++)e.drawCircle(w[g++],w[g++],5,"#00ff00");var b=[];for(g=0;g<w.length;g++)b.push(w[g++],w[g++]);e.drawLines(0,0,b,"#ff0000")}var C=w[0],S=w[1],x=this.data.offsetRotation,T="chain"==s&&0==x,M=NaN;for(g=0,M=3;g<c;g++,M+=3){(m=this.bones[g]).resultMatrix.tx+=(C-m.resultMatrix.tx)*i,m.resultMatrix.ty+=(S-m.resultMatrix.ty)*i;var L=(v=w[M])-C,D=(I=w[M+1])-S;if(h&&0!=(y=u[g])){var E=(Math.sqrt(L*L+D*D)/y-1)*n+1;m.resultMatrix.a*=E,m.resultMatrix.c*=E}if(C=v,S=I,o){var R=m.resultMatrix.a,P=m.resultMatrix.c,N=m.resultMatrix.b,G=m.resultMatrix.d,A=NaN,U=NaN,k=NaN;A=l?w[M-1]:0==p[g+1]?w[M+2]:Math.atan2(D,L),A-=Math.atan2(N,R)-x/180*Math.PI,T&&(U=Math.cos(A),k=Math.sin(A),C+=((y=m.length)*(U*R-k*N)-L)*n,S+=(y*(k*R+U*N)-D)*n),A>Math.PI?A-=2*Math.PI:A<-Math.PI&&(A+=2*Math.PI),A*=n,U=Math.cos(A),k=Math.sin(A),m.resultMatrix.a=U*R-k*N,m.resultMatrix.c=U*P-k*G,m.resultMatrix.b=k*R+U*N,m.resultMatrix.d=k*P+U*G}}}},e.computeWorldVertices2=function(e,i,n,o,r,a){var s,l,h=e.currDisplayData.bones,u=e.currDisplayData.weights,c=e.currDisplayData.triangles,d=0,p=0,f=0,g=0,_=0,m=0,y=0,v=0,I=0,w=0,b=0;if(null!=h){for(d=0;d<n;d+=2)p+=(g=h[p])+1,f+=g;var C=i;for(_=a,m=3*f;_<o;_+=2){for(y=0,v=0,g=h[p++],g+=p;p<g;p++,m+=3){s=C[h[p]].resultMatrix,I=u[m],w=u[m+1];var S=u[m+2];y+=(I*s.a+w*s.c+s.tx)*S,v+=(I*s.b+w*s.d+s.ty)*S}r[_]=y,r[_+1]=v}}else{c||(c=u),e.deformData&&(c=e.deformData);var x;if(x=e.parent,i)for(b=i.length,d=0;d<b;d++)if(i[d].name==x){l=i[d];break}var T;l&&(T=l.resultMatrix),T||(T=t._tempMt);var M=T.tx,L=T.ty,D=T.a,E=T.b,R=T.c,P=T.d;for(l&&(P*=l.d),p=n,_=a;_<o;p+=2,_+=2)I=c[p],w=c[p+1],r[_]=I*D+w*E+M,r[_+1]=-(I*R+w*P+L)}},e.computeWorldPositions=function(t,e,i,n,o,r,a){t.currDisplayData.bones,t.currDisplayData.weights,t.currDisplayData.triangles;var s=[],l=0,h=t.currDisplayData.verLen,u=this.position,c=this._spaces,d=[],p=[],f=h/6,g=-1,_=NaN,m=0,y=0,v=NaN,I=NaN,w=NaN,b=NaN;if(f--,h-=4,this.computeWorldVertices2(t,e,2,h,s,0),this._debugKey)for(l=0;l<s.length;)i.drawCircle(s[l++],s[l++],10,"#ff0000");d=s,this._curves.length=f;var C=this._curves;_=0;var S=d[0],x=d[1],T=0,M=0,L=0,D=0,E=0,R=0,P=NaN,N=NaN,G=NaN,A=NaN,U=NaN,k=NaN,B=NaN,O=NaN,W=0;for(l=0,W=2;l<f;l++,W+=6)T=d[W],M=d[W+1],L=d[W+2],D=d[W+3],U=2*(P=.1875*(S-2*T+L))+(G=.09375*(3*(T-L)-S+(E=d[W+4]))),k=2*(N=.1875*(x-2*M+D))+(A=.09375*(3*(M-D)-x+(R=d[W+5]))),B=.75*(T-S)+P+.16666667*G,O=.75*(M-x)+N+.16666667*A,_+=Math.sqrt(B*B+O*O),B+=U,O+=k,U+=G,k+=A,_+=Math.sqrt(B*B+O*O),B+=U,O+=k,_+=Math.sqrt(B*B+O*O),B+=U+G,O+=k+A,_+=Math.sqrt(B*B+O*O),C[l]=_,S=E,x=R;if(r&&(u*=_),a)for(l=0;l<n;l++)c[l]*=_;var V=this._segments,F=0,Z=0;for(l=0,m=0,y=0,Z=0;l<n;l++,m+=3)if(I=c[l],u+=I,(v=u)<0)this.addBeforePosition(v,d,0,p,m);else if(v>_)this.addAfterPosition(v-_,d,h-4,p,m);else{for(;;y++)if(b=C[y],!(v>b)){0==y?v/=b:v=(v-(w=C[y-1]))/(b-w);break}if(y!=g){g=y;var X=6*y;for(S=d[X],x=d[X+1],T=d[X+2],M=d[X+3],L=d[X+4],D=d[X+5],U=2*(P=.03*(S-2*T+L))+(G=.006*(3*(T-L)-S+(E=d[X+6]))),k=2*(N=.03*(x-2*M+D))+(A=.006*(3*(M-D)-x+(R=d[X+7]))),B=.3*(T-S)+P+.16666667*G,O=.3*(M-x)+N+.16666667*A,F=Math.sqrt(B*B+O*O),V[0]=F,X=1;X<8;X++)B+=U,O+=k,U+=G,k+=A,F+=Math.sqrt(B*B+O*O),V[X]=F;B+=U,O+=k,F+=Math.sqrt(B*B+O*O),V[8]=F,B+=U+G,O+=k+A,F+=Math.sqrt(B*B+O*O),V[9]=F,Z=0}for(v*=F;;Z++)if(b=V[Z],!(v>b)){0==Z?v/=b:v=Z+(v-(w=V[Z-1]))/(b-w);break}this.addCurvePosition(.1*v,S,x,T,M,L,D,E,R,p,m,o||l>0&&0==I)}return p},e.addBeforePosition=function(t,e,i,n,o){var r=e[i],a=e[i+1],s=e[i+2]-r,l=e[i+3]-a,h=Math.atan2(l,s);n[o]=r+t*Math.cos(h),n[o+1]=a+t*Math.sin(h),n[o+2]=h},e.addAfterPosition=function(t,e,i,n,o){var r=e[i+2],a=e[i+3],s=r-e[i],l=a-e[i+1],h=Math.atan2(l,s);n[o]=r+t*Math.cos(h),n[o+1]=a+t*Math.sin(h),n[o+2]=h},e.addCurvePosition=function(t,e,i,n,o,r,a,s,l,h,u,c){0==t&&(t=1e-4);var d=t*t,p=d*t,f=1-t,g=f*f,_=g*f,m=f*t,y=3*m,v=f*y,I=y*t,w=e*_+n*v+r*I+s*p,b=i*_+o*v+a*I+l*p;h[u]=w,h[u+1]=b,h[u+2]=c?Math.atan2(b-(i*g+o*m*2+a*d),w-(e*g+n*m*2+r*d)):0},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,n(t,["_tempMt",function(){return this._tempMt=new _}]),t}(),F=function(){function t(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return o(t,"laya.ani.bone.PathConstraintData"),t}(),Z=function(){function t(){this.name=null,this.slotArr=[]}return o(t,"laya.ani.bone.SkinData"),t}(),X=function(){function t(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}o(t,"laya.ani.bone.SkinSlotDisplayData");var e=t.prototype;return e.createTexture=function(t){return this.texture?this.texture:(this.texture=new C(t.bitmap,this.uvs),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=t.height,this.texture.height=t.width,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceHeight,this.texture.sourceHeight=t.sourceWidth):(this.texture.width=t.width,this.texture.height=t.height,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceWidth,this.texture.sourceHeight=t.sourceHeight),y.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY),this.texture)},e.destory=function(){this.texture&&this.texture.destroy()},t}(),H=function(){function t(){this.name=null,this.displayArr=[]}o(t,"laya.ani.bone.SlotData");return t.prototype.getDisplayByName=function(t){for(var e=0,i=this.displayArr.length;e<i;e++)if(this.displayArr[e].attachmentName==t)return e;return-1},t}(),Y=function(){function t(t,e){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=a(2,0),this._data=t,null==this._bones&&(this._bones=[]),this.target=e[t.targetIndex];var i=0,n=0;for(i=0,n=t.boneIndexs.length;i<n;i++)this._bones.push(e[t.boneIndexs[i]]);this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix}o(t,"laya.ani.bone.TfConstraint");return t.prototype.apply=function(){for(var t,e=this.target.resultMatrix.a,i=this.target.resultMatrix.b,n=this.target.resultMatrix.c,o=this.target.resultMatrix.d,r=0,a=this._bones.length;r<a;r++){if(t=this._bones[r],this.rotateMix>0){var s=t.resultMatrix.a,l=t.resultMatrix.b,h=t.resultMatrix.c,u=t.resultMatrix.d,c=Math.atan2(n,e)-Math.atan2(h,s)+this._data.offsetRotation*Math.PI/180;c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c*=this.rotateMix;var d=Math.cos(c),p=Math.sin(c);t.resultMatrix.a=d*s-p*h,t.resultMatrix.b=d*l-p*u,t.resultMatrix.c=p*s+d*h,t.resultMatrix.d=p*l+d*u}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),t.resultMatrix.tx+=(this._temp[0]-t.resultMatrix.tx)*this.translateMix,t.resultMatrix.ty+=(this._temp[1]-t.resultMatrix.ty)*this.translateMix,t.updateChild()),this.scaleMix>0){var f=Math.sqrt(t.resultMatrix.a*t.resultMatrix.a+t.resultMatrix.c*t.resultMatrix.c),g=Math.sqrt(e*e+n*n),_=f>1e-5?(f+(g-f+this._data.offsetScaleX)*this.scaleMix)/f:0;t.resultMatrix.a*=_,t.resultMatrix.c*=_,f=Math.sqrt(t.resultMatrix.b*t.resultMatrix.b+t.resultMatrix.d*t.resultMatrix.d),g=Math.sqrt(i*i+o*o),_=f>1e-5?(f+(g-f+this._data.offsetScaleY)*this.scaleMix)/f:0,t.resultMatrix.b*=_,t.resultMatrix.d*=_}if(this.shearMix>0){l=t.resultMatrix.b,u=t.resultMatrix.d;var m=Math.atan2(u,l);(c=Math.atan2(o,i)-Math.atan2(n,e)-(m-Math.atan2(t.resultMatrix.c,t.resultMatrix.a)))>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c=m+(c+this._data.offsetShearY*Math.PI/180)*this.shearMix,_=Math.sqrt(l*l+u*u),t.resultMatrix.b=Math.cos(c)*_,t.resultMatrix.d=Math.sin(c)*_}}},t}(),z=function(){function t(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return o(t,"laya.ani.bone.TfConstraintData"),t}(),j=function(){function t(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}o(t,"laya.ani.bone.Transform");var e=t.prototype;return e.initData=function(t){void 0!=t.x&&(this.x=t.x),void 0!=t.y&&(this.y=t.y),void 0!=t.skX&&(this.skX=t.skX),void 0!=t.skY&&(this.skY=t.skY),void 0!=t.scX&&(this.scX=t.scX),void 0!=t.scY&&(this.scY=t.scY)},e.getMatrix=function(){var t;return(t=this.mMatrix?this.mMatrix:this.mMatrix=new _).identity(),t.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(t,this.skewX*Math.PI/180,this.skewY*Math.PI/180),t.rotate(this.skX*Math.PI/180),t.translate(this.x,this.y),t},e.skew=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=Math.sin(e),a=Math.cos(e);return t.setTo(t.a*a-t.b*n,t.a*r+t.b*o,t.c*a-t.d*n,t.c*r+t.d*o,t.tx*a-t.ty*n,t.tx*r+t.ty*o),t},t}(),J=function(){function t(){}return o(t,"laya.ani.bone.UVTools"),t.getRelativeUV=function(t,e,i){var n=t[0],o=t[2]-t[0],r=t[1],a=t[5]-t[1];i||(i=[]),i.length=e.length;var s=0,l=0;l=i.length;var h=1/o,u=1/a;for(s=0;s<l;s+=2)i[s]=(e[s]-n)*h,i[s+1]=(e[s+1]-r)*u;return i},t.getAbsoluteUV=function(t,e,i){if(0==t[0]&&0==t[1]&&1==t[4]&&1==t[5])return i?(S.copyArray(i,e),i):e;var n=t[0],o=t[2]-t[0],r=t[1],a=t[5]-t[1];i||(i=[]),i.length=e.length;var s=0,l=0;for(l=i.length,s=0;s<l;s+=2)i[s]=e[s]*o+n,i[s+1]=e[s+1]*a+r;return i},t}(),K=function(){function t(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return o(t,"laya.ani.KeyFramesContent"),t}(),Q=function(){function t(){}return o(t,"laya.ani.math.BezierLerp"),t.getBezierRate=function(e,i,n,o,r){var a=t._getBezierParamKey(i,n,o,r),s=100*a+e;if(t._bezierResultCache[s])return t._bezierResultCache[s];var l=t._getBezierPoints(i,n,o,r,a),h=0,u=0;for(u=l.length,h=0;h<u;h+=2)if(e<=l[h])return t._bezierResultCache[s]=l[h+1],l[h+1];return t._bezierResultCache[s]=1,1},t._getBezierParamKey=function(t,e,i,n){return 100*(100*(100*(100*t+e)+i)+n)},t._getBezierPoints=function(e,i,n,o,r){if(t._bezierPointsCache[r])return t._bezierPointsCache[r];var a;a=[0,0,e,i,n,o,1,1];var l;return l=(new s).getBezierPoints(a,100,3),t._bezierPointsCache[r]=l,l},t._bezierResultCache={},t._bezierPointsCache={},t}(),$=function(t){function e(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,e.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}o(e,"laya.ani.AnimationPlayer",u);var n=e.prototype;return i.imps(n,{"laya.resource.IDestroy":!0}),n._onTempletLoadedComputeFullKeyframeIndices=function(t,e,i){this._templet===i&&this._cachePlayRate===t&&this._cacheFrameRate===e&&this._computeFullKeyframeIndices()},n._computeFullKeyframeIndices=function(){for(var t=this._fullFrames=[],e=this._templet,i=this._cacheFrameRateInterval*this._cachePlayRate,n=0,o=e.getAnimationCount();n<o;n++){for(var r=[],a=0,s=e.getAnimation(n).nodes.length;a<s;a++){for(var l=e.getAnimation(n).nodes[a],h=Math.floor(l.playTime/i+.01),u=new Uint16Array(h+1),c=-1,d=0,p=l.keyFrame.length;d<p;d++){var f=l.keyFrame[d],g=f.startTime,_=g+f.duration+i;do{for(var m=Math.floor(g/i+.5),y=c+1;y<m;y++)u[y]=d;c=m,u[m]=d,g+=i}while(g<=_)}r.push(u)}t.push(r)}},n._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},n._calculatePlayDuration=function(){if(0!==this.state){var t=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=t),this._playEnd>t&&(this._playEnd=t),this._playDuration=this._playEnd-this._playStart}},n._setPlayParams=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e},n._setPlayParamsWhenStop=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(t/e+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e,this._currentAnimationClipIndex=-1},n._update=function(t){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var e=this._cacheFrameRateInterval*this._cachePlayRate,i=0;this._startUpdateLoopCount!==b.loopCount&&(i=t*this.playbackRate,this._elapsedPlaybackTime+=i);var n=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=n)return this._setPlayParamsWhenStop(n,e),void this.event("stopped");if(i+=this._currentTime,n>0)if(i>=n)do{if(i-=n,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(n,e),this._stopWhenCircleFinish=!1,void this.event("stopped");i<n&&(this._setPlayParams(i,e),this.event("complete"))}while(i>=n);else this._setPlayParams(i,e);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(n,e),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},n._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},n.play=function(t,e,i,n,o){if(void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=2147483647),void 0===n&&(n=0),void 0===o&&(o=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(i<0||n<0||o<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==o&&n>o)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e,this._overallDuration=i,this._playStart=n,this._playEnd=o,this._paused=!1,this._currentAnimationClipIndex=t,this._currentKeyframeIndex=0,this._startUpdateLoopCount=b.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},n.playByFrame=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=2147483647),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=30);var a=1e3/r;this.play(t,e,i,n*a,o*a)},n.stop=function(t){void 0===t&&(t=!0),t?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},r(0,n,"playEnd",function(){return this._playEnd}),r(0,n,"templet",function(){return this._templet},function(t){0===!this.state&&this.stop(!0),this._templet!==t&&(this._templet=t,t.loaded?this._computeFullKeyframeIndices():t.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),r(0,n,"playStart",function(){return this._playStart}),r(0,n,"playDuration",function(){return this._playDuration}),r(0,n,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),r(0,n,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),r(0,n,"overallDuration",function(){return this._overallDuration}),r(0,n,"currentFrameTime",function(){return this._currentFrameTime}),r(0,n,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),r(0,n,"currentPlayTime",function(){return this._currentTime+this._playStart}),r(0,n,"cachePlayRate",function(){return this._cachePlayRate},function(t){this._cachePlayRate!==t&&(this._cachePlayRate=t,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[t,this._cacheFrameRate])))}),r(0,n,"cacheFrameRate",function(){return this._cacheFrameRate},function(t){this._cacheFrameRate!==t&&(this._cacheFrameRate=t,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,t])))}),r(0,n,"currentTime",null,function(t){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(t<this._playStart||t>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=b.loopCount;var e=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e),0),this._currentFrameTime=this._currentKeyframeIndex*e}}),r(0,n,"paused",function(){return this._paused},function(t){this._paused=t,t&&this.event("paused")}),r(0,n,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),r(0,n,"destroyed",function(){return this._destroyed}),e}(),q=function(t){function e(){e.__super.call(this),y.isConchNode&&(this.drawSkin=function(t){t.transform||(t.transform=_.EMPTY),this._addCmd([t]),this.setSkinMesh&&this.setSkinMesh(t._ps,t.mVBData,t.mEleNum,0,t.mTexture,t.transform)})}o(e,"laya.ani.GraphicsAni",c);return e.prototype.drawSkin=function(t){var e=[t];this._saveToCmd(y._context._drawSkin,e)},e.create=function(){return e._caches.pop()||new e},e.recycle=function(t){t.clear(),e._caches.push(t)},e._caches=[],e}(),tt=function(t){function e(){e.__super.call(this),this.mesh=new P}o(e,"laya.ani.bone.canvasmesh.SkinMeshCanvas",R);var i=e.prototype;return i.init2=function(t,e,i,n,o){this.transform&&(this.transform=null);var r;i?r=i:(r=[]).push(0,1,3,3,1,2),this.mesh.texture=t,this.mesh.indexes=r,this.mesh.vertices=n,this.mesh.uvs=o},i.render=function(t,i,n){this.mesh.texture&&(this.transform?(this.transform.translate(i,n),this.renderToContext(t),this.transform.translate(-i,-n)):(this.transform=e._tempMatrix,this.transform.identity(),this.transform.translate(i,n),this.renderToContext(t),this.transform.translate(-i,-n),this.transform=null))},n(e,["_tempMatrix",function(){return this._tempMatrix=new _}]),e}(),et=function(t){function e(){this._aniMap={},this.unfixedLastAniIndex=-1,e.__super.call(this),this._anis=new Array}o(e,"laya.ani.AnimationTemplet",v);var n=e.prototype;return n.parse=function(t){var e=new h(t);this._aniVersion=e.readUTFString(),M.parse(this,e)},n._calculateKeyFrame=function(t,e,i){var n=t.keyFrame;n[e]=n[0];for(var o=0;o<e;o++){var r=n[o];r.nextData=0===r.duration?r.data:n[o+1].data}n.length--},n.onAsynLoaded=function(t,e,i){var n=new h(e);switch(this._aniVersion=n.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":L.parse(this,n);break;default:M.parse(this,n)}this._endLoaded()},n.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},n.getAnimationCount=function(){return this._anis.length},n.getAnimation=function(t){return this._anis[t]},n.getAniDuration=function(t){return this._anis[t].playTime},n.getNodes=function(t){return this._anis[t].nodes},n.getNodeIndexWithName=function(t,e){return this._anis[t].bone3DMap[e]},n.getNodeCount=function(t){return this._anis[t].nodes.length},n.getTotalkeyframesLength=function(t){return this._anis[t].totalKeyframeDatasLength},n.getPublicExtData=function(){return this._publicExtData},n.getAnimationDataWithCache=function(t,e,i,n){var o=e[i];if(o){var r=o[t];return r?r[n]:null}return null},n.setAnimationDataWithCache=function(t,e,i,n,o){var r=e[i]||(e[i]={});(r[t]||(r[t]=[]))[n]=o},n.getOriginalData=function(t,i,n,o,r){for(var a=this._anis[t].nodes,s=0,l=0,h=a.length,u=0;l<h;l++){var c,d=a[l];c=d.keyFrame[n[l][o]],d.dataOffset=u;var p=r-c.startTime,f=d.lerpType;if(f)switch(f){case 0:case 1:for(s=0;s<d.keyframeWidth;)s+=d.interpolationMethod[s](d,s,i,u+s,c.data,p,null,c.duration,c.nextData);break;case 2:var g=c.interpolationData,_=g.length,m=0;for(s=0;s<_;){var y=g[s];switch(y){case 6:case 7:s+=e.interpolation[y](d,m,i,u+m,c.data,p,null,c.duration,c.nextData,g,s+1);break;default:s+=e.interpolation[y](d,m,i,u+m,c.data,p,null,c.duration,c.nextData)}m++}}else for(s=0;s<d.keyframeWidth;)s+=d.interpolationMethod[s](d,s,i,u+s,c.data,p,null,c.duration,c.nextData);u+=d.keyframeWidth}},n.getNodesCurrentFrameIndex=function(t,e){var i=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(i.length),this.unfixedCurrentTimes=new Float32Array(i.length),this.unfixedLastAniIndex=t);for(var n=0,o=i.length;n<o;n++){var r=i[n];for(e<this.unfixedCurrentTimes[n]&&(this.unfixedCurrentFrameIndexes[n]=0),this.unfixedCurrentTimes[n]=e;this.unfixedCurrentFrameIndexes[n]<r.keyFrame.length&&!(r.keyFrame[this.unfixedCurrentFrameIndexes[n]].startTime>this.unfixedCurrentTimes[n]);)this.unfixedCurrentFrameIndexes[n]++;this.unfixedCurrentFrameIndexes[n]--}return this.unfixedCurrentFrameIndexes},n.getOriginalDataUnfixedRate=function(t,i,n){var o=this._anis[t].nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(o.length),this.unfixedCurrentTimes=new Float32Array(o.length),this.unfixedKeyframes=a(o.length),this.unfixedLastAniIndex=t);for(var r=0,s=0,l=o.length,h=0;s<l;s++){var u=o[s];for(n<this.unfixedCurrentTimes[s]&&(this.unfixedCurrentFrameIndexes[s]=0),this.unfixedCurrentTimes[s]=n;this.unfixedCurrentFrameIndexes[s]<u.keyFrame.length&&!(u.keyFrame[this.unfixedCurrentFrameIndexes[s]].startTime>this.unfixedCurrentTimes[s]);)this.unfixedKeyframes[s]=u.keyFrame[this.unfixedCurrentFrameIndexes[s]],this.unfixedCurrentFrameIndexes[s]++;var c=this.unfixedKeyframes[s];u.dataOffset=h;var d=n-c.startTime;if(u.lerpType)switch(u.lerpType){case 0:case 1:for(r=0;r<u.keyframeWidth;)r+=u.interpolationMethod[r](u,r,i,h+r,c.data,d,null,c.duration,c.nextData);break;case 2:var p=c.interpolationData,f=p.length,g=0;for(r=0;r<f;){var _=p[r];switch(_){case 6:case 7:r+=e.interpolation[_](u,g,i,h+g,c.data,d,null,c.duration,c.nextData,p,r+1);break;default:r+=e.interpolation[_](u,g,i,h+g,c.data,d,null,c.duration,c.nextData)}g++}}else for(r=0;r<u.keyframeWidth;)r+=u.interpolationMethod[r](u,r,i,h+r,c.data,d,null,c.duration,c.nextData);h+=u.keyframeWidth}},e._LinearInterpolation_0=function(t,e,i,n,o,r,a,s,l,h){var u=0===s?0:r/s;return i[n]=(1-u)*o[e]+u*l[e],1},e._QuaternionInterpolation_1=function(t,e,i,n,o,r,a,s,l,h){var u=0===s?0:r/s;return g.slerpQuaternionArray(o,e,l,e,u,i,n),4},e._AngleInterpolation_2=function(t,e,i,n,o,r,a,s,l,h){return 0},e._RadiansInterpolation_3=function(t,e,i,n,o,r,a,s,l,h){return 0},e._Matrix4x4Interpolation_4=function(t,e,i,n,o,r,a,s,l,h){for(var u=0;u<16;u++,e++)i[n+u]=o[e]+r*a[e];return 16},e._NoInterpolation_5=function(t,e,i,n,o,r,a,s,l,h){return i[n]=o[e],1},e._BezierInterpolation_6=function(t,e,i,n,o,r,a,s,l,h,u){return void 0===u&&(u=0),i[n]=o[e]+(l[e]-o[e])*Q.getBezierRate(r/s,h[u],h[u+1],h[u+2],h[u+3]),5},e._BezierInterpolation_7=function(t,e,i,n,o,r,a,s,l,h,u){return void 0===u&&(u=0),i[n]=h[u+4]+h[u+5]*Q.getBezierRate((.001*r+h[u+6])/h[u+7],h[u],h[u+1],h[u+2],h[u+3]),9},e.load=function(t){return i.loader.create(t,null,null,e)},e.interpolation=[e._LinearInterpolation_0,e._QuaternionInterpolation_1,e._AngleInterpolation_2,e._RadiansInterpolation_3,e._Matrix4x4Interpolation_4,e._NoInterpolation_5,e._BezierInterpolation_6,e._BezierInterpolation_7],e}(),it=(function(t){function e(){this.isCached=!1,this.canvas=null,this.tex=null,this.rec=null,e.__super.call(this)}o(e,"laya.ani.bone.canvasmesh.CacheAbleSkinMesh",tt);var i=e.prototype;i.getCanvasPic=function(){var t=new d("2D"),i=t.getContext("2d");this.rec=this.mesh.getBounds(),t.size(this.rec.width,this.rec.height);var n;return n=this.transform,this.transform=e.tempMt,this.transform.identity(),this.transform.translate(-this.rec.x,-this.rec.y),this.renderToContext(i),this.transform.translate(+this.rec.x,+this.rec.y),this.transform=n,new C(t)},i.render=function(t,e,i){this.mesh.texture&&(this.isCached||(this.isCached=!0,this.tex=this.getCanvasPic()),this.transform?(this.transform.translate(e,i),this._renderTextureToContext(t),this.transform.translate(-e,-i)):(this.transform=tt._tempMatrix,this.transform.identity(),this.transform.translate(e,i),this._renderTextureToContext(t),this.transform.translate(-e,-i),this.transform=null))},i._renderTextureToContext=function(t){this.context=t.ctx||t,t.save();var e;if(e=this.tex,this.transform){var i=this.transform;t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)}this.rec=this.mesh.getBounds(),t.translate(this.rec.x,this.rec.y),t.drawTexture(e,0,0,e.width,e.height,0,0),t.restore()},n(e,["tempMt",function(){return this.tempMt=new _}])}(),function(t){function e(){this.cacheOK=!1,this.cacheCmdOK=!1,this.transformCmds=[],this.drawCmds=[],e.__super.call(this),this.tempMesh=new P}o(e,"laya.ani.bone.canvasmesh.SimpleSkinMeshCanvas",t);var i=e.prototype;return i.init2=function(e,i,n,o,r){t.prototype.init2.call(this,e,i,n,o,r),this.cacheOK=!1,this.cacheCmdOK=!1,this.transformCmds.length=6,this.drawCmds.length=9},i.renderToContext=function(t){if(this.context=t.ctx||t,this.mesh){if(this.mesh.uvs.length<=8)return void(0==this.mode?this._renderWithIndexes(this.mesh):this._renderNoIndexes(this.mesh));this.cacheOK||(this.tempMesh.texture=this.mesh.texture,this.tempMesh.uvs=this.mesh.texture.uv,this.tempMesh.vertices=W.solveMesh(this.mesh,this.tempMesh.vertices),this.cacheOK=!0),0==this.mode?this._renderWithIndexes(this.tempMesh):this._renderNoIndexes(this.tempMesh)}},i._renderWithIndexes=function(t){if(this.cacheCmdOK)this.renderByCache(t);else{var e=t.indexes,i=0,n=e.length;for(n>1&&(n=1),i=0;i<n;i+=3){var o=2*e[i],r=2*e[i+1],a=2*e[i+2];this._renderDrawTriangle(t,o,r,a)}this.cacheCmdOK=!0}},i._renderDrawTriangle=function(t,e,i,n){var o=this.context,r=t.uvs,a=t.vertices,s=t.texture,l=s.bitmap,h=l.source,u=s.width,c=s.height,d=l.width,p=l.height,f=NaN,g=NaN,_=NaN,m=NaN,y=NaN,v=NaN;if(t.useUvTransform){var I=t.uvTransform;f=(r[e]*I.a+r[e+1]*I.c+I.tx)*d,g=(r[i]*I.a+r[i+1]*I.c+I.tx)*d,_=(r[n]*I.a+r[n+1]*I.c+I.tx)*d,m=(r[e]*I.b+r[e+1]*I.d+I.ty)*p,y=(r[i]*I.b+r[i+1]*I.d+I.ty)*p,v=(r[n]*I.b+r[n+1]*I.d+I.ty)*p}else f=r[e]*d,g=r[i]*d,_=r[n]*d,m=r[e+1]*p,y=r[i+1]*p,v=r[n+1]*p;var w=a[e],b=a[i],C=a[n],S=a[e+1],x=a[i+1],T=a[n+1],M=1/(f*y+m*_+g*v-y*_-m*g-f*v),L=w*y+m*C+b*v-y*C-m*b-w*v,D=f*b+w*_+g*C-b*_-w*g-f*C,E=f*y*C+m*b*_+w*g*v-w*y*_-m*g*C-f*b*v,R=S*y+m*T+x*v-y*T-m*x-S*v,P=f*x+S*_+g*T-x*_-S*g-f*T,N=f*y*T+m*x*_+S*g*v-S*y*_-m*g*T-f*x*v;if(this.transformCmds[0]=L*M,this.transformCmds[1]=R*M,this.transformCmds[2]=D*M,this.transformCmds[3]=P*M,this.transformCmds[4]=E*M,this.transformCmds[5]=N*M,this.drawCmds[0]=h,this.drawCmds[1]=s.uv[0]*d,this.drawCmds[2]=s.uv[1]*p,this.drawCmds[3]=u,this.drawCmds[4]=c,this.drawCmds[5]=s.uv[0]*d,this.drawCmds[6]=s.uv[1]*p,this.drawCmds[7]=u,this.drawCmds[8]=c,o.save(),this.transform){var G=this.transform;o.transform(G.a,G.b,G.c,G.d,G.tx,G.ty)}o.transform.apply(o,this.transformCmds),o.drawImage.apply(o,this.drawCmds),o.restore()},i.renderByCache=function(t){var e=this.context;if(e.save(),this.transform){var i=this.transform;e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)}e.transform.apply(e,this.transformCmds),e.drawImage.apply(e,this.drawCmds),e.restore()},e}(tt)),nt=function(t){function e(t,i){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,e.__super.call(this),void 0===i&&(i=0),t&&this.init(t,i)}o(e,"laya.ani.bone.Skeleton",t);var n=e.prototype;return n.init=function(t,e){void 0===e&&(e=0);var i=0,n=0;if(1==e)for(this._graphicsCache=[],i=0,n=t.getAnimationCount();i<n;i++)this._graphicsCache.push([]);if(this._yReverseMatrix=t.yReverseMatrix,this._aniMode=e,this._templet=t,this._player=new $,this._player.cacheFrameRate=t.rate,this._player.templet=t,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=t.mBoneArr,this._rootBone=t.mRootBone,this._aniSectionDic=t.aniSectionDic,t.ikArr.length>0)for(this._ikArr=[],i=0,n=t.ikArr.length;i<n;i++)this._ikArr.push(new B(t.ikArr[i],this._boneList));if(t.pathArr.length>0){var o,r;null==this._pathDic&&(this._pathDic={});var a;for(i=0,n=t.pathArr.length;i<n;i++)o=t.pathArr[i],r=new V(o,this._boneList),(a=this._boneSlotDic[o.name])&&((r=new V(o,this._boneList)).target=a),this._pathDic[o.name]=r}if(t.tfArr.length>0)for(this._tfArr=[],i=0,n=t.tfArr.length;i<n;i++)this._tfArr.push(new Y(t.tfArr[i],this._boneList));if(t.skinDataArray.length>0){var s=this._templet.skinDataArray[this._skinIndex];this._skinName=s.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},n.load=function(t,e,n){void 0===n&&(n=0),this._aniPath=t,this._complete=e,this._loadAniMode=n,i.loader.load([{url:t,type:"arraybuffer"}],p.create(this,this._onLoaded))},n._onLoaded=function(){var t=f.getRes(this._aniPath);if(null!=t){null==ot.TEMPLET_DICTIONARY&&(ot.TEMPLET_DICTIONARY={});var e;(e=ot.TEMPLET_DICTIONARY[this._aniPath])?e.isParseFail?this._parseFail():e.isParserComplete?this._parseComplete():(e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail)):((e=new ot)._setUrl(this._aniPath),ot.TEMPLET_DICTIONARY[this._aniPath]=e,e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail),e.isParserComplete=!1,e.parseData(null,t))}},n._parseComplete=function(){var t=ot.TEMPLET_DICTIONARY[this._aniPath];t&&(this.init(t,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},n._parseFail=function(){console.log("[Error]:"+this._aniPath+"解析失败")},n._onPlay=function(){this.event("played")},n._onStop=function(){var t,e=this._templet.eventAniArr[this._aniClipIndex];if(e&&this._eventIndex<e.length)for(;this._eventIndex<e.length;this._eventIndex++)(t=e[this._eventIndex]).time>=this._player.playStart&&t.time<=this._player.playEnd&&this.event("label",t);this._drawOrder=null,this.event("stopped")},n._onPause=function(){this.event("paused")},n._parseSrcBoneMatrix=function(){var t=0,e=0;for(e=this._templet.srcBoneMatrixArr.length,t=0;t<e;t++)this._boneMatrixArray.push(new _);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var i,n,o=this._templet.boneSlotArray;for(t=0,e=o.length;t<e;t++)i=o[t],null==(n=this._bindBoneBoneSlotDic[i.parent])&&(this._bindBoneBoneSlotDic[i.parent]=n=[]),this._boneSlotDic[i.name]=i=i.copy(),n.push(i),this._boneSlotArray.push(i)}},n._emitMissedEvents=function(t,e,i){void 0===i&&(i=0);var n=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(n){var o,r=0,a=0;for(a=n.length,r=i;r<a;r++)(o=n[r]).time>=this._player.playStart&&o.time<=this._player.playEnd&&this.event("label",o)}},n._update=function(t){if(void 0===t&&(t=!0),!(this._pause||t&&this._indexControl)){var e=this.timer.currTimer,i=this._player.currentKeyframeIndex,n=e-this._lastTime;if(t?this._player._update(n):i=-1,this._lastTime=e,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||n>0&&this._clipIndex==i&&this._lastUpdateAniClipIndex==this._aniClipIndex))){this._lastUpdateAniClipIndex=this._aniClipIndex,i>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var o,r=this._templet.eventAniArr[this._aniClipIndex];r&&this._eventIndex<r.length&&((o=r[this._eventIndex]).time>=this._player.playStart&&o.time<=this._player.playEnd?this._player.currentPlayTime>=o.time&&(this.event("label",o),this._eventIndex++):this._eventIndex++);var a;if(0==this._aniMode){if(a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=a&&(this.graphics=a));var s=0,l=0;for(l=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,l-1)&&l>0;)l--;if(l<this._clipIndex)for(s=l;s<this._clipIndex;s++)this._createGraphics(s)}else if(1==this._aniMode){if(a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=a&&(this.graphics=a));for(l=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,l-1)&&l>0;)l--;if(l<this._clipIndex)for(s=l;s<this._clipIndex;s++)this._createGraphics(s)}this._createGraphics()}}},n._createGraphics=function(t){void 0===t&&(t=-1),-1==t&&(t=this._clipIndex);var e,i=t*this._player.cacheFrameRateInterval,n=this._templet.drawOrderAniArr[this._aniClipIndex];if(n&&n.length>0)for(this._drawOrderIndex=0,e=n[this._drawOrderIndex];i>=e.time&&(this._drawOrder=e.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=n.length));)e=n[this._drawOrderIndex];var o;0==this._aniMode||1==this._aniMode?this.graphics=q.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=q.create(),o=this.graphics;var r=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],t,i);var a,s,l,u,c=this._aniSectionDic[this._aniClipIndex],d=0,p=0,f=0,g=0,m=0,y=this._templet.srcBoneMatrixArr.length;for(p=0,m=c[0];p<y;p++)u=this._boneList[p],l=this._templet.srcBoneMatrixArr[p],u.resultTransform.scX=l.scX*this._curOriginalData[d++],u.resultTransform.skX=l.skX+this._curOriginalData[d++],u.resultTransform.skY=l.skY+this._curOriginalData[d++],u.resultTransform.scY=l.scY*this._curOriginalData[d++],u.resultTransform.x=l.x+this._curOriginalData[d++],u.resultTransform.y=l.y+this._curOriginalData[d++],8===this._templet.tMatrixDataLen&&(u.resultTransform.skewX=l.skewX+this._curOriginalData[d++],u.resultTransform.skewY=l.skewY+this._curOriginalData[d++]);var v,I={},w={};for(m+=c[1];p<m;p++)I[(v=r[p]).name]=this._curOriginalData[d++],w[v.name]=this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++];var b={},C={};for(m+=c[2];p<m;p++)b[(v=r[p]).name]=this._curOriginalData[d++],C[v.name]=this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++],this._curOriginalData[d++];if(this._pathDic){var S;for(m+=c[3];p<m;p++)if(v=r[p],S=this._pathDic[v.name]){switch(new h(v.extenData).getByte()){case 1:S.position=this._curOriginalData[d++];break;case 2:S.spacing=this._curOriginalData[d++];break;case 3:S.rotateMix=this._curOriginalData[d++],S.translateMix=this._curOriginalData[d++]}}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(_.TEMP.identity()),this._ikArr){var x;for(p=0,m=this._ikArr.length;p<m;p++)x=this._ikArr[p],b.hasOwnProperty(x.name)&&(x.bendDirection=b[x.name]),C.hasOwnProperty(x.name)&&(x.mix=C[x.name]),x.apply()}if(this._pathDic)for(var T in this._pathDic)(S=this._pathDic[T]).apply(this._boneList,o);if(this._tfArr){for(p=0,g=this._tfArr.length;p<g;p++)this._tfArr[p].apply()}for(p=0,g=this._boneList.length;p<g;p++)if(u=this._boneList[p],s=this._bindBoneBoneSlotDic[u.name],u.resultMatrix.copyTo(this._boneMatrixArray[p]),s)for(f=0,m=s.length;f<m;f++)(a=s[f])&&a.setParentMatrix(u.resultMatrix);var M,L={},D=this._templet.deformAniArr;if(D&&D.length>0){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,p=0,m=this._boneSlotArray.length;p<m;p++)(a=this._boneSlotArray[p]).deformData=null;var E=D[this._aniClipIndex];M=E.default,this._setDeform(M,L,this._boneSlotArray,i);var R;for(R in E)"default"!=R&&R!=this._skinName&&(M=E[R],this._setDeform(M,L,this._boneSlotArray,i));M=E[this._skinName],this._setDeform(M,L,this._boneSlotArray,i)}var P,N,G;if(this._drawOrder)for(p=0,m=this._drawOrder.length;p<m;p++)P=I[(a=this._boneSlotArray[this._drawOrder[p]]).name],N=w[a.name],isNaN(N)||(o.save(),o.alpha(N)),isNaN(P)||-2==P||(this._templet.attachmentNames?a.showDisplayByName(this._templet.attachmentNames[P]):a.showDisplayByIndex(P)),L[this._drawOrder[p]]?(G=L[this._drawOrder[p]],a.currDisplayData&&G[a.currDisplayData.attachmentName]?a.deformData=G[a.currDisplayData.attachmentName]:a.deformData=null):a.deformData=null,isNaN(N)?a.draw(o,this._boneMatrixArray,2==this._aniMode):a.draw(o,this._boneMatrixArray,2==this._aniMode,N),isNaN(N)||o.restore();else for(p=0,m=this._boneSlotArray.length;p<m;p++)P=I[(a=this._boneSlotArray[p]).name],N=w[a.name],isNaN(N)||(o.save(),o.alpha(N)),isNaN(P)||-2==P||(this._templet.attachmentNames?a.showDisplayByName(this._templet.attachmentNames[P]):a.showDisplayByIndex(P)),L[p]?(G=L[p],a.currDisplayData&&G[a.currDisplayData.attachmentName]?a.deformData=G[a.currDisplayData.attachmentName]:a.deformData=null):a.deformData=null,isNaN(N)?a.draw(o,this._boneMatrixArray,2==this._aniMode):a.draw(o,this._boneMatrixArray,2==this._aniMode,N),isNaN(N)||o.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,t,o):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,t,o)},n._setDeform=function(t,e,i,n){if(t){var o,r,a,s=0,l=0,h=0;if(t)for(s=0,l=t.deformSlotDataList.length;s<l;s++)for(o=t.deformSlotDataList[s],h=0;h<o.deformSlotDisplayList.length;h++)a=i[(r=o.deformSlotDisplayList[h]).slotIndex],r.apply(n,a),e[r.slotIndex]||(e[r.slotIndex]={}),e[r.slotIndex][r.attachment]=r.deformData}},n.getAnimNum=function(){return this._templet.getAnimationCount()},n.getAniNameByIndex=function(t){return this._templet.getAniNameByIndex(t)},n.getSlotByName=function(t){return this._boneSlotDic[t]},n.showSkinByName=function(t,e){void 0===e&&(e=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(t),e)},n.showSkinByIndex=function(t,e){void 0===e&&(e=!0);for(var i=0;i<this._boneSlotArray.length;i++)this._boneSlotArray[i].showSlotData(null,e);if(this._templet.showSkinByIndex(this._boneSlotDic,t,e)){var n=this._templet.skinDataArray[t];this._skinIndex=t,this._skinName=n.name}this._clearCache()},n.showSlotSkinByIndex=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByIndex(e),this._clearCache()}},n.showSlotSkinByName=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByName(e),this._clearCache()}},n.replaceSlotSkinName=function(t,e,i){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.replaceDisplayByName(e,i),this._clearCache()}},n.replaceSlotSkinByIndex=function(t,e,i){if(0!=this._aniMode){var n=this.getSlotByName(t);n&&n.replaceDisplayByIndex(e,i),this._clearCache()}},n.setSlotSkin=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.replaceSkin(e),this._clearCache()}},n._clearCache=function(){if(1==this._aniMode)for(var t=0,e=this._graphicsCache.length;t<e;t++){for(var i=0,n=this._graphicsCache[t].length;i<n;i++){var o=this._graphicsCache[t][i];o!=this.graphics&&q.recycle(o)}this._graphicsCache[t].length=0}},n.play=function(t,e,i,n,o,r){void 0===i&&(i=!0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),this._indexControl=!1;var a=-1,s=NaN;if(s=e?2147483647:0,"string"==typeof t)for(var h=0,u=this._templet.getAnimationCount();h<u;h++){var c=this._templet.getAnimation(h);if(c&&t==c.name){a=h;break}}else a=t;a>-1&&a<this.getAnimNum()&&(this._aniClipIndex=a,(i||this._pause||this._currAniIndex!=a)&&(this._currAniIndex=a,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(a)),this._drawOrder=null,this._eventIndex=0,this._player.play(a,this._player.playbackRate,s,n,o),r&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},n.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},n.playbackRate=function(t){this._player&&(this._player.playbackRate=t)},n.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},n.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},n._getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t][e]},n._setGrahicsDataWithCache=function(t,e,i){this._graphicsCache[t][e]=i},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},r(0,n,"url",function(){return this._aniPath},function(t){this.load(t)}),r(0,n,"index",function(){return this._index},function(t){this.player&&(this._index=t,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),r(0,n,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),r(0,n,"templet",function(){return this._templet}),r(0,n,"player",function(){return this._player}),e.useSimpleMeshInCanvas=!1,e}(w),ot=(function(t){function e(t){this._start=0,this._Pos=0,this._data=null,this._curIndex=0,this._preIndex=0,this._playIndex=0,this._playing=!1,this._ended=!0,this._count=0,this._ids=null,this._loadedImage={},this._idOfSprite=null,this._parentMovieClip=null,this._movieClipList=null,this._labels=null,this.basePath=null,this._atlasPath=null,this._url=null,this._isRoot=!1,this._completeHandler=null,this._endFrame=-1,this.interval=30,this.loop=!1,e.__super.call(this),this._ids={},this._idOfSprite=[],this._reset(),this._playing=!1,this._parentMovieClip=t,t?(this._isRoot=!1,this._movieClipList=t._movieClipList,this._movieClipList.push(this)):(this._movieClipList=[this],this._isRoot=!0,this._setUpNoticeType(1))}o(e,"laya.ani.swf.MovieClip",t);var n=e.prototype;n.destroy=function(e){void 0===e&&(e=!0),this._clear(),t.prototype.destroy.call(this,e)},n._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._isRoot&&this._$3__onDisplay(e)},n._$3__onDisplay=function(t){t?this.timer.loop(this.interval,this,this.updates,null,!0):this.timer.clear(this,this.updates)},n.updates=function(){if(!this._parentMovieClip){var t=0,e=0;for(e=this._movieClipList.length,t=0;t<e;t++)this._movieClipList[t]&&this._movieClipList[t]._update()}},n.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]=t},n.removeLabel=function(t){if(t){if(!this._labels)for(var e in this._labels)if(this._labels[e]===t){delete this._labels[e];break}}else this._labels=null},n._update=function(){if(this._data&&this._playing){if(this._playIndex++,this._playIndex>=this._count){if(!this.loop)return this._playIndex--,void this.stop();this._playIndex=0}if(this._parse(this._playIndex),this._labels&&this._labels[this._playIndex]&&this.event("label",this._labels[this._playIndex]),-1!=this._endFrame&&this._endFrame==this._playIndex){if(this._endFrame=-1,null!=this._completeHandler){var t=this._completeHandler;this._completeHandler=null,t.run()}this.stop()}}},n.stop=function(){this._playing=!1},n.gotoAndStop=function(t){this.index=t,this.stop()},n._clear=function(){if(this.stop(),this._idOfSprite.length=0,!this._parentMovieClip){this.timer.clear(this,this.updates);var t=0,e=0;for(e=this._movieClipList.length,t=0;t<e;t++)this._movieClipList[t]!=this&&this._movieClipList[t]._clear();this._movieClipList.length=0}this._atlasPath&&f.clearRes(this._atlasPath);var i;for(i in this._loadedImage)this._loadedImage[i]&&(f.clearRes(i),this._loadedImage[i]=!1);this.removeChildren(),this.graphics=null,this._parentMovieClip=null},n.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.loop=e,this._playing=!0,this._data&&this._displayFrame(t)},n._displayFrame=function(t){void 0===t&&(t=-1),-1!=t&&(this._curIndex>t&&this._reset(),this._parse(t))},n._reset=function(t){void 0===t&&(t=!0),t&&1!=this._curIndex&&this.removeChildren(),this._preIndex=this._curIndex=-1,this._Pos=this._start},n._parse=function(t){var i,n,o,r=0,a=0,s=0,l=!1,h=this._idOfSprite,u=this._data;for(this._ended&&this._reset(),u.pos=this._Pos,this._ended=!1,this._playIndex=t,this._curIndex>t&&t<this._preIndex&&(this._reset(!0),u.pos=this._Pos);this._curIndex<=t&&!this._ended;)switch(u.getUint16()){case 12:if(r=u.getUint16(),a=this._ids[u.getUint16()],this._Pos=u.pos,u.pos=a,0==(s=u.getUint8())){var c=u.getUint16();if(!(n=h[r])){n=h[r]=new w;var d=new w;d.loadImage(this.basePath+c+".png"),this._loadedImage[this.basePath+c+".png"]=!0,n.addChild(d),d.size(u.getFloat32(),u.getFloat32());var p=u._getMatrix();d.transform=p}n.alpha=1}else 1==s&&((i=h[r])||(h[r]=i=new e(this),i.interval=this.interval,i._ids=this._ids,i.basePath=this.basePath,i._setData(u,a),i._initState(),i.play(0)),i.alpha=1);u.pos=this._Pos;break;case 3:var f=h[u.getUint16()];f&&(this.addChild(f),f.zOrder=u.getUint16(),l=!0);break;case 4:(f=h[u.getUint16()])&&f.removeSelf();break;case 5:h[u.getUint16()][e._ValueList[u.getUint16()]]=u.getFloat32();break;case 6:h[u.getUint16()].visible=u.getUint8()>0;break;case 7:var g=(n=h[u.getUint16()]).transform||_.create();g.setTo(u.getFloat32(),u.getFloat32(),u.getFloat32(),u.getFloat32(),u.getFloat32(),u.getFloat32()),n.transform=g;break;case 8:h[u.getUint16()].setPos(u.getFloat32(),u.getFloat32());break;case 9:h[u.getUint16()].setSize(u.getFloat32(),u.getFloat32());break;case 10:h[u.getUint16()].alpha=u.getFloat32();break;case 11:h[u.getUint16()].setScale(u.getFloat32(),u.getFloat32());break;case 98:o=u.getString(),this.event(o),"stop"==o&&this.stop();break;case 99:this._curIndex=u.getUint16(),l&&this.updateZOrder();break;case 100:this._count=this._curIndex+1,this._ended=!0,this._playing&&(this.event("enterframe"),this.event("end"),this.event("complete")),this._reset(!1)}this._playing&&!this._ended&&this.event("enterframe"),this._Pos=u.pos},n._setData=function(t,e){this._data=t,this._start=e+3},n.load=function(t,e,n){void 0===e&&(e=!1),this._url=t,e&&(this._atlasPath=n||t.split(".swf")[0]+".json"),this.stop(),this._clear(),this._movieClipList=[this];var o;o=[{url:t,type:"arraybuffer"}],this._atlasPath&&o.push({url:this._atlasPath,type:"atlas"}),i.loader.load(o,p.create(this,this._onLoaded))},n._onLoaded=function(){var t;(t=f.getRes(this._url))?!this._atlasPath||f.getAtlas(this._atlasPath)?(this.basePath=this._atlasPath?f.getAtlas(this._atlasPath).dir:this._url.split(".swf")[0]+"/image/",this._initData(t)):this.event("error","Atlas not find"):this.event("error","file not find")},n._initState=function(){this._reset(),this._ended=!1;var t=this._playing;for(this._playing=!1,this._curIndex=0;!this._ended;)this._parse(++this._curIndex);this._playing=t},n._initData=function(t){this._data=new h(t);var e=0,i=this._data.getUint16();for(e=0;e<i;e++)this._ids[this._data.getInt16()]=this._data.getInt32();this.interval=1e3/this._data.getUint16(),this._setData(this._data,this._ids[32767]),this._initState(),this.play(0),this.event("loaded"),this._parentMovieClip||this.timer.loop(this.interval,this,this.updates,null,!0)},n.playTo=function(t,e,i){this._completeHandler=i,this._endFrame=e,this.play(t,!1)},r(0,n,"index",function(){return this._playIndex},function(t){this._playIndex=t,this._data&&this._displayFrame(this._playIndex),this._labels&&this._labels[t]&&this.event("label",this._labels[t])}),r(0,n,"count",function(){return this._count}),r(0,n,"playing",function(){return this._playing}),r(0,n,"url",null,function(t){this.load(t)}),e._ValueList=["x","y","width","height","scaleX","scaleY","rotation","alpha"]}(w),function(t){function e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}o(e,"laya.ani.bone.Templet",t);var n=e.prototype;return n.loadAni=function(t){this._skBufferUrl=t,i.loader.load(t,p.create(this,this.onComplete),null,"arraybuffer")},n.onComplete=function(t){if(this._isDestroyed)this.destroy();else{var e=f.getRes(this._skBufferUrl);e?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,e)):this.event("error","load failed:"+this._skBufferUrl)}},n.parseData=function(t,e,i){void 0===i&&(i=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=t,this._mainTexture&&y.isWebGL&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1),this._rate=i,this.parse(e)},n.buildArmature=function(t){return void 0===t&&(t=0),new nt(this,t)},n.parse=function(i){t.prototype.parse.call(this,i),this._endLoaded(),this._aniVersion!=e.LAYA_ANIMATION_VISION&&(console.log("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},n._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var t=0;this._loadList=[];var e,n=new h(this.getPublicExtData()),o=0,r=0,a=0,s=n.getInt32(),l=n.readUTFString(),u=l.split("\n");for(t=0;t<s;t++)e=this._path+u[2*t],l=u[2*t+1],n.getFloat32(),n.getFloat32(),o=n.getFloat32(),r=n.getFloat32(),a=n.getFloat32(),isNaN(a)?0:a,a=n.getFloat32(),isNaN(a)?0:a,a=n.getFloat32(),isNaN(a)?o:a,a=n.getFloat32(),isNaN(a)?r:a,-1==this._loadList.indexOf(e)&&this._loadList.push(e);i.loader.load(this._loadList,p.create(this,this._textureComplete))}},n._textureComplete=function(){for(var t,e,i=0,n=this._loadList.length;i<n;i++)e=this._loadList[i],t=this._textureDic[e]=f.getRes(e),y.isWebGL&&t&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},n._parsePublicExtData=function(){var t=0,e=0,i=0,n=0,o=0;for(t=0,o=this.getAnimationCount();t<o;t++)this._graphicsCache.push([]);var r=!1;r="Dragon"!=this._aniClassName;var a,s,l=new h(this.getPublicExtData()),u=0,c=0,d=0,p=0,f=0,g=0,m=0,y=0,v=0,I=l.getInt32(),w=l.readUTFString(),b=w.split("\n");for(t=0;t<I;t++){if(a=this._mainTexture,s=this._path+b[2*t],w=b[2*t+1],null==this._mainTexture&&(a=this._textureDic[s]),!a)return this.event("error",this),void(this.isParseFail=!0);u=l.getFloat32(),c=l.getFloat32(),d=l.getFloat32(),p=l.getFloat32(),v=l.getFloat32(),f=isNaN(v)?0:v,v=l.getFloat32(),g=isNaN(v)?0:v,v=l.getFloat32(),m=isNaN(v)?d:v,v=l.getFloat32(),y=isNaN(v)?p:v,this.subTextureDic[w]=C.create(a,u,c,d,p,-f,-g,m,y)}this._mainTexture=a;var S,x=l.getUint16();for(t=0;t<x;t++)(S=[]).push(l.getUint16()),S.push(l.getUint16()),S.push(l.getUint16()),S.push(l.getUint16()),this.aniSectionDic[t]=S;var T,M,L,R,P,B=l.getInt16(),W={};for(t=0;t<B;t++)T=new D,0==t?P=T:T.root=P,T.d=r?-1:1,L=l.readUTFString(),R=l.readUTFString(),T.length=l.getFloat32(),1==l.getByte()&&(T.inheritRotation=!1),1==l.getByte()&&(T.inheritScale=!1),T.name=L,R&&((M=W[R])?M.addChild(T):this.mRootBone=T),W[L]=T,this.mBoneArr.push(T);this.tMatrixDataLen=l.getUint16();var V,Y=l.getUint16(),J=Math.floor(Y/this.tMatrixDataLen),K=this.srcBoneMatrixArr;for(t=0;t<J;t++)(V=new j).scX=l.getFloat32(),V.skX=l.getFloat32(),V.skY=l.getFloat32(),V.scY=l.getFloat32(),V.x=l.getFloat32(),V.y=l.getFloat32(),8===this.tMatrixDataLen&&(V.skewX=l.getFloat32(),V.skewY=l.getFloat32()),K.push(V),(T=this.mBoneArr[t]).transform=V;var Q,$=l.getUint16(),q=0;for(t=0;t<$;t++){for(Q=new O,q=l.getUint16(),e=0;e<q;e++)Q.boneNames.push(l.readUTFString()),Q.boneIndexs.push(l.getInt16());Q.name=l.readUTFString(),Q.targetBoneName=l.readUTFString(),Q.targetBoneIndex=l.getInt16(),Q.bendDirection=l.getFloat32(),Q.mix=l.getFloat32(),Q.isSpine=r,this.ikArr.push(Q)}var tt,et=l.getUint16(),it=0;for(t=0;t<et;t++){for(tt=new z,it=l.getUint16(),e=0;e<it;e++)tt.boneIndexs.push(l.getInt16());tt.name=l.getUTFString(),tt.targetIndex=l.getInt16(),tt.rotateMix=l.getFloat32(),tt.translateMix=l.getFloat32(),tt.scaleMix=l.getFloat32(),tt.shearMix=l.getFloat32(),tt.offsetRotation=l.getFloat32(),tt.offsetX=l.getFloat32(),tt.offsetY=l.getFloat32(),tt.offsetScaleX=l.getFloat32(),tt.offsetScaleY=l.getFloat32(),tt.offsetShearY=l.getFloat32(),this.tfArr.push(tt)}var nt,ot=l.getUint16(),rt=0;for(t=0;t<ot;t++){for((nt=new F).name=l.readUTFString(),rt=l.getUint16(),e=0;e<rt;e++)nt.bones.push(l.getInt16());nt.target=l.readUTFString(),nt.positionMode=l.readUTFString(),nt.spacingMode=l.readUTFString(),nt.rotateMode=l.readUTFString(),nt.offsetRotation=l.getFloat32(),nt.position=l.getFloat32(),nt.spacing=l.getFloat32(),nt.rotateMix=l.getFloat32(),nt.translateMix=l.getFloat32(),this.pathArr.push(nt)}var at,st,lt,ht,ut=0,ct=0,dt=0,pt=NaN,ft=0,gt=l.getInt16();for(t=0;t<gt;t++){var _t=l.getUint8(),mt={};this.deformAniArr.push(mt);for(var yt=0;yt<_t;yt++)for((at=new N).skinName=l.getUTFString(),mt[at.skinName]=at,ut=l.getInt16(),e=0;e<ut;e++)for(st=new G,at.deformSlotDataList.push(st),ct=l.getInt16(),i=0;i<ct;i++)for(lt=new A,st.deformSlotDisplayList.push(lt),lt.slotIndex=l.getInt16(),lt.attachment=l.getUTFString(),dt=l.getInt16(),n=0;n<dt;n++)for(1==l.getByte()?lt.tweenKeyList.push(!0):lt.tweenKeyList.push(!1),pt=l.getFloat32(),lt.timeList.push(pt),ht=[],lt.vectices.push(ht),ft=l.getInt16(),o=0;o<ft;o++)ht.push(l.getFloat32())}var vt,It,wt=l.getInt16(),bt=0,Ct=0;for(t=0;t<wt;t++){for(bt=l.getInt16(),vt=[],e=0;e<bt;e++){for((It=new U).time=l.getFloat32(),Ct=l.getInt16(),i=0;i<Ct;i++)It.drawOrder.push(l.getInt16());vt.push(It)}this.drawOrderAniArr.push(vt)}var St,xt,Tt=l.getInt16(),Mt=0;for(t=0;t<Tt;t++){for(Mt=l.getInt16(),St=[],e=0;e<Mt;e++)(xt=new k).name=l.getUTFString(),xt.intValue=l.getInt32(),xt.floatValue=l.getFloat32(),xt.stringValue=l.getUTFString(),xt.time=l.getFloat32(),St.push(xt);this.eventAniArr.push(St)}var Lt=l.getInt16();if(Lt>0)for(this.attachmentNames=[],t=0;t<Lt;t++)this.attachmentNames.push(l.getUTFString());var Dt,Et,Rt=l.getInt16();for(t=0;t<Rt;t++)(Dt=new E).name=l.readUTFString(),Dt.parent=l.readUTFString(),Dt.attachmentName=l.readUTFString(),Dt.srcDisplayIndex=Dt.displayIndex=l.getInt16(),Dt.templet=this,this.boneSlotDic[Dt.name]=Dt,null==(Et=this.bindBoneBoneSlotDic[Dt.parent])&&(this.bindBoneBoneSlotDic[Dt.parent]=Et=[]),Et.push(Dt),this.boneSlotArray.push(Dt);var Pt,Nt,Gt,At=l.readUTFString().split("\n"),Ut=0,kt=l.getUint8(),Bt=0,Ot=0,Wt=0,Vt=0,Ft=0,Zt=0,Xt=0;for(t=0;t<kt;t++){for((Pt=new Z).name=At[Ut++],Bt=l.getUint8(),e=0;e<Bt;e++){for((Nt=new H).name=At[Ut++],Dt=this.boneSlotDic[Nt.name],Ot=l.getUint8(),i=0;i<Ot;i++){if(Gt=new X,this.skinSlotDisplayDataArr.push(Gt),Gt.name=At[Ut++],Gt.attachmentName=At[Ut++],Gt.transform=new j,Gt.transform.scX=l.getFloat32(),Gt.transform.skX=l.getFloat32(),Gt.transform.skY=l.getFloat32(),Gt.transform.scY=l.getFloat32(),Gt.transform.x=l.getFloat32(),Gt.transform.y=l.getFloat32(),Nt.displayArr.push(Gt),Gt.width=l.getFloat32(),Gt.height=l.getFloat32(),Gt.type=l.getUint8(),Gt.verLen=l.getUint16(),(B=l.getUint16())>0)for(Gt.bones=[],n=0;n<B;n++){var Ht=l.getUint16();Gt.bones.push(Ht)}if((Wt=l.getUint16())>0)for(Gt.uvs=[],n=0;n<Wt;n++)Gt.uvs.push(l.getFloat32());if((Vt=l.getUint16())>0)for(Gt.weights=[],n=0;n<Vt;n++)Gt.weights.push(l.getFloat32());if((Ft=l.getUint16())>0)for(Gt.triangles=[],n=0;n<Ft;n++)Gt.triangles.push(l.getUint16());if((Zt=l.getUint16())>0)for(Gt.vertices=[],n=0;n<Zt;n++)Gt.vertices.push(l.getFloat32());if((Xt=l.getUint16())>0)for(Gt.lengths=[],n=0;n<Xt;n++)Gt.lengths.push(l.getFloat32())}Pt.slotArr.push(Nt)}this.skinDic[Pt.name]=Pt,this.skinDataArray.push(Pt)}1==l.getUint8()?(this.yReverseMatrix=new _(1,0,0,-1,0,0),P&&P.setTempMatrix(this.yReverseMatrix)):P&&P.setTempMatrix(new _),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},n.getTexture=function(t){var e=this.subTextureDic[t];return e||(e=this.subTextureDic[t.substr(0,t.length-1)]),null==e?this._mainTexture:e},n.showSkinByIndex=function(t,e,i){if(void 0===i&&(i=!0),e<0&&e>=this.skinDataArray.length)return!1;var n,o,r=0,a=0,s=this.skinDataArray[e];if(s){for(r=0,a=s.slotArr.length;r<a;r++)(o=s.slotArr[r])&&(n=t[o.name])&&(n.showSlotData(o,i),i&&"undefined"!=n.attachmentName&&"null"!=n.attachmentName?n.showDisplayByName(n.attachmentName):n.showDisplayByIndex(n.displayIndex));return!0}return!1},n.getSkinIndexByName=function(t){for(var e=0,i=this.skinDataArray.length;e<i;e++)if(this.skinDataArray[e].name==t)return e;return-1},n.getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t]&&this._graphicsCache[t][e]?this._graphicsCache[t][e]:null},n.setGrahicsDataWithCache=function(t,e,i){this._graphicsCache[t][e]=i},n.destroy=function(){this._isDestroyed=!0;var t;for(var i in this.subTextureDic)(t=this.subTextureDic[i])&&t.destroy();for(i in this._textureDic)(t=this._textureDic[i])&&t.destroy();for(var n=0,o=this.skinSlotDisplayDataArr.length;n<o;n++)this.skinSlotDisplayDataArr[n].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},n.getAniNameByIndex=function(t){var e=this.getAnimation(t);return e?e.name:null},r(0,n,"rate",function(){return this._rate},function(t){this._rate=t}),e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",e.TEMPLET_DICTIONARY=null,e}(et))}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=(i.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),s=laya.utils.ClassUtils,l=(laya.events.Event,laya.utils.HTMLChar),h=laya.net.Loader,u=(laya.display.Node,laya.maths.Rectangle),c=laya.renders.Render,d=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),p=laya.utils.Stat,f=laya.display.Text,g=laya.resource.Texture,_=laya.net.URL,m=laya.utils.Utils,y=function(){function t(){}return o(t,"laya.html.utils.HTMLParse"),t.parse=function(e,i,n){i=(i="<root>"+(i=i.replace(/<br>/g,"<br/>"))+"</root>").replace(t.spacePattern,t.char255);var o=m.parseXMLFromString(i);t._parseXML(e,o.childNodes[0].childNodes,n)},t._parseXML=function(e,i,n,o){var r=0,a=0;if(i.join||i.item)for(r=0,a=i.length;r<a;++r)t._parseXML(e,i[r],n,o);else{var l,h;if(3==i.nodeType){var u;return void(e instanceof laya.html.dom.HTMLDivElement?(null==i.nodeName&&(i.nodeName="#text"),h=i.nodeName.toLowerCase(),(u=i.textContent.replace(/^\s+|\s+$/g,"")).length>0&&(l=s.getInstance(h))&&(e.addChild(l),l.innerTEXT=u.replace(t.char255AndOneSpacePattern," "))):(u=i.textContent.replace(/^\s+|\s+$/g,"")).length>0&&(e.innerTEXT=u.replace(t.char255AndOneSpacePattern," ")))}if("#comment"==(h=i.nodeName.toLowerCase()))return;if(l=s.getInstance(h)){(l=e.addChild(l)).URI=n,l.href=o;var c=i.attributes;if(c&&c.length>0)for(r=0,a=c.length;r<a;++r){var d=c[r],p=d.nodeName,f=d.value;l._setAttributes(p,f)}t._parseXML(l,i.childNodes,n,l.href)}else t._parseXML(e,i.childNodes,n,o)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t}(),v=function(){function t(){}return o(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],i.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++)laya.html.utils.Layout.layout(t._will[e]);t._will.length=0}})),t._will.push(e)},t.layout=function(e){if(!e||!e._style)return null;if(0==(512&e._style._type))return null;e.getStyle()._type&=-513;var i=t._multiLineLayout(e);return c.isConchApp&&e.layaoutCallNative&&e.layaoutCallNative(),i},t._multiLineLayout=function(e){function i(){D.y=x,x+=D.h+p,0==D.h&&(x+=g),D.mWidth=P,P=0,D=new I,L.push(D),D.h=0,S=0,N=!0,E=!1}if(f.RightToLeft)return t._multiLineLayout2(e);var n=new Array;e._addChildsToLayout(n);var o,r,a,s,l,h=0,u=n.length,c=e._getCSSStyle(),d=c.letterSpacing,p=c.leading,g=c.lineHeight,_=c._widthAuto()||!c.wordWrap,m=_?999999:e.width,y=(e.height,0),v=c.italic?c.fontSize/3:0,w=c._getAlign(),b=c._getValign(),C=0!==b||0!==w||0!=g,S=0,x=0,T=0,M=0,L=new Array,D=L[0]=new I,E=!1,R=!1;D.h=0,c.italic&&(m-=c.fontSize/3);var P=0,N=!0;for(h=0;h<u;h++)if(null!=(o=n[h]))if(N=!1,o instanceof laya.html.dom.HTMLBrElement)i(),D.y=x;else{if(o._isChar()){if((s=o).isWord)E=R||"\n"===s.char,D.wordStartIndex=D.elements.length;else{if(L.length>0&&S+T>m&&D.wordStartIndex>0){var G=0;G=D.elements.length-D.wordStartIndex+1,D.elements.length=D.wordStartIndex,h-=G,i();continue}E=!1,P+=s.width}T=s.width+d,M=s.height,R=!1,(E=E||S+T>m)&&i(),D.minTextHeight=Math.min(D.minTextHeight,o.height)}else l=o,a=(r=o._getCSSStyle()).padding,0===r._getCssFloat()||(C=!0),E=R||r.lineElement,T=l.width*l._style._tf.scaleX+a[1]+a[3]+d,M=l.height*l._style._tf.scaleY+a[0]+a[2],R=r.lineElement,(E=E||S+T>m&&r.wordWrap)&&i();D.elements.push(o),D.h=Math.max(D.h,M),o.x=S,o.y=x,S+=T,D.w=S-d,D.y=x,y=Math.max(S+v,y)}else N||(S+=t.DIV_ELEMENT_PADDING),D.wordStartIndex=D.elements.length;if(x=D.y+D.h,C){var A=0,U=m;for(_&&e.width>0&&(U=e.width),h=0,u=L.length;h<u;h++)L[h].updatePos(0,U,h,A,w,b,g),A+=Math.max(g,L[h].h+p);x=A}return _&&(e.width=y),x>e.height&&(e.height=x),[y,x]},t._multiLineLayout2=function(e){function i(){L.y=S,S+=L.h+p,0==L.h&&(S+=f),L.mWidth=R,R=0,L=new I,M.push(L),L.h=0,C=0,P=!0,D=!1}var n=new Array;e._addChildsToLayout(n);var o,r,a,s,l,h=0,u=n.length,c=e._getCSSStyle(),d=c.letterSpacing,p=c.leading,f=c.lineHeight,g=c._widthAuto()||!c.wordWrap,_=g?999999:e.width,m=(e.height,0),y=c.italic?c.fontSize/3:0,v=2-c._getAlign(),w=c._getValign(),b=0!==w||0!==v||0!=f,C=0,S=0,x=0,T=0,M=new Array,L=M[0]=new I,D=!1,E=!1;L.h=0,c.italic&&(_-=c.fontSize/3);var R=0,P=!0;for(h=0;h<u;h++)if(null!=(o=n[h]))if(P=!1,o instanceof laya.html.dom.HTMLBrElement)i(),L.y=S;else{if(o._isChar()){if((s=o).isWord)D=E||"\n"===s.char,L.wordStartIndex=L.elements.length;else{if(M.length>0&&C+x>_&&L.wordStartIndex>0){var N=0;N=L.elements.length-L.wordStartIndex+1,L.elements.length=L.wordStartIndex,h-=N,i();continue}D=!1,R+=s.width}x=s.width+d,T=s.height,E=!1,(D=D||C+x>_)&&i(),L.minTextHeight=Math.min(L.minTextHeight,o.height)}else l=o,a=(r=o._getCSSStyle()).padding,0===r._getCssFloat()||(b=!0),D=E||r.lineElement,x=l.width*l._style._tf.scaleX+a[1]+a[3]+d,T=l.height*l._style._tf.scaleY+a[0]+a[2],E=r.lineElement,(D=D||C+x>_&&r.wordWrap)&&i();L.elements.push(o),L.h=Math.max(L.h,T),o.x=C,o.y=S,C+=x,L.w=C-d,L.y=S,m=Math.max(C+y,m)}else P||(C+=t.DIV_ELEMENT_PADDING),L.wordStartIndex=L.elements.length;if(S=L.y+L.h,b){var G=0,A=_;for(h=0,u=M.length;h<u;h++)M[h].updatePos(0,A,h,G,v,w,f),G+=Math.max(f,M[h].h+p);S=G}for(g&&(e.width=m),S>e.height&&(e.height=S),h=0,u=M.length;h<u;h++)M[h].revertOrder(_);return[m,S]},t._will=null,t.DIV_ELEMENT_PADDING=0,t}(),I=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}o(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,i,n,o,r,a){var s,l=0;this.elements.length>0&&(l=(s=this.elements[this.elements.length-1]).x+s.width-this.elements[0].x);var h=0,u=NaN;1===o&&(h=(e-l)/2),2===o&&(h=e-l),0===a||0!=r||(r=1);for(var c=0,d=this.elements.length;c<d;c++){var p=(s=this.elements[c])._getCSSStyle();switch(0!==h&&(s.x+=h),p._getValign()){case 0:s.y=n;break;case 1:var f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);var g=(f+a)/2;g=Math.max(g,this.h),u=(laya.html.dom.HTMLImageElement,n+g-s.height),s.y=u;break;case 2:s.y=n+(a-s.height)}}},e.revertOrder=function(t){var e;if(this.elements.length>0){var i=0,n=0;for(n=this.elements.length,i=0;i<n;i++)(e=this.elements[i]).x=t-e.x-e.width}},t}(),w=function(t){function e(){this.URI=null,this._href=null,e.__super.call(this),this._text=e._EMPTYTEXT,this.setStyle(new a(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}o(e,"laya.html.dom.HTMLElement",t);var n=e.prototype;return n.layaoutCallNative=function(){var t=0;if(this._childs&&(t=this._childs.length)>0)for(var e=0;e<t;e++)this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative();var i=this._getWords();i?laya.html.dom.HTMLElement.fillWords(this,i,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},n.appendChild=function(t){return this.addChild(t)},n._getWords2=function(){var t=this._text.text;if(!t||0===t.length)return null;var e,i,n=0,o=0;if(this._text.drawWords)i=this._text.drawWords;else{for(o=(e=t.split(" ")).length-1,i=[],n=0;n<o;n++)i.push(e[n]," ");o>=0&&i.push(e[o]),this._text.drawWords=i}var r=this._text.words;if(r&&r.length===i.length)return r;null===r&&(this._text.words=r=[]),r.length=i.length;var a,s=this.style,h=s.font;for(n=0,o=i.length;n<o;n++){a=m.measureText(i[n],h);var u=r[n]=new l(i[n],a.width,a.height||s.fontSize,s);if(u.char.length>1&&(u.charNum=u.char),this.href){var c=new d;this.addChild(c),u.setSprite(c)}}return r},n._getWords=function(){if(!f.CharacterCache)return this._getWords2();var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var i,n=this.style,o=n.font,r=0,a=t.length;r<a;r++){i=m.measureText(t.charAt(r),o);var s=e[r]=new l(t.charAt(r),i.width,i.height||n.fontSize,n);if(this.href){var h=new d;this.addChild(h),s.setSprite(h)}}return e},n.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,i,n=[],o=0;o<t.length;o++)i=t[o],(e=new d).graphics.drawRect(0,0,i.width,i.height,"#ff0000"),e.width=i.width,e.height=i.height,this.addChild(e),n.push(e)},n._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._childs.length>0||null!=this._getWords())&&t.block?(v.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},n._setAttributes=function(e,i){switch(e){case"style":return void this.style.cssText(i);case"class":return void(this.className=i)}t.prototype._setAttributes.call(this,e,i)},n.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,i,n=0;n<t.length;n++)(i=(e=t[n]).getSprite())&&(i.size(e.width,e.height),i.on("click",this,this.onLinkHandler))}},n.onLinkHandler=function(t){switch(t.type){case"click":for(var e=this;e;)e.event("link",[this.href]),e=e.parent}},n.formatURL=function(t){return this.URI?_.formatURL(t,this.URI?this.URI.path:null):t},r(0,n,"href",function(){return this._href},function(t){this._href=t,null!=t&&(this._getCSSStyle().underLine=1,this.updateHref())}),r(0,n,"color",null,function(t){this.style.color=t}),r(0,n,"onClick",null,function(t){i._runScript("fn=function(event){"+t+";}"),this.on("click",this,void 0)}),r(0,n,"id",null,function(t){C.document.setElementById(t,this)}),r(0,n,"innerTEXT",function(){return this._text.text},function(t){this.text=t}),r(0,n,"style",function(){return this._style}),r(0,n,"text",function(){return this._text.text},function(t){this._text==e._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),c.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),r(0,n,"parent",t.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style)}i.superSet(d,this,"parent",t)}),r(0,n,"className",null,function(t){this.style.attrs(C.document.styleSheets["."+t])}),e.fillWords=function(t,e,i,n,o,r,a){t.graphics.clear();for(var s=0,l=e.length;s<l;s++){var h=e[s];t.graphics.fillText(h.char,h.x+i,h.y+n,o,r,"left",a)}},e._EMPTYTEXT={text:null,words:null},e}(d),b=(function(t){function e(){e.__super.call(this),this.style.lineElement=!0,this.style.block=!0}o(e,"laya.html.dom.HTMLBrElement",w)}(),function(t){function e(){this.contextHeight=NaN,this.contextWidth=NaN,e.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}o(e,"laya.html.dom.HTMLDivElement",t);var n=e.prototype;return n.appendHTML=function(t){y.parse(this,t,this.URI),this.layout()},n._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;e&&e.forEach(function(e){t.push(e)});for(var i=!0,n=0,o=this._childs.length;n<o;n++){var r=this._childs[n];i?i=!1:t.push(null),r._addToLayout(t)}return!0},n._addToLayout=function(t){this.layout()},n.layout=function(){if(this.style){this.style._type|=512;var t=v.layout(this);if(t){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new u);var e=this._$P.mHtmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1],this.setBounds(e)}}},r(0,n,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),r(0,n,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),r(0,n,"width",function(){return this._width?this._width:this.contextWidth},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,i.superSet(w,this,"width",t),e&&this.layout()}),e}(w)),C=function(t){function e(){this.all=new Array,this.styleSheets=a.styleSheets,e.__super.call(this)}o(e,"laya.html.dom.HTMLDocument",w);var i=e.prototype;return i.getElementById=function(t){return this.all[t]},i.setElementById=function(t,e){this.all[t]=e},n(e,["document",function(){return this.document=new e}]),e}();(function(t){function e(){this._tex=null,this._url=null,this._renderArgs=[],e.__super.call(this),this.style.block=!0}o(e,"laya.html.dom.HTMLImageElement",w);var i=e.prototype;i._addToLayout=function(t){!this._style.absolute&&t.push(this)},i.render=function(t,e,i){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(p.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t.ctx.drawTexture2(e,i,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},i.layaoutCallNative=function(){var t=0;if(this._childs&&(t=this._childs.length)>0)for(var e=0;e<t;e++)this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative()},r(0,i,"src",null,function(t){function e(){var t=i._style;t.widthed(i)||i._tex.width,t.heighted(i)||i._tex.height;t.widthed(i)||i._width==i._tex.width||(i.width=i._tex.width,i.parent&&i.parent._layoutLater()),t.heighted(i)||i._height==i._tex.height||(i.height=i._tex.height,i.parent&&i.parent._layoutLater()),c.isConchApp&&(i._renderArgs[0]=i._tex,i._renderArgs[1]=i.x,i._renderArgs[2]=i.y,i._renderArgs[3]=i.width||i._tex.width,i._renderArgs[4]=i.height||i._tex.height,i.graphics.drawTexture(i._tex,0,0,i._renderArgs[3],i._renderArgs[4])),i.repaint(),i.parentRepaint()}var i=this;if(t=this.formatURL(t),this._url!=t){this._url=t;var n=this._tex=h.getRes(t);n||(this._tex=n=new g,n.load(t),h.cacheRes(t,n)),n.loaded?e():n.on("loaded",null,e)}})})(),function(t){function e(){this.type=null,e.__super.call(this),this.visible=!1}o(e,"laya.html.dom.HTMLLinkElement",t);var i=e.prototype;i._onload=function(t){switch(this.type){case"text/css":a.parseCSS(t,this.URI)}},r(0,i,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t),this.URI=new _(t);var i=new h;i.once("complete",null,function(t){e._onload(t)}),i.load(t,"text")}),e._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(w),function(t){function e(){e.__super.call(this),this.visible=!1}o(e,"laya.html.dom.HTMLStyleElement",t);r(0,e.prototype,"text",t.prototype._$get_text,function(t){a.parseCSS(t,null)})}(w),function(t){function e(){e.__super.call(this),this._getCSSStyle().valign="middle"}o(e,"laya.html.dom.HTMLIframeElement",t);r(0,e.prototype,"href",t.prototype._$get_href,function(t){var e=this;t=this.formatURL(t);var i=new h;i.once("complete",null,function(i){var n=e.URI;e.URI=new _(t),e.innerHTML=i,!n||(e.URI=n)}),i.load(t,"text")})}(b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=(i.__newvec,laya.display.Animation),s=laya.utils.Browser,l=laya.utils.ClassUtils,h=laya.filters.ColorFilter,u=laya.utils.Ease,c=laya.events.Event,d=(laya.events.EventDispatcher,laya.display.css.Font),p=laya.display.FrameAnimation,f=laya.display.Graphics,g=laya.utils.Handler,_=laya.display.Input,m=laya.net.Loader,y=(laya.display.Node,laya.maths.Point),v=laya.maths.Rectangle,I=laya.renders.Render,w=laya.display.Sprite,b=laya.display.Text,C=laya.resource.Texture,S=laya.utils.Tween,x=laya.utils.Utils,T=laya.utils.WeakObject;i.interface("laya.ui.IItem"),i.interface("laya.ui.ISelect"),i.interface("laya.ui.IRender"),i.interface("laya.ui.IComponent"),i.interface("laya.ui.IBox","IComponent");var M=function(){function t(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return o(t,"laya.ui.LayoutStyle"),n(t,["EMPTY",function(){return this.EMPTY=new t}]),t}(),L=function(){function t(){}return o(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,n(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),D=function(){function t(){}return o(t,"laya.ui.UIUtils"),t.fillArray=function(t,e,i){var n=t.concat();if(e)for(var o=e.split(","),r=0,a=Math.min(n.length,o.length);r<a;r++){var s=o[r];n[r]="true"==s||"false"!=s&&s,null!=i&&(n[r]=i(s))}return n},t.toColor=function(t){return x.toHexColor(t)},t.gray=function(e,i){void 0===i&&(i=!0),i?t.addFilter(e,t.grayFilter):t.clearFilter(e,h)},t.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},t.clearFilter=function(t,e){var n=t.filters;if(null!=n&&n.length>0){for(var o=n.length-1;o>-1;o--){var r=n[o];i.__typeof(r,e)&&n.splice(o,1)}t.filters=n}},t._getReplaceStr=function(e){return t.escapeSequence[e]},t.adptString=function(e){return e.replace(/\\(\w)/g,t._getReplaceStr)},t.getBindFun=function(e){var n=t._funMap.get(e);if(null==n){var o='"'+e+'"',r="(function(data){if(data==null)return;with(data){try{\nreturn "+(o=o.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";n=i._runScript(r),t._funMap.set(e,n)}return n},n(t,["grayFilter",function(){return this.grayFilter=new h([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new T}]),t}(),E=function(){function t(){}return o(t,"UIConfig"),t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t.closeDialogOnSide=!0,t}(),R=function(t){function e(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,e.__super.call(this)}o(e,"laya.ui.AutoBitmap",t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},n._setChanged=function(){this._isChanged||(this._isChanged=!0,i.timer.callLater(this,this.changeSource))},n.changeSource=function(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var i=this.width,n=this.height,o=this._sizeGrid,r=t.sourceWidth,a=t.sourceHeight;if(!o||r===i&&a===n)this.clear(),this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,i,n);else{t.$_GID||(t.$_GID=x.getGID());var s=t.$_GID+"."+i+"."+n+"."+o.join(".");if(x.isOKCmdList(T.I.get(s)))return void(this.cmds=T.I.get(s));this.clear();var l=o[0],h=o[1],u=o[2],c=o[3],d=o[4],p=!1;if(i==r&&(c=h=0),n==a&&(l=u=0),c+h>i){var f=i;p=!0,i=c+h,this.save(),this.clipRect(0,0,f,n)}c&&l&&this.drawTexture(e.getTexture(t,0,0,c,l),0,0,c,l),h&&l&&this.drawTexture(e.getTexture(t,r-h,0,h,l),i-h,0,h,l),c&&u&&this.drawTexture(e.getTexture(t,0,a-u,c,u),0,n-u,c,u),h&&u&&this.drawTexture(e.getTexture(t,r-h,a-u,h,u),i-h,n-u,h,u),l&&this.drawBitmap(d,e.getTexture(t,c,0,r-c-h,l),c,0,i-c-h,l),u&&this.drawBitmap(d,e.getTexture(t,c,a-u,r-c-h,u),c,n-u,i-c-h,u),c&&this.drawBitmap(d,e.getTexture(t,0,l,c,a-l-u),0,l,c,n-l-u),h&&this.drawBitmap(d,e.getTexture(t,r-h,l,h,a-l-u),i-h,l,h,n-l-u),this.drawBitmap(d,e.getTexture(t,c,l,r-c-h,a-l-u),c,l,i-c-h,n-l-u),p&&this.restore(),this.autoCacheCmd&&!I.isConchApp&&T.I.set(s,this.cmds)}this._repaint()}},n.drawBitmap=function(t,e,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0),o<.1||r<.1||(!t||e.width==o&&e.height==r?this.drawTexture(e,i,n,o,r):this.fillTexture(e,i,n,o,r))},n.clear=function(e){void 0===e&&(e=!0),t.prototype.clear.call(this,!1)},r(0,n,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,this._setChanged()}),r(0,n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t){this._width!=t&&(this._width=t,this._setChanged())}),r(0,n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t){this._height!=t&&(this._height=t,this._setChanged())}),r(0,n,"source",function(){return this._source},function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}),e.getTexture=function(t,e,i,n,o){n<=0&&(n=1),o<=0&&(o=1),t.$_GID||(t.$_GID=x.getGID());var r=t.$_GID+"."+e+"."+i+"."+n+"."+o,a=T.I.get(r);return a&&a.source||(a=C.createFromTexture(t,e,i,n,o),T.I.set(r,a)),a},e}(f),P=(function(t){function e(){e.__super.call(this)}o(e,"laya.ui.UIEvent",c),e.SHOW_TIP="showtip",e.HIDE_TIP="hidetip"}(),function(t){function e(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,e.__super.call(this),this._layout=M.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}o(e,"laya.ui.Component",t);var n=e.prototype;return i.imps(n,{"laya.ui.IComponent":!0}),n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},n.preinitialize=function(){},n.createChildren=function(){},n.initialize=function(){},n.callLater=function(t,e){i.timer.callLater(this,t,e)},n.runCallLater=function(t){i.timer.runCallLater(this,t)},n.commitMeasure=function(){},n.changeSize=function(){this.event("resize"),this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},n.getLayout=function(){return this._layout===M.EMPTY&&(this._layout=new M),this._layout},n._setLayoutEnabled=function(t){this._layout&&this._layout.enable!=t&&(this._layout.enable=t,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},n.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},n.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},n.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},n.resetLayoutX=function(){var t=this._layout;if(isNaN(t.anchorX)||(this.pivotX=t.anchorX*this.width),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerX)?isNaN(t.left)?isNaN(t.right)||(this.x=Math.round(e.width-this.displayWidth-t.right+this.pivotX*this.scaleX)):(this.x=Math.round(t.left+this.pivotX*this.scaleX),isNaN(t.right)||(this.width=(e._width-t.left-t.right)/(this.scaleX||.01))):this.x=Math.round(.5*(e.width-this.displayWidth)+t.centerX+this.pivotX*this.scaleX))}},n.resetLayoutY=function(){var t=this._layout;if(isNaN(t.anchorY)||(this.pivotY=t.anchorY*this.height),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerY)?isNaN(t.top)?isNaN(t.bottom)||(this.y=Math.round(e.height-this.displayHeight-t.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(t.top+this.pivotY*this.scaleY),isNaN(t.bottom)||(this.height=(e._height-t.top-t.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(e.height-this.displayHeight)+t.centerY+this.pivotY*this.scaleY))}},n.onMouseOver=function(t){i.stage.event("showtip",this._toolTip)},n.onMouseOut=function(t){i.stage.event("hidetip",this._toolTip)},n._childChanged=function(e){this.callLater(this.changeSize),t.prototype._childChanged.call(this,e)},r(0,n,"displayWidth",function(){return this.width*this.scaleX}),r(0,n,"width",function(){return this._width?this._width:this.measureWidth},function(t){this._width!=t&&(this._width=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),r(0,n,"measureWidth",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.x+i.width*i.scaleX,t))}return t}),r(0,n,"displayHeight",function(){return this.height*this.scaleY}),r(0,n,"height",function(){return this._height?this._height:this.measureHeight},function(t){this._height!=t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),r(0,n,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var e in this._dataSource)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}),r(0,n,"scaleY",t.prototype._$get_scaleY,function(t){i.superGet(w,this,"scaleY")!=t&&(i.superSet(w,this,"scaleY",t),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),r(0,n,"measureHeight",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.y+i.height*i.scaleY,t))}return t}),r(0,n,"scaleX",t.prototype._$get_scaleX,function(t){i.superGet(w,this,"scaleX")!=t&&(i.superSet(w,this,"scaleX",t),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),r(0,n,"top",function(){return this._layout.top},function(t){t!=this._layout.top&&(this.getLayout().top=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),r(0,n,"bottom",function(){return this._layout.bottom},function(t){t!=this._layout.bottom&&(this.getLayout().bottom=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),r(0,n,"left",function(){return this._layout.left},function(t){t!=this._layout.left&&(this.getLayout().left=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),r(0,n,"right",function(){return this._layout.right},function(t){t!=this._layout.right&&(this.getLayout().right=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),r(0,n,"centerX",function(){return this._layout.centerX},function(t){t!=this._layout.centerX&&(this.getLayout().centerX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),r(0,n,"centerY",function(){return this._layout.centerY},function(t){t!=this._layout.centerY&&(this.getLayout().centerY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),r(0,n,"anchorX",function(){return this._layout.anchorX},function(t){t!=this._layout.anchorX&&(this.getLayout().anchorX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),r(0,n,"anchorY",function(){return this._layout.anchorY},function(t){t!=this._layout.anchorY&&(this.getLayout().anchorY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),r(0,n,"tag",function(){return this._tag},function(t){this._tag=t}),r(0,n,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),r(0,n,"comXml",function(){return this._comXml},function(t){this._comXml=t}),r(0,n,"gray",function(){return this._gray},function(t){t!==this._gray&&(this._gray=t,D.gray(this,t))}),r(0,n,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}),e}(w)),N=function(t){function e(){this.lockLayer=null,this.popupEffect=function(t){t.scale(1,1),S.from(t,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,u.backOut,g.create(this,this.doOpen,[t]))},this.closeEffect=function(t,e){S.to(t,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,u.strongOut,g.create(this,this.doClose,[t,e]))},e.__super.call(this),this.maskLayer=new w,this.popupEffectHandler=new g(this,this.popupEffect),this.closeEffectHandler=new g(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,i.stage.addChild(this),i.stage.on("resize",this,this._onResize),E.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}o(e,"laya.ui.DialogManager",w);var n=e.prototype;return n._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close("side")},n.setLockView=function(t){this.lockLayer||(this.lockLayer=new A,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(i.stage.width,i.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))},n._onResize=function(t){var e=this.maskLayer.width=i.stage.width,n=this.maskLayer.height=i.stage.height;this.lockLayer&&this.lockLayer.size(e,n),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,e,n,E.popupBgColor),this.maskLayer.alpha=E.popupBgAlpha;for(var o=this.numChildren-1;o>-1;o--){var r=this.getChildAt(o);r.popupCenter&&this._centerDialog(r)}},n._centerDialog=function(t){t.x=Math.round((i.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((i.stage.height-t.height>>1)+t.pivotY)},n.open=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),e&&this._closeAll(),t.popupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),i&&null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event("open")},n.doOpen=function(t){t.onOpened()},n.lock=function(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},n.close=function(t,e,i){void 0===i&&(i=!1),i&&null!=t.closeEffect?t.closeEffect.runWith([t,e]):this.doClose(t,e),this.event("close")},n.doClose=function(t,e){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(e),t.onClosed(e)},n.closeAll=function(){this._closeAll(),this.event("close")},n._closeAll=function(){for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);e&&null!=e.close&&this.doClose(e)}},n.getDialogsByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&e.push(n)}return e},n.closeByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&(n.close(),e.push(n))}return e},n._checkMask=function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.isModal)return void this.addChildAt(this.maskLayer,t)}},e}(),G=function(t){function e(t){this._bitmap=null,this._skin=null,this._group=null,e.__super.call(this),this.skin=t}o(e,"laya.ui.Image",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new R,this._bitmap.autoCacheCmd=!1},n.setSource=function(t,e){t===this._skin&&e&&(this.source=e,this.onCompResize())},r(0,n,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(this._bitmap.source=t,this.event("loaded"),this.repaint())}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"string"==typeof t?this.skin=t:i.superSet(P,this,"dataSource",t)}),r(0,n,"measureHeight",function(){return this._bitmap.height}),r(0,n,"skin",function(){return this._skin},function(t){if(this._skin!=t)if(this._skin=t,t){var e=m.getRes(t);e?(this.source=e,this.onCompResize()):i.loader.load(this._skin,g.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),r(0,n,"group",function(){return this._group},function(t){t&&this._skin&&m.setGroup(this._skin,t),this._group=t}),r(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=D.fillArray(L.defaultSizeGrid,t,Number)}),r(0,n,"measureWidth",function(){return this._bitmap.width}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(P,this,"width",t),this._bitmap.width=0==t?1e-7:t}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(P,this,"height",t),this._bitmap.height=0==t?1e-7:t}),e}(P),A=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.Box",t);var n=e.prototype;return i.imps(n,{"laya.ui.IBox":!0}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var e in t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=t[e])}}),e}(P),U=function(t){function e(t,i){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,e.__super.call(this),this._labelColors=L.buttonLabelColors,this._stateNum=L.buttonStateNum,void 0===i&&(i=""),this.skin=t,this.label=i}o(e,"laya.ui.Button",t);var a=e.prototype;return i.imps(a,{"laya.ui.ISelect":!0}),a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},a.createChildren=function(){this.graphics=this._bitmap=new R},a.createText=function(){this._text||(this._text=new b,this._text.overflow=b.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},a.onMouse=function(t){if(!1!==this.toggle||!this._selected)return"click"===t.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=e.stateMap[t.type]))},a.changeClips=function(){var t=m.getRes(this._skin);if(t){var e=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=x.getGID());var n=t.$_GID+"-"+this._stateNum,o=T.I.get(n);if(x.isOkTextureList(o)||(o=null),o)this._sources=o;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var r=0;r<this._stateNum;r++)this._sources.push(C.createFromTexture(t,0,i*r,e,i));T.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||e,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e)}else console.log("lose skin",this._skin)},a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},r(0,a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t){this.createText(),this._text.strokeColor=t}),r(0,a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),r(0,a,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeClips),this._setStateChanged())}),r(0,a,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this._setStateChanged())}),r(0,a,"text",function(){return this.createText(),this._text}),r(0,a,"stateNum",function(){return this._stateNum},function(t){"string"==typeof t&&(t=parseInt(t)),this._stateNum!=t&&(this._stateNum=t<1?1:t>3?3:t,this.callLater(this.changeClips))}),r(0,a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=D.fillArray(L.buttonLabelColors,t,String),this._setStateChanged()}),r(0,a,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=D.fillArray(L.buttonLabelColors,t,String),this._setStateChanged()}),r(0,a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),r(0,a,"label",function(){return this._text?this._text.text:null},function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),r(0,a,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),r(0,a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t){this.createText(),this._text.padding=D.fillArray(L.labelPadding,t,Number)}),r(0,a,"labelSize",function(){return this.createText(),this._text.fontSize},function(t){this.createText(),this._text.fontSize=t}),r(0,a,"labelStroke",function(){return this.createText(),this._text.stroke},function(t){this.createText(),this._text.stroke=t}),r(0,a,"labelBold",function(){return this.createText(),this._text.bold},function(t){this.createText(),this._text.bold=t}),r(0,a,"labelFont",function(){return this.createText(),this._text.font},function(t){this.createText(),this._text.font=t}),r(0,a,"labelAlign",function(){return this.createText(),this._text.align},function(t){this.createText(),this._text.align=t}),r(0,a,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),r(0,a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=D.fillArray(L.defaultSizeGrid,t,Number)}),r(0,a,"width",t.prototype._$get_width,function(t){i.superSet(P,this,"width",t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))}),r(0,a,"height",t.prototype._$get_height,function(t){i.superSet(P,this,"height",t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))}),r(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.label=t+"":i.superSet(P,this,"dataSource",t)}),r(0,a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){this._bitmap._offset=t?D.fillArray([1,1],t,Number):[]}),n(e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e}(P),k=function(t){function e(t,i,n){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,e.__super.call(this),void 0===i&&(i=1),void 0===n&&(n=1),this._clipX=i,this._clipY=n,this.skin=t}o(e,"laya.ui.Clip",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new R},n._onDisplay=function(t){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},n.changeClip=function(){if(this._clipChanged=!1,this._skin){var t=m.getRes(this._skin);t?this.loadComplete(this._skin,t):i.loader.load(this._skin,g.create(this,this.loadComplete,[this._skin]))}},n.loadComplete=function(t,e){if(t===this._skin&&e){var i=this._clipWidth||Math.ceil(e.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(e.sourceHeight/this._clipY),o=this._skin+i+n,r=T.I.get(o);if(x.isOkTextureList(r)||(r=null),r)this._sources=r;else{this._sources=[];for(var a=0;a<this._clipY;a++)for(var s=0;s<this._clipX;s++)this._sources.push(C.createFromTexture(e,i*s,n*a,i,n));T.I.set(o,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},n.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._isPlaying=!0,this.index=t,this._toIndex=e,this._index++,i.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},n._loop=function(){this._style.visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},n.stop=function(){this._isPlaying=!1,i.timer.clear(this,this._loop),this.event("complete")},n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},r(0,n,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?this._setClipChanged():this._bitmap.source=null)}),r(0,n,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),r(0,n,"clipX",function(){return this._clipX},function(t){this._clipX=t||1,this._setClipChanged()}),r(0,n,"clipY",function(){return this._clipY},function(t){this._clipY=t||1,this._setClipChanged()}),r(0,n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),r(0,n,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this._setClipChanged()}),r(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=D.fillArray(L.defaultSizeGrid,t,Number)}),r(0,n,"group",function(){return this._group},function(t){t&&this._skin&&m.setGroup(this._skin,t),this._group=t}),r(0,n,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this._setClipChanged()}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(P,this,"width",t),this._bitmap.width=t}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(P,this,"height",t),this._bitmap.height=t}),r(0,n,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),r(0,n,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),r(0,n,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),r(0,n,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}),r(0,n,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.index=parseInt(t):i.superSet(P,this,"dataSource",t)}),r(0,n,"bitmap",function(){return this._bitmap}),e}(P),B=function(t){function e(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,e.__super.call(this)}o(e,"laya.ui.ColorPicker",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._colorPanel&&this._colorPanel.destroy(e),this._colorButton&&this._colorButton.destroy(e),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._colorButton=new U),this._colorPanel=new A,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new w),this._colorPanel.addChild(this._colorBlock=new w),this._colorPanel.addChild(this._colorInput=new _)},n.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},n.onPanelMouseDown=function(t){t.stopPropagation()},n.changePanel=function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(t=this._colorTiles.graphics).clear();for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;i<12;i++)for(var n=0;n<20;n++){var o=0;o=0===n?e[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var r=D.toColor(o);this._colors.push(r);var a=n*this._gridSize,s=i*this._gridSize;t.drawRect(a,s,this._gridSize,this._gridSize,r,"#000000")}},n.onColorButtonClick=function(t){this._colorPanel.parent?this.close():this.open()},n.open=function(){var t=this.localToGlobal(new y),e=t.x+this._colorPanel.width<=i.stage.width?t.x:i.stage.width-this._colorPanel.width,n=t.y+this._colorButton.height;n=n+this._colorPanel.height<=i.stage.height?n:t.y-this._colorPanel.height,this._colorPanel.pos(e,n),this._colorPanel.zOrder=1001,i._currentStage.addChild(this._colorPanel),i.stage.on("mousedown",this,this.removeColorBox)},n.close=function(){i.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},n.removeColorBox=function(t){this.close()},n.onColorFieldKeyDown=function(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())},n.onColorInputChange=function(t){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},n.onColorTilesClick=function(t){this.selectedColor=this.getColorByMouse(),this.close()},n.onColorTilesMouseMove=function(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)},n.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]},n.drawBlock=function(t){var e=this._colorBlock.graphics;e.clear();var i=t||"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")},n.changeColor=function(){var t=this.graphics;t.clear();var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)},n._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},r(0,n,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this._setPanelChanged()}),r(0,n,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",c.EMPTY.setTo("change",this,this)))}),r(0,n,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.skin=t,this.changeColor()}),r(0,n,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this._setPanelChanged()}),r(0,n,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this._setPanelChanged()}),r(0,n,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this._setPanelChanged()}),e}(P),O=function(t){function e(t,i){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,e.__super.call(this),this._itemColors=L.comboBoxItemColors,this.skin=t,this.labels=i}o(e,"laya.ui.ComboBox",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._button&&this._button.destroy(e),this._list&&this._list.destroy(e),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},n.createChildren=function(){this.addChild(this._button=new U),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},n._createList=function(){this._list=new j,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},n._setListEvent=function(t){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=g.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},n.onListDown=function(t){t.stopPropagation()},n.onScrollBarDown=function(t){t.stopPropagation()},n.onButtonMouseDown=function(t){this.callLater(this.switchTo,[!this._isOpen])},n.changeList=function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},n.onlistItemMouse=function(t,e){var i=t.type;if("mouseover"===i||"mouseout"===i){if(this._isCustomList)return;var n=this._list.getCell(e);if(!n)return;var o=n.getChildByName("label");o&&("mouseover"===i?(o.bgColor=this._itemColors[0],o.color=this._itemColors[1]):(o.bgColor=null,o.color=this._itemColors[2]))}else"click"===i&&(this.selectedIndex=e,this.isOpen=!1)},n.switchTo=function(t){this.isOpen=t},n.changeOpen=function(){this.isOpen=!this._isOpen},n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var e=this._list.array||[];e.length=0;for(var i=0,n=this._labels.length;i<n;i++)e.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=e},n.changeSelected=function(){this._button.label=this.selectedLabel},n._onStageMouseWheel=function(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)},n.removeList=function(t){i.stage.off("mousedown",this,this.removeList),i.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[c.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),r(0,n,"measureHeight",function(){return this._button.height}),r(0,n,"skin",function(){return this._button.skin},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),r(0,n,"measureWidth",function(){return this._button.width}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(P,this,"width",t),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),r(0,n,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),r(0,n,"labels",function(){return this._labels.join(",")},function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(P,this,"height",t),this._button.height=this._height}),r(0,n,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),r(0,n,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),r(0,n,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),r(0,n,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=D.fillArray(this._itemColors,t,String),this._listChanged=!0}),r(0,n,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),r(0,n,"scrollBar",function(){return this.list.scrollBar}),r(0,n,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(y.TEMP.setTo(0,0)),n=e.y+this._button.height;n=n+this._listHeight<=i.stage.height?n:e.y-this._listHeight,this._list.pos(e.x,n),this._list.zOrder=1001,i._currentStage.addChild(this._list),i.stage.once("mousedown",this,this.removeList),i.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),r(0,n,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),r(0,n,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),r(0,n,"button",function(){return this._button}),r(0,n,"list",function(){return this._list||this._createList(),this._list},function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):i.superSet(P,this,"dataSource",t)}),r(0,n,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}),r(0,n,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=D.fillArray(L.labelPadding,t,Number)}),r(0,n,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),r(0,n,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),r(0,n,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),e}(P),W=function(t){function e(t){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,e.__super.call(this),this._showButtons=E.showButtons,this._touchScrollEnable=E.touchScrollEnable,this._mouseWheelEnable=E.mouseWheelEnable,this.skin=t,this.max=1}o(e,"laya.ui.ScrollBar",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),this.stopScroll(),this.target=null,t.prototype.destroy.call(this,e),this.upButton&&this.upButton.destroy(e),this.downButton&&this.downButton.destroy(e),this.slider&&this.slider.destroy(e),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},n.createChildren=function(){this.addChild(this.slider=new V),this.addChild(this.upButton=new U),this.addChild(this.downButton=new U)},n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},n.onButtonMouseDown=function(t){var e=t.currentTarget===this.upButton;this.slide(e),i.timer.once(L.scrollBarDelayTime,this,this.startLoop,[e]),i.stage.once("mouseup",this,this.onStageMouseUp)},n.startLoop=function(t){i.timer.frameLoop(1,this,this.slide,[t])},n.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},n.onStageMouseUp=function(t){i.timer.clear(this,this.startLoop),i.timer.clear(this,this.slide)},n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},n.changeSize=function(){t.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},n.setScroll=function(t,e,i){this.runCallLater(this.changeSize),this.slider.setSlider(t,e,i),this.slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)},n.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},n.onTargetMouseDown=function(t){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new y),this._lastPoint.setTo(i.stage.mouseX,i.stage.mouseY),i.timer.clear(this,this.tweenMove),S.clearTween(this),i.stage.once("mouseup",this,this.onStageMouseUp2),i.stage.once("mouseout",this,this.onStageMouseUp2),i.timer.frameLoop(1,this,this.loop)},n.loop=function(){var t=i.stage.mouseY,e=i.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?i.stage._canvasTransform.getScaleY():i.stage._canvasTransform.getScaleX()))>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},n.onStageMouseUp2=function(t){if(i.stage.off("mouseup",this,this.onStageMouseUp2),i.stage.off("mouseout",this,this.onStageMouseUp2),i.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?S.to(this,{value:this.min},this.elasticBackTime,u.sineOut,g.create(this,this.elasticOver)):this._value>this.max&&S.to(this,{value:this.max},this.elasticBackTime,u.sineOut,g.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?i.stage.mouseY-this._lastPoint.y:i.stage.mouseX-this._lastPoint.x);for(var e=0,n=Math.min(this._offsets.length,3),o=0;o<n;o++)e+=this._offsets[this._offsets.length-1-o];if(this._lastOffset=e/n,(e=Math.abs(this._lastOffset))<2)return void this.event("end");e>60&&(this._lastOffset=this._lastOffset>0?60:-60);var r=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));i.timer.frameLoop(1,this,this.tweenMove,[r])}},n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&S.to(this,{alpha:0},500),this.event("end")},n.tweenMove=function(t){this._lastOffset*=this.rollRatio;var e=NaN;if(t>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,e=.5*-(this.min-t-this.value),this._lastOffset>e&&(this._lastOffset=e)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e=.5*-(this.max+t-this.value),this._lastOffset<e&&(this._lastOffset=e))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(i.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?S.to(this,{value:this.min},this.elasticBackTime,u.sineOut,g.create(this,this.elasticOver)):this._value>this.max?S.to(this,{value:this.max},this.elasticBackTime,u.sineOut,g.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&S.to(this,{alpha:0},500)}},n.stopScroll=function(){this.onStageMouseUp2(null),i.timer.clear(this,this.tweenMove),S.clearTween(this)},r(0,n,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),r(0,n,"max",function(){return this.slider.max},function(t){this.slider.max=t}),r(0,n,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),r(0,n,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),r(0,n,"min",function(){return this.slider.min},function(t){this.slider.min=t}),r(0,n,"value",function(){return this._value},function(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),r(0,n,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t}),r(0,n,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t}),r(0,n,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(P,this,"dataSource",t)}),r(0,n,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,L.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,L.scrollBarMinNum))}),r(0,n,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),r(0,n,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),r(0,n,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),r(0,n,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t,this.target=this._target}),r(0,n,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t}),e}(P),V=function(t){function e(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,e.__super.call(this),this.skin=t}o(e,"laya.ui.Slider",t);var a=e.prototype;return a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._progress&&this._progress.destroy(e),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},a.createChildren=function(){this.addChild(this._bg=new G),this.addChild(this._bar=new U)},a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},a.onBarMouseDown=function(t){this._globalSacle||(this._globalSacle=new y),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=i.stage.mouseX,this._ty=i.stage.mouseY,i.stage.on("mousemove",this,this.mouseMove),i.stage.once("mouseup",this,this.mouseUp),i.stage.once("mouseout",this,this.mouseUp),this.showValueText()},a.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar.x+20,t.y=.5*(this._bar.height-t.height)+this._bar.y):(t.y=this._bar.y-20,t.x=.5*(this._bar.width-t.width)+this._bar.x)}},a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},a.mouseUp=function(t){i.stage.off("mousemove",this,this.mouseMove),i.stage.off("mouseup",this,this.mouseUp),i.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},a.mouseMove=function(t){var e=this._value;this.isVertical?(this._bar.y+=(i.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(i.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=i.stage.mouseX,this._ty=i.stage.mouseY;var n=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*n)/n,this._value!=e&&this.sendChangeEvent(),this.showValueText()},a.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},a.changeSize=function(){t.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},a.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=i<t?t:i>e?e:i},a.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},a.onBgMouseDown=function(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},r(0,a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),r(0,a,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var e=this._skin.replace(".png","$progress.png");m.getRes(e)&&(this._progress||(this.addChild(this._progress=new G),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=e),this.setBarPoint(),this.callLater(this.changeValue)}}),r(0,a,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),r(0,a,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),r(0,a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),r(0,a,"tick",function(){return this._tick},function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}),r(0,a,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),r(0,a,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),r(0,a,"value",function(){return this._value},function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}),r(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(P,this,"dataSource",t)}),r(0,a,"bar",function(){return this._bar}),n(e,["label",function(){return this.label=new F}]),e}(P),F=function(t){function e(t){this._tf=null,e.__super.call(this),void 0===t&&(t=""),d.defaultColor=L.labelColor,this.text=t}o(e,"laya.ui.Label",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._tf=null},n.createChildren=function(){this.addChild(this._tf=new b)},n.changeText=function(t){this._tf.changeText(t)},r(0,n,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=D.fillArray(L.labelPadding,t,Number)}),r(0,n,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),r(0,n,"align",function(){return this._tf.align},function(t){this._tf.align=t}),r(0,n,"text",function(){return this._tf.text},function(t){this._tf.text!=t&&(t&&(t=D.adptString(t+"")),this._tf.text=t,this.event("change"),this._width&&this._height||this.onCompResize())}),r(0,n,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),r(0,n,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),r(0,n,"font",function(){return this._tf.font},function(t){this._tf.font=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.text=t+"":i.superSet(P,this,"dataSource",t)}),r(0,n,"color",function(){return this._tf.color},function(t){this._tf.color=t}),r(0,n,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),r(0,n,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),r(0,n,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),r(0,n,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),r(0,n,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),r(0,n,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),r(0,n,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),r(0,n,"textField",function(){return this._tf}),r(0,n,"measureWidth",function(){return this._tf.width}),r(0,n,"measureHeight",function(){return this._tf.height}),r(0,n,"width",function(){return this._width||this._tf.text?i.superGet(P,this,"width"):0},function(t){i.superSet(P,this,"width",t),this._tf.width=t}),r(0,n,"height",function(){return this._height||this._tf.text?i.superGet(P,this,"height"):0},function(t){i.superSet(P,this,"height",t),this._tf.height=t}),r(0,n,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t}),r(0,n,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t}),r(0,n,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t}),e}(P),Z=function(t){function e(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e.__super.call(this),this.skin=t}o(e,"laya.ui.ProgressBar",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._bg=this._bar=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._bg=new G),this.addChild(this._bar=new G),this._bar._bitmap.autoCacheCmd=!1},n.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),i=Number(t[1]),n=(this.width-e-i)*this._value;this._bar.width=e+i+n,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value},r(0,n,"measureHeight",function(){return this._bg.height}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),r(0,n,"measureWidth",function(){return this._bg.width}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(P,this,"height",t),this._bg.height=this._height,this._bar.height=this._height}),r(0,n,"bar",function(){return this._bar}),r(0,n,"value",function(){return this._value},function(t){this._value!=t&&(t=t>1?1:t<0?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),r(0,n,"bg",function(){return this._bg}),r(0,n,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(P,this,"width",t),this._bg.width=this._width,this.callLater(this.changeValue)}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(P,this,"dataSource",t)}),e}(P),X=(function(t){function e(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e.__super.call(this),this._tipBox=new P,this._tipBox.addChild(this._tipText=new b),this._tipText.x=this._tipText.y=5,this._tipText.color=e.tipTextColor,this._defaultTipHandler=this._showDefaultTip,i.stage.on("showtip",this,this._onStageShowTip),i.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}o(e,"laya.ui.TipManager",P);var n=e.prototype;n._onStageHideTip=function(t){i.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},n._onStageShowTip=function(t){i.timer.once(e.tipDelay,this,this._showTip,[t],!0)},n._showTip=function(t){if("string"==typeof t){var e=String(t);Boolean(e)&&this._defaultTipHandler(e)}else t instanceof laya.utils.Handler?t.run():"function"==typeof t&&t.apply();i.stage.on("mousemove",this,this._onStageMouseMove),i.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},n._onStageMouseDown=function(t){this.closeAll()},n._onStageMouseMove=function(t){this._showToStage(this,e.offsetX,e.offsetY)},n._showToStage=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=t.getBounds();t.x=i.stage.mouseX+e,t.y=i.stage.mouseY+n,t.x+o.width>i.stage.width&&(t.x-=o.width+e),t.y+o.height>i.stage.height&&(t.y-=o.height+n)},n.closeAll=function(){i.timer.clear(this,this._showTip),i.stage.off("mousemove",this,this._onStageMouseMove),i.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},n.showDislayTip=function(t){this.addChild(t),this._showToStage(this),i._currentStage.addChild(this)},n._showDefaultTip=function(t){this._tipText.text=t;var n=this._tipBox.graphics;n.clear(),n.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),i._currentStage.addChild(this)},r(0,n,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t}),e.offsetX=10,e.offsetY=15,e.tipTextColor="#ffffff",e.tipBackColor="#111111",e.tipDelay=200}(),function(t){function e(t){this.advsListArr=[],this.resUrl="https://unioncdn.layabox.com/config/iconlist.json",this._data=[],this._resquestTime=36e4,this._appid=null,this._appCodeImgStr=null,this._playIndex=0,this._lunboTime=5e3,e.__super.call(this),this._http=new s.window.XMLHttpRequest,this.skin=t,this.init(),this.size(120,120)}o(e,"laya.ui.AdvImage",t);var n=e.prototype;n.init=function(){s.onMiniGame&&this.isSupportJump?(i.timer.loop(this._resquestTime,this,this.onGetAdvsListData),this.onGetAdvsListData(),this.initEvent()):this.visible=!1},n.initEvent=function(){this.on("click",this,this.onAdvsImgClick)},n.onAdvsImgClick=function(){this.getCurrentAppidObj()&&this.jumptoGame()},n.revertAdvsData=function(){this.advsListArr[this._playIndex]&&(this.visible=!0,this.skin=this.advsListArr[this._playIndex])},n.jumptoGame=function(){var t=this;s.onMiniGame&&this.isSupportJump&&wx.navigateToMiniProgram({appId:this._appid,path:"",extraData:"",envVersion:"release",success:function(){console.log("-------------跳转成功--------------")},fail:function(){console.log("-------------跳转失败--------------")},complete:function(){console.log("-------------跳转接口调用成功--------------"),t.updateAdvsInfo()}.bind(this)})},n.updateAdvsInfo=function(){this.visible=!1,this.onLunbo(),i.timer.loop(this._lunboTime,this,this.onLunbo)},n.onLunbo=function(){this._playIndex>=this.advsListArr.length-1?this._playIndex=0:this._playIndex+=1,this.visible=!0,this.revertAdvsData()},n.getCurrentAppidObj=function(){return this.advsListArr[this._playIndex]},n.onGetAdvsListData=function(){var t=this,e=this.randRange(1e4,1e6),i=this.resUrl+"?"+e;this._http.open("get",i,!0),this._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._http.responseType="text",this._http.onerror=function(e){t._onError(e)},this._http.onload=function(e){t._onLoad(e)},this._http.send(null)},n.randRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},n._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},n._onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},n.error=function(t){this.event("error",t)},n.complete=function(){try{this._data=this._http.response||this._http.responseText,this._data=JSON.parse(this._data),this.advsListArr=this._data.list,this._appid=this._data.appid,this._appCodeImgStr=this._data.qrcode,this.updateAdvsInfo(),this.revertAdvsData()}catch(t){!1,this.error(t.message)}},n.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),i.timer.clear(this,this.onLunbo),i.timer.clear(this,this.onGetAdvsListData),this.clear()},r(0,n,"isSupportJump",function(){if(s.onMiniGame){return"function"==typeof wx.navigateToMiniProgram}return!1})}(G),function(t){function e(){this._idMap=null,this._aniList=null,this._watchMap={},e.__super.call(this)}var r;o(e,"laya.ui.View",A);var s=e.prototype;return s.createView=function(t){if(t.animations&&!this._idMap&&(this._idMap={}),e.createComp(t,this,this),t.animations){var i,n,o=[],r=t.animations,a=0,s=r.length;for(a=0;a<s;a++){switch(i=new p,n=r[a],i._setUp(this._idMap,n),this[n.name]=i,i._setControlNode(this),n.action){case 1:i.play(0,!1);break;case 2:i.play(0,!0)}o.push(i)}this._aniList=o}this._width>0&&null==t.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},s.onEvent=function(t,e){},s.loadUI=function(t){var i=e.uiMap[t];i&&this.createView(i)},s.destroy=function(t){void 0===t&&(t=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,t)},s.changeData=function(t){var e=this._watchMap[t];if(e){console.log("change",t);for(var i=0,n=e.length;i<n;i++){e[i].exe(this)}}},e._regs=function(){for(var t in e.uiClassMap)l.regClass(t,e.uiClassMap[t])},e.createComp=function(t,n,o,r){if(!(n=n||e.getCompInstance(t)))return console.warn("can not create:"+t.type),null;var a=t.child;if(a)for(var s=n instanceof laya.ui.List,h=0,u=a.length;h<u;h++){var c=a[h];if(!n.hasOwnProperty("itemRender")||"render"!=c.props.name&&"render"!==c.props.renderType)if("Graphic"==c.type)l.addGraphicsToSprite(c,n);else if(l.isDrawType(c.type))l.addGraphicToSprite(c,n,!0);else{if(s){var d=[],p=e.createComp(c,null,o,d);d.length&&(p._$bindData=d)}else p=e.createComp(c,null,o,r);"Script"==c.type?"owner"in p?p.owner=n:"target"in p&&(p.target=n):"mask"==c.props.renderType||"mask"==c.props.name?n.mask=p:p instanceof laya.display.Sprite&&n.addChild(p)}else n.itemRender=c}var f=t.props;for(var g in f){var _=f[g];e.eventDic[g]?_&&o&&n.on(g,o,o.onEvent,[_]):e.setCompValue(n,g,_,o,r)}return i.__typeof(n,"laya.ui.IItem")&&n.initItems(),t.compId&&o&&o._idMap&&(o._idMap[t.compId]=n),n},e.setCompValue=function(t,n,o,a,s){if("string"==typeof o&&o.indexOf("${")>-1){if(e._sheet||(e._sheet=l.getClass("laya.data.Table")),!e._sheet)return void console.warn("Can not find class Sheet");if(s)s.push(t,n,o);else if(a){-1==o.indexOf("].")&&(o=o.replace(".","[0]."));var h=new r(t,n,o);h.exe(a);for(var u,c,d=o.replace(/\[.*?\]\./g,".");null!=(u=e._parseWatchData.exec(d));){for(var p=u[1];null!=(c=e._parseKeyWord.exec(p));){var f=c[0],g=a._watchMap[f]||(a._watchMap[f]=[]);g.push(h),e._sheet.I.notifer.on(f,a,a.changeData,[f])}(g=a._watchMap[p]||(a._watchMap[p]=[])).push(h),e._sheet.I.notifer.on(p,a,a.changeData,[p])}}}else if("var"===n&&a)a[o]=t;else if("onClick"==n){var _=i._runScript("(function(){"+o+"})");t.on("click",a,_)}else t[n]="true"===o||"false"!==o&&o},e.getCompInstance=function(t){var n,o=t.props?t.props.runtime:null;return n=o?e.viewClassMap[o]||e.uiClassMap[o]||i.__classmap[o]:e.uiClassMap[t.type],t.props&&t.props.hasOwnProperty("renderType")&&"instance"==t.props.renderType?n.instance:n?new n:null},e.regComponent=function(t,i){e.uiClassMap[t]=i,l.regClass(t,i)},e.regViewRuntime=function(t,i){e.viewClassMap[t]=i},e.uiMap={},e.viewClassMap={},e._sheet=null,n(e,["uiClassMap",function(){return this.uiClassMap={ViewStack:et,LinkButton:U,TextArea:ut,ColorPicker:B,Box:A,Button:U,CheckBox:H,Clip:k,ComboBox:O,Component:P,HScrollBar:J,HSlider:$,Image:G,Label:F,List:j,Panel:K,ProgressBar:Z,Radio:Q,RadioGroup:lt,ScrollBar:W,Slider:V,Tab:ht,TextInput:nt,View:e,VScrollBar:it,VSlider:ot,Tree:tt,HBox:at,VBox:st,Sprite:w,Animation:a,Text:b,FontClip:z}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),e.__init$=function(){e._regs(),r=function(){function t(t,e,i){this.comp=null,this.prop=null,this.value=null,this.comp=t,this.prop=e,this.value=i}o(t,"");return t.prototype.exe=function(t){var e=D.getBindFun(this.value);this.comp[this.prop]=e.call(this,t)},t}()},e}()),H=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i)}o(e,"laya.ui.CheckBox",t);var n=e.prototype;return n.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},n.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"boolean"==typeof t?this.selected=t:"string"==typeof t?this.selected="true"===t:i.superSet(U,this,"dataSource",t)}),e}(U),Y=function(t){function e(){this._space=0,this._align="none",this._itemChanged=!1,e.__super.call(this)}o(e,"laya.ui.LayoutBox",A);var i=e.prototype;return i.addChild=function(t){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t)},i.onResize=function(t){this._setItemChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t,e)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t)},i.refresh=function(){this._setItemChanged()},i.changeItems=function(){this._itemChanged=!1},i.sortItem=function(t){t&&t.sort(function(t,e){return t.y-e.y})},i._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},r(0,i,"space",function(){return this._space},function(t){this._space=t,this._setItemChanged()}),r(0,i,"align",function(){return this._align},function(t){this._align=t,this._setItemChanged()}),e}(),z=function(t){function e(t,i){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,e.__super.call(this),t&&(this.skin=t),i&&(this.sheet=i)}o(e,"laya.ui.FontClip",t);var n=e.prototype;return n.createChildren=function(){this._bitmap=new R,this.on("loaded",this,this._onClipLoaded)},n._onClipLoaded=function(){this.callLater(this.changeValue)},n.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var t;if(t=this._sources[0]){var e="horizontal"===this._direction;e?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var i=0;if(this._width)switch(this._align){case"center":i=.5*(this._width-this._wordsW);break;case"right":i=this._width-this._wordsW;break;default:i=0}for(var n=0,o=this._valueArr.length;n<o;n++){var r=this._indexMap[this._valueArr.charAt(n)];this.sources[r]&&(t=this.sources[r],e?this.graphics.drawTexture(t,i+n*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawTexture(t,0+i,n*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}}},n.destroy=function(e){void 0===e&&(e=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),t.prototype.destroy.call(this,e)},r(0,n,"sheet",function(){return this._sheet},function(t){t+="",this._sheet=t;var e=t.split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var n=e[i].split(""),o=0,r=n.length;o<r;o++)this._indexMap[n[o]]=i*this._clipX+o}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(k,this,"height",t),this.callLater(this.changeValue)}),r(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeValue)}),r(0,n,"value",function(){return this._valueArr?this._valueArr:""},function(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(k,this,"width",t),this.callLater(this.changeValue)}),r(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}),r(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),r(0,n,"align",function(){return this._align},function(t){this._align=t,this.callLater(this.changeValue)}),r(0,n,"measureWidth",function(){return this._wordsW}),r(0,n,"measureHeight",function(){return this._wordsH}),e}(k),j=function(t){function e(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new y,e.__super.call(this)}o(e,"laya.ui.List",t);var n=e.prototype;return i.imps(n,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),n.destroy=function(t){void 0===t&&(t=!0),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),laya.ui.Component.prototype.destroy.call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},n.createChildren=function(){this.addChild(this._content=new A)},n.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=i.superGet(A,this,"cacheAs")),i.superSet(A,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(A,this,"cacheAs",this._$P.cacheAs)},n._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)},n.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),e=t.width+this._spaceX||1,i=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var n=this._width?this._width:e*this.repeatX-this._spaceX,o=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-o-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=o:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=n),this.setContentSize(n,o);var r=this._isVertical?this.repeatX:this.repeatY,a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,r,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},n._getOneCell=function(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t.x,t.y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]},n._createItems=function(t,e,i){var n=this._content,o=this._getOneCell(),r=o.width+this._spaceX,a=o.height+this._spaceY;if(this.cacheContent){var s=new A;s.cacheAsBitmap=!0,s.pos((this._isVertical?0:t)*r,(this._isVertical?t:0)*a),this._content.addChild(s),this._content.optimizeScrollRect=!0,n=s}else{for(var l=[],h=this._cells.length-1;h>-1;h--){var u=this._cells[h];u.removeSelf(),l.push(u)}this._cells.length=0}for(var c=t;c<i;c++)for(var d=0;d<e;d++)(o=l&&l.length?l.pop():this.createItem()).x=(this._isVertical?d:c)*r-n.x,o.y=(this._isVertical?c:d)*a-n.y,o.name="item"+(c*e+d),n.addChild(o),this.addCell(o)},n.createItem=function(){var t=[];if("function"==typeof this._itemRender)var e=new this._itemRender;else e=X.createComp(this._itemRender,null,null,t);if(0==t.length&&e._watchMap){var i=e._watchMap;for(var n in i)for(var o=i[n],r=0;r<o.length;r++){var a=o[r];t.push(a.comp,a.prop,a.value)}}return t.length&&(e._$bindData=t),e},n.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},n.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var t=0;t=0;for(var e=0;e<1e4;e++){var i=this.getChildByName("item"+e);{if(!i)break;this.addCell(i),t++}}this.repeatY=t}},n.setContentSize=function(t,e){this._content.width=t,this._content.height=e,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new v),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,t,e),this._content.scrollRect=this._content.scrollRect),this.event("resize")},n.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var e=t.currentTarget,i=this._startIndex+this._cells.indexOf(e);i<0||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(e,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===i||this.changeCellState(e,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))},n.changeCellState=function(t,e,i){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=e,n.index=i)},n.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},n.onScrollBarChange=function(t){this.runCallLater(this.changeCells);var e=this._scrollBar.value,i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,o=Math.floor(e/this._cellSize);if(this.cacheContent)a=n+1,this._createdLine-o<a&&(this._createItems(this._createdLine,i,this._createdLine+a),this.renderItems(this._createdLine*i,0),this._createdLine+=a);else{var r=o*i,a=0;if(r>this._startIndex){a=r-this._startIndex;var s=!0,l=this._startIndex+i*(n+1);this._isMoved=!0}else r<this._startIndex&&(a=this._startIndex-r,s=!1,l=this._startIndex-1,this._isMoved=!0);for(var h=0;h<a;h++){if(s){var u=this._cells.shift();this._cells[this._cells.length]=u;var c=l+h}else u=this._cells.pop(),this._cells.unshift(u),c=l-h;var d=Math.floor(c/i)*this._cellSize;this._isVertical?u.y=d:u.x=d,this.renderItem(u,c)}this._startIndex=r,this.changeSelectStatus()}var p=this._content.scrollRect;this._isVertical?(p.y=e-this._offset.y,p.x=-this._offset.x):(p.y=-this._offset.y,p.x=e-this._offset.x),this._content.scrollRect=p},n.posCell=function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t.y=n:t.x=n}},n.changeSelectStatus=function(){for(var t=0,e=this._cells.length;t<e;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},n.renderItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=t,n=e||this._cells.length;i<n;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},n.renderItem=function(t,e){this._array&&e>=0&&e<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[e],this._bindData(t,this._array[e])):t.dataSource=this._array[e],this.cacheContent||this.posCell(t,e),this.hasListener("render")&&this.event("render",[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])):(t.visible=!1,t.dataSource=null)},n._bindData=function(t,e){for(var i=t._$bindData,n=0,o=i.length;n<o;n++){var r=i[n++],a=i[n++],s=i[n],l=D.getBindFun(s);r[a]=l.call(this,e)}},n.refresh=function(){this.array=this._array},n.getItem=function(t){return t>-1&&t<this._array.length?this._array[t]:null},n.changeItem=function(t,e){t>-1&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},n.setItem=function(t,e){this.changeItem(t,e)},n.addItem=function(t){this._array.push(t),this.array=this._array},n.addItemAt=function(t,e){this._array.splice(e,0,t),this.array=this._array},n.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},n.getCell=function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},n.scrollTo=function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t},n.tweenTo=function(t,e,i){if(void 0===e&&(e=200),this._scrollBar){var n=this._isVertical?this.repeatX:this.repeatY;S.to(this._scrollBar,{value:Math.floor(t/n)*this._cellSize},e,null,i,0,!0)}else this.startIndex=t,i&&i.run()},n._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},n.commitMeasure=function(){this.runCallLater(this.changeCells)},r(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){i.superSet(A,this,"cacheAs",t),this._scrollBar&&(this._$P.cacheAs=null,"none"!==t?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),r(0,n,"content",function(){return this._content}),r(0,n,"height",t.prototype._$get_height,function(t){t!=this._height&&(i.superSet(A,this,"height",t),this._setCellChanged())}),r(0,n,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;e>-1;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}),r(0,n,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new it;e.name="scrollBar",e.right=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),r(0,n,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),r(0,n,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new J;e.name="scrollBar",e.bottom=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),r(0,n,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t,this._setCellChanged()}),r(0,n,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange)))}),r(0,n,"width",t.prototype._$get_width,function(t){t!=this._width&&(i.superSet(A,this,"width",t),this._setCellChanged())}),r(0,n,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t,this._setCellChanged()}),r(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this._setCellChanged()}),r(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this._setCellChanged()}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}),r(0,n,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),r(0,n,"length",function(){return this._array?this._array.length:0}),r(0,n,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),r(0,n,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}),r(0,n,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells),this._array=t||[];var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,o=Math.ceil(e/i);(this._cellOffset>0?this.totalPage+1:this.totalPage)>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/o,this._scrollBar.setScroll(0,(o-n)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.array=t:i.superSet(A,this,"dataSource",t)}),r(0,n,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e}(A),J=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.HScrollBar",t);return e.prototype.initialize=function(){t.prototype.initialize.call(this),this.slider.isVertical=!1},e}(W),K=function(t){function e(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,e.__super.call(this),this.width=this.height=100}o(e,"laya.ui.Panel",t);var n=e.prototype;return n.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},n.destroyChildren=function(){this._content.destroyChildren()},n.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new A)},n.addChild=function(t){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t)},n.onResize=function(){this._setScrollChanged()},n.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,e)},n.removeChild=function(t){return t.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)},n.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)},n.removeChildren=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=2147483647),this._content.removeChildren(t,e),this._setScrollChanged(),this},n.getChildAt=function(t){return this._content.getChildAt(t)},n.getChildByName=function(t){return this._content.getChildByName(t)},n.getChildIndex=function(t){return this._content.getChildIndex(t)},n.changeScroll=function(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,i=this._vScrollBar,n=this._hScrollBar,o=i&&e>this._height,r=n&&t>this._width,a=o?this._width-i.width:this._width,s=r?this._height-n.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(r?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=s/e,i.setScroll(0,e-s,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(o?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=a/t,n.setScroll(0,t-a,n.value))},n.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},n.setContentSize=function(t,e){var i=this._content;i.width=t,i.height=e,i.scrollRect||(i.scrollRect=new v),i.scrollRect.setTo(0,0,t,e),i.scrollRect=i.scrollRect},n.onScrollBarChange=function(t){var e=this._content.scrollRect;if(e){var i=Math.round(t.value);t.isVertical?e.y=i:e.x=i,this._content.scrollRect=e}},n.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},n.refresh=function(){this.changeScroll()},n.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=i.superGet(A,this,"cacheAs")),i.superSet(A,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(A,this,"cacheAs",this._$P.cacheAs)},n._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},r(0,n,"numChildren",function(){return this._content.numChildren}),r(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new J),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t}),r(0,n,"contentWidth",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.x+i.width*i.scaleX,t)}return t}),r(0,n,"contentHeight",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.y+i.height*i.scaleY,t)}return t}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(A,this,"width",t),this._setScrollChanged()}),r(0,n,"hScrollBar",function(){return this._hScrollBar}),r(0,n,"content",function(){return this._content}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(A,this,"height",t),this._setScrollChanged()}),r(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new it),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=t}),r(0,n,"vScrollBar",function(){return this._vScrollBar}),r(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){i.superSet(A,this,"cacheAs",t),this._$P.cacheAs=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e}(A),Q=function(t){function e(t,i){this._value=null,void 0===i&&(i=""),e.__super.call(this,t,i)}o(e,"laya.ui.Radio",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._value=null},i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},i.onClick=function(t){this.selected=!0},r(0,i,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),e}(U),$=function(t){function e(t){e.__super.call(this,t),this.isVertical=!1}return o(e,"laya.ui.HSlider",V),e}(),q=function(t){function e(t,i){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,e.__super.call(this),this.skin=i,this.labels=t}o(e,"laya.ui.UIGroup",t);var n=e.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},n.addItem=function(t,e){void 0===e&&(e=!0);var i=t,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),e&&n>0){var o=this._items[n-1];"horizontal"==this._direction?i.x=o.x+o.width+this._space:i.y=o.y+o.height+this._space}else e&&(i.x=0,i.y=0);return n},n.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var n=t;this.removeChild(n);for(var o=i+1,r=this._items.length;o<r;o++){var a=this._items[o];a.name="item"+(o-1),e&&("horizontal"==this._direction?a.x-=n.width+this._space:a.y-=n.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var s=0;s=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=s}}},n.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=g.create(this,this.itemClick,[t],!1)}},n.itemClick=function(t){this.selectedIndex=t},n.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)},n.createItem=function(t,e){return null},n.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,i=this._items.length;e<i;e++){var n=this._items[e];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this.changeSize()},n.commitMeasure=function(){this.runCallLater(this.changeLabels)},n._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},r(0,n,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._setLabelChanged())}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),r(0,n,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),i=0,n=e.length;i<n;i++){var o=this.createItem(this._skin,e[i]);o.name="item"+i,this.addChild(o)}this.initItems()}}),r(0,n,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}),r(0,n,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}),r(0,n,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}),r(0,n,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}),r(0,n,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}),r(0,n,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}),r(0,n,"labelFont",function(){return this._labelFont},function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}),r(0,n,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}),r(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this._setLabelChanged()}),r(0,n,"space",function(){return this._space},function(t){this._space=t,this._setLabelChanged()}),r(0,n,"items",function(){return this._items}),r(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):i.superSet(A,this,"dataSource",t)}),e}(A),tt=function(t){function e(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e.__super.call(this),this.width=this.height=200}o(e,"laya.ui.Tree",t);var n=e.prototype;return i.imps(n,{"laya.ui.IRender":!0}),n.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},n.createChildren=function(){this.addChild(this._list=new j),this._list.renderHandler=g.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},n.onListChange=function(t){this.event("change")},n.getArray=function(){var t,e=[];for(var i in this._source)t=this._source[i],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),e.push(t));return e},n.getDepth=function(t,e){return void 0===e&&(e=0),null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)},n.getParentOpenStatus=function(t){var e=t.nodeParent;return null==e||!!e.isOpen&&(null==e.nodeParent||this.getParentOpenStatus(e))},n.renderItem=function(t,e){var i=t.dataSource;if(i){t.left=i.x;var n=t.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=e,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var o=t.getChildByName("folder");o&&(2==o.clipY?o.index=i.isDirectory?0:1:o.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}},n.onArrowClick=function(t){var e=t.currentTarget.tag;this._list.array[e].isOpen=!this._list.array[e].isOpen,this.event("open"),this._list.array=this.getArray()},n.setItemState=function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())},n.fresh=function(){this._list.array=this.getArray(),this.repaint()},n.parseXml=function(t,e,i,n){var o,r=t.childNodes,a=r.length;if(!n){o={};var s,l=t.attributes;for(var h in l){var u=(s=l[h]).nodeName,c=s.nodeValue;o[u]="true"==c||"false"!=c&&c}o.nodeParent=i,a>0&&(o.isDirectory=!0),o.hasChild=a>0,e.push(o)}for(var d=0;d<a;d++){var p=r[d];this.parseXml(p,e,o,!1)}},n.parseOpenStatus=function(t,e){for(var i=0,n=e.length;i<n;i++){var o=e[i];if(o.isDirectory)for(var r=0,a=t.length;r<a;r++){var s=t[r];if(s.isDirectory&&this.isSameParent(s,o)&&o.label==s.label){o.isOpen=s.isOpen;break}}}},n.isSameParent=function(t,e){return null==t.nodeParent&&null==e.nodeParent||null!=t.nodeParent&&null!=e.nodeParent&&(t.nodeParent.label==e.nodeParent.label&&this.isSameParent(t.nodeParent,e.nodeParent))},n.filter=function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()},n.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var n;for(var o in t)!(n=t[o]).isDirectory&&String(n.label).toLowerCase().indexOf(i)>-1&&(n.x=0,e.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,e,i)},r(0,n,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),r(0,n,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),r(0,n,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),r(0,n,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),r(0,n,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,i.superSet(A,this,"dataSource",t)}),r(0,n,"source",function(){return this._source}),r(0,n,"scrollBar",function(){return this._list.scrollBar}),r(0,n,"list",function(){return this._list}),r(0,n,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),r(0,n,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),r(0,n,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t}),r(0,n,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),r(0,n,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(A,this,"width",t),this._list.width=t}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(A,this,"height",t),this._list.height=t}),r(0,n,"xml",null,function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}),r(0,n,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e}(A),et=function(t){function e(){this._items=null,this._selectedIndex=0,e.__super.call(this),this._setIndexHandler=g.create(this,this.setIndex,null,!1)}o(e,"laya.ui.ViewStack",t);var n=e.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.setItems=function(t){this.removeChildren();for(var e=0,i=0,n=t.length;i<n;i++){var o=t[i];o&&(o.name="item"+e,this.addChild(o),e++)}this.initItems()},n.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},n.initItems=function(){this._items=[];for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},n.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)},n.setIndex=function(t){this.selectedIndex=t},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){if(this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),r(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),r(0,n,"items",function(){return this._items}),r(0,n,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),e}(A),it=function(t){function e(){e.__super.call(this)}return o(e,"laya.ui.VScrollBar",W),e}(),nt=function(t){function e(t){this._bg=null,this._skin=null,e.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}o(e,"laya.ui.TextInput",t);var n=e.prototype;return n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(),this._bg=null},n.createChildren=function(){this.addChild(this._tf=new _),this._tf.padding=L.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},n._onFocus=function(){this.event("focus",this)},n._onBlur=function(){this.event("blur",this)},n._onInput=function(){this.event("input",this)},n._onEnter=function(){this.event("enter",this)},n.initialize=function(){this.width=128,this.height=22},n.select=function(){this._tf.select()},n.setSelection=function(t,e){this._tf.setSelection(t,e)},r(0,n,"text",t.prototype._$get_text,function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event("change"))}),r(0,n,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),r(0,n,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(t){this._tf.inputElementYAdjuster=t}),r(0,n,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg||(this.graphics=this._bg=new R),this._bg.source=m.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),r(0,n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new R),this._bg.sizeGrid=D.fillArray(L.defaultSizeGrid,t,Number)}),r(0,n,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(t){this._tf.inputElementXAdjuster=t}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(F,this,"width",t),this._bg&&(this._bg.width=t)}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(F,this,"height",t),this._bg&&(this._bg.height=t)}),r(0,n,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),r(0,n,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),r(0,n,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t}),r(0,n,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t}),r(0,n,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),r(0,n,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t}),r(0,n,"type",function(){return this._tf.type},function(t){this._tf.type=t}),r(0,n,"asPassword",function(){return this._tf.asPassword},function(t){this._tf.asPassword=t}),e}(F),ot=function(t){function e(){e.__super.call(this)}return o(e,"laya.ui.VSlider",V),e}(),rt=function(t){function e(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,e.__super.call(this)}o(e,"laya.ui.Dialog",t);var n=e.prototype;return n.initialize=function(){this.popupEffect=e.manager.popupEffectHandler,this.closeEffect=e.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},n._dealDragArea=function(){var t=this.getChildByName("drag");t&&(this.dragArea=t.x+","+t.y+","+t.width+","+t.height,t.removeSelf())},n._onClick=function(t){var e=t.target;if(e)switch(e.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(e.name)}},n.show=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this._open(!1,t,e)},n.popup=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this._open(!0,t,e)},n._open=function(t,i,n){e.manager.lock(!1),this.isModal=t,e.manager.open(this,i,n)},n.onOpened=function(){},n.close=function(t,i){void 0===i&&(i=!0),e.manager.close(this,t,i)},n.onClosed=function(t){},n._onMouseDown=function(t){var e=this.getMousePoint();this._dragArea.contains(e.x,e.y)?this.startDrag():this.stopDrag()},r(0,n,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t){if(t){var e=D.fillArray([0,0,0,0],t,Number);this._dragArea=new v(e[0],e[1],e[2],e[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),r(0,n,"isPopup",function(){return null!=this.parent}),r(0,n,"zOrder",t.prototype._$get_zOrder,function(t){i.superSet(X,this,"zOrder",t),e.manager._checkMask()}),r(1,e,"manager",function(){return e._manager=e._manager||new N},function(t){e._manager=t}),e.setLockView=function(t){e.manager.setLockView(t)},e.lock=function(t){e.manager.lock(t)},e.closeAll=function(){e.manager.closeAll()},e.getDialogsByGroup=function(t){return e.manager.getDialogsByGroup(t)},e.closeByGroup=function(t){return e.manager.closeByGroup(t)},e.CLOSE="close",e.CANCEL="cancel",e.SURE="sure",e.NO="no",e.OK="ok",e.YES="yes",e._manager=null,e}(X),at=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.HBox",t);var n=e.prototype;return n.sortItem=function(t){t&&t.sort(function(t,e){return t.x-e.x})},n.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;i<n;i++){var o=this.getChildAt(i);o&&o.layoutEnabled&&(t.push(o),e=this._height?this._height:Math.max(e,o.height*o.scaleY))}this.sortItem(t);var r=0;for(i=0,n=t.length;i<n;i++)(o=t[i]).x=r,r+=o.width*o.scaleX+this._space,"top"==this._align?o.y=0:"middle"==this._align?o.y=.5*(e-o.height*o.scaleY):"bottom"==this._align&&(o.y=e-o.height*o.scaleY);this.changeSize()},r(0,n,"height",t.prototype._$get_height,function(t){this._height!=t&&(i.superSet(Y,this,"height",t),this.callLater(this.changeItems))}),e.NONE="none",e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e}(Y),st=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.VBox",t);var n=e.prototype;return n.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;i<n;i++){var o=this.getChildAt(i);o&&o.layoutEnabled&&(t.push(o),e=this._width?this._width:Math.max(e,o.width*o.scaleX))}this.sortItem(t);var r=0;for(i=0,n=t.length;i<n;i++)(o=t[i]).y=r,r+=o.height*o.scaleY+this._space,"left"==this._align?o.x=0:"center"==this._align?o.x=.5*(e-o.width*o.scaleX):"right"==this._align&&(o.x=e-o.width*o.scaleX);this.changeSize()},r(0,n,"width",t.prototype._$get_width,function(t){this._width!=t&&(i.superSet(Y,this,"width",t),this.callLater(this.changeItems))}),e.NONE="none",e.LEFT="left",e.CENTER="center",e.RIGHT="right",e}(Y),lt=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.RadioGroup",q);return e.prototype.createItem=function(t,e){return new Q(t,e)},e}(),ht=function(t){function e(){e.__super.call(this)}o(e,"laya.ui.Tab",q);return e.prototype.createItem=function(t,e){return new U(t,e)},e}(),ut=function(t){function e(t){this._vScrollBar=null,this._hScrollBar=null,void 0===t&&(t=""),e.__super.call(this,t)}o(e,"laya.ui.TextArea",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},n.onVBarChanged=function(t){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},n.onHBarChanged=function(t){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},n.changeScroll=function(){var t=this._vScrollBar&&this._tf.maxScrollY>0,e=this._hScrollBar&&this._tf.maxScrollX>0,i=t?this._width-this._vScrollBar.width:this._width,n=e?this._height-this._hScrollBar.height:this._height,o=this._tf.padding||L.labelPadding;this._tf.width=i,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-o[2],this._vScrollBar.y=o[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-o[1]-o[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=o[0],this._hScrollBar.y=this._height-this._hScrollBar.height-o[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-o[0]-o[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)},n.scrollTo=function(t){this.commitMeasure(),this._tf.scrollY=t},r(0,n,"scrollY",function(){return this._tf.scrollY}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(nt,this,"width",t),this.callLater(this.changeScroll)}),r(0,n,"hScrollBar",function(){return this._hScrollBar}),r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(nt,this,"height",t),this.callLater(this.changeScroll)}),r(0,n,"maxScrollX",function(){return this._tf.maxScrollX}),r(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new it),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),r(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new J),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),r(0,n,"vScrollBar",function(){return this._vScrollBar}),r(0,n,"maxScrollY",function(){return this._tf.maxScrollY}),r(0,n,"scrollX",function(){return this._tf.scrollX}),e}(nt);!function(t){function e(){this._uiView=null,this.isCloseOther=!1,e.__super.call(this)}o(e,"laya.ui.AsynDialog",rt);var i=e.prototype;i.createView=function(t){this._uiView=t},i._open=function(t,e,i){this.isModal=t,this.isCloseOther=e,rt.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},i.onCreated=function(){this.createUI(),this.onOpen()},i.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},i.onOpen=function(){rt.manager.open(this,this.isCloseOther),rt.manager.lock(!1)},i.close=function(t,e){void 0===e&&(e=!0),rt.manager.close(this),this.onClose()},i.onClose=function(){},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),this._uiView=null,this.onDestroy()},i.onDestroy=function(){}}();i.__init([X])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}}),function(global,undefined){"use strict";!function(t,e,i){function n(i){var o=e[i];return o||t[i][0].call(o=e[i]={exports:{}},n,o,o.exports),o.exports}var o=global.protobuf=n(i[0]);"function"==typeof define&&define.amd&&define(["long"],function(t){return t&&t.isLong&&(o.util.Long=t,o.configure()),o}),"object"==typeof module&&module&&module.exports&&(module.exports=o)}({1:[function(t,e,i){e.exports=function(t,e){for(var i=new Array(arguments.length-1),n=0,o=2,r=!0;o<arguments.length;)i[n++]=arguments[o++];return new Promise(function(o,a){i[n]=function(t){if(r)if(r=!1,t)a(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];o.apply(null,e)}};try{t.apply(e||null,i)}catch(t){r&&(r=!1,a(t))}})}},{}],2:[function(t,e,i){var n=i;n.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;--e%4>1&&"="===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i};for(var o=new Array(64),r=new Array(123),a=0;a<64;)r[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(t,e,i){for(var n,r=null,a=[],s=0,l=0;e<i;){var h=t[e++];switch(l){case 0:a[s++]=o[h>>2],n=(3&h)<<4,l=1;break;case 1:a[s++]=o[n|h>>4],n=(15&h)<<2,l=2;break;case 2:a[s++]=o[n|h>>6],a[s++]=o[63&h],l=0}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=o[n],a[s++]=61,1===l&&(a[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))};n.decode=function(t,e,i){for(var n,o=i,a=0,s=0;s<t.length;){var l=t.charCodeAt(s++);if(61===l&&a>1)break;if((l=r[l])===undefined)throw Error("invalid encoding");switch(a){case 0:n=l,a=1;break;case 1:e[i++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:e[i++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:e[i++]=(3&n)<<6|l,a=0}}if(1===a)throw Error("invalid encoding");return i-o},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},{}],3:[function(t,e,i){function n(t,e){function i(t){if("string"!=typeof t){var e=o();if(n.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var a=Object.keys(t),s=new Array(a.length+1),l=new Array(a.length),h=0;h<a.length;)s[h]=a[h],l[h]=t[a[h++]];return s[h]=e,Function.apply(null,s).apply(null,l)}return Function(e)()}for(var u=new Array(arguments.length-1),c=0;c<u.length;)u[c]=arguments[++c];if(c=0,t=t.replace(/%([%dfijs])/g,function(t,e){var i=u[c++];switch(e){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),c!==u.length)throw Error("parameter count mismatch");return r.push(t),i}function o(i){return"function "+(i||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}"string"==typeof t&&(e=t,t=undefined);var r=[];return i.toString=o,i}e.exports=n,n.verbose=!1},{}],4:[function(t,e,i){function n(){this._listeners={}}e.exports=n,n.prototype.on=function(t,e,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:i||this}),this},n.prototype.off=function(t,e){if(t===undefined)this._listeners={};else if(e===undefined)this._listeners[t]=[];else for(var i=this._listeners[t],n=0;n<i.length;)i[n].fn===e?i.splice(n,1):++n;return this},n.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,i)}return this}},{}],5:[function(t,e,i){function n(t,e,i){return"function"==typeof e?(i=e,e={}):e||(e={}),i?!e.xhr&&r&&r.readFile?r.readFile(t,function(o,r){return o&&"undefined"!=typeof XMLHttpRequest?n.xhr(t,e,i):o?i(o):i(null,e.binary?r:r.toString("utf8"))}):n.xhr(t,e,i):o(n,this,t,e)}e.exports=n;var o=t(1),r=t(7)("fs");n.xhr=function(t,e,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return undefined;if(0!==n.status&&200!==n.status)return i(Error("status "+n.status));if(e.binary){var t=n.response;if(!t){t=[];for(var o=0;o<n.responseText.length;++o)t.push(255&n.responseText.charCodeAt(o))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return i(null,n.responseText)},e.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",t),n.send()}},{1:1,7:7}],6:[function(t,e,i){function n(t){return"undefined"!=typeof Float32Array?function(){function e(t,e,i){r[0]=t,e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2],e[i+3]=a[3]}function i(t,e,i){r[0]=t,e[i]=a[3],e[i+1]=a[2],e[i+2]=a[1],e[i+3]=a[0]}function n(t,e){return a[0]=t[e],a[1]=t[e+1],a[2]=t[e+2],a[3]=t[e+3],r[0]}function o(t,e){return a[3]=t[e],a[2]=t[e+1],a[1]=t[e+2],a[0]=t[e+3],r[0]}var r=new Float32Array([-0]),a=new Uint8Array(r.buffer),s=128===a[3];t.writeFloatLE=s?e:i,t.writeFloatBE=s?i:e,t.readFloatLE=s?n:o,t.readFloatBE=s?o:n}():function(){function e(t,e,i,n){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,i,n);else if(isNaN(e))t(2143289344,i,n);else if(e>3.4028234663852886e38)t((o<<31|2139095040)>>>0,i,n);else if(e<1.1754943508222875e-38)t((o<<31|Math.round(e/1.401298464324817e-45))>>>0,i,n);else{var r=Math.floor(Math.log(e)/Math.LN2);t((o<<31|r+127<<23|8388607&Math.round(e*Math.pow(2,-r)*8388608))>>>0,i,n)}}function i(t,e,i){var n=t(e,i),o=2*(n>>31)+1,r=n>>>23&255,a=8388607&n;return 255===r?a?NaN:o*(1/0):0===r?1.401298464324817e-45*o*a:o*Math.pow(2,r-150)*(a+8388608)}t.writeFloatLE=e.bind(null,o),t.writeFloatBE=e.bind(null,r),t.readFloatLE=i.bind(null,a),t.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){function e(t,e,i){r[0]=t,e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2],e[i+3]=a[3],e[i+4]=a[4],e[i+5]=a[5],e[i+6]=a[6],e[i+7]=a[7]}function i(t,e,i){r[0]=t,e[i]=a[7],e[i+1]=a[6],e[i+2]=a[5],e[i+3]=a[4],e[i+4]=a[3],e[i+5]=a[2],e[i+6]=a[1],e[i+7]=a[0]}function n(t,e){return a[0]=t[e],a[1]=t[e+1],a[2]=t[e+2],a[3]=t[e+3],a[4]=t[e+4],a[5]=t[e+5],a[6]=t[e+6],a[7]=t[e+7],r[0]}function o(t,e){return a[7]=t[e],a[6]=t[e+1],a[5]=t[e+2],a[4]=t[e+3],a[3]=t[e+4],a[2]=t[e+5],a[1]=t[e+6],a[0]=t[e+7],r[0]}var r=new Float64Array([-0]),a=new Uint8Array(r.buffer),s=128===a[7];t.writeDoubleLE=s?e:i,t.writeDoubleBE=s?i:e,t.readDoubleLE=s?n:o,t.readDoubleBE=s?o:n}():function(){function e(t,e,i,n,o,r){var a=n<0?1:0;if(a&&(n=-n),0===n)t(0,o,r+e),t(1/n>0?0:2147483648,o,r+i);else if(isNaN(n))t(0,o,r+e),t(2146959360,o,r+i);else if(n>1.7976931348623157e308)t(0,o,r+e),t((a<<31|2146435072)>>>0,o,r+i);else{var s;if(n<2.2250738585072014e-308)t((s=n/5e-324)>>>0,o,r+e),t((a<<31|s/4294967296)>>>0,o,r+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),t(4503599627370496*(s=n*Math.pow(2,-l))>>>0,o,r+e),t((a<<31|l+1023<<20|1048576*s&1048575)>>>0,o,r+i)}}}function i(t,e,i,n,o){var r=t(n,o+e),a=t(n,o+i),s=2*(a>>31)+1,l=a>>>20&2047,h=4294967296*(1048575&a)+r;return 2047===l?h?NaN:s*(1/0):0===l?5e-324*s*h:s*Math.pow(2,l-1075)*(h+4503599627370496)}t.writeDoubleLE=e.bind(null,o,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=i.bind(null,a,0,4),t.readDoubleBE=i.bind(null,s,4,0)}(),t}function o(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}function r(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function a(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}e.exports=n(n)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},{}],8:[function(t,e,i){var n=i,o=n.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=n.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=o(t),n="";i&&(n=e.shift()+"/");for(var r=0;r<e.length;)".."===e[r]?r>0&&".."!==e[r-1]?e.splice(--r,2):i?e.splice(r,1):++r:"."===e[r]?e.splice(r,1):++r;return n+e.join("/")};n.resolve=function(t,e,i){return i||(e=r(e)),o(e)?e:(i||(t=r(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+e):e)}},{}],9:[function(t,e,i){e.exports=function(t,e,i){var n=i||8192,o=n>>>1,r=null,a=n;return function(i){if(i<1||i>o)return t(i);a+i>n&&(r=t(n),a=0);var s=e.call(r,a,a+=i);return 7&a&&(a=1+(7|a)),s}}},{}],10:[function(t,e,i){var n=i;n.length=function(t){for(var e=0,i=0,n=0;n<t.length;++n)(i=t.charCodeAt(n))<128?e+=1:i<2048?e+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},n.read=function(t,e,i){if(i-e<1)return"";for(var n,o=null,r=[],a=0;e<i;)(n=t[e++])<128?r[a++]=n:n>191&&n<224?r[a++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,r[a++]=55296+(n>>10),r[a++]=56320+(1023&n)):r[a++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,r)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,r.slice(0,a))),o.join("")):String.fromCharCode.apply(String,r.slice(0,a))},n.write=function(t,e,i){for(var n,o,r=i,a=0;a<t.length;++a)(n=t.charCodeAt(a))<128?e[i++]=n:n<2048?(e[i++]=n>>6|192,e[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=t.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,e[i++]=n>>18|240,e[i++]=n>>12&63|128,e[i++]=n>>6&63|128,e[i++]=63&n|128):(e[i++]=n>>12|224,e[i++]=n>>6&63|128,e[i++]=63&n|128);return i-r}},{}],11:[function(t,e,i){function n(t,e){o.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),n[t]=e}e.exports=n;var o=/\/|\./;n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;n("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:r}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n.get=function(t){return n[t]||null}},{}],12:[function(t,e,i){function n(t,e,i,n){if(e.resolvedType)if(e.resolvedType instanceof a){t("switch(d%s){",n);for(var o=e.resolvedType.values,r=Object.keys(o),s=0;s<r.length;++s)e.repeated&&o[r[s]]===e.typeDefault&&t("default:"),t("case%j:",r[s])("case %i:",o[r[s]])("m%s=%j",n,o[r[s]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,i,n);else{var l=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function o(t,e,i,n){if(e.resolvedType)e.resolvedType instanceof a?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,i,n,n):t("d%s=types[%i].toObject(m%s,o)",n,i,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}var r=i,a=t(15),s=t(37);r.fromObject=function(t){var e=t.fieldsArray,i=s.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return i("return new this.ctor");i("var m=new this.ctor");for(var o=0;o<e.length;++o){var r=e[o].resolve(),l=s.safeProp(r.name);r.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",r.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),n(i,r,o,l+"[ks[i]]")("}")("}")):r.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",r.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),n(i,r,o,l+"[i]")("}")("}")):(r.resolvedType instanceof a||i("if(d%s!=null){",l),n(i,r,o,l),r.resolvedType instanceof a||i("}"))}return i("return m")},r.toObject=function(t){var e=t.fieldsArray.slice().sort(s.compareFieldsById);if(!e.length)return s.codegen()("return {}");for(var i=s.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],r=[],l=[],h=0;h<e.length;++h)e[h].partOf||(e[h].resolve().repeated?n:e[h].map?r:l).push(e[h]);if(n.length){for(i("if(o.arrays||o.defaults){"),h=0;h<n.length;++h)i("d%s=[]",s.safeProp(n[h].name));i("}")}if(r.length){for(i("if(o.objects||o.defaults){"),h=0;h<r.length;++h)i("d%s={}",s.safeProp(r[h].name));i("}")}if(l.length){for(i("if(o.defaults){"),h=0;h<l.length;++h){var u=l[h],c=s.safeProp(u.name);u.resolvedType instanceof a?i("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault):u.long?i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber()):u.bytes?i("d%s=o.bytes===String?%j:%s",c,String.fromCharCode.apply(String,u.typeDefault),"["+Array.prototype.slice.call(u.typeDefault).join(",")+"]"):i("d%s=%j",c,u.typeDefault)}i("}")}var d=!1;for(h=0;h<e.length;++h){var u=e[h],p=t._fieldsArray.indexOf(u),c=s.safeProp(u.name);u.map?(d||(d=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),o(i,u,p,c+"[ks2[j]]")("}")):u.repeated?(i("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),o(i,u,p,c+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),o(i,u,p,c),u.partOf&&i("if(o.oneofs)")("d%s=%j",s.safeProp(u.partOf.name),u.name)),i("}")}return i("return d")}},{15:15,37:37}],13:[function(t,e,i){function n(t){return"missing required '"+t.name+"'"}e.exports=function(t){var e=a.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var s=t._fieldsArray[i].resolve(),l=s.resolvedType instanceof o?"int32":s.type,h="m"+a.safeProp(s.name);e("case %i:",s.id),s.map?(e("r.skip().pos++")("if(%s===util.emptyObject)",h)("%s={}",h)("k=r.%s()",s.keyType)("r.pos++"),r.long[s.keyType]!==undefined?r.basic[l]===undefined?e('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',h,i):e('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',h,l):r.basic[l]===undefined?e("%s[k]=types[%i].decode(r,r.uint32())",h,i):e("%s[k]=r.%s()",h,l)):s.repeated?(e("if(!(%s&&%s.length))",h,h)("%s=[]",h),r.packed[l]!==undefined&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,l)("}else"),r.basic[l]===undefined?e(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",h,i):e("%s.push(r.%s())",h,l)):r.basic[l]===undefined?e(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",h,i):e("%s=r.%s()",h,l),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t._fieldsArray.length;++i){var u=t._fieldsArray[i];u.required&&e("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",n(u))}return e("return m")};var o=t(15),r=t(36),a=t(37)},{15:15,36:36,37:37}],14:[function(t,e,i){function n(t,e,i,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,n,(e.id<<3|2)>>>0)}e.exports=function(t){for(var e,i=a.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),s=t.fieldsArray.slice().sort(a.compareFieldsById),l=0;l<s.length;++l){var h=s[l].resolve(),u=t._fieldsArray.indexOf(h),c=h.resolvedType instanceof o?"int32":h.type,d=r.basic[c];e="m"+a.safeProp(h.name),h.map?(i("if(%s!=null&&m.hasOwnProperty(%j)){",e,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|r.mapKey[h.keyType],h.keyType),d===undefined?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,e):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,c,e),i("}")("}")):h.repeated?(i("if(%s!=null&&%s.length){",e,e),h.packed&&r.packed[c]!==undefined?i("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",c,e)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",e),d===undefined?n(i,h,u,e+"[i]"):i("w.uint32(%i).%s(%s[i])",(h.id<<3|d)>>>0,c,e)),i("}")):(h.optional&&i("if(%s!=null&&m.hasOwnProperty(%j))",e,h.name),d===undefined?n(i,h,u,e):i("w.uint32(%i).%s(%s)",(h.id<<3|d)>>>0,c,e))}return i("return w")};var o=t(15),r=t(36),a=t(37)},{15:15,36:36,37:37}],15:[function(t,e,i){function n(t,e,i){if(o.call(this,t,i),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},this.reserved=undefined,e)for(var n=Object.keys(e),r=0;r<n.length;++r)"number"==typeof e[n[r]]&&(this.valuesById[this.values[n[r]]=e[n[r]]]=n[r])}e.exports=n;var o=t(24);((n.prototype=Object.create(o.prototype)).constructor=n).className="Enum";var r=t(23),a=t(37);n.fromJSON=function(t,e){var i=new n(t,e.values,e.options);return i.reserved=e.reserved,i},n.prototype.toJSON=function(){return a.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined])},n.prototype.add=function(t,e,i){if(!a.isString(t))throw TypeError("name must be a string");if(!a.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[e]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=i||null,this},n.prototype.remove=function(t){if(!a.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},n.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},n.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)}},{23:23,24:24,37:37}],16:[function(t,e,i){function n(t,e,i,n,r,a){if(l.isObject(n)?(a=n,n=r=undefined):l.isObject(r)&&(a=r,r=undefined),o.call(this,t,a),!l.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!l.isString(i))throw TypeError("type must be a string");if(n!==undefined&&!h.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(r!==undefined&&!l.isString(r))throw TypeError("extend must be a string");this.rule=n&&"optional"!==n?n:undefined,this.type=i,this.id=e,this.extend=r||undefined,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!l.Long&&s.long[i]!==undefined,this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null}e.exports=n;var o=t(24);((n.prototype=Object.create(o.prototype)).constructor=n).className="Field";var r,a=t(15),s=t(36),l=t(37),h=/^required|optional|repeated$/;n.fromJSON=function(t,e){return new n(t,e.id,e.type,e.rule,e.extend,e.options)},Object.defineProperty(n.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),n.prototype.setOption=function(t,e,i){return"packed"===t&&(this._packed=null),o.prototype.setOption.call(this,t,e,i)},n.prototype.toJSON=function(){return l.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},n.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof a&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof a)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=l.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;l.base64.test(this.typeDefault)?l.base64.decode(this.typeDefault,t=l.newBuffer(l.base64.length(this.typeDefault)),0):l.utf8.write(this.typeDefault,t=l.newBuffer(l.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=l.emptyObject:this.repeated?this.defaultValue=l.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this)},n.d=function(t,e,i,o){return"function"==typeof e?e=l.decorateType(e).name:e&&"object"==typeof e&&(e=l.decorateEnum(e).name),function(r,a){l.decorateType(r.constructor).add(new n(a,t,e,i,{default:o}))}},n._configure=function(t){r=t}},{15:15,24:24,36:36,37:37}],17:[function(t,e,i){var n=e.exports=t(18);n.build="light",n.load=function(t,e,i){return"function"==typeof e?(i=e,e=new n.Root):e||(e=new n.Root),e.load(t,i)},n.loadSync=function(t,e){return e||(e=new n.Root),e.loadSync(t)},n.encoder=t(14),n.decoder=t(13),n.verifier=t(40),n.converter=t(12),n.ReflectionObject=t(24),n.Namespace=t(23),n.Root=t(29),n.Enum=t(15),n.Type=t(35),n.Field=t(16),n.OneOf=t(25),n.MapField=t(20),n.Service=t(33),n.Method=t(22),n.Message=t(21),n.wrappers=t(41),n.types=t(36),n.util=t(37),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service),n.Root._configure(n.Type),n.Field._configure(n.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(t,e,i){function n(){o.Reader._configure(o.BufferReader),o.util._configure()}var o=i;o.build="minimal",o.Writer=t(42),o.BufferWriter=t(43),o.Reader=t(27),o.BufferReader=t(28),o.util=t(39),o.rpc=t(31),o.roots=t(30),o.configure=n,o.Writer._configure(o.BufferWriter),n()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(t,e,i){var n=e.exports=t(17);n.build="full",n.tokenize=t(34),n.parse=t(26),n.common=t(11),n.Root._configure(n.Type,n.parse,n.common)},{11:11,17:17,26:26,34:34}],20:[function(t,e,i){function n(t,e,i,n,r){if(o.call(this,t,e,n,r),!a.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}e.exports=n;var o=t(16);((n.prototype=Object.create(o.prototype)).constructor=n).className="MapField";var r=t(36),a=t(37);n.fromJSON=function(t,e){return new n(t,e.id,e.keyType,e.type,e.options)},n.prototype.toJSON=function(){return a.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},n.prototype.resolve=function(){if(this.resolved)return this;if(r.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},n.d=function(t,e,i){return"function"==typeof i?i=a.decorateType(i).name:i&&"object"==typeof i&&(i=a.decorateEnum(i).name),function(o,r){a.decorateType(o.constructor).add(new n(r,t,e,i))}}},{16:16,36:36,37:37}],21:[function(t,e,i){function n(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)this[e[i]]=t[e[i]]}e.exports=n;var o=t(39);n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,o.toJSONOptions)}},{39:39}],22:[function(t,e,i){function n(t,e,i,n,a,s,l){if(r.isObject(a)?(l=a,a=s=undefined):r.isObject(s)&&(l=s,s=undefined),e!==undefined&&!r.isString(e))throw TypeError("type must be a string");if(!r.isString(i))throw TypeError("requestType must be a string");if(!r.isString(n))throw TypeError("responseType must be a string");o.call(this,t,l),this.type=e||"rpc",this.requestType=i,this.requestStream=!!a||undefined,this.responseType=n,this.responseStream=!!s||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null}e.exports=n;var o=t(24);((n.prototype=Object.create(o.prototype)).constructor=n).className="Method";var r=t(37);n.fromJSON=function(t,e){return new n(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options)},n.prototype.toJSON=function(){return r.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),o.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(t,e,i){function n(t){if(!t||!t.length)return undefined;for(var e={},i=0;i<t.length;++i)e[t[i].name]=t[i].toJSON();return e}function o(t,e){a.call(this,t,e),this.nested=undefined,this._nestedArray=null}function r(t){return t._nestedArray=null,t}e.exports=o;var a=t(24);((o.prototype=Object.create(a.prototype)).constructor=o).className="Namespace";var s,l,h=t(15),u=t(16),c=t(37);o.fromJSON=function(t,e){return new o(t,e.options).addJSON(e.nested)},o.arrayToJSON=n,o.isReservedId=function(t,e){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=e&&t[i][1]>=e)return!0;return!1},o.isReservedName=function(t,e){if(t)for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1},Object.defineProperty(o.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),o.prototype.toJSON=function(){return c.toObject(["options",this.options,"nested",n(this.nestedArray)])},o.prototype.addJSON=function(t){if(t)for(var e,i=Object.keys(t),n=0;n<i.length;++n)e=t[i[n]],this.add((e.fields!==undefined?s.fromJSON:e.values!==undefined?h.fromJSON:e.methods!==undefined?l.fromJSON:e.id!==undefined?u.fromJSON:o.fromJSON)(i[n],e));return this},o.prototype.get=function(t){return this.nested&&this.nested[t]||null},o.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof h)return this.nested[t].values;throw Error("no such enum")},o.prototype.add=function(t){if(!(t instanceof u&&t.extend!==undefined||t instanceof s||t instanceof h||t instanceof l||t instanceof o))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof o&&t instanceof o)||e instanceof s||e instanceof l)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=e.nestedArray,n=0;n<i.length;++n)t.add(i[n]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),r(this)},o.prototype.remove=function(t){if(!(t instanceof a))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=undefined),t.onRemove(this),r(this)},o.prototype.define=function(t,e){if(c.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;t.length>0;){var n=t.shift();if(i.nested&&i.nested[n]){if(!((i=i.nested[n])instanceof o))throw Error("path conflicts with non-namespace objects")}else i.add(i=new o(n))}return e&&i.addJSON(e),i},o.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof o?t[e++].resolveAll():t[e++].resolve();return this.resolve()},o.prototype.lookup=function(t,e,i){if("boolean"==typeof e?(i=e,e=undefined):e&&!Array.isArray(e)&&(e=[e]),c.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var n=this.get(t[0]);if(n){if(1===t.length){if(!e||e.indexOf(n.constructor)>-1)return n}else if(n instanceof o&&(n=n.lookup(t.slice(1),e,!0)))return n}else for(var r=0;r<this.nestedArray.length;++r)if(this._nestedArray[r]instanceof o&&(n=this._nestedArray[r].lookup(t,e,!0)))return n;return null===this.parent||i?null:this.parent.lookup(t,e)},o.prototype.lookupType=function(t){var e=this.lookup(t,[s]);if(!e)throw Error("no such type");return e},o.prototype.lookupEnum=function(t){var e=this.lookup(t,[h]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},o.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[s,h]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},o.prototype.lookupService=function(t){var e=this.lookup(t,[l]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},o._configure=function(t,e){s=t,l=e}},{15:15,16:16,24:24,37:37}],24:[function(t,e,i){function n(t,e){if(!r.isString(t))throw TypeError("name must be a string");if(e&&!r.isObject(e))throw TypeError("options must be an object");this.options=e,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}e.exports=n,n.className="ReflectionObject";var o,r=t(37);Object.defineProperties(n.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),n.prototype.toJSON=function(){throw Error()},n.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof o&&e._handleAdd(this)},n.prototype.onRemove=function(t){var e=t.root;e instanceof o&&e._handleRemove(this),this.parent=null,this.resolved=!1},n.prototype.resolve=function(){return this.resolved?this:(this.root instanceof o&&(this.resolved=!0),this)},n.prototype.getOption=function(t){return this.options?this.options[t]:undefined},n.prototype.setOption=function(t,e,i){return i&&this.options&&this.options[t]!==undefined||((this.options||(this.options={}))[t]=e),this},n.prototype.setOptions=function(t,e){if(t)for(var i=Object.keys(t),n=0;n<i.length;++n)this.setOption(i[n],t[i[n]],e);return this},n.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},n._configure=function(t){o=t}},{37:37}],25:[function(t,e,i){function n(t,e,i){if(Array.isArray(e)||(i=e,e=undefined),r.call(this,t,i),e!==undefined&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[]}function o(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}e.exports=n;var r=t(24);((n.prototype=Object.create(r.prototype)).constructor=n).className="OneOf";var a=t(16),s=t(37);n.fromJSON=function(t,e){return new n(t,e.oneof,e.options)},n.prototype.toJSON=function(){return s.toObject(["options",this.options,"oneof",this.oneof])},n.prototype.add=function(t){if(!(t instanceof a))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,o(this),this},n.prototype.remove=function(t){if(!(t instanceof a))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this},n.prototype.onAdd=function(t){r.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var i=t.get(this.oneof[e]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}o(this)},n.prototype.onRemove=function(t){for(var e,i=0;i<this.fieldsArray.length;++i)(e=this.fieldsArray[i]).parent&&e.parent.remove(e);r.prototype.onRemove.call(this,t)},n.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,i){s.decorateType(e.constructor).add(new n(i,t)),Object.defineProperty(e,i,{get:s.oneOfGetter(t),set:s.oneOfSetter(t)})}}},{16:16,24:24,37:37}],26:[function(t,e,i){function n(t,e,i){function x(t,e,i){var o=n.filename;return i||(n.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(o?o+", ":"")+"line "+H.line+")")}function T(){var t,e=[];do{if('"'!==(t=Y())&&"'"!==t)throw x(t);e.push(Y()),J(t),t=j()}while('"'===t||"'"===t);return e.join("")}function M(t){var e=Y();switch(e){case"'":case'"':return z(e),T();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(t,e){var i=1;"-"===t.charAt(0)&&(i=-1,t=t.substring(1));switch(t){case"inf":case"INF":case"Inf":return i*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(g.test(t))return i*parseInt(t,10);if(m.test(t))return i*parseInt(t,16);if(v.test(t))return i*parseInt(t,8);if(w.test(t))return i*parseFloat(t);throw x(t,"number",e)}(e,!0)}catch(i){if(t&&C.test(e))return e;throw x(e,"value")}}function L(t,e){var i,n;do{!e||'"'!==(i=j())&&"'"!==i?t.push([n=D(Y()),J("to",!0)?D(Y()):n]):t.push(T())}while(J(",",!0));J(";")}function D(t,e){switch(t){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!e&&"-"===t.charAt(0))throw x(t,"id");if(_.test(t))return parseInt(t,10);if(y.test(t))return parseInt(t,16);if(I.test(t))return parseInt(t,8);throw x(t,"id")}function E(){if(W!==undefined)throw x("package");if(W=Y(),!C.test(W))throw x(W,"name");q=q.define(W),J(";")}function R(){var t,e=j();switch(e){case"weak":t=F||(F=[]),Y();break;case"public":Y();default:t=V||(V=[])}e=T(),J(";"),t.push(e)}function P(){if(J("="),Z=T(),!($="proto3"===Z)&&"proto2"!==Z)throw x(Z,"syntax");J(";")}function N(t,e){switch(e){case"option":return U(t,e),J(";"),!0;case"message":return function(t,e){if(!b.test(e=Y()))throw x(e,"type name");var i=new a(e);G(i,function(t){if(!N(i,t))switch(t){case"map":!function(t){J("<");var e=Y();if(p.mapKey[e]===undefined)throw x(e,"type");J(",");var i=Y();if(!C.test(i))throw x(i,"type");J(">");var n=Y();if(!b.test(n))throw x(n,"name");J("=");var o=new l(tt(n),D(Y()),e,i);G(o,function(t){if("option"!==t)throw x(t);U(o,t),J(";")},function(){O(o)}),t.add(o)}(i);break;case"required":case"optional":case"repeated":A(i,t);break;case"oneof":!function(t,e){if(!b.test(e=Y()))throw x(e,"name");var i=new h(tt(e));G(i,function(t){"option"===t?(U(i,t),J(";")):(z(t),A(i,"optional"))}),t.add(i)}(i,t);break;case"extensions":L(i.extensions||(i.extensions=[]));break;case"reserved":L(i.reserved||(i.reserved=[]),!0);break;default:if(!$||!C.test(t))throw x(t);z(t),A(i,"optional")}}),t.add(i)}(t,e),!0;case"enum":return function(t,e){if(!b.test(e=Y()))throw x(e,"name");var i=new u(e);G(i,function(t){switch(t){case"option":U(i,t),J(";");break;case"reserved":L(i.reserved||(i.reserved=[]),!0);break;default:!function(t,e){if(!b.test(e))throw x(e,"name");J("=");var i=D(Y(),!0),n={};G(n,function(t){if("option"!==t)throw x(t);U(n,t),J(";")},function(){O(n)}),t.add(e,i,n.comment)}(i,t)}}),t.add(i)}(t,e),!0;case"service":return function(t,e){if(!b.test(e=Y()))throw x(e,"service name");var i=new c(e);G(i,function(t){if(!N(i,t)){if("rpc"!==t)throw x(t);!function(t,e){var i=e;if(!b.test(e=Y()))throw x(e,"name");var n,o,r,a,s=e;J("("),J("stream",!0)&&(o=!0);if(!C.test(e=Y()))throw x(e);n=e,J(")"),J("returns"),J("("),J("stream",!0)&&(a=!0);if(!C.test(e=Y()))throw x(e);r=e,J(")");var l=new d(s,i,n,r,o,a);G(l,function(t){if("option"!==t)throw x(t);U(l,t),J(";")}),t.add(l)}(i,t)}}),t.add(i)}(t,e),!0;case"extend":return function(t,e){if(!C.test(e=Y()))throw x(e,"reference");var i=e;G(null,function(e){switch(e){case"required":case"repeated":case"optional":A(t,e,i);break;default:if(!$||!C.test(e))throw x(e);z(e),A(t,"optional",i)}})}(t,e),!0}return!1}function G(t,e,i){var o=H.line;if(t&&(t.comment=K(),t.filename=n.filename),J("{",!0)){for(var r;"}"!==(r=Y());)e(r);J(";",!0)}else i&&i(),J(";"),t&&"string"!=typeof t.comment&&(t.comment=K(o))}function A(t,e,i){var o=Y();if("group"!==o){if(!C.test(o))throw x(o,"type");var r=Y();if(!b.test(r))throw x(r,"name");r=tt(r),J("=");var l=new s(r,D(Y()),o,e,i);G(l,function(t){if("option"!==t)throw x(t);U(l,t),J(";")},function(){O(l)}),t.add(l),$||!l.repeated||p.packed[o]===undefined&&p.basic[o]!==undefined||l.setOption("packed",!1,!0)}else!function(t,e){var i=Y();if(!b.test(i))throw x(i,"name");var o=f.lcFirst(i);i===o&&(i=f.ucFirst(i));J("=");var r=D(Y()),l=new a(i);l.group=!0;var h=new s(o,r,i,e);h.filename=n.filename,G(l,function(t){switch(t){case"option":U(l,t),J(";");break;case"required":case"optional":case"repeated":A(l,t);break;default:throw x(t)}}),t.add(l).add(h)}(t,e)}function U(t,e){var i=J("(",!0);if(!C.test(e=Y()))throw x(e,"name");var n=e;i&&(J(")"),n="("+n+")",e=j(),S.test(e)&&(n+=e,Y())),J("="),k(t,n)}function k(t,e){if(J("{",!0))do{if(!b.test(X=Y()))throw x(X,"name");"{"===j()?k(t,e+"."+X):(J(":"),"{"===j()?k(t,e+"."+X):B(t,e+"."+X,M(!0)))}while(!J("}",!0));else B(t,e,M(!0))}function B(t,e,i){t.setOption&&t.setOption(e,i)}function O(t){if(J("[",!0)){do{U(t,"option")}while(J(",",!0));J("]")}return t}e instanceof r||(i=e,e=new r),i||(i=n.defaults);for(var W,V,F,Z,X,H=o(t),Y=H.next,z=H.push,j=H.peek,J=H.skip,K=H.cmnt,Q=!0,$=!1,q=e,tt=i.keepCase?function(t){return t}:f.camelCase;null!==(X=Y());)switch(X){case"package":if(!Q)throw x(X);E();break;case"import":if(!Q)throw x(X);R();break;case"syntax":if(!Q)throw x(X);P();break;case"option":if(!Q)throw x(X);U(q,X),J(";");break;default:if(N(q,X)){Q=!1;continue}throw x(X)}return n.filename=null,{package:W,imports:V,weakImports:F,syntax:Z,root:e}}e.exports=n,n.filename=null,n.defaults={keepCase:!1};var o=t(34),r=t(29),a=t(35),s=t(16),l=t(20),h=t(25),u=t(15),c=t(33),d=t(22),p=t(36),f=t(37),g=/^[1-9][0-9]*$/,_=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,I=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,b=/^[a-zA-Z_][a-zA-Z_0-9]*$/,C=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,S=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(t,e,i){function n(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}function r(){var t=new u(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw n(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw n(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function a(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw n(this,8);return new u(a(this.buf,this.pos+=4),a(this.buf,this.pos+=4))}e.exports=o;var l,h=t(39),u=h.LongBits,c=h.utf8,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")};o.create=h.Buffer?function(t){return(o.create=function(t){return h.Buffer.isBuffer(t)?new l(t):d(t)})(t)}:d,o.prototype._slice=h.Array.prototype.subarray||h.Array.prototype.slice,o.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,n(this,10);return t}}(),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw n(this,4);return a(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw n(this,4);return 0|a(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw n(this,4);var t=h.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw n(this,4);var t=h.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw n(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this._slice.call(this.buf,e,i)},o.prototype.string=function(){var t=this.bytes();return c.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw n(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw n(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o._configure=function(t){l=t;var e=h.Long?"toLong":"toNumber";h.merge(o.prototype,{int64:function(){return r.call(this)[e](!1)},uint64:function(){return r.call(this)[e](!0)},sint64:function(){return r.call(this).zzDecode()[e](!1)},fixed64:function(){return s.call(this)[e](!0)},sfixed64:function(){return s.call(this)[e](!1)}})}},{39:39}],28:[function(t,e,i){function n(t){o.call(this,t)}e.exports=n;var o=t(27);(n.prototype=Object.create(o.prototype)).constructor=n;var r=t(39);r.Buffer&&(n.prototype._slice=r.Buffer.prototype.slice),n.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},{27:27,39:39}],29:[function(t,e,i){function n(t){a.call(this,"",t),this.deferred=[],this.files=[]}function o(){}function r(t,e){var i=e.parent.lookup(e.extend);if(i){var n=new u(e.fullName,e.id,e.type,e.rule,undefined,e.options);return n.declaringField=e,e.extensionField=n,i.add(n),!0}return!1}e.exports=n;var a=t(23);((n.prototype=Object.create(a.prototype)).constructor=n).className="Root";var s,l,h,u=t(16),c=t(15),d=t(25),p=t(37);n.fromJSON=function(t,e){return e||(e=new n),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},n.prototype.resolvePath=p.path.resolve,n.prototype.load=function t(e,i,n){function r(t,e){if(n){var i=n;if(n=null,c)throw t;i(t,e)}}function a(t,e){try{if(p.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),p.isString(e)){l.filename=t;var n,o=l(e,u,i),a=0;if(o.imports)for(;a<o.imports.length;++a)(n=u.resolvePath(t,o.imports[a]))&&s(n);if(o.weakImports)for(a=0;a<o.weakImports.length;++a)(n=u.resolvePath(t,o.weakImports[a]))&&s(n,!0)}else u.setOptions(e.options).addJSON(e.nested)}catch(t){r(t)}c||d||r(null,u)}function s(t,e){var i=t.lastIndexOf("google/protobuf/");if(i>-1){var o=t.substring(i);o in h&&(t=o)}if(!(u.files.indexOf(t)>-1))if(u.files.push(t),t in h)c?a(t,h[t]):(++d,setTimeout(function(){--d,a(t,h[t])}));else if(c){var s;try{s=p.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||r(t))}a(t,s)}else++d,p.fetch(t,function(i,o){--d,n&&(i?e?d||r(null,u):r(i):a(t,o))})}"function"==typeof i&&(n=i,i=undefined);var u=this;if(!n)return p.asPromise(t,u,e,i);var c=n===o,d=0;p.isString(e)&&(e=[e]);for(var f,g=0;g<e.length;++g)(f=u.resolvePath("",e[g]))&&s(f);return c?u:(d||r(null,u),undefined)},n.prototype.loadSync=function(t,e){if(!p.isNode)throw Error("not supported");return this.load(t,e,o)},n.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var f=/^[A-Z]/;n.prototype._handleAdd=function(t){if(t instanceof u)t.extend===undefined||t.extensionField||r(0,t)||this.deferred.push(t);else if(t instanceof c)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof d)){if(t instanceof s)for(var e=0;e<this.deferred.length;)r(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var i=0;i<t.nestedArray.length;++i)this._handleAdd(t._nestedArray[i]);f.test(t.name)&&(t.parent[t.name]=t)}},n.prototype._handleRemove=function(t){if(t instanceof u){if(t.extend!==undefined)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof c)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof a){for(var i=0;i<t.nestedArray.length;++i)this._handleRemove(t._nestedArray[i]);f.test(t.name)&&delete t.parent[t.name]}},n._configure=function(t,e,i){s=t,l=e,h=i}},{15:15,16:16,23:23,25:25,37:37}],30:[function(t,e,i){e.exports={}},{}],31:[function(t,e,i){i.Service=t(32)},{32:32}],32:[function(t,e,i){function n(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}e.exports=n;var o=t(39);(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,i,n,r,a){if(!r)throw TypeError("request must be specified");var s=this;if(!a)return o.asPromise(t,s,e,i,n,r);if(!s.rpcImpl)return setTimeout(function(){a(Error("already ended"))},0),undefined;try{return s.rpcImpl(e,i[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,i){if(t)return s.emit("error",t,e),a(t);if(null===i)return s.end(!0),undefined;if(!(i instanceof n))try{i=n[s.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",i,e),a(null,i)})}catch(t){return s.emit("error",t,e),setTimeout(function(){a(t)},0),undefined}},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(t,e,i){function n(t,e){r.call(this,t,e),this.methods={},this._methodsArray=null}function o(t){return t._methodsArray=null,t}e.exports=n;var r=t(23);((n.prototype=Object.create(r.prototype)).constructor=n).className="Service";var a=t(22),s=t(37),l=t(31);n.fromJSON=function(t,e){var i=new n(t,e.options);if(e.methods)for(var o=Object.keys(e.methods),r=0;r<o.length;++r)i.add(a.fromJSON(o[r],e.methods[o[r]]));return e.nested&&i.addJSON(e.nested),i},n.prototype.toJSON=function(){var t=r.prototype.toJSON.call(this);return s.toObject(["options",t&&t.options||undefined,"methods",r.arrayToJSON(this.methodsArray)||{},"nested",t&&t.nested||undefined])},Object.defineProperty(n.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),n.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},n.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return r.prototype.resolve.call(this)},n.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof a?(this.methods[t.name]=t,t.parent=this,o(this)):r.prototype.add.call(this,t)},n.prototype.remove=function(t){if(t instanceof a){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,o(this)}return r.prototype.remove.call(this,t)},n.prototype.create=function(t,e,i){for(var n,o=new l.Service(t,e,i),r=0;r<this.methodsArray.length;++r){var a=s.lcFirst((n=this._methodsArray[r]).resolve().name).replace(/[^$\w_]/g,"");o[a]=s.codegen(["r","c"],s.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return o}},{22:22,23:23,31:31,37:37}],34:[function(t,e,i){function n(t){return t.replace(c,function(t,e){switch(e){case"\\":case"":return e;default:return d[e]||""}})}function o(t){function e(t){return Error("illegal "+t+" (line "+_+")")}function i(e){return t.charAt(e)}function o(e,i){m=t.charAt(e++),v=_,I=!1;var n,o=e-3;do{if(--o<0||"\n"===(n=t.charAt(o))){I=!0;break}}while(" "===n||"\t"===n);for(var r=t.substring(e,i).split(h),a=0;a<r.length;++a)r[a]=r[a].replace(l,"").trim();y=r.join("\n").trim()}function c(){if(w.length>0)return w.shift();if(b)return function(){var i="'"===b?s:a;i.lastIndex=f-1;var o=i.exec(t);if(!o)throw e("string");return f=i.lastIndex,d(b),b=null,n(o[1])}();var l,h,c,p,m;do{if(f===g)return null;for(l=!1;u.test(c=i(f));)if("\n"===c&&++_,++f===g)return null;if("/"===i(f)){if(++f===g)throw e("comment");if("/"===i(f)){for(m="/"===i(p=f+1);"\n"!==i(++f);)if(f===g)return null;++f,m&&o(p,f-1),++_,l=!0}else{if("*"!==(c=i(f)))return"/";m="*"===i(p=f+1);do{if("\n"===c&&++_,++f===g)throw e("comment");h=c,c=i(f)}while("*"!==h||"/"!==c);++f,m&&o(p,f-2),l=!0}}}while(l);var y=f;r.lastIndex=0;if(!r.test(i(y++)))for(;y<g&&!r.test(i(y));)++y;var v=t.substring(f,f=y);return'"'!==v&&"'"!==v||(b=v),v}function d(t){w.push(t)}function p(){if(!w.length){var t=c();if(null===t)return null;d(t)}return w[0]}var f=0,g=(t=t.toString()).length,_=1,m=null,y=null,v=0,I=!1,w=[],b=null;return Object.defineProperty({next:c,peek:p,push:d,skip:function(t,i){var n=p();if(n===t)return c(),!0;if(!i)throw e("token '"+n+"', '"+t+"' expected");return!1},cmnt:function(t){var e=null;return t===undefined?v!==_-1||"*"!==m&&!I||(e=y):(v<t&&p(),v!==t||I||"/"!==m||(e=y)),e}},"line",{get:function(){return _}})}e.exports=o;var r=/[\s{}=;:[\],'"()<>]/g,a=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,l=/^ *[*/]+ */,h=/\n/g,u=/\s/,c=/\\(.?)/g,d={0:"\0",r:"\r",n:"\n",t:"\t"};o.unescape=n},{}],35:[function(t,e,i){function n(t,e){r.call(this,t,e),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function o(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}e.exports=n;var r=t(23);((n.prototype=Object.create(r.prototype)).constructor=n).className="Type";var a=t(15),s=t(25),l=t(16),h=t(20),u=t(33),c=t(21),d=t(27),p=t(42),f=t(37),g=t(14),_=t(13),m=t(40),y=t(12),v=t(41);Object.defineProperties(n.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var i=this.fields[t[e]],n=i.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=n.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof c||((t.prototype=new c).constructor=t,f.merge(t.prototype,e)),t.$type=t.prototype.$type=this,f.merge(t,c,!0),this._ctor=t;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var n={};for(i=0;i<this.oneofsArray.length;++i)n[this._oneofsArray[i].resolve().name]={get:f.oneOfGetter(this._oneofsArray[i].oneof),set:f.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(t.prototype,n)}}}),n.generateConstructor=function(t){for(var e,i=f.codegen(["p"],t.name),n=0;n<t.fieldsArray.length;++n)(e=t._fieldsArray[n]).map?i("this%s={}",f.safeProp(e.name)):e.repeated&&i("this%s=[]",f.safeProp(e.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},n.fromJSON=function(t,e){var i=new n(t,e.options);i.extensions=e.extensions,i.reserved=e.reserved;for(var o=Object.keys(e.fields),c=0;c<o.length;++c)i.add((void 0!==e.fields[o[c]].keyType?h.fromJSON:l.fromJSON)(o[c],e.fields[o[c]]));if(e.oneofs)for(o=Object.keys(e.oneofs),c=0;c<o.length;++c)i.add(s.fromJSON(o[c],e.oneofs[o[c]]));if(e.nested)for(o=Object.keys(e.nested),c=0;c<o.length;++c){var d=e.nested[o[c]];i.add((d.id!==undefined?l.fromJSON:d.fields!==undefined?n.fromJSON:d.values!==undefined?a.fromJSON:d.methods!==undefined?u.fromJSON:r.fromJSON)(o[c],d))}return e.extensions&&e.extensions.length&&(i.extensions=e.extensions),e.reserved&&e.reserved.length&&(i.reserved=e.reserved),e.group&&(i.group=!0),i},n.prototype.toJSON=function(){var t=r.prototype.toJSON.call(this);return f.toObject(["options",t&&t.options||undefined,"oneofs",r.arrayToJSON(this.oneofsArray),"fields",r.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}))||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined])},n.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var i=this.oneofsArray;for(e=0;e<i.length;)i[e++].resolve();return r.prototype.resolveAll.call(this)},n.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},n.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof l&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),o(this)}return t instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),o(this)):r.prototype.add.call(this,t)},n.prototype.remove=function(t){if(t instanceof l&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),o(this)}if(t instanceof s){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),o(this)}return r.prototype.remove.call(this,t)},n.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},n.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)},n.prototype.create=function(t){return new this.ctor(t)},n.prototype.setup=function(){for(var t=this.fullName,e=[],i=0;i<this.fieldsArray.length;++i)e.push(this._fieldsArray[i].resolve().resolvedType);this.encode=g(this)({Writer:p,types:e,util:f}),this.decode=_(this)({Reader:d,types:e,util:f}),this.verify=m(this)({types:e,util:f}),this.fromObject=y.fromObject(this)({types:e,util:f}),this.toObject=y.toObject(this)({types:e,util:f});var n=v[t];if(n){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(o),o.toObject=this.toObject,this.toObject=n.toObject.bind(o)}return this},n.prototype.encode=function(t,e){return this.setup().encode(t,e)},n.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},n.prototype.decode=function(t,e){return this.setup().decode(t,e)},n.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},n.prototype.verify=function(t){return this.setup().verify(t)},n.prototype.fromObject=function(t){return this.setup().fromObject(t)},n.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},n.d=function(t){return function(e){f.decorateType(e,t)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(t,e,i){function n(t,e){var i=0,n={};for(e|=0;i<t.length;)n[a[i+e]]=t[i++];return n}var o=i,r=t(37),a=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];o.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),o.long=n([0,0,0,1,1],7),o.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(t,e,i){var n,o,r=e.exports=t(39),a=t(30);r.codegen=t(3),r.fetch=t(5),r.path=t(8),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var e=Object.keys(t),i=new Array(e.length),n=0;n<e.length;)i[n]=t[e[n++]];return i}return[]},r.toObject=function(t){for(var e={},i=0;i<t.length;){var n=t[i++],o=t[i++];o!==undefined&&(e[n]=o)}return e};var s=/\\/g,l=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(s,"\\\\").replace(l,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var h=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(h,function(t,e){return e.toUpperCase()})},r.compareFieldsById=function(t,e){return t.id-e.id},r.decorateType=function(e,i){if(e.$type)return i&&e.$type.name!==i&&(r.decorateRoot.remove(e.$type),e.$type.name=i,r.decorateRoot.add(e.$type)),e.$type;n||(n=t(35));var o=new n(i||e.name);return r.decorateRoot.add(o),o.ctor=e,Object.defineProperty(e,"$type",{value:o,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:o,enumerable:!1}),o};var u=0;r.decorateEnum=function(e){if(e.$type)return e.$type;o||(o=t(15));var i=new o("Enum"+u++,e);return r.decorateRoot.add(i),Object.defineProperty(e,"$type",{value:i,enumerable:!1}),i},Object.defineProperty(r,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(t(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(t,e,i){function n(t,e){this.lo=t>>>0,this.hi=e>>>0}e.exports=n;var o=t(39),r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var e=t<0;e&&(t=-t);var i=t>>>0,o=(t-i)/4294967296>>>0;return e&&(o=~o>>>0,i=~i>>>0,++i>4294967295&&(i=0,++o>4294967295&&(o=0))),new n(i,o)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(o.isString(t)){if(!o.Long)return n.fromNumber(parseInt(t,10));t=o.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,i=~this.hi>>>0;return e||(i=i+1>>>0),-(e+4294967296*i)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;n.fromHash=function(t){return t===a?r:new n((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}},{39:39}],39:[function(t,e,i){function n(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;++o)t[n[o]]!==undefined&&i||(t[n[o]]=e[n[o]]);return t}function o(t){function e(t,i){if(!(this instanceof e))return new e(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}var r=i;r.asPromise=t(1),r.base64=t(2),r.EventEmitter=t(4),r.float=t(6),r.inquire=t(7),r.utf8=t(10),r.pool=t(9),r.LongBits=t(38),r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node),r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=global.dcodeIO&&global.dcodeIO.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var i=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(i.lo,i.hi,e):i.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;i>-1;--i)if(1===e[t[i]]&&this[t[i]]!==undefined&&null!==this[t[i]])return t[i]}},r.oneOfSetter=function(t){return function(e){for(var i=0;i<t.length;++i)t[i]!==e&&delete this[t[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,i){return new t(e,i)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(t,e,i){function n(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function o(t,e,i,o){if(e.resolvedType)if(e.resolvedType instanceof a){t("switch(%s){",o)("default:")("return%j",n(e,"enum value"));for(var r=Object.keys(e.resolvedType.values),s=0;s<r.length;++s)t("case %i:",e.resolvedType.values[r[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,o)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",o)("return%j",n(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",n(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',o)("return%j",n(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',o)("return%j",n(e,"boolean"));break;case"string":t("if(!util.isString(%s))",o)("return%j",n(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",n(e,"buffer"))}return t}function r(t,e,i){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",n(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",n(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",n(e,"boolean key"))}return t}e.exports=function(t){var e=s.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i={};t.oneofsArray.length&&e("var p={}");for(var a=0;a<t.fieldsArray.length;++a){var l=t._fieldsArray[a].resolve(),h="m"+s.safeProp(l.name);if(l.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",h,l.name),l.map)e("if(!util.isObject(%s))",h)("return%j",n(l,"object"))("var k=Object.keys(%s)",h)("for(var i=0;i<k.length;++i){"),r(e,l,"k[i]"),o(e,l,a,h+"[k[i]]")("}");else if(l.repeated)e("if(!Array.isArray(%s))",h)("return%j",n(l,"array"))("for(var i=0;i<%s.length;++i){",h),o(e,l,a,h+"[i]")("}");else{if(l.partOf){var u=s.safeProp(l.partOf.name);1===i[l.partOf.name]&&e("if(p%s===1)",u)("return%j",l.partOf.name+": multiple values"),i[l.partOf.name]=1,e("p%s=1",u)}o(e,l,a,h)}l.optional&&e("}")}return e("return null")};var a=t(15),s=t(37)},{15:15,37:37}],41:[function(t,e,i){var n=i,o=t(21);n[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=this.lookup(t["@type"]);if(e){var i="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return this.create({type_url:"/"+i,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){if(e&&e.json&&t.type_url&&t.value){var i=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=this.lookup(i);n&&(t=n.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof o){var r=t.$type.toObject(t,e);return r["@type"]=t.$type.fullName,r}return this.toObject(t,e)}}},{21:21}],42:[function(t,e,i){function n(t,e,i){this.fn=t,this.len=e,this.next=undefined,this.val=i}function o(){}function r(){this.len=0,this.head=new n(o,0,0),this.tail=this.head,this.states=null}function a(t,e,i){e[i]=255&t}function s(t,e){this.len=t,this.next=undefined,this.val=e}function l(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function h(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}e.exports=r;var u,c=t(39),d=c.LongBits,p=c.base64,f=c.utf8;r.create=c.Buffer?function(){return(r.create=function(){return new u})()}:function(){return new r},r.alloc=function(t){return new c.Array(t)},c.Array!==Array&&(r.alloc=c.pool(r.alloc,c.Array.prototype.subarray)),r.prototype._push=function(t,e,i){return this.tail=this.tail.next=new n(t,e,i),this.len+=e,this},(s.prototype=Object.create(n.prototype)).fn=function(t,e,i){for(;t>127;)e[i++]=127&t|128,t>>>=7;e[i]=t},r.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new s((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},r.prototype.int32=function(t){return t<0?this._push(l,10,d.fromNumber(t)):this.uint32(t)},r.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},r.prototype.uint64=function(t){var e=d.from(t);return this._push(l,e.length(),e)},r.prototype.int64=r.prototype.uint64,r.prototype.sint64=function(t){var e=d.from(t).zzEncode();return this._push(l,e.length(),e)},r.prototype.bool=function(t){return this._push(a,1,t?1:0)},r.prototype.fixed32=function(t){return this._push(h,4,t>>>0)},r.prototype.sfixed32=r.prototype.fixed32,r.prototype.fixed64=function(t){var e=d.from(t);return this._push(h,4,e.lo)._push(h,4,e.hi)},r.prototype.sfixed64=r.prototype.fixed64,r.prototype.float=function(t){return this._push(c.float.writeFloatLE,4,t)},r.prototype.double=function(t){return this._push(c.float.writeDoubleLE,8,t)};var g=c.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var n=0;n<t.length;++n)e[i+n]=t[n]};r.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(a,1,0);if(c.isString(t)){var i=r.alloc(e=p.length(t));p.decode(t,i,0),t=i}return this.uint32(e)._push(g,e,t)},r.prototype.string=function(t){var e=f.length(t);return e?this.uint32(e)._push(f.write,e,t):this._push(a,1,0)},r.prototype.fork=function(){return this.states=new function(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}(this),this.head=this.tail=new n(o,0,0),this.len=0,this},r.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new n(o,0,0),this.len=0),this},r.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},r.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},r._configure=function(t){u=t}},{39:39}],43:[function(t,e,i){function n(){r.call(this)}function o(t,e,i){t.length<40?a.utf8.write(t,e,i):e.utf8Write(t,i)}e.exports=n;var r=t(42);(n.prototype=Object.create(r.prototype)).constructor=n;var a=t(39),s=a.Buffer;n.alloc=function(t){return(n.alloc=a._Buffer_allocUnsafe)(t)};var l=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var n=0;n<t.length;)e[i++]=t[n++]};n.prototype.bytes=function(t){a.isString(t)&&(t=a._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(l,e,t),this},n.prototype.string=function(t){var e=s.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this}},{39:39,42:42}]},{},[19])}("object"==typeof window&&window||"object"==typeof self&&self||this);var $protobuf=window.protobuf;$protobuf.roots.default=window;var $Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.com=function(){var t={};return t.msg=function(){var t={};return t.c_userLogin_1000=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.wxInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),null!=t.wxInfo&&t.hasOwnProperty("wxInfo")&&$root.com.msg.wxInfo.encode(t.wxInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_userLogin_1000;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.wxInfo=$root.com.msg.wxInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isString(t.openId))return"openId: string expected";if(null!=t.wxInfo&&t.hasOwnProperty("wxInfo")){var e=$root.com.msg.wxInfo.verify(t.wxInfo);if(e)return"wxInfo."+e}return null},t}(),t.s_userLogin_1001=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.playerInfo=null,t.prototype.loginTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.serverConfig=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),$root.com.msg.playerInfo.encode(t.playerInfo,e.uint32(10).fork()).ldelim(),e.uint32(16).int64(t.loginTime),null!=t.serverConfig&&t.hasOwnProperty("serverConfig")&&$root.com.msg.serverConfig.encode(t.serverConfig,e.uint32(26).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_userLogin_1001;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.playerInfo=$root.com.msg.playerInfo.decode(t,t.uint32());break;case 2:n.loginTime=t.int64();break;case 3:n.serverConfig=$root.com.msg.serverConfig.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("playerInfo"))throw $util.ProtocolError("missing required 'playerInfo'",{instance:n});if(!n.hasOwnProperty("loginTime"))throw $util.ProtocolError("missing required 'loginTime'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(e=$root.com.msg.playerInfo.verify(t.playerInfo))return"playerInfo."+e;if(!($util.isInteger(t.loginTime)||t.loginTime&&$util.isInteger(t.loginTime.low)&&$util.isInteger(t.loginTime.high)))return"loginTime: integer|Long expected";if(null!=t.serverConfig&&t.hasOwnProperty("serverConfig")){var e=$root.com.msg.serverConfig.verify(t.serverConfig);if(e)return"serverConfig."+e}return null},t}(),t.c_getOpenId_1100=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.appid="",t.prototype.sessionCode="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.appid),e.uint32(18).string(t.sessionCode),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_getOpenId_1100;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.appid=t.string();break;case 2:n.sessionCode=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("appid"))throw $util.ProtocolError("missing required 'appid'",{instance:n});if(!n.hasOwnProperty("sessionCode"))throw $util.ProtocolError("missing required 'sessionCode'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.appid)?$util.isString(t.sessionCode)?null:"sessionCode: string expected":"appid: string expected"},t}(),t.s_getOpenId_1101=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_getOpenId_1101;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?null:"openId: string expected"},t}(),t.c_ExchangeWithDiamond_2000=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.type=0,t.prototype.diamondNum=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.type),e.uint32(24).int32(t.diamondNum),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_ExchangeWithDiamond_2000;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.type=t.int32();break;case 3:n.diamondNum=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("type"))throw $util.ProtocolError("missing required 'type'",{instance:n});if(!n.hasOwnProperty("diamondNum"))throw $util.ProtocolError("missing required 'diamondNum'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.type)?$util.isInteger(t.diamondNum)?null:"diamondNum: integer expected":"type: integer expected":"openId: string expected"},t}(),t.s_ExchangeWithDiamond_2001=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.moneyInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.moneyInfo&&t.hasOwnProperty("moneyInfo")&&$root.com.msg.moneyInfo.encode(t.moneyInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_ExchangeWithDiamond_2001;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.moneyInfo=$root.com.msg.moneyInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.moneyInfo&&t.hasOwnProperty("moneyInfo")){var e=$root.com.msg.moneyInfo.verify(t.moneyInfo);if(e)return"moneyInfo."+e}return null},t}(),t.c_UpgradeWeaponLvl_2010=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.weaponID=0,t.prototype.curLvl=0,t.prototype.costGold=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.weaponID),e.uint32(24).int32(t.curLvl),e.uint32(32).int32(t.costGold),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_UpgradeWeaponLvl_2010;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.weaponID=t.int32();break;case 3:n.curLvl=t.int32();break;case 4:n.costGold=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("weaponID"))throw $util.ProtocolError("missing required 'weaponID'",{instance:n});if(!n.hasOwnProperty("curLvl"))throw $util.ProtocolError("missing required 'curLvl'",{instance:n});if(!n.hasOwnProperty("costGold"))throw $util.ProtocolError("missing required 'costGold'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.weaponID)?$util.isInteger(t.curLvl)?$util.isInteger(t.costGold)?null:"costGold: integer expected":"curLvl: integer expected":"weaponID: integer expected":"openId: string expected"},t}(),t.s_UpgradeWeaponLvl_2011=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.weaponID=0,t.prototype.newLvl=0,t.prototype.totalGold=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.weaponID),e.uint32(24).int32(t.newLvl),e.uint32(32).int32(t.totalGold),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_UpgradeWeaponLvl_2011;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.weaponID=t.int32();break;case 3:n.newLvl=t.int32();break;case 4:n.totalGold=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("weaponID"))throw $util.ProtocolError("missing required 'weaponID'",{instance:n});if(!n.hasOwnProperty("newLvl"))throw $util.ProtocolError("missing required 'newLvl'",{instance:n});if(!n.hasOwnProperty("totalGold"))throw $util.ProtocolError("missing required 'totalGold'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.weaponID)?$util.isInteger(t.newLvl)?$util.isInteger(t.totalGold)?null:"totalGold: integer expected":"newLvl: integer expected":"weaponID: integer expected":"result: integer expected"},t}(),t.c_UpgradeSpawnLvl_2012=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.curLvl=0,t.prototype.costGold=0,t.prototype.newGoldSpawnLvl=0,t.prototype.newDiamondSpawnLvl=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.curLvl),e.uint32(24).int32(t.costGold),e.uint32(32).int32(t.newGoldSpawnLvl),e.uint32(40).int32(t.newDiamondSpawnLvl),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_UpgradeSpawnLvl_2012;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.curLvl=t.int32();break;case 3:n.costGold=t.int32();break;case 4:n.newGoldSpawnLvl=t.int32();break;case 5:n.newDiamondSpawnLvl=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("curLvl"))throw $util.ProtocolError("missing required 'curLvl'",{instance:n});if(!n.hasOwnProperty("costGold"))throw $util.ProtocolError("missing required 'costGold'",{instance:n});if(!n.hasOwnProperty("newGoldSpawnLvl"))throw $util.ProtocolError("missing required 'newGoldSpawnLvl'",{instance:n});if(!n.hasOwnProperty("newDiamondSpawnLvl"))throw $util.ProtocolError("missing required 'newDiamondSpawnLvl'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.curLvl)?$util.isInteger(t.costGold)?$util.isInteger(t.newGoldSpawnLvl)?$util.isInteger(t.newDiamondSpawnLvl)?null:"newDiamondSpawnLvl: integer expected":"newGoldSpawnLvl: integer expected":"costGold: integer expected":"curLvl: integer expected":"openId: string expected"},t}(),t.s_UpgradeSpawnLvl_2013=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.newLvl=0,t.prototype.totalGold=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.newLvl),e.uint32(24).int32(t.totalGold),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_UpgradeSpawnLvl_2013;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.newLvl=t.int32();break;case 3:n.totalGold=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("newLvl"))throw $util.ProtocolError("missing required 'newLvl'",{instance:n});if(!n.hasOwnProperty("totalGold"))throw $util.ProtocolError("missing required 'totalGold'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.newLvl)?$util.isInteger(t.totalGold)?null:"totalGold: integer expected":"newLvl: integer expected":"result: integer expected"},t}(),t.c_WeaponEvolution_2014=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.weaponID=0,t.prototype.curEvolutionLvl=0,t.prototype.costGold=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.weaponID),e.uint32(24).int32(t.curEvolutionLvl),e.uint32(32).int32(t.costGold),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_WeaponEvolution_2014;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.weaponID=t.int32();break;case 3:n.curEvolutionLvl=t.int32();break;case 4:n.costGold=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("weaponID"))throw $util.ProtocolError("missing required 'weaponID'",{instance:n});if(!n.hasOwnProperty("curEvolutionLvl"))throw $util.ProtocolError("missing required 'curEvolutionLvl'",{instance:n});if(!n.hasOwnProperty("costGold"))throw $util.ProtocolError("missing required 'costGold'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.weaponID)?$util.isInteger(t.curEvolutionLvl)?$util.isInteger(t.costGold)?null:"costGold: integer expected":"curEvolutionLvl: integer expected":"weaponID: integer expected":"openId: string expected"},t}(),t.s_WeaponEvolution_2015=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.weaponID=0,t.prototype.newEvolutionLvl=0,t.prototype.totalGold=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.weaponID),e.uint32(24).int32(t.newEvolutionLvl),e.uint32(32).int32(t.totalGold),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_WeaponEvolution_2015;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.weaponID=t.int32();break;case 3:n.newEvolutionLvl=t.int32();break;case 4:n.totalGold=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("weaponID"))throw $util.ProtocolError("missing required 'weaponID'",{instance:n});if(!n.hasOwnProperty("newEvolutionLvl"))throw $util.ProtocolError("missing required 'newEvolutionLvl'",{instance:n});if(!n.hasOwnProperty("totalGold"))throw $util.ProtocolError("missing required 'totalGold'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.weaponID)?$util.isInteger(t.newEvolutionLvl)?$util.isInteger(t.totalGold)?null:"totalGold: integer expected":"newEvolutionLvl: integer expected":"weaponID: integer expected":"result: integer expected"},t}(),t.c_EquipSideWeapon_2020=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.sideWeaponID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.sideWeaponID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_EquipSideWeapon_2020;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.sideWeaponID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("sideWeaponID"))throw $util.ProtocolError("missing required 'sideWeaponID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.sideWeaponID)?null:"sideWeaponID: integer expected":"openId: string expected"},t}(),t.s_EquipSideWeapon_2021=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.sideWeaponID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.sideWeaponID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_EquipSideWeapon_2021;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.sideWeaponID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("sideWeaponID"))throw $util.ProtocolError("missing required 'sideWeaponID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.sideWeaponID)?null:"sideWeaponID: integer expected":"result: integer expected"},t}(),t.c_UnlockSideWeapon_2022=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.sideWeaponID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.sideWeaponID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_UnlockSideWeapon_2022;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.sideWeaponID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("sideWeaponID"))throw $util.ProtocolError("missing required 'sideWeaponID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.sideWeaponID)?null:"sideWeaponID: integer expected":"openId: string expected"},t}(),t.s_UnlockSideWeapon_2023=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.sideWeaponInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.sideWeaponInfo&&t.hasOwnProperty("sideWeaponInfo")&&$root.com.msg.weaponDetail.encode(t.sideWeaponInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_UnlockSideWeapon_2023;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.sideWeaponInfo=$root.com.msg.weaponDetail.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.sideWeaponInfo&&t.hasOwnProperty("sideWeaponInfo")){var e=$root.com.msg.weaponDetail.verify(t.sideWeaponInfo);if(e)return"sideWeaponInfo."+e}return null},t}(),t.c_CreateMoneySpawn_2030=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.moneyType=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.moneyType),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_CreateMoneySpawn_2030;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.moneyType=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("moneyType"))throw $util.ProtocolError("missing required 'moneyType'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.moneyType)?null:"moneyType: integer expected":"openId: string expected"},t}(),t.s_CreateMoneySpawn_2031=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.newSpawnInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),$root.com.msg.moneySpawnInfo.encode(t.newSpawnInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_CreateMoneySpawn_2031;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.newSpawnInfo=$root.com.msg.moneySpawnInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("newSpawnInfo"))throw $util.ProtocolError("missing required 'newSpawnInfo'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";var e=$root.com.msg.moneySpawnInfo.verify(t.newSpawnInfo);return e?"newSpawnInfo."+e:null},t}(),t.c_UpdateMoneySpawn_2032=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.spawnID=0,t.prototype.moneyDelta=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.spawnID),e.uint32(24).int32(t.moneyDelta),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_UpdateMoneySpawn_2032;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.spawnID=t.int32();break;case 3:n.moneyDelta=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("spawnID"))throw $util.ProtocolError("missing required 'spawnID'",{instance:n});if(!n.hasOwnProperty("moneyDelta"))throw $util.ProtocolError("missing required 'moneyDelta'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.spawnID)?$util.isInteger(t.moneyDelta)?null:"moneyDelta: integer expected":"spawnID: integer expected":"openId: string expected"},t}(),t.s_UpdateMoneySpawn_2033=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.spawnInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.spawnInfo&&t.hasOwnProperty("spawnInfo")&&$root.com.msg.moneySpawnInfo.encode(t.spawnInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_UpdateMoneySpawn_2033;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.spawnInfo=$root.com.msg.moneySpawnInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.spawnInfo&&t.hasOwnProperty("spawnInfo")){var e=$root.com.msg.moneySpawnInfo.verify(t.spawnInfo);if(e)return"spawnInfo."+e}return null},t}(),t.c_GainMoneySpawn_2034=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.spawnID=0,t.prototype.base=0,t.prototype.lucky=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.spawnID),e.uint32(24).int32(t.base),e.uint32(32).int32(t.lucky),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GainMoneySpawn_2034;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.spawnID=t.int32();break;case 3:n.base=t.int32();break;case 4:n.lucky=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("spawnID"))throw $util.ProtocolError("missing required 'spawnID'",{instance:n});if(!n.hasOwnProperty("base"))throw $util.ProtocolError("missing required 'base'",{instance:n});if(!n.hasOwnProperty("lucky"))throw $util.ProtocolError("missing required 'lucky'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.spawnID)?$util.isInteger(t.base)?$util.isInteger(t.lucky)?null:"lucky: integer expected":"base: integer expected":"spawnID: integer expected":"openId: string expected"},t}(),t.s_GainMoneySpawn_2035=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.spawnInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.spawnInfo&&t.hasOwnProperty("spawnInfo")&&$root.com.msg.moneySpawnInfo.encode(t.spawnInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GainMoneySpawn_2035;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.spawnInfo=$root.com.msg.moneySpawnInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.spawnInfo&&t.hasOwnProperty("spawnInfo")){var e=$root.com.msg.moneySpawnInfo.verify(t.spawnInfo);if(e)return"spawnInfo."+e}return null},t}(),t.c_RemoveMoneySpawn_2036=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.spawnID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.spawnID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_RemoveMoneySpawn_2036;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.spawnID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("spawnID"))throw $util.ProtocolError("missing required 'spawnID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.spawnID)?null:"spawnID: integer expected":"openId: string expected"},t}(),t.s_RemoveMoneySpawn_2037=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.spawnID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.spawnID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_RemoveMoneySpawn_2037;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.spawnID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("spawnID"))throw $util.ProtocolError("missing required 'spawnID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.spawnID)?null:"spawnID: integer expected":"result: integer expected"},t}(),t.c_InvitedByFriend_2040=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.inviterOpenID="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(18).string(t.inviterOpenID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_InvitedByFriend_2040;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.inviterOpenID=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("inviterOpenID"))throw $util.ProtocolError("missing required 'inviterOpenID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isString(t.inviterOpenID)?null:"inviterOpenID: string expected":"openId: string expected"},t}(),t.s_InvitedByFriend_2041=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_InvitedByFriend_2041;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?null:"result: integer expected"},t}(),t.c_CheckInviteList_2042=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_CheckInviteList_2042;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?null:"openId: string expected"},t}(),t.s_CheckInviteList_2043=function(){function t(t){if(this.inviteList=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.inviteList=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),null!=t.inviteList&&t.inviteList.length)for(var i=0;i<t.inviteList.length;++i)$root.com.msg.inviteDetail.encode(t.inviteList[i],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_CheckInviteList_2043;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.inviteList&&n.inviteList.length||(n.inviteList=[]),n.inviteList.push($root.com.msg.inviteDetail.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.inviteList&&t.hasOwnProperty("inviteList")){if(!Array.isArray(t.inviteList))return"inviteList: array expected";for(var e=0;e<t.inviteList.length;++e){var i=$root.com.msg.inviteDetail.verify(t.inviteList[e]);if(i)return"inviteList."+i}}return null},t}(),t.c_GetInviteReward_2044=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.friendOpenId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(18).string(t.friendOpenId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GetInviteReward_2044;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.friendOpenId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("friendOpenId"))throw $util.ProtocolError("missing required 'friendOpenId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isString(t.friendOpenId)?null:"friendOpenId: string expected":"openId: string expected"},t}(),t.s_GetInviteReward_2045=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.rewardInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.rewardInfo&&t.hasOwnProperty("rewardInfo")&&$root.com.msg.inviteDetail.encode(t.rewardInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GetInviteReward_2045;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.rewardInfo=$root.com.msg.inviteDetail.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.rewardInfo&&t.hasOwnProperty("rewardInfo")){var e=$root.com.msg.inviteDetail.verify(t.rewardInfo);if(e)return"rewardInfo."+e}return null},t}(),t.c_GetInviteVerifyReward_2046=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.friendOpenId="",t.prototype.rewardType=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(18).string(t.friendOpenId),e.uint32(24).int32(t.rewardType),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GetInviteVerifyReward_2046;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.friendOpenId=t.string();break;case 3:n.rewardType=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("friendOpenId"))throw $util.ProtocolError("missing required 'friendOpenId'",{instance:n});if(!n.hasOwnProperty("rewardType"))throw $util.ProtocolError("missing required 'rewardType'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isString(t.friendOpenId)?$util.isInteger(t.rewardType)?null:"rewardType: integer expected":"friendOpenId: string expected":"openId: string expected"},t}(),t.s_GetInviteVerifyReward_2047=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.firendInfo=null,t.prototype.rewardNum=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.firendInfo&&t.hasOwnProperty("firendInfo")&&$root.com.msg.inviteDetail.encode(t.firendInfo,e.uint32(18).fork()).ldelim(),null!=t.rewardNum&&t.hasOwnProperty("rewardNum")&&e.uint32(24).int32(t.rewardNum),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GetInviteVerifyReward_2047;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.firendInfo=$root.com.msg.inviteDetail.decode(t,t.uint32());break;case 3:n.rewardNum=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.firendInfo&&t.hasOwnProperty("firendInfo")){var e=$root.com.msg.inviteDetail.verify(t.firendInfo);if(e)return"firendInfo."+e}return null!=t.rewardNum&&t.hasOwnProperty("rewardNum")&&!$util.isInteger(t.rewardNum)?"rewardNum: integer expected":null},t}(),t.c_GainPointByTime_2050=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GainPointByTime_2050;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?null:"openId: string expected"},t}(),t.s_GainPointByTime_2051=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.moneyInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.moneyInfo&&t.hasOwnProperty("moneyInfo")&&$root.com.msg.moneyInfo.encode(t.moneyInfo,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GainPointByTime_2051;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.moneyInfo=$root.com.msg.moneyInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.moneyInfo&&t.hasOwnProperty("moneyInfo")){var e=$root.com.msg.moneyInfo.verify(t.moneyInfo);if(e)return"moneyInfo."+e}return null},t}(),t.c_GainPointByMatch_2052=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.curLevel=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.curLevel),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GainPointByMatch_2052;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.curLevel=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("curLevel"))throw $util.ProtocolError("missing required 'curLevel'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.curLevel)?null:"curLevel: integer expected":"openId: string expected"},t}(),t.s_GainPointByMatch_2053=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.pointNum=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.pointNum&&t.hasOwnProperty("pointNum")&&e.uint32(16).int32(t.pointNum),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GainPointByMatch_2053;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.pointNum=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?null!=t.pointNum&&t.hasOwnProperty("pointNum")&&!$util.isInteger(t.pointNum)?"pointNum: integer expected":null:"result: integer expected"},t}(),t.c_MatchComplete_2100=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.completedLevel=0,t.prototype.goldReward=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.completedLevel),e.uint32(24).int32(t.goldReward),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_MatchComplete_2100;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.completedLevel=t.int32();break;case 3:n.goldReward=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("completedLevel"))throw $util.ProtocolError("missing required 'completedLevel'",{instance:n});if(!n.hasOwnProperty("goldReward"))throw $util.ProtocolError("missing required 'goldReward'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.completedLevel)?$util.isInteger(t.goldReward)?null:"goldReward: integer expected":"completedLevel: integer expected":"openId: string expected"},t}(),t.s_MatchComplete_2100=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.goldReward=0,t.prototype.latestUnCompletedLevelID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.goldReward),e.uint32(16).int32(t.latestUnCompletedLevelID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_MatchComplete_2100;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.goldReward=t.int32();break;case 2:n.latestUnCompletedLevelID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("goldReward"))throw $util.ProtocolError("missing required 'goldReward'",{instance:n});if(!n.hasOwnProperty("latestUnCompletedLevelID"))throw $util.ProtocolError("missing required 'latestUnCompletedLevelID'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.goldReward)?$util.isInteger(t.latestUnCompletedLevelID)?null:"latestUnCompletedLevelID: integer expected":"goldReward: integer expected"},t}(),t.c_MatchStart_2101=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_MatchStart_2101;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?null:"openId: string expected"},t}(),t.s_MatchStart_2101=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.curPoint=0,t.prototype.latestPointRefreshTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e.uint32(16).int32(t.curPoint),null!=t.latestPointRefreshTime&&t.hasOwnProperty("latestPointRefreshTime")&&e.uint32(24).int64(t.latestPointRefreshTime),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_MatchStart_2101;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.curPoint=t.int32();break;case 3:n.latestPointRefreshTime=t.int64();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("curPoint"))throw $util.ProtocolError("missing required 'curPoint'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?$util.isInteger(t.curPoint)?null!=t.latestPointRefreshTime&&t.hasOwnProperty("latestPointRefreshTime")&&!($util.isInteger(t.latestPointRefreshTime)||t.latestPointRefreshTime&&$util.isInteger(t.latestPointRefreshTime.low)&&$util.isInteger(t.latestPointRefreshTime.high))?"latestPointRefreshTime: integer|Long expected":null:"curPoint: integer expected":"result: integer expected"},t}(),t.c_GetMessageVerifyCode_2200=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.phoneNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int64(t.phoneNumber),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_GetMessageVerifyCode_2200;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.phoneNumber=t.int64();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("phoneNumber"))throw $util.ProtocolError("missing required 'phoneNumber'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.phoneNumber)||t.phoneNumber&&$util.isInteger(t.phoneNumber.low)&&$util.isInteger(t.phoneNumber.high)?null:"phoneNumber: integer|Long expected"},t}(),t.s_GetMessageVerifyCode_2201=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_GetMessageVerifyCode_2201;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?null:"result: integer expected"},t}(),t.c_CheckPhoneVerify_2202=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.phoneNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.verifyCode=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int64(t.phoneNumber),e.uint32(24).int32(t.verifyCode),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_CheckPhoneVerify_2202;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.phoneNumber=t.int64();break;case 3:n.verifyCode=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("phoneNumber"))throw $util.ProtocolError("missing required 'phoneNumber'",{instance:n});if(!n.hasOwnProperty("verifyCode"))throw $util.ProtocolError("missing required 'verifyCode'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.phoneNumber)||t.phoneNumber&&$util.isInteger(t.phoneNumber.low)&&$util.isInteger(t.phoneNumber.high)?$util.isInteger(t.verifyCode)?null:"verifyCode: integer expected":"phoneNumber: integer|Long expected":"openId: string expected"},t}(),t.s_CheckPhoneVerify_2203=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.verifyReward=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.verifyReward&&t.hasOwnProperty("verifyReward")&&$root.com.msg.rewardInfo.encode(t.verifyReward,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_CheckPhoneVerify_2203;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.verifyReward=$root.com.msg.rewardInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.verifyReward&&t.hasOwnProperty("verifyReward")){var e=$root.com.msg.rewardInfo.verify(t.verifyReward);if(e)return"verifyReward."+e}return null},t}(),t.c_Lottery_2300=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_Lottery_2300;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?null:"openId: string expected"},t}(),t.s_Lottery_2301=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.rewardConfigID=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.rewardConfigID&&t.hasOwnProperty("rewardConfigID")&&e.uint32(16).int32(t.rewardConfigID),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_Lottery_2301;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.rewardConfigID=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.result)?null!=t.rewardConfigID&&t.hasOwnProperty("rewardConfigID")&&!$util.isInteger(t.rewardConfigID)?"rewardConfigID: integer expected":null:"result: integer expected"},t}(),t.c_CheckLotteryRewardHistroy_2302=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.pageIndex=0,t.prototype.histCount=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.openId),e.uint32(16).int32(t.pageIndex),e.uint32(24).int32(t.histCount),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.c_CheckLotteryRewardHistroy_2302;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.pageIndex=t.int32();break;case 3:n.histCount=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("pageIndex"))throw $util.ProtocolError("missing required 'pageIndex'",{instance:n});if(!n.hasOwnProperty("histCount"))throw $util.ProtocolError("missing required 'histCount'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.openId)?$util.isInteger(t.pageIndex)?$util.isInteger(t.histCount)?null:"histCount: integer expected":"pageIndex: integer expected":"openId: string expected"},t}(),t.s_CheckLotteryRewardHistroy_2303=function(){function t(t){if(this.rewardHistList=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.result=0,t.prototype.rewardHistList=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),e.uint32(8).int32(t.result),null!=t.rewardHistList&&t.rewardHistList.length)for(var i=0;i<t.rewardHistList.length;++i)$root.com.msg.lotteryRewardInfo.encode(t.rewardHistList[i],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.s_CheckLotteryRewardHistroy_2303;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.result=t.int32();break;case 2:n.rewardHistList&&n.rewardHistList.length||(n.rewardHistList=[]),n.rewardHistList.push($root.com.msg.lotteryRewardInfo.decode(t,t.uint32()));break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("result"))throw $util.ProtocolError("missing required 'result'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.result))return"result: integer expected";if(null!=t.rewardHistList&&t.hasOwnProperty("rewardHistList")){if(!Array.isArray(t.rewardHistList))return"rewardHistList: array expected";for(var e=0;e<t.rewardHistList.length;++e){var i=$root.com.msg.lotteryRewardInfo.verify(t.rewardHistList[e]);if(i)return"rewardHistList."+i}}return null},t}(),t.wxInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.nickName="",t.prototype.imageUrl="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.nickName),e.uint32(18).string(t.imageUrl),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.wxInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.nickName=t.string();break;case 2:n.imageUrl=t.string();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("nickName"))throw $util.ProtocolError("missing required 'nickName'",{instance:n});if(!n.hasOwnProperty("imageUrl"))throw $util.ProtocolError("missing required 'imageUrl'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.nickName)?$util.isString(t.imageUrl)?null:"imageUrl: string expected":"nickName: string expected"},t}(),t.playerInfo=function(){function t(t){if(this.inviteList=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.openId="",t.prototype.newbiGuideInfo=null,t.prototype.moneyInfo=null,t.prototype.levelInfo=null,t.prototype.playerWeaponInfo=null,t.prototype.inviteList=$util.emptyArray,t.prototype.verifyInfo=null,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),e.uint32(10).string(t.openId),$root.com.msg.newbiGuideInfo.encode(t.newbiGuideInfo,e.uint32(18).fork()).ldelim(),$root.com.msg.moneyInfo.encode(t.moneyInfo,e.uint32(26).fork()).ldelim(),$root.com.msg.levelInfo.encode(t.levelInfo,e.uint32(34).fork()).ldelim(),$root.com.msg.playerWeaponInfo.encode(t.playerWeaponInfo,e.uint32(42).fork()).ldelim(),null!=t.inviteList&&t.inviteList.length)for(var i=0;i<t.inviteList.length;++i)$root.com.msg.inviteDetail.encode(t.inviteList[i],e.uint32(50).fork()).ldelim();return $root.com.msg.verifyInfo.encode(t.verifyInfo,e.uint32(58).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.playerInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.openId=t.string();break;case 2:n.newbiGuideInfo=$root.com.msg.newbiGuideInfo.decode(t,t.uint32());break;case 3:n.moneyInfo=$root.com.msg.moneyInfo.decode(t,t.uint32());break;case 4:n.levelInfo=$root.com.msg.levelInfo.decode(t,t.uint32());break;case 5:n.playerWeaponInfo=$root.com.msg.playerWeaponInfo.decode(t,t.uint32());break;case 6:n.inviteList&&n.inviteList.length||(n.inviteList=[]),n.inviteList.push($root.com.msg.inviteDetail.decode(t,t.uint32()));break;case 7:n.verifyInfo=$root.com.msg.verifyInfo.decode(t,t.uint32());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("openId"))throw $util.ProtocolError("missing required 'openId'",{instance:n});if(!n.hasOwnProperty("newbiGuideInfo"))throw $util.ProtocolError("missing required 'newbiGuideInfo'",{instance:n});if(!n.hasOwnProperty("moneyInfo"))throw $util.ProtocolError("missing required 'moneyInfo'",{instance:n});if(!n.hasOwnProperty("levelInfo"))throw $util.ProtocolError("missing required 'levelInfo'",{instance:n});if(!n.hasOwnProperty("playerWeaponInfo"))throw $util.ProtocolError("missing required 'playerWeaponInfo'",{instance:n});if(!n.hasOwnProperty("verifyInfo"))throw $util.ProtocolError("missing required 'verifyInfo'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isString(t.openId))return"openId: string expected";if(i=$root.com.msg.newbiGuideInfo.verify(t.newbiGuideInfo))return"newbiGuideInfo."+i;if(i=$root.com.msg.moneyInfo.verify(t.moneyInfo))return"moneyInfo."+i;if(i=$root.com.msg.levelInfo.verify(t.levelInfo))return"levelInfo."+i;if(i=$root.com.msg.playerWeaponInfo.verify(t.playerWeaponInfo))return"playerWeaponInfo."+i;if(null!=t.inviteList&&t.hasOwnProperty("inviteList")){if(!Array.isArray(t.inviteList))return"inviteList: array expected";for(var e=0;e<t.inviteList.length;++e){if(i=$root.com.msg.inviteDetail.verify(t.inviteList[e]))return"inviteList."+i}}var i=$root.com.msg.verifyInfo.verify(t.verifyInfo);return i?"verifyInfo."+i:null},t}(),t.newbiGuideInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.nextStep=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.nextStep),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.newbiGuideInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.nextStep=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("nextStep"))throw $util.ProtocolError("missing required 'nextStep'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.nextStep)?null:"nextStep: integer expected"},t}(),t.moneyInfo=function(){function t(t){if(this.spawnList=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.goldNum=0,t.prototype.diamondNum=0,t.prototype.pointNum=0,t.prototype.latestPointRefreshTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.spawnList=$util.emptyArray,t.prototype.lotteryNum=0,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),e.uint32(8).int32(t.goldNum),e.uint32(16).int32(t.diamondNum),e.uint32(24).int32(t.pointNum),e.uint32(32).int64(t.latestPointRefreshTime),null!=t.spawnList&&t.spawnList.length)for(var i=0;i<t.spawnList.length;++i)$root.com.msg.moneySpawnInfo.encode(t.spawnList[i],e.uint32(42).fork()).ldelim();return e.uint32(48).int32(t.lotteryNum),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.moneyInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.goldNum=t.int32();break;case 2:n.diamondNum=t.int32();break;case 3:n.pointNum=t.int32();break;case 4:n.latestPointRefreshTime=t.int64();break;case 5:n.spawnList&&n.spawnList.length||(n.spawnList=[]),n.spawnList.push($root.com.msg.moneySpawnInfo.decode(t,t.uint32()));break;case 6:n.lotteryNum=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("goldNum"))throw $util.ProtocolError("missing required 'goldNum'",{instance:n});if(!n.hasOwnProperty("diamondNum"))throw $util.ProtocolError("missing required 'diamondNum'",{instance:n});if(!n.hasOwnProperty("pointNum"))throw $util.ProtocolError("missing required 'pointNum'",{instance:n});if(!n.hasOwnProperty("latestPointRefreshTime"))throw $util.ProtocolError("missing required 'latestPointRefreshTime'",{instance:n});if(!n.hasOwnProperty("lotteryNum"))throw $util.ProtocolError("missing required 'lotteryNum'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(!$util.isInteger(t.goldNum))return"goldNum: integer expected";if(!$util.isInteger(t.diamondNum))return"diamondNum: integer expected";if(!$util.isInteger(t.pointNum))return"pointNum: integer expected";if(!($util.isInteger(t.latestPointRefreshTime)||t.latestPointRefreshTime&&$util.isInteger(t.latestPointRefreshTime.low)&&$util.isInteger(t.latestPointRefreshTime.high)))return"latestPointRefreshTime: integer|Long expected";if(null!=t.spawnList&&t.hasOwnProperty("spawnList")){if(!Array.isArray(t.spawnList))return"spawnList: array expected";for(var e=0;e<t.spawnList.length;++e){var i=$root.com.msg.moneySpawnInfo.verify(t.spawnList[e]);if(i)return"spawnList."+i}}return $util.isInteger(t.lotteryNum)?null:"lotteryNum: integer expected"},t}(),t.moneySpawnInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.spawnID=0,t.prototype.moneyType=0,t.prototype.moneyNum=0,t.prototype.spawnType=0,t.prototype.latestPointRefreshTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.createTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.spawnID),e.uint32(16).int32(t.moneyType),e.uint32(24).int32(t.moneyNum),e.uint32(32).int32(t.spawnType),e.uint32(40).int64(t.latestPointRefreshTime),e.uint32(48).int64(t.createTime),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.moneySpawnInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.spawnID=t.int32();break;case 2:n.moneyType=t.int32();break;case 3:n.moneyNum=t.int32();break;case 4:n.spawnType=t.int32();break;case 5:n.latestPointRefreshTime=t.int64();break;case 6:n.createTime=t.int64();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("spawnID"))throw $util.ProtocolError("missing required 'spawnID'",{instance:n});if(!n.hasOwnProperty("moneyType"))throw $util.ProtocolError("missing required 'moneyType'",{instance:n});if(!n.hasOwnProperty("moneyNum"))throw $util.ProtocolError("missing required 'moneyNum'",{instance:n});if(!n.hasOwnProperty("spawnType"))throw $util.ProtocolError("missing required 'spawnType'",{instance:n});if(!n.hasOwnProperty("latestPointRefreshTime"))throw $util.ProtocolError("missing required 'latestPointRefreshTime'",{instance:n});if(!n.hasOwnProperty("createTime"))throw $util.ProtocolError("missing required 'createTime'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.spawnID)?$util.isInteger(t.moneyType)?$util.isInteger(t.moneyNum)?$util.isInteger(t.spawnType)?$util.isInteger(t.latestPointRefreshTime)||t.latestPointRefreshTime&&$util.isInteger(t.latestPointRefreshTime.low)&&$util.isInteger(t.latestPointRefreshTime.high)?$util.isInteger(t.createTime)||t.createTime&&$util.isInteger(t.createTime.low)&&$util.isInteger(t.createTime.high)?null:"createTime: integer|Long expected":"latestPointRefreshTime: integer|Long expected":"spawnType: integer expected":"moneyNum: integer expected":"moneyType: integer expected":"spawnID: integer expected"},t}(),t.levelInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.latestUnCompeleteLevel=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.latestUnCompeleteLevel),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.levelInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.latestUnCompeleteLevel=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("latestUnCompeleteLevel"))throw $util.ProtocolError("missing required 'latestUnCompeleteLevel'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.latestUnCompeleteLevel)?null:"latestUnCompeleteLevel: integer expected"},t}(),t.playerWeaponInfo=function(){function t(t){if(this.sideWeapons=[],t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.mainWeapon=null,t.prototype.curSideWeaponId=0,t.prototype.sideWeapons=$util.emptyArray,t.prototype.spawnLvl=0,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=$Writer.create()),$root.com.msg.weaponDetail.encode(t.mainWeapon,e.uint32(10).fork()).ldelim(),e.uint32(16).int32(t.curSideWeaponId),null!=t.sideWeapons&&t.sideWeapons.length)for(var i=0;i<t.sideWeapons.length;++i)$root.com.msg.weaponDetail.encode(t.sideWeapons[i],e.uint32(26).fork()).ldelim();return e.uint32(32).int32(t.spawnLvl),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.playerWeaponInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.mainWeapon=$root.com.msg.weaponDetail.decode(t,t.uint32());break;case 2:n.curSideWeaponId=t.int32();break;case 3:n.sideWeapons&&n.sideWeapons.length||(n.sideWeapons=[]),n.sideWeapons.push($root.com.msg.weaponDetail.decode(t,t.uint32()));break;case 4:n.spawnLvl=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("mainWeapon"))throw $util.ProtocolError("missing required 'mainWeapon'",{instance:n});if(!n.hasOwnProperty("curSideWeaponId"))throw $util.ProtocolError("missing required 'curSideWeaponId'",{instance:n});if(!n.hasOwnProperty("spawnLvl"))throw $util.ProtocolError("missing required 'spawnLvl'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(i=$root.com.msg.weaponDetail.verify(t.mainWeapon))return"mainWeapon."+i;if(!$util.isInteger(t.curSideWeaponId))return"curSideWeaponId: integer expected";if(null!=t.sideWeapons&&t.hasOwnProperty("sideWeapons")){if(!Array.isArray(t.sideWeapons))return"sideWeapons: array expected";for(var e=0;e<t.sideWeapons.length;++e){var i=$root.com.msg.weaponDetail.verify(t.sideWeapons[e]);if(i)return"sideWeapons."+i}}return $util.isInteger(t.spawnLvl)?null:"spawnLvl: integer expected"},t}(),t.weaponDetail=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.id=0,t.prototype.level=0,t.prototype.evolveLevel=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.id),e.uint32(16).int32(t.level),e.uint32(24).int32(t.evolveLevel),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.weaponDetail;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.id=t.int32();break;case 2:n.level=t.int32();break;case 3:n.evolveLevel=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("id"))throw $util.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("level"))throw $util.ProtocolError("missing required 'level'",{instance:n});if(!n.hasOwnProperty("evolveLevel"))throw $util.ProtocolError("missing required 'evolveLevel'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.id)?$util.isInteger(t.level)?$util.isInteger(t.evolveLevel)?null:"evolveLevel: integer expected":"level: integer expected":"id: integer expected"},t}(),t.inviteDetail=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.friendOpenID="",t.prototype.picUrl="",t.prototype.rewardGained=0,t.prototype.rewardNum=0,t.prototype.index=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(10).string(t.friendOpenID),e.uint32(18).string(t.picUrl),e.uint32(24).int32(t.rewardGained),e.uint32(32).int32(t.rewardNum),e.uint32(40).int32(t.index),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.inviteDetail;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.friendOpenID=t.string();break;case 2:n.picUrl=t.string();break;case 3:n.rewardGained=t.int32();break;case 4:n.rewardNum=t.int32();break;case 5:n.index=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("friendOpenID"))throw $util.ProtocolError("missing required 'friendOpenID'",{instance:n});if(!n.hasOwnProperty("picUrl"))throw $util.ProtocolError("missing required 'picUrl'",{instance:n});if(!n.hasOwnProperty("rewardGained"))throw $util.ProtocolError("missing required 'rewardGained'",{instance:n});if(!n.hasOwnProperty("rewardNum"))throw $util.ProtocolError("missing required 'rewardNum'",{instance:n});if(!n.hasOwnProperty("index"))throw $util.ProtocolError("missing required 'index'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isString(t.friendOpenID)?$util.isString(t.picUrl)?$util.isInteger(t.rewardGained)?$util.isInteger(t.rewardNum)?$util.isInteger(t.index)?null:"index: integer expected":"rewardNum: integer expected":"rewardGained: integer expected":"picUrl: string expected":"friendOpenID: string expected"},t}(),t.verifyInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.state=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.state),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.verifyInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.state=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("state"))throw $util.ProtocolError("missing required 'state'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.state)?null:"state: integer expected"},t}(),t.serverConfig=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.shareEnable=0,t.prototype.luckyEnable=0,t.prototype.inviteType=0,t.prototype.verifyReward=0,t.prototype.exchange_Coin=0,t.prototype.exchange_Point=0,t.prototype.verifyColddown=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.shareEnable),e.uint32(16).int32(t.luckyEnable),e.uint32(24).int32(t.inviteType),e.uint32(32).int32(t.verifyReward),e.uint32(40).int32(t.exchange_Coin),e.uint32(48).int32(t.exchange_Point),e.uint32(56).int32(t.verifyColddown),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.serverConfig;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.shareEnable=t.int32();break;case 2:n.luckyEnable=t.int32();break;case 3:n.inviteType=t.int32();break;case 4:n.verifyReward=t.int32();break;case 5:n.exchange_Coin=t.int32();break;case 6:n.exchange_Point=t.int32();break;case 7:n.verifyColddown=t.int32();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("shareEnable"))throw $util.ProtocolError("missing required 'shareEnable'",{instance:n});if(!n.hasOwnProperty("luckyEnable"))throw $util.ProtocolError("missing required 'luckyEnable'",{instance:n});if(!n.hasOwnProperty("inviteType"))throw $util.ProtocolError("missing required 'inviteType'",{instance:n});if(!n.hasOwnProperty("verifyReward"))throw $util.ProtocolError("missing required 'verifyReward'",{instance:n});if(!n.hasOwnProperty("exchange_Coin"))throw $util.ProtocolError("missing required 'exchange_Coin'",{instance:n});if(!n.hasOwnProperty("exchange_Point"))throw $util.ProtocolError("missing required 'exchange_Point'",{instance:n});if(!n.hasOwnProperty("verifyColddown"))throw $util.ProtocolError("missing required 'verifyColddown'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.shareEnable)?$util.isInteger(t.luckyEnable)?$util.isInteger(t.inviteType)?$util.isInteger(t.verifyReward)?$util.isInteger(t.exchange_Coin)?$util.isInteger(t.exchange_Point)?$util.isInteger(t.verifyColddown)?null:"verifyColddown: integer expected":"exchange_Point: integer expected":"exchange_Coin: integer expected":"verifyReward: integer expected":"inviteType: integer expected":"luckyEnable: integer expected":"shareEnable: integer expected"},t}(),t.lotteryRewardInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.rewardConfigID=0,t.prototype.lotteryTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.messageDeleteTime=$util.Long?$util.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),e.uint32(8).int32(t.rewardConfigID),e.uint32(16).int64(t.lotteryTime),e.uint32(24).int64(t.messageDeleteTime),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.lotteryRewardInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.rewardConfigID=t.int32();break;case 2:n.lotteryTime=t.int64();break;case 3:n.messageDeleteTime=t.int64();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("rewardConfigID"))throw $util.ProtocolError("missing required 'rewardConfigID'",{instance:n});if(!n.hasOwnProperty("lotteryTime"))throw $util.ProtocolError("missing required 'lotteryTime'",{instance:n});if(!n.hasOwnProperty("messageDeleteTime"))throw $util.ProtocolError("missing required 'messageDeleteTime'",{instance:n});return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":$util.isInteger(t.rewardConfigID)?$util.isInteger(t.lotteryTime)||t.lotteryTime&&$util.isInteger(t.lotteryTime.low)&&$util.isInteger(t.lotteryTime.high)?$util.isInteger(t.messageDeleteTime)||t.messageDeleteTime&&$util.isInteger(t.messageDeleteTime.low)&&$util.isInteger(t.messageDeleteTime.high)?null:"messageDeleteTime: integer|Long expected":"lotteryTime: integer|Long expected":"rewardConfigID: integer expected"},t}(),t.rewardInfo=function(){function t(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)null!=t[e[i]]&&(this[e[i]]=t[e[i]])}return t.prototype.diamondNum=0,t.prototype.goldNum=0,t.prototype.pointNum=0,t.prototype.lotteryNum=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=$Writer.create()),null!=t.diamondNum&&t.hasOwnProperty("diamondNum")&&e.uint32(8).int32(t.diamondNum),null!=t.goldNum&&t.hasOwnProperty("goldNum")&&e.uint32(16).int32(t.goldNum),null!=t.pointNum&&t.hasOwnProperty("pointNum")&&e.uint32(24).int32(t.pointNum),null!=t.lotteryNum&&t.hasOwnProperty("lotteryNum")&&e.uint32(32).int32(t.lotteryNum),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var i=void 0===e?t.len:t.pos+e,n=new $root.com.msg.rewardInfo;t.pos<i;){var o=t.uint32();switch(o>>>3){case 1:n.diamondNum=t.int32();break;case 2:n.goldNum=t.int32();break;case 3:n.pointNum=t.int32();break;case 4:n.lotteryNum=t.int32();break;default:t.skipType(7&o)}}return n},t.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.diamondNum&&t.hasOwnProperty("diamondNum")&&!$util.isInteger(t.diamondNum)?"diamondNum: integer expected":null!=t.goldNum&&t.hasOwnProperty("goldNum")&&!$util.isInteger(t.goldNum)?"goldNum: integer expected":null!=t.pointNum&&t.hasOwnProperty("pointNum")&&!$util.isInteger(t.pointNum)?"pointNum: integer expected":null!=t.lotteryNum&&t.hasOwnProperty("lotteryNum")&&!$util.isInteger(t.lotteryNum)?"lotteryNum: integer expected":null},t}(),t}(),t}(),function(t,e,i){i.un,i.uns;var n=i.static,o=i.class,r=i.getset,a=(i.__newvec,laya.ui.Box),s=laya.utils.Browser,l=laya.ui.Button,h=laya.utils.Byte,u=(laya.display.css.CSSStyle,laya.ui.Component),c=i.Config,d=laya.events.Event,p=laya.events.EventDispatcher,f=(laya.filters.Filter,laya.maths.GrahamScan),g=(laya.display.Graphics,laya.resource.HTMLCanvas),_=laya.utils.Handler,m=(laya.utils.HitArea,laya.ui.Image),y=laya.display.Input,v=(laya.ui.Label,laya.ui.List),I=laya.net.Loader,w=laya.net.LoaderManager,b=laya.net.LocalStorage,C=laya.maths.MathUtil,S=laya.maths.Matrix,x=laya.display.Node,T=laya.maths.Point,M=laya.utils.Pool,L=laya.maths.Rectangle,D=laya.renders.Render,E=laya.renders.RenderContext,R=laya.renders.RenderSprite,P=(laya.resource.Resource,laya.resource.ResourceManager),N=laya.utils.RunDriver,G=laya.display.Sprite,A=(laya.display.Stage,laya.utils.Stat),U=(laya.display.css.Style,laya.display.Text),k=(laya.ui.TextInput,laya.resource.Texture),B=(laya.utils.Timer,laya.ui.Tree),O=(laya.ui.UIEvent,laya.net.URL),W=laya.utils.Utils,V=laya.ui.View,F=function(){function t(){}return o(t,"laya.debug.data.Base64AtlasManager"),t.replaceRes=function(e){t.base64.replaceRes(e)},n(t,["dataO",function(){return this.dataO={"comp/button1.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABRCAYAAAApS3MNAAABSUlEQVR4Xu3a0QmFMADFUJ1JXM0h3moPZ6qg4AoNeLqAIenFn65jjLE40w2sQkxvcAMI0eggRKSDEEJUDEQ4/COEiBiIYFiEEBEDEQyLECJiIIJhEUJEDEQwLEKIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggnEvYvv9IzjfxDiP/XlgJsTcCyDEXP/v14UQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBYhBARAxEMixAiYiCCYRFCRAxEMCxCiIiBCMa7iAjPpzG8fY3kF0KIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBcGJiOHTRZjZAAAAAASUVORK5CYII=","comp/line2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAAG0lEQVQYV2NkoDJgpLJ5DIxtra3/qWko1V0IAJvgApS1libIAAAAAElFTkSuQmCC","view/create.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAdElEQVQ4T2NkwAIWLFjwH5t4QkICIyM2CXQxmAHka/j///9mXDYxMjL6YtgwBDUg+w8crIT8MBQ0oEca55JvWNPS9xgu4tISzADyNfz///8MnrRkgmHDENSALWng9fRQ0DA40xLecglbWhpqGoZCMUNKUQkANAHAJVkE5XwAAAAASUVORK5CYII=","view/rendertime.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAABeUlEQVQ4T+2Uv0tCURSAvyNdcwiXBlsaaomWFgeHlqAtCPsDJHwIiUtDSxERtErtmQ6CjkHo4FpDBQ0tbVFR0BYE0eQvOnFF7T17QlOTd3m88873OD8+rtA9uVzOBIPBlIisAwvd8B1QajQahXQ63bIx6QHFYrEEJHrv7qeqZhzHOfYA+Xw+Yow5B+YHoGwymdxW1QAQEFWNAk8i8uEDuZM3gUcLZIEJYNcNqWrVcZyd7p9t8jLwYIFTYBx47UHlcjmcSCQ+B5JtpU0LnAFj3br7kE+yTalb4BCYczVqoT3AjteW4T73FlgFNgY+1IGQz4hPLGCAI2DGbweu2Auw1Vmcqk4C+8DsEOgZOBCR9/6mVdU2vgIsAdOuIVwANRFpezatuahpTYVSop1m+y6pasm8NQqSvvW61KwslkSHuCRkgvErr0taiUXaal1Sr0siWRO/9HfpF+RN9nfpB/qqmrXrv7mktVhYVm5GLo1cct9LI5e8d84/3UvfAgdlKH0EO7MAAAAASUVORK5CYII=","view/cache.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAkCAYAAABSSLCCAAAAcElEQVQ4T2NcsGDB/4SEBEYGBgYGYtmMxCpENhhsA6mA8f///5tHNTEwkBcQpIYcSD15kUtWigi51vR/jVYdOGUQy2YkViGywWSnvTOkhiAonkY1gZIRqSEHTntkRe4g10RWQIyWe5Bgo2O5R7dkBADztyP+yFzirAAAAABJRU5ErkJggg==","comp/clip_selectBox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAoCAYAAAAIeF9DAAAAsElEQVRoQ+3ZQQ0AMQzEwAuqEgh/Sj2pKObhIrBsrfLonHPu12MMTEGYFg+kIFaPgmA9ClIQzQDG0w0pCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCCoIZwHBmd/tTh6IUBIrx/tRbiFWkIFaPFoL1KEhBNAMYTzekIJgBDKeFFAQzgOG0kIJgBjCcFlIQzACG00IKghnAcFpIQTADGE4LwYL8U/BE1dCJ3PsAAAAASUVORK5CYII=","comp/label.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAASCAYAAACQCxruAAAAmElEQVRoQ+3aMQqAQBBDUef+hx4Zq1mrbPnhWylECHmghVZ397OOqqp97TlugdNzgEXFIaaFuwROt0LmBEay5aXb920+FjIpMJItLy1wvhUyKTCSLS8tcL4VMikwki0vLXC+FTIpMJItLy1wvhUyKTCSLS89wPP1Qeh8M0zy+84gMMbruqjA15OxbtjAu7mPa5bj0fb/A8cLgD4n/wQKNiIAAAAASUVORK5CYII=","comp/clip_tree_arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAwUlEQVQoU5WRPRKCMBCFWUt6vYQeB06RUDpoBbFDa7yDwm30FGi9dHnOMiQDBgvT5c3b7+0PRVEUlVV9A3NmzL6T//SRfMz5CgCdtVafjlmzaHAigAbM2tE8YVo1pf0yvABoc9D3wACgBbMKIgD4qqDJsqqlMV8VGL5n/88geCJKlijSMBXFZUNx/CSi9WwX1r7R99thzKKqkxXRbMUWSE2u2sEwHsxHCbrMVSq6N4xRD9HAvJstylEkarhurlqnfQC58YP5+CvQNwAAAABJRU5ErkJggg==","view/bg_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMGZk/l2CDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ4oyStBhXcy5AAAAABJRU5ErkJggg==","view/bg_top.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMKZp/rWBDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ6WyDMhXMLeQgAAAABJRU5ErkJggg==","view/clickselect.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAACfElEQVRIS8WVO2iTYRSGn5OWqpMOurg0VRBdVVCsg7GgDjpZECyirl4GEYfSgBlaB5VSpApdxCJIoeKgg7dKC21ALahIiyiKKUjxAiI4qCH1lRP/hPhfAnHpGZPv+c4573nP95ukO/xHmINmtq8RtswsPiipB/gAPAFem5nCbcSWKukIsD84/A2YBh4DL8ysWLkk0qOkDcD5GLF+Ac+Ap35ZHGjAdWB5gtJvgZFYVSWdBHaFwBlg1Mw8K0ngFiAbAm+a2XBij/6HpBbgBrAEmAVeAZ1AFU40QDCWrcBZL0/S4Vq4HtgB7DWzU5XyauDBMhhWz70ryVVdb2ZuhGpI2g1MODjfiMFrxZk3s9WNwJ6snHFxQUlXgXfAPeC5mf2O2Y5oqZLcMceCw1+AseCSSTP7mSiOpM3A7RixfvgYgAd+WUQcSSnfPWBlgtIvgf5YVSVdBA6GQF/mS2bmWcvbERmHJF+payFw0MzO1TWApKXBViwL3h5/Pk4AVTjRAMFY9njJXl6wLccrcD3wAHDUzBwuRw18JtbkbkFJruomM7sf2o4u4Jals/mFRgxeFcfBQm97UyOwM+WMiwums/k3QnMps+HWpuLIRC5TCrcRW2pbT35MRiY4XDRsVmiU5uJQIZfxb0k5Ij229eQPySJ287MLGO8Rd1M0XY6AO3LjzYVSy3fAH+VICL4a6o9VtTWbnzbYGKI+IrtQ6Ns2EFuq/5jOTnWD9f4DikeFvvbqhyg2Yzo3voJSy2fAjfEJMYPRQQ2caAAfC7AW2WkvrzU79dCwnRW4Hjgg6JrrbV9VKbkKw1Csyd2Ca7on1y2krHOub3t16//2n79SarbsH7BKtfejoCjmAAAAAElFTkSuQmCC","view/resize.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABeUlEQVRIS+2UvUpdURCFvxXRKJpIEBURsVAIiiBoaaGCjY2VLyH4MBaCPoWlnQlpI6SxsQmkURQL5eK/6JK57iuRnMPZtxAkuOFUhzWz96xvjcg8tluAT5LOQqJMHba/AgPAD0nOEtruAOaB6Lon6U+ucAoYTLe7Bb5XCm1/BCaAXqAVOAHyOkYn27PA5/TGWmXHxvBeT2i7TVIM4MUp7ZhGPlY3V/pVKUxEjAIjyac74LIAjK70PwCoyfYXYDJwyqDoHtiRdFOfql0naBgIrILF/ZIi1yH6h1XbYXCPpKOq7s34GEX7JB00m445YBzYlPSQ1dF2N7CaWN2W9DNXuJxAj1uGVeuVQtvh32LyuR34DexWCv+CfAXoBzYkHb8Boe1OSRcFkBdfNY18IQiUtFUpTJjNAPEFHVfAaQFyjZ3zNBzbQ8BSWkZViEbk1uIpjXR8AKbT7jwEvpVUqEk6L0pHLN5hSWWxeq7XjI/v6Sgz0vZ7Ov7DdDwCkcb1m86tSukAAAAASUVORK5CYII=","view/clickanalyse.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAC7UlEQVRIS5WWT2hUZxTFfyfGFolkoUVKrHQiEaX+IfgHa54UQzUqpWYhLbQU6ULNwgYXuog6yiiTgK2LgtAu6yqbFkpRBEURQzJEBN200NqKkxoDLnQhFUrizJU7vje8SSbzZr7FwDy+c75z7z3nfU80uMxMDin9JC0zewvYAHwIrAH65wWaWQuwOdy8CVgUHnBd0sUKoJktBbYC24B1QHMVNeck3ZWZrYhtXpUg/3/gS0kzDnT2/cDqpFqBUUnnK5pjZutDgo01Tr0g6XbVrprZypBgO9AUU/EK+ErSyzLQzC5XkTkCfBR7fl/Smeh/qasOlPRp9DAkOgp8H5P9o6SriUAnMrOzgNdswNeSntcL9IYNAQ8kHYuXU5Y6u8ZIupldAO5I+nkOsNb8wjk/ljTZKFCSvMbSMrPSiOpNx9uAz3UP4IbfWSsdrcDH4eZuYHF46LCk47PT8S6wG9gbJmRhlfoPSLrhJvdERJs7E+S73dZKmnagsx8JB50UEHdY3+x0dIUEO2qcekTSr/OlY21I4N5dEJMwA6yX9CKejqkqGn8DemPPb0v6YrZXpyS1xYbsRD3AtZjsk5IuJQKdyMyGAa/ZnbNR0tN6gd6wXwAP8SfV0jGnxki6mV1xyf4ubdTkPue/Jf3TEJCMNZFRMQLtyNwqvaTrSkdHZry1MFM8bLLPgY5U8/SyeYHvncotb5b1A/t8c2QGg3sT2WBLBbD95PiGogr9Ej0Gbap8r4ZJ5kR+MPhW7WdGd5npEFaa15IE+YWW5uklf2S6/1N7OnfasG+Ad5KiAfyVzwYfVDQnlc71YTaA8Ntrvtq/y2eDgapdTZ0a60UMhjdvmcCgWDClJge7npSBqfRYYY5M6U/M/NqO1mQ+G7xf4VUH5rNBOXtviLQfzH0afizop0fZroOJQCdKpcfyUKrZFhTpfDgU/F4nMNcH9gPwLJ8Nls3xarUaI+mp9NhTg5GJbPBZQyb3OReayP17rutmHPga1PpCOk+zrlEAAAAASUVORK5CYII=","view/res.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAADwUlEQVRIS+3WT2gcdRQH8O/b2SwNC7l4MAEPvbilUkoPOUmLjSDrZn4hxYKH/kGwyB4tQogiu/N+GymyoWguhVBQKKkHQTHsW9fUQwqKp4AgtMXkInhILl4CkoTdmSe/6XZp2pntLli8uMedt9/3mze/33yW8Jw+9Jxy0TeYmV8FcFVVTxPRiwA6AP5U1TvZbHapUqn8nrawxGBVJWvtNVWdJ6K05h1V/dhaW08KT/wRM1sAVQCRqn5JRLdyudw9Iora7faJKIrKqnrBNSWiahAEC0+GHwpm5utEdD+KopsuBMDbzPxt0oqstRdV9Za7lslkzlar1Z8erzsUHATBJhG93C34fmJi4ly5XG6nzTEIgjoRzanqkrX2amowM98F8Fq3wK34PWb+Ii14cXExv7e3V6hWq78+axQrANwt/kVEl5j5h0G2IzMfUdWCtfa3R/VPzvhTAG8AOM/MfwwYehTANwB+ZOYPE4ODIDhJRJvMvD9IqLW2GEXRbSJ6AcBtZr6UGPzoS2Y+lc/nt+bm5v5Oa2CtvaKqywC8bs06M7+eGszMn7nTBqDOzPNpwcvLyyPb29vfAZh2Naq6Za0tpAbXarUzURS53eGKL1trv0oKZ+a3AHytqplMJlOOoui4tfaDvqOw1lZUtabubBOtqOqN0dHRB/v7++62XwHwDoB33dkAUGPmoO92e/yitXZeVT8BkE1acbdpPQiCj4hIBw52hQsLC8c6nc77AN4E8FK3yQ4R/Qzgc2b+Je0ZDPU+fjiZp1eXFD5U8CB7u+/DGybgXxnFMA3/m1GISGwegNMAeuYBuON53lKpVBrePBG5RkTuSPc1b2ZmZnDzRKRnHoDYvIODg3u5XM69/E8AKAO40G1aNcb0N6/ZbF5X1fsAbjpInXnGmETzGo3GRdew+0DPGmPSzRORTQA988bHx89NTk6mmtdoNGLziGjJ9/1085rN5l1VPWSeMSbVvLW1tXwYhoXp6en+5olIbB6A2Dzf9wcyb319/cju7m5hdnY22TwRic3zPO98qVQayLxWq3U0DMPYPGNMsnmrq6snx8bGNqempgYyT0SKzjoAsXnGmP7mNZvNU9lsdqtYLKaaJyJXABwyzxiTbp6IxOYRUd33/VTzNjY2RnZ2dnrmAdgyxqSbJyJnAMTmEdFl3/cTzROR2DzHk6qWiei4Maa/eSJScZY99FRXPM+7MTIy8iAMQ6/dbsfmEVHPPGPM4OaJiBtDqnmuqfuL4Pv+8Oa1Wq1jYRg+ZR6A2DxjzP/mPRupfwAf56Q4urCh6QAAAABJRU5ErkJggg==","view/tab_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAABICAYAAADyMAW8AAAAcUlEQVRYR+3WsQ3AMAhE0TCMeyTvP1tShRQo7lxYegxA8fUPLuac97VhwuKXKhTlFxRQ9GPDClawYvGEDwxIZu7pFRZXr4ACinY1ghWsYMX/NxWQr22edyvGGHt6hcV1NqGAon8QVrCCFYteISDnBuQB3xJuQcDkEngAAAAASUVORK5CYII=","view/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAACmUlEQVRIS7WWS0/bUBCFz7mJmyZxENm06mNVoVZC7LqGn9FNqy55/BSWSEhs2/4uuqFVoA150JLKJvGdaiIH2TfXNoKQpeP5PHPO3GMTK/5xxTwsAUWkBeBZ+qAByb/Zh4pIA8CL9NqY5Dj7vw9YA/ABwDsAfwB8ITnUIhF5CuATgNcAfgH4RnJSCkwLl6AA/lXBtLZQQxFxoTr6q6LOFl2WmuJAtcY7ZuXIixsczfRyTlPfhpSN7BpwBeBtFdQLFJE2gI8AXi7GBBBl3Fdnv5L87XbpWxuFfQbw3NXM0dQLLdrDIH3ylGTiLLYB8CS9lpCc3tmU+xzL1Z9lEXl/n06KavjowCiK1uM4fqMd1Ov1s3a7fZntZjabtSeTiQYHgiC4aLVavZwpbofT6TQYDAaH1tod3bMwDHc7nc5PLZrNZmG/3z8WkS1jzGm32z1oNBqjUqD+6YM2m81xFWyeNkUaulAAlyKyWdTZbdqUmZKFakEVrLRDV7P5zY6m3rQp6tA1AMC5tXY7he51Op0fdwbGcdwdDodHWc2MMdcL9wGM1tbW9sMw/L6UNm6HChuNRifW2g1XM0dTL3TJZS1KkkTDFbVaLQqCIJcm6k0URRpxuvg39Xo9rtzDh5zt1Z/lXq+32rR5dKC1dt0YM08bAGd65BxN1ZB52ojIBcl82rgdWmsDkocAdgDoW22X5DxtSIZJkhyT3AJwCuCAZD5tfCP7oMaYcRVs/tAiDT1QHX2zqLPbtCkzxYFqjXfM3GKXAR3NtC6nqTccioAeA84BbCuU5B4Af9r4gCLSBXCU1UxErjPuj0Rk3xiznDYuMIWdANhwNXM09UKXXNai9LtQ9y4yxuS/XUijr9L0lXBDMp82j370HhJdWvsftiHJYFPSIqEAAAAASUVORK5CYII=","comp/combobox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABCCAYAAAA476rKAAACfElEQVR4Xu3bMYsTURQF4PMmExgIWkgEU5hskyJYxGYKY5VS7NzCylL8Bftj3NbKQjuxTBWbaUwhKdIYLCJotlACA5m8kQTZZZkkeN9dbuNJOXPPu/DN5ZHkMa7dbpfgx0TAEdvEedeE2HbWxDa0JjaxLQUMe3HPJrahQECrNE3RarUOJheLBbIsq9znZAdgJ0mC4XCIer1eSa/Xa4xGI+R5TuwA272RTqeDfr9fuTeZTDCfz/dmONkK/cFggGazebnCcrnEeDw+uCKxFdiNRmO3nURRBO/9bvtYrVbEVpgejXa7XfR6PUynU8xms6O1nGzlU3DO7fbu7V5dlsf/0yO2ElsSJ7ZES1lLbCWgJE5siZaylthKQEmc2BItZS2xlYCSOLElWspaYisBJXFiS7SUtcRWAkrixJZoKWuJrQSUxIkt0VLWElsJKIkTW6L1t5an6wFooRGerofKBeZ4uh4IFxrj6XqoXECOp+sBaJoIT9c1esIsT9eFYFbl/J5tJc13agyliU1sWwHDbtyziW0oYNiKk22JfXJ6xnfXjcDdFttnb43a/b9tovQ5iG30/IltBL1tQ2xiGwoYtuJkE9tQILBV/ugl4rh2MF1sPJJP59fuc7IDsTe37mHz8Bki+MoKHhFqn9+j9vs7sQN9K7G89xRx837levHzG5Lph8p1TrZK3iF//ApxdLVI4YFk/BpA9Uc5sVXYwObOCfyDJ3AoUcIh+vIRtYuve1clthJ7G8/7p4hv30Xx6weSybuDKxL7BrARxcjTF0iyN4AviH0Tpto1ONlaQUGe2AIsbSmxtYKCPLEFWNpSYmsFBXliC7C0pZfY2oWY/zeBP8uaLni/AFTVAAAAAElFTkSuQmCC","comp/textinput.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAWCAYAAACv8OArAAAAZElEQVRYR+3UQQkAMAwEwcZI/LtsoSL2NTGwMByZ3b3HJQIDO3H+EdidNezQGjbsUiBs+dmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4Ew9QBe0R29X9x+dwAAAABJRU5ErkJggg==","comp/vscroll.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAhCAYAAAA/F0BXAAAAOklEQVRIS2N8+OzVf2YWFgYmJiYGcgHjqCEYQTcaJpipaTRMRsOEmDJmNJ2MppPRdEJMCIymE2JCCQAYonwDuu2VMAAAAABJRU5ErkJggg==","comp/vscroll$down.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAAC/klEQVRIS+2WS0wTURSG/zszBcrLFVvjio0LiAqRRDAmGpRodFE1MQQQkOKGqBujRo3ExLjB4MaKgDzUaGQhvoJGYwAjYoioERcuDGxYEIwPkBY6nWvObXuLnXZaSklYOIu5M/fxzZn/nvPPsInJKa5qGhRFQaIH+w8xSbcymtTd+gBFYXAdyjM9sf7ORxgGR0t5/j9jpkhq2t5B0xQwBrgqNsnJ9V0j4BzQdQNtNYXWkKz0NDiaXkBTFTCFoaWmCHVtQ+AGh+4z0HNiO2bmPNYQGiXQvkuPoaqqiIgi8Pl8eHBqtwlA86MKS6Cy8z1gjIFzjqcXHBEBlpBgRNuOd+HVlYqogJiQIChcg/BtW5k8SaSSkxPJ5PRPTttHfkI7kcghIpn8NYfp33NLXp+TnYG1OWvA3ox9499nPSjdkCsgHJxOIjc43VMrugL9dEUD4Oj/PA4CsUfDX/jOjbmisHTDCCzi4t4QgLDrQF+qTYOmqhgYGw9BvLpv0ZNjQwieaU9b7ZCDriFhSt3VBSZNartHA6aUJ7SK+jqO5n5pSp1HiqSw1e3Di0ypwBpiU1XsudwnTanraDEqrg2GmZLbGkJh2jQVZY29JlPqPe03JX/uxLE7Nk3DjjP3pCn1Ne7HrNsjdYoLQsmWYtNQ3NCBgeZKzLrn/foEoogbQgvSUmz4454P7VQikGhpHzGSZdVOUqqYTGli6gemZ9yJ+0lSTalk/TrxtQOYaBnESbTinokev4UG+p+9/xoyJQKQn8x7vf7JjEFZ1FJBBvuC12RINIdAwtkIQuksnxgHhKBUZ6scQtLSNyiWJpav47z9STjbjfJ8k5iVN0eEs911bhZjUTWpbR+RztZ6uFBERNCq1rfS2e43lFhDsjPscDS9lM7W4dyCquuvpbM9PFkq0iHm7mSl2yP+bj05uxdeXZe5FHOL6Xdr17nQ79bziwew4NXFqwUTMiaEtKBPwtZjnRi8WgXPglfqsyQITc60pwpAeNpH1GRZtRM0pWVVcTJM6S+dYaRsIf025wAAAABJRU5ErkJggg==","comp/vscroll$bar.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAA/CAYAAAAGyyO8AAABYElEQVRYR+2Wv0sDMRTH30tarCg6dRWnQnFT6OiqoP+tk+Cig+AiHayDiNSlg+jgD47K1US+Lwm5s4o/mkElN1xy73KfcF/efTi+Ht3Y0X1Btw8FffdoLy3QSnuZ+HhwZe+exrS13hGGJYsTWSszN0rJ1zHDDbJ0eDYkgHjv5Nxub3TIGEsTY/xDVq6NAN7MfW2u2aCG1nQ0GEZIOXmp7Pw5BPDF+VaGIGQfbM6k0ng5kw8/wF/eJzP5JInZkjg2CSS8zk6vCys7Wb8r5qqsncAP+pdR1Lu9rvgVT4uYg+3F+PCtAzjzu/taKdKKBSS2/wkEMBg/Q+rB50zqzZb7ZPoD/GeZ1HySxGxJHJsEEl5nc22VmCFalpFJTjLKNUtFxlDfP72IogYAP8PPZekWM5OqjErFWpjjbxprABJRA/JYjOOOX4Bgo6bWGYKsfMg5k+lmy5n8uUxm8kkSs6Vw7Cstibc9Fv5vWQAAAABJRU5ErkJggg==","comp/vscroll$up.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAADF0lEQVRIS92WTUhUURTHz31vPv0KKmkXrtxUGNomkCANLdCUpEatJFuIClIEFRl9kGH0BYWQElLpotGKEJXAtKQooYUFpi1axLQZMCyyZJqv926cM2/uTM288emoUHfx3v16v3fuuef+72Hume/c7/cBAwaLKWaLBZjLPc0Zk0CSJGBs4SDOObDP7i9ckuXkIbLJRJDFFrJk2SGNvZNwy7ExoZEJLWnqfQ+4SlUFaHNs0gXpQhq6x0GWGe0Y7oCicGivyYsLigup7XgFJlkCJjFwNm2HqrZR4CqHoKLC3fr8GFAMpPLqEJhMoZjpay6Bnx4vpKfYoLx1kCwKBlXoOV78BygGsudCH1nwtNVBgHBBUFFzL1n0+Gx5YghOxhINiAbFG1uZODESxf+bJShKrulv8HUusp1G/IBz1qTZIGvdamBjU584Aopzs+lbDhwfFFgc2/imLq0fazgAHF5MumBtuh3YwJsPfGdeNqgY1qqqfcSprRLgr7rWZzWbwCTL8HLKFYEEgkrUn+eHIDzNbltBSG33O+jcnxNZmrYcw5Yc7hoXotRenRPyz0IgBzrGYkTp9qEtxiEV10eEKD08Wgh7bzwTonSvIV/soK5jd53rE6I0eGY3/PL5wWYxQ+nFgShRKqK6LqTwhJNEafRKNQHCcWK3WmDHqR5NlMoSQzAWUV+9vkBMsKXYLCSbs3Oe+SGqqupGrIL3h3YclifYkjo7yZ7izIzUUGrhnvXAzA+PURkR8xCwPnMVsCUVpW0bsiCUKOH9S0980JvaLJSQUTal9Q+9/RgRJQSgnvgCgdBkxkCKektSpC9cR0HCOQgiZUMI3njijwYg+COzLP9rkLr7E3Dn4Gbhp7BPDC+n0TkhlK2zJpccuSBIfVdsutVdt9U4pLbjtVC2B0cKYN/N50LZHh0rFGGguztV14aFsvWfLiVhSrVboaSlXyjbk/NlBNKFVLT0k7INX3KAx+sXfkBlKzjpJItGLlcmhmSkptAB83h9MTuCICxBRUkMwUmY5+uFPY7LmJ7GW05SZycsSos9xUsmSr8BfgGeWI6+BgEAAAAASUVORK5CYII=","comp/button.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAABFCAYAAAAPWmvdAAABA0lEQVR4Xu3ZMRGDUBRFwXwfKSgxFhfRgAbUxEakkCEO3qmX+p9m5w7NW9v7cz18I4EFbeT1fwxtbgYtmEGDVgRC458GLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJZW0Pbj64Q3hFvQhmL3CQ8atLlAKCwNWhAIiaVBCwIhsTRoQSAklgYtCITE0qAFgZBYGrQgEBJLgxYEQmJp0IJASCwNWhAIiaUVtOfrdMIbwi1oQ7H7hAcN2lwgFJYGLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJYGLQiExNIC2g/MxaMp6CSauwAAAABJRU5ErkJggg==","view/bg_tool.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMklEQVRYR+3QQREAAAjDMCYG/DsEGXxSBb2ke7YeiwECBAgQIECAAAECBAgQIEDgW+AAAeIuAVS/mngAAAAASUVORK5CYII=","comp/minBtn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAArUlEQVRYR+3X0QmAMAwE0GQN19B9nM193CmiIH7ZXOAoRc/fpjl8jVDdOj/eOc8USBcXqUjLAtDQRMSOdHb3JatTYCZUXodIy10bGxTI1Lx6/YA0Ima6W2tKFcjmdpGKtCow7NBAdxozy+804Gfx/cDqbLzWDzs0ekNY4B9nOMEehMKTVIEEyKeFSKmc18+MppRtipJuYPCa1SkwEyqvo6Tlxm8bFEijvBt9n/QA/fOPydLHcUIAAAAASUVORK5CYII=","view/zoom_out.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACy0lEQVRIS92WQU8TQRTH/28oQkj0CL0QOMAJQkz4DkS6A+GA+A00Hrhj0uy8NiTwEdBPAOrB0Fnq3U8g6gkOSjxUjpCQCu08M5u2qaVAt7YmOqfNZPa3b9/+Z35L6NOgPnHx98Gbm5sTlUplA0AGQBpACcBBKpXazmaz3+5607YVM/MjEXlNRPdbASJyTkRrzPz+Nvg1MDNPAvgI4AGA10qpvHPuSCk17ZwLAazV4HPM/PUmeDvwSwBPAbxl5sf+RmYWZo7XMvOehwPYYebnScAnAMaVUrNhGH5pBefz+Rnn3GcAJ8w8kQT8E8A9AEMA/HXrqM9fMrO/bjvataJvFdd7/IaZfS9/67ExZpeIngB4xczPklQ8KSKHPmoispdKpXKjo6PHp6enU5VKxXhoV6moVXhnjpVS5wDOwjD81K7qG7e033lXV1cviMjvvDEAP0TkYHBwcKtarT4UkXcALolo1RhTaIV3dVYYY9aIyOfZDw9fMcYUm+FdgWvtYgCmBisrpRbCMPxQh3cNbgM3zJzvCdhDcrncuojMA8gy8/eegTvO8U0Lk87/UY9ve9h/BI6iyJ+1GyLScB4RHQDYDoKgO+dFURSfFQCuOQ9A7LwgCJI5r1gsTlar1YbznHP5crl8NDw8PK2Uip3n4QMDA3OLi4udO89a23Ce1jp2nrVWtNbxh7bWxs4jop0gCDp3XhRFJyIy7pybXV5ejp3XDN7f359RSsXO01p37jxrbey8i4uLoZGRkWvOa5q/1Fp37rx+VtxwntY6dl5zK6Io2hWR2Hla686dV0vFoY+aP8xFJJdOp49LpdIUEZkaNHkqfIWd5JiIzkXkLAiCZM7zO09EYueJyBgRxc4joi0ADeeJyOrS0lJvnBdFkf8xbDhPKbWSyWR647xCocC+53XnAVjQWvfGeS1wo7XunfOstesA5pVS2Uwm8w877xeHf444cscwYAAAAABJRU5ErkJggg==","view/refresh2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAEIElEQVRYR+2XTUhjVxTH/+fGpBrGT/xoBQdFFMMQLNLNbLooLbaFzqKMUhCSZwsuhGG6KCNd6DuRLgqzmGVxUd8LUrpoYWZTKO1yNi2F1oVtceEHflSLqNEav8bklPuqgsl75sUPSsucTQj33v895+R/7y+XcA1B16CJ/6GoYRiDItKfzWZjExMTv5/XtoLlx2Kxm0qp1wH0AHgTwC4RfWRZ1mdewp6ig4ODN9Lp9CMieh+AchH41Lbtj92EXUUHBgaCh4eH3wJ4zSObGSLqtSzrZ9+ihmF8CODR8YIflFL3MplMNxF9IiJWIBC4Pz4+/ldR5RuG8QuAlwGsAWi3bTsVj8dvAWhOJpPfFPK2a/mGYewDeAHAV7Zt9+aK9PX1VYRCoVcApNxa4CX6J4B6AE9t2341V9QwjO8AvAFg27btytxxL9EvAbynJxNRj2VZX58sjMfjd4joyT9D9NiyrHf9iup+/gggBCALQPfxVwARAO8cWywD4LZt2z/5EtWT+vv774rIBIBSlx/mmT5dyWTyC9+WOpkYi8XalVIPRKQbwItEpHv9PRE9tCzrt6IsVcgyhcYLnv1CAkWXfxFBxzEXXXipq+8imz7P9CJdO3+N754y86A+vYFAIDY8PHw58DHzTQB54DNNs3jwMfONY6R4go+Z/YNvbGwsuLKyci74APQys3/wMfMZ8InIPaVUt4g44AuHw/eHhoaKAx8znwEfM6dGR0dviUizaZoXA59pmvtE5ICPmfPAx8wVABzwubXA1VLM7IBPRJ4mEok88DHzKfiY2R/4mPkUfCLSk0gkTsHHzHdE5Immnog8TiQS/sDHzK7gE5EIEZ2CTyl1e2RkxD/4TNO8S0Su4BORZ0qpftM0iwefaZrtAB4QkQM+AA74ADxk5ufgc78CfV99xdy61yMajUbfAvA5gJeKycZj7gqADygajf5xRYIn+6xoUbmCDM9I/LuidXV1qK2txdzcHPb39ZPAOwpmGgqFUFFRgerqauczm81iaWkJa2v64eLhU6+eKqXQ1NTkZOcWq6urWF5edh1zzZSI0NbWhvLyctdFBwcHmJ2dxe7urn/R+vp6J0sd6XQaCwsLqKysRGNjI9bX17G4uIhMRr8jiig/EokgHA7j6OgIU1NTjkBZWRl0f7e2tgo60LX8rq4u/UjC5uamU2ZuBAIBZ1O9mVsLXEU7OztRUlKCnZ0dTE9P54nqfmsnaNHJycm8cVfRlpYW1NTUOJN1pjrjk6iqqkJra6vzNZVKYWZmxp+oLq2jo8NpgQ7dx729PZSWlkKL6hARpwr9Q+aGp/m12Zubm6H9mhtacH5+HhsbG/4tdTJTZ9bQ0OD0LxgMOm7Y3t6GNv55R7XgMS3oH5cJ/y3Rq775V3X5bx8zSv8DuWzoa2vgb5tumbHGlerDAAAAAElFTkSuQmCC","view/settings2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAD2ElEQVRYR+1Xz08bRxT+ZjAGYQoH4rS9IBJBQJEsUC8VKNdQtamUE0fLayqhKHeOaGbFkT8gFVLZtXzk1qqKSs4NUg8RXCIQVoOQ2jRFHHCwBRj2VW+zttY/14BXVaPOyR7NfPN9771536xACEOEgImPDHRhYaHv/Pz8kEMVjUbjq6urxVZhayo/lUo9chzndTabfWMYxkMAGx7QrG3bL5LJ5B0p5f1MJvNz7QENQdPp9LdE9CMAZrcHYAaoxJ8AvARwD8AtAI9t2/7JD9wQdH5+/q7jOLzx04DqeCelnFlbW/s9EJQXGIbxq8eQ//4mhPieiJjlEwBf8qQQYtOyLFZRNeqYJpPJWCQSeUBEzz3JrwqFwvT6+vo575ybm4vGYrFNAF8AICnlbKlU2sxms4Uych2oYRh5AJ9UFggxb1mW5aeSTqfTRLTmm3tv2/bAVUCfWpb1zA9qGAaHwD/XGjQU+WVGHU0Ug4ZSUjXFnwMwXVP8nP1RAPG2i5/Z+q9pKpWaFUL8wvNE9FUmk9m48jWtLWavofztNZTb124oN2neH1mTvmoo/pcfHDGtdZ9nLbw4rrW+nvGZpvlISvl6aWnpjWmaD4nINT4hxKxS6sXy8vIdx3HuK6XaMz6ttWt8QohDInKNTwjhJtWzlJdCiHtEdEtK+VgpFWx8Wuu7RMQbWxofEb0TQsxordszPq11Q+MjoidCCNf4AGxqrYONb2VlJVYsFh84jvPck/yKW5/W2jU+rXWUwdj4OBQcYzbCxcXF5sanlMoLIaqMTylVZXymaVYZHxG9N02zufE1AH2qlKoyPqUUh6AyFwgaivzyVehoorxkdL6k/MUPIEdE0/7i5zcUGx8Rxdsufmbrv6ZKqSrjM01z48rXtLbFeA3FNT4At6/dUIJ7V/MV/6HOn0gkvgbwA4DPbyLZ2/sWwHcikUj82SHAMqe3DMrv+I6Ofw9USonJyUlXzfb2NhzHaamsKdPBwUGcnp7i7OwMAwMDGBsbc4H29vaQz+fR09OD3t5eHB8f1x3QEJQBR0dHcXFx4QL39/dXbTw5OXEBI5EIcrlcHXBDUGYxPj6O7u7uljJLpRJ2d3ddNf7RVD6DlhkWCgUcHrof0YjH44jFYu5vnt/Z2QmWz0lhsHIMi8Wiu/HDF6T7mMDExAT6+vjR8iHGHA5/8uqYTk1Noaurq3L6/v4+jo6OqtgMDQ1hZGSkMnd5eYmtra3K/0DQg4ODivTyLg7B8PBw+6ChyC8f39FEMWgoJRVK8TPbjl/T2mruWEO5SYMNo/P/xaDfeB712U3YeXv/ALDwD+TbY8Dbd9BBAAAAAElFTkSuQmCC","view/setting.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACAklEQVQ4T5XUS4iOcRTH8c9xCeVeiiiXhSJRJFIusRO2lEtZKFlgY6GxZDUrk2TFwii22JJLlERRLKRQJmXBkHIb8+hM/2d6ememed93957n93v+55zf9/mHll9VVTNxopTPR8T3piTyT1VVs7AL9zEd+4roOn5gK25HxLfacAjL8A8TWw6ta28jorc2LMLhIu7Ds2Jah4XlRVci4mNUVTUDadiLFF/G5GL4iyOYjxsYMnQ1BDfxujk0VmJPecFAO4bV2Nk05Bqzz3Za6ut86JJDx2vN4Hbj3hjBbcOt4eCaQZXUj5daT4pGoNFimI1zpdYVEf2jsTQX+5MX5NaOFdFFJHzJ2bWI+FJv6SRWYACTWliqa68ioqc2LMWpwtJ7PCymzVhSWOqOiHeZdPachqNIcXdBJV/2B6cLa5cwZLjQYOkqnuNsOeEM1uJgE43xDBsaH9QQfJ21VNBoHfpBaWHLiKGLoeO1ZnAHkpcxgkvOeoeDa0FjTnNLEfF1PJamYkcR3YmIX6OxNA35Kb7BFKwvoqf4jeV4GRE/azQ2Yh4GMaGFpbr2OSKe1Ibse1MRJ84fimkxMqc0Pc55MrjsOYvZRoofNW6/vPUSwEQ+2+tPQ14h9fX4Ap+aQ2MB1pQTB9sx5K24qmnorKWCRvtDF0PHa+0suBaW0ry91O5mus3n/wHmQwUTIH+tVgAAAABJRU5ErkJggg==","view/refresh.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACiElEQVQ4T4WVS4iPYRTGf4/7/X6XcivXcktEUhTKQkqyYCOKjWyUhezFThbIlJ3LYrIRkoWGUhhhTMko4zJujYRpxgxHj9737/P3zfh239c57/uc5/zO+UQ3T0QsBRYCtZI+5jBVx0fEcGA6MA+YCXQCVyXddWwlISL6ARuARcXvhQPrJF3/nRARvYHtwLRuFLYCFyW15ITl6XTHvwIuJzlrgHrgiqSOiqSI2ANMAL4BxyW1R8RYYKSkp8Vb8w2HgD7AE0kXSozoD0wC2nPCAWAw0CyppiRhBzAD6MgJW4D5KdDFNeSkiJgFbEvONeYE698N2K0ArPsDMAZwguN+AmeKfZgLbAb6llj7A7gk6eFfnY6I0cDKpNc1tQFNwG1JvvFPp0sKXQ2sAGokveuJpVHAHGBJ4ul76vLNapbs9dYk6R8oU7driyztA2Z3w5L1n5LUnBPWptMd/xw4l+RscsHAeeNSZMloTAG+AIcltUXERPdB0qMylk4klu5LOlni2ABgqm3Oko4BQ4Fnko6WJOxPzlXg2wV4hv2czuOYhmsBsDf1rD7fYP0HkyyzZN0twHjACZmlI0WWFgM7e2DprKQ71SyNA9YDBnFYcq0RuOZ5/h9LdsVS6yV97YmlgYDn2X3wjUa7QdKLapY8015ePrWMJVtembhewLI0YWU4eZvck/Q525pXo4M/AY+TLMP40u+SuooseVjsitm/IakzItz5QcXhKSZsBCyrpdjlwuZwfSO8mLOkdYAHqFXSrRKWvErtXFdOcJcnp0AX96ZwuldQ5uxtTrD+VUmWWXqfujwk8eQ4f68rsuRG+d/gZVb9eIk9kPS6miXvIv91rNc12TXPc5MkTyO/AFhJCujHqZlCAAAAAElFTkSuQmCC","comp/checkbox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABbUlEQVRIS+2TP0gCURzHv88GRYsrExyOo5cEQVEtWdQQpE4N0R+HxmirXXCrKYigqMF2IRqCQByaLJqNIFpyUIzu4rIwpExODy88ITD/cJ603Rsf7/OGz+/zI5TSEAE20cZRgBMySKni8XrbwICrWAwG2ESZIadFS53J0R25brCyHZNud1vbcRuPV7fDAOu9GXJatNSZHN2R6wb/PfJCrxOZCR8Gbk6hWc6Xg8PrcgBETMIVPdIGSjYG/NoOSHcfkLqDK3qsBSRIrgRAuBF1quUPEUPhYGMwb2dhywrqQ3F0Dt++jSokJMBdhmDO52pB2WwFP7OK8rgH9os99IgppNf3QWwMFP4RNHKALrmoflIj53l6CaWpRcBkgiIkYHl6gDTrh5JJg57v/kJ1YOUixw7jfWELxMpAKUmAXAR7tg3LZ7am3IbjKDBOvPiDqkUmcoj+9H1d7k3nmHdweBubB70ON9wRzQH8pVVQb+Q/zZAEfpwDCU4AAAAASUVORK5CYII=","comp/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAE6UlEQVRYR+3Y30+bVRgH8G/T0t/0Jy0USrIsC0E2GMKAVYcRpmSbEzIGZhqyxCxeceGVF3pjvJl/wYyJWZYY4hZBFnBuBBUW2ewYAxlsSMiyLKH8aEt/0vZtSxvM+562We15C6jlxr53zfO8z+ec5z2nOTmCk598tY19fAQs+Hlvz76QX1zpAwd+1NMNXzieU1QtFeKbvn4CXvqgC95wLKegRirC1e8GCPjh+53wMnRwedkG54aLG4yhSI/ycnPawHaKJ5M1MhGuXR8k4MX3OnjBx3NPcLX3DPfepSu3odfrYC4r5X7bVlbhcrnT4kdrjlA7xYLffj9EwJ6udnhCW9TEJ08XUgWTqE6n5XLdbk9G7MjhKmodrbwAfQPDBLxw7h1ecH3dDq/Xm1GYrZqceXIgGo0GJSXFvOCNmz8RsLv9NNyhKO+icTqc8Pl8acDLyWyr1Wo1DEYDbw2dXIz+4TsE7DzbBneQH2SruDZc8Pv9GSiLqVQq6Iv0WVe5TiHG4K1RAnaceguuYCTrCx63G4FAgAoqlUpodbqs7+sVEgyN/ELAs20t2Ajwgz6vF6FgMGtL5QoF1BoNL1qklODW6DgBT518gxcM+P1gQqFdLRqZXA6lSkVFWXDk198I2NZyAs7NMDXR7XRmYBKZjMuNMEzmljHQF46hUIrR8XsEbG228IJ+T/rGFkskkMoVHBgOBRGNRNI2vkpL/5YsODZhJeCbJ47D4WeoM4wyDLai5PsWiCUQJ2aXTN4pnswzqmS4e+8BAZstDbxg1qW3hyALTlinCPh6Uz1C0Rg2w/S/tz3UpaYWSgsgF4twf3IagvOXr297PR5YGuv+bd2s71sfzkCj1ULQe+3u9vraGlg0lw+LlZhMEIzUNu7vmYYFmz/9LJeTS9We+PIymaGl6wLizo2cokJDEawDNxLg+W7EHTkGjUWw/tBPwOMdnYg7nNQZep4/Q2B9jYspS0zQHjyUlrdTPJksNBrwYGiQgE3vtiNup4O2SSuOzk5y7z2ubYKyuBiaAwe5394XzxGw29Pi5iYLdeDCYgMmfxxOgKfPIG53UBNt049SBVNo4g864HRmxMz1x3hAIybv3CZg49ttiK/bqYneFRuCLldGYTY5OfPkQBR6PTRl6cfIVEtLivHw51ECNrS2Ir62zrtKfWtrCHo8acDLyWyrFVot1CYTbw2hqQRTY2MJsLk5K8hW8TkcCPp8GSiHqdVQG41ZtxUHTkwQ8NhrFsRXyUrke3wuF0L+TSooVxVCrc9+iBKWmvDodysB65saEFtZ5cX8Hi+YQDBrS2VKBVRa/jONqKwU05NTBKyrexWxlRUquOnfBBNidrVoZHIZClWF1DqisjLMzPxBwNraasRsdHDD6c7ApDIJVzTMRDJiRQb6EUNkLsPs7DwBa6qrELPZqCNzu/1pG1siEUOhkHK5wWAYkUg0La7T0U9tIrMZc/MLBKw+XImtZTrIMBFEouQkIBEXQJaYXXJ0O8WTeQXlZsw/XSRg1SsVvGDWpbuHIAsu/LlEwMrKCsQDAcQ93j2U2H2qUKuBUKnE4uISBF9f/Hj7wJwVhyordl/hH2Q+W1zCixoLOdNUj98Ei+byYbH5lnPkmJhL6O+18/c0/1m38/c0qVbm72nYVuTvadgu5O9pUtsif0+Tv6dhF8P/657mLz4NfQVdLmZiAAAAAElFTkSuQmCC","comp/textarea.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAXCAYAAABkrDOOAAAA4klEQVRoQ+3ZvQrCMBiF4e9rU+sPOErRqxDRe/KG9Fp0EAc3VzuIg1ML4uDmlkaaquDenMUTyJoDD+8W3ZyKlaoshSeogHOy1m1euOmoI1EU+auqQUf/8XHnnBzLp3jsWdaVJEnEGEPsADXU2Ifro8Gej/uSpqnHruvmaVegqirZX+4N9mIy8Nh13XEct7vE18RaK7vzjdiIFoiNUH5vEJvYQAHgFMsmNlAAOMWyiQ0UAE6xbGIDBYBTLJvYQAHgFMsmNlAAOMWyiQ0UAE79lM2fmrDy358a/q6Hhf68ng175QueKdEXxUGVVwAAAABJRU5ErkJggg==","view/re.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACpklEQVRIS+WWPUgcQRiG3+8O70QEUwTB1EJgsTGdRRrhOMjOtEtSRbBIBMFKuCtkZleES2uRQoWQJggKKW7Of7GyTRvBLkVShhS73OXMfWGOU85Es7uXs0m2XeZh+OZ95xnCHX10R1ykBvu+P5fP59+VSqVvf9pUarBS6jWAR0Q0rbWOboP3BCaiOQAHAKTW+vtN8L8BW96W4zjPPM/78Ss8FlypVEYajYbHzALAJIAHALJdoDWl1Esi4m74rWBmpiAI5pk5AHAvJj0VrXU5Fmyhvu+/AfA8YRxfaa1LsWDf92eZeSMJlJnXtdYvEo1Ca30G4GEH/ImI1lqt1nE+nz9vNBrLnVTY39uO4zxNdHgrKytjzWbzs13FzKfDw8PFxcXF8HL3Nscd8BEAN3HcgiCYbLVaHyyIiGaUUm+7R9JzQZRSo0T0BUCGmRd831/tBttK53K5zXK5/DV1pZVSG0Q0C2BXa/0kySEmKojWeoiZD4hoKpvNTiwtLX1MC7+1IFrrQWZeJaJxx3EKN5186lF0LwiC4DEz31dKvU+z69i7Ig0stnm9wv4zsDGm7bxCodBf5xlj2s5j5mkpZf+c1wHPEdFBGIbS87z+OO8S3EnAVhRFvTnv8PBwpF6ve0QkiGiSmX9znuu66ZxXq9XmAcQ6j5krUspkzqvVaqmcJ4SId54xxl6ZiZwHYN113WTOq1arZ0R05TwAa5lM5rher5/ncrllAPYl1HZeFEXJnLe3tzd2cXHRdh6A04GBgWKxWLxyXlcqjqIochPHbWdn58p5AGaEENec13NB9vf3R5vNZtt5RLTguu4159lKA9gUQqR3njHGHpx9tOxKKfvnvGq1OmQrC2AKwIQQon/OOzk5GQzD0I5hPIqi/jvPGNN2npTyH3feTzoJOzgswwlqAAAAAElFTkSuQmCC","view/search.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAqCAYAAABcOxDuAAABX0lEQVRIS+3VsUrEQBAG4H9HiDZiJQg+gJVaiKAoWClYXWeZ7D6CtbWFr5Ai2ayQxkLQRgsLGwtBUQsRC6sDCxHxEIvIZSRwxRGSu83pNUe23c0H+89kR2AISwzBxAiinuctCSH2AawD+AFwRkR7QRC85CO0ur5SaoOZzwGM54A3IlrJw1aolPIewEJJUY+01jvde31RKeUMgNceXdLSWk9VQl3XnSWiZhnKzF9RFE1WQrPDUsonAHNFsBDiJAzDRmXUdd1tIjoFMJaDW0KI1TAMH61RpdQ0Mx8z8zMzHxLRAYBlAG0Al2ma7hpjHqxbqgNeAJgHcKW1XutEMeE4Ttv3/axXC1dh9XPgbZqmW8aYd9t3ohCVUt4BWARwkyTJZhzHH7Zgdq4MvQbw7ThOw/f9zypgKVoVsS7UX+C+v+kgeI0Oklrvb0Yw03rwlZW8Hnz14OvqjXrw1e/pPyfwCww91CttlMG7AAAAAElFTkSuQmCC","view/save.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAA1klEQVRIS+2VzQ3DIAyFwxwdoMMAA/VQ8ZByyEBhmA7QOVxxKLIaOcIoSZUfrlifHw/wM91Ky6zE7SZgANTaDEDhzYJ5odSMC7nA5U7+b4X2dVQr3ic4hHCTlMcY33xPZUUGcwBvdEJwjcfGGIQQ4rd2qenWA3hyAUuABwCP31NtN+i1v02qP4DicRybM885J2ceB/NCyUupfuLxBS4WbmKF9rNUv4p9gq21d0l5SunF91RWZDAH8EYnBNd4nDPPWitnXst0I6Leez+feVowEQ3e+wNk3ge7C/Qp3GfwkgAAAABJRU5ErkJggg=="}},"base64",function(){return this.base64=new Y(t.dataO)}]),t}(),Z=(function(){function t(){this.tShowObj=null,this.preValueO={},this.div=null,this.debug_view=null,this.height=300,this.clickedHandler=null,this.fromMe=!1,this._treeDataList=null,this._init()}o(t,"laya.debug.DebugPanel");var e=t.prototype;e.removeNoDisplayKeys=function(e){var i=0;for(i=e.length-1;i>=0;i--)t.noDisplayKeys[e[i]]&&e.splice(i,1)},e.updateShowKeys=function(){t.tObjKeys.length=0,this.tShowObj&&(t.tObjKeys=Q.getObjectDisplayAbleKeys(this.tShowObj,t.tObjKeys),this.tShowObj==i.stage&&this.removeNoDisplayKeys(t.tObjKeys),t.tObjKeys.sort(C.sortSmallFirst))},e._init=function(){var e=this;this.div=s.document.createElement("div"),s.document.body.appendChild(this.div),this.clickedHandler=new _(this,this.onClickSelected),this.debug_view=s.window.layaair_debug_view,this.debug_view.initLayaAirDebugView(this.div),this.debug_view.tree.attachEvent("onSelect",function(t){var i;(i=e.getDataByID(t,e._treeDataList[0])).target&&(Z.showDisBound(i.target),e.showTargetInfo(i.target))}),this.debug_view.setValueChangeHandler(function(t,i){e.onValueChange(t,i)}),this.debug_view.onRefresh(function(){t.I.setRoot(i.stage)}),this.debug_view.onInspectElement(function(){$.I.beginClickSelect(e.clickedHandler)}),this.debug_view.onLogInfo(function(){console.log(e.tShowObj)}),this.debug_view.onPrintEnabledNodeChain(function(){Z.traceDisMouseEnable(e.tShowObj)}),this.debug_view.onPrintSizeChain(function(){Z.traceDisSizeChain(e.tShowObj)}),this.debug_view.onToggleVisibility(function(t){e.tShowObj&&(e.tShowObj.visible=e.debug_view.getVisibility())}),this.debug_view.onToggleDebugBorder(function(t){e.tShowObj&&dt.showDisplayBorder(e.tShowObj,e.debug_view.getShowDebugBorder())}),this.debug_view.onToggleShowCurrentCache(function(t){J.showRecacheSprite=e.debug_view.getShowCurrentCache()}),this.debug_view.onToggleShowAllCache(function(t){J.showCacheSprite=e.debug_view.getShowAllCache()}),this.debug_view.onToggleShowAtlas(function(t){console.log("toggle show atlas:",e.debug_view.getShowAtlas()),e.debug_view.getShowAtlas()?H.getInstance().start():H.getInstance().end()}),_t.showToBody(this.div,0,0),i.stage.on("resize",this,this.adptPos),this.adptPos()},e.onClickSelected=function(t){this._treeDataList&&(this.debug_view.tree.selectItem(gt.getObjID(t)),this.debug_view.bounceUpInspectButton())},e.updateLoop=function(){this.tShowObj&&this.showTargetInfo(this.tShowObj)},e.onSelectItem=function(t){var e;e=t.target,this.showTargetInfo(e)},e.onValueChange=function(e,i){if("number"==e.type&&(i=t.mParseFloat(i)),"boolean"==e.type&&(i="true"==i.toString()),this.tShowObj){var n;n=e.key,this.preValueO[n]=this.tShowObj[n]=i}},e.showTargetInfo=function(e){if(e){this.debug_view.setVisibility(e.visible),this.debug_view.setShowDebugBorder(dt.isDisplayShowBorder(e));var i=0,n=0;n=t.tObjKeys.length;var o;if(this.tShowObj==e)for(i=0;i<n;i++)o=t.tObjKeys[i],this.preValueO[o]!=e[o]&&this.debug_view.changeValueByLabel(o,e[o]);else{this.tShowObj=e,this.updateShowKeys();var r;r=t.getObjectData(e),this.debug_view.setContents(r)}for(i=0;i<n;i++)o=t.tObjKeys[i],this.preValueO[o]=e[o]}},e.adptPos=function(){this.fromMe||(this.fromMe=!0,_t.setPos(this.div,0,s.clientHeight-this.height),this.debug_view.resize(s.clientWidth,this.height),t.overlay||i.stage.setScreenSize(s.clientWidth*s.pixelRatio,(s.clientHeight-this.height)*s.pixelRatio),this.fromMe=!1)},e.setRoot=function(e){var n;n=t.getSpriteTreeArr(e),this._treeDataList=[n];var o;(o={}).id=0,o.item=[n],this.debug_view.setTree(o),i.timer.loop(500,this,this.updateLoop)},e.getDataByID=function(t,e){if(!e)return null;if(t==e.id)return e;var i;if(!(i=e.item))return null;var n=0,o=0;o=i.length;var r;for(n=0;n<o;n++)if(r=this.getDataByID(t,i[n]))return r;return null},e.getDataByTarget=function(t,e){if(!e)return null;if(t==e.target)return e;var i;if(!(i=e.item))return null;var n=0,o=0;o=i.length;var r;for(n=0;n<o;n++)if(r=this.getDataByTarget(t,i[n]))return r;return null},t.init=function(e,n){void 0===e&&(e=!0),void 0===n&&(n="#ffffff"),t.I||(t.overlay=!e,X.init(),Z.initBasicFunctions(),ut.init(),dt.init(),(t.I=new t).setRoot(i.stage),J.showRecacheSprite=!1,n&&(t.I.div.style.background=n))},t.getSpriteTreeArr=function(e){var i;(i={}).text=""+Q.getNodeClassAndName(e),i.target=e,gt.idObj(e),i.id=gt.getObjID(e);var n,o=0,r=0;r=(n=e._childs).length;var a;for(a=[],i.item=a,o=0;o<r;o++)a.push(t.getSpriteTreeArr(n[o]));return i},t.getObjectData=function(e){var i,n,o,r,a;i=[];var s,l=0,h=0;for(h=(s=t.tObjKeys).length,l=0;l<h;l++)a=typeof(r=e[o=s[l]]),"_"!=o.charAt(0)&&t.displayTypes[a]&&((n={}).key=o,n.value=r,n.type=a,i.push(n));return i},t.mParseFloat=function(t){var e=NaN;return e=parseFloat(t),isNaN(e)?0:e},t.I=null,t.overlay=!1,t.ChildrenSign="item",t.LabelSign="text",t.tObjKeys=[],n(t,["displayTypes",function(){return this.displayTypes={boolean:!0,number:!0,string:!0}},"displayKeys",function(){return this.displayKeys=[["x","number"],["y","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"]]},"noDisplayKeys",function(){return this.noDisplayKeys={desginWidth:!0,desginHeight:!0}}])}(),function(){function t(){}return o(t,"laya.debug.DebugTool"),r(1,t,"target",function(){return t._target},function(e){t._target=e}),r(1,t,"isThisShow",function(){return!1}),r(1,t,"showStatu",null,function(e){e?A.show():(A.hide(),t.clearDebugLayer())}),r(1,t,"showBound",function(){return t._showBound},function(e){(t._showBound=e)||t.clearDebugLayer()}),t.getMenuShowEvent=function(){return s.onMobile?"doubleclick":"rightclick"},t.init=function(e,i,n,o,r){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!1),(t.enableCacheAnalyse=e)&&ut.init(),o&&dt.init(),(t.enableNodeCreateAnalyse=n)&&ht.I.hookClass(x),i&&Ot.init(),J.showCacheSprite=r,Xt.init(),t.initBasicFunctions()},t.initBasicFunctions=function(){st.initMe(),t.debugLayer||(Zt.init(),(t.debugLayer=Zt.I.graphicLayer).mouseEnabled=!1,t.debugLayer.mouseThrough=!0,t.showStatu=!0,i.stage.on("keydown",null,t.keyHandler),t.cmdToTypeO[1]="IMAGE",t.cmdToTypeO[2]="ALPHA",t.cmdToTypeO[4]="TRANSFORM",t.cmdToTypeO[16]="CANVAS",t.cmdToTypeO[512]="GRAPHICS",t.cmdToTypeO[1024]="CUSTOM",t.cmdToTypeO[2048]="CHILDS",it.export())},t.dTrace=function(e){null!=t._traceFun&&t._traceFun(e),console.log(e)},t.keyHandler=function(e){var i;if(i=String.fromCharCode(e.keyCode),e.altKey){switch(e.keyCode){case 38:t.showParent();break;case 40:t.showChild();break;case 37:t.showBrother(t.target,1);break;case 39:t.showBrother(t.target,-1)}t.dealCMDKey(i)}},t.dealCMDKey=function(e){switch(e){case"上":t.showParent();break;case"下":t.showChild();break;case"左":t.showBrother(t.target,1);break;case"右":t.showBrother(t.target,-1);break;case"B":t.showAllBrother();break;case"C":t.showAllChild();break;case"E":t.traceDisMouseEnable();break;case"S":t.traceDisSizeChain();break;case"D":at.downDis(t.target);break;case"U":at.upDis(t.target);break;case"N":t.getNodeInfo();break;case"M":t.showAllUnderMosue();break;case"I":break;case"O":ce.I.show();break;case"L":rt.I.switchType();break;case"Q":t.showNodeInfo();break;case"F":t.showToolPanel();break;case"P":t.showToolFilter();break;case"V":t.selectNodeUnderMouse();break;case"A":le.I.target&&vt.analyseNode(le.I.target);break;case"K":Ut.traceStage();break;case"T":t.switchNodeTree();break;case"R":fe.I.show();break;case"X":Ye.I.fresh();break;case"mCMD":t.traceCMD();break;case"allCMD":t.traceCMDR()}},t.switchNodeTree=function(){zt.I.switchShow("Tree")},t.analyseMouseHit=function(){t.target&&vt.analyseNode(t.target)},t.selectNodeUnderMouse=function(){st.instance.selectDisUnderMouse(),t.showDisBound()},t.showToolPanel=function(){zt.I.switchShow("Find")},t.showToolFilter=function(){zt.I.switchShow("Filter")},t.showNodeInfo=function(){Xt.I.isWorkState?Xt.I.recoverNodes():Xt.I.showDisInfo(t.target)},t.switchDisController=function(){rt.I.target?rt.I.target=null:t.target&&(rt.I.target=t.target)},t.showParent=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;t.target=e.parent,t.autoWork()},t.showChild=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;e.numChildren>0&&(t.target=e.getChildAt(0),t.autoWork())},t.showAllChild=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;t.selectedNodes=at.getAllChild(e),t.showSelected()},t.showAllUnderMosue=function(){t.selectedNodes=at.getObjectsUnderGlobalPoint(i.stage),t.showSelected()},t.showParentChain=function(e){if(e){t.selectedNodes=[];var i;for(i=e.parent;i;)t.selectedNodes.push(i),i=i.parent;t.showSelected()}},t.showAllBrother=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;e.parent&&(t.selectedNodes=at.getAllChild(e.parent),t.showSelected())},t.showBrother=function(e,i){if(void 0===i&&(i=1),e||(e=t.target),!e)return console.log("no targetAvalible"),null;var n;if(n=e.parent){var o=0;o=n.getChildIndex(e),(o+=i)<0&&(o+=n.numChildren),o>=n.numChildren&&(o-=n.numChildren),t.target=n.getChildAt(o),t.autoWork()}},t.clearDebugLayer=function(){t.debugLayer.graphics&&t.debugLayer.graphics.clear()},t.showSelected=function(){if(t.autoShowSelected&&t.selectedNodes&&!(t.selectedNodes.length<1)){console.log("selected:",t.selectedNodes);var e=0,i=0;for(i=t.selectedNodes.length,t.clearDebugLayer(),e=0;e<i;e++)t.showDisBound(t.selectedNodes[e],!1)}},t.getClassCreateInfo=function(t){return Mt.getRunInfo(t)},t.autoWork=function(){t.isThisShow&&(t.showBound&&t.showDisBound(),t.autoTraceSpriteInfo&&t.target&&Dt.traceSpriteInfo(t.target,t.autoTraceBounds,t.autoTraceSize,t.autoTraceTree),t.target&&(t.autoTraceCMD&&t.traceCMD(),t.autoTraceCMDR&&t.traceCMDR(),t.autoTraceEnable&&t.traceDisMouseEnable(t.target)))},t.traceDisMouseEnable=function(e){if(console.log("----------------traceDisMouseEnable--------------------"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;var i;for(i=[],t.selectedNodes=[];e;)i.push(Q.getNodeClassAndName(e)+": mouseEnabled:"+e.mouseEnabled+" hitFirst:"+e.hitTestPrior),t.selectedNodes.push(e),e=e.parent;return console.log(i.join("\n")),t.showSelected(),i.join("\n")},t.traceDisSizeChain=function(e){if(console.log("---------------------traceDisSizeChain-------------------"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;t.selectedNodes=[];var i;for(i=[];e;)i.push(Q.getNodeClassAndName(e)+": x:"+e.x+" y:"+e.y+" w:"+e.width+" h:"+e.height+" scaleX:"+e.scaleX+" scaleY:"+e.scaleY),t.selectedNodes.push(e),e=e.parent;return console.log(i.join("\n")),t.showSelected(),i.join("\n")},t.showDisBound=function(e,i,n){if(void 0===i&&(i=!0),void 0===n&&(n="#ff0000"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;i&&t.clearDebugLayer();var o;!(o=e._getBoundPointsM(!0))||o.length<1||(o=f.pListToPointList(o,!0),Pt.walkArr(o,e.localToGlobal,e),o=f.pointListToPlist(o),t._disBoundRec=L._getWrapRec(o,t._disBoundRec),t.debugLayer.graphics.drawRect(t._disBoundRec.x,t._disBoundRec.y,t._disBoundRec.width,t._disBoundRec.height,null,n),Zt.I.setTop())},t.showDisBoundToSprite=function(e,i,n,o){void 0===n&&(n="#ff0000"),void 0===o&&(o=1);var r;!(r=e._getBoundPointsM(!0))||r.length<1||(r=f.pListToPointList(r,!0),Pt.walkArr(r,e.localToGlobal,e),r=f.pointListToPlist(r),t._disBoundRec=L._getWrapRec(r,t._disBoundRec),i.graphics.drawRect(t._disBoundRec.x,t._disBoundRec.y,t._disBoundRec.width,t._disBoundRec.height,null,n,o))},t.getNodeInfo=function(){return t.counter.reset(),Pt.walkTarget(i.stage,t.addNodeInfo),console.log("node info:"),t.counter.traceSelf(),t.counter.data},t.findByClass=function(e){return t._classList=[],t._tFindClass=e,Pt.walkTarget(i.stage,t.addClassNode),t.selectedNodes=t._classList,t.showSelected(),t._classList},t.addClassNode=function(e){e.constructor.name==t._tFindClass&&t._classList.push(e)},t.traceCMD=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;console.log("self CMDs:"),console.log(e.graphics.cmds);var i;for(i=R.renders[e._renderType],console.log("renderSprite:",i),t._rSpList.length=0;i&&i._sign>0;)t._rSpList.push(t.cmdToTypeO[i._sign]),i=i._next;return console.log("fun:",t._rSpList.join(",")),t.counter.reset(),t.addCMDs(e.graphics.cmds),t.counter.traceSelf(),t.counter.data},t.addCMDs=function(e){Pt.walkArr(e,t.addCMD)},t.addCMD=function(e){t.counter.add(e.callee)},t.traceCMDR=function(e){return e||(e=t.target),e?(t.counter.reset(),Pt.walkTarget(e,t.getCMdCount),console.log("cmds include children"),t.counter.traceSelf(),t.counter.data):(console.log("no targetAvalible"),0)},t.getCMdCount=function(e){if(!e)return 0;if(!(e instanceof laya.display.Sprite))return 0;if(!e.graphics.cmds)return 0;t.addCMDs(e.graphics.cmds);return e.graphics.cmds.length},t.addNodeInfo=function(e){var i;i=e.constructor.name,t.counter.add(i)},t.find=function(e,n){void 0===n&&(n=!0);var o;return o=t.findTarget(i.stage,e),(t.selectedNodes=o)&&(t.target=t.selectedNodes[0]),n&&t.showSelected(),o},t.findByName=function(e){return t.nameFilter.name=e,t.find(t.nameFilter)},t.findNameStartWith=function(e){return t.nameFilter.name=t.getStartWithFun(e),t.find(t.nameFilter)},t.findNameHas=function(e,i){return void 0===i&&(i=!0),t.nameFilter.name=t.getHasFun(e),t.find(t.nameFilter,i)},t.getStartWithFun=function(t){return function(e){return!!e&&0==e.indexOf(t)}},t.getHasFun=function(t){return function(e){return!!e&&e.indexOf(t)>=0}},t.findTarget=function(e,i){var n=[];t.isFit(e,i)&&n.push(e);var o,r=0,a=0;for(a=e.numChildren,r=0;r<a;r++)(o=e.getChildAt(r))instanceof laya.display.Sprite&&(n=n.concat(t.findTarget(o,i)));return n},t.findClassHas=function(e,i){var n=[];Q.getClassName(e).indexOf(i)>=0&&n.push(e);var o,r=0,a=0;for(a=e.numChildren,r=0;r<a;r++)(o=e.getChildAt(r))instanceof laya.display.Sprite&&(n=n.concat(t.findClassHas(o,i)));return n},t.isFit=function(t,e){if(!t)return!1;if(!e)return!0;if("function"==typeof e)return e(t);var i;for(i in e)if("function"==typeof e[i]){if(!e[i](t[i]))return!1}else if(t[i]!=e[i])return!1;return!0},t.log=function(e){var i,n=arguments;i=lt.getArgArr(n),null!=t._logFun&&t._logFun(i.join(" "))},t.enableCacheAnalyse=!1,t.enableNodeCreateAnalyse=!0,t._traceFun=null,t.debugLayer=null,t._target=null,t.selectedNodes=[],t.autoShowSelected=!0,t._showBound=!0,t._disBoundRec=null,t.autoTraceEnable=!1,t.autoTraceBounds=!1,t.autoTraceSize=!1,t.autoTraceTree=!0,t.autoTraceCMD=!0,t.autoTraceCMDR=!1,t.autoTraceSpriteInfo=!0,t._classList=null,t._tFindClass=null,t._rSpList=[],t._logFun=null,n(t,["text",function(){return this.text=new A},"cmdToTypeO",function(){return this.cmdToTypeO={}},"counter",function(){return this.counter=new tt},"nameFilter",function(){return this.nameFilter={name:"name"}}]),t}()),X=function(){function t(){}return o(t,"laya.debug.divui.DivScripts"),t.init=function(){var e;e=j.decodeToByte(t.data).readUTFBytes(),i._runScript(e)},t.data="ZnVuY3Rpb24gZGh0bWx4RXZlbnQoZSx0LGkpe2UuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIodCxpLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrdCxpKX1mdW5jdGlvbiBkaHRtbFhUcmVlT2JqZWN0KGUsdCxpLG4pe2lmKGRodG1seEV2ZW50LmluaXRUb3VjaCYmZGh0bWx4RXZlbnQuaW5pdFRvdWNoKCksX2lzSUUpdHJ5e2RvY3VtZW50LmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsITEsITApfWNhdGNoKG8pe30ib2JqZWN0IiE9dHlwZW9mIGU/dGhpcy5wYXJlbnRPYmplY3Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk6dGhpcy5wYXJlbnRPYmplY3Q9ZSx0aGlzLnBhcmVudE9iamVjdC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIix0aGlzLl9pdGltX2RnPSEwLHRoaXMuZGxtdHI9IiwiLHRoaXMuZHJvcExvd2VyPSExLHRoaXMuZW5hYmxlSUVJbWFnZUZpeCghMCksdGhpcy54bWxzdGF0ZT0wLHRoaXMubXl0eXBlPSJ0cmVlIix0aGlzLnNtY2hlY2s9ITAsdGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWksdGhpcy5yb290SWQ9bix0aGlzLmNoaWxkQ2FsYz1udWxsLHRoaXMuZGVmX2ltZ194PSIxOHB4Iix0aGlzLmRlZl9pbWdfeT0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeD0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeT0iMjRweCIsdGhpcy5fZHJhZ2dlZD1uZXcgQXJyYXksdGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5LHRoaXMuc3R5bGVfcG9pbnRlcj0icG9pbnRlciIsdGhpcy5fYWltZ3M9ITAsdGhpcy5odG1sY0E9IiBbIix0aGlzLmh0bWxjQj0iXSIsdGhpcy5sV2luPXdpbmRvdyx0aGlzLmNNZW51PTAsdGhpcy5tbGl0ZW1zPTAsdGhpcy5pY29uVVJMPSIiLHRoaXMuZGFkbW9kZT0wLHRoaXMuc2xvd1BhcnNlPSExLHRoaXMuYXV0b1Njcm9sbD0hMCx0aGlzLmhmTW9kZT0wLHRoaXMubm9kZUN1dD1uZXcgQXJyYXksdGhpcy5YTUxzb3VyY2U9MCx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTAsdGhpcy5faWRwdWxsPXt9LHRoaXMuX3B1bGxTaXplPTAsdGhpcy50cmVlTGluZXNPbj0hMCx0aGlzLnRzY2hlY2s9ITEsdGhpcy50aW1nZW49ITAsdGhpcy5kcGNweT0hMSx0aGlzLl9sZF9pZD1udWxsLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzPXt9LHRoaXMuX29pZV9vblhMRT1bXSx0aGlzLmltUGF0aD13aW5kb3cuZGh4X2dsb2JhbEltZ1BhdGh8fCIiLHRoaXMuY2hlY2tBcnJheT1uZXcgQXJyYXkoImljb25VbmNoZWNrQWxsLmdpZiIsImljb25DaGVja0FsbC5naWYiLCJpY29uQ2hlY2tHcmF5LmdpZiIsImljb25VbmNoZWNrRGlzLmdpZiIsImljb25DaGVja0Rpcy5naWYiLCJpY29uQ2hlY2tEaXMuZ2lmIiksdGhpcy5yYWRpb0FycmF5PW5ldyBBcnJheSgicmFkaW9fb2ZmLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29mZi5naWYiLCJyYWRpb19vbi5naWYiLCJyYWRpb19vbi5naWYiKSx0aGlzLmxpbmVBcnJheT1uZXcgQXJyYXkoImxpbmUyLmdpZiIsImxpbmUzLmdpZiIsImxpbmU0LmdpZiIsYmxhbmtfYmFzZTY0LGJsYW5rX2Jhc2U2NCwibGluZTEuZ2lmIiksdGhpcy5taW51c0FycmF5PW5ldyBBcnJheSgibWludXMyLmdpZiIsIm1pbnVzMy5naWYiLCJtaW51czQuZ2lmIiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBWUFKRUNBTEd2clo2ZG5mVDA5QUFBQUNINUJBRUFBQUlBTEFBQUFBQVNBQmdBQUFJY2xJK3B5KzBQbzV5MFdoc0NEV0IzbUdYZnd3SG1oYWJxeXJaVEFRQTciLCJtaW51czUuZ2lmIiksdGhpcy5wbHVzQXJyYXk9bmV3IEFycmF5KCJwbHVzMi5naWYiLCJwbHVzMy5naWYiLCJwbHVzNC5naWYiLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FZQUpFQ0FLR2duN0d2cmZUMDlBQUFBQ0g1QkFFQUFBSUFMQUFBQUFBU0FCZ0FBQUljbEkrcHkrMFBvNXkwVW5CRHlIc0NMUUZmT0U2ZGhhYnF5clpKQVFBNyIsInBsdXM1LmdpZiIpLHRoaXMuaW1hZ2VBcnJheT1uZXcgQXJyYXkoImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEVnQVNBS0VDQUplWGw3R3ZyZi8vLy8vLy95SDVCQUVLQUFJQUxBQUFBQUFTQUJJQUFBSXpsSStwQXUyOURBaTAxamlUWFJuTm0zVEhCNDVCYUoyZXVsQm94TENTL0s2d09OODBYcHQ2citCOUhrU2FJSVdFS1EwRkFEcz0iLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FTQUtFQ0FKZVhsN0d2cmYvLy8vLy8veUg1QkFFS0FBSUFMQUFBQUFBU0FCSUFBQUl6bEkrcHl3Y1BtM21oV2drQ3NqQk92VmtpbUVsRzlabENCbFhkKzJYampMS2c1R3FvZVpYcXZzT1FYSy9palVaVEtWVUZBRHM9IiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBU0FLRUNBSmVYbDdHdnJmLy8vLy8vL3lINUJBRUtBQUlBTEFBQUFBQVNBQklBQUFJd2xJK3B5d2NQbTNtaFdna0NzakJPdlZraW1FbEc5WmxDdVlJWTZUWXMrNmJtSERPNGlnZmREM0dOaGhlVjBWUUFBRHM9IiksdGhpcy5jdXRJbWc9bmV3IEFycmF5KDAsMCwwKSx0aGlzLmN1dEltYWdlPSJidXRfY3V0LmdpZiIsZGh4NC5fZXZlbnRhYmxlKHRoaXMpLHRoaXMuaHRtbE5vZGU9bmV3IGRodG1sWFRyZWVJdGVtT2JqZWN0KHRoaXMucm9vdElkLCIiLDAsdGhpcyksdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWU9ImhpZGRlblJvdyIsdGhpcy5hbGxUcmVlPXRoaXMuX2NyZWF0ZVNlbGYoKSx0aGlzLmFsbFRyZWUuYXBwZW5kQ2hpbGQodGhpcy5odG1sTm9kZS5odG1sTm9kZSksZGh0bWx4LiRjdXN0b21TY3JvbGwmJmRodG1seC5DdXN0b21TY3JvbGwuZW5hYmxlKHRoaXMpLF9pc0ZGJiYodGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0ud2lkdGg9IjEwMCUiLHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iKTt2YXIgcj10aGlzO2lmKHRoaXMuYWxsVHJlZS5vbnNlbGVjdHN0YXJ0PW5ldyBGdW5jdGlvbigicmV0dXJuIGZhbHNlOyIpLF9pc01hY09TJiYodGhpcy5hbGxUcmVlLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCwhMCl9KSx0aGlzLmFsbFRyZWUub25tb3VzZWRvd249ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCl9LHRoaXMuWE1MTG9hZGVyPXRoaXMuX3BhcnNlWE1MVHJlZSxfaXNJRSYmdGhpcy5wcmV2ZW50SUVDYXNoaW5nKCEwKSx0aGlzLnNlbGVjdGlvbkJhcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKSx0aGlzLnNlbGVjdGlvbkJhci5jbGFzc05hbWU9InNlbGVjdGlvbkJhciIsdGhpcy5zZWxlY3Rpb25CYXIuaW5uZXJIVE1MPSImbmJzcDsiLHRoaXMuc2VsZWN0aW9uQmFyLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMuYWxsVHJlZS5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdGlvbkJhciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319LCExKSx3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319KSx0aGlzLnNldEltYWdlc1BhdGg9dGhpcy5zZXRJbWFnZVBhdGgsdGhpcy5zZXRJY29uc1BhdGg9dGhpcy5zZXRJY29uUGF0aCx0aGlzLnNldFNraW4oIm1hdGVyaWFsIiksZGh0bWx4LmltYWdlX3BhdGgpe3ZhciBsPWRodG1seC5pbWFnZV9wYXRoLHM9dGhpcy5wYXJlbnRPYmplY3QuY2xhc3NOYW1lLm1hdGNoKC9kaHh0cmVlX2RoeF8oW2Etel9dKikvaSk7bnVsbCE9cyYmbnVsbCE9c1sxXSYmKGwrPSJkaHh0cmVlXyIrc1sxXSsiLyIpLHRoaXMuc2V0SW1hZ2VQYXRoKGwpfXJldHVybiB0aGlzfWZ1bmN0aW9uIGNPYmplY3QoKXtyZXR1cm4gdGhpc31mdW5jdGlvbiBkaHRtbFhUcmVlSXRlbU9iamVjdChlLHQsaSxuLG8scil7cmV0dXJuIHRoaXMuaHRtbE5vZGU9IiIsdGhpcy5hY29sb3I9IiIsdGhpcy5zY29sb3I9IiIsdGhpcy50cj0wLHRoaXMuY2hpbGRzQ291bnQ9MCx0aGlzLnRlbXBET01NPTAsdGhpcy50ZW1wRE9NVT0wLHRoaXMuZHJhZ1NwYW49MCx0aGlzLmRyYWdNb3ZlPTAsdGhpcy5zcGFuPTAsdGhpcy5jbG9zZWJsZT0xLHRoaXMuY2hpbGROb2Rlcz1uZXcgQXJyYXksdGhpcy51c2VyRGF0YT1uZXcgY09iamVjdCx0aGlzLmNoZWNrc3RhdGU9MCx0aGlzLnRyZWVOb2Q9bix0aGlzLmxhYmVsPXQsdGhpcy5wYXJlbnRPYmplY3Q9aSx0aGlzLmFjdGlvbkhhbmRsZXI9byx0aGlzLmltYWdlcz1uZXcgQXJyYXkobi5pbWFnZUFycmF5WzBdLG4uaW1hZ2VBcnJheVsxXSxuLmltYWdlQXJyYXlbMl0pLHRoaXMuaWQ9bi5fZ2xvYmFsSWRTdG9yYWdlQWRkKGUsdGhpcyksdGhpcy50cmVlTm9kLmNoZWNrQm94T2ZmP3RoaXMuaHRtbE5vZGU9dGhpcy50cmVlTm9kLl9jcmVhdGVJdGVtKDEsdGhpcyxyKTp0aGlzLmh0bWxOb2RlPXRoaXMudHJlZU5vZC5fY3JlYXRlSXRlbSgwLHRoaXMsciksdGhpcy5odG1sTm9kZS5vYmpCZWxvbmc9dGhpcyx0aGlzfWZ1bmN0aW9uIGpzb25Qb2ludGVyKGUsdCl7dGhpcy5kPWUsdGhpcy5kcD10fWZ1bmN0aW9uIGRoeF9pbml0X3RyZWVzKCl7Zm9yKHZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKSx0PTA7dDxlLmxlbmd0aDt0KyspImRodG1seFRyZWUiPT1lW3RdLmNsYXNzTmFtZSYmZGh0bWxYVHJlZUZyb21IVE1MKGVbdF0pfXZhciBibGFua19iYXNlNjQ9ImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEVnQVNBSUFBQVAvLy8vLy8veUg1QkFVVUFBRUFMQUFBQUFBU0FCSUFBQUlQakkrcHkrMFBvNXkwMm91ejNwd1hBRHM9IjsidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHgmJih3aW5kb3cuZGh4PXdpbmRvdy5kaHg0PXt2ZXJzaW9uOiI1LjAiLHNraW46bnVsbCxsYXN0SWQ6MSxuZXdJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RJZCsrfSx6aW06e2RhdGE6e30sc3RlcDo1LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIDEwMH0sbGFzdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZmlyc3QoKTtmb3IodmFyIHQgaW4gdGhpcy5kYXRhKWU9TWF0aC5tYXgoZSx0aGlzLmRhdGFbdF0pO3JldHVybiBlfSxyZXNlcnZlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGFbZV09dGhpcy5sYXN0KCkrdGhpcy5zdGVwLHRoaXMuZGF0YVtlXX0sY2xlYXI6ZnVuY3Rpb24oZSl7bnVsbCE9dGhpcy5kYXRhW2VdJiYodGhpcy5kYXRhW2VdPW51bGwsZGVsZXRlIHRoaXMuZGF0YVtlXSl9fSxzMmI6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiYoZT1lLnRvTG93ZXJDYXNlKCkpLDE9PWV8fDE9PWV8fCJ0cnVlIj09ZXx8IjEiPT1lfHwieWVzIj09ZXx8InkiPT1lfHwib24iPT1lfSxzMmo6ZnVuY3Rpb24ocyl7dmFyIG9iaj1udWxsO2RoeDQudGVtcD1udWxsO3RyeXtldmFsKCJkaHg0LnRlbXA9IitzKX1jYXRjaChlKXtkaHg0LnRlbXA9bnVsbH1yZXR1cm4gb2JqPWRoeDQudGVtcCxkaHg0LnRlbXA9bnVsbCxvYmp9LGFic0xlZnQ6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKSksdGhpcy5nZXRPZmZzZXQoZSkubGVmdH0sYWJzVG9wOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSkpLHRoaXMuZ2V0T2Zmc2V0KGUpLnRvcH0sX2FPZnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsaT0wO2U7KXQrPXBhcnNlSW50KGUub2Zmc2V0VG9wKSxpKz1wYXJzZUludChlLm9mZnNldExlZnQpLGU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJue3RvcDp0LGxlZnQ6aX19LF9hT2ZzUmVjdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9ZG9jdW1lbnQuYm9keSxuPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxvPXdpbmRvdy5wYWdlWU9mZnNldHx8bi5zY3JvbGxUb3B8fGkuc2Nyb2xsVG9wLHI9d2luZG93LnBhZ2VYT2Zmc2V0fHxuLnNjcm9sbExlZnR8fGkuc2Nyb2xsTGVmdCxsPW4uY2xpZW50VG9wfHxpLmNsaWVudFRvcHx8MCxzPW4uY2xpZW50TGVmdHx8aS5jbGllbnRMZWZ0fHwwLGE9dC50b3Arby1sLGQ9dC5sZWZ0K3ItcztyZXR1cm57dG9wOk1hdGgucm91bmQoYSksbGVmdDpNYXRoLnJvdW5kKGQpfX0sZ2V0T2Zmc2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdD90aGlzLl9hT2ZzUmVjdChlKTp0aGlzLl9hT2ZzKGUpfSxfaXNPYmo6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJiJvYmplY3QiPT10eXBlb2YgZSYmInVuZGVmaW5lZCI9PXR5cGVvZiBlLmxlbmd0aH0sX2NvcHlPYmo6ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNPYmooZSkpe3ZhciB0PXt9O2Zvcih2YXIgaSBpbiBlKSJvYmplY3QiPT10eXBlb2YgZVtpXSYmbnVsbCE9ZVtpXT90W2ldPXRoaXMuX2NvcHlPYmooZVtpXSk6dFtpXT1lW2ldfWVsc2UgZm9yKHZhciB0PVtdLGk9MDtpPGUubGVuZ3RoO2krKykib2JqZWN0Ij09dHlwZW9mIGVbaV0mJm51bGwhPWVbaV0/dFtpXT10aGlzLl9jb3B5T2JqKGVbaV0pOnRbaV09ZVtpXTtyZXR1cm4gdH19LHdpbmRvdy5kaHg0LmlzSUU9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wLHdpbmRvdy5kaHg0LmlzSUU2PW51bGw9PXdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTAsd2luZG93LmRoeDQuaXNJRTc9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDcuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKTwwLHdpbmRvdy5kaHg0LmlzSUU4PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA4LjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAsd2luZG93LmRoeDQuaXNJRTk9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKT49MCx3aW5kb3cuZGh4NC5pc0lFMTA9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDEwLjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAmJjEhPXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsd2luZG93LmRoeDQuaXNJRTExPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wJiYxPT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLHdpbmRvdy5kaHg0LmlzRWRnZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkVkZ2UiKT49MCx3aW5kb3cuZGh4NC5pc09wZXJhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiT3BlcmEiKT49MCx3aW5kb3cuZGh4NC5pc0Nocm9tZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpPj0wJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzS0hUTUw9KG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiS29ucXVlcm9yIik+PTApJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzRkY9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94Iik+PTAsd2luZG93LmRoeDQuaXNJUGFkPW5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9pUGFkL2dpKT49MCx3aW5kb3cuZGh4NC5kbmQ9e2V2czp7fSxwX2VuOih3aW5kb3cuZGh4NC5pc0lFfHx3aW5kb3cuZGh4NC5pc0VkZ2UpJiYod2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSxfbVRvdWNoOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuZGh4NC5pc0lFMTAmJmUucG9pbnRlclR5cGU9PWUuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fHdpbmRvdy5kaHg0LmlzSUUxMSYmIm1vdXNlIj09ZS5wb2ludGVyVHlwZXx8d2luZG93LmRoeDQuaXNFZGdlJiYibW91c2UiPT1lLnBvaW50ZXJUeXBlfSxfdG91Y2hPbjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0iIixlPW51bGx9LF90b3VjaE9mZjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0ibm9uZSIsZT1udWxsfX0sMT09d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoicG9pbnRlcmRvd24iLG1vdmU6InBvaW50ZXJtb3ZlIixlbmQ6InBvaW50ZXJ1cCJ9OjE9PXdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoiTVNQb2ludGVyRG93biIsbW92ZToiTVNQb2ludGVyTW92ZSIsZW5kOiJNU1BvaW50ZXJVcCJ9OiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJih3aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoidG91Y2hzdGFydCIsbW92ZToidG91Y2htb3ZlIixlbmQ6InRvdWNoZW5kIn0pKSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHg0Ll9ldmVudGFibGUmJih3aW5kb3cuZGh4NC5fZXZlbnRhYmxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuImNsZWFyIj09dD8oZS5kZXRhY2hBbGxFdmVudHMoKSxlLmRoeGV2cz1udWxsLGUuYXR0YWNoRXZlbnQ9bnVsbCxlLmRldGFjaEV2ZW50PW51bGwsZS5jaGVja0V2ZW50PW51bGwsZS5jYWxsRXZlbnQ9bnVsbCxlLmRldGFjaEFsbEV2ZW50cz1udWxsLHZvaWQoZT1udWxsKSk6KGUuZGh4ZXZzPXtkYXRhOnt9fSxlLmF0dGFjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7ZT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKSx0aGlzLmRoeGV2cy5kYXRhW2VdfHwodGhpcy5kaHhldnMuZGF0YVtlXT17fSk7dmFyIGk9d2luZG93LmRoeDQubmV3SWQoKTtyZXR1cm4gdGhpcy5kaHhldnMuZGF0YVtlXVtpXT10LGl9LGUuZGV0YWNoRXZlbnQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMuZGh4ZXZzLmRhdGEpe3ZhciBpPTA7Zm9yKHZhciBuIGluIHRoaXMuZGh4ZXZzLmRhdGFbdF0pbj09ZT8odGhpcy5kaHhldnMuZGF0YVt0XVtuXT1udWxsLGRlbGV0ZSB0aGlzLmRoeGV2cy5kYXRhW3RdW25dKTppKys7MD09aSYmKHRoaXMuZGh4ZXZzLmRhdGFbdF09bnVsbCxkZWxldGUgdGhpcy5kaHhldnMuZGF0YVt0XSl9fSxlLmNoZWNrRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCksbnVsbCE9dGhpcy5kaHhldnMuZGF0YVtlXX0sZS5jYWxsRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZihlPVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpLG51bGw9PXRoaXMuZGh4ZXZzLmRhdGFbZV0pcmV0dXJuITA7dmFyIGk9ITA7Zm9yKHZhciBuIGluIHRoaXMuZGh4ZXZzLmRhdGFbZV0paT10aGlzLmRoeGV2cy5kYXRhW2VdW25dLmFwcGx5KHRoaXMsdCkmJmk7cmV0dXJuIGl9LGUuZGV0YWNoQWxsRXZlbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMuZGh4ZXZzLmRhdGEpe2Zvcih2YXIgdCBpbiB0aGlzLmRoeGV2cy5kYXRhW2VdKXRoaXMuZGh4ZXZzLmRhdGFbZV1bdF09bnVsbCxkZWxldGUgdGhpcy5kaHhldnMuZGF0YVtlXVt0XTt0aGlzLmRoeGV2cy5kYXRhW2VdPW51bGwsZGVsZXRlIHRoaXMuZGh4ZXZzLmRhdGFbZV19fSx2b2lkKGU9bnVsbCkpfSxkaHg0Ll9ldmVudGFibGUoZGh4NCkpLCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93LmRodG1seCYmKHdpbmRvdy5kaHRtbHg9e2V4dGVuZDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSBpbiB0KWVbaV18fChlW2ldPXRbaV0pO3JldHVybiBlfSxleHRlbmRfYXBpOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj13aW5kb3dbZV07biYmKHdpbmRvd1tlXT1mdW5jdGlvbihlKXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFlLnRhZ05hbWUpe3ZhciBpPW4uYXBwbHkodGhpcyx0Ll9pbml0P3QuX2luaXQoZSk6YXJndW1lbnRzKTtmb3IodmFyIG8gaW4gZGh0bWx4KXRbb10mJnRoaXNbdFtvXV0oZGh0bWx4W29dKTtmb3IodmFyIG8gaW4gZSl0W29dP3RoaXNbdFtvXV0oZVtvXSk6MD09PW8uaW5kZXhPZigib24iKSYmdGhpcy5hdHRhY2hFdmVudChvLGVbb10pfWVsc2UgdmFyIGk9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuX3BhdGNoJiZ0Ll9wYXRjaCh0aGlzKSxpfHx0aGlzfSx3aW5kb3dbZV0ucHJvdG90eXBlPW4ucHJvdG90eXBlLGkmJmRodG1seC5leHRlbmQod2luZG93W2VdLnByb3RvdHlwZSxpKSl9LHVybDpmdW5jdGlvbihlKXtyZXR1cm4tMSE9ZS5pbmRleE9mKCI/Iik/IiYiOiI/In19KSxfaXNGRj0hMSxfaXNJRT0hMSxfaXNPcGVyYT0hMSxfaXNLSFRNTD0hMSxfaXNNYWNPUz0hMSxfaXNDaHJvbWU9ITEsX0ZGcnY9ITEsX0tIVE1McnY9ITEsX09wZXJhUnY9ITEsLTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjaW50b3NoIikmJihfaXNNYWNPUz0hMCksbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImNocm9tZSIpPi0xJiYoX2lzQ2hyb21lPSEwKSwtMSE9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKXx8LTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiS29ucXVlcm9yIik/KF9LSFRNTHJ2PXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHIobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKSs3LDUpKSxfS0hUTUxydj41MjU/KF9pc0ZGPSEwLF9GRnJ2PTEuOSk6X2lzS0hUTUw9ITApOi0xIT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk9wZXJhIik/KF9pc09wZXJhPSEwLF9PcGVyYVJ2PXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHIobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJPcGVyYSIpKzYsMykpKTotMSE9bmF2aWdhdG9yLmFwcE5hbWUuaW5kZXhPZigiTWljcm9zb2Z0Iik/KF9pc0lFPSEwLCgtMSE9bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZigiTVNJRSA4LjAiKXx8LTEhPW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoIk1TSUUgOS4wIil8fC0xIT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCJNU0lFIDEwLjAiKXx8ZG9jdW1lbnQuZG9jdW1lbnRNb2RlPjcpJiYiQmFja0NvbXBhdCIhPWRvY3VtZW50LmNvbXBhdE1vZGUmJihfaXNJRT04KSk6Ik5ldHNjYXBlIj09bmF2aWdhdG9yLmFwcE5hbWUmJi0xIT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKT9faXNJRT04OihfaXNGRj0hMCxfRkZydj1wYXJzZUZsb2F0KG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoInJ2OiIpWzFdKSksInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3cuZGh0bWx4RXZlbnQsbnVsbD09ZGh0bWx4RXZlbnQudG91Y2hEZWxheSYmKGRodG1seEV2ZW50LnRvdWNoRGVsYXk9MmUzKSwidW5kZWZpbmVkIj09dHlwZW9mIGRodG1seEV2ZW50LmluaXRUb3VjaCYmKGRodG1seEV2ZW50LmluaXRUb3VjaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpZihpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO2UuaW5pdEV2ZW50KCJkYmxjbGljayIsITAsITApLGkuZGlzcGF0Y2hFdmVudChlKSx0PWk9bnVsbH19dmFyIHQsaSxuLG87ZGh0bWx4RXZlbnQoZG9jdW1lbnQuYm9keSwidG91Y2hzdGFydCIsZnVuY3Rpb24ocil7aT1yLnRvdWNoZXNbMF0udGFyZ2V0LG49ci50b3VjaGVzWzBdLmNsaWVudFgsbz1yLnRvdWNoZXNbMF0uY2xpZW50WSx0PXdpbmRvdy5zZXRUaW1lb3V0KGUsZGh0bWx4RXZlbnQudG91Y2hEZWxheSl9KSxkaHRtbHhFdmVudChkb2N1bWVudC5ib2R5LCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGUpe3QmJihNYXRoLmFicyhlLnRvdWNoZXNbMF0uY2xpZW50WC1uKT41MHx8TWF0aC5hYnMoZS50b3VjaGVzWzBdLmNsaWVudFktbyk+NTApJiYod2luZG93LmNsZWFyVGltZW91dCh0KSx0PWk9ITEpfSksZGh0bWx4RXZlbnQoZG9jdW1lbnQuYm9keSwidG91Y2hlbmQiLGZ1bmN0aW9uKGUpe3QmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHQpLHQ9aT0hMSl9KSxkaHRtbHhFdmVudC5pbml0VG91Y2g9ZnVuY3Rpb24oKXt9fSksZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RvQ29udENsaWNrPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJjIhPWUuYnV0dG9uKXJldHVybiB0aGlzLl9hY01lbnUmJih0aGlzLl9hY01lbnUuaGlkZUNvbnRleHRNZW51P3RoaXMuX2FjTWVudS5oaWRlQ29udGV4dE1lbnUoKTp0aGlzLmNNZW51Ll9jb250ZXh0RW5kKCkpLCEwO2Zvcih2YXIgaT1faXNJRT9lLnNyY0VsZW1lbnQ6ZS50YXJnZXQ7aSYmIkJPRFkiIT1pLnRhZ05hbWUmJiFpLnBhcmVudE9iamVjdDspaT1pLnBhcmVudE5vZGU7aWYoIWl8fCFpLnBhcmVudE9iamVjdClyZXR1cm4hMDt2YXIgbj1pLnBhcmVudE9iamVjdDtpZih0aGlzLmNhbGxFdmVudCgib25SaWdodENsaWNrIixbbi5pZCxlXSl8fCgoZS5zcmNFbGVtZW50fHxlLnRhcmdldCkub25jb250ZXh0bWVudT1mdW5jdGlvbihlKXtyZXR1cm4oZXx8ZXZlbnQpLmNhbmNlbEJ1YmJsZT0hMCwhMX0pLHRoaXMuX2FjTWVudT1uLmNNZW51fHx0aGlzLmNNZW51LHRoaXMuX2FjTWVudSl7aWYoIXRoaXMuY2FsbEV2ZW50KCJvbkJlZm9yZUNvbnRleHRNZW51Iixbbi5pZF0pKXJldHVybiEwO2lmKF9pc01hY09TfHwoKGUuc3JjRWxlbWVudHx8ZS50YXJnZXQpLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuKGV8fGV2ZW50KS5jYW5jZWxCdWJibGU9ITAsITF9KSx0aGlzLl9hY01lbnUuc2hvd0NvbnRleHRNZW51KXt2YXIgbz13aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHI9d2luZG93LmRvY3VtZW50LmJvZHksbD1uZXcgQXJyYXkoby5zY3JvbGxMZWZ0fHxyLnNjcm9sbExlZnQsby5zY3JvbGxUb3B8fHIuc2Nyb2xsVG9wKTtpZihfaXNJRSl2YXIgcz1lLmNsaWVudFgrbFswXSxhPWUuY2xpZW50WStsWzFdO2Vsc2UgdmFyIHM9ZS5wYWdlWCxhPWUucGFnZVk7dGhpcy5fYWNNZW51LnNob3dDb250ZXh0TWVudShzLTEsYS0xKSx0aGlzLmNvbnRleHRJRD1uLmlkLGUuY2FuY2VsQnViYmxlPSEwLHRoaXMuX2FjTWVudS5fc2tpcF9oaWRlPSEwfWVsc2UgaS5jb250ZXh0TWVudUlkPW4uaWQsaS5jb250ZXh0TWVudT10aGlzLl9hY01lbnUsaS5hPXRoaXMuX2FjTWVudS5fY29udGV4dFN0YXJ0LGkuYShpLGUpLGkuYT1udWxsO3JldHVybiExfXJldHVybiEwfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5lbmFibGVJRUltYWdlRml4PWZ1bmN0aW9uKGUpe2U/KHRoaXMuX2dldEltZz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpO3JldHVybiBlLmlubmVySFRNTD0iJm5ic3A7IixlLmNsYXNzTmFtZT0iZGh4X2JnX2ltZ19maXgiLGV9LHRoaXMuX3NldFNyYz1mdW5jdGlvbihlLHQpe2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlPSJ1cmwoIit0KyIpIn0sdGhpcy5fZ2V0U3JjPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3R5bGUuYmFja2dyb3VuZEltYWdlO3JldHVybiB0LnN1YnN0cig0LHQubGVuZ3RoLTUpLnJlcGxhY2UoLyheIil8KCIkKS9nLCIiKX0pOih0aGlzLl9nZXRJbWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZT09dGhpcy5yb290SWQ/ImRpdiI6ImltZyIpfSx0aGlzLl9zZXRTcmM9ZnVuY3Rpb24oZSx0KXtlLnNyYz10fSx0aGlzLl9nZXRTcmM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3JjfSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmRlc3RydWN0b3I9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5faWRwdWxsKXt2YXIgdD10aGlzLl9pZHB1bGxbZV07dCYmKHQucGFyZW50T2JqZWN0PW51bGwsdC50cmVlTm9kPW51bGwsdC5jaGlsZE5vZGVzPW51bGwsdC5zcGFuPW51bGwsdC50ci5ub2RlbT1udWxsLHQudHI9bnVsbCx0Lmh0bWxOb2RlLm9iakJlbG9uZz1udWxsLHQuaHRtbE5vZGU9bnVsbCx0aGlzLl9pZHB1bGxbZV09bnVsbCl9dGhpcy5wYXJlbnRPYmplY3QuaW5uZXJIVE1MPSIiLHRoaXMuYWxsVHJlZS5vbnNlbGVjdHN0YXJ0PW51bGwsdGhpcy5hbGxUcmVlLm9uY29udGV4dG1lbnU9bnVsbCx0aGlzLmFsbFRyZWUub25tb3VzZWRvd249bnVsbDtmb3IodmFyIGUgaW4gdGhpcyl0aGlzW2VdPW51bGx9LGNPYmplY3QucHJvdG90eXBlPW5ldyBPYmplY3QsY09iamVjdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZT10aGlzLG5ldyBlfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZ2xvYmFsSWRTdG9yYWdlQWRkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSwxLDEpPyhlPWUrIl8iKyhuZXcgRGF0ZSkudmFsdWVPZigpLHRoaXMuX2dsb2JhbElkU3RvcmFnZUFkZChlLHQpKToodGhpcy5faWRwdWxsW2VdPXQsdGhpcy5fcHVsbFNpemUrKyxlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZVN1Yj1mdW5jdGlvbihlKXt0aGlzLl9pZHB1bGxbZV0mJih0aGlzLl91bnNlbGVjdEl0ZW0odGhpcy5faWRwdWxsW2VdKSx0aGlzLl9pZHB1bGxbZV09bnVsbCx0aGlzLl9wdWxsU2l6ZS0tKSx0aGlzLl9sb2NrZXImJnRoaXMuX2xvY2tlcltlXSYmKHRoaXMuX2xvY2tlcltlXT0hMSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nbG9iYWxJZFN0b3JhZ2VGaW5kPWZ1bmN0aW9uKGUsdCxpLG4pe3ZhciBvPXRoaXMuX2lkcHVsbFtlXTtpZihvKXtpZihvLnVuUGFyc2VkJiYhaSYmdGhpcy5yZVBhcnNlKG8sMCksdGhpcy5fc3JuZCYmIW8uaHRtbE5vZGUmJnRoaXMuX2J1aWxkU1JORChvLGkpLG4mJnRoaXMuX2Vkc2Jwc0EpZm9yKHZhciByPTA7cjx0aGlzLl9lZHNicHNBLmxlbmd0aDtyKyspaWYodGhpcy5fZWRzYnBzQVtyXVsyXT09ZSlyZXR1cm4gZGh4NC5jYWxsRXZlbnQoIm9uZ2V0SXRlbUVycm9yIixbIlJlcXVlc3RlZCBpdGVtIHN0aWxsIGluIHBhcnNpbmcgcHJvY2Vzcy4iLGVdKSxudWxsO3JldHVybiBvfXJldHVybiB0aGlzLnNsb3dQYXJzZSYmMCE9ZSYmIXQ/dGhpcy5wcmVQYXJzZShlKTpudWxsfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZHJhd05ld1RyPWZ1bmN0aW9uKGUsdCl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIiksbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO3JldHVybiBuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIgIikpLG8uY29sU3Bhbj0zLG8uYXBwZW5kQ2hpbGQoZSksaS5hcHBlbmRDaGlsZChuKSxpLmFwcGVuZENoaWxkKG8pLGl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCxpKXtpZigic3RyaW5nIj09dHlwZW9mIHQmJihpPXQsdD1udWxsKSwianNvbiI9PT1pKXJldHVybiB0aGlzLl9sb2FkSlNPTk9iamVjdChlLHQpO2lmKCJjc3YiPT09aSlyZXR1cm4gdGhpcy5fbG9hZENTVlN0cmluZyhlLHQpO2lmKCJqc2FycmF5Ij09PWkpcmV0dXJuIHRoaXMuX2xvYWRKU0FycmF5KGUsdCk7dmFyIG49dGhpczt0aGlzLnBhcnNDb3VudHx8dGhpcy5jYWxsRXZlbnQoIm9uWExTIixbbixudWxsXSksdGhpcy54bWxzdGF0ZT0xLHRoaXMuWE1MTG9hZGVyKHtyZXNwb25zZVhNTDpkaHg0LmFqYXgucGFyc2UoZSl9LHQpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fYXR0YWNoQ2hpbGROb2RlPWZ1bmN0aW9uKGUsdCxpLG4sbyxyLGwscyxhLGQsaCl7ZCYmZC5wYXJlbnRPYmplY3QmJihlPWQucGFyZW50T2JqZWN0KSwwPT1lLlhNTGxvYWQmJnRoaXMuWE1Mc291cmNlJiYhdGhpcy5YTUxsb2FkaW5nV2FybmluZyYmKGUuWE1MbG9hZD0xLHRoaXMuX2xvYWREeW5YTUwoZS5pZCkpO3ZhciBjPWUuY2hpbGRzQ291bnQsdT1lLmNoaWxkTm9kZXM7aWYoaCYmaC50ci5wcmV2aW91c1NpYmxpbmcmJihoLnRyLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmc/ZD1oLnRyLnByZXZpb3VzU2libGluZy5ub2RlbTpzPXMucmVwbGFjZSgiVE9QIiwiIikrIixUT1AiKSxkKXt2YXIgcCxfO2ZvcihwPTA7Yz5wO3ArKylpZih1W3BdPT1kKXtmb3IoXz1jO18hPXA7Xy0tKXVbMStfXT11W19dO2JyZWFrfXArKyxjPXB9aWYocylmb3IodmFyIG09cy5zcGxpdCgiLCIpLGc9MDtnPG0ubGVuZ3RoO2crKylzd2l0Y2gobVtnXSl7Y2FzZSJUT1AiOmZvcihlLmNoaWxkc0NvdW50PjAmJihkPW5ldyBPYmplY3QsZC50cj1lLmNoaWxkTm9kZXNbMF0udHIucHJldmlvdXNTaWJsaW5nKSxlLl9oYXNfdG9wPSEwLHA9YztwPjA7cC0tKXVbcF09dVtwLTFdO2M9MH12YXIgZjsoZj10aGlzLl9pZHB1bGxbdF0pJiYtMT09Zi5zcGFufHwoZj11W2NdPW5ldyBkaHRtbFhUcmVlSXRlbU9iamVjdCh0LGksZSx0aGlzLG4sMSksdD11W2NdLmlkLGUuY2hpbGRzQ291bnQrKyksZi5odG1sTm9kZXx8KGYubGFiZWw9aSxmLmh0bWxOb2RlPXRoaXMuX2NyZWF0ZUl0ZW0odGhpcy5jaGVja0JveE9mZj8xOjAsZiksZi5odG1sTm9kZS5vYmpCZWxvbmc9ZiksbyYmKGYuaW1hZ2VzWzBdPW8pLHImJihmLmltYWdlc1sxXT1yKSxsJiYoZi5pbWFnZXNbMl09bCk7dmFyIGI9dGhpcy5fZHJhd05ld1RyKGYuaHRtbE5vZGUpO2lmKCh0aGlzLlhNTGxvYWRpbmdXYXJuaW5nfHx0aGlzLl9oQWRJKSYmKGYuaHRtbE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxkJiZkLnRyJiZkLnRyLm5leHRTaWJsaW5nP2UuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5pbnNlcnRCZWZvcmUoYixkLnRyLm5leHRTaWJsaW5nKTp0aGlzLnBhcnNpbmdPbj09ZS5pZD90aGlzLnBhcnNlZEFycmF5W3RoaXMucGFyc2VkQXJyYXkubGVuZ3RoXT1iOmUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5hcHBlbmRDaGlsZChiKSxkJiYhZC5zcGFuJiYoZD1udWxsKSx0aGlzLlhNTHNvdXJjZSYmKGEmJjAhPWE/Zi5YTUxsb2FkPTA6Zi5YTUxsb2FkPTEpLGYudHI9YixiLm5vZGVtPWYsMD09ZS5pdGVtSWQmJihiLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lPSJoaWRkZW5Sb3ciKSwoZS5fcl9sb2dpY3x8dGhpcy5fZnJidHIpJiZ0aGlzLl9zZXRTcmMoZi5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLHRoaXMuaW1QYXRoK3RoaXMucmFkaW9BcnJheVswXSkscylmb3IodmFyIG09cy5zcGxpdCgiLCIpLGc9MDtnPG0ubGVuZ3RoO2crKylzd2l0Y2gobVtnXSl7Y2FzZSJTRUxFQ1QiOnRoaXMuc2VsZWN0SXRlbSh0LCExKTticmVhaztjYXNlIkNBTEwiOnRoaXMuc2VsZWN0SXRlbSh0LCEwKTticmVhaztjYXNlIkNISUxEIjpmLlhNTGxvYWQ9MDticmVhaztjYXNlIkNIRUNLRUQiOnRoaXMuWE1MbG9hZGluZ1dhcm5pbmc/dGhpcy5zZXRDaGVja0xpc3QrPXRoaXMuZGxtdHIrdDp0aGlzLnNldENoZWNrKHQsMSk7YnJlYWs7Y2FzZSJIQ0hFQ0tFRCI6dGhpcy5fc2V0Q2hlY2soZiwidW5zdXJlIik7YnJlYWs7Y2FzZSJPUEVOIjpmLm9wZW5NZT0xfWlmKCF0aGlzLlhNTGxvYWRpbmdXYXJuaW5nJiYodGhpcy5fZ2V0T3BlblN0YXRlKGUpPDAmJiF0aGlzLl9oQWRJJiZ0aGlzLm9wZW5JdGVtKGUuaWQpLGQmJih0aGlzLl9jb3JyZWN0UGx1cyhkKSx0aGlzLl9jb3JyZWN0TGluZShkKSksdGhpcy5fY29ycmVjdFBsdXMoZSksdGhpcy5fY29ycmVjdExpbmUoZSksdGhpcy5fY29ycmVjdFBsdXMoZiksZS5jaGlsZHNDb3VudD49MiYmKHRoaXMuX2NvcnJlY3RQbHVzKHVbZS5jaGlsZHNDb3VudC0yXSksdGhpcy5fY29ycmVjdExpbmUodVtlLmNoaWxkc0NvdW50LTJdKSksMiE9ZS5jaGlsZHNDb3VudCYmdGhpcy5fY29ycmVjdFBsdXModVswXSksdGhpcy50c2NoZWNrJiZ0aGlzLl9jb3JyZWN0Q2hlY2tTdGF0ZXMoZSksdGhpcy5fb25yYWRoKSlpZigxPT10aGlzLnhtbHN0YXRlKXt2YXIgdj10aGlzLm9uWExFO3RoaXMub25YTEU9ZnVuY3Rpb24oZSl7dGhpcy5fb25yYWRoKHQpLHYmJnYoZSl9fWVsc2UgdGhpcy5fb25yYWRoKHQpO3JldHVybiBmfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fcGFyc2VJdGVtPWZ1bmN0aW9uKGUsdCxpLG4pe3ZhciBvO2lmKHRoaXMuX3NybmQmJighdGhpcy5faWRwdWxsW289ZS5nZXQoImlkIildfHwhdGhpcy5faWRwdWxsW29dLnNwYW4pKXJldHVybiB2b2lkIHRoaXMuX2FkZEl0ZW1TUk5EKHQuaWQsbyxlKTt2YXIgcj1lLmdldF9hbGwoKTtpZigib2JqZWN0Ij09dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTCYmIXRoaXMud2FpdFVwZGF0ZVhNTFtyLmlkXSlyZXR1cm4gdm9pZCB0aGlzLl9wYXJzZShlLHIuaWQsMSk7bnVsbCE9PXIudGV4dCYmInVuZGVmaW5lZCIhPXR5cGVvZiByLnRleHR8fChyLnRleHQ9ZS5zdWIoIml0ZW10ZXh0Iiksci50ZXh0JiYoci50ZXh0PXIudGV4dC5jb250ZW50KCkpKTt2YXIgbD1bXTtpZihyLnNlbGVjdCYmbC5wdXNoKCJTRUxFQ1QiKSxyLnRvcCYmbC5wdXNoKCJUT1AiKSxyLmNhbGwmJih0aGlzLm5vZGVBc2tpbmdDYWxsPXIuaWQpLC0xPT1yLmNoZWNrZWQ/bC5wdXNoKCJIQ0hFQ0tFRCIpOnIuY2hlY2tlZCYmbC5wdXNoKCJDSEVDS0VEIiksci5vcGVuJiZsLnB1c2goIk9QRU4iKSx0aGlzLndhaXRVcGRhdGVYTUwpaWYodGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChyLmlkKSl2YXIgcz10aGlzLnVwZGF0ZUl0ZW0oci5pZCxyLnRleHQsci5pbTAsci5pbTEsci5pbTIsci5jaGVja2VkLHIuY2hpbGQpO2Vsc2V7MD09dGhpcy5ucGw/bC5wdXNoKCJUT1AiKTppPXQuY2hpbGROb2Rlc1t0aGlzLm5wbF07dmFyIHM9dGhpcy5fYXR0YWNoQ2hpbGROb2RlKHQsci5pZCxyLnRleHQsMCxyLmltMCxyLmltMSxyLmltMixsLmpvaW4oIiwiKSxyLmNoaWxkLDAsaSk7ci5pZD1zLmlkLGk9bnVsbH1lbHNlIHZhciBzPXRoaXMuX2F0dGFjaENoaWxkTm9kZSh0LHIuaWQsci50ZXh0LDAsci5pbTAsci5pbTEsci5pbTIsbC5qb2luKCIsIiksci5jaGlsZCxufHwwLGkpO2lmKHIudG9vbHRpcCYmKHMuc3Bhbi5wYXJlbnROb2RlLnBhcmVudE5vZGUudGl0bGU9ci50b29sdGlwKSxyLnN0eWxlJiYocy5zcGFuLnN0eWxlLmNzc1RleHQ/cy5zcGFuLnN0eWxlLmNzc1RleHQrPSI7IityLnN0eWxlOnMuc3Bhbi5zZXRBdHRyaWJ1dGUoInN0eWxlIixzLnNwYW4uZ2V0QXR0cmlidXRlKCJzdHlsZSIpKyI7ICIrci5zdHlsZSkpLHIucmFkaW8mJihzLl9yX2xvZ2ljPSEwKSxyLm5vY2hlY2tib3gpe3ZhciBhPXMuc3Bhbi5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmc7YS5zdHlsZS5kaXNwbGF5PSJub25lIixzLm5vY2hlY2tib3g9ITB9ci5kaXNhYmxlZCYmKG51bGwhPXIuY2hlY2tlZCYmdGhpcy5fc2V0Q2hlY2socyxyLmNoZWNrZWQpLHRoaXMuZGlzYWJsZUNoZWNrYm94KHMsMSkpLHMuX2FjYz1yLmNoaWxkfHwwLHRoaXMucGFyc2VyRXh0ZW5zaW9uJiZ0aGlzLnBhcnNlckV4dGVuc2lvbi5fcGFyc2VFeHRlbnNpb24uY2FsbCh0aGlzLGUscix0P3QuaWQ6MCksdGhpcy5zZXRJdGVtQ29sb3IocyxyLmFDb2wsci5zQ29sKSwiMSI9PXIubG9ja2VkJiZ0aGlzLmxvY2tJdGVtKHMuaWQsITAsITApLChyLmltd2lkdGh8fHIuaW1oZWlnaHQpJiZ0aGlzLnNldEljb25TaXplKHIuaW13aWR0aCxyLmltaGVpZ2h0LHMpLCIwIiE9ci5jbG9zZWFibGUmJiIxIiE9ci5jbG9zZWFibGV8fHRoaXMuc2V0SXRlbUNsb3NlYWJsZShzLHIuY2xvc2VhYmxlKTt2YXIgZD0iIjtyLnRvcG9mZnNldCYmdGhpcy5zZXRJdGVtVG9wT2Zmc2V0KHMsci50b3BvZmZzZXQpLHRoaXMuc2xvd1BhcnNlJiYib2JqZWN0IiE9dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTD8oIXMuY2hpbGRzQ291bnQmJmUuc3ViX2V4aXN0cygiaXRlbSIpJiYocy51blBhcnNlZD1lLmNsb25lKCkpLGUuZWFjaCgidXNlcmRhdGEiLGZ1bmN0aW9uKGUpe3RoaXMuc2V0VXNlckRhdGEoci5pZCxlLmdldCgibmFtZSIpLGUuY29udGVudCgpKX0sdGhpcykpOmUuc3ViX2V4aXN0cygiaXRlbSIpJiYoZD10aGlzLl9wYXJzZShlLHIuaWQsMSkpLCIiIT1kJiYodGhpcy5ub2RlQXNraW5nQ2FsbD1kKSxlLmVhY2goInVzZXJkYXRhIixmdW5jdGlvbih0KXt0aGlzLnNldFVzZXJEYXRhKGUuZ2V0KCJpZCIpLHQuZ2V0KCJuYW1lIiksdC5jb250ZW50KCkpfSx0aGlzKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3BhcnNlPWZ1bmN0aW9uKGUsdCxpLG4pe2lmKHRoaXMuX3NybmQmJiF0aGlzLnBhcmVudE9iamVjdC5vZmZzZXRIZWlnaHQpe3ZhciBvPXRoaXM7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5fcGFyc2UoZSx0LGksbil9LDEwMCl9aWYoZS5leGlzdHMoKSl7aWYodGhpcy5za2lwTG9jaz0hMCwhdCl7dD1lLmdldCgiaWQiKSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XSYmKHRoaXMuZGVsZXRlQ2hpbGRJdGVtcyh0KSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XS0tLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzW3RdfHxkZWxldGUgdGhpcy5fZHluRGVsZXRlQnJhbmNoZXNbdF0pO3ZhciByPWUuZ2V0KCJkaHhfc2VjdXJpdHkiKTtyJiYoZGh0bWx4LnNlY3VyaXR5X2tleT1yKSxlLmdldCgicmFkaW8iKSYmKHRoaXMuaHRtbE5vZGUuX3JfbG9naWM9ITApLHRoaXMucGFyc2luZ09uPXQsdGhpcy5wYXJzZWRBcnJheT1uZXcgQXJyYXksdGhpcy5zZXRDaGVja0xpc3Q9IiIsdGhpcy5ub2RlQXNraW5nQ2FsbD0iIn12YXIgbD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKHQpO2lmKCFsKXJldHVybiBkaHg0LmNhbGxFdmVudCgib25EYXRhU3RydWN0dXJlRXJyb3IiLFsiWE1MIHJlZmVycyB0byBub3QgZXhpc3RpbmcgcGFyZW50Il0pO2lmKHRoaXMucGFyc0NvdW50PXRoaXMucGFyc0NvdW50P3RoaXMucGFyc0NvdW50KzE6MSx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTEsIWwuY2hpbGRzQ291bnR8fG58fHRoaXMuX2Vkc2Jwc3x8bC5faGFzX3RvcCl2YXIgcz0wO2Vsc2UgdmFyIHM9MDtpZih0aGlzLm5wbD0wLGUuZWFjaCgiaXRlbSIsZnVuY3Rpb24obixvKXtyZXR1cm4gbC5YTUxsb2FkPTEsdGhpcy5fcGFyc2VJdGVtKG4sbCwwLHMpLHRoaXMuX2Vkc2JwcyYmdGhpcy5ucGw9PXRoaXMuX2Vkc2Jwc0M/KHRoaXMuX2Rpc3RyaWJ1dGVkU3RhcnQoZSxvKzEsdCxpLGwuY2hpbGRzQ291bnQpLC0xKTp2b2lkIHRoaXMubnBsKyt9LHRoaXMsbiksIWkpe2lmKGUuZWFjaCgidXNlcmRhdGEiLGZ1bmN0aW9uKHQpe3RoaXMuc2V0VXNlckRhdGEoZS5nZXQoImlkIiksdC5nZXQoIm5hbWUiKSx0LmNvbnRlbnQoKSl9LHRoaXMpLGwuWE1MbG9hZD0xLHRoaXMud2FpdFVwZGF0ZVhNTCl7dGhpcy53YWl0VXBkYXRlWE1MPSExO2Zvcih2YXIgYT1sLmNoaWxkc0NvdW50LTE7YT49MDthLS0pbC5jaGlsZE5vZGVzW2FdLl9kbWFyayYmdGhpcy5kZWxldGVJdGVtKGwuY2hpbGROb2Rlc1thXS5pZCl9Zm9yKHZhciBhPSh0aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKHRoaXMucGFyc2luZ09uKSwwKTthPHRoaXMucGFyc2VkQXJyYXkubGVuZ3RoO2ErKylsLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uYXBwZW5kQ2hpbGQodGhpcy5wYXJzZWRBcnJheVthXSk7dGhpcy5wYXJzZWRBcnJheT1bXSx0aGlzLmxhc3RMb2FkZWRYTUxJZD10LHRoaXMuWE1MbG9hZGluZ1dhcm5pbmc9MDtmb3IodmFyIGQ9dGhpcy5zZXRDaGVja0xpc3Quc3BsaXQodGhpcy5kbG10ciksaD0wO2g8ZC5sZW5ndGg7aCsrKWRbaF0mJnRoaXMuc2V0Q2hlY2soZFtoXSwxKTt0aGlzLlhNTHNvdXJjZSYmdGhpcy50c2NoZWNrJiZ0aGlzLnNtY2hlY2smJmwuaWQhPXRoaXMucm9vdElkJiYoMD09PWwuY2hlY2tzdGF0ZT90aGlzLl9zZXRTdWJDaGVja2VkKDAsbCk6MT09PWwuY2hlY2tzdGF0ZSYmdGhpcy5fc2V0U3ViQ2hlY2tlZCgxLGwpKSx0aGlzLl9yZWRyYXdGcm9tKHRoaXMsbnVsbCxuKSxlLmdldCgib3JkZXIiKSYmIm5vbmUiIT1lLmdldCgib3JkZXIiKSYmdGhpcy5fcmVvcmRlckJyYW5jaChsLGUuZ2V0KCJvcmRlciIpLCEwKSwiIiE9dGhpcy5ub2RlQXNraW5nQ2FsbCYmdGhpcy5jYWxsRXZlbnQoIm9uQ2xpY2siLFt0aGlzLm5vZGVBc2tpbmdDYWxsLHRoaXMuZ2V0U2VsZWN0ZWRJdGVtSWQoKV0pLHRoaXMuX2JyYW5jaFVwZGF0ZSYmdGhpcy5fYnJhbmNoVXBkYXRlTmV4dChlKX1pZigxPT10aGlzLnBhcnNDb3VudCl7aWYodGhpcy5wYXJzaW5nT249bnVsbCx0aGlzLl9zcm5kJiZsLmlkIT10aGlzLnJvb3RJZCYmKHRoaXMucHJlcGFyZVNSKGwuaWQpLHRoaXMuWE1Mc291cmNlJiZ0aGlzLm9wZW5JdGVtKGwuaWQpKSxlLnRocm91Z2goIml0ZW0iLCJvcGVuIixudWxsLGZ1bmN0aW9uKGUpe3RoaXMub3Blbkl0ZW0oZS5nZXQoImlkIikpfSx0aGlzKSwhdGhpcy5fZWRzYnBzfHwhdGhpcy5fZWRzYnBzQS5sZW5ndGgpe3ZhciBjPXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmNhbGxFdmVudCgib25YTEUiLFtjLHRdKX0sMSksdGhpcy54bWxzdGF0ZT0wfXRoaXMuc2tpcExvY2s9ITF9dGhpcy5wYXJzQ291bnQtLTt2YXIgYz10aGlzO3JldHVybiB0aGlzLl9lZHNicHMmJndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5fZGlzdHJpYnV0ZWRTdGVwKHQpfSx0aGlzLl9lZHNicHNEKSwhaSYmdGhpcy5vblhMRSYmdGhpcy5vblhMRSh0aGlzLHQpLHRoaXMubm9kZUFza2luZ0NhbGx9fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fcmVkcmF3RnJvbT1mdW5jdGlvbihlLHQsaSxuKXtpZih0KW89dDtlbHNle3ZhciBvPWUuX2dsb2JhbElkU3RvcmFnZUZpbmQoZS5sYXN0TG9hZGVkWE1MSWQpO2lmKGUubGFzdExvYWRlZFhNTElkPS0xLCFvKXJldHVybiAwfWZvcih2YXIgcj0wLGw9aT9pLTE6MDtsPG8uY2hpbGRzQ291bnQ7bCsrKWlmKHRoaXMuX2JyYW5jaFVwZGF0ZSYmMSE9dGhpcy5fZ2V0T3BlblN0YXRlKG8pfHx0JiYxIT1ufHwoby5jaGlsZE5vZGVzW2xdLmh0bWxOb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5PSIiKSwxPT1vLmNoaWxkTm9kZXNbbF0ub3Blbk1lJiYodGhpcy5fb3Blbkl0ZW0oby5jaGlsZE5vZGVzW2xdKSxvLmNoaWxkTm9kZXNbbF0ub3Blbk1lPTApLGUuX3JlZHJhd0Zyb20oZSxvLmNoaWxkTm9kZXNbbF0pLG51bGwhPXRoaXMuY2hpbGRDYWxjKXtpZigoby5jaGlsZE5vZGVzW2xdLnVuUGFyc2VkfHwhby5jaGlsZE5vZGVzW2xdLlhNTGxvYWQmJnRoaXMuWE1Mc291cmNlKSYmKG8uY2hpbGROb2Rlc1tsXS5fYWNjP28uY2hpbGROb2Rlc1tsXS5zcGFuLmlubmVySFRNTD1vLmNoaWxkTm9kZXNbbF0ubGFiZWwrdGhpcy5odG1sY0Erby5jaGlsZE5vZGVzW2xdLl9hY2MrdGhpcy5odG1sY0I6by5jaGlsZE5vZGVzW2xdLnNwYW4uaW5uZXJIVE1MPW8uY2hpbGROb2Rlc1tsXS5sYWJlbCksby5jaGlsZE5vZGVzW2xdLmNoaWxkTm9kZXMubGVuZ3RoJiZ0aGlzLmNoaWxkQ2FsYyl7aWYoMT09dGhpcy5jaGlsZENhbGMmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK28uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudCt0aGlzLmh0bWxjQiksMj09dGhpcy5jaGlsZENhbGMpe3ZhciBzPW8uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudC0oby5jaGlsZE5vZGVzW2xdLnB1cmVDaGlsZHN8fDApO3MmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK3MrdGhpcy5odG1sY0IpLG8ucHVyZUNoaWxkcz9vLnB1cmVDaGlsZHMrKzpvLnB1cmVDaGlsZHM9MX1pZigzPT10aGlzLmNoaWxkQ2FsYyYmKG8uY2hpbGROb2Rlc1tsXS5zcGFuLmlubmVySFRNTD1vLmNoaWxkTm9kZXNbbF0ubGFiZWwrdGhpcy5odG1sY0Erby5jaGlsZE5vZGVzW2xdLl9hY2MrdGhpcy5odG1sY0IpLDQ9PXRoaXMuY2hpbGRDYWxjKXt2YXIgcz1vLmNoaWxkTm9kZXNbbF0uX2FjYztzJiYoby5jaGlsZE5vZGVzW2xdLnNwYW4uaW5uZXJIVE1MPW8uY2hpbGROb2Rlc1tsXS5sYWJlbCt0aGlzLmh0bWxjQStzK3RoaXMuaHRtbGNCKX19ZWxzZSA0PT10aGlzLmNoaWxkQ2FsYyYmcisrO3IrPW8uY2hpbGROb2Rlc1tsXS5fYWNjLDM9PXRoaXMuY2hpbGRDYWxjJiZyKyt9by51blBhcnNlZHx8IW8uWE1MbG9hZCYmdGhpcy5YTUxzb3VyY2V8fChvLl9hY2M9ciksZS5fY29ycmVjdExpbmUobyksZS5fY29ycmVjdFBsdXMobyksdGhpcy5jaGlsZENhbGMmJiF0JiZlLl9maXhDaGlsZENvdW50TGFiZWwobyl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVTZWxmPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NOYW1lPSJjb250YWluZXJUYWJsZVN0eWxlIixlLnN0eWxlLndpZHRoPXRoaXMud2lkdGgsZS5zdHlsZS5oZWlnaHQ9dGhpcy5oZWlnaHQsdGhpcy5wYXJlbnRPYmplY3QuYXBwZW5kQ2hpbGQoZSksZX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3hjbG9zZUFsbD1mdW5jdGlvbihlKXtpZighZS51blBhcnNlZCl7aWYodGhpcy5yb290SWQhPWUuaWQpe2lmKCFlLmh0bWxOb2RlKXJldHVybjtmb3IodmFyIHQ9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXMsaT10Lmxlbmd0aCxuPTE7aT5uO24rKyl0W25dLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuX2NvcnJlY3RQbHVzKGUpfWZvcih2YXIgbj0wO248ZS5jaGlsZHNDb3VudDtuKyspZS5jaGlsZE5vZGVzW25dLmNoaWxkc0NvdW50JiZ0aGlzLl94Y2xvc2VBbGwoZS5jaGlsZE5vZGVzW25dKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl94b3BlbkFsbD1mdW5jdGlvbihlKXt0aGlzLl9IaWRlU2hvdyhlLDIpO2Zvcih2YXIgdD0wO3Q8ZS5jaGlsZHNDb3VudDt0KyspdGhpcy5feG9wZW5BbGwoZS5jaGlsZE5vZGVzW3RdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RQbHVzPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0ubGFzdENoaWxkLGk9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzWzBdLG49dGhpcy5saW5lQXJyYXk7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe3ZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIGlmKGUuY2hpbGRzQ291bnR8fGUudW5QYXJzZWQpaWYoZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0mJiJub25lIiE9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0uc3R5bGUuZGlzcGxheSl7aWYoIWUud3NpZ24pdmFyIG49dGhpcy5taW51c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1sxXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWy1dIn1lbHNle2lmKCFlLndzaWduKXZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1swXSk7dmFyIG89MjtlLnRyZWVOb2QudHJlZUxpbmVzT24/KGUucGFyZW50T2JqZWN0JiYobz10aGlzLl9nZXRDb3VudFN0YXR1cyhlLmlkLGUucGFyZW50T2JqZWN0KSksdGhpcy5fc2V0U3JjKHQsdGhpcy5pbVBhdGgrbltvXSkpOnRoaXMuX3NldFNyYyh0LHRoaXMuaW1QYXRoK25bM10pfX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RMaW5lPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUucGFyZW50T2JqZWN0O2lmKHQpaWYoMCE9dGhpcy5fZ2V0TGluZVN0YXR1cyhlLmlkLHQpJiZ0aGlzLnRyZWVMaW5lc09uKWZvcih2YXIgaT0xO2k8PWUuY2hpbGRzQ291bnQmJmUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldO2krKyllLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1tpXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZT0idXJsKCIrdGhpcy5pbVBhdGgrdGhpcy5saW5lQXJyYXlbNV0rIikiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0icmVwZWF0LXkiO2Vsc2UgZm9yKHZhciBpPTE7aTw9ZS5jaGlsZHNDb3VudCYmZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbaV07aSsrKWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlPSIiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0iIn19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRMaW5lU3RhdHVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuY2hpbGROb2Rlc1t0LmNoaWxkc0NvdW50LTFdLmlkPT1lPzA6MX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX0hpZGVTaG93PWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2xvY2tlcnx8dGhpcy5za2lwTG9ja3x8IXRoaXMuX2xvY2tlcltlLmlkXSl7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKDE9PXQpcmV0dXJuO3JldHVybiBlLlhNTGxvYWQ9MSx2b2lkIHRoaXMuX2xvYWREeW5YTUwoZS5pZCl9ZS51blBhcnNlZCYmdGhpcy5yZVBhcnNlKGUpO3ZhciBpPWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzLG49aS5sZW5ndGg7aWYobj4xKXsibm9uZSI9PWlbMV0uc3R5bGUuZGlzcGxheSYmMSE9dHx8Mj09dD9ub2Rlc3R5bGU9IiI6KHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLmJvcmRlcj0iMSIsdGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0uYm9yZGVyPSIwIixub2Rlc3R5bGU9Im5vbmUiKTtmb3IodmFyIG89MTtuPm87bysrKWlbb10uc3R5bGUuZGlzcGxheT1ub2Rlc3R5bGV9dGhpcy5fY29ycmVjdFBsdXMoZSl9fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZ2V0T3BlblN0YXRlPWZ1bmN0aW9uKGUpe2lmKCFlLmh0bWxOb2RlKXJldHVybiAwO3ZhciB0PWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO3JldHVybiB0Lmxlbmd0aDw9MT8wOiJub25lIiE9dFsxXS5zdHlsZS5kaXNwbGF5PzE6LTF9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9uUm93Q2xpY2syPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnRPYmplY3QudHJlZU5vZDtyZXR1cm4gZS5jYWxsRXZlbnQoIm9uRGJsQ2xpY2siLFt0aGlzLnBhcmVudE9iamVjdC5pZCxlXSk/KHRoaXMucGFyZW50T2JqZWN0LmNsb3NlYmxlJiYiMCIhPXRoaXMucGFyZW50T2JqZWN0LmNsb3NlYmxlP2UuX0hpZGVTaG93KHRoaXMucGFyZW50T2JqZWN0KTplLl9IaWRlU2hvdyh0aGlzLnBhcmVudE9iamVjdCwyKSxlLmNoZWNrRXZlbnQoIm9uT3BlbkVuZCIpJiYoZS54bWxzdGF0ZT8oZS5fb2llX29uWExFLnB1c2goZS5vblhMRSksZS5vblhMRT1lLl9lcG5GSGUpOmUuY2FsbEV2ZW50KCJvbk9wZW5FbmQiLFt0aGlzLnBhcmVudE9iamVjdC5pZCxlLl9nZXRPcGVuU3RhdGUodGhpcy5wYXJlbnRPYmplY3QpXSkpLCExKTohMX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub25Sb3dDbGljaz1mdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyZW50T2JqZWN0LnRyZWVOb2Q7cmV0dXJuIGUuY2FsbEV2ZW50KCJvbk9wZW5TdGFydCIsW3RoaXMucGFyZW50T2JqZWN0LmlkLGUuX2dldE9wZW5TdGF0ZSh0aGlzLnBhcmVudE9iamVjdCldKT8odGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGUmJiIwIiE9dGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGU/ZS5fSGlkZVNob3codGhpcy5wYXJlbnRPYmplY3QpOmUuX0hpZGVTaG93KHRoaXMucGFyZW50T2JqZWN0LDIpLHZvaWQoZS5jaGVja0V2ZW50KCJvbk9wZW5FbmQiKSYmKGUueG1sc3RhdGU/KGUuX29pZV9vblhMRS5wdXNoKGUub25YTEUpLGUub25YTEU9ZS5fZXBuRkhlKTplLmNhbGxFdmVudCgib25PcGVuRW5kIixbdGhpcy5wYXJlbnRPYmplY3QuaWQsZS5fZ2V0T3BlblN0YXRlKHRoaXMucGFyZW50T2JqZWN0KV0pKSkpOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbUlkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBBcnJheSx0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWVbdF09dGhpcy5fc2VsZWN0ZWRbdF0uaWQ7cmV0dXJuIGUuam9pbih0aGlzLmRsbXRyKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3NlbGVjdEl0ZW09ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0IikmJih0aGlzLl9vblNTQ0ZvbGQ9dGhpcy5nZXRTZWxlY3RlZEl0ZW1JZCgpKSx0aGlzLl9hbXNlbCYmdCYmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXx8dGhpcy5fdW5zZWxlY3RJdGVtcygpLGUuaV9zZWwmJnRoaXMuX2Ftc2VsJiZ0JiYodC5jdHJsS2V5fHx0Lm1ldGFLZXkpKXRoaXMuX3Vuc2VsZWN0SXRlbShlKTtlbHNlIGlmKCEoZS5pX3NlbHx8dGhpcy5fYW1zZWxTJiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkWzBdLnBhcmVudE9iamVjdCE9ZS5wYXJlbnRPYmplY3QpKWlmKHRoaXMuX2Ftc2VsJiZ0JiZ0LnNoaWZ0S2V5JiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkW3RoaXMuX3NlbGVjdGVkLmxlbmd0aC0xXS5wYXJlbnRPYmplY3Q9PWUucGFyZW50T2JqZWN0KXt2YXIgaT10aGlzLl9nZXRJbmRleCh0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGgtMV0pLG49dGhpcy5fZ2V0SW5kZXgoZSk7aWYoaT5uKXt2YXIgbz1pO2k9bixuPW99Zm9yKHZhciByPWk7bj49cjtyKyspZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXS5pX3NlbHx8dGhpcy5fbWFya0l0ZW0oZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXSl9ZWxzZSB0aGlzLl9tYXJrSXRlbShlKTtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0Iikpe3ZhciBsPXRoaXMuZ2V0U2VsZWN0ZWRJdGVtSWQoKTtsIT10aGlzLl9vblNTQ0ZvbGQmJnRoaXMuY2FsbEV2ZW50KCJvblNlbGVjdCIsW2xdKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9tYXJrSXRlbT1mdW5jdGlvbihlKXtlLnNjb2xvciYmKGUuc3Bhbi5zdHlsZS5jb2xvcj1lLnNjb2xvciksZS5zcGFuLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93IixlLnNwYW4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93RnVsbCIsZS5pX3NlbD0hMCx0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGhdPWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldEluZGV4QnlJZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0P3RoaXMuX2dldEluZGV4KHQpOm51bGx9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRJbmRleD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnRPYmplY3QsaT0wO2k8dC5jaGlsZHNDb3VudDtpKyspaWYodC5jaGlsZE5vZGVzW2ldPT1lKXJldHVybiBpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fdW5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUpe2lmKGUmJmUuaV9zZWwpe2Uuc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsZS5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsZS5hY29sb3ImJihlLnNwYW4uc3R5bGUuY29sb3I9ZS5hY29sb3IpLGUuaV9zZWw9ITE7Zm9yKHZhciB0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWlmKCF0aGlzLl9zZWxlY3RlZFt0XS5pX3NlbCl7dGhpcy5fc2VsZWN0ZWQuc3BsaWNlKHQsMSk7YnJlYWt9fX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3Vuc2VsZWN0SXRlbXM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuX3NlbGVjdGVkLmxlbmd0aDtlKyspe3ZhciB0PXRoaXMuX3NlbGVjdGVkW2VdO3Quc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsdC5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsdC5hY29sb3ImJih0LnNwYW4uc3R5bGUuY29sb3I9dC5hY29sb3IpLHQuaV9zZWw9ITF9dGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vblJvd1NlbGVjdD1mdW5jdGlvbihlLHQsaSl7ZT1lfHx3aW5kb3cuZXZlbnQ7dmFyIG49dGhpcy5wYXJlbnRPYmplY3Q7dCYmKG49dC5wYXJlbnRPYmplY3QpO3ZhciBvPW4udHJlZU5vZCxyPW8uZ2V0U2VsZWN0ZWRJdGVtSWQoKTtlJiZlLnNraXBVblNlbHx8by5fc2VsZWN0SXRlbShuLGUpLGl8fChuLmFjdGlvbkhhbmRsZXI/bi5hY3Rpb25IYW5kbGVyKG4uaWQscik6by5jYWxsRXZlbnQoIm9uQ2xpY2siLFtuLmlkLHJdKSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVJdGVtPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO24uY2VsbFNwYWNpbmc9MCxuLmNlbGxQYWRkaW5nPTAsbi5ib3JkZXI9MCx0aGlzLmhmTW9kZSYmKG4uc3R5bGUudGFibGVMYXlvdXQ9ImZpeGVkIiksbi5zdHlsZS5tYXJnaW49MCxuLnN0eWxlLnBhZGRpbmc9MDt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7aWYobC5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZUltYWdlIix0aGlzLl90eHRpbWcpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2wuYXBwZW5kQ2hpbGQocykscy5jbGFzc05hbWU9ImRoeF90cmVlX3RleHRTaWduIn1lbHNle3ZhciBzPXRoaXMuX2dldEltZyh0LmlkKTtzLmJvcmRlcj0iMCIsIklNRyI9PXMudGFnTmFtZSYmKHMuYWxpZ249ImFic21pZGRsZSIpLGwuYXBwZW5kQ2hpbGQocykscy5zdHlsZS5wYWRkaW5nPTAscy5zdHlsZS5tYXJnaW49MCxzLnN0eWxlLndpZHRoPXRoaXMuZGVmX2xpbmVfaW1nX3h9dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKSxkPXRoaXMuX2dldEltZyh0aGlzLmNCUk9mP3RoaXMucm9vdElkOnQuaWQpO2QuY2hlY2tlZD0wLHRoaXMuX3NldFNyYyhkLHRoaXMuaW1QYXRoK3RoaXMuY2hlY2tBcnJheVswXSksZC5zdHlsZS53aWR0aD0iMThweCIsZC5zdHlsZS5oZWlnaHQ9IjE4cHgiLGV8fChhLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxhLmFwcGVuZENoaWxkKGQpLHRoaXMuY0JST2Z8fCJJTUciIT1kLnRhZ05hbWV8fChkLmFsaWduPSJhYnNtaWRkbGUiKSxkLm9uY2xpY2s9dGhpcy5vbkNoZWNrQm94Q2xpY2ssZC50cmVlTm9kPXRoaXMsZC5wYXJlbnRPYmplY3Q9dCx3aW5kb3cuX0tIVE1McnY/YS53aWR0aD0iMTZweCI6YS53aWR0aD0iMjBweCI7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTtoLmNsYXNzTmFtZT0ic3RhbmRhcnRUcmVlSW1hZ2UiO3ZhciBjPXRoaXMuX2dldEltZyh0aGlzLnRpbWdlbj90LmlkOnRoaXMucm9vdElkKTtjLm9ubW91c2Vkb3duPXRoaXMuX3ByZXZlbnROc0RyYWcsYy5vbmRyYWdzdGFydD10aGlzLl9wcmV2ZW50TnNEcmFnLGMuYm9yZGVyPSIwIix0aGlzLl9haW1ncyYmKGMucGFyZW50T2JqZWN0PXQsCiJJTUciPT1jLnRhZ05hbWUmJihjLmFsaWduPSJhYnNtaWRkbGUiKSxjLm9uY2xpY2s9dGhpcy5vblJvd1NlbGVjdCksaXx8dGhpcy5fc2V0U3JjKGMsdGhpcy5pY29uVVJMK3RoaXMuaW1hZ2VBcnJheVswXSksaC5hcHBlbmRDaGlsZChjKSxjLnN0eWxlLnBhZGRpbmc9MCxjLnN0eWxlLm1hcmdpbj0wLHRoaXMudGltZ2VuPyhoLnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg9dGhpcy5kZWZfaW1nX3gsYy5zdHlsZS5oZWlnaHQ9dGhpcy5kZWZfaW1nX3kpOihjLnN0eWxlLndpZHRoPSIwcHgiLGMuc3R5bGUuaGVpZ2h0PSIwcHgiLChfaXNPcGVyYXx8d2luZG93Ll9LSFRNTHJ2KSYmKGguc3R5bGUuZGlzcGxheT0ibm9uZSIpKTt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO3JldHVybiB1LmNsYXNzTmFtZT0iZGh4VGV4dENlbGwgc3RhbmRhcnRUcmVlUm93Iix0LnNwYW49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHQuc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsdGhpcy5tbGl0ZW1zPyh0LnNwYW4uc3R5bGUud2lkdGg9dGhpcy5tbGl0ZW1zLHQuc3Bhbi5zdHlsZS5kaXNwbGF5PSJibG9jayIpOnUubm9XcmFwPSEwLGRoeDQuaXNJRTg/dS5zdHlsZS53aWR0aD0iOTk5OTlweCI6d2luZG93Ll9LSFRNTHJ2fHwodS5zdHlsZS53aWR0aD0iMTAwJSIpLHQuc3Bhbi5pbm5lckhUTUw9dC5sYWJlbCx1LmFwcGVuZENoaWxkKHQuc3BhbiksdS5wYXJlbnRPYmplY3Q9dCxsLnBhcmVudE9iamVjdD10LHUub25jbGljaz10aGlzLm9uUm93U2VsZWN0LGwub25jbGljaz10aGlzLm9uUm93Q2xpY2ssdS5vbmRibGNsaWNrPXRoaXMub25Sb3dDbGljazIsdGhpcy5ldHRpcCYmKHIudGl0bGU9dC5sYWJlbCksdGhpcy5kcmFnQW5kRHJvcE9mZiYmKHRoaXMuX2FpbWdzJiYodGhpcy5kcmFnZ2VyLmFkZERyYWdnYWJsZUl0ZW0oaCx0aGlzKSxoLnBhcmVudE9iamVjdD10KSx0aGlzLmRyYWdnZXIuYWRkRHJhZ2dhYmxlSXRlbSh1LHRoaXMpKSx0LnNwYW4uc3R5bGUucGFkZGluZ0xlZnQ9IjVweCIsdC5zcGFuLnN0eWxlLnBhZGRpbmdSaWdodD0iNXB4Iix1LnN0eWxlLnZlcnRpY2FsQWxpZ249IiIsdS5zdHlsZS5mb250U2l6ZT0iMTBwdCIsdS5zdHlsZS5jdXJzb3I9dGhpcy5zdHlsZV9wb2ludGVyLHIuYXBwZW5kQ2hpbGQobCksci5hcHBlbmRDaGlsZChhKSxyLmFwcGVuZENoaWxkKGgpLHIuYXBwZW5kQ2hpbGQodSksby5hcHBlbmRDaGlsZChyKSxuLmFwcGVuZENoaWxkKG8pLCh0aGlzLmVobHR8fHRoaXMuY2hlY2tFdmVudCgib25Nb3VzZUluIil8fHRoaXMuY2hlY2tFdmVudCgib25Nb3VzZU91dCIpKSYmKHIub25tb3VzZW1vdmU9dGhpcy5faXRlbU1vdXNlSW4scltfaXNJRT8ib25tb3VzZWxlYXZlIjoib25tb3VzZW91dCJdPXRoaXMuX2l0ZW1Nb3VzZU91dCksbn0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25SaWdodENsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvblJpZ2h0Q2xpY2siLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbkNsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbkNsaWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25TZWxlY3RTdGF0ZUNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvblNlbGVjdCIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldFhNTEF1dG9Mb2FkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuWE1Mc291cmNlPWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uQ2hlY2tIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uQ2hlY2siLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbk9wZW5IYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uT3BlblN0YXJ0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25PcGVuU3RhcnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuYXR0YWNoRXZlbnQoIm9uT3BlblN0YXJ0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25PcGVuRW5kSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbk9wZW5FbmQiLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbkRibENsaWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbkRibENsaWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub3BlbkFsbEl0ZW1zPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIHQ/dm9pZCB0aGlzLl94b3BlbkFsbCh0KTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5nZXRPcGVuU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlKTtyZXR1cm4gdD90aGlzLl9nZXRPcGVuU3RhdGUodCk6IiJ9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmNsb3NlQWxsSXRlbXM9ZnVuY3Rpb24oZSl7ZT09PXdpbmRvdy51bmRlZmluZWQmJihlPXRoaXMucm9vdElkKTt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0Pyh0aGlzLl94Y2xvc2VBbGwodCksdGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0uYm9yZGVyPSIxIix2b2lkKHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLmJvcmRlcj0iMCIpKTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRVc2VyRGF0YT1mdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO24mJigiaGludCI9PXQmJihuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS50aXRsZT1pKSwidW5kZWZpbmVkIj09dHlwZW9mIG4udXNlckRhdGFbInRfIit0XSYmKG4uX3VzZXJkYXRhbGlzdD9uLl91c2VyZGF0YWxpc3QrPSIsIit0Om4uX3VzZXJkYXRhbGlzdD10KSxuLnVzZXJEYXRhWyJ0XyIrdF09aSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFVzZXJEYXRhPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO2lmKGkpcmV0dXJuIGkudXNlckRhdGFbInRfIit0XX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZ2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIXQpcmV0dXJuIDA7dmFyIGk9bmV3IE9iamVjdDtyZXR1cm4gdC5hY29sb3ImJihpLmFjb2xvcj10LmFjb2xvciksdC5zY29sb3ImJihpLnNjb2xvcj10LnNjb2xvciksaX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUsdCxpKXtpZihlJiZlLnNwYW4pdmFyIG49ZTtlbHNlIHZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIG4/KG4uaV9zZWw/KGl8fHQpJiYobi5zcGFuLnN0eWxlLmNvbG9yPWl8fHQpOnQmJihuLnNwYW4uc3R5bGUuY29sb3I9dCksaSYmKG4uc2NvbG9yPWkpLHQmJihuLmFjb2xvcj10KSx2b2lkIDApOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VJbkhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5laGx0PSEwLHRoaXMuYXR0YWNoRXZlbnQoIm9uTW91c2VJbiIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VPdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuZWhsdD0hMCx0aGlzLmF0dGFjaEV2ZW50KCJvbk1vdXNlT3V0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVHJlZUxpbmVzPWZ1bmN0aW9uKGUpe3RoaXMudHJlZUxpbmVzT249ZGh4NC5zMmIoZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9wZW5JdGVtPWZ1bmN0aW9uKGUpe3RoaXMuc2tpcExvY2s9ITA7dmFyIHQ9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlKTtyZXR1cm4gdD90aGlzLl9vcGVuSXRlbSh0KTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fb3Blbkl0ZW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0T3BlblN0YXRlKGUpO2lmKDA+dHx8dGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKCF0aGlzLmNhbGxFdmVudCgib25PcGVuU3RhcnQiLFtlLmlkLHRdKSlyZXR1cm4gMDt0aGlzLl9IaWRlU2hvdyhlLDIpLHRoaXMuY2hlY2tFdmVudCgib25PcGVuRW5kIikmJih0aGlzLm9uWExFPT10aGlzLl9lcG5GSGUmJnRoaXMuX2VwbkZIZSh0aGlzLGUuaWQsITApLHRoaXMueG1sc3RhdGUmJnRoaXMuWE1Mc291cmNlPyh0aGlzLl9vaWVfb25YTEUucHVzaCh0aGlzLm9uWExFKSx0aGlzLm9uWExFPXRoaXMuX2VwbkZIZSk6dGhpcy5jYWxsRXZlbnQoIm9uT3BlbkVuZCIsW2UuaWQsdGhpcy5fZ2V0T3BlblN0YXRlKGUpXSkpfWVsc2UgdGhpcy5fc3JuZCYmdGhpcy5fSGlkZVNob3coZSwyKTtlLnBhcmVudE9iamVjdCYmIXRoaXMuX3NraXBfb3Blbl9wYXJlbnQmJnRoaXMuX29wZW5JdGVtKGUucGFyZW50T2JqZWN0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dldEFsbEZhdEl0ZW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iIixpPTA7aTxlLmNoaWxkc0NvdW50O2krKylpZihlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWR8fGUuY2hpbGROb2Rlc1tpXS5jaGlsZHNDb3VudD4wKXtpZih0P3QrPXRoaXMuZGxtdHIrZS5jaGlsZE5vZGVzW2ldLmlkOnQ9IiIrZS5jaGlsZE5vZGVzW2ldLmlkLGUuY2hpbGROb2Rlc1tpXS51blBhcnNlZCl2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtc1hNTChlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWQsMSk7ZWxzZSB2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtcyhlLmNoaWxkTm9kZXNbaV0pO24mJih0Kz10aGlzLmRsbXRyK24pfXJldHVybiB0fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUsdCxpKXt0PWRoeDQuczJiKHQpO3ZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIW58fCFuLnBhcmVudE9iamVjdClyZXR1cm4gMDt0aGlzLlhNTGxvYWRpbmdXYXJuaW5nP24ucGFyZW50T2JqZWN0Lm9wZW5NZT0xOnRoaXMuX29wZW5JdGVtKG4ucGFyZW50T2JqZWN0KTt2YXIgbz1udWxsO2kmJihvPW5ldyBPYmplY3Qsby5jdHJsS2V5PSEwLG4uaV9zZWwmJihvLnNraXBVblNlbD0hMCkpLHQ/dGhpcy5vblJvd1NlbGVjdChvLG4uaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbM10sITEpOnRoaXMub25Sb3dTZWxlY3QobyxuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzNdLCEwKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvbXByZXNzQ2hpbGRMaXN0PWZ1bmN0aW9uKGUsdCl7ZS0tO2Zvcih2YXIgaT0wO2U+aTtpKyspMD09dFtpXSYmKHRbaV09dFtpKzFdLHRbaSsxXT0wKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RlbGV0ZU5vZGU9ZnVuY3Rpb24oZSx0LGkpe2lmKCF0fHwhdC5wYXJlbnRPYmplY3QpcmV0dXJuIDA7dmFyIG49MCxvPTA7dC50ci5uZXh0U2libGluZyYmKG49dC50ci5uZXh0U2libGluZy5ub2RlbSksdC50ci5wcmV2aW91c1NpYmxpbmcmJihvPXQudHIucHJldmlvdXNTaWJsaW5nLm5vZGVtKTtmb3IodmFyIHI9dC5wYXJlbnRPYmplY3QsbD1yLmNoaWxkc0NvdW50LHM9ci5jaGlsZE5vZGVzLGE9MDtsPmE7YSsrKWlmKHNbYV0uaWQ9PWUpe2l8fHIuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5yZW1vdmVDaGlsZChzW2FdLnRyKSxzW2FdPTA7YnJlYWt9dGhpcy5fY29tcHJlc3NDaGlsZExpc3QobCxzKSxpfHxyLmNoaWxkc0NvdW50LS0sbiYmKHRoaXMuX2NvcnJlY3RQbHVzKG4pLHRoaXMuX2NvcnJlY3RMaW5lKG4pKSxvJiYodGhpcy5fY29ycmVjdFBsdXMobyksdGhpcy5fY29ycmVjdExpbmUobykpLHRoaXMudHNjaGVjayYmdGhpcy5fY29ycmVjdENoZWNrU3RhdGVzKHIpLGl8fHRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yih0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZGVsZXRlQ2hpbGRJdGVtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO2lmKHQpZm9yKHZhciBpPXQuY2hpbGRzQ291bnQsbj0wO2k+bjtuKyspdGhpcy5fZGVsZXRlTm9kZSh0LmNoaWxkTm9kZXNbMF0uaWQsdC5jaGlsZE5vZGVzWzBdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUuY2hpbGRzQ291bnQ7dCsrKXRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1YihlLmNoaWxkTm9kZXNbdF0pLHRoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmNoaWxkTm9kZXNbdF0uaWQpO3RoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmlkKTt2YXIgaT1lO2kuc3Bhbj1udWxsLGkudHIubm9kZW09bnVsbCxpLnRyPW51bGwsaS5odG1sTm9kZT1udWxsfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fYXV0b1Njcm9sbD1mdW5jdGlvbihlLHQsaSl7dGhpcy5hdXRvU2Nyb2xsJiYoZSYmKHQ9ZGh4NC5hYnNUb3AoZSksaT1kaHg0LmFic1RvcCh0aGlzLmFsbFRyZWUpLXRoaXMuYWxsVHJlZS5zY3JvbGxUb3ApLHQtaS1wYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKT5wYXJzZUludCh0aGlzLmFsbFRyZWUub2Zmc2V0SGVpZ2h0KS01MCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCkrMjApLHQtaTxwYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKSszMCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCktMjApKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVGV4dFNpZ25zPWZ1bmN0aW9uKGUpe3RoaXMuX3R4dGltZz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZz1mdW5jdGlvbihlKXtkaHg0LmFqYXguY2FjaGU9IWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnByZXZlbnRJRUNhc2hpbmc9ZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZyxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRJY29uU2l6ZT1mdW5jdGlvbihlLHQsaSl7aWYoaSl7aWYoaSYmaS5zcGFuKXZhciBuPWk7ZWxzZSB2YXIgbj10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGkpO2lmKCFuKXJldHVybiAwO3ZhciBvPW4uc3Bhbi5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZy5jaGlsZE5vZGVzWzBdO2UmJihvLnN0eWxlLndpZHRoPWUrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9ZSsicHgiKSksdCYmKG8uc3R5bGUuaGVpZ2h0PXQrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0PXQrInB4IikpfWVsc2UgdGhpcy5kZWZfaW1nX3g9ZSsicHgiLHRoaXMuZGVmX2ltZ195PXQrInB4In0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlU2luZ2xlUmFkaW9Nb2RlPWZ1bmN0aW9uKGUpe3RoaXMuX2ZyYnRycz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub3Blbk9uSXRlbUFkZGVkPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vcGVuT25JdGVtQWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5nZXRBbGxJdGVtc1dpdGhLaWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldEFsbEZhdEl0ZW1zKHRoaXMuaHRtbE5vZGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRTa2luPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50T2JqZWN0LmNsYXNzTmFtZS5yZXBsYWNlKC9kaHh0cmVlX1teIF0qL2dpLCIiKTt0aGlzLnBhcmVudE9iamVjdC5jbGFzc05hbWU9dCsiIGRoeHRyZWVfIitlLCJkaHhfdGVycmFjZSIhPWUmJiJkaHhfd2ViIiE9ZSYmIm1hdGVyaWFsIiE9ZXx8dGhpcy5lbmFibGVUcmVlTGluZXMoITEpLCJtYXRlcmlhbCI9PWUmJnRoaXMuc2V0SWNvblNpemUoIjI1IiwiMjUiKX0sanNvblBvaW50ZXIucHJvdG90eXBlPXt0ZXh0OmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciBpPVtdLG49MDtuPGUubGVuZ3RoO24rKylpLnB1c2goInsiK3QoZVtuXSkrIn0iKTtyZXR1cm4gaS5qb2luKCIsIil9LHQ9ZnVuY3Rpb24oaSl7dmFyIG49W107Zm9yKHZhciBvIGluIGkpIm9iamVjdCI9PXR5cGVvZiBpW29dP28ubGVuZ3RoP24ucHVzaCgnIicrbysnIjpbJytlKGlbb10pKyJdIik6bi5wdXNoKCciJytvKyciOnsnK3QoaVtvXSkrIn0iKTpuLnB1c2goJyInK28rJyI6IicraVtvXSsnIicpO3JldHVybiBuLmpvaW4oIiwiKX07cmV0dXJuInsiK3QodGhpcy5kKSsifSJ9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kW2VdfSxleGlzdHM6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZH0sY29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmQuY29udGVudH0sZWFjaDpmdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcy5kW2VdLG89bmV3IGpzb25Qb2ludGVyO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspby5kPW5bcl0sdC5hcHBseShpLFtvLHJdKX0sZ2V0X2FsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmR9LHN1YjpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGpzb25Qb2ludGVyKHRoaXMuZFtlXSx0aGlzLmQpfSxzdWJfZXhpc3RzOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5kW2VdfSxlYWNoX3g6ZnVuY3Rpb24oZSx0LGksbixvKXt2YXIgcj10aGlzLmRbZV0sbD1uZXcganNvblBvaW50ZXIoMCx0aGlzLmQpO2lmKHIpZm9yKG89b3x8MDtvPHIubGVuZ3RoO28rKylpZihyW29dW3RdJiYobC5kPXJbb10sLTE9PWkuYXBwbHkobixbbCxvXSkpKXJldHVybn0sdXA6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBqc29uUG9pbnRlcih0aGlzLmRwLHRoaXMuZCl9LHNldDpmdW5jdGlvbihlLHQpe3RoaXMuZFtlXT10fSxjbG9uZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGpzb25Qb2ludGVyKHRoaXMuZCx0aGlzLmRwKX0sdGhyb3VnaDpmdW5jdGlvbihlLHQsaSxuLG8pe3ZhciByPXRoaXMuZFtlXTtpZihyLmxlbmd0aClmb3IodmFyIGw9MDtsPHIubGVuZ3RoO2wrKyl7aWYobnVsbCE9cltsXVt0XSYmIiIhPXJbbF1bdF0mJighaXx8cltsXVt0XT09aSkpe3ZhciBzPW5ldyBqc29uUG9pbnRlcihyW2xdLHRoaXMuZCk7bi5hcHBseShvLFtzLGxdKX12YXIgYT10aGlzLmQ7dGhpcy5kPXJbbF0sdGhpcy5zdWJfZXhpc3RzKGUpJiZ0aGlzLnRocm91Z2goZSx0LGksbixvKSx0aGlzLmQ9YX19fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5sb2FkSlNPTk9iamVjdD1mdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUuaW5mbyYmd2luZG93LmNvbnNvbGUuaW5mbygibG9hZEpTT05PYmplY3Qgd2FzIGRlcHJlY2F0ZWQiLCJodHRwOi8vZG9jcy5kaHRtbHguY29tL21pZ3JhdGlvbl9faW5kZXguaHRtbCNtaWdyYXRpb25mcm9tNDN0bzQ0IiksdGhpcy5fbG9hZEpTT05PYmplY3QoZSx0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2xvYWRKU09OT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dGhpcy5wYXJzQ291bnR8fHRoaXMuY2FsbEV2ZW50KCJvblhMUyIsW3RoaXMsbnVsbF0pLHRoaXMueG1sc3RhdGU9MTt2YXIgaT1uZXcganNvblBvaW50ZXIoZSk7dGhpcy5fcGFyc2UoaSksdGhpcy5fcD1pLHQmJnQoKX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXI/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGRoeF9pbml0X3RyZWVzLCExKTp3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIixkaHhfaW5pdF90cmVlcyk7dmFyIHN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7c3R5bGUuaW5uZXJIVE1MPSdAa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxle3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7YmFja2dyb3VuZC1jb2xvcjojZjVmNWY1O292ZXJmbG93OmhpZGRlbjtib3JkZXI6bm9uZTtmb250LXNpemU6MTRweDtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2NvbG9yOiM0MDQwNDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpsZWZ0O2ZvbnQ6aW5oZXJpdDtoZWlnaHQ6MjhweDtsaW5lLWhlaWdodDoyOHB4O21hcmdpbjowO3BhZGRpbmc6MCA4cHg7Y3Vyc29yOmRlZmF1bHQ7d2hpdGUtc3BhY2U6bm93cmFwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9Ob3JtYWwgZGl2LnRvcF9sZXZlbF90ZXh0LC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGRpdi50b3BfbGV2ZWxfdGV4dCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZCBkaXYudG9wX2xldmVsX3RleHR7ZmxvYXQ6bGVmdDttYXJnaW46MCAzcHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCBpLC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGksLmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlIGRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1RvcExldmVsX0l0ZW1fU2VsZWN0ZWQgaXtoZWlnaHQ6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0O2Zsb2F0OmxlZnQ7Y29sb3I6aW5oZXJpdDttYXJnaW46MCA0cHg7Zm9udC1zaXplOjEuMmVtO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZHtjb2xvcjojYTZhNmE2O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlYmViZWI7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBpbWcuZGh0bWx4TWVudV9Ub3BMZXZlbF9JdGVtX0ljb257ZmxvYXQ6bGVmdDttYXJnaW46NXB4IDNweCAwIDNweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpkZWZhdWx0O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LnRvcF9zZXB7cG9zaXRpb246cmVsYXRpdmU7ZmxvYXQ6bGVmdDtoZWlnaHQ6MjJweDt3aWR0aDowO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZGZkZmRmO21hcmdpbjozcHggOHB4IDAgOHB4O2ZvbnQtc2l6ZToxcHg7b3ZlcmZsb3c6aGlkZGVuO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9sZWZ0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7Y3Vyc29yOmRlZmF1bHQ7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtjb2xvcjojNDA0MDQwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodHtyaWdodDo2cHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9Ub3BMZXZlbF9UZXh0X2xlZnR7bGVmdDo2cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29ue3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmc6NXB4IDA7YmFja2dyb3VuZC1jb2xvcjojZmFmYWZhO292ZXJmbG93OmhpZGRlbjtjdXJzb3I6ZGVmYXVsdDtsaW5lLWhlaWdodDpub3JtYWw7b3ZlcmZsb3cteTphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjpyZ2JhKDAsMCwwLDApO2JveC1zaGFkb3c6MCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xMiksMCAxcHggMnB4IHJnYmEoMCwwLDAsMC4yNCk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRke3BhZGRpbmc6MDttYXJnaW46MDtsaW5lLWhlaWdodDpub3JtYWw7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Y29sb3I6IzQwNDA0MDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbnt3aWR0aDoxOHB4O3RleHQtYWxpZ246Y2VudGVyO31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGltZy5zdWJfaWNvbnttYXJnaW46NHB4IDZweCAwIDZweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGl7d2lkdGg6MThweDtoZWlnaHQ6MzBweDtsaW5lLWhlaWdodDoyOXB4O21hcmdpbjowIDZweDtmb250LXNpemU6MS4yZW07dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6aW5oZXJpdDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb257bWFyZ2luOjAgNnB4O3dpZHRoOjE4cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfY2hyZC5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246MCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2ljb24gZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xOHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24ucmRidF8we2JhY2tncm91bmQtcG9zaXRpb246LTcycHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGRpdi5zdWJfaWNvbi5yZGJ0XzF7YmFja2dyb3VuZC1wb3NpdGlvbjotOTBweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX3RleHQgZGl2LnN1Yl9pdGVtX3RleHR7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtwYWRkaW5nOjAgMjJweCAwIDFweDtvdmVyZmxvdzpoaWRkZW47fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2hre3BhZGRpbmc6MCAxMHB4IDAgOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9oayBkaXYuc3ViX2l0ZW1faGt7Y29sb3I6IzhkOGQ4ZDtmb250LXNpemU6MTJweDt0ZXh0LWFsaWduOnJpZ2h0O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd3tmbG9hdDpyaWdodDt3aWR0aDoxMHB4O21hcmdpbjowIDFweCAwIDExcHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfc3ViYXIucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246MCAxMHB4O292ZXJmbG93OmhpZGRlbjtmb250LXNpemU6MXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd19sb2FkaW5ne3dpZHRoOjE2cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9sb2FkZXIuZ2lmIik7ZmxvYXQ6cmlnaHQ7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX3NlbGVjdGVkIHRke2JhY2tncm91bmQtY29sb3I6I2ViZWJlYjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fc2VsZWN0ZWQgdGQgZGl2LmNvbXBsZXhfYXJyb3d7YmFja2dyb3VuZC1wb3NpdGlvbjotMTBweCAxMHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQuc3ViX2l0ZW1faGsgZGl2LnN1Yl9pdGVtX2hre2NvbG9yOiNjMGMwYzA7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2l0ZW1fdGV4dCxkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgdGQuc3ViX2l0ZW1faWNvbiBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuY29tcGxleF9hcnJvd3tiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMHB4IDEwcHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246LTM2cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fZGlzIHRkIGRpdi5zdWJfaWNvbi5yZGJ0XzB7YmFja2dyb3VuZC1wb3NpdGlvbjotMTA4cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLnJkYnRfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMjZweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9zZXAgdGR7cGFkZGluZzo1cHggM3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfc2VwIHRkIGRpdi5zdWJfc2Vwe3Bvc2l0aW9uOnJlbGF0aXZlO2ZvbnQtc2l6ZToxcHg7bGluZS1oZWlnaHQ6MXB4O2hlaWdodDowO3dpZHRoOjEwMCU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RmZGZkZjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXAsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfT3ZlcixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dVcF9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwLnBuZyIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciAycHg7cGFkZGluZzo4cHggMDttYXJnaW4tYm90dG9tOjNweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfRGlzYWJsZWR7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwX2Rpcy5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX092ZXIsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bl9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci10b3A6MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X2Rvd24ucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyIDZweDtwYWRkaW5nOjhweCAwO21hcmdpbi10b3A6M3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX0Rpc2FibGVke2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9hcnJvd19kb3duX2Rpcy5wbmciKTt9aWZyYW1lLmRodG1seE1lbnVfSUU2Q292ZXJGaXhfbWF0ZXJpYWx7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDojMDAwO2ZpbHRlcjpwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eT0xMDApO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUuZGlyX2xlZnQgZGl2LmFsaWduX2xlZnR7ZmxvYXQ6bGVmdDt9LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlLmRpcl9sZWZ0IGRpdi5hbGlnbl9yaWdodHtmbG9hdDpyaWdodDt9LmRoeG1lbnVfc2tpbl9kZXRlY3R7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDotMTAwcHg7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowIHNvbGlkIHdoaXRlO3dpZHRoOjQwcHg7aGVpZ2h0OjEwcHg7b3ZlcmZsb3c6aGlkZGVuO31Aa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRlZmF1bHRUcmVlVGFibGV7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO30uY29udGFpbmVyVGFibGVTdHlsZXtvdmVyZmxvdzphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2ZvbnQtc2l6ZToxMnB4Oy1raHRtbC11c2VyLXNlbGVjdDpub25lO30uY29udGFpbmVyVGFibGVTdHlsZVJUTCBzcGFue2RpcmVjdGlvbjpydGw7dW5pY29kZS1iaWRpOmJpZGktb3ZlcnJpZGU7fS5jb250YWluZXJUYWJsZVN0eWxlUlRMe2RpcmVjdGlvbjpydGw7b3ZlcmZsb3c6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtmb250LXNpemU6MTJweDt9LnN0YW5kYXJ0VHJlZVJvd3tmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO2xpbmUtaGVpZ2h0OjI0cHg7fS5zZWxlY3RlZFRyZWVSb3d7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtmb250LXNpemU6Oy1tb3otdXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7Y29sb3I6IzM5Yzt9LmRoeHRyZWVfbWF0ZXJpYWwgLnNlbGVjdGVkVHJlZVJvd0Z1bGwgLmRoeFRleHRDZWxse2JhY2tncm91bmQtY29sb3I6I2VlZTtjb2xvcjojMzljO30uZHJhZ0FuZERyb3BSb3d7Y29sb3I6IzM5Yzt9LnN0YW5kYXJ0VHJlZVJvd19sb3J7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtiYWNrZ3JvdW5kLWNvbG9yOjtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO30uc3RhbmRhcnRUcmVlSW1hZ2V7aGVpZ2h0OjI0cHg7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlcjowO3BhZGRpbmc6MDttYXJnaW46MDtmb250LXNpemU6MXB4O30uc3RhbmRhcnRUcmVlSW1hZ2UgaW1ne3dpZHRoOjE4cHg7aGVpZ2h0OjI0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXIgY2VudGVyO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3JkZXI6MDtwYWRkaW5nOjA7bWFyZ2luOjA7Zm9udC1zaXplOjFweDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lOy1vLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTt9LmhpZGRlblJvd3t3aWR0aDoxcHg7b3ZlcmZsb3c6aGlkZGVuO30uZHJhZ1NwYW5EaXYsLmRyYWdTcGFuRGl2IHRke2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Zm9udC1zaXplOjtsaW5lLWhlaWdodDo7dmVydGljYWwtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6d2hpdGU7ei1pbmRleDo5OTk7fS5kcmFnU3BhbkRpdiB0ZHtwYWRkaW5nOjVweDt9LmFfZGh4X2hpZGRlbl9pbnB1dHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTFweDtsZWZ0Oi0xcHg7d2lkdGg6MXB4O2hlaWdodDoxcHg7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDpub25lO30uYV9kaHhfaGlkZGVuX2lucHV0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMXB4O2xlZnQ6LTFweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmU7fS5zZWxlY3Rpb25CYXJ7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjpibGFjaztwb3NpdGlvbjphYnNvbHV0ZTtvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjJweDt6LWluZGV4OjExO30uaW50cmVlZWRpdFJvd3tmb250LXNpemU6OHB0O2hlaWdodDoxNnB4O2JvcmRlcjoxcHggc29saWQgc2lsdmVyO3BhZGRpbmc6MDttYXJnaW46MDttYXJnaW4tbGVmdDo0cHg7LW1vei11c2VyLXNlbGVjdDp0ZXh0Oy1raHRtbC11c2VyLXNlbGVjdDp0ZXh0O30uZGh4X3RyZWVfdGV4dFNpZ257Zm9udC1zaXplOjhwdDtmb250LWZhbWlseTptb25vc3BhY2U7d2lkdGg6MjFweDtjb2xvcjo7cGFkZGluZzowO21hcmdpbjowO2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO30uZGh4X3RyZWVfb3BhY2l0eXtvcGFjaXR5OjA7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5PTApOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh4X2JnX2ltZ19maXh7d2lkdGg6MThweDtoZWlnaHQ6MjRweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7YmFja2dyb3VuZC1wb3NpdGlvbi14OmNlbnRlcjtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6Y2VudGVyO30uZGh4dHJlZV9za2luX2RldGVjdHtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOi0xMDBweDttYXJnaW46MDtwYWRkaW5nOjA7Ym9yZGVyOjAgc29saWQgd2hpdGU7d2lkdGg6NDBweDtoZWlnaHQ6MTBweDtvdmVyZmxvdzpoaWRkZW47fScsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7dmFyIGxheWFhaXJfZGVidWdfdmlldz17fTt3aW5kb3cubGF5YWFpcl9kZWJ1Z192aWV3PWxheWFhaXJfZGVidWdfdmlldyxsYXlhYWlyX2RlYnVnX3ZpZXcuaW5pdExheWFBaXJEZWJ1Z1ZpZXc9ZnVuY3Rpb24oZSl7ZS5zdHlsZS5ib3JkZXI9IjFweCBzb2xpZCBibGFjayI7dmFyIHQ9TWF0aC5taW4oMjUwLC4zKmUub2Zmc2V0V2lkdGgpLGk9JzxkaXYgY2xhc3M9InRvcC1iYW5uZXIiPlxuPC9kaXY+XG48ZGl2PlxuPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuOyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNDQ0OyBwYWRkaW5nOjVweCI+XG48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0Ij5cbjxidXR0b24gaWQ9Im5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sIj7lrqHmn6XlhYPntKA8L2J1dHRvbj5cbjxidXR0b24gaWQ9InJlZnJlc2hfY29udHJvbCI+5Yi35pawPC9idXR0b24+XG48L2Rpdj5cbjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0Ij5cbjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNob3dfY3VycmVudF9jYWNoZV9jb250cm9sIj7mmL7npLrlvZPliY1jYWNoZemHjee7mDwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2FsbF9jYWNoZV9jb250cm9sIj7mmL7npLrmiYDmnIljYWNoZeWMuuWfnzwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2F0bGFzX2NvbnRyb2wiPuaYvuekuuWkp+WbvuWQiOmbhjwvaW5wdXQ+XG48L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz0iaGdyb3VwIj5cbjxkaXYgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6Jyt0KydweDsgYm9yZGVyLXJpZ2h0OjFweCBzb2xpZCBibGFjayIgaWQ9InRyZWVfY29udGFpbmVyIj48L2Rpdj5cbjxkaXYgc3R5bGU9Im92ZXJmbG93OmhpZGRlbiI+XG48ZGl2IGlkPSJjb250ZW50X3Rvb2xiYXIiIHN0eWxlPSJ3aWR0aDoxMDAlO21hcmdpbjoxMHB4Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ2aXNpYmlsaXR5X2NvbnRyb2wiPuWPr+ingTwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2JvcmRlcl9jb250cm9sIj7mmL7npLrovrnmoYY8L2lucHV0PlxuPGJ1dHRvbiBpZD0ibG9nX2luZm9fY29udHJvbCI+5omT5Y2w5Yiw5o6n5Yi25Y+wPC9idXR0b24+XG48YnV0dG9uIGlkPSJlbmFibGVkX25vZGVfY2hhaW5fY29udHJvbCI+ZW5hYmxl6ZO+PC9idXR0b24+XG48YnV0dG9uIGlkPSJzaXplX2NoYWluX2NvbnRyb2wiPnNpemXpk748L2J1dHRvbj5cbjwvZGl2PjxkaXYgc3R5bGU9Im92ZXJmbG93OmF1dG8iPjx0YWJsZSBpZD0iY29udGVudF90YWJsZSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2NjY2NjYztib3JkZXItY29sbGFwc2U6Y29sbGFwc2UiPjwvdGFibGU+XG48L2Rpdj48L2Rpdj5cbjwvZGl2PlxuPC9kaXY+JztlLmlubmVySFRNTD1pLHRoaXMuY29udGFpbmVyPWUsdGhpcy50cmVlPW5ldyBkaHRtbFhUcmVlT2JqZWN0KHRyZWVfY29udGFpbmVyLCIxMDAlIiwiMTAwJSIsMCksbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wub25jbGljaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLGxheWFhaXJfZGVidWdfdmlldy5vbl9pbnNwZWN0X2VsZW1lbnRfY2FsbGJhY2soKSxub2RlX2Z1bmN0aW9uYWxpdHlfY29udHJvbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNGRkYiLG5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmNvbG9yPSJyZ2IoMTA3LCAxNjMsIDI1NSkifX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFRyZWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJlZS5nZXRBbGxJdGVtc1dpdGhLaWRzKCkuc3BsaXQoIiwiKSxpPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXSxyPXRoaXMudHJlZS5nZXRPcGVuU3RhdGUobyk7MT09ciYmaS5wdXNoKG8pfXRoaXMudHJlZS5kZWxldGVDaGlsZEl0ZW1zKDApLHRoaXMudHJlZS5wYXJzZShlLCJqc29uIik7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspdGhpcy50cmVlLm9wZW5JdGVtKGlbbl0pfSxsYXlhYWlyX2RlYnVnX3ZpZXcucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg9ZSsicHgiLHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodD10KyJweCI7dmFyIGk9dGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0LXRyZWVfY29udGFpbmVyLm9mZnNldFRvcDt0cmVlX2NvbnRhaW5lci5zdHlsZS5oZWlnaHQ9aSsicHgiLGNvbnRlbnRfdG9vbGJhci5zdHlsZS53aWR0aD1lLXRyZWVfY29udGFpbmVyLm9mZnNldFdpZHRoKyJweCIsY29udGVudF90YWJsZS5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodD1pLWNvbnRlbnRfdG9vbGJhci5vZmZzZXRIZWlnaHQtMjErInB4Iixjb250ZW50X3RhYmxlLnN0eWxlLndpZHRoPWUtdHJlZV9jb250YWluZXIub2Zmc2V0V2lkdGgtMTYrInB4In0sbGF5YWFpcl9kZWJ1Z192aWV3LmJvdW5jZVVwSW5zcGVjdEJ1dHRvbj1mdW5jdGlvbigpe25vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iYnV0dG9uZmFjZSIsbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wuc3R5bGUuY29sb3I9ImJsYWNrIn0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlSW5wdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlQ2hhbmdlSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjaz1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcuYWRkQ29udGVudD1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpO3QuaW5uZXJIVE1MPSc8dGQgc3R5bGU9IndpZHRoOjEwMHB4O2ZvbnQtc2l6ZToxM3B4O2JvcmRlcjoxcHggc29saWQgI0NDQztwYWRkaW5nLWxlZnQ6MTBweCI+JytlLmtleSsnPC90ZD5cbjx0ZCBzdHlsZT0id2lkdGg6MjAwcHg7Ym9yZGVyOjFweCBzb2xpZCAjQ0NDOyI+PGlucHV0IHN0eWxlPSJib3JkZXI6bm9uZTt3aWR0aDoxMDAlO2hlaWdodDoyNXB4O3BhZGRpbmctbGVmdDoxMHB4OyIgdmFsdWU9JytlLnZhbHVlKyI+PC90ZD4iLGNvbnRlbnRfdGFibGUuYXBwZW5kQ2hpbGQodCk7dmFyIGk9dC5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQ7aS5kYXRhPWUsaS5vbmlucHV0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2smJnRoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyksaS5vbmNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjayYmdGhpcy52YWx1ZV9jaGFuZ2VfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyl9LGxheWFhaXJfZGVidWdfdmlldy5zZXRDb250ZW50cz1mdW5jdGlvbihlKXtjb250ZW50X3RhYmxlLmlubmVySFRNTD0iIjtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIGk9ZVt0XTt0aGlzLmFkZENvbnRlbnQoaSl9fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVBdD1mdW5jdGlvbihlLHQpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5bZV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVCeUxhYmVsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPWNvbnRlbnRfdGFibGUuY2hpbGRyZW4ubGVuZ3RoLTE7aT49MDtpLS0paWYoY29udGVudF90YWJsZS5jaGlsZHJlbltpXS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQ9PWUpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5baV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10O2JyZWFrfX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZpc2liaWxpdHk9ZnVuY3Rpb24oZSl7dmlzaWJpbGl0eV9jb250cm9sLmNoZWNrZWQ9ISFlfSxsYXlhYWlyX2RlYnVnX3ZpZXcuc2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKGUpe3Nob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZD0hIWV9LGxheWFhaXJfZGVidWdfdmlldy5nZXRWaXNpYmlsaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHZpc2liaWxpdHlfY29udHJvbC5jaGVja2VkfSxsYXlhYWlyX2RlYnVnX3ZpZXcuZ2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHNob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dDdXJyZW50Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19jdXJyZW50X2NhY2hlX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dBbGxDYWNoZT1mdW5jdGlvbigpe3JldHVybiBzaG93X2FsbF9jYWNoZV9jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5nZXRTaG93QXRsYXM9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19hdGxhc19jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5vbkluc3BlY3RFbGVtZW50PWZ1bmN0aW9uKGUpe3RoaXMub25faW5zcGVjdF9lbGVtZW50X2NhbGxiYWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vbkxvZ0luZm89ZnVuY3Rpb24oZSl7bG9nX2luZm9fY29udHJvbC5vbmNsaWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblJlZnJlc2g9ZnVuY3Rpb24oZSl7cmVmcmVzaF9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRFbmFibGVkTm9kZUNoYWluPWZ1bmN0aW9uKGUpe2VuYWJsZWRfbm9kZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRTaXplQ2hhaW49ZnVuY3Rpb24oZSl7c2l6ZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlVmlzaWJpbGl0eT1mdW5jdGlvbihlKXt2aXNpYmlsaXR5X2NvbnRyb2wub25jaGFuZ2U9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlRGVidWdCb3JkZXI9ZnVuY3Rpb24oZSl7c2hvd19ib3JkZXJfY29udHJvbC5vbmNoYW5nZT1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcub25Ub2dnbGVTaG93Q3VycmVudENhY2hlPWZ1bmN0aW9uKGUpe3Nob3dfY3VycmVudF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBbGxDYWNoZT1mdW5jdGlvbihlKXtzaG93X2FsbF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBdGxhcz1mdW5jdGlvbihlKXtzaG93X2F0bGFzX2NvbnRyb2wub25jaGFuZ2U9ZX07",t}(),H=function(){function t(){this.mSprite=null,this.mIndex=0,this.mTextureDic={}}o(t,"laya.debug.tools.AtlasTools");var e=t.prototype;return e.start=function(){D.isWebGL&&(null==this.mSprite&&(this.mSprite=new G),i.stage.addChild(this.mSprite),this.showNext())},e.end=function(){D.isWebGL&&this.mSprite&&i.stage.removeChild(this.mSprite)},e.showNext=function(){if(D.isWebGL){null==this.mSprite&&(this.mSprite=new G),i.stage.addChild(this.mSprite),this.mIndex++;var t,e=(t=laya.webgl.atlas.AtlasResourceManager.instance).getAtlaserCount();this.mIndex>=e&&(this.mIndex=0);var n;if(this.mTextureDic[this.mIndex])n=this.mTextureDic[this.mIndex];else{var o=t.getAtlaserByIndex(this.mIndex);o&&o.texture&&(n=new k(o.texture,null),this.mTextureDic[this.mIndex]=n)}n&&(this.mSprite.graphics.clear(),this.mSprite.graphics.save(),this.mSprite.graphics.alpha(.9),this.mSprite.graphics.drawRect(0,0,1024,1024,"#efefefe"),this.mSprite.graphics.restore(),this.mSprite.graphics.drawTexture(n,0,0,1024,1024),this.mSprite.graphics.fillText((this.mIndex+1).toString()+"/"+e.toString(),25,100,"40px Arial","#ff0000","left"))}},t.getInstance=function(){return t.mInstance=t.mInstance||new t},t.mInstance=null,t}(),Y=function(){function t(t,e){this.data=null,this.replaceO=null,this.idKey=null,this._loadedHandler=null,this.data=t,e||(e=Math.random()+"key"),this.idKey=e,this.init()}o(t,"laya.debug.tools.Base64Atlas");var e=t.prototype;return e.init=function(){this.replaceO={};var t;for(t in this.data)this.replaceO[t]=this.idKey+"/"+t},e.getAdptUrl=function(t){return this.replaceO[t]},e.preLoad=function(t){this._loadedHandler=t,i.loader.load(z.getPreloads(this.data),new _(this,this.preloadEnd))},e.preloadEnd=function(){var t;for(t in this.data){var e;e=i.loader.getRes(this.data[t]),I.cacheRes(this.replaceO[t],e)}this._loadedHandler&&this._loadedHandler.run()},e.replaceRes=function(t){It.replaceValue(t,this.replaceO)},t}(),z=function(){function t(){}return o(t,"laya.debug.tools.Base64ImageTool"),t.getCanvasPic=function(t){t=t.bitmap;var e=s.createElement("canvas"),i=e.getContext("2d");return e.height=t.height,e.width=t.width,i.drawImage(t.source,0,0),e},t.getBase64Pic=function(e){return t.getCanvasPic(e).toDataURL("image/png")},t.getPreloads=function(t){var e;e=[];var i;for(i in t)e.push({url:t[i],type:"image"});return e},t}(),j=function(){function t(){}return o(t,"laya.debug.tools.Base64Tool"),t.init=function(){if(!t.lookup){t.lookup=new Uint8Array(256);for(var e=0;e<t.chars.length;e++)t.lookup[t.chars.charCodeAt(e)]=e}},t.encode=function(e){var i=new Uint8Array(e),n=0,o=i.length,r="";for(n=0;n<o;n+=3)r+=t.chars[i[n]>>2],r+=t.chars[(3&i[n])<<4|i[n+1]>>4],r+=t.chars[(15&i[n+1])<<2|i[n+2]>>6],r+=t.chars[63&i[n+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.encodeStr=function(e){var i;return(i=new h).writeUTFString(e),t.encodeByte(i)},t.encodeStr2=function(e){var i;return(i=new h).writeUTFBytes(e),t.encodeByte(i)},t.encodeByte=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=-1),n<0&&(n=e.length),t.encode(e.buffer.slice(i,n))},t.decodeToByte=function(e){return new h(t.decode(e))},t.decode=function(e){t.init();var i=.75*e.length,n=e.length,o=0,r=0,a=0,s=0,l=0,h=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var u=new ArrayBuffer(i),c=new Uint8Array(u);for(o=0;o<n;o+=4)a=t.lookup[e.charCodeAt(o)],s=t.lookup[e.charCodeAt(o+1)],l=t.lookup[e.charCodeAt(o+2)],h=t.lookup[e.charCodeAt(o+3)],c[r++]=a<<2|s>>4,c[r++]=(15&s)<<4|l>>2,c[r++]=(3&l)<<6|63&h;return u},t.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.lookup=null,t}(),J=function(){function t(){}o(t,"laya.debug.tools.CacheAnalyser");var e=t.prototype;return e.renderCanvas=function(e,i){void 0===i&&(i=0),t.showCacheSprite&&(Zt.I.isDebugItem(e)||Z.showDisBoundToSprite(e,Zt.I.cacheViewLayer,et.CANVAS_REC_COLOR,4))},e.reCacheCanvas=function(e,i){if(void 0===i&&(i=0),t.showRecacheSprite&&!Zt.I.isDebugItem(e)){var n;(n=t.getNodeInfoByNode(e)).addCount(i),t.counter.addTime(e,i),n.parent||Zt.I.nodeRecInfoLayer.addChild(n)}},t.renderLoopBegin=function(){Zt.I.cacheViewLayer.graphics.clear()},t.getNodeInfoByNode=function(e){gt.idObj(e);var i=0;return i=gt.getObjID(e),t._nodeInfoDic[i]||(t._nodeInfoDic[i]=new $t),t._nodeInfoDic[i].setTarget(e),t._nodeInfoDic[i]},t._nodeInfoDic={},t.showCacheSprite=!1,t.showRecacheSprite=!0,n(t,["counter",function(){return this.counter=new wt},"I",function(){return this.I=new t}]),t}(),K=(function(){function t(){this._getHandler=null,this._indexHandler=null,this._pool=null,this._laters=null}o(t,"laya.debug.tools.CallLaterTool");t.prototype.callLater=function(e,i,n){null==this._getHandler(e,i)&&(t.oldCallLater.call(this,e,i,n),t._isRecording&&t._recordedCallLaters.push(this._laters[this._laters.length-1]))},t.initCallLaterRecorder=function(){t.oldCallLater||(t.oldCallLater=i.timer.callLater,i.timer.callLater=t.prototype.callLater)},t.beginRecordCallLater=function(){t.initCallLaterRecorder(),t._isRecording=!0},t.runRecordedCallLaters=function(){t._isRecording=!1;for(var e,n=(e=i.timer)._laters,o=0,r=(n=t._recordedCallLaters).length-1;o<=r;o++){var a=n[o];t._recordedCallLaters.indexOf(a)<0||(null!==a.method&&a.run(!1),e._recoverHandler(a),n.splice(o,1))}t._recordedCallLaters.length=0},t._recordedCallLaters=[],t._isRecording=!1,t.oldCallLater=null}(),function(){function t(){}return o(t,"laya.debug.tools.CanvasTools"),t.createCanvas=function(t,e){var i=new g("2D");return i.getContext("2d"),i.size(t,e),i},t.renderSpriteToCanvas=function(t,e,i,n){R.renders[t._renderType]._fun(t,e.context,i,n)},t.getImageDataFromCanvas=function(t,e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),n<=0&&(n=t.width),o<=0&&(o=t.height);return t.context.getImageData(e,i,n,o)},t.getImageDataFromCanvasByRec=function(t,e){return t.context.getImageData(e.x,e.y,e.width,e.height)},t.getDifferCount=function(e,i){var n=e.data,o=i.data,r=0;return r=0,t.walkImageData(e,function(e,i,a,s){t.isPoinSame(a,n,o)||r++}),r},t.getDifferRate=function(e,i){return t.getDifferCount(e,i)/(e.width*e.height)},t.getCanvasDisRec=function(e){var i;i=new L;var n,o=0,r=0,a=0,s=0;o=a=0,r=(n=t.getImageDataFromCanvas(e,0,0)).width,s=n.height;var l=0,h=0,u=0,c=0;h=n.width,c=n.height;var d;d=n.data;var p=0;for(u=0;u<c;u++)for(l=0;l<h;l++)t.isEmptyPoint(d,p)||(r>l&&(r=l),o<l&&(o=l),s>u&&(s=u),a<u&&(a=u)),p+=4;return i.setTo(r,s,o-r+1,a-s+1),i},t.fillCanvasRec=function(t,e,i){var n=t.context;n.fillStyle=i,n.fillRect(e.x,e.y,e.width,e.height)},t.isEmptyPoint=function(t,e){return 0==t[e]&&0==t[e+1]&&0==t[e+2]&&0==t[e+3]},t.isPoinSame=function(t,e,i){return e[t]==i[t]&&e[t+1]==i[t+1]&&e[t+2]==i[t+2]&&e[t+3]==i[t+3]},t.walkImageData=function(t,e){var i=0,n=0,o=0,r=0;n=t.width,r=t.height;var a=0,s=t.data;for(i=0;i<n;i++)for(o=0;o<r;o++)e(i,o,a,s),a+=4},t.getSpriteByCanvas=function(t){var e;return(e=new G).graphics.drawTexture(new k(t),0,0,t.width,t.height),e},t.renderSpritesToCanvas=function(e,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var a=0,s=0;for(s=i.length,a=r;a<s;a++)t.renderSpriteToCanvas(i[a],e,n,o)},t.clearCanvas=function(t){var e=NaN,i=NaN;e=t.width,i=t.height,t.size(e+1,i),t.size(e,i)},t.getImagePixels=function(t,e,i,n,o){void 0===o&&(o=4);var r=0;r=(t*i+e)*o;var a,s=0,l=0;for(a=[],l=o,s=0;s<l;s++)a.push(n[r+s]);return a},t}()),Q=function(){function t(){}return o(t,"laya.debug.tools.ClassTool"),t.defineProperty=function(t,e,i){Object.defineProperty(t,e,i)},t.getOwnPropertyDescriptor=function(t,e){return Object.getOwnPropertyDescriptor(t,e)},t.getOwnPropertyDescriptors=function(t){return Object.getOwnPropertyDescriptors(t)},t.getOwnPropertyNames=function(t){return Object.getOwnPropertyNames(t)},t.getObjectGetSetKeys=function(e,i){i||(i=[]);var n;n=laya.debug.tools.ClassTool.getOwnPropertyNames(e);var o;for(o in n)(o=n[o]).indexOf("_$get_")>=0&&(o=o.replace("_$get_",""),i.push(o));return e.__proto__&&t.getObjectGetSetKeys(e.__proto__,i),i},t.getObjectDisplayAbleKeys=function(e,i){i||(i=[]);var n;for(n in e)typeof e[n],"_"!=n.charAt(0)&&i.push(n);return t.getObjectGetSetKeys(e,i),i=It.getNoSameArr(i)},t.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},t.getNodeClassAndName=function(e){if(!e)return"null";return e.name?t.getClassName(e)+"("+e.name+")":t.getClassName(e)},t.getClassNameByClz=function(t){return t.name},t.getClassByName=function(t){return i._runScript(t)},t.createObjByName=function(e){return new(t.getClassByName(e))},n(t,["displayTypes",function(){return this.displayTypes={boolean:!0,number:!0,string:!0}}]),t}(),$=function(){function t(){this.completeHandler=null,this.tSelectTar=null,this._selectTip=new G,this._selectTip.setBounds(new L(0,0,0,0)),Bt.listen("ItemClicked",this,this.itemClicked)}o(t,"laya.debug.tools.ClickSelectTool");var e=t.prototype;return e.beginClickSelect=function(e){this.completeHandler=e,t.isClickSelectState=!0,this.clickSelectChange()},e.clickSelectChange=function(){s.onPC&&(this.tSelectTar=null,this.clearSelectTip(),t.isClickSelectState?i.timer.loop(200,this,this.updateSelectTar,null,!0):i.timer.clear(this,this.updateSelectTar))},e.clearSelectTip=function(){this._selectTip.removeSelf()},e.updateSelectTar=function(){if(this.clearSelectTip(),this.tSelectTar=st.instance.getDisUnderMouse(),this.tSelectTar&&!Zt.I.isDebugItem(this.tSelectTar)){var t;(t=this._selectTip.graphics).clear();var e;e=Ut.getGRec(this.tSelectTar),Zt.I.popLayer.addChild(this._selectTip),t.drawRect(0,0,e.width,e.height,null,et.CLICK_SELECT_COLOR,2),this._selectTip.pos(e.x,e.y)}},e.itemClicked=function(e){t.isClickSelectState&&(t.ignoreDebugTool&&Zt.I.isDebugItem(e)||e instanceof laya.debug.uicomps.ContextMenuItem||e.parent instanceof laya.debug.uicomps.ContextMenuItem||(Z.showDisBound(e),this.completeHandler&&this.completeHandler.runWith(e),t.isClickSelectState=!1,this.clickSelectChange()))},r(1,t,"I",function(){return t._I||(t._I=new t),t._I}),t._I=null,t.isClickSelectState=!1,t.ignoreDebugTool=!1,t}(),q=function(){function t(){this.red=NaN,this.green=NaN,this.blue=NaN}return o(t,"laya.debug.tools.ColorTool"),t.toHexColor=function(t){return W.toHexColor(t)},t.getRGBByRGBStr=function(t){"#"==t.charAt(0)&&(t=t.substr(1));var e=parseInt(t,16);t.length;return[(16711680&e)>>16,(65280&e)>>8,255&e]},t.getColorBit=function(t){var e;return e=Math.floor(t).toString(16),e=e.length>1?e:"0"+e},t.getRGBStr=function(e){return"#"+t.getColorBit(e[0])+t.getColorBit(e[1])+t.getColorBit(e[2])},t.traseHSB=function(t){console.log("hsb:",t[0],t[1],t[2])},t.rgb2hsb=function(t,e,i){var n=[t,e,i];n.sort(yt.sortNumSmallFirst);var o=n[2],r=n[0],a=0;return o==r?a=1:0==t&&0==e&&0==i||(o==t&&e>=i?a=60*(e-i)/(o-r)+0:o==t&&e<i?a=60*(e-i)/(o-r)+360:o==e?a=60*(i-t)/(o-r)+120:o==i&&(a=60*(t-e)/(o-r)+240)),[a,0==o?0:(o-r)/o,o/255]},t.hsb2rgb=function(t,e,i){var n=0,o=0,r=0,a=Math.floor(t/60%6),s=t/60-a,l=i*(1-e),h=i*(1-s*e),u=i*(1-(1-s)*e);switch(a){case 0:n=i,o=u,r=l;break;case 1:n=h,o=i,r=l;break;case 2:n=l,o=i,r=u;break;case 3:n=l,o=h,r=i;break;case 4:n=u,o=l,r=i;break;case 5:n=i,o=l,r=h}return[Math.floor(255*n),Math.floor(255*o),Math.floor(255*r)]},t}(),tt=(function(){function t(){}o(t,"laya.debug.tools.CommonTools"),t.bind=function(t,e){return t.bind(e)},t.insertP=function(e,i,n,o,r,a){var s;s=new G,e.parent.addChild(s),s.x=i,s.y=n,s.scaleX=o,s.scaleY=r,s.rotation=a,s.addChild(e),t.count++,s.name="insertP:"+t.count},t.insertChild=function(t,e,i,n,o,r,a){void 0===a&&(a="#ff00ff");var s;return s=new G,t.addChild(s),s.x=e,s.y=i,s.scaleX=n,s.scaleY=o,s.rotation=r,s.graphics.drawRect(0,0,20,20,a),s.name="child:"+t.numChildren,s},t.createSprite=function(t,e,i){void 0===i&&(i="#ff0000");var n;return(n=new G).graphics.drawRect(0,0,t,e,i),n.size(t,e),n},t.createBtn=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=40);var n;return(n=new G).size(e,i),n.graphics.drawRect(0,0,n.width,n.height,"#ff0000"),n.graphics.fillText(t,.5*n.width,.5*n.height,null,"#ffff00","center"),n},t.count=0}(),function(){function t(){this.data={},this.preO={},this.changeO={},this.count=0}o(t,"laya.debug.tools.CountTool");var e=t.prototype;return e.reset=function(){this.data={},this.count=0},e.add=function(t,e){void 0===e&&(e=1),this.count++,this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]=this.data[t]+e},e.getKeyCount=function(t){return this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]},e.getKeyChange=function(t){return this.changeO[t]?this.changeO[t]:0},e.record=function(){var t;for(t in this.changeO)this.changeO[t]=0;for(t in this.data)this.preO[t]||(this.preO[t]=0),this.changeO[t]=this.data[t]-this.preO[t],this.preO[t]=this.data[t]},e.getCount=function(t){var e,i=0;for(e in t)i+=t[e];return i},e.traceSelf=function(t){t||(t=this.data);var e=0;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+Dt.traceObj(t)},e.traceSelfR=function(t){t||(t=this.data);var e=0;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+Dt.traceObjR(t)},t}()),et=function(){function t(){}return o(t,"laya.debug.tools.DebugConsts"),t.CLICK_SELECT_COLOR="#ff0000",t.CANVAS_REC_COLOR="#FF00FF",t.RECACHE_REC_COLOR="#00ff00",t.SPRITE_REC_COLOR="#ff0000",t.SPRITE_REC_LINEWIDTH=2,t}(),it=function(){function e(){}return o(e,"laya.debug.tools.DebugExport"),e.export=function(){var i;i=t;var n;for(n in e._exportsDic)i[n]=e._exportsDic[n]},n(e,["_exportsDic",function(){return this._exportsDic={DebugTool:Z,Watcher:Nt}}]),e}(),nt=function(){function t(){}return o(t,"laya.debug.tools.DebugTxt"),t.init=function(){t._txt||((t._txt=new U).pos(100,100),t._txt.color="#ff00ff",t._txt.zOrder=999,t._txt.fontSize=24,t._txt.text="debugTxt inited",i.stage.addChild(t._txt))},t.getArgArr=function(t){var e;e=[];var i=0,n=t.length;for(i=0;i<n;i++)e.push(t[i]);return e},t.dTrace=function(e){var i,n=arguments;i=(n=t.getArgArr(n)).join(" "),t._txt&&(t._txt.text=i+"\n"+t._txt.text)},t.getTimeStr=function(){return(new Date).toTimeString()},t.traceTime=function(e){t.dTrace(t.getTimeStr()),t.dTrace(e)},t.show=function(e){var i,n=arguments;i=(n=t.getArgArr(n)).join(" "),t._txt&&(t._txt.text=i)},t._txt=null,t.I=null,t}(),ot=function(){function t(t,e){this.autoTrace=!0,this.sign="",this.obj=null,void 0===t&&(t=""),void 0===e&&(e=!0),this.sign=t,this.autoTrace=e}o(t,"laya.debug.tools.DifferTool");return t.prototype.update=function(t,e){e&&console.log(e);var i=It.copyObj(t);this.obj||(this.obj={});var n;return n=It.differ(this.obj,i),this.obj=i,this.autoTrace&&(console.log(this.sign+" differ:"),It.traceDifferObj(n)),n},t.differ=function(e,i,n){t._differO[e]||(t._differO[e]=new t(e,!0));return t._differO[e].update(i,n)},t._differO={},t}(),rt=function(){function t(){this.arrowAxis=null,this._target=null,this.recInfo=null,t.init(),this.arrowAxis=new Vt,this.arrowAxis.mouseEnabled=!0}o(t,"laya.debug.tools.DisController");var e=t.prototype;return e.switchType=function(){this.arrowAxis.switchType()},e.updateMe=function(){this._target&&(this.recInfo=bt.getGlobalRecInfo(this._target,0,0,1,0,0,1),console.log("rotation:",this.recInfo.rotation),console.log("pos:",this.recInfo.x,this.recInfo.y),console.log("scale:",this.recInfo.width,this.recInfo.height),this.arrowAxis.x=this.recInfo.x,this.arrowAxis.y=this.recInfo.y,this.arrowAxis.rotation=this.recInfo.rotation,this.arrowAxis.yAxis.rotation=this.recInfo.rotationV-this.recInfo.rotation)},r(0,e,"target",function(){return this._target},function(e){this._target=e,e?(t._container.addChild(this.arrowAxis),i.timer.loop(100,this,this.updateMe)):(this.arrowAxis.removeSelf(),i.timer.clear(this,this.updateMe)),this.arrowAxis.target=e,this.updateMe()}),r(0,e,"type",function(){return this.arrowAxis.type},function(t){this.arrowAxis.type=t}),t.init=function(){t._container?at.setTop(t._container):((t._container=new G).mouseEnabled=!0,i.stage.addChild(t._container))},t._container=null,n(t,["I",function(){return this.I=new t}]),t}(),at=function(){function t(){}return o(t,"laya.debug.tools.DisControlTool"),t.getObjectsUnderPoint=function(e,i,n,o,r){if(o=o||[],null!=r&&!r(e))return o;if(e.getBounds().contains(i,n)){o.push(e);var a=new T;a.setTo(i,n),i=(a=e.fromParentPoint(a)).x,n=a.y;for(var s=e._childs.length-1;s>-1;s--){var l=e._childs[s];l instanceof laya.display.Sprite&&t.getObjectsUnderPoint(l,i,n,o,r)}}return o},t.getObjectsUnderGlobalPoint=function(e,n){var o=new T;return o.setTo(i.stage.mouseX,i.stage.mouseY),e.parent&&(o=e.parent.globalToLocal(o)),t.getObjectsUnderPoint(e,o.x,o.y,null,n)},t.findFirstObjectsUnderGlobalPoint=function(){var e;if(!(e=t.getObjectsUnderGlobalPoint(i.stage)))return null;var n,o=0;for(o=e.length-1;o>=0;o--)if((n=e[o])&&n.numChildren<1)return n;return n},t.visibleAndEnableObjFun=function(t){return t.visible&&t.mouseEnabled},t.visibleObjFun=function(t){return t.visible},t.getMousePoint=function(t){var e=new T;return e.setTo(i.stage.mouseX,i.stage.mouseY),e=t.globalToLocal(e)},t.isChildE=function(t,e){if(!t)return!1;for(;e;){if(e.parent==t)return!0;e=e.parent}return!1},t.isInTree=function(e,i){return e==i||t.isChildE(e,i)},t.setTop=function(t){if(t&&t.parent){var e;(e=t.parent).setChildIndex(t,e.numChildren-1)}},t.clearItemRelativeInfo=function(t){t.getLayout().left="NaN",t.getLayout().right="NaN",t.getLayout().top="NaN",t.getLayout().bottom="NaN"},t.swap=function(t,e){if(t!=e){var i=0;i=t.parent.getChildIndex(t);var n=0;n=e.parent.getChildIndex(e);var o;o=e.parent,t.parent.addChildAt(e,i),o.addChildAt(t,n)}},t.insertToTarParent=function(e,i,n){void 0===n&&(n=!1);var o,r=0;e&&(o=e.parent)&&(r=o.getChildIndex(e),n&&r++,t.insertToParent(o,i,r))},t.insertToParent=function(e,i,n){if(void 0===n&&(n=-1),e){n<0&&(n=e.numChildren);var o=0,r=0;for(r=i.length,o=0;o<r;o++)t.transParent(i[o],e),e.addChildAt(i[o],n)}},t.transParent=function(t,e){if(t&&e&&t.parent){var i;i=t.parent;var n;n=new T(t.x,t.y),n=i.localToGlobal(n),n=e.globalToLocal(n),t.pos(n.x,n.y)}},t.transPoint=function(t,e,i){return i=t.localToGlobal(i),i=e.globalToLocal(i)},t.removeItems=function(t){var e=0,i=0;for(i=t.length,e=0;e<i;e++)t[e].removeSelf()},t.addItems=function(t,e){var i=0,n=0;for(n=t.length,i=0;i<n;i++)e.addChild(t[i])},t.getAllChild=function(t){if(!t)return[];var e=0,i=0,n=[];for(i=t.numChildren,e=0;e<i;e++)n.push(t.getChildAt(e));return n},t.upDis=function(t){if(t&&t.parent){var e,i=0;(i=(e=t.parent).getChildIndex(t)+1)>=e.numChildren&&(i=e.numChildren-1),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},t.downDis=function(t){if(t&&t.parent){var e,i=0;(i=(e=t.parent).getChildIndex(t)-1)<0&&(i=0),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},t.setResizeAbleEx=function(t){var e;(e=t.getChildByName("resizeBtn"))&&xt.setResizeAble(e,t)},t.setResizeAble=function(e){e.on("click",null,t.resizeHandler,[e])},t.resizeHandler=function(t){St.setUp(t)},t.setDragingItem=function(e,i){e.on("mousedown",null,t.dragingHandler,[i]),i.on("dragend",null,t.dragingEnd,[i])},t.dragingHandler=function(t){t&&t.startDrag()},t.dragingEnd=function(e){t.intFyDisPos(e),console.log(e.x,e.y)},t.showToStage=function(e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=e.getBounds();e.x=i.stage.mouseX+n,e.y=i.stage.mouseY+o,e.x+r.width>i.stage.width&&(e.x-=r.width+n),e.y+r.height>i.stage.height&&(e.y-=r.height+o),t.intFyDisPos(e)},t.intFyDisPos=function(t){t&&(t.x=Math.round(t.x),t.y=Math.round(t.y))},t.showOnly=function(t,e){var i=0,n=0;for(n=t.length,i=0;i<n;i++)t[i].visible=t[i]==e},t.showOnlyByIndex=function(e,i){t.showOnly(e,e[i])},t.addOnly=function(t,e,i){var n=0,o=0;for(o=t.length,n=0;n<o;n++)t[n]!=e?t[n].removeSelf():i.addChild(t[n])},t.addOnlyByIndex=function(e,i,n){t.addOnly(e,e[i],n)},n(t,["tempP",function(){return this.tempP=new T}]),t}(),st=(function(){function t(){this.tar=null,this.rec=new G,this.rootContainer=new G}o(t,"laya.debug.tools.DisEditor");var e=t.prototype;e.setTarget=function(t){this.tar=t;var e;(e=this.rec.graphics).clear();var n;n=this.tar.getSelfBounds(),e.drawRect(n.x,n.y,n.width,n.height,null,"#00ff00"),this.createSameDisChain(),i.stage.addChild(this.rootContainer)},e.createSameDisChain=function(){var t,e,n;for(n=this.rec,t=this.tar;t&&t!=i.stage;)(e=new G).addChild(n),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.rotation=t.rotation,e.scrollRect=t.scrollRect,n=e,t=t.parent;this.rootContainer.removeChildren(),this.rootContainer.addChild(n)}}(),function(){function t(){this.mouseX=NaN,this.mouseY=NaN,this._stage=null,this._target=null,this.isGetting=!1,this._matrix=new S,this._point=new T,this._rect=new L,this._event=d.EMPTY,this._stage=i.stage,this.init(D.context.canvas)}o(t,"laya.debug.tools.DisplayHook");var e=t.prototype;return e.init=function(e){var n=this;s.window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none");var o=this;s.document.addEventListener("mousedown",function(e){n._event._stoped=!1,t.isFirst=!0,o.check(o._stage,e.offsetX,e.offsetY,o.onMouseDown,!0,!1)},!0),s.document.addEventListener("touchstart",function(e){n._event._stoped=!1,t.isFirst=!0;for(var r=e.changedTouches,a=0,s=r.length;a<s;a++){!function(t,e){o._event._stoped=!1,o._event.nativeEvent=e||t,o._target=null,t.offsetX?(o.mouseX=t.offsetX,o.mouseY=t.offsetY):(o.mouseX=t.clientX-i.stage.offset.x,o.mouseY=t.clientY-i.stage.offset.y)}(r[a],e),o.check(o._stage,o.mouseX,o.mouseY,o.onMouseDown,!0,!1)}},!0)},e.onMouseMove=function(t,e){this.sendEvent(t,"mousemove")},e.onMouseUp=function(t,e){e&&this.sendEvent(t,"mouseup")},e.onMouseDown=function(t,e){e&&(t.$_MOUSEDOWN=!0,this.sendEvent(t,"mousedown"))},e.sendEvent=function(t,e){this._event._stoped||(t.event(e,this._event.setTo(e,t,t)),"mouseup"===e&&t.$_MOUSEDOWN&&(t.$_MOUSEDOWN=!1,t.event("click",this._event.setTo("click",t,t))))},e.selectDisUnderMouse=function(){t.isFirst=!0,this.check(i.stage,i.stage.mouseX,i.stage.mouseY,null,!0,!1),_e.I.setSelectTarget(Z.target)},e.getDisUnderMouse=function(){return this.isGetting=!0,t.isFirst=!0,Z.target=null,this.check(i.stage,i.stage.mouseX,i.stage.mouseY,null,!0,!1),this.isGetting=!1,Z.target},e.check=function(e,i,n,o,r,a){if(e==Z.debugLayer)return!1;if(e==Zt.I)return!1;if(this.isGetting&&e==Zt.I)return!1;if(!e.visible||e.getSelfBounds().width<=0)return!1;var s=!1;if(!0){var l=!1;if(r&&(this._rect=e.getBounds(),s=this._rect.contains(i,n),this._point.setTo(i,n),e.fromParentPoint(this._point),i=this._point.x,n=this._point.y),s){for(var h=!1,u=e._childs.length-1;u>-1;u--){var c=e._childs[u];if(h=this.check(c,i,n,o,r,!0))break}l=e.getGraphicBounds().contains(i,n),(s=h||l)&&!h&&t.isFirst&&(t.isFirst=!1,e instanceof laya.debug.tools.debugUI.DButton||(Z.target=e,this.isGetting||(Z.autoWork(),Bt.notify("ItemClicked",e))))}}return s},t.initMe=function(){t.instance||(t.instance=new t)},t.ITEM_CLICKED="ItemClicked",t.instance=null,t.isFirst=!1,t}()),lt=(function(){function t(){}o(t,"laya.debug.tools.DisPool"),t.getDis=function(e){var i;i=Q.getClassNameByClz(e),t._objDic[i]||(t._objDic[i]=[]);var n,o=0,r=0;for(r=(n=t._objDic[i]).length,o=0;o<r;o++)if(!n[o].parent)return n[o];return n.push(new e),n[n.length-1]},t._objDic={}}(),function(){function t(){}return o(t,"laya.debug.tools.DTrace"),t.getArgArr=function(t){var e;e=[];var i=0,n=t.length;for(i=0;i<n;i++)e.push(t[i]);return e},t.dTrace=function(e){var i=arguments;(i=t.getArgArr(i)).push(Dt.getCallLoc(2)),console.log.apply(console,i);i.join(" ")},t.timeStart=function(t){console.time(t)},t.timeEnd=function(t){console.timeEnd(t)},t.traceTable=function(t){console.table(t)},t}()),ht=function(){function t(){this.createInfo={}}o(t,"laya.debug.tools.enginehook.ClassCreateHook");var e=t.prototype;return e.hookClass=function(e){var i=this;if(!t.isInited){t.isInited=!0;pt.hook(e,"call",function(t){i.classCreated(t,e)})}},e.classCreated=function(e,i){var n;n=Q.getNodeClassAndName(e);var o,r=0;for(o=e;o&&o!=i;)o=o.__super,r++;t.I.createInfo[n]||(t.I.createInfo[n]=0),t.I.createInfo[n]=t.I.createInfo[n]+1,Mt.run(n,r+6)},e.getClassCreateInfo=function(t){var e;return e=Q.getClassName(t),Mt.getRunInfo(e)},t.isInited=!1,n(t,["I",function(){return this.I=new t}]),t}(),ut=(function(){function t(){}o(t,"laya.debug.tools.enginehook.FunctionTimeHook"),t.hookFun=function(e,i){if(e&&!e.timeHooked){var n;t.HookID++,n=Q.getNodeClassAndName(e)+"."+i+"():"+t.HookID;e.timeHooked=!0,pt.hook(e,i,function(e){t.funBegin(n)},function(e){t.funEnd(n)})}},t.funBegin=function(e){t.funPre[e]=s.now()},t.funEnd=function(e){t.funPre[e]||(t.funPre[e]=0),t.counter.add(e,s.now()-t.funPre[e])},t.fresh=function(){t.funEnd("TotalSign"),t.counter.record(),t.funBegin("TotalSign")},t.HookID=1,t.funPre={},t.TotalSign="TotalSign",n(t,["counter",function(){return this.counter=new tt}])}(),function(){function t(){}o(t,"laya.debug.tools.enginehook.RenderSpriteHook");var e=t.prototype;return e.createRenderSprite=function(e,i){var n;return n=t._preCreateFun(e,i),16==e&&(n._oldCanvas=n._fun,n._fun=t.I._canvas),n},e._canvas=function(t,e,i,n){if(ct.allowRendering){var o=t._$P.cacheCanvas,r=this._next;if(o&&!ct.isVisibleTesting){var a;a=s.now();var l=o.ctx,h=t._needRepaint()||!l;this._oldCanvas(t,e,i,n),c.showCanvasMark,h?J.I.reCacheCanvas(t,s.now()-a):J.I.renderCanvas(t,s.now()-a)}else r._fun.call(r,t,e,i,n)}},t.init=function(){t.I||(t.I=new t,t._preCreateFun=N.createRenderSprite,N.createRenderSprite=t.I.createRenderSprite)},t.IMAGE=1,t.FILTERS=2,t.ALPHA=4,t.TRANSFORM=8,t.CANVAS=16,t.BLEND=32,t.CLIP=64,t.STYLE=128,t.GRAPHICS=256,t.CUSTOM=512,t.ENABLERENDERMERGE=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.I=null,t._preCreateFun=null,t}()),ct=function(){function t(){this._repaint=1,this._renderType=1,this._x=0,this._y=0,this.target=null,this.isTargetRenderd=!1,this.preFun=null,this._next=null,this.pgraphic=R.prototype._graphics,this.pimage=R.prototype._image,this.pimage2=R.prototype._image2}o(t,"laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse");var e=t.prototype;return e.setRenderHook=function(){G.prototype.render=t.I.render},e.render=function(e,i,n){if(this,!Zt.I.isDebugItem(this))if(this==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target&&(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering=!0,laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.isTargetRenderd=!0,K.clearCanvas(t.mainCanvas)),R.renders[this._renderType]._fun(this,e,i+this._x,n+this._y),this==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target)t.tarRec=K.getCanvasDisRec(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.mainCanvas),console.log("rec",t.tarRec.toString()),t.tarRec.width>0&&t.tarRec.height>0?(t.isTarRecOK=!0,t.preImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec),t.tarImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec)):console.log("tarRec Not OK:",t.tarRec);else if(t.isTarRecOK){t.tImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec);var o=NaN;o=K.getDifferRate(t.preImageData,t.tImageData),t.preImageData=t.tImageData,o>0&&Rt.addCoverNode(this,o)}},e.analyseNode=function(e){Rt.resetCoverList(),G.prototype.render!=t.I.render&&(this.preFun=G.prototype.render),this.target=e,G.prototype.render=this.render,t.tarCanvas||(t.tarCanvas=K.createCanvas(i.stage.width,i.stage.height)),t.mainCanvas||(t.mainCanvas=K.createCanvas(i.stage.width,i.stage.height)),this.isTargetRenderd=!1,t.isVisibleTesting=!0,t.allowRendering=!1,K.clearCanvas(t.mainCanvas),K.clearCanvas(t.tarCanvas),t.isTarRecOK=!1;var n=new E(t.mainCanvas.width,t.mainCanvas.height,t.mainCanvas);t.mainCanvas=n.canvas,this.render.call(i.stage,n,0,0),t.coverRate=t.isTarRecOK?K.getDifferRate(t.preImageData,t.tarImageData):0,Rt.coverRate=t.coverRate,Rt.isTarRecOK=t.isTarRecOK,console.log("coverRate:",t.coverRate),this.isTargetRenderd=!1,t.isVisibleTesting=!1,t.allowRendering=!0,G.prototype.render=this.preFun},e.noRenderMode=function(){},e.normalMode=function(){R.prototype._graphics=this.pgraphic,R.prototype._image=this.pimage,R.prototype._image2=this.pimage2},e.inits=function(){this.noRenderMode()},e.m_graphics=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var o=t._style._tf;t._graphics&&t._graphics._render(t,e,i-o.translateX,n-o.translateY)}var r=this._next;r._fun.call(r,t,e,i,n)},e.m_image=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var o=t._style;e.ctx.drawTexture2(i,n,o._tf.translateX,o._tf.translateY,t.transform,o.alpha,o.blendMode,t._graphics._one)}},e.m_image2=function(t,e,i,n){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var o=t._style._tf;e.ctx.drawTexture2(i,n,o.translateX,o.translateY,t.transform,1,null,t._graphics._one)}},t.tarCanvas=null,t.mainCanvas=null,t.preImageData=null,t.tImageData=null,t.tarImageData=null,t.tarRec=null,t.isTarRecOK=!1,t.isVisibleTesting=!1,t.allowRendering=!0,t.coverRate=NaN,n(t,["I",function(){return this.I=new t}]),t}(),dt=function(){function t(){this._repaint=1,this._renderType=1,this._x=0,this._y=0}o(t,"laya.debug.tools.enginehook.SpriteRenderHook");return t.prototype.render=function(t,e,n){this==i.stage&&J.renderLoopBegin();var o=0;o=s.now(),A.spriteCount++,this.ShowBorderSign&&Z.showDisBoundToSprite(this,Zt.I.cacheViewLayer,et.SPRITE_REC_COLOR,et.SPRITE_REC_LINEWIDTH),R.renders[this._renderType]._fun(this,t,e+this._x,n+this._y),this._repaint=0,Ct.I.render(this,s.now()-o)},t.init=function(){t.I||(t.I=new t,t.setRenderHook())},t.setRenderHook=function(){G.prototype.render=t.I.render},t.showDisplayBorder=function(t,e){void 0===e&&(e=!0),t.ShowBorderSign=e},t.isDisplayShowBorder=function(t){return t.ShowBorderSign},t.I=null,t.ShowBorderSign="ShowBorderSign",t}(),pt=(function(){function t(){}o(t,"laya.debug.tools.exp.Observer"),t.observe=function(t,e){Object.observe(t,e)},t.unobserve=function(t,e){Object.unobserve(t,e)},t.observeDiffer=function(e,i,n){void 0===n&&(n="obDiffer");t.observe(e,function(){ot.differ(i,e,n)})}}(),function(){function t(){}o(t,"laya.debug.tools.exp.Watch"),t.watch=function(t,e,i){t.watch(e,i)},t.unwatch=function(t,e,i){t.unwatch(e,i)}}(),function(){function t(){}o(t,"laya.debug.tools.FilterTool"),t.getArrByFilter=function(t,e){var i=0,n=t.length,o=[];for(i=0;i<n;i++)e(t[i])&&o.push(t[i]);return o},t.getArr=function(t,e,i){var n=0,o=t.length,r=[];for(n=0;n<o;n++)t[n][e]==i&&r.push(t[n]);return r}}(),function(){function t(){}o(t,"laya.debug.tools.GetSetProfile"),t.removeNoDisplayKeys=function(e){var i=0;for(i=e.length-1;i>=0;i--)t.noDisplayKeys[e[i]]&&e.splice(i,1)},t.getClassCount=function(e){return t.countDic[e]},t.addClassCount=function(e){t.countDic[e]?t.countDic[e]=t.countDic[e]+1:t.countDic[e]=1},t.init=function(){if(!t._inited){t._inited=!0;pt.hook(x,"call",null,function(e){t.classCreated(e)}),(t.handlerO={}).get=function(t,e,i){return console.log("get",t,e,i),Reflect.get(t,e,i)},t.handlerO.set=function(t,e,i,n){return console.log("set",t,e,i,n),Reflect.set(t,e,i,n)}}},t.classCreated=function(e,i){if(!t.fromMe){var n;n=Q.getClassName(e),t.addClassCount(n),t.addClassCount("ALL"),gt.idObj(e);var o;((o=t.hookClassDic[n])||(t.profileClass(e.constructor),o=t.hookClassDic[n]))&&t.hookObj2(e,o)}},t.hookObj=function(e,i){var n=t.handlerO;new Proxy(e,n)},t.hookObj2=function(e,i){var n=0,o=0;for(o=i.length,n=0;n<o;n++)t.hookVar(e,i[n])},t.profileClass=function(e){var i;i=Q.getClassName(e),t.fromMe=!0;var n=new e;t.fromMe=!1;var o;o=Q.getObjectDisplayAbleKeys(n);var r=0;for(r=(o=It.getNoSameArr(o)).length-1;r>=0;r--)"function"==typeof n[o[r]]&&o.splice(r,1);o.length,t.removeNoDisplayKeys(o),t.hookClassDic[i]=o},t.hookPrototype=function(e,i){console.log("hook:",i);try{t.hookVar(e,i)}catch(t){console.log("fail",i)}},t.reportCall=function(e,i,n){gt.idObj(e);var o=0;o=gt.getObjID(e);var r;r=Q.getClassName(e),t.recordInfo(r,i,n,o),t.recordInfo("ALL",i,n,o)},t.recordInfo=function(e,i,n,o){var r;t.infoDic[e]||(t.infoDic[e]={});var a;(r=t.infoDic[e])[i]||(r[i]={});var s;(a=r[i])[n]||(a[n]={}),(s=a[n])[o]?s[o]=s[o]+1:(s[o]=1,s.objCount?s.objCount=s.objCount+1:s.objCount=1),s.count?s.count=s.count+1:s.count=1},t.showInfo=function(){var e;e={};var i;i={};var n;n=[];var o;o=[];var r,a,s;for(r in t.infoDic){var l,h;l=t.infoDic[r],e[r]=h={};for(a in l){var u,c;u=l[a],h[a]=c={};for(s in u){var d;(d=u[s]).rate=d.objCount/t.getClassCount(r),c[s]=d.rate;var p;i[p=r+"_"+a+"_"+s]=d.rate,"ALL"==r&&("get"==s?n.push([p,d.rate,d.count]):o.push([p,d.rate,d.count]))}}}console.log(t.infoDic),console.log(t.countDic),console.log(e),console.log(i),console.log("nodeCount:",t.getClassCount("ALL")),console.log("sort by rate"),t.showStaticInfo(n,o,"1"),console.log("sort by count"),t.showStaticInfo(n,o,"2")},t.showStaticInfo=function(e,i,n){console.log("get:"),t.showStaticArray(e,n),console.log("set:"),t.showStaticArray(i,n)},t.showStaticArray=function(t,e){void 0===e&&(e="1"),t.sort(C.sortByKey(e,!0,!0));var i=0,n=0;n=t.length;var o;for(i=0;i<n;i++)o=t[i],console.log(o[0],Math.floor(100*o[1]),o[2])},t.hookVar=function(e,i,n,o){n||(n=[]),o||(o=[]);var r,a,s=e;a=Q.getOwnPropertyDescriptor(e,i);var l={},h=function(t){r=t},u=function(){return r};for(o.push(function(){return t.reportCall(this,i,"get"),r}),n.push(function(e){t.reportCall(this,i,"set")});!a&&e.__proto__;)e=e.__proto__,a=Q.getOwnPropertyDescriptor(e,i);a&&(l.set=a.set?a.set:h,l.get=a.get?a.get:u,a.get||(r=s[i]),l.enumerable=a.enumerable,n.push(l.set),o.push(l.get),pt.hookFuns(l,"set",n),pt.hookFuns(l,"get",o,o.length-1),Q.defineProperty(s,i,l)),a||(l.set=h,l.get=u,r=s[i],n.push(l.set),o.push(l.get),pt.hookFuns(l,"set",n),pt.hookFuns(l,"get",o,o.length-1),Q.defineProperty(s,i,l))},t._inited=!1,t.handlerO=null,t.ALL="ALL",t.countDic={},t.fromMe=!1,t.hookClassDic={},t.infoDic={},n(t,["noDisplayKeys",function(){return this.noDisplayKeys={conchModel:!0}}])}(),function(){function t(){}return o(t,"laya.debug.tools.hook.FunHook"),t.hook=function(e,i,n,o){t.hookFuns(e,i,[n,e[i],o],1)},t.hookAllFun=function(e){var i,n;n=Q.getOwnPropertyNames(e);for(i in n)i=n[i],t.special[i]||(console.log("try hook:",i),"function"==typeof e[i]&&(console.log("hook:",i),t.hookFuns(e,i,[t.getTraceMsg("call:"+i),e[i]],1)));e.__proto__?t.hookAllFun(e.__proto__):console.log("end:",e)},t.getTraceMsg=function(t){return function(){console.log(t)}},t.hookFuns=function(t,e,i,n){void 0===n&&(n=-1);var o,r=t[e];(o=function(t){var e,o=arguments,r=0,a=0;for(a=i.length,r=0;r<a;r++)i[r]&&(r==n?e=i[r].apply(this,o):i[r].apply(this,o));return e}).pre=r,t[e]=o},t.removeHook=function(t,e){null!=t[e].pre&&(t[e]=t[e].pre)},t.debugHere=function(){},t.traceLoc=function(t,e){void 0===t&&(t=0),void 0===e&&(e=""),console.log(e,"fun loc:",Dt.getCallLoc(3+t))},t.getLocFun=function(e,i){void 0===e&&(e=0),void 0===i&&(i=""),e+=1;return function(){t.traceLoc(e,i)}},n(t,["special",function(){return this.special={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0,is:!0,isExtensible:!0,isFrozen:!0,isSealed:!0,preventExtensions:!0,seal:!0,unobserve:!0,apply:!0,call:!0,bind:!0,freeze:!0,unobserve:!0}}]),t}()),ft=function(){function t(){}return o(t,"laya.debug.tools.hook.VarHook"),t.hookVar=function(t,e,i,n){i||(i=[]),n||(n=[]);var o,r=t,a=t[e],s={},l=function(t){console.log("var hook set "+e+":",t),a=t},h=function(){return console.log("var hook get"+e+":",a),a};if(o=Q.getOwnPropertyDescriptor(t,e))return s.set=l,s.get=h,s.enumerable=o.enumerable,i.push(s.set),n.push(s.get),pt.hookFuns(s,"set",i),pt.hookFuns(s,"get",n,n.length-1),void Q.defineProperty(t,e,s);for(;!o&&t.__proto__;)t=t.__proto__,o=Q.getOwnPropertyDescriptor(t,e);o&&(s.set=o.set?o.set:l,s.get=o.get?o.get:h,s.enumerable=o.enumerable,i.push(s.set),n.push(s.get),pt.hookFuns(s,"set",i),pt.hookFuns(s,"get",n,n.length-1),Q.defineProperty(r,e,s)),o||(console.log("get des fail add directly"),s.set=l,s.get=h,i.push(s.set),n.push(s.get),pt.hookFuns(s,"set",i),pt.hookFuns(s,"get",n,n.length-1),Q.defineProperty(t,e,s))},t.getLocFun=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),e+=1;return function(){pt.traceLoc(e,t)}},t}(),gt=function(){function t(){this.tID=1}o(t,"laya.debug.tools.IDTools");return t.prototype.getID=function(){return this.tID++},t.getAID=function(){return t._ID.getID()},t.idObjE=function(e,i){return void 0===i&&(i="default"),e._M_id_?e:(i||(i="default"),t._idDic[i]||(t._idDic[i]=new t),e._M_id_=t._idDic[i].getAID(),e)},t.setObjID=function(t,e){return t._M_id_=e,t},t.idObj=function(e){return e._M_id_?e:(e._M_id_=t.getAID(),e)},t.getObjID=function(t){return t?t._M_id_:-1},t.idSign="_M_id_",n(t,["_ID",function(){return this._ID=new t},"_idDic",function(){return this._idDic={default:new t}}]),t}(),_t=(function(){function t(){}o(t,"laya.debug.tools.JsonTool"),t.getJsonString=function(e,i,n,o,r){void 0===i&&(i=!0),void 0===n&&(n="\n"),void 0===o&&(o=0),void 0===r&&(r=4);var a="";a=t.getEmptyStr(o*r);var s;s={};var l,h,u;u=[];for(l in e)u.push(l),h=e[l],t.singleLineKey[l]?s[l]=t.getValueStr(h,!0,n,o+1,r):s[l]=t.getValueStr(h,i,n,o+1,r);var c=0,d=0;d=u.length,u.sort(),u=u.reverse();var p;p=t.getEmptyStr((o+1)*r),i&&(n="",a="",p="");var f;for(f=[],c=0;c<d;c++)l=u[c],f.push(p+t.wrapValue(l)+":"+s[l]);return"{"+n+f.join(","+n)+n+a+"}"},t.wrapValue=function(t,e){return void 0===e&&(e='"'),e+t+e},t.getArrStr=function(e,i,n,o,r){void 0===i&&(i=!0),void 0===n&&(n="\n"),void 0===o&&(o=0),void 0===r&&(r=4);var a=0,s=0;s=e.length;var l;for(l=[],a=0;a<s;a++)l.push(t.getValueStr(e[a],i,n,o+1,r));var h="";return h=t.getEmptyStr((o+1)*r),i&&(n="",h=""),"["+n+h+l.join(","+n+h)+"]"},t.quote=function(e){return t.escapable.lastIndex=0,t.escapable.test(e)?'"'+e.replace(t.escapable,function(e){var i=t.meta[e];return"string"==typeof i?i:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},t.getValueStr=function(e,i,n,o,r){void 0===i&&(i=!0),void 0===n&&(n="\n"),void 0===o&&(o=0),void 0===r&&(r=0);return"string"==typeof e?t.quote(e):null==e?"null":"number"==typeof e||"number"==typeof e&&Math.floor(e)==e||"boolean"==typeof e?e:e instanceof Array?t.getArrStr(e,i,n,o,r):"object"==typeof e?t.getJsonString(e,i,n,o,r):e},t.getEmptyStr=function(e){if(!t.emptyDic.hasOwnProperty(e)){var i=0,n=0;n=e;var o;for(o="",i=0;i<n;i++)o+=" ";t.emptyDic[e]=o}return t.emptyDic[e]},t.emptyDic={},n(t,["singleLineKey",function(){return this.singleLineKey={props:!0}},"escapable",function(){return this.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g},"meta",function(){return this.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}])}(),function(){function t(){}return o(t,"laya.debug.tools.JSTools"),t.showToBody=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),s.document.body.appendChild(t);var n;(n=t.style).position="absolute",n.top=i+"px",n.left=e+"px"},t.showToParent=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),n.appendChild(t);var o;(o=t.style).position="absolute",o.top=i+"px",o.left=e+"px"},t.addToBody=function(t){s.document.body.appendChild(t)},t.setPos=function(t,e,i){var n;(n=t.style).top=i+"px",n.left=e+"px"},t.setSize=function(t,e,i){var n;(n=t.style).width=e+"px",n.height=i+"px"},t.setTransform=function(t,e){var i;(i=t.style).transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.transform=i.webkitTransform=i.msTransform=i.mozTransform=i.oTransform="matrix("+e.toString()+")"},t.noMouseEvent=function(t){t.style["pointer-events"]="none"},t.setMouseEnable=function(t,e){t.style["pointer-events"]=e?"auto":"none"},t.setZIndex=function(t,e){t.style["z-index"]=e},t.showAboveSprite=function(e,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a;a=new T,(a=n.localToGlobal(a)).x+=o,a.y+=r,a.x+=i.stage.offset.x,a.y+=i.stage.offset.y,t.showToBody(e,a.x,a.y)},t.removeElement=function(t){s.removeElement(t)},t.isElementInDom=function(t){return t&&t.parentNode},t.getImageSpriteByFile=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;(n=new FileReader).readAsDataURL(t);var o;return o=new G,n.onload=function(t){var r;(r=new k).load(n.result),o.graphics.drawTexture(r,0,0,e,i)},o},t.getPixelRatio=function(){if(t._pixelRatio>0)return t._pixelRatio;var e=s.createElement("canvas").getContext("2d"),i=(s.window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);return console.log("pixelRatioc:",i),t._pixelRatio=i,i},t._pixelRatio=-1,t}()),mt=function(){function t(){this.data=null,this._items=null,this.layoutFun=null,this._sX=0,this._width=0}o(t,"laya.debug.tools.layout.Layouter");var e=t.prototype;return e.layout=function(){this.layoutFun(this._width,this._items,this.data,this._sX)},e.changed=function(){i.timer.callLater(this,this.layout)},e.calSize=function(){var t,e=0,i=0;t=this.items[0],this._sX=t.x;var n=NaN;for(n=this._sX+t.width,i=this.items.length,e=1;e<i;e++)t=this.items[e],this._sX>t.x&&(this._sX=t.x),n<t.x+t.width&&(n=t.x+t.width);this._width=n-this._sX},r(0,e,"width",function(){return this._width},function(t){this._width=t,this.changed()}),r(0,e,"x",function(){return this._sX},function(t){this._sX=t,this.changed()}),r(0,e,"items",function(){return this._items},function(t){this._items=t,this.calSize()}),t}(),yt=(function(){function t(){}o(t,"laya.debug.tools.layout.LayoutFuns"),t.sameWidth=function(t,e,i,n){void 0===n&&(n=0);var o=0;i&&i.dWidth&&(o=i.dWidth);var r=NaN;r=(t-(e.length-1)*o)/e.length;var a,s=0,l=0,h=NaN;for(h=n,l=e.length,s=0;s<l;s++)(a=e[s]).x=h,a.width=r,h+=o+r},t.getSameWidthLayout=function(e,i){var n;return n={},n.dWidth=i,t.getLayouter(e,n,laya.debug.tools.layout.LayoutFuns.sameWidth)},t.getLayouter=function(t,e,i){var n;return n=new mt,n.items=t,n.data=e,n.layoutFun=i,n},t.sameDis=function(e,i,n,o){void 0===o&&(o=0);var r=NaN;r=e;var a,s=0,l=0;for(l=i.length,t.prepareForLayoutWidth(e,i),s=0;s<l;s++)r-=(a=i[s]).width;i.length>1&&(r/=i.length-1);var h=NaN;for(h=o,l=i.length,s=0;s<l;s++)(a=i[s]).x=h,h+=r+a.width},t.getSameDisLayout=function(e,i){void 0===i&&(i=!1);var n;if(n={},i){var o=0,r=0;r=e.length;var a,s=NaN;for(s=0,o=0;o<r;o++)s+=(a=e[o]).width;for(s=a.x+a.width,o=0;o<r;o++)a=e[o],t.setItemRate(a,a.width/s)}return t.getLayouter(e,n,laya.debug.tools.layout.LayoutFuns.sameDis)},t.fullFill=function(t,e,i,n){void 0===n&&(n=0);var o=0,r=0;i&&(i.dL&&(o=i.dL),i.dR&&(r=i.dR));var a,s=0,l=0;for(l=e.length,s=0;s<l;s++)(a=e[s]).x=n+o,a.width=t-o-r},t.getFullFillLayout=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o;return o={},o.dL=i,o.dR=n,t.getLayouter(e,o,laya.debug.tools.layout.LayoutFuns.fullFill)},t.fixPos=function(t,e,i,n){void 0===n&&(n=0);var o=0,r=[],a=!1;i&&(i.dLen&&(o=i.dLen),i.poss&&(r=i.poss),i.isRate&&(a=i.isRate));var s,l=0,h=0;h=r.length;var u,c=NaN;for(u=null,l=0;l<h;l++)s=e[l],c=n+r[l],a&&(c=n+r[l]*t),s.x=c,u&&(u.width=s.x-o-u.x),u=s;var d;(d=e[e.length-1]).width=n+t-o-d.x},t.getFixPos=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=!1);var r,a,s=0,l=0,h=NaN,u=NaN;if(h=(a=t.getLayouter(e,r={},t.fixPos)).x,u=a.width,!o){o=[],l=e.length;var c=NaN;for(s=0;s<l;s++)c=e[s].x-h,n&&(c/=u),o.push(c)}return r.dLen=i,r.poss=o,r.isRate=n,a},t.clearItemsRelativeInfo=function(e){var i=0,n=0;for(n=e.length,i=0;i<n;i++)t.clearItemRelativeInfo(e[i])},t.clearItemRelativeInfo=function(t){t.getLayout().left="NaN",t.getLayout().right="NaN"},t.prepareForLayoutWidth=function(e,i){var n=0,o=0;for(o=i.length,n=0;n<o;n++)t.prepareItemForLayoutWidth(e,i[n])},t.getSumWidth=function(t){var e=NaN;e=0;var i=0,n=0;for(n=t.length,i=0;i<n;i++)e+=t[i].width;return e},t.prepareItemForLayoutWidth=function(e,i){t.getItemRate(i)>0&&(i.width=e*t.getItemRate(i))},t.setItemRate=function(t,e){t.layoutRate=e},t.getItemRate=function(t){return t.layoutRate?t.layoutRate:-1},t.setItemFreeSize=function(t,e){void 0===e&&(e=!0),t.layoutFreeSize=e},t.isItemFreeSize=function(t){return t.layoutFreeSize},t.lockedDis=function(e,i,n,o){void 0===o&&(o=0);var r;r=n.dists;var a=NaN;a=n.sumDis;var s,l,h=0,u=0;t.prepareForLayoutWidth(e,i);var c=NaN;c=e-a-t.getSumWidth(i);var d;for((d=t.getFreeItem(i))&&(d.width+=c),(l=i[0]).x=o,u=i.length,h=1;h<u;h++)(s=i[h]).x=l.x+l.width+r[h-1],l=s},t.getFreeItem=function(e){var i=0,n=0;for(n=e.length,i=0;i<n;i++)if(t.isItemFreeSize(e[i]))return e[i];return null},t.getLockedDis=function(e){var i;i={};var n,o,r,a=0,s=0,l=NaN;l=0;var h=NaN;for(r=e[0],n=[],s=e.length,a=1;a<s;a++)h=(o=e[a]).x-r.x-r.width,n.push(h),l+=h,r=o;return i.dists=n,i.sumDis=l,t.getLayouter(e,i,laya.debug.tools.layout.LayoutFuns.lockedDis)},t.RateSign="layoutRate",t.FreeSizeSign="layoutFreeSize"}(),function(){function t(){}o(t,"laya.debug.tools.LayoutTools"),t.layoutToXCount=function(t,e,i,n,o,r){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var a,s=NaN,l=NaN,h=0,u=0,c=0,d=0;for(c=0,d=0,s=o,l=r,u=t.length,h=0;h<u;h++)(a=t[h]).x=s,a.y=l,a.height>d&&(d=a.height),++c>=e?(c%=e,a.y+=d+n,d=0):s+=a.width+i},t.layoutToWidth=function(t,e,i,n,o,r){var a,s=NaN,l=NaN,h=0,u=0;for(s=o,l=r,u=t.length,h=0;h<u;h++)s+(a=t[h]).width+i>e&&(s=o,l+=n+a.height),a.x=s,a.y=l,s+=i+a.width}}(),function(){function t(){}return o(t,"laya.debug.tools.MathTools"),t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o;return o=i?n?t.sortNumBigFirst:t.sortBigFirst:n?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return o(t[e],i[e])}},t}()),vt=function(){function t(){}return o(t,"laya.debug.tools.MouseEventAnalyser"),t.analyseNode=function(e){Z.showDisBound(e,!0);var n;n=e,It.clearObj(t.infoO),It.clearObj(t.nodeO),It.clearObj(t.hitO);var o;for(o=[];e;)gt.idObj(e),t.nodeO[gt.getObjID(e)]=e,o.push(e),e=e.parent;t.check(i.stage,i.stage.mouseX,i.stage.mouseY,null);var r;t.hitO[gt.getObjID(n)]?(console.log("can hit"),r="can hit"):(console.log("can't hit"),r="can't hit");var a=0,s=0;s=(o=o.reverse()).length;var l;for(l=["[分析对象]:"+Q.getNodeClassAndName(n)+":"+r],a=0;a<s;a++)e=o[a],t.hitO[gt.getObjID(e)]?(console.log("can hit:",Q.getNodeClassAndName(e)),console.log("原因:",t.infoO[gt.getObjID(e)]),l.push("can hit: "+Q.getNodeClassAndName(e)),l.push("原因: "+t.infoO[gt.getObjID(e)])):(console.log("can't hit:"+Q.getNodeClassAndName(e)),console.log("原因:",t.infoO[gt.getObjID(e)]?t.infoO[gt.getObjID(e)]:"鼠标事件在父级已停止派发"),l.push("can't hit: "+Q.getNodeClassAndName(e)),l.push("原因: "+(t.infoO[gt.getObjID(e)]?t.infoO[gt.getObjID(e)]:"鼠标事件在父级已停止派发")));var h;h=l.join("\n"),zt.I.showTxtInfo(h)},t.check=function(e,i,n,o){gt.idObj(e);var r=!1;r=t.nodeO[gt.getObjID(e)],t._point.setTo(i,n),e.fromParentPoint(t._point),i=t._point.x,n=t._point.y;var a=e.scrollRect;if(a){t._rect.setTo(a.x,a.y,a.width,a.height);var s=t._rect.contains(i,n);if(!s)return r&&(t.infoO[gt.getObjID(e)]="scrollRect没有包含鼠标"+t._rect.toString()+":"+i+","+n),!1}var l,h=0,u=0;u=(l=e._childs).length;var c,d;for(d=null,h=0;h<u;h++)if(c=l[h],gt.idObj(c),t.nodeO[gt.getObjID(c)]){d=c;break}var p=!1;p=!!d;if(e.hitTestPrior&&!e.mouseThrough&&!t.hitTest(e,i,n))return t.infoO[gt.getObjID(e)]="hitTestPrior=true，宽高区域不包含鼠标::"+i+","+n+" size:"+e.width+","+e.height,!1;for(h=e._childs.length-1;h>-1;h--)if((c=e._childs[h])==d&&(d.mouseEnabled||(t.infoO[gt.getObjID(d)]="mouseEnabled=false"),d.visible||(t.infoO[gt.getObjID(d)]="visible=false"),p=!1),c.mouseEnabled&&c.visible){if(t.check(c,i,n,o))return t.hitO[gt.getObjID(e)]=!0,t.infoO[gt.getObjID(e)]="子对象被击中",c==d?t.infoO[gt.getObjID(e)]="子对象被击中,击中对象在分析链中":(t.infoO[gt.getObjID(e)]="子对象被击中,击中对象不在分析链中",p&&(t.infoO[gt.getObjID(d)]="被兄弟节点挡住,兄弟节点信息:"+Q.getNodeClassAndName(c)+","+c.getBounds().toString(),Z.showDisBound(c,!1,"#ffff00"))),!0;c==d&&(p=!1)}var f=new L,g=!1;if(g=e.getGraphicBounds().contains(i,n),e.width>0&&e.height>0){var _=t._rect;e.mouseThrough?(s=g,f.copyFrom(e.getGraphicBounds())):(e.hitArea?_=e.hitArea:_.setTo(0,0,e.width,e.height),f.copyFrom(_),s=_.contains(i,n)),s&&(t.hitO[gt.getObjID(e)]=!0)}return t.infoO[gt.getObjID(e)]=s?"自身区域被击中":g?"子对象未包含鼠标，实际绘图区域包含鼠标，设置的宽高区域不包含鼠标::"+i+","+n+" hitRec:"+f.toString()+" graphicBounds:"+e.getGraphicBounds().toString()+"，设置mouseThrough=true或将宽高设置到实际绘图区域可解决问题":"子对象未包含鼠标，实际绘图区域不包含鼠标，设置的宽高区域不包含鼠标::"+i+","+n+" hitRec:"+f.toString()+" graphicBounds:"+e.getGraphicBounds().toString(),s},t.hitTest=function(e,i,n){var o=!1;if(e.hitArea instanceof laya.utils.HitArea)return e.hitArea.isHit(i,n);if(e.width>0&&e.height>0||e.mouseThrough||e.hitArea){var r=t._rect;e.mouseThrough?o=e.getGraphicBounds().contains(i,n):(e.hitArea?r=e.hitArea:r.setTo(0,0,e.width,e.height),o=r.contains(i,n))}return o},t.infoO={},t.nodeO={},t.hitO={},n(t,["_matrix",function(){return this._matrix=new S},"_point",function(){return this._point=new T},"_rect",function(){return this._rect=new L}]),t}(),It=function(){function t(){}return o(t,"laya.debug.tools.ObjectTools"),t.getFlatKey=function(e,i){return""==e?i:e+t.sign+i},t.flatObj=function(e,i,n){void 0===n&&(n=""),i=i||{};var o;for(o in e)"object"==typeof e[o]?t.flatObj(e[o],i,t.getFlatKey(n,o)):(e[o],i[t.getFlatKey(n,o)]=e[o]);return i},t.recoverObj=function(e){var i,n={};for(i in e)t.setKeyValue(n,i,e[i]);return n},t.differ=function(e,i){var n;e=t.flatObj(e),i=t.flatObj(i);var o={};for(n in e)i.hasOwnProperty(n)||(o[n]="被删除");for(n in i)i[n]!=e[n]&&(o[n]={pre:e[n],now:i[n]});return o},t.traceDifferObj=function(t){var e,i;for(e in t)"string"==typeof t[e]?console.log(e+":",t[e]):(i=t[e],console.log(e+":","now:",i.now,"pre:",i.pre))},t.setKeyValue=function(e,i,n){if(i.indexOf(t.sign)>=0){for(var o,r=i.split(t.sign);r.length>1;)if(o=r.shift(),e[o]||(e[o]={},console.log("addKeyObj:",o)),!(e=e[o]))return void console.log("wrong flatKey:",i);e[r.shift()]=n}else e[i]=n},t.clearObj=function(t){var e;for(e in t)delete t[e]},t.copyObjFast=function(t){var e;return e=laya.debug.tools.ObjectTools.getJsonString(t),laya.debug.tools.ObjectTools.getObj(e)},t.copyObj=function(e){if(e instanceof Array)return t.copyArr(e);var i,n={};for(i in e)null===e[i]||void 0===e[i]?n[i]=e[i]:e[i]instanceof Array?n[i]=t.copyArr(e[i]):"object"==typeof e[i]?n[i]=t.copyObj(e[i]):n[i]=e[i];return n},t.copyArr=function(e){var i;i=[];var n=0,o=0;for(o=e.length,n=0;n<o;n++)i.push(t.copyObj(e[n]));return i},t.concatArr=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;i<n;i++)t.push(e[i]);return t},t.insertArrToArr=function(t,e,i){void 0===i&&(i=0),i<0&&(i=0),i>t.length&&(i=t.length);t.length;var n=0,o=0;t.length+=e.length;var r=0;for(r=e.length,n=t.length-1;n>=i;n--)t[n]=t[n-r];for(o=e.length,n=0;n<o;n++)t[i+n]=e[n];return t},t.clearArr=function(t){return t?(t.length=0,t):t},t.removeFromArr=function(t,e){var i=0,n=0;for(n=t.length,i=0;i<n;i++)if(t[i]==e)return void t[i].splice(i,1)},t.setValueArr=function(e,i){return e||(e=[]),e.length=0,t.concatArr(e,i)},t.getFrom=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;n<i;n++)t.push(e.pop());return t},t.enableDisplayTree=function(t){for(;t;)t.mouseEnabled=!0,t=t.parent},t.getJsonString=function(t){return JSON.stringify(t)},t.getObj=function(t){return JSON.parse(t)},t.getKeyArr=function(t){var e,i;e=[];for(i in t)e.push(i);return e},t.getObjValues=function(t,e){var i,n=0,o=0;for(o=t.length,i=[],n=0;n<o;n++)i.push(t[n][e]);return i},t.hasKeys=function(t,e){var i=0,n=0;for(n=e.length,i=0;i<n;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0},t.copyValueByArr=function(t,e,i){var n=0,o=i.length;for(n=0;n<o;n++)null!==e[i[n]]&&(t[i[n]]=e[i[n]])},t.getNoSameArr=function(t){var e,i=0,n=0;e=[];var o;for(n=t.length,i=0;i<n;i++)o=t[i],e.indexOf(o)<0&&e.push(o);return e},t.insertValue=function(t,e){var i;for(i in e)t[i]=e[i]},t.replaceValue=function(e,i){var n;for(n in e)i.hasOwnProperty(e[n])&&(e[n]=i[e[n]]),"object"==typeof e[n]&&t.replaceValue(e[n],i)},t.setKeyValues=function(t,e,i){var n=0,o=0;for(o=t.length,n=0;n<o;n++)t[n][e]=i},t.findItemPos=function(t,e,i){var n=0,o=0;for(o=t.length,n=0;n<o;n++)if(t[n][e]==i)return n;return-1},t.setObjValue=function(t,e,i){return t[e]=i,t},t.setAutoTypeValue=function(e,i,n){return e.hasOwnProperty(i)&&t.isNumber(e[i])?e[i]=parseFloat(n):e[i]=n,e},t.getAutoValue=function(t){var e=parseFloat(t);return"string"==typeof t&&e+""===Lt.trimSide(t)?e:t},t.isNumber=function(t){return parseFloat(t)==t},t.isNaNS=function(t){return"NaN"==t.toString()},t.isNaN=function(t){return"number"!=typeof t&&("string"!=typeof t||"NaN"==parseFloat(t).toString()||parseFloat(t)!=t)},t.getStrTypedValue=function(e){return"false"!=e&&("true"==e||("null"==e?null:"undefined"==e?null:t.getAutoValue(e)))},t.createKeyValueDic=function(t,e){var i;i={};var n=0,o=0;o=t.length;var r;for(n=0;n<o;n++)i[(r=t[n])[e]]=r;return i},t.sign="_",t}(),wt=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.resultNodeDic={}}o(t,"laya.debug.tools.ObjTimeCountTool");var e=t.prototype;return e.addTime=function(t,e){gt.idObj(t);var i=0;i=gt.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){gt.idObj(t);var e=0;return e=gt.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){gt.idObj(t);var e=0;return e=gt.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;It.clearObj(this.nodeDic)},e.updates=function(){It.clearObj(this.resultDic),It.insertValue(this.resultDic,this.timeDic),It.clearObj(this.resultCountDic),It.insertValue(this.resultCountDic,this.countDic),It.insertValue(this.resultNodeDic,this.nodeDic),this.reset()},t}(),bt=function(){function t(){this.oX=0,this.oY=0,this.hX=1,this.hY=0,this.vX=0,this.vY=1}o(t,"laya.debug.tools.RecInfo");var e=t.prototype;return e.initByPoints=function(t,e,i){this.oX=t.x,this.oY=t.y,this.hX=e.x,this.hY=e.y,this.vX=i.x,this.vY=i.y},r(0,e,"rotation",function(){return this.rotationRad/Math.PI*180}),r(0,e,"width",function(){return Math.sqrt((this.hX-this.oX)*(this.hX-this.oX)+(this.hY-this.oY)*(this.hY-this.oY))}),r(0,e,"x",function(){return this.oX}),r(0,e,"rotationRadV",function(){var t=this.vX-this.oX,e=this.vY-this.oY;return Math.atan2(e,t)}),r(0,e,"y",function(){return this.oY}),r(0,e,"rotationRad",function(){var t=this.hX-this.oX,e=this.hY-this.oY;return Math.atan2(e,t)}),r(0,e,"height",function(){return Math.sqrt((this.vX-this.oX)*(this.vX-this.oX)+(this.vY-this.oY)*(this.vY-this.oY))}),r(0,e,"rotationV",function(){return this.rotationRadV/Math.PI*180}),t.createByPoints=function(e,i,n){var o;return(o=new t).initByPoints(e,i,n),o},t.getGlobalPoints=function(t,e,i){return t.localToGlobal(new T(e,i))},t.getGlobalRecInfo=function(e,i,n,o,r,a,s){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=1),t.createByPoints(t.getGlobalPoints(e,i,n),t.getGlobalPoints(e,o,r),t.getGlobalPoints(e,a,s))},t}(),Ct=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.isWorking=!1,this.working=!0}o(t,"laya.debug.tools.RenderAnalyser");var e=t.prototype;return e.render=function(t,e){this.addTime(t,e)},e.addTime=function(t,e){gt.idObj(t);var i=0;i=gt.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){gt.idObj(t);var e=0;return e=gt.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){gt.idObj(t);var e=0;return e=gt.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;It.clearObj(this.nodeDic)},e.updates=function(){It.clearObj(this.resultDic),It.insertValue(this.resultDic,this.timeDic),It.clearObj(this.resultCountDic),It.insertValue(this.resultCountDic,this.countDic),this.reset()},r(0,e,"working",null,function(t){this.isWorking=t,t?i.timer.loop(At.RenderCostMaxTime,this,this.updates):i.timer.clear(this,this.updates)}),n(t,["I",function(){return this.I=new t}]),t}(),St=function(){function t(){}return o(t,"laya.debug.tools.resizer.DisResizer"),t.init=function(){t._up||((t._up=new Jt("T")).height=2,t._up.type=0,(t._down=new Jt("T")).height=2,t._down.type=0,(t._left=new Jt("R")).width=2,t._left.type=1,(t._right=new Jt("R")).width=2,t._right.type=1,t._barList=[t._up,t._down,t._left,t._right],t.addEvent())},t.stageDown=function(e){var i;i=e.target,t._tar&&at.isInTree(t._tar,i)||t.clear()},t.clear=function(){t._tar=null,i.stage.off("mouseup",null,t.stageDown),at.removeItems(t._barList),t.clearDragEvents()},t.addEvent=function(){var e=0,i=0;for(i=t._barList.length,e=0;e<i;e++)t._barList[e].on("mousedown",null,t.barDown)},t.barDown=function(e){if(t.clearDragEvents(),t.tBar=e.target){var i;i=new L,0==t.tBar.type?(i.x=t.tBar.x,i.width=0,i.y=t.tBar.y-200,i.height=400):(i.x=t.tBar.x-200,i.width=400,i.y=0,i.height=0);({}).area=i,t.tBar.record(),t.tBar.startDrag(i),t.tBar.on("dragmove",null,t.draging),t.tBar.on("dragend",null,t.dragEnd)}},t.draging=function(e){if(console.log("draging"),t.tBar&&t._tar){switch(t.tBar){case t._left:t._tar.x+=t.tBar.getDx(),t._tar.width-=t.tBar.getDx(),t._up.width-=t.tBar.getDx(),t._down.width-=t.tBar.getDx(),t._right.x-=t.tBar.getDx(),t.tBar.x-=t.tBar.getDx();break;case t._right:t._tar.width+=t.tBar.getDx(),t._up.width+=t.tBar.getDx(),t._down.width+=t.tBar.getDx();break;case t._up:t._tar.y+=t.tBar.getDy(),t._tar.height-=t.tBar.getDy(),t._right.height-=t.tBar.getDy(),t._left.height-=t.tBar.getDy(),t._down.y-=t.tBar.getDy(),t.tBar.y-=t.tBar.getDy();break;case t._down:t._tar.height+=t.tBar.getDy(),t._right.height+=t.tBar.getDy(),t._left.height+=t.tBar.getDy()}t.tBar.record()}},t.dragEnd=function(e){console.log("dragEnd"),t.clearDragEvents(),t.updates()},t.clearDragEvents=function(){t.tBar&&(t.tBar.off("dragmove",null,t.draging),t.tBar.off("dragend",null,t.dragEnd))},t.setUp=function(e,n){void 0===n&&(n=!1),n&&e==t._tar||(at.removeItems(t._barList),(t._tar!=e||(t._tar=null,t.clearDragEvents(),n))&&(t._tar=e,t.updates(),at.addItems(t._barList,e),i.stage.off("mouseup",null,t.stageDown),i.stage.on("mouseup",null,t.stageDown)))},t.updates=function(){var e;if(e=t._tar){var i;i=new L(0,0,e.width,e.height),t._up.x=i.x,t._up.y=i.y,t._up.width=i.width,t._down.x=i.x,t._down.y=i.y+i.height-2,t._down.width=i.width,t._left.x=i.x,t._left.y=i.y,t._left.height=i.height,t._right.x=i.x+i.width-2,t._right.y=i.y,t._right.height=i.height}},t.Side=2,t.Vertical=1,t.Horizon=0,t._up=null,t._down=null,t._left=null,t._right=null,t._barList=null,t._tar=null,t.barWidth=2,t.useGetBounds=!1,t.tBar=null,t}(),xt=function(){function t(){}return o(t,"laya.debug.tools.resizer.SimpleResizer"),t.setResizeAble=function(e,i,n,o){void 0===n&&(n=150),void 0===o&&(o=150),e.on("mousedown",null,t.onMouseDown,[i,n,o])},t.onMouseDown=function(e,n,o,r){if(t.clearEvents(),e){t.preMousePoint.setTo(i.stage.mouseX,i.stage.mouseY),t.preTarSize.setTo(e.width,e.height),t.preScale.setTo(1,1);var a;for(a=e;a&&a!=i.stage;)t.preScale.x*=a.scaleX,t.preScale.y*=a.scaleY,a=a.parent;i.stage.on("mouseup",null,t.onMouseMoveEnd),i.timer.loop(100,null,t.onMouseMoving,[e,n,o])}},t.onMouseMoving=function(e,n,o,r){var a=(i.stage.mouseX-t.preMousePoint.x)/t.preScale.x+t.preTarSize.x,s=(i.stage.mouseY-t.preMousePoint.y)/t.preScale.y+t.preTarSize.y;e.width=a>n?a:n,e.height=s>o?s:o},t.onMouseMoveEnd=function(e){t.clearEvents()},t.clearEvents=function(){i.timer.clear(null,t.onMouseMoving),i.stage.off("mouseup",null,t.onMouseMoveEnd)},n(t,["preMousePoint",function(){return this.preMousePoint=new T},"preTarSize",function(){return this.preTarSize=new T},"preScale",function(){return this.preScale=new T}]),t}(),Tt=function(){function t(){}return o(t,"laya.debug.tools.ResTools"),t.getCachedResList=function(){return D.isWebGL?t.getWebGlResList():t.getCanvasResList()},t.getWebGlResList=function(){var t;t=[];var e,i;i=P.currentResourceManager._resources;for(var n=0;n<i.length;n++)if(e=i[n],"WebGLImage"==Q.getClassName(e)){var o=e.src;o&&o.indexOf("data:image/png;base64")<0&&t.push(o)}return t},t.getCanvasResList=function(){var e;e={};var i;return i=I.loadedMap,t.collectPics(i,e),t.getArrFromDic(e)},t.getArrFromDic=function(t){var e,i;i=[];for(e in t)i.push(e);return i},t.collectPics=function(t,e){if(t){var i,n;for(i in t)if((n=t[i])&&n.bitmap&&n.bitmap.src){n.bitmap.src.indexOf("data:image/png;base64")<0&&(e[n.bitmap.src]=!0)}}},t}(),Mt=function(){function t(){}return o(t,"laya.debug.tools.RunProfile"),t.run=function(e,i){void 0===i&&(i=3);var n;t.infoDic.hasOwnProperty(e)||(t.infoDic[e]=new tt),n=t.infoDic[e];var o;o=Dt.getCallLoc(i)+"\n"+Dt.getCallStack(1,i-3),n.add(o),t._runShowDic[e]&&(console.log("Create:"+e),console.log(o))},t.showClassCreate=function(e){t._runShowDic[e]=!0},t.hideClassCreate=function(e){t._runShowDic[e]=!1},t.getRunInfo=function(e){return t.infoDic[e],t.infoDic[e]},t.runTest=function(t,e,i){void 0===i&&(i="runTest"),lt.timeStart(i);var n=0;for(n=0;n<e;n++)t();lt.timeEnd(i)},t.runTest2=function(t,e,i){void 0===i&&(i="runTest");var n=NaN;n=s.now();var o=0;for(o=0;o<e;o++)t();return s.now()-n},t.infoDic={},t._runShowDic={},t}(),Lt=(function(){function t(){this._objDic={}}o(t,"laya.debug.tools.SingleTool");var e=t.prototype;e.getArr=function(t){var e;return(e=this.getTypeDic("Array"))[t]||(e[t]=[]),e[t]},e.getObject=function(t){var e;return(e=this.getTypeDic("Object"))[t]||(e[t]={}),e[t]},e.getByClass=function(t,e,i){var n;return(n=this.getTypeDic(e))[t]||(n[t]=new i),n[t]},e.getTypeDic=function(t){return this._objDic[t]||(this._objDic[t]={}),this._objDic[t]},n(t,["I",function(){return this.I=new t}])}(),function(){function t(){}return o(t,"laya.debug.tools.StringTool"),t.toUpCase=function(t){return t.toUpperCase()},t.toLowCase=function(t){return t.toLowerCase()},t.toUpHead=function(t){return t.length<=1?t.toUpperCase():t.charAt(0).toUpperCase()+t.substr(1)},t.toLowHead=function(t){return t.length<=1?t.toLowerCase():t.charAt(0).toLowerCase()+t.substr(1)},t.packageToFolderPath=function(t){return t.replace(".","/")},t.insert=function(t,e,i){return t.substring(0,i)+e+t.substr(i)},t.insertAfter=function(e,i,n,o){void 0===o&&(o=!1);var r=0;return(r=o?e.lastIndexOf(n):e.indexOf(n))>=0?t.insert(e,i,r+n.length):e},t.insertBefore=function(e,i,n,o){void 0===o&&(o=!1);var r=0;return(r=o?e.lastIndexOf(n):e.indexOf(n))>=0?t.insert(e,i,r):e},t.insertParamToFun=function(e,i){var n;n=t.getParamArr(e);var o;return o=i.join(","),n.length>0&&(o=","+o),t.insertBefore(e,o,")",!0)},t.trim=function(e,i){i||(i=[" ","\r","\n","\t",String.fromCharCode(65279)]);var n,o=0,r=0;for(n=e,r=i.length,o=0;o<r;o++)n=t.getReplace(n,i[o],"");return n},t.isEmpty=function(e){return e.length<1||t.emptyStrDic.hasOwnProperty(e)},t.trimLeft=function(e){var i=0;i=0;var n=0;for(n=e.length;t.isEmpty(e.charAt(i))&&i<n;)i++;return i<n?e.substr(i):""},t.trimRight=function(e){var i=0;for(i=e.length-1;t.isEmpty(e.charAt(i))&&i>=0;)i--;return e.substring(0,i),i>=0?e.substring(0,i+1):""},t.trimSide=function(e){var i;return i=t.trimLeft(e),i=t.trimRight(i)},t.isOkFileName=function(e){if(""==laya.debug.tools.StringTool.trimSide(e))return!1;var i=0,n=0;for(n=e.length,i=0;i<n;i++)if(t.specialChars[e.charAt(i)])return!1;return!0},t.trimButEmpty=function(e){return t.trim(e,["\r","\n","\t"])},t.removeEmptyStr=function(e){var i,n=0;for(n=n=e.length-1;n>=0;n--)i=e[n],i=laya.debug.tools.StringTool.trimSide(i),t.isEmpty(i)?e.splice(n,1):e[n]=i;return e},t.ifNoAddToTail=function(t,e){return t.indexOf(e)>=0?t:t+e},t.trimEmptyLine=function(e){var i,n,o=0;for(o=(i=e.split("\n")).length-1;o>=0;o--)n=i[o],t.isEmptyLine(n)&&i.splice(o,1);return i.join("\n")},t.isEmptyLine=function(t){return""==(t=laya.debug.tools.StringTool.trim(t))},t.removeCommentLine=function(e){var i;i=[];var n,o,r=0;r=0;var a=0,s=0;for(a=e.length;r<a;){if(o=n=e[r],(s=n.indexOf("/**"))>=0)for(o=n.substring(0,s-1),t.addIfNotEmpty(i,o);r<a;){if(n=e[r],(s=n.indexOf("*/"))>=0){o=n.substring(s+2),t.addIfNotEmpty(i,o);break}r++}else n.indexOf("//")>=0?0==laya.debug.tools.StringTool.trim(n).indexOf("//")||t.addIfNotEmpty(i,o):t.addIfNotEmpty(i,o);r++}return i},t.addIfNotEmpty=function(e,i){if(i){""!=t.trim(i)&&e.push(i)}},t.trimExt=function(e,i){var n;n=t.trim(e);var o=0,r=0;for(r=i.length,o=0;o<r;o++)n=t.getReplace(n,i[o],"");return n},t.getBetween=function(t,e,i,n){if(void 0===n&&(n=!1),!t)return"";if(!e)return"";if(!i)return"";var o=0,r=0;if((o=t.indexOf(e))<0)return"";if(n){if((r=t.lastIndexOf(i))<o)return""}else r=t.indexOf(i,o+1);return r<0?"":t.substring(o+e.length,r)},t.getSplitLine=function(t,e){return void 0===e&&(e=" "),t.split(e)},t.getLeft=function(t,e){var i=0;return i=t.indexOf(e),t.substr(0,i)},t.getRight=function(t,e){var i=0;return i=t.indexOf(e),t.substr(i+1)},t.delelteItem=function(t){for(;t.length>0&&""==t[0];)t.shift()},t.getWords=function(e){var i=t.getSplitLine(e);return t.delelteItem(i),i},t.getLinesI=function(t,e,i){var n=0,o=[];for(n=t;n<=e;n++)o.push(i[n]);return o},t.structfy=function(e,i,n){void 0===i&&(i=4),void 0===n&&(n=!0),n&&(e=laya.debug.tools.StringTool.trimEmptyLine(e));var o,r=0;r=0;var a;a=t.getEmptyStr(0);var s,l=0,h=0;for(h=(o=e.split("\n")).length,l=0;l<h;l++)s=o[l],s=laya.debug.tools.StringTool.trimLeft(s),s=laya.debug.tools.StringTool.trimRight(s),r+=t.getPariCount(s),s.indexOf("}")>=0&&(a=t.getEmptyStr(r*i)),s=a+s,o[l]=s,a=t.getEmptyStr(r*i);return o.join("\n")},t.getEmptyStr=function(e){if(!t.emptyDic.hasOwnProperty(e)){var i=0,n=0;n=e;var o;for(o="",i=0;i<n;i++)o+=" ";t.emptyDic[e]=o}return t.emptyDic[e]},t.getPariCount=function(t,e,i){void 0===e&&(e="{"),void 0===i&&(i="}");var n;(n={})[e]=1,n[i]=-1;var o,r=0,a=0;a=t.length;var s=0;for(s=0,r=0;r<a;r++)o=t.charAt(r),n.hasOwnProperty(o)&&(s+=n[o]);return s},t.readInt=function(t,e){void 0===e&&(e=0);var i=NaN;i=0;var n,o=0,r=!1;r=!1;var a=0;for(a=t.length,o=e;o<a;o++)if(n=t.charAt(o),Number(n)>0||"0"==n)(i=10*i+Number(n))>0&&(r=!0);else if(r)return i;return i},t.getReplace=function(t,e,i){if(!t)return"";return t.replace(new RegExp(e,"g"),i)},t.getWordCount=function(t,e){var i=new RegExp(e,"g");return t.match(i).length},t.getResolvePath=function(e,i){if(t.isAbsPath(e))return e;var n;n="\\",i.indexOf("/")>=0&&(n="/"),i.charAt(i.length-1)==n&&(i=i.substr(0,i.length-1));var o,r;r="."+n;var a=0;a=t.getWordCount(e,o=".."+n),e=laya.debug.tools.StringTool.getReplace(e,o,""),e=laya.debug.tools.StringTool.getReplace(e,r,"");var s=0,l=0;l=a;for(s=0;s<l;s++)i=t.removeLastSign(e,n);return i+n+e},t.isAbsPath=function(t){return t.indexOf(":")>=0},t.removeLastSign=function(t,e){var i=0;return i=t.lastIndexOf(e),t=t.substring(0,i)},t.getParamArr=function(e){var i;return i=laya.debug.tools.StringTool.getBetween(e,"(",")",!0),t.trim(i).length<1?[]:i.split(",")},t.copyStr=function(t){return t.substring()},t.ArrayToString=function(e){return"[{items}]".replace(new RegExp("\\{items\\}","g"),t.getArrayItems(e))},t.getArrayItems=function(e){var i;if(e.length<1)return"";i=t.parseItem(e[0]);var n=0,o=0;for(o=e.length,n=1;n<o;n++)i+=","+t.parseItem(e[n]);return i},t.parseItem=function(t){return'"'+t+'"',""},t.initAlphaSign=function(){t.alphaSigns||(t.addSign("a","z",t.alphaSigns={}),t.addSign("A","Z",t.alphaSigns),t.addSign("0","9",t.alphaSigns))},t.addSign=function(t,e,i){var n=0,o=0,r=0;for(r=t.charCodeAt(0),o=e.charCodeAt(0),n=r;n<=o;n++)i[String.fromCharCode(n)]=!0,console.log("add :"+String.fromCharCode(n))},t.isPureAlphaNum=function(e){if(t.initAlphaSign(),!e)return!0;var i=0,n=0;for(n=e.length,i=0;i<n;i++)if(!t.alphaSigns[e.charAt(i)])return!1;return!0},t.emptyDic={},t.alphaSigns=null,n(t,["emptyStrDic",function(){return this.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"\t":!0}},"specialChars",function(){return this.specialChars={"*":!0,"&":!0,"%":!0,"#":!0,"?":!0}}]),t}()),Dt=(function(){function t(){}o(t,"laya.debug.tools.TimerControlTool"),t.now=function(){return 1!=t._timeRate?t.getRatedNow():Date.now()},t.getRatedNow=function(){return(t.getNow()-t._startTime)*t._timeRate+t._startTime},t.getNow=function(){return Date.now()},t.setTimeRate=function(e){null==t._browerNow&&(t._browerNow=s.now),t._startTime=t.getNow(),t._timeRate=e,1!=e?s.now=t.now:null!=t._browerNow&&(s.now=t._browerNow)},t.recoverRate=function(){t.setTimeRate(1)},t._startTime=NaN,t._timeRate=1,t._browerNow=null}(),function(){function t(){}o(t,"laya.debug.tools.TimeTool"),t.getTime=function(e,i){void 0===i&&(i=!0),t.timeDic[e]||(t.timeDic[e]=0);var n=NaN,o=NaN;return o=(n=s.now())-t.timeDic[e],t.timeDic[e]=n,o},t.runAllCallLater=function(){t._deep++;for(var e,n=(e=i.timer)._laters,o=0,r=n.length-1;o<=r;o++){var a=n[o];a&&(null!==a.method&&a.run(!1),e._recoverHandler(a)),o===r&&(r=n.length-1)}n.length=0,t._deep--},t.timeDic={},t._deep=0}(),function(){function t(){}o(t,"laya.debug.tools.TouchDebugTools"),t.getTouchIDs=function(t){var e;e=[];var i=0,n=0;for(n=t.length,i=0;i<n;i++)e.push(t[i].identifier||0);return e},t.traceTouchIDs=function(e,i){nt.dTrace(e+":"+t.getTouchIDs(i).join(","))}}(),function(){function t(){}return o(t,"laya.debug.tools.TraceTool"),t.closeAllLog=function(){var e;e=t.emptyLog,s.window.console.log=e},t.emptyLog=function(){},t.traceObj=function(e){t.tempArr.length=0;var i;for(i in e)t.tempArr.push(i+":"+e[i]);var n;return n=t.tempArr.join("\n"),console.log(n),n},t.traceObjR=function(e){t.tempArr.length=0;var i;for(i in e)t.tempArr.push(e[i]+":"+i);var n;return n=t.tempArr.join("\n"),console.log(n),n},t.traceSize=function(t){Z.dTrace("Size: x:"+t.x+" y:"+t.y+" w:"+t.width+" h:"+t.height+" scaleX:"+t.scaleX+" scaleY:"+t.scaleY)},t.traceSplit=function(t){console.log("---------------------"+t+"---------------------------")},t.group=function(t){console.group(t)},t.groupEnd=function(){console.groupEnd()},t.getCallStack=function(e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n;n=(n=t.getCallStack).caller.caller;var o;for(o="";n&&e>0;)i<=0&&(o+=n+"<-",e--),n=n.caller,i--;return o},t.getCallLoc=function(e){void 0===e&&(e=2);var i;try{t.Erroer.i++}catch(t){var n;n=t.stack.replace(/Error\n/).split(/\n/),i=n[e]?n[e].replace(/^\s+|\s+$/,""):"unknow"}return i},t.traceCallStack=function(){var e;try{t.Erroer.i++}catch(t){e=t.stack}return console.log(e),e},t.getPlaceHolder=function(e){if(!t.holderDic.hasOwnProperty(e)){var i;i="";var n=0;for(n=0;n<e;n++)i+="-";t.holderDic[e]=i}return t.holderDic[e]},t.traceTree=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=!0),n&&console.log("traceTree"),e){var o=0,r=0;if(e.numChildren<1)console.log(e);else{for(t.group(e),r=e.numChildren,i++,o=0;o<r;o++)t.traceTree(e.getChildAt(o),i,!1);t.groupEnd()}}},t.getClassName=function(t){return t.constructor.name},t.traceSpriteInfo=function(e,i,n,o){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),e instanceof laya.display.Sprite?e?(t.traceSplit("traceSpriteInfo"),Z.dTrace(laya.debug.tools.TraceTool.getClassName(e)+":"+e.name),o?t.traceTree(e):console.log(e),n&&t.traceSize(e),i&&console.log("bounds:"+e.getBounds())):console.log("null Sprite"):console.log("not Sprite")},t.tempArr=[],t.Erroer=null,t.holderDic={},t}()),Et=(function(){function t(){}o(t,"laya.debug.tools.UVTools",null,"UVTools$1"),t.getUVByRec=function(t,e,i,n){return[t,e,t+i,e,t+i,e+n,t,e+n]},t.getRecFromUV=function(t){return new L(t[0],t[1],t[2]-t[0],t[5]-t[1])},t.isUVRight=function(t){return t[0]==t[6]&&(t[1]==t[3]&&(t[2]==t[4]&&t[5]==t[7]))},t.getTextureRec=function(e){var i;return i=t.getRecFromUV(e.uv),i.x*=e.bitmap.width,i.y*=e.bitmap.height,i.width*=e.bitmap.width,i.height*=e.bitmap.height,i}}(),function(){function t(){this.target=null,this.key=null,this._tValue=NaN,this.preValue=0}o(t,"laya.debug.tools.ValueChanger");var e=t.prototype;return e.record=function(){this.preValue=this.value},e.showValueByAdd=function(t){this.value=this.preValue+t},e.showValueByScale=function(t){this.value=this.preValue*t},e.recover=function(){this.value=this.preValue},e.dispose=function(){this.target=null},r(0,e,"value",function(){return this.target&&(this._tValue=this.target[this.key]),this._tValue},function(t){this._tValue=t,this.target&&(this.target[this.key]=t)}),r(0,e,"dValue",function(){return this.value-this.preValue}),r(0,e,"scaleValue",function(){return this.value/this.preValue}),t.create=function(e,i){var n;return n=new t,n.target=e,n.key=i,n},t}()),Rt=function(){function t(){}return o(t,"laya.debug.tools.VisibleAnalyser"),t.analyseTarget=function(e){var n=!1;n=e.displayedInStage;var o;o=Ut.getGRec(e);var r=new L;r.setTo(0,0,i.stage.width,i.stage.height);var a,s=!1;s=(a=r.intersection(o)).width>0&&a.height>0;var l=NaN;l=Ut.getGAlpha(e);var h,u=!1;h="",h+="isInstage:"+n+"\n",h+="isInVisibleRec:"+s+"\n",h+="gVisible:"+(u=Ut.getGVisible(e))+"\n",h+="gAlpha:"+l+"\n",n&&s&&u&&l>0&&(D.isWebGL?t.anlyseRecVisible(e):ct.I.analyseNode(e),h+="coverRate:"+t.coverRate+"\n",t._coverList.length>0&&i.timer.once(1e3,null,t.showListLater)),console.log(h),pe.I.showTxt(h)},t.showListLater=function(){se.I.showList(t._coverList)},t.isCoverByBrother=function(t){var e=t.parent;if(e){if(!(e._childs.indexOf(t)<0)){var i;(i=e.getSelfBounds()).width<=0||i.height}}},t.anlyseRecVisible=function(e){t.isNodeWalked=!1,t._analyseTarget=e,t.mainCanvas||(t.mainCanvas=K.createCanvas(i.stage.width,i.stage.height)),K.clearCanvas(t.mainCanvas),t.tColor=1,t.resetCoverList(),Pt.walkTargetEX(i.stage,t.recVisibleWalker,null,t.filterFun),t.coverRate=t.isTarRecOK?K.getDifferRate(t.preImageData,t.tarImageData):0,console.log("coverRate:",t.coverRate)},t.getRecArea=function(t){return t.width*t.height},t.addCoverNode=function(e,i){var n;(n={}).path=e,n.label=Q.getNodeClassAndName(e)+":"+i,n.coverRate=i,t._coverList.push(n),console.log("coverByNode:",e,i)},t.resetCoverList=function(){t._coverList.length=0},t.recVisibleWalker=function(e){if(e==t._analyseTarget)t.isNodeWalked=!0,t.tarRec.copyFrom(Ut.getGRec(e)),console.log("tarRec:",t.tarRec.toString()),t.tarRec.width>0&&t.tarRec.height>0?(t.isTarRecOK=!0,t.tColor++,K.fillCanvasRec(t.mainCanvas,t.tarRec,q.toHexColor(t.tColor)),t.preImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec),t.tarImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec)):console.log("tarRec Not OK:",t.tarRec);else if(t.isTarRecOK){var i;if(i=Ut.getGRec(e),(t.interRec=t.tarRec.intersection(i,t.interRec))&&t.interRec.width>0&&t.interRec.height>0){t.tColor++,K.fillCanvasRec(t.mainCanvas,i,q.toHexColor(t.tColor)),t.tImageData=K.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec);var n=NaN;n=K.getDifferRate(t.preImageData,t.tImageData),t.preImageData=t.tImageData,t.addCoverNode(e,n)}}},t.filterFun=function(t){return 0!=t.visible&&(!(t.alpha<0)&&!Zt.I.isDebugItem(t))},t.isNodeWalked=!1,t._analyseTarget=null,t.isTarRecOK=!1,t.mainCanvas=null,t.preImageData=null,t.tImageData=null,t.tarImageData=null,t.coverRate=NaN,t.tColor=0,t._coverList=[],n(t,["tarRec",function(){return this.tarRec=new L},"interRec",function(){return this.interRec=new L}]),t}(),Pt=function(){function t(){}return o(t,"laya.debug.tools.WalkTools"),t.walkTarget=function(e,i,n){i.apply(n,[e]);var o,r=0,a=0;for(a=e.numChildren,r=0;r<a;r++)o=e.getChildAt(r),t.walkTarget(o,i,o)},t.walkTargetEX=function(e,i,n,o){if(null==o||o(e)){i.apply(n,[e]);var r,a,s=0,l=0;for(l=(a=e._childs).length,s=0;s<l;s++)r=a[s],t.walkTarget(r,i,r)}},t.walkChildren=function(e,i,n){!e||e.numChildren<1||t.walkArr(at.getAllChild(e),i,n)},t.walkArr=function(t,e,i){if(t){var n=0,o=0;for(o=t.length,n=0;n<o;n++)e.apply(i,[t[n],n])}},t}(),Nt=function(){function t(){}return o(t,"laya.debug.tools.Watcher"),t.watch=function(t,e,i){ft.hookVar(t,e,i)},t.traceChange=function(e,i,n){void 0===n&&(n="var changed:"),ft.hookVar(e,i,[t.getTraceValueFun(i),ft.getLocFun(n)])},t.debugChange=function(t,e){ft.hookVar(t,e,[ft.getLocFun("debug loc"),pt.debugHere])},t.differChange=function(e,i,n,o){void 0===o&&(o=""),ft.hookVar(e,i,[t.getDifferFun(e,i,n,o)])},t.getDifferFun=function(t,e,i,n){void 0===n&&(n="");return function(){ot.differ(i,t[e],n)}},t.traceValue=function(t){console.log("value:",t)},t.getTraceValueFun=function(t){return function(e){console.log("set "+t+" :",e)}},t}(),Gt=(function(){function t(){}o(t,"laya.debug.tools.XML2Object"),r(1,t,"arrays",function(){return t._arrays||(t._arrays=[]),t._arrays},function(e){t._arrays=e}),t.parse=function(e,i){void 0===i&&(i=!0);var n={};i&&(n.Name=e.localName);var o=e.children.length,r=[],a={};n.c=a,n.cList=r;for(var s=0;s<o;s++){var l,h,u=e.children[s],c=u.localName;l=t.parse(u,!0),r.push(l),a[c]?"array"==t.getTypeof(a[c])?a[c].push(l):a[c]=[a[c],l]:t.isArray(c)?a[c]=[l]:a[c]=l}if(h=0,e.attributes){h=e.attributes.length;var d={};for(n.p=d,s=0;s<h;s++)d[e.attributes[s].name.toString()]=String(e.attributes[s].nodeValue)}return 0==o&&0==h&&(n=""),n},t.getArr=function(e){return e?"array"==t.getTypeof(e)?e:[e]:[]},t.isArray=function(e){for(var i=t._arrays?t._arrays.length:0,n=0;n<i;n++)if(e==t._arrays[n])return!0;return!1},t.getTypeof=function(t){return"object"==typeof t?null==t.length?"object":"number"==typeof t.length?"array":"object":typeof t},t._arrays=null}(),function(){function t(){}o(t,"laya.debug.tools.XML2ObjectNodejs"),r(1,t,"arrays",function(){return t._arrays||(t._arrays=[]),t._arrays},function(e){t._arrays=e}),t.parse=function(e,i){void 0===i&&(i=!0);var n={};i&&(n.Name=e.localName);var o=e[t.ChildrenSign]?e[t.ChildrenSign].length:0,r=[],a={};n.c=a,n.cList=r;for(var s=0;s<o;s++){var l,h=e[t.ChildrenSign][s],u=h.localName,c=0;u&&(l=t.parse(h,!0),r.push(l),a[u]?"array"==t.getTypeof(a[u])?a[u].push(l):a[u]=[a[u],l]:t.isArray(u)?a[u]=[l]:a[u]=l)}if(c=0,e.attributes){c=e.attributes.length;var d={};for(n.p=d,s=0;s<c;s++)d[e.attributes[s].name.toString()]=String(e.attributes[s].nodeValue)}return n},t.getArr=function(e){return e?"array"==t.getTypeof(e)?e:[e]:[]},t.isArray=function(e){for(var i=t._arrays?t._arrays.length:0,n=0;n<i;n++)if(e==t._arrays[n])return!0;return!1},t.getTypeof=function(t){return"object"==typeof t?null==t.length?"object":"number"==typeof t.length?"array":"object":typeof t},t._arrays=null,t.ChildrenSign="childNodes"}(),function(){function t(){this._tar=null,this._menu=null,this._shareBtns=["信息面板","边框","进入节点","树定位","Enable链","Size链","节点工具","可见分析","输出到控制台"],this._menuItems=["隐藏节点"],this._menuHide=null,this._menuItemsHide=["显示节点"],this._menu1=null,this._menuItems1=["输出到控制台"]}o(t,"laya.debug.view.nodeInfo.menus.NodeMenu");var e=t.prototype;return e.showNodeMenu=function(t){t._style?(this._tar=t,this._menu||(this._menuItems=this._menuItems.concat(this._shareBtns),this._menu=te.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this._menuItemsHide=this._menuItemsHide.concat(this._shareBtns),this._menuHide=te.createMenuByArray(this._menuItemsHide),this._menuHide.on("select",this,this.onEmunSelect)),t.visible?this._menu.show():this._menuHide.show()):Z.log("该节点已不存在，请刷新列表")},e.nodeDoubleClick=function(t){le.I.showByNode(t)},e.setNodeListDoubleClickAction=function(t){s.onMobile||t.on("doubleclick",this,this.onListDoubleClick,[t])},e.onListDoubleClick=function(t){if(t.selectedItem){var e;e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.nodeDoubleClick(e)}},e.setNodeListAction=function(t){t.on(Z.getMenuShowEvent(),this,this.onListRightClick,[t])},e.onListRightClick=function(t){if(t.selectedItem){var e;e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.objRightClick(e)}},e.objRightClick=function(t){t instanceof laya.display.Sprite?laya.debug.view.nodeInfo.menus.NodeMenu.I.showNodeMenu(t):"object"==typeof t&&laya.debug.view.nodeInfo.menus.NodeMenu.I.showObjectMenu(t)},e.showObjectMenu=function(t){this._tar=t,this._menu1||(this._menu1=te.createMenuByArray(this._menuItems1),this._menu1.on("select",this,this.onEmunSelect)),this._menu1.show()},e.onEmunSelect=function(t){var e=t.target.data;if("string"==typeof e){switch(e){case"信息面板":de.showObject(this._tar);break;case"边框":Z.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"树节点":case"进入节点":zt.I.showNodeTree(this._tar);break;case"树定位":zt.I.showSelectInStage(this._tar);break;case"Enable链":pe.I.dTrace(Z.traceDisMouseEnable(this._tar)),_e.I.setSelectList(Z.selectedNodes);break;case"Size链":pe.I.dTrace(Z.traceDisSizeChain(this._tar)),_e.I.setSelectList(Z.selectedNodes);break;case"节点工具":le.I.showByNode(this._tar);break;case"显示节点":this._tar.visible=!0;break;case"隐藏节点":this._tar.visible=!1;break;case"可见分析":this._tar&&Rt.analyseTarget(this._tar)}}},r(1,t,"I",function(){return t._I||(t._I=new t),t._I}),t._I=null,t}()),At=function(){function t(){}return o(t,"laya.debug.view.nodeInfo.NodeConsts"),t.defaultFitlerStr="x,y,width,height,scaleX,scaleY,alpha,renderCost",t.RenderCostMaxTime=3e3,t}(),Ut=function(){function t(){}return o(t,"laya.debug.view.nodeInfo.NodeUtils"),t.getFilterdTree=function(e,i){i||(i=t.defaultKeys);var n;n={};var o,r=0,a=0;for(a=i.length,r=0;r<a;r++)n[o=i[r]]=e[o];var s,l;a=(s=e._childs).length;var h;for(h=[],r=0;r<a;r++)l=s[r],h.push(t.getFilterdTree(l,i));return n.childs=h,n},t.getPropertyDesO=function(e,i){i||(i=t.defaultKeys);var n={};n.label="object"==typeof e?""+Q.getNodeClassAndName(e):""+e,n.type="",n.path=e,n.childs=[],n.isDirectory=!1;var o,r,a=0,s=0;if(e instanceof laya.display.Node){for(n.des=Q.getNodeClassAndName(e),n.isDirectory=!0,s=i.length,a=0;a<s;a++)o=i[a],r=t.getPropertyDesO(e[o],i),e.hasOwnProperty(o)?r.label=o+":"+r.des:r.label=o+":"+de.getNodeValue(e,o),n.childs.push(r);(r=t.getPropertyDesO(e[o="_childs"],i)).label=o+":"+r.des,r.isChilds=!0,n.childs.push(r)}else if(e instanceof Array){n.des="Array["+e.length+"]",n.isDirectory=!0;var l;for(s=(l=e).length,a=0;a<s;a++)(r=t.getPropertyDesO(l[a],i)).label=a+":"+r.des,n.childs.push(r)}else if("object"==typeof e){n.des=Q.getNodeClassAndName(e),n.isDirectory=!0;for(o in e)(r=t.getPropertyDesO(e[o],i)).label=o+":"+r.des,n.childs.push(r)}else n.des=""+e;return n.hasChild=n.childs.length>0,n},t.adptShowKeys=function(t){var e=0;for(e=t.length-1;e>=0;e--)t[e]=Lt.trimSide(t[e]),t[e].length<1&&t.splice(e,1);return t},t.getNodeTreeData=function(e,i){t.adptShowKeys(i);var n;n=t.getPropertyDesO(e,i);var o;return o=[],t.getTreeArr(n,o),o},t.getTreeArr=function(e,i,n){void 0===n&&(n=!0),n&&i.push(e);var o=e.childs,r=0,a=o.length;for(r=0;r<a;r++)o[r].nodeParent=n?e:null,o[r].isDirectory?t.getTreeArr(o[r],i):i.push(o[r])},t.traceStage=function(){console.log(t.getFilterdTree(i.stage,null)),console.log("treeArr:",t.getNodeTreeData(i.stage,null))},t.getNodeCount=function(e,i){if(void 0===i&&(i=!1),i&&!e.visible)return 0;var n=0;n=1;var o,r=0,a=0;for(a=(o=e._childs).length,r=0;r<a;r++)n+=t.getNodeCount(o[r],i);return n},t.getGVisible=function(t){for(;t;){if(!t.visible)return!1;t=t.parent}return!0},t.getGAlpha=function(t){var e=NaN;for(e=1;t;)e*=t.alpha,t=t.parent;return e},t.getGPos=function(t){var e;return e=new T,t.localToGlobal(e),e},t.getGRec=function(t){var e;if(!(e=t._getBoundPointsM(!0))||e.length<1)return L.TEMP.setTo(0,0,0,0);e=f.pListToPointList(e,!0),Pt.walkArr(e,t.localToGlobal,t),e=f.pointListToPlist(e);var i;return i=L._getWrapRec(e,i)},t.getGGraphicRec=function(t){var e;if(!(e=t.getGraphicBounds()._getBoundPoints())||e.length<1)return L.TEMP.setTo(0,0,0,0);e=f.pListToPointList(e,!0),Pt.walkArr(e,t.localToGlobal,t),e=f.pointListToPlist(e);var i;return i=L._getWrapRec(e,i)},t.getNodeCmdCount=function(t){return t.graphics?t.graphics.cmds?t.graphics.cmds.length:t.graphics._one?1:0:0},t.getNodeCmdTotalCount=function(e){var i,n=0,o=0,r=0;for(r=(i=e._childs).length,n=t.getNodeCmdCount(e),o=0;o<r;o++)n+=t.getNodeCmdTotalCount(i[o]);return n},t.getRenderNodeCount=function(e){if("none"!=e.cacheAs)return 1;var i,n=0,o=0,r=0;for(r=(i=e._childs).length,n=1,o=0;o<r;o++)n+=t.getRenderNodeCount(i[o]);return n},t.getReFreshRenderNodeCount=function(e){var i,n=0,o=0,r=0;for(r=(i=e._childs).length,n=1,o=0;o<r;o++)n+=t.getRenderNodeCount(i[o]);return n},t.showCachedSpriteRecs=function(){(t.g=Zt.I.graphicLayer.graphics).clear(),Pt.walkTarget(i.stage,t.drawCachedBounds,null)},t.drawCachedBounds=function(e){if("none"!=e.cacheAs&&!Zt.I.isDebugItem(e)){var i;i=t.getGRec(e),t.g.drawRect(i.x,i.y,i.width,i.height,null,"#0000ff",2)}},t.g=null,n(t,["defaultKeys",function(){return this.defaultKeys=["x","y","width","height"]}]),t}(),kt=function(){function t(){}return o(t,"laya.debug.view.StyleConsts"),t.setViewScale=function(e){e.scaleX=e.scaleY=t.PanelScale},n(t,["PanelScale",function(){return this.PanelScale=s.onPC?1:s.pixelRatio}]),t}(),Bt=function(t){function e(){e.__super.call(this)}return o(e,"laya.debug.tools.Notice",p),e.notify=function(t,i){e.I.event(t,i)},e.listen=function(t,i,n,o,r){void 0===r&&(r=!1),r&&e.cancel(t,i,n),e.I.on(t,i,n,o)},e.cancel=function(t,i,n){e.I.off(t,i,n)},n(e,["I",function(){return this.I=new e}]),e}(),Ot=function(t){function e(){e.__super.call(this)}o(e,"laya.debug.tools.enginehook.LoaderHook",t);var n=e.prototype;return n.checkUrls=function(t){var i;i="string"==typeof t?t:t.url,e.preFails[i]},n.chekUrlList=function(t){var e=0,i=0;for(i=t.length,e=0;e<i;e++)this.checkUrls(t[e])},n.load=function(e,i,n,o,r,a,s,l){return void 0===r&&(r=1),void 0===a&&(a=!0),void 0===l&&(l=!1),e instanceof Array?this.chekUrlList(e):this.checkUrls(e),t.prototype.load.call(this,e,i,n,o,r,a,s,l)},e.init=function(){e.isInited||(e.isInited=!0,i.loader=new e,i.loader.on("error",null,e.onFail),(e.preFails=b.getJSON("LoadFailItems"))||(e.preFails={}))},e.onFail=function(t){pe.I.dTrace("LoadFail:"+t),e.nowFails[t]=!0,b.setJSON("LoadFailItems",e.nowFails)},e.resetFails=function(){e.nowFails={},b.setJSON("LoadFailItems",e.nowFails)},e.preFails={},e.nowFails={},e.enableFailDebugger=!0,e.FailSign="LoadFailItems",e.isInited=!1,e}(w),Wt=(function(t){function e(){this.sideColor=null,this.mainColor=null,this.demoColor=null,this.posSp=null,this.hPos=null,this.container=null,this.isChanging=!1,this.tColor=null,this.tH=NaN,e.__super.call(this),this.container=this,this.createUI()}o(e,"laya.debug.tools.ColorSelector",G);var n=e.prototype;n.createUI=function(){this.sideColor=new G,this.container.addChild(this.sideColor),this.posSp=new G,this.posSp.pos(100,100),this.posSp.graphics.drawCircle(0,0,5,null,"#ff0000"),this.posSp.graphics.drawCircle(0,0,6,null,"#ffff00"),this.posSp.autoSize=!0,this.posSp.cacheAsBitmap=!0,this.sideColor.addChild(this.posSp),this.sideColor.pos(0,0),this.sideColor.size(150,150),this.sideColor.on("mousedown",this,this.sideColorClick);var t=0;this.mainColor=new G;var e;e=this.mainColor.graphics;var i;for(t=0;t<150;t++)i=q.hsb2rgb(t/150*360,1,1),e.drawLine(0,t,20,t,q.getRGBStr(i));this.mainColor.pos(160,0),this.mainColor.size(20,t),this.mainColor.cacheAsBitmap=!0,this.hPos=new G,this.hPos.graphics.drawPie(0,0,10,-10,10,"#ff0000"),this.hPos.x=this.mainColor.x+22,this.container.addChild(this.hPos),this.container.addChild(this.mainColor),this.mainColor.on("mousedown",this,this.mainColorClick),this.demoColor=new G,this.demoColor.pos(this.sideColor.x,this.sideColor.y+this.sideColor.height+10),this.demoColor.size(150,20),this.container.addChild(this.demoColor),this.setColorByRGBStr("#099599"),this.posSp.on("dragmove",this,this.posDraging)},n.posMouseDown=function(t){},n.posDraging=function(){this.updatePosSpAndShowColor()},n.posDragEnd=function(){this.isChanging=!1,this.updatePosSpAndShowColor()},n.setColorByRGBStr=function(t){var e;e=q.getRGBByRGBStr(t),this.setColor(e[0],e[1],e[2])},n.setColor=function(t,e,i,n){void 0===n&&(n=!0);var o;o=q.rgb2hsb(t,e,i);q.hsb2rgb(o[0],o[1],o[2]),this.setColorByHSB(o[0],o[1],o[2],n)},n.setColorByHSB=function(t,e,i,n){void 0===n&&(n=!0),this.hPos.y=this.mainColor.y+t/360*150,this.posSp.x=150*e,this.posSp.y=150*(1-i),this.updateSideColor(t,n)},n.sideColorClick=function(t){this.isChanging=!0,this.posSp.startDrag(),this.updatePosSpAndShowColor(),i.stage.off("mouseup",this,this.sideColorMouseUp),i.stage.once("mouseup",this,this.sideColorMouseUp)},n.sideColorMouseUp=function(t){this.isChanging=!1,this.updatePosSpAndShowColor()},n.updatePosSpAndShowColor=function(){this.posSp.x=this.sideColor.mouseX,this.posSp.y=this.sideColor.mouseY,this.posSp.x<0&&(this.posSp.x=0),this.posSp.y<0&&(this.posSp.y=0),this.posSp.x>150&&(this.posSp.x=150),this.posSp.y>150&&(this.posSp.y=150),this.updateDemoColor()},n.updateDemoColor=function(t){void 0===t&&(t=!0);var e=NaN,i=NaN,n=NaN;e=this.tH,i=this.posSp.x/150,n=1-this.posSp.y/150,this.tColor=q.hsb2rgb(e,i,n);var o;(o=this.demoColor.graphics).clear(),o.drawRect(0,0,this.demoColor.width,this.demoColor.height,q.getRGBStr(this.tColor)),this.isChanging||t&&this.event("ColorChanged",this)},n.mainColorClick=function(t){var e=NaN;e=this.mainColor.mouseY,this.hPos.y=e+this.mainColor.y;var i=NaN;i=e/150*360,this.updateSideColor(i)},n.updateSideColor=function(t,e){void 0===e&&(e=!0),this.tH=t;this.sideColor.graphics.clear(),this.sideColor.cacheAsBitmap=!1;var i;i=q.hsb2rgb(t,1,1);var n=s.context.createLinearGradient(0,0,80,0);n.addColorStop(0,"white"),n.addColorStop(1,q.getRGBStr(i)),this.sideColor.graphics.drawRect(0,0,150,150,n),this.sideColor.graphics.loadImage("comp/colorpicker_overlay.png",0,0),this.sideColor.size(150,150),this.sideColor.cacheAsBitmap=!0,this.updateDemoColor(e)},e.COLOR_CHANGED="ColorChanged",e.COLOR_CLEARED="COLOR_CLEARED",e.RecWidth=150}(),function(t){function e(){e.__super.call(this),this.drawMe()}o(e,"laya.debug.tools.comps.Arrow",G);e.prototype.drawMe=function(){var t;(t=this.graphics).clear(),t.drawLine(0,0,-1,-1,"#ff0000"),t.drawLine(0,0,1,-1,"#ff0000")}}(),function(t){function e(t){this.lineLen=160,this.arrowLen=10,this.sign="Y",this._targetChanger=null,this._isMoving=!1,this.lenControl=new Ft,this.rotationControl=new Ft,this.lenChanger=Et.create(this,"lineLen"),this.lenControlXChanger=Et.create(this.lenControl,"x"),void 0===t&&(t="X"),e.__super.call(this),this.sign=t,this.addChild(this.lenControl),this.addChild(this.rotationControl),this.lenControl.on("mousedown",this,this.controlMouseDown),this.drawMe()}o(e,"laya.debug.tools.comps.ArrowLine",G);var n=e.prototype;return n.drawMe=function(){var t;(t=this.graphics).clear(),t.drawLine(0,0,this.lineLen,0,"#ffff00"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,-this.arrowLen,"#ff0000"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,this.arrowLen,"#ff0000"),t.fillText(this.sign,50,-5,"","#ff0000","left"),this._isMoving&&this._targetChanger&&t.fillText(this._targetChanger.key+":"+this._targetChanger.value.toFixed(2),this.lineLen-15,-25,"","#ffff00","center"),this.lenControl.posTo(this.lineLen-15,0),this.rotationControl.posTo(this.lineLen+10,0),this.size(this.arrowLen,this.lineLen)},n.clearMoveEvents=function(){i.stage.off("mousemove",this,this.stageMouseMove),i.stage.off("mouseup",this,this.stageMouseUp)},n.controlMouseDown=function(t){this.clearMoveEvents(),this.lenControlXChanger.record(),this.lenChanger.record(),this.targetChanger&&this.targetChanger.record(),this._isMoving=!0,i.stage.on("mousemove",this,this.stageMouseMove),i.stage.on("mouseup",this,this.stageMouseUp)},n.stageMouseMove=function(t){this.lenControlXChanger.value=this.mouseX,this.lenChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.targetChanger&&this.targetChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.drawMe()},n.stageMouseUp=function(t){this._isMoving=!1,this.noticeChange(),this.clearMoveEvents(),this.lenControlXChanger.recover(),this.lenChanger.recover(),this.drawMe()},n.noticeChange=function(){var t=NaN;t=this.lenChanger.dValue,console.log("lenChange:",t)},r(0,n,"targetChanger",function(){return this._targetChanger},function(t){this._targetChanger&&this._targetChanger.dispose(),this._targetChanger=t}),e}()),Vt=(function(t){function e(t){this.type=0,this._color="#ffffff",this.preX=NaN,this.preY=NaN,e.__super.call(this)}o(e,"laya.debug.tools.comps.AutoSizeRec",t);var n=e.prototype;n.setColor=function(t){this._color=t,this.reRender()},n.changeSize=function(){this.reRender()},n.reRender=function(){var t=this.graphics;t.clear(),t.drawRect(0,0,this.width,this.height,this._color)},n.record=function(){this.preX=this.x,this.preY=this.y},n.getDx=function(){return this.x-this.preX},n.getDy=function(){return this.y-this.preY},r(0,n,"height",t.prototype._$get_height,function(t){i.superSet(G,this,"height",t),this.changeSize()}),r(0,n,"width",t.prototype._$get_width,function(t){i.superSet(G,this,"width",t),this.changeSize()})}(G),function(t){function e(){this._target=null,this._lenType=[["width","height"],["scaleX","scaleY"]],this._type=1,this.xAxis=new Wt("X"),this.yAxis=new Wt("Y"),this.controlBox=new Ft,this._point=new T,this.oPoint=new T,this.myRotationChanger=Et.create(this,"rotation"),this.targetRotationChanger=Et.create(null,"rotation"),this.stageMouseRotationChanger=new Et,e.__super.call(this),this.mouseEnabled=!0,this.size(1,1),this.initMe(),this.xAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.yAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.controlBox.on("mousedown",this,this.controlBoxMouseDown),this.on("dragmove",this,this.dragging)}o(e,"laya.debug.tools.comps.Axis",G);var n=e.prototype;return n.updateChanges=function(){if(this._target){var t;t=this._lenType[this._type],this.xAxis.targetChanger=Et.create(this._target,t[0]),this.yAxis.targetChanger=Et.create(this._target,t[1])}},n.switchType=function(){this._type++,this._type=this._type%this._lenType.length,this.type=this._type},n.controlBoxMouseDown=function(t){this.startDrag()},n.dragging=function(){this._target&&(this._point.setTo(this.x,this.y),at.transPoint(this.parent,this._target.parent,this._point),this._target.pos(this._point.x,this._point.y))},n.initMe=function(){this.addChild(this.xAxis),this.addChild(this.yAxis),this.yAxis.rotation=90,this.addChild(this.controlBox),this.controlBox.posTo(0,0)},n.clearMoveEvents=function(){i.stage.off("mousemove",this,this.stageMouseMove),i.stage.off("mouseup",this,this.stageMouseUp)},n.controlMouseDown=function(t){this.targetRotationChanger.target=this.target,this.clearMoveEvents(),this.oPoint.setTo(0,0),this.myRotationChanger.record(),this.oPoint=this.localToGlobal(this.oPoint),this.stageMouseRotationChanger.value=this.getStageMouseRatation(),this.stageMouseRotationChanger.record(),this.targetRotationChanger.record(),i.stage.on("mousemove",this,this.stageMouseMove),i.stage.on("mouseup",this,this.stageMouseUp)},n.getStageMouseRatation=function(){return C.getRotation(this.oPoint.x,this.oPoint.y,i.stage.mouseX,i.stage.mouseY)},n.stageMouseMove=function(t){this.stageMouseRotationChanger.value=this.getStageMouseRatation();var e=NaN;e=-this.stageMouseRotationChanger.dValue,this.target?this.targetRotationChanger.showValueByAdd(e):this.myRotationChanger.showValueByAdd(e)},n.stageMouseUp=function(t){this.noticeChange(),this.clearMoveEvents()},n.noticeChange=function(){console.log("rotate:",-this.stageMouseRotationChanger.dValue)},r(0,n,"target",function(){return this._target},function(t){this._target=t,this.updateChanges()}),r(0,n,"type",function(){return this._type},function(t){this._type=t,this.updateChanges()}),e}()),Ft=function(t){function e(){this.recWidth=10,e.__super.call(this),this.drawMe()}o(e,"laya.debug.tools.comps.Rect",G);var i=e.prototype;return i.drawMe=function(){var t;(t=this.graphics).clear(),t.drawRect(0,0,this.recWidth,this.recWidth,"#22ff22"),this.size(this.recWidth,this.recWidth)},i.posTo=function(t,e){this.x=t-.5*this.recWidth,this.y=e-.5*this.recWidth},e}(),Zt=(function(t){function e(t){this._box=null,this._target=null,this._currDir=null,this._type=0,this.fixScale=NaN,e.__super.call(this),this._left=this.drawBlock(),this._right=this.drawBlock(),this._top=this.drawBlock(),this._bottom=this.drawBlock(),this._topLeft=this.drawBlock(),this._topRight=this.drawBlock(),this._bottomLeft=this.drawBlock(),this._bottomRight=this.drawBlock(),this._lastPoint=new T,this._type=t=3,this.addChild(this._box=this.drawBorder(0,0,16711680)),1!=t&&3!=t||(this.addChild(this._left),this.addChild(this._right)),2!=t&&3!=t||(this.addChild(this._top),this.addChild(this._bottom)),3==t&&(this.addChild(this._topLeft),this.addChild(this._topRight),this.addChild(this._bottomLeft),this.addChild(this._bottomRight)),this.on("mousedown",this,this.onMouseDown),this.mouseThrough=!0}o(e,"laya.debug.tools.DragBox",G);var n=e.prototype;n.onMouseDown=function(t){this._currDir=t.target,t.nativeEvent.shiftKey&&this.initFixScale(),this._currDir!=this&&(this._lastPoint.x=i.stage.mouseX,this._lastPoint.y=i.stage.mouseY,i.stage.on("mousemove",this,this.onMouseMove),i.stage.on("mouseup",this,this.onMouseUp),t.stopPropagation())},n.onMouseUp=function(t){i.stage.off("mousemove",this,this.onMouseMove),i.stage.off("mouseup",this,this.onMouseUp)},n.initFixScale=function(){this.fixScale=this._target.height/this._target.width},n.onMouseMove=function(t){var e=(i.stage.mouseX-this._lastPoint.x)/1,n=(i.stage.mouseY-this._lastPoint.y)/1,o=!1;if(t.nativeEvent.shiftKey)switch(this.fixScale<0&&this.initFixScale(),e*this.fixScale,n/this.fixScale,o=!0,this._currDir){case this._topLeft:case this._bottomLeft:this._currDir=this._left;break;case this._topRight:case this._bottomRight:this._currDir=this._right}if(0!=e||0!=n){this._lastPoint.x+=1*e,this._lastPoint.y+=1*n;var r=e/this._target.scaleX,a=n/this._target.scaleY;this._currDir==this._left?(this._target.x+=e,this._target.width-=r,o&&(this._target.height=this._target.width*this.fixScale)):this._currDir==this._right?(this._target.width+=r,o&&(this._target.height=this._target.width*this.fixScale)):this._currDir==this._top?(this._target.y+=n,this._target.height-=a,o&&(this._target.width=this._target.height/this.fixScale)):this._currDir==this._bottom?(this._target.height+=a,o&&(this._target.width=this._target.height/this.fixScale)):this._currDir==this._topLeft?(this._target.x+=e,this._target.y+=n,this._target.width-=r,this._target.height-=a):this._currDir==this._topRight?(this._target.y+=n,this._target.width+=r,this._target.height-=a):this._currDir==this._bottomLeft?(this._target.x+=e,this._target.width-=r,this._target.height+=a):this._currDir==this._bottomRight&&(this._target.width+=r,this._target.height+=a),this._target.width<1&&(this._target.width=1),this._target.height<1&&(this._target.height=1),this._target.width=Math.round(this._target.width),this._target.x=Math.round(this._target.x),this._target.y=Math.round(this._target.y),this._target.height=Math.round(this._target.height),this.refresh()}},n.drawBorder=function(t,e,i,n){void 0===n&&(n=1);var o=new G,r=o.graphics;return r.clear(),r.drawRect(0,0,t,e,null,"#"+i),o},n.drawBlock=function(){var t=new G,i=t.graphics;return i.clear(),t.width=e.BLOCK_WIDTH,t.height=e.BLOCK_WIDTH,i.drawRect(.5*-e.BLOCK_WIDTH,.5*-e.BLOCK_WIDTH,e.BLOCK_WIDTH,e.BLOCK_WIDTH,"#ffffff","#ff0000",1),t.mouseEnabled=!0,t.mouseThrough=!0,t},n.setTarget=function(t){this._target=t,this.refresh()},n.refresh=function(){this.changePoint(),this.changeSize()},n.changePoint=function(){var t=this._target.localToGlobal(new T),e=this.parent.globalToLocal(t);this.x=e.x,this.y=e.y},n.changeSize=function(){var t=this._target.width*this._target.scaleX,e=this._target.height*this._target.scaleY;console.log("change size"),this.rotation=this._target.rotation,this._box.width==t&&this._box.height==e||(this._box.graphics.clear(),this._box.graphics.drawRect(0,0,Math.abs(t),Math.abs(e),null,"#ff0000"),this._box.size(t,e),this.size(t,e),this._box.scaleX=Math.abs(this._box.scaleX)*(this._target.scaleX>0?1:-1),this._box.scaleY=Math.abs(this._box.scaleY)*(this._target.scaleY>0?1:-1),this._left.x=0,this._left.y=.5*e,this._right.x=t,this._right.y=.5*e,this._top.x=.5*t,this._top.y=0,this._bottom.x=.5*t,this._bottom.y=e,this._topLeft.x=this._topLeft.y=0,this._topRight.x=t,this._topRight.y=0,this._bottomLeft.x=0,this._bottomLeft.y=e,this._bottomRight.x=t,this._bottomRight.y=e)},e.BLOCK_WIDTH=6}(),function(t){function e(){this.nodeRecInfoLayer=null,this.lineLayer=null,this.txtLayer=null,this.popLayer=null,this.graphicLayer=null,this.cacheViewLayer=null,e.__super.call(this),this.nodeRecInfoLayer=new G,this.lineLayer=new G,this.txtLayer=new G,this.popLayer=new G,this.graphicLayer=new G,this.cacheViewLayer=new G,this.nodeRecInfoLayer.name="nodeRecInfoLayer",this.lineLayer.name="lineLayer",this.txtLayer.name="txtLayer",this.popLayer.name="popLayer",this.graphicLayer.name="graphicLayer",this.cacheViewLayer.name="cacheViewLayer",this.addChild(this.lineLayer),this.addChild(this.cacheViewLayer),this.addChild(this.nodeRecInfoLayer),this.addChild(this.txtLayer),this.addChild(this.popLayer),this.addChild(this.graphicLayer),e.I=this,this.zOrder=999,i.stage.on("doubleclick",this,this.setTop)}o(e,"laya.debug.view.nodeInfo.DebugInfoLayer",G);var n=e.prototype;return n.setTop=function(){at.setTop(this)},n.isDebugItem=function(t){return at.isInTree(this,t)},e.init=function(){e.I||(new e,i.stage.addChild(e.I))},e.I=null,e}()),Xt=function(t){function e(){this._stateDic={},this.isWorkState=!1,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.NodeInfoPanel",G);var i=e.prototype;return i.showDisInfo=function(t){this.recoverNodes(),Ht.showDisInfos(t),this.showOnly(t),this.isWorkState=!0},i.showOnly=function(t){t&&(this.hideBrothers(t),this.showOnly(t.parent))},i.recoverNodes=function(){Ht.hideAllInfos();var t,e,i;for(t in this._stateDic)if(e=this._stateDic[t],i=e.target)try{i.visible=e.visible}catch(t){}this.isWorkState=!1},i.hideOtherChain=function(t){if(t)for(;t;)this.hideBrothers(t),t=t.parent},i.hideChilds=function(t){if(t){var e,i=0,n=0;n=(e=t._childs).length;var o;for(i=0;i<n;i++)(o=e[i])!=Ht.NodeInfoContainer&&(this.saveNodeInfo(o),o.visible=!1)}},i.hideBrothers=function(t){if(t){var e;if(e=t.parent){var i,n=0,o=0;o=(i=e._childs).length;var r;for(n=0;n<o;n++)(r=i[n])!=Ht.NodeInfoContainer&&r!=t&&(this.saveNodeInfo(r),r.visible=!1)}}},i.saveNodeInfo=function(t){if(gt.idObj(t),!this._stateDic.hasOwnProperty(gt.getObjID(t))){var e;(e={}).target=t,e.visible=t.visible,this._stateDic[gt.getObjID(t)]=e}},i.recoverNodeInfo=function(t){if(gt.idObj(t),this._stateDic.hasOwnProperty(gt.getObjID(t))){var e;e=this._stateDic[gt.getObjID(t)],t.visible=e.visible}},e.init=function(){e.I||(e.I=new e,Ht.init(),zt.init())},e.I=null,e}(),Ht=function(t){function e(){this._infoTxt=null,this._tar=null,e.__super.call(this),this._infoTxt=new U,this._infoTxt.color="#ff0000",this._infoTxt.bgColor="#00ff00",this._infoTxt.fontSize=12}o(e,"laya.debug.view.nodeInfo.NodeInfosItem",G);var r=e.prototype;return r.removeSelf=function(){return this._infoTxt.removeSelf(),laya.display.Node.prototype.removeSelf.call(this)},r.showToUI=function(){e.NodeInfoContainer.nodeRecInfoLayer.addChild(this),this._infoTxt.removeSelf(),e.NodeInfoContainer.txtLayer.addChild(this._infoTxt),this.findOkPos()},r.randomAPos=function(t){this._infoTxt.x=this.x+i.stage.width*Math.random(),this._infoTxt.y=this.y+t*Math.random()},r.findOkPos=function(){var t=0;return t=20,void this.randomAPos(t)},r.isPosOk=function(){var t,n=0,o=0;o=(t=e.NodeInfoContainer.nodeRecInfoLayer._childs).length;var r,a;if((a=this._infoTxt.getBounds()).x<0)return!1;if(a.y<0)return!1;if(a.right>i.stage.width)return!1;for(n=0;n<o;n++)if((r=t[n])!=this._infoTxt&&a.intersects(r.getBounds()))return!1;return!0},r.showInfo=function(t){if(this._tar=t,t){e._txts.length=0;var i,n=0,o=0;for(o=e.showValues.length,t.name?e._txts.push(Q.getClassName(t)+"("+t.name+")"):e._txts.push(Q.getClassName(t)),n=0;n<o;n++)i=e.showValues[n],e._txts.push(i+":"+e.getNodeValue(t,i));this._infoTxt.text=e._txts.join("\n"),this.graphics.clear();var r;!(r=t._getBoundPointsM(!0))||r.length<1||(r=f.pListToPointList(r,!0),Pt.walkArr(r,t.localToGlobal,t),r=f.pointListToPlist(r),e._disBoundRec=L._getWrapRec(r,e._disBoundRec),this.graphics.drawRect(0,0,e._disBoundRec.width,e._disBoundRec.height,null,"#00ffff"),this.pos(e._disBoundRec.x,e._disBoundRec.y))}},r.fresh=function(){this.showInfo(this._tar)},r.clearMe=function(){this._tar=null},r.recover=function(){M.recover("NodeInfosItem",this)},e.init=function(){e.NodeInfoContainer||(Zt.init(),e.NodeInfoContainer=Zt.I,i.stage.addChild(e.NodeInfoContainer))},e.getNodeInfoByNode=function(t){gt.idObj(t);var i=0;return i=gt.getObjID(t),e._nodeInfoDic[i]||(e._nodeInfoDic[i]=new e),e._nodeInfoDic[i]},e.hideAllInfos=function(){var t;for(t in e._nodeInfoDic)e._nodeInfoDic[t].removeSelf();e.clearRelations()},e.showNodeInfo=function(t){var i;(i=e.getNodeInfoByNode(t)).showInfo(t),i.showToUI()},e.showDisInfos=function(t){var i;if(i=t,t){for(;t;)e.showNodeInfo(t),t=t.parent;at.setTop(e.NodeInfoContainer),e.apdtTxtInfoPoss(i),e.updateRelations()}},e.apdtTxtInfoPoss=function(t){var n;for(n=[];t;)n.push(t),t=t.parent;var o,r,a=0,s=0;s=n.length;var l=NaN;l=i.stage.width-150;var h=0;for(h=100,(t=n[0])&&(o=e.getNodeInfoByNode(t))&&(r=o._infoTxt,l=i.stage.width-r.width-10,h=r.height+10),n=n.reverse(),a=0;a<s;a++)t=n[a],(o=e.getNodeInfoByNode(t))&&(r=o._infoTxt).pos(l,h*a)},e.clearRelations=function(){e.NodeInfoContainer.lineLayer.graphics.clear()},e.updateRelations=function(){var t;(t=e.NodeInfoContainer.lineLayer.graphics).clear();var i,n;for(i in e._nodeInfoDic)(n=e._nodeInfoDic[i]).parent&&t.drawLine(n.x,n.y,n._infoTxt.x,n._infoTxt.y,"#0000ff")},e.getNodeValue=function(t,i){var n;switch(e._nodePoint.setTo(0,0),i){case"x":n=t.x+" (g:"+t.localToGlobal(e._nodePoint).x+")";break;case"y":n=t.y+" (g:"+t.localToGlobal(e._nodePoint).y+")";break;default:n=t[i]}return n},e.NodeInfoContainer=null,e._nodeInfoDic={},e._txts=[],n(e,["showValues",function(){return this.showValues=["x","y","scaleX","scaleY","width","height","visible","mouseEnabled"]},"_disBoundRec",function(){return this._disBoundRec=new L},"_nodePoint",function(){return this._nodePoint=new T}]),e}(),Yt=function(t){function e(){this.txt=null,this._tar=null,this.recColor="#00ff00",e.__super.call(this),this.txt=new U,this.txt.color="#ff0000",this.txt.bgColor="#00ff00",this.txt.fontSize=12,this.addChild(this.txt)}o(e,"laya.debug.view.nodeInfo.recinfos.NodeRecInfo",G);var i=e.prototype;return i.setInfo=function(t){this.txt.text=t},i.setTarget=function(t){this._tar=t},i.showInfo=function(t){if(this._tar=t,t&&t._$P){this.graphics.clear();var i;!(i=t._getBoundPointsM(!0))||i.length<1||(i=f.pListToPointList(i,!0),Pt.walkArr(i,t.localToGlobal,t),i=f.pointListToPlist(i),e._disBoundRec=L._getWrapRec(i,e._disBoundRec),this.graphics.drawRect(0,0,e._disBoundRec.width,e._disBoundRec.height,null,et.RECACHE_REC_COLOR,2),this.pos(e._disBoundRec.x,e._disBoundRec.y))}},i.fresh=function(){this.showInfo(this._tar)},i.clearMe=function(){this._tar=null},n(e,["_disBoundRec",function(){return this._disBoundRec=new L}]),e}(),zt=function(t){function e(){e.__super.call(this),F.base64.preLoad(_.create(this,this.showToolBar)),te.init(),St.init();new Kt}o(e,"laya.debug.view.nodeInfo.ToolPanel",G);var i=e.prototype;return i.showToolBar=function(){ne.I.show()},i.createViews=function(){e.typeClassDic.Find=ae,e.typeClassDic.Filter=oe,e.typeClassDic.TxtInfo=me,e.typeClassDic.Tree=ue},i.switchShow=function(t){var e;(e=this.getView(t))&&e.switchShow()},i.getView=function(t){var i;return!(i=e.viewDic[t])&&e.typeClassDic[t]&&(i=e.viewDic[t]=new e.typeClassDic[t]),i},i.showTxtInfo=function(t){pe.I.showTxt(t)},i.showNodeTree=function(t){Ye.I.setDis(t),ne.I.switchToTree()},i.showSelectInStage=function(t){Ye.I.showSelectInStage(t),ne.I.switchToTree()},i.showSelectItems=function(t){ne.I.swichToSelect(),_e.I.setSelectList(t)},e.init=function(){e.I||(e.I=new e)},e.I=null,e.viewDic={},e.Find="Find",e.Filter="Filter",e.TxtInfo="TxtInfo",e.Tree="Tree",n(e,["typeClassDic",function(){return this.typeClassDic={}}]),e}(),jt=function(t){function e(){e.__super.call(this),this.bgColor="#ffff00",this.wordWrap=!1,this.mouseEnabled=!0}return o(e,"laya.debug.tools.debugUI.DButton",U),e}(),Jt=function(t){function e(t){this.type=0,this.preX=NaN,this.preY=NaN,e.__super.call(this)}o(e,"laya.debug.tools.resizer.AutoFillRec",t);var i=e.prototype;return i.changeSize=function(){t.prototype.changeSize.call(this);var e=this.graphics;e.clear(),e.drawRect(0,0,this.width,this.height,"#33c5f5")},i.record=function(){this.preX=this.x,this.preY=this.y},i.getDx=function(){return this.x-this.preX},i.getDy=function(){return this.y-this.preY},e}(u),Kt=function(t){function e(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e.__super.call(this),this._tipBox=new u,this._tipBox.addChild(this._tipText=new U),this._tipText.x=this._tipText.y=5,this._tipText.color=e.tipTextColor,this._defaultTipHandler=this.showDefaultTip,i.stage.on("showtip",this,this.onStageShowTip),i.stage.on("hidetip",this,this.onStageHideTip)}o(e,"laya.debug.tools.TipManagerForDebug",u);var n=e.prototype;return n.onStageHideTip=function(t){i.timer.clear(this,this.showTip),this.closeAll(),this.removeSelf()},n.onStageShowTip=function(t){i.timer.once(e.tipDelay,this,this.showTip,[t],!0)},n.showTip=function(t){if("string"==typeof t){var e=String(t);Boolean(e)&&this._defaultTipHandler(e)}else t instanceof laya.utils.Handler?t.run():"function"==typeof t&&t.apply();i.stage.on("mousemove",this,this.onStageMouseMove),i.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseMove(null)},n.onStageMouseDown=function(t){this.closeAll()},n.onStageMouseMove=function(t){this.showToStage(this,e.offsetX,e.offsetY)},n.showToStage=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=t.getBounds();t.x=i.stage.mouseX+e,t.y=i.stage.mouseY+n,t.x+o.width>i.stage.width&&(t.x-=o.width+e),t.y+o.height>i.stage.height&&(t.y-=o.height+n)},n.closeAll=function(){i.timer.clear(this,this.showTip),i.stage.off("mousemove",this,this.onStageMouseMove),i.stage.off("mousedown",this,this.onStageMouseDown),this.removeChildren()},n.showDisTip=function(t){this.addChild(t),this.showToStage(this),i.stage.addChild(this)},n.showDefaultTip=function(t){this._tipText.text=t;var n=this._tipBox.graphics;n.clear(),n.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e.tipBackColor),this.addChild(this._tipBox),this.showToStage(this),i.stage.addChild(this)},r(0,n,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t}),e.offsetX=10,e.offsetY=15,e.tipTextColor="#ffffff",e.tipBackColor="#111111",e.tipDelay=200,e}(),Qt=function(t){function e(){this.minHandler=null,this.maxHandler=null,this.isFirstShow=!0,this.dis=null,e.__super.call(this),this.dis=this,this.minHandler=new _(this,this.close),this.maxHandler=new _(this,this.show),this.createPanel(),this.dis&&(this.dis.on("mousedown",this,this.bringToTop),this.dis.cacheAsBitmap=!0)}o(e,"laya.debug.view.nodeInfo.views.UIViewBase",u);var n=e.prototype;return n.show=function(){Zt.I.setTop(),Zt.I.popLayer.addChild(this.dis),this.isFirstShow&&(this.firstShowFun(),this.isFirstShow=!1)},n.firstShowFun=function(){this.dis.x=.5*(i.stage.width-this.dis.width),this.dis.y=.5*(i.stage.height-this.dis.height),at.intFyDisPos(this.dis)},n.bringToTop=function(){at.setTop(this.dis)},n.switchShow=function(){this.dis.parent?this.close():this.show()},n.close=function(){this.dis.removeSelf()},n.createPanel=function(){},n.getInput=function(){var t;return(t=new qt).size(200,30),t.fontSize=30,t},n.getButton=function(){var t;return(t=new jt).size(40,30),t.fontSize=30,t},e}(),$t=function(t){function e(){this.isWorking=!1,this.count=0,this.mTime=0,e.__super.call(this),this.txt.fontSize=12}o(e,"laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo",Yt);var n=e.prototype;return n.addCount=function(t){void 0===t&&(t=0),this.count++,this.mTime+=t,this.isWorking||(this.working=!0)},n.updates=function(){this._tar.displayedInStage||(this.working=!1,this.removeSelf()),this.txt.text=Q.getNodeClassAndName(this._tar)+"\nreCache:"+this.count+"\ntime:"+this.mTime,this.count>0?(this.fresh(),i.timer.clear(this,this.removeSelfLater)):(this.working=!1,i.timer.once(3e3,this,this.removeSelfLater)),this.count=0,this.mTime=0},n.removeSelfLater=function(){this.working=!1,this.removeSelf()},r(0,n,"working",null,function(t){this.isWorking=t,t?i.timer.loop(1e3,this,this.updates):i.timer.clear(this,this.updates)}),e.showTime=3e3,e}(),qt=function(t){function e(){e.__super.call(this),this.bgColor="#11ff00"}return o(e,"laya.debug.tools.debugUI.DInput",y),e}(),te=function(t){function e(){this._tY=0,e.__super.call(this),kt.setViewScale(this)}o(e,"laya.debug.uicomps.ContextMenu",a);var n=e.prototype;return n.addItem=function(t){this.addChild(t),t.y=this._tY,this._tY+=t.height,t.on("mousedown",this,this.onClick)},n.onClick=function(t){this.event("select",t),this.removeSelf()},n.show=function(t,n){void 0===t&&(t=-999),void 0===n&&(n=-999),i.timer.once(100,this,e.showMenu,[this,t,n])},e.init=function(){i.stage.on("click",null,e.cleanMenu)},e.cleanMenu=function(t){var i=0,n=0;for(n=e._menuList.length,i=0;i<n;i++)e._menuList[i]&&e._menuList[i].removeSelf();e._menuList.length=0},e.showMenu=function(t,n,o){void 0===n&&(n=-999),void 0===o&&(o=-999),e.cleanMenu(),e.adptMenu(t),i.stage.addChild(t),at.showToStage(t),-999!=n&&-999!=o&&t.pos(n,o),e._menuList.push(t)},e.createMenu=function(t){return e.createMenuByArray(arguments)},e.createMenuByArray=function(t){for(var i,n=new e,o=!1,r=0,a=t.length;r<a;r++){var s=t[r],l={};"string"==typeof s?l.label=s:l=s,""!=l.label?((i=new ee(l.label,o)).data=s,n.addItem(i),o=!1):((i=new ee("",o)).data=s,n.addItem(i),o=!0)}return n.zOrder=9999,n},e.adptMenu=function(t){var e=80,i=80,n=0,o=t.numChildren;for(n=0;n<o;n++)i<(e=t.getChildAt(n).width)&&(i=e);for(n=0;n<o;n++)t.getChildAt(n).width=i},e._menuList=[],e}(),ee=function(t){function e(t,i){this.data=null,this.img=null,e.__super.call(this),this.img||(this.img=new m),""!=t?(this.label=t,this.name=t):(this.label="------",this.height=5,this.mouseEnabled=!1,this.img.skin=F.base64.getAdptUrl("comp/line2.png"),this.img.sizeGrid="0,2,0,2",this.addChild(this.img)),this.labelColors="#000000,#000000,#000000,#000000",this._text.x=10,this._text.padding=[-2,0,0,0],this._text.align="left",this._text.wordWrap=!1,this._text.typeset(),this.width=this._text.width+25,this.sizeGrid="3,3,3,3",this.skin=F.base64.getAdptUrl("comp/button1.png")}o(e,"laya.debug.uicomps.ContextMenuItem",t);return r(0,e.prototype,"width",t.prototype._$get_width,function(t){i.superSet(l,this,"width",t),this.img.width=this.width,this.img.x=0}),e}(l),ie=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.CacheRankView",Qt);var n=e.prototype;return n.createPanel=function(){this.view=new Qe,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),Gt.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.onAutoUpdateChange(),this.fresh()},n.onRightClick=function(){var t;if((t=this.view.itemList).selectedItem){var e;e=t.selectedItem.path,Gt.I.objRightClick(e)}},n.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},n.fresh=function(){J.counter.updates(),this.view.title.text="ReCache排行",Z.enableCacheAnalyse||(this.view.title.text="ReCache排行(未开启)",this.view.title.toolTip="DebugTool.init(true)可开启该功能");var t;t=J.counter.resultNodeDic;var i,n,o,r;r=[];for(i in t)n=t[i],e.filterDebugNodes&&at.isInTree(Zt.I,n)||J.counter.getCount(n)<=0||((o={}).time=J.counter.getCount(n),o.path=n,o.label=Q.getNodeClassAndName(n)+":"+o.time,r.push(o));r.sort(yt.sortByKey("time",!0,!0)),this.view.itemList.array=r},r(0,n,"autoUpdate",null,function(t){i.timer.clear(this,this.fresh),t&&(this.fresh(),i.timer.loop(At.RenderCostMaxTime,this,this.fresh))}),r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),ne=function(t){function e(){this.view=null,this.dragIcon=null,this.tSelectTar=null,this._selectTip=new G,e.__super.call(this),this._selectTip.setBounds(new L(0,0,0,0))}o(e,"laya.debug.view.nodeInfo.views.DebugPanelView",Qt);var a=e.prototype;return a.createPanel=function(){this.view=new Oe,this.dis=this.view,this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,at.setDragingItem(this.view.bg,this.view),at.setDragingItem(this.view.tab,this.view),at.setDragingItem(this.view.clearBtn,this.view),this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Bt.listen("ItemClicked",this,this.itemClicked),kt.setViewScale(this.view),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.clearBtn.on("mousedown",this,this.clearBtnClick)},a.clearBtnClick=function(){Z.clearDebugLayer()},a.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,i.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},a.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),this.selectTarget(st.instance.getDisUnderMouse()),le.I.showByNode(st.instance.getDisUnderMouse(),!1)},a.switchToTree=function(){this.view.tab.selectedIndex=0},a.swichToSelect=function(){this.view.tab.selectedIndex=1},a.itemClicked=function(t){e.isClickSelectState&&(e.ignoreDebugTool&&Zt.I.isDebugItem(t)||t instanceof laya.debug.uicomps.ContextMenuItem||t.parent instanceof laya.debug.uicomps.ContextMenuItem||(zt.I.showSelectInStage(t),le.I.showByNode(t,!1),this.view.selectWhenClick.selected=!1,Z.showDisBound(t),this.clickSelectChange()))},a.selectTarget=function(t){t&&(zt.I.showSelectInStage(t),Z.showDisBound(t))},a.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected,s.onPC&&(this.tSelectTar=null,this.clearSelectTip(),e.isClickSelectState?i.timer.loop(200,this,this.updateSelectTar,null,!0):i.timer.clear(this,this.updateSelectTar))},a.clearSelectTip=function(){this._selectTip.removeSelf()},a.updateSelectTar=function(){if(this.clearSelectTip(),this.tSelectTar=st.instance.getDisUnderMouse(),this.tSelectTar&&!Zt.I.isDebugItem(this.tSelectTar)){var t;(t=this._selectTip.graphics).clear();var e;e=Ut.getGRec(this.tSelectTar),Zt.I.popLayer.addChild(this._selectTip),t.drawRect(0,0,e.width,e.height,null,"#00ffff",2),this._selectTip.pos(e.x,e.y)}},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1,n(e,["tempPos",function(){return this.tempPos=new T}]),e}(),oe=function(t){function e(){this.input=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.FilterView",t);var i=e.prototype;return i.createPanel=function(){this.input=new y,this.input.size(400,500),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=24,this.addChild(this.input)},i.show=function(){this.input.text=Ht.showValues.join("\n"),t.prototype.show.call(this)},i.close=function(){t.prototype.close.call(this),Ht.showValues=this.input.text.split("\n")},e}(Qt),re=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.FindSmallView",Qt);var n=e.prototype;return n.createPanel=function(){this.view=new We,kt.setViewScale(this.view),at.setDragingItem(this.view.bg,this.view),this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),this.dis=this.view},n.onFind=function(){var t;t=this.view.findTxt.text,t=Lt.trimSide(t);var e;e=0==this.view.typeSelect.selectedIndex?Z.findNameHas(t,!1):Z.findClassHas(i.stage,t),zt.I.showSelectItems(e),this.close()},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),ae=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.FindView",Qt);var n=e.prototype;return n.createPanel=function(){this.view=new Ve,at.setDragingItem(this.view.bg,this.view),this.view.result.scrollBar.hide=!0,this.view.result.array=[],this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),Gt.I.setNodeListAction(this.view.result),this.dis=this.view},n.onRightClick=function(){var t;if((t=this.view.result).selectedItem){var e;e=t.selectedItem.path,Gt.I.objRightClick(e)}},n.onFind=function(){var t;t=this.view.findTxt.text,t=Lt.trimSide(t);var e;e=0==this.view.typeSelect.selectedIndex?Z.findNameHas(t,!1):Z.findClassHas(i.stage,t),this.showFindResult(e)},n.showFindResult=function(t){if(t){var e=0,i=0;i=t.length;var n;n=[];var o,r;for(e=0;e<i;e++)r=t[e],(o={}).label=Q.getNodeClassAndName(r),o.path=r,n.push(o);this.view.result.array=n}},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),se=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.NodeListPanelView",Qt);var i=e.prototype;return i.createPanel=function(){this.view=new Ze,this.addChild(this.view),at.setDragingItem(this.view.bg,this.view),Gt.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.itemList.scrollBar.hide=!0,this.dis=this,this.view.itemList.array=[]},i.showList=function(t){this.view.itemList.array=t,this.show()},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),le=function(t){function e(){this.view=null,this.dragIcon=null,this._tar=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.NodeToolView",t);var a=e.prototype;return a.show=function(){this.showByNode()},a.createPanel=function(){this.view=new Xe,this.addChild(this.view),this.view.on("click",this,this.onBtnClick),this.view.closeBtn.on("click",this,this.onCloseBtn),at.setDragingItem(this.view.bg,this.view),this.dis=this.view,this.view.freshBtn.on("click",this,this.onFreshBtn),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown)},a.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,i.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},a.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),laya.debug.view.nodeInfo.views.NodeToolView.I.target&&vt.analyseNode(laya.debug.view.nodeInfo.views.NodeToolView.I.target)},a.onFreshBtn=function(){this._tar&&(this._tar.reCache(),this._tar.repaint())},a.onCloseBtn=function(){this.close()},a.onBtnClick=function(t){if(this._tar){var e;e=t.target,console.log("onBtnClick:",e);switch(e.label){case"父链":Z.showParentChain(this._tar),_e.I.setSelectList(Z.selectedNodes);break;case"子":Z.showAllChild(this._tar),_e.I.setSelectList(Z.selectedNodes);break;case"兄弟":Z.showAllBrother(this._tar),_e.I.setSelectList(Z.selectedNodes);break;case"Enable链":pe.I.dTrace(Z.traceDisMouseEnable(this._tar)),_e.I.setSelectList(Z.selectedNodes);break;case"Size链":pe.I.dTrace(Z.traceDisSizeChain(this._tar)),_e.I.setSelectList(Z.selectedNodes);break;case"隐藏旁支":Xt.I.recoverNodes(),Xt.I.hideOtherChain(this._tar);break;case"隐藏兄弟":Xt.I.recoverNodes(),Xt.I.hideBrothers(this._tar);break;case"隐藏子":Xt.I.recoverNodes(),Xt.I.hideChilds(this._tar);break;case"恢复":Xt.I.recoverNodes();break;case"节点树定位":zt.I.showSelectInStage(this._tar);break;case"显示边框":Z.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"显示切换":this._tar.visible=!this._tar.visible}}},a.showByNode=function(e,n){void 0===n&&(n=!0),e||(e=i.stage),n&&t.prototype.show.call(this),this._tar=e,this.fresh()},a.fresh=function(){this._tar&&(this.view.tarTxt.text=Q.getNodeClassAndName(this._tar))},r(0,a,"target",function(){return this._tar}),r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,n(e,["tempPos",function(){return this.tempPos=new T}]),e}(Qt),he=function(t){function e(){this.view=null,this._handler=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.NodeTreeSettingView",t);var i=e.prototype;return i.createPanel=function(){t.prototype.createPanel.call(this),this.view=new He,kt.setViewScale(this.view),this.addChild(this.view),this.inits(),this.dis=this.view},i.show=function(){t.prototype.show.call(this)},i.showSetting=function(t,e,i){i instanceof laya.display.Node?this.view.showTxt.text=At.defaultFitlerStr.split(",").join("\n"):this.view.showTxt.text=t.join("\n"),this._handler=e,this.show()},i.inits=function(){this.view.okBtn.on("click",this,this.onOkBtn),this.view.closeBtn.on("click",this,this.onCloseBtn),at.setDragingItem(this.view.bg,this.view),this.dis=this.view},i.onCloseBtn=function(){this.close()},i.onOkBtn=function(){this.close();var t;t=this.view.showTxt.text.split("\n"),this._handler&&(this._handler.runWith([t]),this._handler=null)},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(Qt),ue=function(t){function e(){this.nodeTree=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.NodeTreeView",t);var n=e.prototype;return n.show=function(){this.showByNode()},n.showByNode=function(t){t||(t=i.stage),this.nodeTree.setDis(t)},n.createPanel=function(){t.prototype.createPanel.call(this),this.nodeTree||(this.nodeTree=new Ye),this.dis=null;var e;(e=this.nodeTree).top=e.bottom=e.left=e.right=0,this.addChild(e),this.showByNode(i.stage)},n.showSelectInStage=function(t){this.showByNode(i.stage),this.nodeTree.selectByNode(t)},e}(Qt),ce=function(t){function e(){this.view=null,this._menu=null,this._menuItems=["统计详情","增量详情"],this._tSelectKey=null,this.preInfo={},e.__super.call(this),e._I=this}o(e,"laya.debug.view.nodeInfo.views.ObjectCreateView",Qt);var i=e.prototype;return i.createPanel=function(){this.view=new ze,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.itemList.on(Z.getMenuShowEvent(),this,this.onRightClick),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this._menu=te.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this.fresh()},i.onEmunSelect=function(t){if(this._tSelectKey){var e=t.target.data;if("string"==typeof e){var i;switch(e){case"统计详情":(i=Mt.getRunInfo(this._tSelectKey))&&pe.I.showTxt(this._tSelectKey+" createInfo:\n"+i.traceSelfR());break;case"增量详情":(i=Mt.getRunInfo(this._tSelectKey))&&pe.I.showTxt(this._tSelectKey+" createInfo:\n"+i.traceSelfR(i.changeO))}}}},i.onRightClick=function(){var t;if((t=this.view.itemList).selectedItem){var e;e=t.selectedItem.path,this._tSelectKey=e,this._tSelectKey&&this._menu.show()}},i.show=function(){this.fresh()},i.fresh=function(){var t;t=ht.I.createInfo;var e,i;i=[];var n,o;for(e in t)this.preInfo[e]||(this.preInfo[e]=0),(n={}).path=e,n.count=t[e],n.add=t[e]-this.preInfo[e],n.add>0?n.label=e+":"+t[e]+" +"+n.add:n.label=e+":"+t[e],(o=Mt.getRunInfo(e))&&o.record(),n.rank=1e3*n.add+n.count,this.preInfo[e]=t[e],i.push(n);i.sort(yt.sortByKey("rank",!0,!0)),this.view.itemList.array=i},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),de=function(t){function e(){this.view=null,this.showKeys=["x","y","width","height","renderCost"],this._closeSettingHandler=null,this._tar=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.ObjectInfoView",t);var n=e.prototype;return n.createPanel=function(){t.prototype.createPanel.call(this),this.view=new je,kt.setViewScale(this.view),this.addChild(this.view),this.inits()},n.inits=function(){this.view.closeBtn.on("click",this,this.close),this.view.settingBtn.on("click",this,this.onSettingBtn),this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),at.setDragingItem(this.view.bg,this.view),at.setResizeAbleEx(this.view),this._closeSettingHandler=new _(this,this.closeSetting),this.dis=this.view},n.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},n.onSettingBtn=function(){he.I.showSetting(this.showKeys,this._closeSettingHandler,this._tar)},n.reset=function(){this.showKeys=["x","y","width","height","renderCost"]},n.closeSetting=function(t){this.showKeys=t,this.fresh()},n.showObjectInfo=function(t){this._tar=t,this.fresh(),this.show(),this.onAutoUpdateChange()},n.fresh=function(){this._tar?(this.view.title.text=Q.getNodeClassAndName(this._tar),this.view.showTxt.text=e.getObjValueStr(this._tar,this.showKeys,!1)):(this.view.showTxt.text="",this.view.title.text="未选中对象")},n.freshKeyInfos=function(){this.fresh()},n.close=function(){t.prototype.close.call(this),this.autoUpdate=!1,M.recover("ObjectInfoView",this)},n.show=function(){t.prototype.show.call(this)},r(0,n,"autoUpdate",null,function(t){i.timer.clear(this,this.freshKeyInfos),t&&i.timer.loop(2e3,this,this.freshKeyInfos)}),e.getObjValueStr=function(t,i,n){void 0===n&&(n=!0);var o,r=0,a=0;for(e._txts.length=0,a=i.length,n&&(t.name?e._txts.push(Q.getClassName(t)+"("+t.name+")"):e._txts.push(Q.getClassName(t))),r=0;r<a;r++)o=i[r],e._txts.push(o+":"+e.getNodeValue(t,o));return e._txts.join("\n")},e.getNodeValue=function(t,e){var i;if(t instanceof laya.display.Sprite){var n;switch(n=t,e){case"gRec":i=Ut.getGRec(n).toString();break;case"gAlpha":i=Ut.getGAlpha(n)+"";break;case"cmdCount":i=Ut.getNodeCmdCount(n)+"";break;case"cmdAll":i=Ut.getNodeCmdTotalCount(n)+"";break;case"nodeAll":i=""+Ut.getNodeCount(n);break;case"nodeVisible":i=""+Ut.getNodeCount(n,!0);break;case"nodeRender":i=""+Ut.getRenderNodeCount(n);break;case"nodeReCache":i=""+Ut.getReFreshRenderNodeCount(n);break;case"renderCost":i=""+Ct.I.getTime(n);break;case"renderCount":i=""+Ct.I.getCount(n);break;default:i=t[e]+""}}else i=t[e]+"";return i},e.showObject=function(t){var i;(i=M.getItemByClass("ObjectInfoView",e)).reset(),i.showObjectInfo(t)},e._txts=[],e}(Qt),pe=function(t){function e(){this.view=null,e.__super.call(this),Z._logFun=e.log}o(e,"laya.debug.view.nodeInfo.views.OutPutView",Qt);var i=e.prototype;return i.createPanel=function(){this.view=new Je,at.setDragingItem(this.view.txt,this.view),at.setDragingItem(this.view.bg,this.view),kt.setViewScale(this.view),this.view.txt.textField.overflow=U.SCROLL,this.view.txt.textField.wordWrap=!0,this.view.on("mousewheel",this,this.mouseWheel),this.view.txt.text="",at.setResizeAbleEx(this.view),this.view.closeBtn.on("click",this,this.close),this.view.clearBtn.on("click",this,this.onClearBtn),this.dis=this.view},i.onClearBtn=function(){this.clearText()},i.mouseWheel=function(t){this.view.txt.textField.scrollY-=10*t.delta},i.showTxt=function(t){this.view.txt.text=t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},i.clearText=function(){this.view.txt.text=""},i.dTrace=function(t){var e=arguments;this.view.txt.textField.scrollY>1e3&&(this.view.txt.text="");var i,n=0,o=0;for(o=e.length,i=e[0],n=1;n<o;n++)i+=" "+e[n];this.addStr(i)},i.addStr=function(t){this.view.txt.text+="\n"+t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e.log=function(t){e.I.addStr(t)},e._I=null,e}(),fe=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.RenderCostRankView",Qt);var n=e.prototype;return n.createPanel=function(){this.view=new Qe,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),Gt.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.onAutoUpdateChange(),this.fresh(),i.timer.once(5e3,this,this.fresh)},n.onRightClick=function(){var t;if((t=this.view.itemList).selectedItem){var e;e=t.selectedItem.path,Gt.I.objRightClick(e)}},n.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},n.fresh=function(){this.view.title.text="渲染用时排行("+At.RenderCostMaxTime+"ms)";var t;t=Ct.I.nodeDic;var n,o,r,a;a=[];for(n in t)o=t[n],e.filterDebugNodes&&at.isInTree(Zt.I,o)||Ct.I.getTime(o)<=0||((r={}).time=Ct.I.getTime(o),e.filterDebugNodes&&o==i.stage&&(r.time-=Ct.I.getTime(Zt.I)),r.path=o,r.label=Q.getNodeClassAndName(o)+":"+r.time,a.push(r));a.sort(yt.sortByKey("time",!0,!0)),this.view.itemList.array=a},r(0,n,"autoUpdate",null,function(t){i.timer.clear(this,this.fresh),t&&(this.fresh(),i.timer.loop(At.RenderCostMaxTime,this,this.fresh))}),r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),ge=function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.ResRankView",Qt);var n=e.prototype;return n.createPanel=function(){this.view=new Qe,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.view.itemList.on("rightclick",this,this.onRightClick),this.onAutoUpdateChange(),this.fresh()},n.onRightClick=function(){var t;(t=this.view.itemList).selectedItem&&console.log(t.selectedItem.url)},n.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},n.fresh=function(){this.view.title.text="图片缓存列表";var t,e,i;i=[];var n=0,o=0;for(o=(t=Tt.getCachedResList()).length,n=0;n<o;n++){e={};var r;r=(r=t[n]).replace(O.rootPath,""),e.label=r,e.url=r,i.push(e)}this.view.itemList.array=i},r(0,n,"autoUpdate",null,function(t){i.timer.clear(this,this.fresh),t&&(this.fresh(),i.timer.loop(At.RenderCostMaxTime,this,this.fresh))}),r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(),_e=function(t){function e(){this.showKeys=[],this.view=null,this.fliterTxt=null,this.itemList=null,e.__super.call(this),e._I=this,this.setSelectList(null)}o(e,"laya.debug.view.nodeInfo.views.SelectInfosView",Qt);var i=e.prototype;return i.createPanel=function(){this.view=new $e,this.addChild(this.view),this.view.top=this.view.bottom=this.view.left=this.view.right=0,Gt.I.setNodeListAction(this.view.selectList),this.view.closeBtn.on("click",this,this.close),this.view.selectList.scrollBar.hide=!0,this.dis=null,this.view.findBtn.on("click",this,this.onFindBtn),this.fliterTxt=this.view.fliterTxt,this.view.fliterTxt.on("enter",this,this.onFliterTxtChange),this.view.fliterTxt.on("blur",this,this.onFliterTxtChange)},i.onFliterTxtChange=function(t){var e;""==(e=this.fliterTxt.text)?0!=this.showKeys.length&&(this.showKeys.length=0,this.fresh()):e!=this.showKeys.join(",")&&(this.showKeys=e.split(","),this.fresh())},i.onFindBtn=function(){re.I.show()},i.onRightClick=function(){var t;if((t=this.view.selectList).selectedItem){var e;e=t.selectedItem.path,Gt.I.objRightClick(e)}},i.setSelectTarget=function(t){t&&this.setSelectList([t])},i.setSelectList=function(t){this.itemList=t,this.fresh()},i.fresh=function(){var t;if(!(t=this.itemList)||t.length<1)this.view.selectList.array=[];else{var e,i,n=0,o=0;o=t.length;var r;for(r=[],n=0;n<o;n++)e=t[n],(i={}).label=this.getLabelTxt(e),i.path=e,r.push(i);this.view.selectList.array=r}},i.getLabelTxt=function(t){var e;e=Q.getNodeClassAndName(t);var i=0,n=0;for(n=this.showKeys.length,i=0;i<n;i++)e+=","+de.getNodeValue(t,this.showKeys[i]);return e},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(),me=(function(t){function e(){this.view=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.ToolBarView",Qt);var n=e.prototype;n.createPanel=function(){this.view=new qe,this.addChild(this.view),at.setDragingItem(this.view.bg,this.view),this.view.on("click",this,this.onBtnClick),this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Bt.listen("ItemClicked",this,this.itemClicked),this.dis=this.view},n.itemClicked=function(t){e.isClickSelectState&&(at.isInTree(this.view.selectWhenClick,t)||!e.ignoreDebugTool||Zt.I.isDebugItem(t))},n.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected},n.firstShowFun=function(){this.dis.x=i.stage.width-this.dis.width-20,this.dis.y=5},n.onBtnClick=function(t){switch(t.target){case this.view.treeBtn:zt.I.switchShow("Tree");break;case this.view.findBtn:zt.I.switchShow("Find");break;case this.view.clearBtn:Z.clearDebugLayer();break;case this.view.rankBtn:fe.I.show();break;case this.view.nodeRankBtn:ce.I.show();break;case this.view.cacheBtn:Ut.showCachedSpriteRecs()}},r(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1}(),function(t){function e(){this.input=null,this.btn=null,e.__super.call(this)}o(e,"laya.debug.view.nodeInfo.views.TxtInfoView",Qt);var n=e.prototype;return n.createPanel=function(){this.input=new y,this.input.size(200,400),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=12,this.input.wordWrap=!0,this.addChild(this.input),this.btn=this.getButton(),this.btn.text="关闭",this.btn.size(50,20),this.btn.align="center",this.btn.on("mousedown",this,this.onCloseBtn),this.btn.pos(5,this.input.height+5),this.addChild(this.btn)},n.showInfo=function(t){this.input.text=t,this.show()},n.show=function(){Zt.I.setTop(),Zt.I.popLayer.addChild(this),this.x=i.stage.width-this.width,this.y=0},n.onCloseBtn=function(){this.close()},e}()),ye=(function(t){function e(){this.tab=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.CodeUsedResUI",V);var i=e.prototype;i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:359,y:91,skin:"comp/button1.png"},type:"Image"},{props:{x:309,y:283,skin:"comp/line2.png"},type:"Image"},{type:"Tab",child:[{props:{skin:"view/create.png",label:"  对象创建",width:70,height:17,name:"item0"},type:"CheckBox"},{props:{x:70,skin:"view/rendertime.png",label:"渲染用时",width:70,height:19,name:"item1"},type:"CheckBox"},{props:{x:140,skin:"view/cache.png",label:"Cache",width:70,height:16,name:"item2"},type:"CheckBox"}],props:{x:76,y:210,selectedIndex:0,var:"tab"}}],props:{width:600,height:400,base64pic:!0}}}])}(),function(t){function e(){e.__super.call(this)}o(e,"laya.debug.ui.debugui.comps.ListItemUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:244,height:19},child:[{type:"Clip",props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:2,right:2,x:0}},{type:"Label",props:{x:25,text:"render",color:"#dcea36",width:77,height:17,name:"label",y:2,fontSize:12}},{type:"Clip",props:{skin:"comp/clip_tree_arrow.png",clipY:2,name:"arrow",x:8,y:4,mouseEnabled:!1}}]}}]),e}()),ve=function(t){function e(){e.__super.call(this)}o(e,"laya.debug.ui.debugui.comps.RankListItemUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:0,right:0,x:0},type:"Clip"},{props:{text:"render",color:"#a0a0a0",height:15,name:"label",y:2,left:11,right:5,fontSize:12,x:11,width:163},type:"Label"}],props:{width:179,height:19}}}]),e}(),Ie=function(t){function e(){this.bg=null,this.minBtn=null,this.treePanel=null,this.selectWhenClick=null,this.profilePanel=null,this.resizeBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,this.clearBtn=null,this.selectPanel=null,this.tab=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.DebugPanelUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",Fe),V.regComponent("laya.debug.view.nodeInfo.views.NodeTreeView",ue),V.regComponent("laya.debug.view.nodeInfo.nodetree.Profile",Ke),V.regComponent("laya.debug.view.nodeInfo.views.SelectInfosView",_e)},n(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:260,height:400},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Image",props:{y:0,skin:"view/bg_top.png",left:0,right:0}},{type:"MinBtnComp",props:{y:-3,var:"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp",right:-3,x:207}},{type:"NodeTree",props:{left:0,right:0,top:32,bottom:0,name:"节点树",var:"treePanel",runtime:"laya.debug.view.nodeInfo.views.NodeTreeView"}},{type:"CheckBox",props:{x:8,y:9,skin:"view/clickselect.png",toolTip:"点击选取",var:"selectWhenClick",mouseEnabled:!0,width:14,height:14}},{type:"Profile",props:{name:"性能",top:32,right:0,left:0,bottom:0,var:"profilePanel",runtime:"laya.debug.view.nodeInfo.nodetree.Profile"}},{type:"Button",props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",var:"resizeBtn",stateNum:3}},{type:"Clip",props:{y:9,skin:"view/clickanalyse.png",var:"mouseAnalyseBtn",toolTip:"拖动选取",left:33,x:33,clipY:3}},{type:"Clip",props:{y:0,skin:"view/clickanalyse.png",var:"dragIcon",x:33,clipY:3}},{type:"Button",props:{y:7,skin:"view/res.png",stateNum:2,toolTip:"清除边框",var:"clearBtn",right:34,x:184}},{type:"SelectInfos",props:{top:32,left:0,right:0,bottom:0,name:"选中",var:"selectPanel",runtime:"laya.debug.view.nodeInfo.views.SelectInfosView"}},{type:"Tab",props:{x:59,y:0,name:"tab",var:"tab",selectedIndex:0},child:[{type:"Button",props:{skin:"view/tab_panel.png",label:"节点",width:42,height:32,name:"item0",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:42,skin:"view/tab_panel.png",label:"查询",width:42,height:32,name:"item1",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:84,skin:"view/tab_panel.png",label:"性能",width:42,height:32,name:"item2",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}}]}]}}]),e}(),we=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.findBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.FindNodeSmallUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_tool.png",left:0,right:0,top:0,bottom:0,var:"bg"},type:"Image"},{props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#288edf",var:"title"},type:"Label"},{props:{x:60,y:81,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,var:"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:27,y:83,text:"类型",width:27,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:7,y:40,text:"包含内容",width:47,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:60,y:37,skin:"comp/textinput.png",text:"Sprite",width:164,height:22,var:"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{props:{x:158,y:79,skin:"comp/button.png",label:"查找",width:65,height:23,var:"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{base64pic:!0,width:233,height:120}}}]),e}(),be=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.result=null,this.findBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.FindNodeUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.RankListItem",ke)},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#88ef19",var:"title"},type:"Label"},{props:{x:52,y:75,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,var:"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:10,y:77,text:"类型",width:27,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:7,y:34,text:"包含内容",width:47,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:59,y:31,skin:"comp/textinput.png",text:"Sprite",width:131,height:22,var:"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{type:"List",child:[{type:"RankListItem",props:{y:30,left:5,right:5,name:"render",x:30,runtime:"laya.debug.uicomps.RankListItem"}}],props:{x:6,y:106,width:188,height:180,vScrollBarSkin:"comp/vscroll.png",var:"result"}},{props:{x:125,y:73,skin:"comp/button.png",label:"查找",width:65,height:23,var:"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(),Ce=function(t){function e(){this.minBtn=null,this.maxUI=null,this.bg=null,this.maxBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.MinBtnCompUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:7,y:8,skin:"comp/minBtn.png",stateNum:"3",var:"minBtn",width:22,height:20,toolTip:"最小化"},type:"Button"},{type:"Box",child:[{props:{x:0,y:0,skin:"view/bg_panel.png",var:"bg",width:36,height:36,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:6,y:8,skin:"view/zoom_out.png",stateNum:"2",var:"maxBtn"},type:"Button"}],props:{var:"maxUI"}}],props:{width:36,height:36,base64pic:!0}}}]),e}(),Se=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.NodeListPanelUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.RankListItem",ke)},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:235,y:284,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:204,y:32,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!0},type:"Button"},{props:{x:10,y:6,text:"节点信息",width:147,height:16,color:"#288edf",var:"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",left:2,right:2,top:26,bottom:0,repeatX:1,x:20}}],props:{width:200,height:300}}}]),e}(),xe=function(t){function e(){this.bg=null,this.closeBtn=null,this.tarTxt=null,this.freshBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.NodeToolUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:200,height:341},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{x:9,y:5,text:"当前选中对象",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:195,y:25,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2}},{type:"Label",props:{x:10,y:25,text:"当前对象",width:67,height:16,color:"#a0a0a0",var:"tarTxt"}},{type:"Button",props:{x:15,y:65,skin:"comp/button.png",label:"父链",width:39,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:66,y:65,skin:"comp/button.png",label:"子",width:35,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:112,y:65,skin:"comp/button.png",label:"兄弟",width:49,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:117,skin:"comp/button.png",label:"Enable链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:117,skin:"comp/button.png",label:"Size链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:14,y:97,text:"节点链信息",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:15,y:45,text:"对象选取",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:16,y:145,text:"节点显示",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:13,y:164,skin:"comp/button.png",label:"隐藏旁支",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:164,skin:"comp/button.png",label:"隐藏兄弟",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:197,skin:"comp/button.png",label:"隐藏子",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:197,skin:"comp/button.png",label:"恢复",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:15,y:228,text:"其他",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:12,y:247,skin:"comp/button.png",label:"节点树定位",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:247,skin:"comp/button.png",label:"显示边框",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:12,y:315,text:"Alt+A分析鼠标能否够点中对象",width:173,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:156,y:1,skin:"view/refresh2.png",var:"freshBtn",left:156,toolTip:"recache节点"}},{type:"Button",props:{x:12,y:279,skin:"comp/button.png",label:"输出到控制台",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:279,skin:"comp/button.png",label:"显示切换",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Clip",props:{y:44,skin:"view/clickanalyse.png",var:"mouseAnalyseBtn",toolTip:"拖动到对象上方判断是否能够点中",left:84,x:84,clipY:3}},{type:"Clip",props:{y:35,skin:"view/clickanalyse.png",var:"dragIcon",x:94,clipY:3}}]}}]),e}(),Te=function(t){function e(){this.bg=null,this.showTxt=null,this.okBtn=null,this.closeBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.NodeTreeSettingUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:0,y:0,skin:"view/bg_panel.png",left:0,top:0,bottom:0,right:0,var:"bg",width:200,height:300,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:9,y:7,text:"要显示的属性",width:76,height:16,color:"#ffffff",align:"left"},type:"Label"},{props:{x:6,y:29,skin:"comp/textinput.png",text:"x\\ny\\nwidth\\nheight",width:188,height:230,multiline:!0,var:"showTxt",color:"#a0a0a0",sizeGrid:"5,5,5,5"},type:"TextInput"},{props:{x:57,y:269,skin:"comp/button.png",label:"确定",var:"okBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"},{props:{x:175,y:5,skin:"view/btn_close.png",var:"closeBtn"},type:"Button"}],props:{base64pic:!0,width:200,height:300}}}]),e}(),Me=function(t){function e(){this.nodeTree=null,this.controlBar=null,this.settingBtn=null,this.freshBtn=null,this.fliterTxt=null,this.closeBtn=null,this.ifShowProps=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.NodeTreeUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.TreeListItem",Be)},n(e,["uiView",function(){return this.uiView={type:"View",props:{width:200,height:260,base64pic:!0},child:[{type:"Image",props:{x:-22,y:-47,skin:"view/bg_panel.png",width:211,height:206,left:0,right:0,top:0,bottom:0,sizeGrid:"5,5,5,5"}},{props:{y:0,skin:"view/bg_tool.png",left:0,right:0},type:"Image"},{type:"Tree",props:{x:0,scrollBarSkin:"comp/vscroll.png",width:195,height:229,var:"nodeTree",left:0,right:0,top:38,bottom:20},child:[{type:"ListItem",props:{y:0,name:"render",left:0,right:0,runtime:"laya.debug.uicomps.TreeListItem"}}]},{type:"Box",props:{x:3,y:5,var:"controlBar",left:3,right:3,top:5,height:23},child:[{type:"Button",props:{x:6,skin:"view/setting.png",stateNum:3,var:"settingBtn",toolTip:"设置显示的属性",y:6}},{type:"Button",props:{y:6,skin:"view/refresh.png",var:"freshBtn",left:30,toolTip:"刷新数据"}},{type:"TextInput",props:{y:0,skin:"view/bg_top.png",height:22,var:"fliterTxt",left:53,right:0,color:"#a0a0a0"}},{type:"Button",props:{x:172,y:2,skin:"view/btn_close.png",var:"closeBtn",right:1,visible:!1}}]},{props:{y:243,skin:"comp/checkbox.png",label:"显示属性",var:"ifShowProps",bottom:3,selected:!0,visible:!0,x:2,width:70,height:14,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"}]}}]),e}(),Le=function(t){function e(){this.bg=null,this.closeBtn=null,this.itemList=null,this.freshBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.ObjectCreateUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.RankListItem",ke)},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:215,y:264,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:184,y:12,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:11,y:5,text:"对象创建统计",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{y:0,left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",top:26,bottom:5,left:5,right:5,repeatX:1}},{props:{y:1,skin:"view/refresh2.png",var:"freshBtn",toolTip:"刷新数据",right:1,x:178},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(),De=function(t){function e(){this.bg=null,this.title=null,this.showTxt=null,this.closeBtn=null,this.autoUpdate=null,this.settingBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.ObjectInfoUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:-1,y:0,skin:"view/bg_panel.png",left:-1,right:1,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:7,y:5,text:"对象类型",width:67,height:20,color:"#ffffff",var:"title",left:7,right:6},type:"Label"},{props:{x:2,skin:"comp/textinput.png",text:"属性内容",width:196,height:228,left:2,right:2,var:"showTxt",top:25,bottom:20,editable:!1,multiline:!0,sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextArea"},{props:{x:178,y:4,skin:"view/btn_close.png",var:"closeBtn",top:4,right:2},type:"Button"},{props:{skin:"comp/checkbox.png",label:"自动刷新属性",var:"autoUpdate",bottom:2,x:3,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{x:164,skin:"view/setting.png",stateNum:"3",var:"settingBtn",y:6,top:6,right:24,toolTip:"设置显示属性"},type:"Button"},{props:{x:179,y:257,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}],props:{base64pic:!0,width:200,height:200}}}]),e}(),Ee=function(t){function e(){this.bg=null,this.txt=null,this.closeBtn=null,this.clearBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.OutPutUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},n(e,["uiView",function(){return this.uiView={type:"View",props:{width:300,height:200,base64pic:!0},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{skin:"comp/textarea.png",text:"TextArea",color:"#a0a0a0",var:"txt",left:5,right:5,top:22,bottom:5,mouseEnabled:!0,sizeGrid:"3,3,3,3"}},{type:"Button",props:{x:185,y:15,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2}},{props:{x:253,y:1,skin:"view/re.png",stateNum:"2",var:"clearBtn",right:25},type:"Button"},{props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}]}}]),e}(),Re=function(t){function e(){this.renderPanel=null,this.createPanel=null,this.cachePanel=null,this.tab=null,this.resPanel=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.ProfileUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.view.nodeInfo.views.RenderCostRankView",fe),V.regComponent("laya.debug.view.nodeInfo.views.ObjectCreateView",ce),V.regComponent("laya.debug.view.nodeInfo.views.CacheRankView",ie),V.regComponent("laya.debug.view.nodeInfo.views.ResRankView",ge)},n(e,["uiView",function(){return this.uiView={type:"View",props:{width:260,height:329,base64pic:!0},child:[{type:"Image",props:{y:0,skin:"view/bg_tool.png",right:0,left:0}},{type:"Rank",props:{var:"renderPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.RenderCostRankView",right:0,name:"渲染用时",left:0,bottom:0}},{type:"ObjectCreate",props:{var:"createPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ObjectCreateView",right:0,name:"对象创建统计",left:0,bottom:0}},{type:"Rank",props:{x:10,var:"cachePanel",top:29,runtime:"laya.debug.view.nodeInfo.views.CacheRankView",right:0,name:"cache用时",left:0,bottom:0}},{type:"Tab",props:{y:9,x:7,width:191,var:"tab",selectedIndex:0,height:19},child:[{type:"CheckBox",props:{y:0,x:0,width:50,skin:"view/create.png",name:"item0",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:"  对象",height:17}},{type:"CheckBox",props:{y:0,x:55,width:50,skin:"view/rendertime.png",name:"item1",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 渲染",height:19}},{type:"CheckBox",props:{y:0,x:110,width:50,skin:"view/cache.png",name:"item2",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 重绘",height:16}},{type:"CheckBox",props:{y:0,x:165,width:50,skin:"view/cache.png",name:"item3",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 资源",height:16}}]},{type:"Rank",props:{y:40,x:50,var:"resPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ResRankView",right:0,name:"资源缓存",left:0,bottom:0}}]}}]),e}(),Pe=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,this.autoUpdate=null,this.freshBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.RankUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.RankListItem",ke)},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:225,y:274,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:194,y:22,skin:"view/btn_close.png",var:"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:8,y:5,text:"渲染用时表(3000ms)",width:109,height:16,color:"#288edf",var:"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"itemList",left:2,right:2,top:26,bottom:25,repeatX:1,x:10,y:10}},{props:{skin:"comp/checkbox.png",label:"自动刷新属性",var:"autoUpdate",bottom:3,selected:!1,visible:!0,left:2,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{y:1,skin:"view/refresh2.png",var:"freshBtn",toolTip:"刷新数据",right:1},type:"Button"}],props:{width:200,height:300}}}]),e}(),Ne=function(t){function e(){this.bg=null,this.closeBtn=null,this.selectList=null,this.findBtn=null,this.fliterTxt=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.SelectInfosUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.uicomps.RankListItem",ke)},n(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{skin:"view/btn_close.png",var:"closeBtn",top:32,visible:!1,right:2},type:"Button"},{props:{x:7,y:36,text:"当前选中列表",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png",var:"selectList",left:5,right:5,top:56,bottom:25,repeatX:1,x:20}},{props:{x:6,text:"Alt+V选取鼠标下的对象",width:189,height:16,color:"#a0a0a0",bottom:3},type:"Label"},{type:"Image",props:{y:0,skin:"view/bg_tool.png",left:0,right:0}},{type:"Clip",props:{y:6,skin:"view/search.png",clipY:2,var:"findBtn",right:5,toolTip:"查找",x:174}},{type:"TextInput",props:{y:6,skin:"view/bg_top.png",height:22,var:"fliterTxt",left:8,right:45,color:"#a0a0a0",x:8,width:147}}],props:{width:200,height:300,base64pic:!0}}}]),e}(),Ge=function(t){function e(){this.bg=null,this.treeBtn=null,this.findBtn=null,this.minBtn=null,this.selectWhenClick=null,this.clearBtn=null,this.rankBtn=null,this.nodeRankBtn=null,this.cacheBtn=null,e.__super.call(this)}o(e,"laya.debug.ui.debugui.ToolBarUI",V);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){V.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",Fe)},n(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:250,height:30},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,var:"bg",sizeGrid:"5,5,5,5"}},{type:"Button",props:{x:2,y:6,skin:"view/save.png",stateNum:2,var:"treeBtn",toolTip:"节点树"}},{type:"Button",props:{x:25,y:6,skin:"view/save.png",stateNum:2,var:"findBtn",toolTip:"查找面板"}},{type:"MinBtnComp",props:{x:218,y:-3,var:"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp"}},{type:"CheckBox",props:{x:124,y:8,skin:"comp/checkbox.png",label:"点击选取",var:"selectWhenClick",labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"}},{type:"Button",props:{x:193,y:5,skin:"view/res.png",stateNum:2,toolTip:"清除边框",var:"clearBtn"}},{type:"Button",props:{x:49,y:6,skin:"view/save.png",stateNum:2,var:"rankBtn",toolTip:"渲染用时排行"}},{type:"Button",props:{x:72,y:6,skin:"view/save.png",stateNum:2,var:"nodeRankBtn",toolTip:"创建对象排行"}},{type:"Button",props:{x:94,y:6,skin:"view/save.png",stateNum:2,var:"cacheBtn",toolTip:"cache对象"}}]}}]),e}(),Ae=function(t){function e(){e.__super.call(this)}o(e,"laya.debug.uicomps.ListBase",t);return r(0,e.prototype,"selectedIndex",t.prototype._$get_selectedIndex,function(t){if(this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t)),this.selectEnable&&this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;(t<this._startIndex||t+e>this._startIndex+this.repeatX*this.repeatY)&&this.scrollTo(t)}}),e}(v),Ue=function(t){function e(){e.__super.call(this)}o(e,"laya.debug.uicomps.TreeBase",B);return e.prototype.createChildren=function(){this.addChild(this._list=new Ae),this._list.renderHandler=_.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},e}(),ke=function(t){function e(){e.__super.call(this),F.replaceRes(ve.uiView),this.createView(ve.uiView)}o(e,"laya.debug.uicomps.RankListItem",ve);return e.prototype.createChildren=function(){},e}(),Be=function(t){function e(){e.__super.call(this),F.replaceRes(ye.uiView),this.createView(ye.uiView)}o(e,"laya.debug.uicomps.TreeListItem",ye);return e.prototype.createChildren=function(){},e}(),Oe=function(t){function e(){this.views=null,e.__super.call(this),this.msRec=new L,F.replaceRes(Ie.uiView),this.createView(Ie.uiView),at.setResizeAbleEx(this),this.views=[this.treePanel,this.selectPanel,this.profilePanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange),this.changeSize()}o(e,"laya.debug.view.nodeInfo.nodetree.DebugPage",Ie);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){at.addOnlyByIndex(this.views,this.tab.selectedIndex,this),at.setTop(this.resizeBtn)},i.changeSize=function(){this.width<245&&(this.width=245),this.height<100&&(this.height=200),laya.ui.Component.prototype.changeSize.call(this),this.msRec.setTo(0,0,this.width,this.height),this.scrollRect=this.msRec},e}(),We=function(t){function e(){e.__super.call(this),F.replaceRes(we.uiView),this.createView(we.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.FindNodeSmall",we);return e.prototype.createChildren=function(){},e}(),Ve=function(t){function e(){e.__super.call(this),F.replaceRes(be.uiView),this.createView(be.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.FindNode",be);return e.prototype.createChildren=function(){this.viewMapRegists()},e}(),Fe=function(t){function e(){this.tar=null,this.minHandler=null,this.maxHandler=null,this.prePos=new T,e.__super.call(this),F.replaceRes(Ce.uiView),this.createView(Ce.uiView),this.init()}o(e,"laya.debug.view.nodeInfo.nodetree.MinBtnComp",Ce);var i=e.prototype;return i.createChildren=function(){},i.init=function(){this.minBtn.on("click",this,this.onMinBtn),this.maxBtn.on("click",this,this.onMaxBtn),this.minState=!1,this.maxUI.removeSelf(),at.setDragingItem(this.bg,this.maxUI)},i.onMaxBtn=function(){this.maxUI.removeSelf(),this.maxHandler&&this.maxHandler.run(),this.tar&&(this.tar.x+=this.maxUI.x-this.prePos.x,this.tar.y+=this.maxUI.y-this.prePos.y)},i.onMinBtn=function(){if(this.displayedInStage){var t;(t=T.TEMP).setTo(0,0),t=this.localToGlobal(t),t=Zt.I.popLayer.globalToLocal(t),this.maxUI.pos(t.x,t.y),Zt.I.popLayer.addChild(this.maxUI),this.tar&&this.prePos.setTo(t.x,t.y),this.minHandler&&this.minHandler.run()}},r(0,i,"minState",null,function(t){}),e}(),Ze=function(t){function e(){e.__super.call(this),F.replaceRes(Se.uiView),this.createView(Se.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.NodeListPanel",Se);return e.prototype.createChildren=function(){this.viewMapRegists()},e}(),Xe=function(t){function e(){e.__super.call(this),F.replaceRes(xe.uiView),this.createView(xe.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.NodeTool",xe);return e.prototype.createChildren=function(){},e}(),He=function(t){function e(){e.__super.call(this),F.replaceRes(Te.uiView),this.createView(Te.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.NodeTreeSetting",Te);return e.prototype.createChildren=function(){},e}(),Ye=function(t){function e(){this.showProps=!1,this._closeSettingHandler=null,this._tar=null,e.__super.call(this),F.replaceRes(Me.uiView),V.regComponent("Tree",Ue),this.createView(Me.uiView),V.regComponent("Tree",B),this.inits(),e.I=this}o(e,"laya.debug.view.nodeInfo.nodetree.NodeTree",Me);var r=e.prototype;return r.createChildren=function(){this.viewMapRegists()},r.inits=function(){this.nodeTree.list.scrollBar.hide=!0,this.nodeTree.list.selectEnable=!0,this.settingBtn.on("click",this,this.onSettingBtn),this.freshBtn.on("click",this,this.fresh),this.closeBtn.on("click",this,this.onCloseBtn),this.fliterTxt.on("enter",this,this.onFliterTxtChange),this.fliterTxt.on("blur",this,this.onFliterTxtChange),Gt.I.setNodeListAction(this.nodeTree.list),this.nodeTree.list.on("click",this,this.onListClick,[this.nodeTree.list]),this.nodeTree.renderHandler=new _(this,this.treeRender),this._closeSettingHandler=new _(this,this.closeSetting),this.onIfShowPropsChange(),this.ifShowProps.on("change",this,this.onIfShowPropsChange)},r.onIfShowPropsChange=function(){this.showProps=this.ifShowProps.selected,this.fresh()},r.onListClick=function(t){t.selectedItem&&t.selectedItem.isDirectory&&(t.selectedItem.isOpen=!t.selectedItem.isOpen,this.nodeTree.fresh())},r.onFindBtn=function(){re.I.show()},r.onCloseBtn=function(){this.removeSelf()},r.onTreeDoubleClick=function(t){if(this.nodeTree.selectedItem){var e;e=this.nodeTree.selectedItem.path,Gt.I.objRightClick(e)}},r.onTreeRightMouseDown=function(t){if(this.nodeTree.selectedItem){var e;e=this.nodeTree.selectedItem.path,Gt.I.objRightClick(e)}},r.onSettingBtn=function(){he.I.showSetting(e.showKeys,this._closeSettingHandler,this._tar)},r.closeSetting=function(t){e.showKeys=t,this.fresh()},r.onFliterTxtChange=function(t){var i;""!=(i=this.fliterTxt.text)&&i!=e.showKeys.join(",")&&(e.showKeys=i.split(","),this.fresh())},r.selecteByFile=function(t){var e;e=this.nodeTree.source;var i;if((i=Z.findNameHas(t,!1))&&i.length>0){var n;n=i[0],this.parseOpen(e,n)}},r.showSelectInStage=function(t){this.setDis(i.stage),this.selectByNode(t)},r.selectByNode=function(t){if(t){var e;e=this.nodeTree.source,this.parseOpen(e,t)}},r.showNodeList=function(t){if(t){var e=0,i=0;i=t.length;var n;n=[];var o,r;for(e=0;e<i;e++)r=t[e],(o={}).label=Q.getNodeClassAndName(r),o.path=r,n.push(o);this.nodeTree.array=n}},r.parseOpen=function(t,e){if(!(t.length<1)&&e){var i=0,n=0;n=t.length;var o;for(i=0;i<n;i++)if((o=t[i]).path==e){var r;for(r=o;o;)o.isOpen=!0,this.nodeTree.fresh(),o=o.nodeParent;return void(this.nodeTree.selectedItem=r)}}},r.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var n;for(var o in t)(n=t[o]).isDirectory&&String(n.label).toLowerCase().indexOf(i)>-1&&(n.x=0,e.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,e,i)},r.onControlDown=function(){this.startDrag()},r.setDis=function(t){this._tar=t,this.fresh()},r.fresh=function(){var t;if(this.nodeTree.selectedItem){var i;for(i=this.nodeTree.selectedItem;i&&!(i.path instanceof laya.display.Sprite);)i=i.nodeParent;i&&i.path&&(t=i.path)}this._tar?this.nodeTree.array=Ut.getNodeTreeData(this._tar,this.showProps?e.showKeys:e.emptyShowKey):this.nodeTree.array=[],t&&this.selectByNode(t)},r.treeRender=function(t,e){var i=t.dataSource;if(i){i.child||i.isDirectory;var n=t.getChildByName("label");i.path instanceof laya.display.Node?n.color="#09a4f6":i.isChilds?n.color="#00ff11":n.color="#838bc5"}},e.I=null,e.emptyShowKey=[],n(e,["showKeys",function(){return this.showKeys=["x","y","width","height","renderCost"]}]),e}(),ze=function(t){function e(){e.__super.call(this),F.replaceRes(Le.uiView),this.createView(Le.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.ObjectCreate",Le);return e.prototype.createChildren=function(){this.viewMapRegists()},e}(),je=function(t){function e(){e.__super.call(this),F.replaceRes(De.uiView),this.createView(De.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.ObjectInfo",De);return e.prototype.createChildren=function(){},e}(),Je=function(t){function e(){e.__super.call(this),F.replaceRes(Ee.uiView),this.createView(Ee.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.OutPut",Ee);return e.prototype.createChildren=function(){},e}(),Ke=function(t){function e(){this.views=null,e.__super.call(this),F.replaceRes(Re.uiView),this.createView(Re.uiView),this.views=[this.createPanel,this.renderPanel,this.cachePanel,this.resPanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange)}o(e,"laya.debug.view.nodeInfo.nodetree.Profile",Re);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){at.addOnlyByIndex(this.views,this.tab.selectedIndex,this)},e}(),Qe=function(t){function e(){e.__super.call(this),F.replaceRes(Pe.uiView),this.createView(Pe.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.Rank",Pe);return e.prototype.createChildren=function(){this.viewMapRegists()},e}(),$e=function(t){function e(){e.__super.call(this),F.replaceRes(Ne.uiView),this.createView(Ne.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.SelectInfos",Ne);return e.prototype.createChildren=function(){this.viewMapRegists()},e}(),qe=function(t){function e(){e.__super.call(this),F.replaceRes(Ge.uiView),this.createView(Ge.uiView)}o(e,"laya.debug.view.nodeInfo.nodetree.ToolBar",Ge);return e.prototype.createChildren=function(){},e}()}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}});var puremvc;!function(t){"use strict";var e=function(){function t(t,e){this.notify=null,this.context=null,this.setNotifyMethod(t),this.setNotifyContext(e)}return t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.setNotifyMethod=function(t){this.notify=t},t.prototype.getNotifyContext=function(){return this.context},t.prototype.setNotifyContext=function(t){this.context=t},t.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},t.prototype.compareNotifyContext=function(t){return t===this.context},t}();t.Observer=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(){if(this.mediatorMap=null,this.observerMap=null,e.instance)throw Error(e.SINGLETON_MSG);e.instance=this,this.mediatorMap={},this.observerMap={},this.initializeView()}return e.prototype.initializeView=function(){},e.prototype.registerObserver=function(t,e){var i=this.observerMap[t];i?i.push(e):this.observerMap[t]=[e]},e.prototype.removeObserver=function(t,e){for(var i=this.observerMap[t],n=i.length;n--;){if(i[n].compareNotifyContext(e)){i.splice(n,1);break}}0==i.length&&delete this.observerMap[t]},e.prototype.notifyObservers=function(t){var e=t.getName(),i=this.observerMap[e];if(i)for(var n=i.slice(0),o=n.length,r=0;r<o;r++){n[r].notifyObserver(t)}},e.prototype.registerMediator=function(e){var i=e.getMediatorName();if(!this.mediatorMap[i]){this.mediatorMap[i]=e;var n=e.listNotificationInterests(),o=n.length;if(o>0)for(var r=new t.Observer(e.handleNotification,e),a=0;a<o;a++)this.registerObserver(n[a],r);e.onRegister()}},e.prototype.retrieveMediator=function(t){return this.mediatorMap[t]||null},e.prototype.removeMediator=function(t){var e=this.mediatorMap[t];if(!e)return null;for(var i=e.listNotificationInterests(),n=i.length;n--;)this.removeObserver(i[n],e);return delete this.mediatorMap[t],e.onRemove(),e},e.prototype.hasMediator=function(t){return null!=this.mediatorMap[t]},e.SINGLETON_MSG="View singleton already constructed!",e.instance=null,e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();t.View=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(){if(this.view=null,this.commandMap=null,e.instance)throw Error(e.SINGLETON_MSG);e.instance=this,this.commandMap={},this.initializeController()}return e.prototype.initializeController=function(){this.view=t.View.getInstance()},e.prototype.executeCommand=function(t){var e=this.commandMap[t.getName()];if(e){(new e).execute(t)}},e.prototype.registerCommand=function(e,i){this.commandMap[e]||this.view.registerObserver(e,new t.Observer(this.executeCommand,this)),this.commandMap[e]=i},e.prototype.hasCommand=function(t){return null!=this.commandMap[t]},e.prototype.removeCommand=function(t){this.hasCommand(t)&&(this.view.removeObserver(t,this),delete this.commandMap[t])},e.instance=null,e.SINGLETON_MSG="Controller singleton already constructed!",e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();t.Controller=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function t(){if(this.proxyMap=null,t.instance)throw Error(t.SINGLETON_MSG);t.instance=this,this.proxyMap={},this.initializeModel()}return t.prototype.initializeModel=function(){},t.prototype.registerProxy=function(t){this.proxyMap[t.getProxyName()]=t,t.onRegister()},t.prototype.removeProxy=function(t){var e=this.proxyMap[t];return e&&(delete this.proxyMap[t],e.onRemove()),e},t.prototype.retrieveProxy=function(t){return this.proxyMap[t]||null},t.prototype.hasProxy=function(t){return null!=this.proxyMap[t]},t.SINGLETON_MSG="Model singleton already constructed!",t.instance=null,t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();t.Model=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function t(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.name=null,this.body=null,this.type=null,this.name=t,this.body=e,this.type=i}return t.prototype.getName=function(){return this.name},t.prototype.setBody=function(t){this.body=t},t.prototype.getBody=function(){return this.body},t.prototype.setType=function(t){this.type=t},t.prototype.getType=function(){return this.type},t.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.getBody()?"null":this.getBody().toString()),t+="\nType:"+(null==this.getType()?"null":this.getType())},t}();t.Notification=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(){if(this.model=null,this.view=null,this.controller=null,e.instance)throw Error(e.SINGLETON_MSG);e.instance=this,this.initializeFacade()}return e.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},e.prototype.initializeModel=function(){this.model||(this.model=t.Model.getInstance())},e.prototype.initializeController=function(){this.controller||(this.controller=t.Controller.getInstance())},e.prototype.initializeView=function(){this.view||(this.view=t.View.getInstance())},e.prototype.registerCommand=function(t,e){this.controller.registerCommand(t,e)},e.prototype.removeCommand=function(t){this.controller.removeCommand(t)},e.prototype.hasCommand=function(t){return this.controller.hasCommand(t)},e.prototype.registerProxy=function(t){this.model.registerProxy(t)},e.prototype.retrieveProxy=function(t){return this.model.retrieveProxy(t)},e.prototype.removeProxy=function(t){var e;return this.model&&(e=this.model.removeProxy(t)),e},e.prototype.hasProxy=function(t){return this.model.hasProxy(t)},e.prototype.registerMediator=function(t){this.view&&this.view.registerMediator(t)},e.prototype.retrieveMediator=function(t){return this.view.retrieveMediator(t)},e.prototype.removeMediator=function(t){var e;return this.view&&(e=this.view.removeMediator(t)),e},e.prototype.hasMediator=function(t){return this.view.hasMediator(t)},e.prototype.notifyObservers=function(t){this.view&&this.view.notifyObservers(t)},e.prototype.sendNotification=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this.notifyObservers(new t.Notification(e,i,n))},e.SINGLETON_MSG="Facade singleton already constructed!",e.instance=null,e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();t.Facade=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(){function e(){this.facade=null,this.facade=t.Facade.getInstance()}return e.prototype.sendNotification=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.facade.sendNotification(t,e,i)},e}();t.Notifier=e}(puremvc||(puremvc={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i},puremvc;!function(t){"use strict";var e=function(t){function e(){t.call(this),this.subCommands=null,this.subCommands=new Array,this.initializeMacroCommand()}return __extends(e,t),e.prototype.initializeMacroCommand=function(){},e.prototype.addSubCommand=function(t){this.subCommands.push(t)},e.prototype.execute=function(t){for(var e=this.subCommands.slice(0),i=this.subCommands.length,n=0;n<i;n++){(new(0,e[n])).execute(t)}this.subCommands.splice(0)},e}(t.Notifier);t.MacroCommand=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.execute=function(t){},e}(t.Notifier);t.SimpleCommand=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.call(this),this.mediatorName=null,this.viewComponent=null,this.mediatorName=null!=i?i:e.NAME,this.viewComponent=n}return __extends(e,t),e.prototype.getMediatorName=function(){return this.mediatorName},e.prototype.getViewComponent=function(){return this.viewComponent},e.prototype.setViewComponent=function(t){this.viewComponent=t},e.prototype.listNotificationInterests=function(){return new Array},e.prototype.handleNotification=function(t){},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="Mediator",e}(t.Notifier);t.Mediator=e}(puremvc||(puremvc={}));var puremvc;!function(t){"use strict";var e=function(t){function e(i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.call(this),this.proxyName=null,this.data=null,this.proxyName=null!=i?i:e.NAME,null!=n&&this.setData(n)}return __extends(e,t),e.prototype.getProxyName=function(){return this.proxyName},e.prototype.setData=function(t){this.data=t},e.prototype.getData=function(){return this.data},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="Proxy",e}(t.Notifier);t.Proxy=e}(puremvc||(puremvc={})),window.puremvc=puremvc;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Mediator=puremvc.Mediator,Tween=Laya.Tween,Handler=Laya.Handler,Facade=puremvc.Facade,ui;!function(t){var e=function(){return function(t,e){void 0===e&&(e=!0),this.ExecuteNavLogic=!0,this.OnOpenCallback=t,this.ExecuteNavLogic=e}}();t.WindowContextDataBase=e;var i=function(){return function(){this.uiid=0,this.uiOpenAnimType=o.None,this.uiCloseAnimType=o.None,this.uiShowType=n.DoNothing,this.depth=0,this.showImageBG=!1,this.imageBGPath="",this.imageBGSizeGrid="0,0,0,0,1"}}();t.WindowConfigData=i;var n;!function(t){t[t.DoNothing=0]="DoNothing",t[t.HideOthers=1]="HideOthers",t[t.DestoryOthers=2]="DestoryOthers"}(n=t.UIShowType||(t.UIShowType={}));!function(t){t[t.AffectedByOthers=0]="AffectedByOthers",t[t.NotAffectedByOthers=1]="NotAffectedByOthers"}(t.UIAutoCloseType||(t.UIAutoCloseType={}));var o;!function(t){t[t.None=0]="None",t[t.PopOpen=1]="PopOpen",t[t.PopClose=2]="PopClose",t[t.Custom=3]="Custom"}(o=t.UIAnim||(t.UIAnim={}));var r=function(t){function e(e){var i=t.call(this)||this;return i.uiView=e,i}return __extends(e,t),e.prototype.Init=function(t,e){this.uiConfig=this.GetUIWindowConfigData(e),this.uiConfig.showImageBG&&(this.uiBG=new Laya.Image,this.uiBG.name="uibg",this.uiBG.zOrder=-1,this.uiBG.skin=this.uiConfig.imageBGPath,this.uiBG.visible=!0,this.uiBG.width=Laya.stage.width,this.uiBG.height=Laya.stage.height,this.uiView.addChild(this.uiBG)),this.uiView.updateZOrder()},e.prototype.Open=function(t){void 0===t&&(t=null),this.BeforeUIOpen(t),this.uiView.visible=!0;var e=this.OnUIOpened.bind(this,t);this.DoEnteringAnim(e)},e.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null)},e.prototype.DoEnteringAnim=function(t){this.ResetAnim(),this.EnteringAnim(t)},e.prototype.EnteringAnim=function(t){var e=this.uiConfig.uiOpenAnimType;e!=o.None?this.PlayeEnterTween(e,t):null!=t&&t()},e.prototype.OnUIOpened=function(t){void 0===t&&(t=null),t&&t.OnOpenCallback&&t.OnOpenCallback()},e.prototype.Hide=function(t){var e=this;void 0===t&&(t=null),this.DoExitingAnim(function(){e.uiView.visible=!1,null!=t&&t(),e.OnUIHide()})},e.prototype.HideForce=function(){this.uiView.visible=!1,this.OnUIHide()},e.prototype.DoExitingAnim=function(t){this.ResetAnim(),this.ExitingAnim(t)},e.prototype.ExitingAnim=function(t){var e=this.uiConfig.uiCloseAnimType;e!=o.None?this.PlayeExitTween(e,t):null!=t&&t()},e.prototype.OnUIHide=function(){},e.prototype.ResetAnim=function(){},e.prototype.Destroy=function(){this.BeforeUIDestroy(),this.uiView.removeSelf(),this.uiView.destroy(!0),this.uiView=null,this.OnUIDestroy()},e.prototype.BeforeUIDestroy=function(){this.uiBG&&(this.uiBG.removeSelf(),this.uiBG.destroy(!0),this.uiBG=null)},e.prototype.OnUIDestroy=function(){},e.prototype.PlayeEnterTween=function(t,e){switch(t){case o.PopOpen:Tween.from(this.uiView,{scaleX:0,scaleY:0},500,Laya.Ease.strongIn,Laya.Handler.create(this,function(){null!=e&&e()},null),0);break;default:Log.Error("UI打开执行未定义动画"+t.toString())}},e.prototype.PlayeExitTween=function(t,e){var i=this;switch(t){case o.PopClose:var n=this.uiView.scaleX,r=this.uiView.scaleY;Tween.to(this.uiView,{scaleX:0,scaleY:0},200,Laya.Ease.strongIn,Laya.Handler.create(this,function(){i.uiView.scaleX=n,i.uiView.scaleY=r,null!=e&&e()},null),0);break;default:Log.Error("UI关闭执行未定义动画"+t.toString())}},e.prototype.GetUIWindowConfigData=function(t){var e=ConfigManager.GetInstance().GetUIConfig(t);if(null==e||void 0==e){return(n=new i).uiid=t,n}var n=new i;return n.uiid=t,n.uiOpenAnimType=e.uiOpenAnimType,n.uiCloseAnimType=e.uiCloseAnimType,n.uiShowType=e.uiShowType,n.depth=e.depth,n.showImageBG=e.showImageBG,n.imageBGPath=e.imageBGPath,n.imageBGSizeGrid=e.imageBGSizeGrid,n},e}(Mediator);t.BaseUICtrl=r}(ui||(ui={}));var BasePlayerInfo=function(){function t(){}return t.prototype.GetPlayerID=function(){return this.playerID},t.prototype.Init=function(t){this.playerID=t.openId},t.prototype.OnInit=function(){},t.prototype.OnEnter=function(){},t.prototype.OnExit=function(){},t}(),ComponentBase2D=function(){function t(){}return t.prototype.onAdd=function(){},t.prototype.onReomove=function(){},t.prototype.onDisable=function(){},t.prototype.onEnable=function(){},t.prototype.Reset=function(){},t.prototype.OnEnterMatch=function(t){},t.prototype.OnExitMatch=function(){},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BaseMoveComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timer=-1,e.moveDir=null,e.ROTATE_VIEW_ON_DIR_CHANGE=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"SpeedX",{get:function(){return this.speedX},set:function(t){this.speedX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SpeedY",{get:function(){return this.speedY},set:function(t){this.speedY=t},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.resetParam()},e.prototype.onReomove=function(){this.StopMovement()},e.prototype.StartMovement=function(t){void 0===t&&(t=0),this.BeforeStartMovement(),this.Pause(!1),this.timer=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this),t)},e.prototype.Pause=function(t){this.pause=t},e.prototype.StopMovement=function(){this.timer>=0&&TimeManager.getInst().remove(this.timer),this.timer=-1,this.resetParam()},e.prototype.resetParam=function(){this.speedX=0,this.SpeedX=0,this.timer=-1,this.moveDir=null},e.prototype.update=function(t){this.pause||(this.player.isInStage()?this.OnMove(t):this.OnMoveOutStage())},e.prototype.setMoveDir=function(t,e){void 0===e&&(e=!1),t=t.normalise(),this.ROTATE_VIEW_ON_DIR_CHANGE&&CommonUtil2D.LookAtPos(this.player.viewComp.View,new Vec2(this.player.viewComp.View.x,this.player.viewComp.View.y).add(t),e),this.moveDir=t,this.player.Show2DShapeCom&&this.player.Show2DShapeCom.ShowShape()},e.prototype.BeforeStartMovement=function(){},e.prototype.OnMoveOutStage=function(){},e.prototype.OnMove=function(t){},e.prototype.Move=function(t,e){this.player.movePlayer(-t,-e)},e}(ComponentBase2D),WechatUtil=function(){function t(){this.videoReady=!1}return t.getIntance=function(){return null==t._instanc&&(t._instanc=new t),t._instanc},t.prototype.Vibrate=function(){if(CommonUtil.OnMiniGame()){var t=Laya.Browser.window.wx;if(null==t)return void Log.Debug("no wx");t.vibrateLong({success:function(){Log.Debug("vib  succeed: ")},fail:function(){Log.Debug("vib fail: ")},complete:function(){Log.Debug("vib complete: ")}})}},t.prototype.InitShare=function(t){if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug(" InitShare 没有 wx");e.onShow(function(i){Log.Debug("wechat onshow activated!!!!!!!!!!!!!!!!!!!!!!!!!"),e.showShareMenu({withShareTicket:!0}),t(i)})}},t.prototype.RegOnShow=function(t){if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug(" init 没有 wx");e.onShow(function(e){Log.Debug("wechat onshow regOnShow activated!!!!!!!!!!!!!!!!!!!!!!!!!"),t(e)})}},t.prototype.RegOnHide=function(t){if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug(" init 没有 wx");e.onHide(function(){Log.Debug("wechat onshow RegOnHide activated!!!!!!!!!!!!!!!!!!!!!!!!!"),t()})}},t.prototype.InitTopRightCornerShare=function(t,e,i,n,o){if(CommonUtil.OnMiniGame()){var r=Laya.Browser.window.wx;if(null==r)return Log.Debug(" init 没有 wx"),void(n&&n());r.onShareAppMessage(function(r){var a=this;return Log.Debug("点击右上角转发，query："+o),{title:e,imageUrl:t,query:o,success:function(t){"shareAppMessage:ok"==t.errMsg&&(t.hasOwnProperty("shareTickets")?(Log.Debug("to group:"+t.shareTickets[0]),a.GetShareInfo(t.shareTickets[0],function(t){Log.Debug("get share info com"+t),i&&i(t)})):(Log.Debug("to person:"),i&&i()))},fail:function(){n&&n()},complete:function(){}}})}},t.prototype.ShareWithPicAndTitle=function(t,e,i,n,o){if(CommonUtil.OnMiniGame()){var r=Laya.Browser.window.wx;if(null==r)return Log.Debug("no wx"),void(i&&i());r.showShareMenu({withShareTicket:!0}),r.shareAppMessage(this.RetShareSetting(t,e,o,i,n)),i&&TimeManager.getInst().once(1,cbhandler.gen_handler(function(){i()},this),!0)}else i&&i()},t.prototype.ShareWithScreenShotAndTitle=function(t,e,i,n,o,r,a,s){var l=this;if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return Log.Debug("no wx"),void(r&&r());this.SaveCanvasToTemp(t,e,i,i,function(t,e){t?l.ShareWithPicAndTitle(t,o,function(){Log.Debug("ShareWithScreenShotAndTitle suceed"),r&&r()},function(){Log.Debug("ShareWithScreenShotAndTitle faile"),a&&a()},s):(Log.Debug("保存失败:"+e),a&&a())})}else r&&r()},t.prototype.ShareWithTitleAndBgImage=function(t,e,i,n,o,r){var a=this;this.CreateShareImageAtOfflineCanvas(t,e,i,300,300,function(t,e){t?a.ShareWithPicAndTitle(t,"",n,o,r):(Log.Debug("保存失败:"+e),o&&o())})},t.prototype.RetShareSetting=function(t,e,i,n,o){var r=this;return i&&Log.Debug("share with query:"+i),{title:e,imageUrl:t,query:i,success:function(t){"shareAppMessage:ok"==t.errMsg&&(t.hasOwnProperty("shareTickets")?(Log.Debug("to group:"+t.shareTickets[0]),r.GetShareInfo(t.shareTickets[0],function(t){Log.Debug("get share info com"+t),n&&n(t)})):(Log.Debug("to person:"),n&&n()))},fail:function(){o&&o()},complete:function(){}}},t.prototype.GetShareInfo=function(t,e){if(CommonUtil.OnMiniGame()){var i=Laya.Browser.window.wx;if(null==i)return void Log.Debug("no wx");i.getShareInfo({shareTicket:t,success:function(t){},fail:function(){e&&e(null)},complete:function(t){var n=Object.getOwnPropertyNames(t);Log.Debug(n),Log.Debug("encryptdata:"+t.encryptedData),Log.Debug("iv:"+t.iv),i.login({success:function(t){Log.Debug("logins seesion code:"+t.code);e&&e("123456789456431123")}})}})}},t.prototype.GetLoginSessionCode=function(t){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.login({success:function(e){Log.Debug("logins seesion code:"+e.code),t&&t(e.code)}})}else t(null)},t.prototype.GetOpenID=function(t,e,i,n,o){if(CommonUtil.OnMiniGame()){var r="https://api.weixin.qq.com/sns/jscode2session?appid="+t+"&secret="+e+"&js_code="+i+"&grant_type=authorization_code";HttpManager.getIntance().GetJson(r,function(t){t.errcode&&t.errcode>0?(Log.Warn("get openid error:"+t.errMsg),o&&o(t.errmsg)):(Log.Debug("opneid:"+t.openid),n&&n(t.openid))},function(t){Log.Debug("login error:"+t),o&&o(t)})}else o&&o("on on weixin ")},t.prototype.GetWXUserDataPath=function(){if(CommonUtil.OnMiniGame()){return Laya.Browser.window.wx.env.USER_DATA_PATH}return null},t.prototype.DownloadFile=function(t,e,i){if(CommonUtil.OnMiniGame()){var n=Laya.Browser.window.wx;n.env.USER_DATA_PATH,n.env.USER_DATA_PATH;Log.Debug("begin download url:"+t);return n.downloadFile({url:""+t,success:function(n){if(200===n.statusCode){var o=n.tempFilePath;Log.Debug("素材包下载完毕:"+t),e&&e(o)}else Log.Warn("素材包下载网络出错, %o",n),i&&i("素材包下载网络出错 statusCode: "+n.statusCode)},fail:function(t){Log.Warn("素材包下载取消"+t.errMsg),i&&i(t.errMsg)}})}return i&&i("WxDownloadFile not on wechat"),null},t.prototype.UnzipFile=function(t,e,i,n){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().unzip({zipFilePath:t,targetPath:e,success:function(){Log.Debug("资源包解压缩完毕"),i&&i()},fail:function(t){Log.Debug("资源包解压缩errror:"+t.errMsg+Object.getOwnPropertyNames(t)),n&&n(t.errMsg)}})}},t.prototype.CreateDirectory=function(t,e,i){if(void 0===e&&(e=!0),CommonUtil.OnMiniGame()){var n=Laya.Browser.window.wx.getFileSystemManager();n.access({path:t,success:function(){console.log("异步检测目录已经存在 "+t),i&&i()},fail:function(){console.log("异步检测目录不存在, 创建目录 "+t);try{n.mkdirSync(t,!0),console.log("目录同步创建成功 "+t),i&&i()}catch(e){console.log("目录同步创建失败 "+t),i&&i()}}})}},t.prototype.CreateDirectorySync=function(t,e,i){if(void 0===e&&(e=!0),CommonUtil.OnMiniGame()){var n=Laya.Browser.window.wx.getFileSystemManager();if(this.HasFileSync(t))return console.log("同步创建目录已经存在, "+t),i&&i(!0),!0;try{return n.mkdirSync(t,!0),console.log("目录同步创建成功 "+t),i&&i(!0),!0}catch(e){return console.log("目录同步创建失败 "+t),i&&i(!1),!1}}},t.prototype.HasFileSync=function(t){if(!CommonUtil.OnMiniGame())return!1;var e=Laya.Browser.window.wx.getFileSystemManager();try{return e.accessSync(t),console.log("同步检测目录已存在 "+t),!0}catch(e){return console.log("同步检测目录不存在 "+t),!1}},t.prototype.HasFile=function(t,e,i){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().access({path:t,success:function(){console.log("异步检测文件存在"+t),e&&e()},fail:function(){console.log("异步检测文件不存在"+t),i&&i()}})}else i&&i()},t.prototype.ReadFile=function(t,e,i,n){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().readFile({filePath:t,encoding:e,success:function(e){console.log("读取文件成功"+t),i&&i(e.data)},fail:function(e){console.log("读取文件失败"+t),n&&n(e.errMsg)}})}else n&&n("not on wechat")},t.prototype.RemoveDir=function(t,e,i){var n=this;this.HasFile(t,function(){n.RemoveDirSync(t),e&&e()},function(){e&&e()})},t.prototype.RemoveDirSync=function(e){if(CommonUtil.OnMiniGame()){if(!this.HasFileSync(e))return;for(var i=Laya.Browser.window.wx.getFileSystemManager(),n=i.readdirSync(e),o=0;o<n.length;o++){var r=e+"/"+n[o];Log.Debug("删除文件:"+r),t.getIntance().GetSavedFileList(null,null);i.statSync(r).isDirectory()?this.RemoveDirSync(r):(i.unlinkSync(r),t.getIntance().GetSavedFileList(null,null))}i.rmdirSync(e,!0)}},t.prototype.RemoveFileSyn=function(t){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().unlinkSync(t)}},t.prototype.RemoveFile=function(t,e,i){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().unlink({filePath:t,success:function(){Log.Debug("remove file success"),e&&e()},fail:function(t){Log.Debug("remove file fail"+t.errMsg),i&&i(t.errMsg)}})}else i&&i()},t.prototype.SaveTempFile=function(t,e,i,n){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().saveFile({tempFilePath:t,filePath:e,success:function(){Log.Debug("save file success"),i&&i()},fail:function(t){Log.Debug("save file fail"+t.errMsg),n&&n(t.errMsg)}})}else n&&n()},t.prototype.SaveTempFileSyn=function(t,e){if(!CommonUtil.OnMiniGame())return Log.Error("save temp file fail: not in wechat"),!1;var i=Laya.Browser.window.wx.getFileSystemManager();try{i.saveFileSync(t,e);return!0}catch(t){return Log.Error("save temp file fail:"+t.errmsg),!1}},t.prototype.WriteAndCreate=function(t,e,i,n){var o=this;this.HasFile(t,function(){o.RemoveFileSyn(t),o.WriteToFile(t,e,i,n)},function(){o.WriteToFile(t,e,i,n)})},t.prototype.WriteToFile=function(t,e,i,n){if(CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getFileSystemManager().writeFile({filePath:t,data:e,encoding:"utf8",success:function(){Log.Debug("WriteToFile success"),i&&i()},fail:function(t){Log.Debug("WriteToFile fail"+t.errMsg),n&&n(t.errMsg)}})}else n&&n()},t.prototype.GetSavedFileList=function(t,e){if(CommonUtil.OnMiniGame()){Log.Debug("GetSavedFileList");Laya.Browser.window.wx.getFileSystemManager().getSavedFileList({success:function(e){Log.Debug("GetSavedFileList success "+e.fileList.length),t&&t(e.fileList)},fail:function(t){Log.Debug("GetSavedFileList fail "+t),e&&e()}})}else e&&e()},t.wxPostMessage=function(t){var e=Laya.Browser.window.wx;if(void 0!=e){e.getOpenDataContext().postMessage(t)}},t.wxSetUserCloudStorage=function(t,e,i,n){var o=Laya.Browser.window.wx;void 0!=o&&o.setUserCloudStorage({KVDataList:t,success:function(t){console.log("setUserCloudStorage","success",t),null!=e&&void 0!=e&&e.runWith(t)},fail:function(t){console.log("setUserCloudStorage","fail",t),null!=i&&void 0!=i&&i.runWith(t)},complete:function(t){console.log("setUserCloudStorage","complete",t),null!=n&&void 0!=n&&n.runWith(t)}})},t.wxRemoveUserCloudStorage=function(t,e,i,n){var o=Laya.Browser.window.wx;void 0!=o&&o.removeUserCloudStorage({keyList:t,success:function(t){console.log("removeUserCloudStorage","success",t),null!=e&&void 0!=e&&e.runWith(t)},fail:function(t){console.log("removeUserCloudStorage","fail",t),null!=i&&void 0!=i&&i.runWith(t)},complete:function(t){console.log("removeUserCloudStorage","complete",t),null!=n&&void 0!=n&&n.runWith(t)}})},t.wxSetStorage=function(t,e,i,n,o){var r=Laya.Browser.window.wx;void 0!=r&&r.setStorage({key:t,data:e,success:function(t){console.log("setLocalStorage","success",t),null!=i&&void 0!=i&&i.runWith(t)},fail:function(t){console.log("setLocalStorage","fail",t),null!=n&&void 0!=n&&n.runWith(t)},complete:function(t){console.log("setLocalStorage","complete",t),null!=o&&void 0!=o&&o.runWith(t)}})},t.prototype.wxSetStorageSync=function(t,e){var i=Laya.Browser.window.wx;if(void 0!=i)try{i.setStorageSync(t,e)}catch(t){Log.Error("setStorageSync error:"+Object.getOwnPropertyNames(t)+" object:"+t)}},t.wxGetStorage=function(t,e,i,n){var o=Laya.Browser.window.wx;void 0!=o&&o.getStorage({key:t,success:function(t){console.log("setLocalStorage","success",t),null!=e&&void 0!=e&&e.runWith(t.data)},fail:function(t){console.log("setLocalStorage","fail",t),null!=i&&void 0!=i&&i.runWith(t)},complete:function(t){console.log("setLocalStorage","complete",t),null!=n&&void 0!=n&&n.runWith(t)}})},t.prototype.wxGetStorageSync=function(t){var e=Laya.Browser.window.wx;if(void 0!=e)try{return e.getStorageSync(t)}catch(t){return Log.Error("wx.getStorageSync error"+Object.getOwnPropertyNames(t)+" object:"+t),null}return null},t.wxNavigateToMiniProgram=function(t,e,i,n,o,r,a){var s=Laya.Browser.window.wx;void 0!=s&&s.navigateToMiniProgram({appId:t,path:e,extraData:i,envVersion:n,success:function(t){console.log("navigateToMiniProgram","success",t),null!=o&&void 0!=o&&o.runWith(t.data)},fail:function(t){console.log("navigateToMiniProgram","fail",t),null!=r&&void 0!=r&&r.runWith(t)},complete:function(t){console.log("navigateToMiniProgram","complete",t),null!=a&&void 0!=a&&a.runWith(t)}})},t.wxGetUserCloudStorage=function(t,e,i,n){var o=Laya.Browser.window.wx;void 0!=o&&o.getUserCloudStorage({keyList:t,success:function(t){console.log("getUserCloudStorage","success",t),null!=e&&void 0!=e&&e.runWith(t)},fail:function(t){console.log("getUserCloudStorage","fail",t),null!=i&&void 0!=i&&i.runWith(t)},complete:function(t){console.log("getUserCloudStorage","complete",t),null!=n&&void 0!=n&&n.runWith(t)}})},t.wxGetFriendCloudStorage=function(t,e,i,n){var o=Laya.Browser.window.wx;void 0!=o&&o.getFriendCloudStorage({keyList:t,success:function(t){console.log("getFriendCloudStorage","success",t),null!=e&&void 0!=e&&e.runWith(t)},fail:function(t){console.log("getFriendCloudStorage","fail",t),null!=i&&void 0!=i&&i.runWith(t)},complete:function(t){console.log("getFriendCloudStorage","complete",t),null!=n&&void 0!=n&&n.runWith(t)()}})},t.prototype.showModel=function(t,e,i,n,o,r,a){if(CommonUtil.OnMiniGame()){var s=Laya.Browser.window.wx;if(null==s)return void Log.Debug("no wx");s.showModal({title:t,content:e,success:function(t){t.confirm?(Log.Debug("用户点击确定"),r&&r()):(Log.Debug("用户点击取消"),a&&a()),Log.Debug("测试检测res.cancel的值:"+t.cancel)}})}},t.prototype.GetSystemInfoSync=function(){if(CommonUtil.OnMiniGame()){var t=Laya.Browser.window.wx;if(null==t)return Log.Debug("no wx"),null;try{var e=t.getSystemInfoSync();return console.log(e.model),console.log(e.pixelRatio),console.log(e.windowWidth),console.log(e.windowHeight),console.log(e.language),console.log(e.version),console.log(e.platform),e}catch(t){Log.Error("wx.getSystemInfoSync error:"+t)}}},t.prototype.CheckUserAuth=function(t,e){if(CommonUtil.OnMiniGame()){var i=Laya.Browser.window.wx;if(null==i)return Log.Debug("CheckUserAuth no wx"),void(e&&e());i.getSetting({success:function(i){i.authSetting["scope.userInfo"]?t&&t():e&&e()}})}else Log.Debug("非微信平台, 不需要授权"),t&&t()},t.prototype.CreateAuthButton=function(t,e,i){if(CommonUtil.OnMiniGame()){var n=Laya.Browser.window.wx;if(null==n)return void Log.Debug("no wx");var o=n.createUserInfoButton(t);o.onTap(function(t){"getUserInfo:ok"==t.errMsg?(Log.Debug("on userinfo button tap ok:"+t),e&&e()):(Log.Debug("on userinfo button tap error:"+t.errMsg),i&&i(t.errMsg)),o.hide()})}else e&&e()},t.prototype.GetUserInfo=function(t,e){if(CommonUtil.OnMiniGame()){var i=Laya.Browser.window.wx;if(null==i)return Log.Debug("no wx"),void(e&&e("getUserInfo是微信平台, 不是小游戏no wx"));i.getUserInfo({success:function(e){e.userInfo;t&&t(e.userInfo)},fail:function(t){e&&e("wx.getUserInfo fail"+t)}})}else e&&e("wx.getUserInfo fail, 不是微信平台")},t.prototype.CreateBannerAd=function(){var t=this;if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug("no wx");var i=e.getSystemInfoSync(),n=(i.screenWidth-300)/2;this.bannerAd=e.createBannerAd({adUnitId:WechatConstDefine.AD_Banner_ID,style:{left:n,top:0,width:300}}),this.bannerAd.onError(function(t){Log.Debug("banner 广告错误："+t)}),this.bannerAd.onResize(function(e){Log.Debug("banner广告宽高"+e.width+" "+e.height),Log.Debug("banner广告实际宽高"+t.bannerAd.style.realWidth+" "+t.bannerAd.style.realHeight)}),this.bannerAd.onLoad(function(){Log.Debug("banner 广告加载成功"),t.bannerAd.style.top=i.screenHeight-t.bannerAd.style.realHeight})}},t.prototype.ShowBannerAd=function(){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return void Log.Debug("no wx");null!=this.bannerAd&&(Log.Debug("have bannerAd"),this.bannerAd.destroy()),this.CreateBannerAd(),Log.Debug("尝试显示banner广告"),this.bannerAd.show().catch(function(t){return Log.Debug(t)}).then(function(){return Log.Debug("banner 广告显示")})}},t.prototype.HideBannerAd=function(){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return void Log.Debug("no wx");if(null==this.bannerAd)return void Log.Debug("no bannerAd");this.bannerAd.hide()}},Object.defineProperty(t.prototype,"WxVideoAdReady",{get:function(){return this.videoReady},enumerable:!0,configurable:!0}),t.prototype.CreateVideoAd=function(t,e,i){if(CommonUtil.OnMiniGame()){var n=Laya.Browser.window.wx;if(null!=n){var o=this;this.videoAd||(Log.Debug("wx 尝试创建视频广告单例！"),this.videoAd=n.createRewardedVideoAd({adUnitId:WechatConstDefine.AD_Video_ID}),Log.Debug("wx 注册视频广告拉取成功回调！"),this.videoAd.onLoad(function(){Log.Debug("wx 视频拉取成功，执行传入的回调！"),console.log("wx 视频拉取成功，执行传入的回调！"),o.videoReady=!0,t&&t.exec()}),Log.Debug("wx 注册视频广告拉取失败回调！"),this.videoAd.onError(function(t){Log.Debug("wx 视频拉取失败，错误码："+t.errCode+" 错误信息："+t.errMsg),o.videoReady=!1,e&&e.exec()}),Log.Debug("wx 注册视频播放结束回调"),this.videoAd.onClose(function(t){t&&t.isEnded||void 0===t?(Log.Debug("wx 视频广告正常播放结束"),i&&i.exec(!0)):(Log.Debug("wx 视频广告播放中途退出"),i&&i.exec(!1))}))}else Log.Debug("no wx")}},t.prototype.LoadVideoAd=function(){if(CommonUtil.OnMiniGame()){null!=Laya.Browser.window.wx?this.videoAd?this.videoReady?Log.Debug("video ready,load no more"):(Log.Debug("wx 尝试拉取视频广告！"),this.videoAd.load()):Log.Debug("no ad instance"):Log.Debug("no wx")}},t.prototype.ShowVideoAd=function(t){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return void Log.Debug("no wx");if(!this.videoAd)return void Log.Debug("no vidowAd");Log.Debug("wx 执行播放前回调"),t&&t.exec(),Log.Debug("wx 广告显示！"),this.videoAd.show()}},t.prototype.SaveCanvasToTemp=function(t,e,i,n,o){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return Log.Debug("no wx"),void o(null,"no wx");this.GetSystemInfoSync();var r=canvas.width,a=canvas.height,s=t/Laya.stage.width*r,l=e/Laya.stage.height*a,h=i/Laya.stage.width*r,u=n/Laya.stage.height*a;canvas.toTempFilePath({x:s,y:l,width:h,height:u,destWidth:h,destHeight:u,success:function(t){o(t.tempFilePath)},fail:function(t){Log.Warn("canvas save to temp error;"+t.errMsg),o(null,t.errMsg)}})}else o(null,"not in wechat")},t.prototype.CreateShareImageAtOfflineCanvas=function(t,e,i,n,o,r){var a=this;if(CommonUtil.OnMiniGame()){var s=Laya.Browser.window.wx;if(null==s)return Log.Debug("no wx"),void r(null,"no wx");var l=n,h=o,u=s.createCanvas();u.width=l,u.height=h;var c=u.getContext("2d"),d=s.createImage();d.src=i,d.onerror=function(t){Log.Debug("image error"+t.errMsg)},d.onload=function(){Log.Debug("image loaded"),c.drawImage(d,0,0,l,h),c.font="25px Arial",c.fillStyle="#000000",c.textBaseline="top",c.textAlign="center",c.fillText(e,l/2,h/2-32.5),c.font="40px Arial",c.fillStyle="#000000",c.textBaseline="top",c.textAlign="center",c.fillText(t,l/2,h/2),u.toTempFilePath({x:0,y:0,width:l,height:h,destWidth:l,destHeight:h,success:function(t){var e=a.GetWXUserDataPath()+"/MyLayaGameTemp/ShareImageAtOffCanvas.png",i=a.MoveTempFileSync(t.tempFilePath,e);r(i?e:t.tempFilePath)},fail:function(t){Log.Warn("canvas save to temp error;"+t.errMsg),r(null,t.errMsg)}})}}else r(null,"not in wechat")},t.prototype.MoveTempFileSync=function(t,e){Log.Debug("save to temp:"+t+" move to "+e);var i=e.substr(0,e.lastIndexOf("/")+1),n=e,o=this.CreateDirectorySync(i,!0);return Log.Debug("save to temp:"+t+" move to "+n),!(!o||!this.SaveTempFileSyn(t,n))&&(this.HasFileSync(t)&&this.RemoveFileSyn(t),!0)},t.prototype.InitSoundPool=function(t,e){if(CommonUtil.OnMiniGame()){var i=Laya.Browser.window.wx;if(null==i)return void Log.Debug("InitSoundPool no wx");for(var n=0;n<e;n++){var o=i.createInnerAudioContext();o.src=t,laya.utils.Pool.recover(t,o)}}},t.prototype.PlaySound=function(t,e,i,n){if(void 0===n&&(n=1),CommonUtil.OnMiniGame()){var o=Laya.Browser.window.wx;if(null==o)return void Log.Debug("PlaySound no wx");var r=laya.utils.Pool.getItem(t);null==r&&((r=o.createInnerAudioContext()).src=t),r.loop=e,r.volume=n,r.play();var a=function(){laya.utils.Pool.recover(t,r),r.offEnded(a),r.offStop(s),i&&i()},s=function(){laya.utils.Pool.recover(t,r),r.offEnded(a),r.offStop(s)};return r.onEnded(a),r.onStop(s),r}return null},t.prototype.StopSound=function(t,e){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return void Log.Debug("StopSound no wx");t.stop()}},t.prototype.IsPhonXModel=function(){if(CommonUtil.OnMiniGame()){if(null==Laya.Browser.window.wx)return Log.Debug("StopSound no wx"),!1;return-1!=this.GetSystemInfoSync().model.search("iPhone X")}return!1},t.prototype.WechatTop=function(){if(CommonUtil.OnMiniGame()){var t=Laya.Browser.window.wx;if(null==t)return Log.Debug("StopSound no wx"),0;var e=t.getMenuButtonBoundingClientRect(),i=this.GetSystemInfoSync(),n=Laya.stage.height*(e.top/i.windowHeight);return console.log("paddingTop "+n),n}return 0},t.prototype.OnKeyboardComplete=function(t){if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug("no wx");e.onKeyboardComplete(function(e){t&&t.call(e)})}},t.prototype.OnKeyboardConfirm=function(t){if(CommonUtil.OnMiniGame()){var e=Laya.Browser.window.wx;if(null==e)return void Log.Debug("no wx");e.onKeyboardConfirm(function(e){t&&t.call(e)})}},t}(),TweenFunc={Linear:function(t,e,i,n){return i*t/n+e},PingPong:{Linear:function(t,e,i,n){return t<=.5*n?i*t*2/n+e:i*(2-2*t/n)+e},easeInOut:function(t,e,i,n){return t<=.5*n?n*=.5:t=2*(n*=.5)-t,(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Path:{Linear:function(t,e,i,n,o){for(var r=n.length,a=0,s=0;s<r;s++)if(a+=n[s],t<=a)return i[s]*(n[s]+t-a)/n[s]+e[s];return i[r-1]*(n[r-1]+t-a)/n[r-1]+e[r-1]},easeInOut:function(t,e,i,n){return t<=.5*n?n*=.5:t=2*(n*=.5)-t,(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Quad:{easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOut:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOut:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOut:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}},Expo:{easeIn:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOut:function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOut:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e}},Circ:{easeIn:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOut:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,n,o,r){if(0==t)return e;if(1==(t/=n))return e+i;if(r||(r=.3*n),!o||o<Math.abs(i)){o=i;a=r/4}else var a=r/(2*Math.PI)*Math.asin(i/o);return-o*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)+e},easeOut:function(t,e,i,n,o,r){if(0==t)return e;if(1==(t/=n))return e+i;if(r||(r=.3*n),!o||o<Math.abs(i)){o=i;a=r/4}else var a=r/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/r)+i+e},easeInOut:function(t,e,i,n,o,r){if(0==t)return e;if(2==(t/=n/2))return e+i;if(r||(r=n*(.3*1.5)),!o||o<Math.abs(i)){o=i;a=r/4}else var a=r/(2*Math.PI)*Math.asin(i/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*.5+i+e}},Back:{easeIn:function(t,e,i,n,o){return void 0==o&&(o=1.70158),i*(t/=n)*t*((o+1)*t-o)+e},easeOut:function(t,e,i,n,o){return void 0==o&&(o=1.70158),i*((t=t/n-1)*t*((o+1)*t+o)+1)+e},easeInOut:function(t,e,i,n,o){return void 0==o&&(o=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e}},Bounce:{easeIn:function(t,e,i,n){return i-TweenFunc.Bounce.easeOut(n-t,0,i,n)+e},easeOut:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,i,n){return t<n/2?.5*TweenFunc.Bounce.easeIn(2*t,0,i,n)+e:.5*TweenFunc.Bounce.easeOut(2*t-n,0,i,n)+.5*i+e}}},Tween3DUtil=function(){function t(){this.animInterval=0,this.checkInterval=100,this.frameCount=0,this.timePassed=0,this.key=0,this.pool=[],this.list=new LinkList,this.speed=1}return t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.setSpeed=function(t){this.speed=t},t.prototype.to=function(t){var e=t.node;if(!e||e.destroyed)return Log.Warn("invalid node"),0;var i=this.pool.pop();if(i||(i={node:null,elapsed:null,duration:null,delay:null,exectors:null,tweenFunc:null,onUpdate:null,onComplete:null,repeated:null,path:null,completedPathCount:null}),i.node=e,i.elapsed=0,i.duration=t.duration||1,i.delay=t.delay||0,i.exectors=[],i.tweenFunc=t.tweenFunc||TweenFunc.Linear,i.onUpdate=t.onUpdate,i.onComplete=t.onComplete,i.repeated=t.repeated||!1,i.path=t.path||null,i.completedPathCount=1,null!=t.x){var n=e.transform.localPosition.x,o=t.x-n;i.exectors.push(function(t){var e=i.tweenFunc(t,n,o,i.duration),r=i.node.transform.localPosition;r.x=e,i.node.transform.localPosition=r})}if(null!=t.y){var r=e.transform.localPosition.y,a=t.y-r;i.exectors.push(function(t){var e=i.tweenFunc(t,r,a,i.duration),n=i.node.transform.localPosition;n.y=e,i.node.transform.localPosition=n})}if(null!=t.z){var s=e.transform.localPosition.z,l=t.z-s;i.exectors.push(function(t){var e=i.tweenFunc(t,s,l,i.duration),n=i.node.transform.localPosition;n.z=e,i.node.transform.localPosition=n})}if(null!=t.rotationX){var h=e.transform.localRotationEuler.x,u=t.rotationX-h;i.exectors.push(function(t){var e=i.tweenFunc(t,h,u,i.duration),n=i.node.transform.localRotationEuler;n.x=e,i.node.transform.localRotationEuler=n})}if(null!=t.rotationY){var c=e.transform.localRotationEuler.y,d=t.rotationY-c;i.exectors.push(function(t){var e=i.tweenFunc(t,c,d,i.duration),n=i.node.transform.localRotationEuler;n.y=e,i.node.transform.localRotationEuler=n})}if(null!=t.rotationZ){var p=e.transform.localRotationEuler.z,f=t.rotationZ-p;i.exectors.push(function(t){var e=i.tweenFunc(t,p,f,i.duration),n=i.node.transform.localRotationEuler;n.z=e,i.node.transform.localRotationEuler=n})}return this.timer||(this.timer=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this))),this.list.append(++this.key,i)},t.prototype.from=function(t){var e=t.node;if(!e||e.destroyed)return Log.Warn("invalid node"),0;if(null!=t.x){i=e.transform.localPosition.clone();o=[t.x,i.x],i.x=o[0],t.x=o[1],e.transform.localPosition=i}if(null!=t.y){i=e.transform.localPosition.clone();r=[t.y,i.y],i.y=r[0],t.y=r[1],e.transform.localPosition=i}if(null!=t.z){var i=e.transform.localPosition.clone();a=[t.z,i.z],i.z=a[0],t.z=a[1],e.transform.localPosition=i}if(null!=t.rotationX){n=e.transform.localRotationEuler.clone();s=[t.rotationX,n.x],n.x=s[0],t.rotationX=s[1],e.transform.localRotationEuler=n}if(null!=t.rotationY){n=e.transform.localRotationEuler.clone();l=[t.rotationY,n.y],n.y=l[0],t.rotationY=l[1],e.transform.localRotationEuler=n}if(null!=t.rotationZ){var n=e.transform.localRotationEuler.clone();h=[t.rotationZ,n.z],n.z=h[0],t.rotationZ=h[1],e.transform.localRotationEuler=n}return this.to(t);var o,r,a,s,l,h},t.prototype.kill=function(t){var e=this.list.remove(t);e&&(e.node=null,e.exectors=null,e.onComplete=null,e.onUpdate=null,e.path=null,this.pool.push(e))},t.from=function(t){return this.getInst().from(t)},t.to=function(t){return this.getInst().to(t)},t.kill=function(t){this.getInst().kill(t)},t.prototype.update=function(t){t*=this.speed;var e=this.list.head;if(!e)return this.timer&&TimeManager.getInst().remove(this.timer),void(this.timer=0);for(;e;)if(e.data.node&&!e.data.node.destroyed){if(e.data.elapsed>=e.data.duration+e.data.delay){if(!e.data.repeated){e.data.exectors.forEach(function(t){t(e.data.duration)}),e.data.onComplete&&e.data.onComplete.exec(e.data.node,1),this.kill(e.key),e=e.next;continue}e.data.elapsed=(e.data.elapsed-e.data.delay)%e.data.duration,e.data.delay=0}e.data.elapsed>=e.data.delay&&(e.data.onUpdate&&e.data.onUpdate.exec(e.data.node,this.clamp01((e.data.elapsed-e.data.delay)/e.data.duration)),e.data.exectors.forEach(function(t){t(e.data.elapsed-e.data.delay)})),e.data.elapsed+=t,e=e.next}else this.kill(e.key),e=e.next},t.prototype.clamp01=function(t){return t<0&&(t=0),t>1&&(t=1),t},t.prototype.checkFPS=function(t){this.frameCount++,this.timePassed+=t,this.frameCount>=this.checkInterval&&(this.animInterval=Math.floor(this.timePassed/this.frameCount*1e3)/1e3,this.frameCount=0,this.timePassed=0)},t}(),Tween2DUtil=function(){function t(){this.animInterval=0,this.checkInterval=100,this.frameCount=0,this.timePassed=0,this.key=0,this.pool=[],this.list=new LinkList,this.speed=1}return t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.setSpeed=function(t){this.speed=t},t.prototype.to=function(t){var e=t.node;if(!e||e.destroyed)return Log.Warn("invalid node"),0;var i=this.pool.pop();if(i||(i={node:null,elapsed:null,duration:null,delay:null,exectors:null,tweenFunc:null,onUpdate:null,onComplete:null,repeated:null,path:null,completedPathCount:null}),i.node=e,i.elapsed=0,i.duration=t.duration||1,i.delay=t.delay||0,i.exectors=[],i.tweenFunc=t.tweenFunc||TweenFunc.Linear,i.onUpdate=t.onUpdate,i.onComplete=t.onComplete,i.repeated=t.repeated||0,i.path=t.path||null,i.completedPathCount=1,null!=t.x){var n=e.x,o=t.x-n;i.exectors.push(function(t){var e=i.tweenFunc(t,n,o,i.duration);i.node.x=e})}if(null!=t.y){var r=e.y,a=t.y-r;i.exectors.push(function(t){var e=i.tweenFunc(t,r,a,i.duration);i.node.y=e})}if(null!=t.rotation){var s=e.rotation,l=t.rotation-s;i.exectors.push(function(t){var e=i.tweenFunc(t,s,l,i.duration);i.node.rotation=e})}if(null!=t.width){var h=e.width,u=t.width-h;i.exectors.push(function(t){var e=i.tweenFunc(t,h,u,i.duration);i.node.width=e})}if(null!=t.height){var c=e.height,d=t.height-c;i.exectors.push(function(t){var e=i.tweenFunc(t,c,d,i.duration);i.node.height=e})}if(null!=t.bottom){var p=e.bottom,f=t.bottom-p;i.exectors.push(function(t){var e=i.tweenFunc(t,p,f,i.duration);i.node.bottom=e})}if(null!=t.top){var g=e.top,_=t.top-g;i.exectors.push(function(t){var e=i.tweenFunc(t,g,_,i.duration);i.node.top=e})}if(null!=t.left){var m=e.left,y=t.left-m;i.exectors.push(function(t){var e=i.tweenFunc(t,m,y,i.duration);i.node.left=e})}if(null!=t.right){var v=e.right,I=t.right-v;i.exectors.push(function(t){var e=i.tweenFunc(t,v,I,i.duration);i.node.right=e})}if(null!=t.alpha){var w=e.alpha,b=t.alpha-w;i.exectors.push(function(t){var e=i.tweenFunc(t,w,b,i.duration);i.node.alpha=e})}if(null!=t.scalex){var C=e.scaleX,S=t.scalex-C;i.exectors.push(function(t){var e=i.tweenFunc(t,C,S,i.duration);i.node.scaleX=e})}if(null!=t.scaley){var x=e.scaleY,T=t.scaley-x;i.exectors.push(function(t){var e=i.tweenFunc(t,x,T,i.duration);i.node.scaleY=e})}return this.timer||(this.timer=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this))),this.list.append(++this.key,i)},t.prototype.from=function(t){var e=t.node;return!e||e.destroyed?(Log.Warn("invalid node"),0):(null!=t.x&&(i=[t.x,e.x],e.x=i[0],t.x=i[1]),null!=t.y&&(n=[t.y,e.y],e.y=n[0],t.y=n[1]),null!=t.rotation&&(o=[t.rotation,e.rotation],e.rotation=o[0],t.rotation=o[1]),null!=t.width&&(r=[t.width,e.width],e.width=r[0],t.width=r[1]),null!=t.height&&(a=[t.height,e.height],e.height=a[0],t.height=a[1]),null!=t.alpha&&(s=[t.alpha,e.alpha],e.alpha=s[0],t.alpha=s[1]),null!=t.scalex&&(l=[t.scalex,e.scaleX],e.scaleX=l[0],t.scalex=l[1]),null!=t.scaley&&(h=[t.scaley,e.scaleY],e.scaleY=h[0],t.scaley=h[1]),this.to(t));var i,n,o,r,a,s,l,h},t.prototype.path=function(t){var e=t.node;if(!e||e.destroyed)return Log.Warn("invalid node"),0;{if(!(t.path.length<2)){var i=t.path[0],n=t.path[1];return e.x=i.x,e.y=i.y,t.x=n.x,t.y=n.y,this.toPath(t)}Log.Error("path tween without enough path point < 2")}},t.prototype.toPath=function(t){var e=t.node;if(!e||e.destroyed)return Log.Warn("invalid node"),0;var i=this.pool.pop();if(i||(i={node:null,elapsed:null,duration:null,delay:null,exectors:null,tweenFunc:null,onUpdate:null,onComplete:null,repeated:null,path:null,completedPathCount:null}),i.node=e,i.elapsed=0,i.duration=t.duration||1,i.delay=t.delay||0,i.exectors=[],i.tweenFunc=t.tweenFunc||TweenFunc.Path.Linear,i.onUpdate=t.onUpdate,i.onComplete=t.onComplete,i.repeated=t.repeated||0,i.path=t.path||null,i.completedPathCount=1,null!=t.x||null!=t.y){for(var n=i.path,o=n.length,r=[],a=[],s=[],l=[],h=[],u=0,c=[],d=0!=i.repeated?o:o-1,p=0;p<d;p++){var f=n[p],g=n[(m=p+1)==o?0:m],_=Math.sqrt(Math.pow(f.x-g.x,2)+Math.pow(f.y-g.y,2));c.push(_),u+=_}for(p=0;p<d;p++){var f=n[p],m=p+1,y=(g=n[m==o?0:m]).x-f.x,v=g.y-f.y;r.push(y),a.push(v),l.push(f.x),h.push(f.y),s.push(c[p]/u*i.duration)}i.exectors.push(function(t){var e=i.tweenFunc(t,l,r,s,i.duration);i.node.x=e}),i.exectors.push(function(t){var e=i.tweenFunc(t,h,a,s,i.duration);i.node.y=e})}var I=TweenFunc.Linear;if(null!=t.rotation){var w=e.rotation,b=t.rotation-w;i.exectors.push(function(t){var e=I(t,w,b,i.duration);i.node.rotation=e})}if(null!=t.width){var C=e.width,S=t.width-C;i.exectors.push(function(t){var e=I(t,C,S,i.duration);i.node.width=e})}if(null!=t.height){var x=e.height,T=t.height-x;i.exectors.push(function(t){var e=I(t,x,T,i.duration);i.node.height=e})}if(null!=t.bottom){var M=e.bottom,L=t.bottom-M;i.exectors.push(function(t){var e=i.tweenFunc(t,M,L,i.duration);i.node.bottom=e})}if(null!=t.top){var D=e.top,E=t.top-D;i.exectors.push(function(t){var e=i.tweenFunc(t,D,E,i.duration);i.node.top=e})}if(null!=t.left){var R=e.left,P=t.left-R;i.exectors.push(function(t){var e=i.tweenFunc(t,R,P,i.duration);i.node.left=e})}if(null!=t.right){var N=e.right,G=t.right-N;i.exectors.push(function(t){var e=i.tweenFunc(t,N,G,i.duration);i.node.right=e})}if(null!=t.alpha){var A=e.alpha,U=t.alpha-A;i.exectors.push(function(t){var e=I(t,A,U,i.duration);i.node.alpha=e})}return this.timer||(this.timer=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this))),this.list.append(++this.key,i)},t.prototype.kill=function(t){var e=this.list.remove(t);e&&(e.node=null,e.exectors=null,e.onComplete=null,e.onUpdate=null,e.path=null,this.pool.push(e))},t.path=function(t){return this.getInst().path(t)},t.from=function(t){return this.getInst().from(t)},t.to=function(t){return this.getInst().to(t)},t.kill=function(t){this.getInst().kill(t)},t.prototype.update=function(t){t*=this.speed;var e=this.list.head;if(!e)return this.timer&&TimeManager.getInst().remove(this.timer),void(this.timer=0);for(;e;)if(e.data.node&&!e.data.node.destroyed){if(e.data.elapsed>=e.data.duration+e.data.delay){if(!(e.data.repeated<0||e.data.repeated>1)){e.data.exectors.forEach(function(t){t(e.data.duration)}),e.data.onComplete&&e.data.onComplete.exec(e.data.node,1),this.kill(e.key),e=e.next;continue}e.data.repeated>0&&(e.data.repeated-=1),e.data.elapsed=(e.data.elapsed-e.data.delay)%e.data.duration,e.data.delay=0}e.data.elapsed>=e.data.delay&&(e.data.onUpdate&&e.data.onUpdate.exec(e.data.node,this.clamp01((e.data.elapsed-e.data.delay)/e.data.duration)),e.data.exectors.forEach(function(t){t(e.data.elapsed-e.data.delay)})),e.data.elapsed+=t,e=e.next}else this.kill(e.key),e=e.next},t.prototype.clamp01=function(t){return t<0&&(t=0),t>1&&(t=1),t},t.prototype.checkFPS=function(t){this.frameCount++,this.timePassed+=t,this.frameCount>=this.checkInterval&&(this.animInterval=Math.floor(this.timePassed/this.frameCount*1e3)/1e3,this.frameCount=0,this.timePassed=0)},t}(),TimeWatch=function(){function t(){}return t.Start=function(){this.startedTime=(new Date).getTime()},t.Stop=function(t){var e=(new Date).getTime();Log.Debug("================================================================"),t&&Log.Debug(t),Log.Debug("elapsed:"+(e-this.startedTime)/1e3),Log.Debug("================================================================")},t}();TimeWatch.startedTime=0;var TimeManager=function(){function t(){this.pool=[],this.pause=!1,this.key=0,this.pool=[],this.list=new LinkList,this.lateupdteList=new LinkList,this.speed=1,this.nextNode=null}return t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.SetSpeed=function(t){this.speed=t},t.prototype.Pause=function(t){this.pause=t},t.prototype.add=function(t,e,i,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var a=this.pool.length>0?this.pool.pop():null;return a?(a.interval=t,a.delay=e,a.repeat=i,a.elapsed=0,a.times=0,a.is_updater=o,a.cb=n,a.excludeFromPause=r):a={interval:t,delay:e,repeat:i,elapsed:0,times:0,is_updater:o,cb:n,excludeFromPause:r},this.list.append(++this.key,a)},t.prototype.remove=function(t){this.nextNode&&this.nextNode.key==t&&(this.nextNode=this.nextNode.next);var e=this.list.remove(t);e&&this.pool.push(e)},t.prototype.loop=function(t,e,i){return void 0===i&&(i=!1),this.add(t,0,0,e,i)},t.prototype.loopTimes=function(t,e,i,n){return void 0===n&&(n=!1),this.add(t,0,e,i,null,n)},t.prototype.lowframeLoop=function(t){return this.add(1/24,0,0,t)},t.prototype.delayLoop=function(t,e,i,n){return void 0===n&&(n=!1),this.add(t,e,0,i,null,n)},t.prototype.once=function(t,e,i){return void 0===i&&(i=!1),this.add(0,t,1,e,null,i)},t.prototype.addUpdater=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=!1),this.add(0,e,0,t,!0,i)},t.prototype.update=function(t){if(t*=this.speed,this.list.head){for(var e=this.list.head;e;)this.nextNode=e.next,!this.pause||e.data.excludeFromPause?(e.data.elapsed+=t,e.data.elapsed>=e.data.delay&&e.data.is_updater?(e.data.cb.exec(t),e=this.nextNode):0!=e.data.repeat&&e.data.times>=e.data.repeat?(this.remove(e.key),e=this.nextNode):(e.data.elapsed>=e.data.delay+e.data.interval&&(e.data.times++,e.data.elapsed=e.data.delay,e.data.cb.exec(e.key)),e=this.nextNode)):e=this.nextNode;this.nextNode=null}},t.prototype.add_lateupdater=function(t){return this.addLate(0,0,0,t,!0)},t.prototype.addLate=function(t,e,i,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var a=this.pool.length>0?this.pool.pop():null;return a?(a.interval=t,a.delay=e,a.repeat=i,a.elapsed=0,a.times=0,a.is_updater=o,a.cb=n,a.excludeFromPause=r):a={interval:t,delay:e,repeat:i,elapsed:0,times:0,is_updater:o,cb:n,excludeFromPause:r},this.lateupdteList.append(++this.key,a)},t.prototype.removeLate=function(t){var e=this.lateupdteList.remove(t);e&&this.pool.push(e)},t.prototype.lateupdate=function(){if(this.lateupdteList.head)for(var t=this.lateupdteList.head;t;)t.data.is_updater?(t.data.cb.exec(),t=t.next):0!=t.data.repeat&&t.data.times>=t.data.repeat?(this.remove(t.key),t=t.next):(t.data.times++,t.data.cb.exec(),t=t.next)},t}(),LinkList=function(){function t(){this.pool=[],this._head=this._tail=null,this.pool=[]}return t.prototype.spawn_node=function(t,e){var i=this.pool.length>0?this.pool.pop():null;return i?(i.key=t,i.data=e,i.next=null):i={key:t,data:e,next:null},i},Object.defineProperty(t.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),t.prototype.append=function(t,e){var i=this.spawn_node(t,e);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,i.key},t.prototype.remove=function(t){if(!t)return null;if(!this._head)return null;for(var e,i=this._head;i&&i.key!=t;)e=i,i=i.next;if(!i)return null;e?(e.next=i.next,i.next||(this._tail=e)):(this._head=i.next,i.next||(this._tail=null));var n=i.data;return i.next=null,i.data=null,this.pool.push(i),n},t}(),handler_pool=[],handler_pool_size=10,cbhandler=function(){function t(){}return t.prototype.init=function(t,e){void 0===e&&(e=null);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.cb=t,this.host=e,this.args=i,this.times=0,this.is_persist=!1},t.prototype.exec=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.args.concat(t);this.cb.apply(this.host,i),this.times++,this.is_persist||this.release()},t.prototype.retain=function(){this.is_persist=!0},t.prototype.release=function(){},t.gen_handler=function(e,i){void 0===i&&(i=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=new t;return r.init.apply(r,[e,i].concat(n)),r},t}(),SortUtil=function(){function t(){}return t.orderby=function(e,i){if(e.length<=1)return e;for(var n=Math.floor(e.length/2),o=e.splice(n,1)[0],r=[],a=[],s=0,l=e;s<l.length;s++){var h=l[s];i(h)<i(o)?r.push(h):a.push(h)}return t.orderby(r,i).concat([o],t.orderby(a,i))},t}(),RandomArrayUtil=function(){function t(){}return t.GetRandomArray=function(t,e,i){for(var n=[],o=0;o<t;o++)n.push(o);for(var r,a=[],s=0;s<e;s++)r=0==(r=Math.ceil(Math.random()*n.length))?1:r,r+=i?0:-1,a.push(n[r]),n.splice(r,1);return a},t}(),ScriptPoolManager_deprecated=function(){function t(){this.scriptPoolDic=new Laya.Dictionary}return t.GetInstance=function(){return this._inst||(this._inst=new t),this._inst},t.prototype.InitPool=function(t,e){var i=new LayaScriptObjectPool;i.Init(t,e),this.scriptPoolDic.set(e,i)},t.prototype.Spawn=function(t){var e=this.scriptPoolDic.get(t);return e?e.Spawn():(Log.Warn("Spawn的对象池没有初始化"),null)},t.prototype.Recycle=function(t,e){var i=this.scriptPoolDic.get(e);return i?i.Recycle(t):(Log.Warn("Recycle的对象池没有初始化"),null)},t.prototype.Destory=function(t){var e=this.scriptPoolDic.get(t);e?(e.Destory(),this.scriptPoolDic.remove(t)):Log.Warn("Destory的对象池没有初始化")},t}(),ScriptPoolManager=function(){function t(){this.scriptPoolDic=new Laya.Dictionary}return t.GetInstance=function(){return this._inst||(this._inst=new t),this._inst},t.prototype.InitPool=function(t,e,i){var n=new ScriptObjectPool;n.Init(t,e,i),this.scriptPoolDic.set(e,n)},t.prototype.Spawn=function(t){var e=this.scriptPoolDic.get(t);return e?e.Spawn():(Log.Warn("Spawn的对象池没有初始化"),null)},t.prototype.Recycle=function(t,e){var i=this.scriptPoolDic.get(e);return i?i.Recycle(t):(Log.Warn("Recycle的对象池没有初始化"),null)},t.prototype.Destory=function(t){var e=this.scriptPoolDic.get(t);e?(e.Destory(),this.scriptPoolDic.remove(t)):Log.Warn("Destory的对象池没有初始化")},t}(),LayaScriptObjectPool=function(){function t(){}return t.prototype.Init=function(t,e){this.curType=e,this.m_UnusedObjects=new Array;for(var i=0;i<t;i++){var n=new this.curType;this.m_UnusedObjects.push(n)}},t.prototype.Spawn=function(){return this.m_UnusedObjects.length>0?this.m_UnusedObjects.pop():new this.curType},t.prototype.Recycle=function(t){this.m_UnusedObjects.push(t)},t.prototype.Destory=function(){this.m_UnusedObjects=null},t}(),MathUtil=function(){function t(){}return t.get2PointAngle=function(t,e,i,n){return Math.atan2(n-e,i-t)*(180/Math.PI)+90},t.get2PointDistance=function(t,e,i,n){var o=Math.abs(t-e),r=Math.abs(i-n);return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))},t}(),Log=function(){function t(){}return t.Debug=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=Laya.Browser.window.LogHelper;(Laya.Browser.onWeiXin&&n||!Laya.Browser.onWeiXin&&this.useLog)&&console.log.apply(console,[(Laya.timer?"FrameNO: "+Laya.timer.currFrame:"")+" message:"+t].concat(e))},t.Info=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=Laya.Browser.window.LogHelper;(Laya.Browser.onWeiXin&&n||!Laya.Browser.onWeiXin&&this.useLog)&&console.log.apply(console,[(Laya.timer?"FrameNO: "+Laya.timer.currFrame:"")+" message:"+t].concat(e))},t.Warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=Laya.Browser.window.LogHelper;(Laya.Browser.onWeiXin&&n||!Laya.Browser.onWeiXin&&this.useLog)&&console.warn.apply(console,["[WARNING]:"+t].concat(e))},t.Error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=Laya.Browser.window.LogHelper;(Laya.Browser.onWeiXin&&n||!Laya.Browser.onWeiXin&&this.useLog)&&console.error.apply(console,["[ERROR]:"+t].concat(e))},t}();Log.useLog=!0;var GameDataUtil=function(){function t(){}return t.DiamondExchange_Coin=function(t){return t*GameDataManager.getInstance().Exchange_Coin},t.DiamondExchange_Power=function(t){return t*GameDataManager.getInstance().Exchange_Power},t.NumberToString=function(e){var i=Math.floor(e),n=Math.floor(Math.log(i)*Math.LOG10E),o=Math.floor(n/3),r=EnumNumberTally[o];if(void 0==r||"None"==r)return i.toString();return t.ConvertNumber(parseFloat((e/Math.pow(10,3*o)).toFixed(3)))+r},t.ConvertNumber=function(t){var e=Math.floor(t);return e<10?parseFloat(t.toFixed(2)):e>=10&&e<100?parseFloat(t.toFixed(1)):e},t.ConvertSecondToTimeStr=function(t,e){if(void 0===e&&(e=!0),e){var i=Math.floor(t/3600),n=t-3600*i-60*(o=Math.floor(t/60)-60*i);return(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(n<10?"0"+n:n)}var o=Math.floor(t/60),n=t-60*o;return(o<10?"0"+o:o)+":"+(n<10?"0"+n:n)},t.Upgrade_Spawn=function(t){return FormulaUtil.CalcByConfig(EnumFormulaType.SpawnUpgradeCost,t)},t.Upgrade_Weapon_Main=function(t){return FormulaUtil.CalcByConfig(EnumFormulaType.MainWeaponUpgradeCost,t)},t.Upgrade_Weapon_Side=function(t,e){return void 0===e&&(e=EnumSideWeaponType.Missile),FormulaUtil.CalcByConfig(EnumFormulaType.SideWeaponUpgradeCost1+e-EnumSideWeaponType.Missile,t)},t.Spawn_Coin_Lvl=function(t){return FormulaUtil.CalcByConfig(EnumFormulaType.GoldUpgrade,t)},t.Spawn_Coin_Max=function(t){return 100*Math.floor(this.Spawn_Coin_Lvl(t))},t.Spawn_Coin=function(t){return Math.floor(this.Spawn_Coin_Lvl(t))},t.Spawn_Diamond_Lvl=function(t){return FormulaUtil.CalcByConfig(EnumFormulaType.DiamondUpgrade,t)},t.Spawn_Diamond_Max=function(e){return t.Spawn_Diamond_Lvl(e)},t.Spawn_Diamond=function(e){return Math.ceil(t.Spawn_Diamond_Lvl(e)/10)},t.MainWeapon_BulletNum=function(t){return FormulaUtil.CalcBulletNumPerSec(t,EnumBulletOutLookType.MainPlayerBullet,[])},t.MainWeapon_BulletPower=function(t){return FormulaUtil.CalcPlayerBulletDamage(t,EnumBulletOutLookType.MainPlayerBullet,0,[])},t.SideWeapon_Power=function(t,e,i){return void 0===i&&(i=EnumSideWeaponType.Missile),FormulaUtil.GetSideWeaponDamage(i,e)},t.IsSameDate=function(t,e){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},t.CheckSideWeaponIDUnlocked=function(t){for(var e=!1,i=0;i<GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList.length;i++){if(GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList[i].id==t){e=!0;break}}return e},t.CheckSideWeaponLevel=function(t){for(var e=0;e<GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList.length;e++){var i=GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList[e];if(i.id==t)return i.level}return-1},t}(),CurveUtil=function(){function t(){}return t.CreateCurvePath=function(t,e,i,n){var o=new Array;if(n<2)return o;for(var r=1/(n-1),a=0;a<n;a++)o.push(this.BesselCurve(t,e,i,r*a));return o},t.BesselCurve=function(t,e,i,n){n<0?n=0:n>1&&(n=1);return new Vec2(Math.pow(1-n,2)*t.x+2*n*(1-n)*e.x+Math.pow(n,2)*i.x,Math.pow(1-n,2)*t.y+2*n*(1-n)*e.y+Math.pow(n,2)*i.y)},t}(),CommonUtil2D=function(){function t(){}return t.GetLocalPositionUnder=function(t,e,i){void 0===i&&(i=null);var n=this.GetGlobalPosition(t),o=this.GetGlobalPosition(e);return new Vec2(n.x-o.x,n.y-o.y)},t.GetPosUnderTargetObj=function(t,e,i){return void 0===i&&(i=null),t.parent==e?new Vec2(t.x,t.y):this.GetLocalPositionUnder(t,e)},t.ChangeToGrandParent=function(t,e){var i=new Vec2(0,0);if(t.parent){var n=t.parent;i.x=n.x,i.y=n.y}e.addChild(t),t.x+=i.x,t.y+=i.y},t.GetLoalPostionUnderSameParent=function(t,e){return this.GetLocalPositionUnder(t,e.parent)},t.GetGlobalPosition=function(t){var e=new Laya.Point(0,0),i=t.localToGlobal(e);return new Vec2(i.x,i.y)},t.LookAt=function(t,e){t.parent!=e.parent&&Log.Error("Lookat的两个物体, 必须在同个父节点下, 否则位置不在同个本地坐标系计算会出错.");var i=new Vec2(e.x,e.y);return this.LookAtPos(t,i)},t.LookAtPos=function(t,e,i){void 0===i&&(i=!0);var n=new Vec2(t.x,t.y),o=e.sub(n).normalise().dot(i?Vec2.UPForLaya2D:Vec2.UP),r=Math.acos(o)/Math.PI*180;r*=i?1:-1,e.x>t.x?t.rotation=r:t.rotation=-r},t.DivideCircle=function(t,e,i){for(var n=[],o=2*Math.PI/i,r=0;r<i;r++){var a=new Vec2(t.x+Math.cos(o*r)*e,t.y+Math.sin(o*r)*e);n.push(a)}return n},t}(),CommonUtil=function(){function t(){}return t.isObject=function(t){return"function"==typeof t||"object"==typeof t&&null!==t},t.isNative=function(t){return null===t||"object"!=typeof t&&"function"!=typeof t},t.GetFileName=function(t,e){void 0===e&&(e=!1);var i=t.lastIndexOf("/")+1;i<0&&(i=0);var n=t.length;if(!e){var o=t.lastIndexOf(".");o>=0&&(n=o)}var r=n-i;return t.substr(i,r)},t.GetDirName=function(t){for(var e=0;"/"==t.charAt(e);)e++;var i=t.lastIndexOf("/");i<0&&(i=t.length);var n=i-e;return t.substr(e,n)},t.LoadProtoBytesFile=function(t,e){var i=this;ResourceManager.GetInstance().loadBytesFile(t,function(t){if(t.Ok){var n=i.ConvertArrayBuffer(t.Param),o=n.getUint8Array(n.pos,n.length);e(o)}else e(null)})},t.ConvertArrayBuffer=function(t){var e=new Laya.Byte;return e.endian=Laya.Byte.LITTLE_ENDIAN,e.clear(),e.writeArrayBuffer(t),e.pos=0,e},t.calcCurve=function(t,e,i,n,o){return(1-3*o*o+2*o*o*o)*t+o*(1-o)*(1-o)*e+(3*o*o-2*o*o*o)*i-o*o*(1-o)*n},t.lerp=function(t,e,i){return e*i+t*(1-i)},t.LerpNum=function(t,e,i){return this.lerp(t,e,i)},t.FormatURL=function(t){return this.IsUrlFormated(t)?t:ResPathConst.USE_WEB_RES?(t.url?t.url=ResPathConst.RES_URL_HEADER+t.url:t=ResPathConst.RES_URL_HEADER+t,t):t},t.FormatURLArray=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(this.FormatURL(n))}return e},t.ReformatURL=function(t){if(!this.IsUrlFormated(t))return t;if(ResPathConst.USE_WEB_RES){var e=this.ConverUrlObject(t);return e=e.substring(e.indexOf(ResPathConst.RES_URL_HEADER)+ResPathConst.RES_URL_HEADER.length),t.url?t.url=e:t=e,t}return t},t.ReformatURLArray=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(this.ReformatURL(n))}return e},t.IsUrlFormated=function(t){if(ResPathConst.USE_WEB_RES){return this.ConverUrlObject(t).indexOf(ResPathConst.RES_URL_HEADER)>=0}return!0},t.ConverUrlObject=function(t){return t.url?t.url:t},t.OnWeiXin=function(){return Laya.Browser.onWeiXin},t.OnMiniGame=function(){return Laya.Browser.onMiniGame},t.isBoxCrossed=function(t,e,i,n){var o=i.sub(t),r=e.add(n).mul(.5),a=Math.abs(o.dot(Vec2.RIGHT)),s=Math.abs(o.dot(Vec2.UP));return(a<=r.x||r.x<=0)&&(s<=r.y||r.y<=0)},t.IsBoxCrossed=function(t,e){return CollisionUtil.IsBoxCrossed(t,e)},t.IsBoxPointCrossed=function(t,e){return CollisionUtil.IsBoxPointCrossed(t,e)},t.IsPointInSector=function(t,e,i,n,o,r){return void 0===r&&(r=!0),CollisionUtil.IsPointInSector(t,e,i,n,o,r)},t.GetXAxisInNormalCoByAngle=function(t,e){void 0===e&&(e=!1),e||(t*=-1);var i=t/180*Math.PI;return new Vec2(Math.cos(i),Math.sin(i))},t.GetYAxisInNormalCoByAngle=function(t,e){void 0===e&&(e=!1),e||(t*=-1);var i=t/180*Math.PI;return new Vec2(-Math.sin(i),Math.cos(i))},t.IsLineCrossedInSector=function(t,e,i,n,o,r,a){return void 0===a&&(a=!0),CollisionUtil.IsLineCrossedInSector(t,e,i,n,o,r,a)},t.IsBoxCrossedSector=function(t,e,i){return void 0===i&&(i=!0),CollisionUtil.IsBoxCrossedSector(t,e,i)},t.IsPointInCircle=function(t,e,i){return CollisionUtil.IsPointInCircle(t,e,i)},t.GetProjectionPointToLine=function(t,e,i){return CollisionUtil.GetProjectionPointToLine(t,e,i)},t.LineLineCrossed=function(t,e,i,n){return CollisionUtil.LineLineCrossed(t,e,i,n)},t.RotateVector=function(t,e,i){void 0===i&&(i=!1),e*=i?1:-1;var n=this.GetRadian(e),o=Math.cos(n),r=Math.sin(n),a=o*t.x-r*t.y,s=r*t.x+o*t.y;return new Vec2(a,s)},t.GetRadian=function(t){return t/180*Math.PI},t.SaveScreenToBase64=function(){Laya.stage.drawToCanvas(Laya.stage.width,Laya.stage.height,0,0).toBase64("image/png",.92,function(t){})},t.downLoadImage=function(t,e){var i=document.createElement("a");i.href=t.toDataURL(),i.download=e,i.click()},t.exportRawText=function(t,e){var i=window.URL||window.webkitURL||window,n=new Blob([e]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=i.createObjectURL(n),o.download=t,this.fakeClick(o)},t.fakeClick=function(t){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)},t.CreateUICtrl=function(t,e){var i=ui.UIFactory.Create(t);return i.Init(e,t),i},t.RemoveRepeated=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.indexOf(n)<0&&e.push(n)}return e},t.GetUID=function(){return this.uid++},t.LoopEnum=function(t){var e=[];for(var i in t){var n=parseInt(i);n&&e.push(n)}return e},t.GetRequest=function(){var t=location.search,e=new Object,i=t.indexOf("?");if(-1!=i)for(var n=t.substr(i+1).split("&"),o=0;o<n.length;o++)e[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return e},t.RemoveURLParam=function(t){var e=window.location.href,i=window.location.search.substr(1),n=e.substr(0,e.indexOf("?")),o="",r=new Array;if(""!=i)for(var a=i.split("&"),s=0;s<a.length;s++){a[s].split("=")[0]!=t&&r.push(a[s])}return r.length>0&&(o="?"+r.join("&")),e=n+o},t.ExchangeArray=function(t,e,i){var n=t[e];t[e]=t[i],t[i]=n},t.CreateOfflineDummyPlayerInfo=function(){ConstDefine.OFFLINE_PLAYER_ID;var t=ConstDefine.HTTP_OFFLINE_OPEN_ID+"_dummyHttp";return this.CreateDummyPlayerInfo(t,1,30,1,1,-1,30,1,2,1,1)},t.CreateDummyPlayerInfo=function(t,e,i,n,o,r,a,s,l,h,u){var c=new com.msg.playerInfo;c.openId=t,c.newbiGuideInfo=new com.msg.newbiGuideInfo,c.newbiGuideInfo.nextStep=-1,c.moneyInfo=new com.msg.moneyInfo,c.moneyInfo.diamondNum=1e3,c.moneyInfo.goldNum=1e8,c.moneyInfo.pointNum=98,c.moneyInfo.latestPointRefreshTime=Math.floor((new Date).getTime()/1e3),c.moneyInfo.lotteryNum=0,c.moneyInfo.spawnList=[];var d=new com.msg.moneySpawnInfo;c.moneyInfo.spawnList.push(d),d.spawnID=1,d.moneyType=1,d.spawnType=1,d.moneyNum=10,d.latestPointRefreshTime=Math.floor((new Date).getTime()/1e3),d.createTime=Math.floor((new Date).getTime()/1e3),c.levelInfo=new com.msg.levelInfo,c.levelInfo.latestUnCompeleteLevel=1,c.playerWeaponInfo=new com.msg.playerWeaponInfo,c.playerWeaponInfo.spawnLvl=1,c.playerWeaponInfo.curSideWeaponId=EnumSideWeaponType.Missile,c.playerWeaponInfo.mainWeapon=new com.msg.weaponDetail,c.playerWeaponInfo.mainWeapon.id=1,c.playerWeaponInfo.mainWeapon.level=100,c.playerWeaponInfo.mainWeapon.evolveLevel=9,c.playerWeaponInfo.sideWeapons=[];for(var p=2;p<7;p++){var f=new com.msg.weaponDetail;f.id=p,f.level=1,c.playerWeaponInfo.sideWeapons.push(f)}c.inviteList=[];for(var g=0;g<6;g++){var _=new com.msg.inviteDetail;_.friendOpenID="Test Friend"+g,_.rewardGained=g>3?3:g,_.picUrl=g>1?ConstDefine.DEFAULT_USER_HEADER_URL:"http://img.qqzhi.com/uploads/2018-12-14/110256340.jpg",_.rewardNum=10*(g+1),_.index=g+1,c.inviteList.push(_)}return c.verifyInfo=new com.msg.verifyInfo,c.verifyInfo.state=0,c},t}();CommonUtil.uid=0;var ClipFontUtli=function(){function t(t){this.space=0,this.clipArray=new Array,this.space=void 0!=t&&null!=t?t:0}return t.prototype.setClipNumber=function(t,e){void 0===e&&(e=FontClipAlign.center);var i=0;{if(void 0!=this.clipArray&&null!=this.clipArray&&0!=this.clipArray.length){for(var n=0,o=this.clipArray.length-1;o>=0;o--)0==o?this.clipArray[o].index=t%10:t>=Math.pow(10,o)?(i=o,this.clipArray[o].index=Math.floor(t/Math.pow(10,o)),t-=Math.floor(t/Math.pow(10,o))*Math.pow(10,o)):o<i?this.clipArray[o].index=0:(this.clipArray[o].index=10,++n);return this.getAlginCorrection(n,e)}Log.Debug("clipArray is error")}},t.prototype.getAlginCorrection=function(t,e){void 0===e&&(e=FontClipAlign.center);var i=0;switch(e){case FontClipAlign.center:i=t*(this.clipArray[0].width+this.space)/2;break;case FontClipAlign.left:i=t*(this.clipArray[0].width+this.space)}return i},t}(),FontClipAlign;!function(t){t[t.center=0]="center",t[t.left=1]="left"}(FontClipAlign||(FontClipAlign={}));var ui;!function(t){var e;!function(t){t[t.BackgroundUIID=0]="BackgroundUIID",t[t.BattleUIID=1]="BattleUIID",t[t.CommonPanelUIID=2]="CommonPanelUIID",t[t.ExchangeUIID=3]="ExchangeUIID",t[t.HomePageUIID=4]="HomePageUIID",t[t.InviteFriendUIID=5]="InviteFriendUIID",t[t.InviteVerifyFriendUIID=6]="InviteVerifyFriendUIID",t[t.LeaderboardUIID=7]="LeaderboardUIID",t[t.LevelUIID=8]="LevelUIID",t[t.LoadingUIID=9]="LoadingUIID",t[t.LotteryResultUIID=10]="LotteryResultUIID",t[t.LotteryRewardHistUIID=11]="LotteryRewardHistUIID",t[t.MoneyInfoUIID=12]="MoneyInfoUIID",t[t.MoreSpawnUIID=13]="MoreSpawnUIID",t[t.ProgressUIID=14]="ProgressUIID",t[t.RebornUIID=15]="RebornUIID",t[t.ResultUIID=16]="ResultUIID",t[t.SettingUIID=17]="SettingUIID",t[t.UpgradeUIID=18]="UpgradeUIID",t[t.VerifyUIID=19]="VerifyUIID",t[t.WaitingUIID=20]="WaitingUIID"}(e=t.UIID||(t.UIID={}));var i=function(){function i(){}return i.Create=function(i){switch(i){case e.BackgroundUIID:return new t.uicontrollers.BackgroundUICtrl(new t.BackgroundUI);case e.BattleUIID:return new t.uicontrollers.BattleUICtrl(new t.BattleUI);case e.CommonPanelUIID:return new t.uicontrollers.CommonPanelUICtrl(new t.CommonPanelUI);case e.ExchangeUIID:return new t.uicontrollers.ExchangeUICtrl(new t.ExchangeUI);case e.HomePageUIID:return new t.uicontrollers.HomePageUICtrl(new t.HomePageUI);case e.InviteFriendUIID:return new t.uicontrollers.InviteFriendUICtrl(new t.InviteFriendUI);case e.InviteVerifyFriendUIID:return new t.uicontrollers.InviteVerifyFriendUICtrl(new t.InviteVerifyFriendUI);case e.LeaderboardUIID:return new t.uicontrollers.LeaderboardUICtrl(new t.LeaderboardUI);case e.LevelUIID:return new t.uicontrollers.LevelUICtrl(new t.LevelUI);case e.LoadingUIID:return new t.uicontrollers.LoadingUICtrl(new t.LoadingUI);case e.LotteryResultUIID:return new t.uicontrollers.LotteryResultUICtrl(new t.LotteryResultUI);case e.LotteryRewardHistUIID:return new t.uicontrollers.LotteryRewardHistUICtrl(new t.LotteryRewardHistUI);case e.MoneyInfoUIID:return new t.uicontrollers.MoneyInfoUICtrl(new t.MoneyInfoUI);case e.MoreSpawnUIID:return new t.uicontrollers.MoreSpawnUICtrl(new t.MoreSpawnUI);case e.ProgressUIID:return new t.uicontrollers.ProgressUICtrl(new t.ProgressUI);case e.RebornUIID:return new t.uicontrollers.RebornUICtrl(new t.RebornUI);case e.ResultUIID:return new t.uicontrollers.ResultUICtrl(new t.ResultUI);case e.SettingUIID:return new t.uicontrollers.SettingUICtrl(new t.SettingUI);case e.UpgradeUIID:return new t.uicontrollers.UpgradeUICtrl(new t.UpgradeUI);case e.VerifyUIID:return new t.uicontrollers.VerifyUICtrl(new t.VerifyUI);case e.WaitingUIID:return new t.uicontrollers.WaitingUICtrl(new t.WaitingUI)}},i}();t.UIFactory=i}(ui||(ui={}));var WsConnection=function(){function t(){this.ProtoBuf=Laya.Browser.window.protobuf}return t.prototype.Init=function(t){this.wsAddress=t,this.socket=new Laya.Socket,this.recivBytes=new Laya.Byte,this.sendBytes=new Laya.Byte,this.sendBytes.endian=Laya.Byte.BIG_ENDIAN,this.recivBytes.endian=Laya.Byte.BIG_ENDIAN,this.socket.on(Laya.Event.OPEN,this,this.openStaticHandler),this.socket.on(Laya.Event.MESSAGE,this,this.receiveStaticHandler),this.socket.on(Laya.Event.CLOSE,this,this.closeHandler),this.socket.on(Laya.Event.ERROR,this,this.errorHandler)},t.prototype.AddEventListener=function(t,e,i,n){t&&(this.onOpenListener=t),e&&(this.onCloseListener=e),i&&(this.onMessageListener=i),n&&(this.onErrorListener=n)},t.prototype.Connect=function(){this.socket.connectByUrl(this.wsAddress)},t.prototype.SendMsg=function(t,e){this.sendBytes.clear(),this.sendBytes.writeUint32(t),this.sendBytes.writeArrayBuffer(e),this.socket.send(this.sendBytes.buffer)},t.prototype.Close=function(){this.socket&&(this.socket.off(Laya.Event.OPEN,this,this.openStaticHandler),this.socket.off(Laya.Event.MESSAGE,this,this.receiveStaticHandler),this.socket.off(Laya.Event.CLOSE,this,this.closeHandler),this.socket.off(Laya.Event.ERROR,this,this.errorHandler),this.wsAddress=null,this.socket.cleanSocket(),this.socket.close(),this.recivBytes.clear(),this.sendBytes.clear(),this.recivBytes=null,this.sendBytes=null,this.onOpenListener=null,this.onCloseListener=null,this.onMessageListener=null,this.onErrorListener=null,this.socket=null)},t.prototype.openStaticHandler=function(){Log.Debug("socket连接成功"),this.onOpenListener&&this.onOpenListener()},t.prototype.receiveStaticHandler=function(t){if(t instanceof ArrayBuffer){this.recivBytes.clear(),this.recivBytes.writeArrayBuffer(t),this.recivBytes.pos=0;var e=this.recivBytes.getInt32(),i=this.recivBytes.length-4,n=this.recivBytes.getUint8Array(this.recivBytes.pos,i);this.onMessageListener&&this.onMessageListener(e,n)}else Log.Debug("接收网络失败："+t),this.onErrorListener&&this.onErrorListener(t)},t.prototype.closeHandler=function(t){Log.Debug("websocket connection close, type:"+t.type+", code:"+t.code+", reason:"+t.reason),this.onCloseListener&&this.onCloseListener()},t.prototype.errorHandler=function(t){Log.Debug("Link失败："+t.type),this.onErrorListener&&this.onErrorListener(t.type)},t}(),WebsocketNetworkManager=function(){function t(){}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},Object.defineProperty(t.prototype,"WsAddress",{get:function(){return this.wsAddress},set:function(t){this.wsAddress=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NetState",{get:function(){return this.netState},set:function(t){this.netState=t},enumerable:!0,configurable:!0}),t.prototype.Init=function(t,e){this.wsAddress=t,this.msgHandler=e},t.prototype.Connect=function(t){this.Close(),this.wsocket=new WsConnection,this.InitSocket(this.wsocket,this.wsAddress),Log.Debug("开始连接websocket"),this.startConnect(t)},t.prototype.SendMessage=function(t,e){this.wsocket.SendMsg(t,e)},t.prototype.Close=function(){this.wsocket&&(Log.Debug("客户端主动断开连接"),Facade.getInstance().sendNotification(NotificationNames.SOCKET_DISCONNECTED_COMMAND),this.wsocket.Close(),this.wsocket=null)},t.prototype.InitSocket=function(t,e){t.Init(e),t.AddEventListener(this.onOpen.bind(this),this.onClose.bind(this),this.onMessage.bind(this),this.onError.bind(this))},t.prototype.startConnect=function(t){t&&(this.onOpenCallBack=t),this.wsocket.Connect(),this.netState=EnumNetState.CONNECTING},t.prototype.onOpen=function(){this.netState=EnumNetState.CONECTED,this.onOpenCallBack&&(this.onOpenCallBack(!0),this.onOpenCallBack=null)},t.prototype.onMessage=function(t,e){this.msgHandler.Handle(t,e)},t.prototype.onClose=function(){this.netState=EnumNetState.DISCONNECTED,this.onOpenCallBack&&(this.onOpenCallBack(!1,"on close"),this.onOpenCallBack=null),Log.Debug("服务器断开连接"),Facade.getInstance().sendNotification(NotificationNames.SOCKET_DISCONNECTED_COMMAND)},t.prototype.onError=function(t){this.netState=EnumNetState.DISCONNECTED,Log.Warn("network error:"+t),this.onOpenCallBack&&(this.onOpenCallBack(!1,t),this.onOpenCallBack=null)},t}(),NetworkHeartBeat=function(){function t(){this.INTERVAL=2,this.OFFLINE_THREASHOLD=12,this.lastState=EnumNetState.NONE,this.RETRY=3,this.retryCount=0,this.USE_HEART_BEATING=!1,this.waitingLogin=!1}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.Init=function(){TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.Update,this)),this.hasLogin=!1},t.prototype.Start=function(){Log.Debug("开始心跳"),this.lastSendTime=Laya.timer.currTimer,this.lastEchoTime=Laya.timer.currTimer,this.currentTime=Laya.timer.currTimer,this.hasLogin=!0,this.retryCount=0,this.lastState=WebsocketNetworkManager.GetInstance().NetState,WebsocketNetworkManager.GetInstance().NetState==EnumNetState.DISCONNECTED&&(Log.Debug("开始心跳时候, 已经是断开状态尝试重连"),this.reconnect())},t.prototype.Stop=function(){Log.Debug("停止心跳"),this.hasLogin=!1,this.lastSendTime=Laya.timer.currTimer,this.lastEchoTime=Laya.timer.currTimer,this.currentTime=Laya.timer.currTimer},t.prototype.Update=function(t){var e=this;if(this.USE_HEART_BEATING){var i=WebsocketNetworkManager.GetInstance().NetState;if(i!=EnumNetState.NONE)if(i==EnumNetState.CONECTED){if(!this.hasLogin)return this.waitingLogin||Log.Debug("socket已经连接, 等待login服务器"),void(this.waitingLogin=!0);this.waitingLogin=!1,i==EnumNetState.CONECTED&&this.lastState!=EnumNetState.CONECTED&&(Log.Debug("退出断线重连UI, 断线重连成功"),this.retryCount=0),this.lastState=i,this.currentTime=Laya.timer.currTimer,this.currentTime-this.lastSendTime>=1e3*this.INTERVAL&&(WebsocketMessageSender.GetSender().SendHeartBeatPackage(GameDataManager.getInstance().GetLoginPlayerID()),this.lastSendTime=Laya.timer.currTimer),this.currentTime-this.lastEchoTime>=1e3*this.OFFLINE_THREASHOLD&&(Log.Debug("Connected 发送心跳, 等待回复超时"),WebsocketNetworkManager.GetInstance().NetState=EnumNetState.DISCONNECTED)}else i==EnumNetState.CONNECTING?(this.lastState==EnumNetState.DISCONNECTED&&Log.Debug("UI显示正在重连, 断线后尝试重连"),this.lastState=i,this.currentTime=Laya.timer.currTimer,this.currentTime-this.lastEchoTime>=1e3*this.OFFLINE_THREASHOLD&&(Log.Debug("Connecting 正在重连, 等待超时, 提示重连"),WebsocketNetworkManager.GetInstance().NetState=EnumNetState.DISCONNECTED)):this.lastState!=EnumNetState.DISCONNECTED&&(this.retryCount<this.RETRY?(Log.Debug("自动进行重连"),this.reconnect()):(Log.Debug("重连超数, 弹出UI 提醒用户网络断开/重连失败, 进行重连"),this.lastState=EnumNetState.DISCONNECTED,Facade.instance.sendNotification(NotificationNames.OPENUIWITHPARAM,new CommonPanelUIParam(ui.UIID.CommonPanelUIID,"网络断开，请点击按钮重连",function(){e.reconnect()}))));else Log.Debug("网络无状态返回")}},t.prototype.GetServerEcho=function(){this.resetEchoTime()},t.prototype.resetEchoTime=function(){this.lastEchoTime=Laya.timer.currTimer},t.prototype.reconnect=function(){this.retryCount+=1,this.Stop(),WebsocketNetworkManager.GetInstance().Connect(this.onReconnected.bind(this))},t.prototype.onReconnected=function(t,e){t?(Log.Debug("onReconnected : 重连websock 成功, 发送进入房间请求"),this.resetEchoTime()):Log.Debug("onReconnected : 重连websock 失败"+e)},t}(),EnumNetState;!function(t){t[t.NONE=0]="NONE",t[t.CONNECTING=1]="CONNECTING",t[t.CONECTED=2]="CONECTED",t[t.DISCONNECTED=3]="DISCONNECTED"}(EnumNetState||(EnumNetState={}));var MessageHandler=function(){function t(){this.handlerDic=new Laya.Dictionary}return t.prototype.Handle=function(t,e){var i=this.handlerDic.get(t);if(!i){if(null==(i=MessageHandlerFactory.CreateHandler(t)))return;this.handlerDic.set(t,i)}i.BaseMsgHandler(e)},t}(),BaseMsgHandler=function(){return function(){}}(),WebsocketMessageSender=function(){function t(){}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.GetSender=function(){return null==t._instance&&(t._instance=new t),t._instance.curSender},t.prototype.InitMessageSender=function(t){this.curSender=t},t}(),HttpMessageSender=function(){function t(){}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.GetSender=function(){return null==t._instance&&(t._instance=new t),t._instance.curSender},t.prototype.InitMessageSender=function(e){t._instance.curSender=e},t}(),BaseMessageSender=function(){function t(){}return t.prototype.SendSocketMessage=function(t,e){WebsocketNetworkManager.GetInstance().SendMessage(t,e)},t.prototype.SendHttpMsg=function(t,e,i,n){ConstDefine.HTTP_LOGIN?HttpNetworkManager.GetInstance().SendHttpMsg(t,e,i,n):Log.Debug("当前配置不使用Http登录方式, 不发送http请求"+t)},t}(),MessageHandlerFactory=function(){function t(){}return t.CreateHandler=function(t){switch(t){case EnumNetMessage.S_UserLogin_1001:return new UserLoginHandler;case EnumNetMessage.S_GetOpenId_1101:return new GetOpenIdHandler;case EnumNetMessage.S_ExchangeWithDiamond_2001:return new ExchangeWithDiamondHandler;case EnumNetMessage.S_UpgradeWeaponLvl_2011:return new UpgradeWeaponLvlHandler;case EnumNetMessage.S_UpgradeSpawnLvl_2013:return new UpgradeSpawnLvlHandler;case EnumNetMessage.S_WeaponEvolution_2015:return new WeaponEvolutionHandler;case EnumNetMessage.S_EquipSideWeapon_2021:return new EquipSideWeaponHandler;case EnumNetMessage.S_UnlockSideWeapon_2023:return new UnlockSideWeaponHandler;case EnumNetMessage.S_CreateMoneySpawn_2031:return new CreateMoneySpawnHandler;case EnumNetMessage.S_UpdateMoneySpawn_2033:return new UpdateMoneySpawnHandler;case EnumNetMessage.S_GainMoneySpawn_2035:return new GainMoneySpawnHandler;case EnumNetMessage.S_RemoveMoneySpawn_2037:return new RemoveMoneySpawnHandler;case EnumNetMessage.S_InvitedByFriend_2041:return new InvitedByFriendHandler;case EnumNetMessage.S_CheckInviteList_2043:return new CheckInviteListHandler;case EnumNetMessage.S_GetInviteReward_2045:return new GetInviteRewardHandler;case EnumNetMessage.S_GetInviteVerifyReward_2047:return new GetInviteVerifyRewardHandler;case EnumNetMessage.S_GainPointByTime_2051:return new GainPointByTimeHandler;case EnumNetMessage.S_GainPointByMatch_2053:return new GainPointByMatchHandler;case EnumNetMessage.S_MatchComplete_2100:return new MatchCompleteHandler;case EnumNetMessage.S_MatchStart_2101:return new MatchStartHandler;case EnumNetMessage.S_GetMessageVerifyCode_2201:return new GetMessageVerifyCodeHandler;case EnumNetMessage.S_CheckPhoneVerify_2203:return new CheckPhoneVerifyHandler;case EnumNetMessage.S_Lottery_2301:return new LotteryHandler;case EnumNetMessage.S_CheckLotteryRewardHistroy_2303:return new CheckLotteryRewardHistroyHandler;default:return Log.Warn("msgid不存在handler:"+t),null}},t}(),HttpNetworkManager=function(){function t(){}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},Object.defineProperty(t.prototype,"ProtoHttpUrl",{get:function(){return this.protoHttpUrl},set:function(t){this.protoHttpUrl=t},enumerable:!0,configurable:!0}),t.prototype.Init=function(t,e){this.protoHttpUrl=t,this.msgHandler=e,this.recivBytes=new Laya.Byte,this.recivBytes.endian=Laya.Byte.BIG_ENDIAN,this.sendBytes=new Laya.Byte,this.sendBytes.endian=Laya.Byte.BIG_ENDIAN},t.prototype.Close=function(){this.recivBytes.clear(),this.recivBytes=null,this.sendBytes.clear(),this.sendBytes=null},t.prototype.SendHttpMsg=function(t,e,i,n){var o=this;this.sendBytes.clear();var r=t.toString();if(r.length<4)for(var a=4-r.length,s=0;s<a;s++)r="0"+r;for(s=0;s<r.length;s++)this.sendBytes.writeByte(r.charCodeAt(s));this.sendBytes.writeArrayBuffer(e),HttpManager.getIntance().PostByte(this.protoHttpUrl,this.sendBytes.buffer,function(e){if(e instanceof ArrayBuffer){o.recivBytes.clear(),o.recivBytes.writeArrayBuffer(e),o.recivBytes.pos=0;for(var r="",a=0;a<4;a++)r+=String.fromCharCode(o.recivBytes.getByte());var s=parseInt(r),l=o.recivBytes.length-4,h=o.recivBytes.getUint8Array(o.recivBytes.pos,l);o.onMessage(s,h),i&&i(),Log.Debug("HttpNetworkManager: sucess ons http msg, msg id:"+t)}else Log.Warn("HttpNetworkManager: return data is not bytes buffer on http msg, msg id:"+t),n&&n("HttpNetworkManager: return data is not bytes buffer")},function(e){Log.Warn("HttpNetworkManager: fail on http msg:"+e+" msgID:"+t),n&&n(e)})},t.prototype.SendHttpMsg_back=function(t,e,i,n){var o=this;this.sendBytes.clear(),this.sendBytes.writeUint32(t),this.sendBytes.writeArrayBuffer(e),HttpManager.getIntance().PostByte(this.protoHttpUrl,this.sendBytes.buffer,function(e){if(e instanceof ArrayBuffer){o.recivBytes.clear(),o.recivBytes.writeArrayBuffer(e),o.recivBytes.pos=0;var r=o.recivBytes.getInt32(),a=o.recivBytes.length-4,s=o.recivBytes.getUint8Array(o.recivBytes.pos,a);o.onMessage(r,s),i&&i(),Log.Debug("HttpNetworkManager: sucess ons http msg, msg id:"+t)}else Log.Warn("HttpNetworkManager: return data is not bytes buffer on http msg, msg id:"+t),n&&n("HttpNetworkManager: return data is not bytes buffer")},function(e){Log.Warn("HttpNetworkManager: fail on http msg:"+e+" msgID:"+t),n&&n(e)})},t.prototype.onMessage=function(t,e){this.msgHandler.Handle(t,e)},t}(),HttpManager=function(){function t(){this.Content_Type="Content-Type"}return t.getIntance=function(){return null==t._instanc&&(t._instanc=new t),t._instanc},t.prototype.Get=function(t,e,i,n){var o=new Laya.HttpRequest;o.http.timeout=1e4,i&&o.once(Laya.Event.COMPLETE,null,i),n&&o.once(Laya.Event.ERROR,null,n),o.send(t,"","get",e)},t.prototype.GetJson=function(t,e,i){this.Get(t,"json",e,i)},t.prototype.Post=function(t,e,i,n,o,r){var a=new Laya.HttpRequest;a.http.timeout=1e4,o&&a.once(Laya.Event.COMPLETE,null,o),r&&a.once(Laya.Event.ERROR,null,r),a.send(t,e,"post",n,[this.Content_Type,i])},t.prototype.PostJson=function(t,e,i,n){this.Post(t,JSON.stringify(e),"application/json;charset=UTF-8","json",i,n)},t.prototype.PostByte=function(t,e,i,n){this.Post(t,e,"application/octet-stream;charset=UTF-8","arraybuffer",i,n)},t.prototype.PathJson=function(t,e,i,n){this.Patch(t,JSON.stringify(e),"application/json;charset=UTF-8","json",i,n)},t.prototype.Patch=function(t,e,i,n,o,r){var a=new Laya.HttpRequest;a.http.timeout=1e4,o&&a.once(Laya.Event.COMPLETE,null,o),r&&a.once(Laya.Event.ERROR,null,r),a.send(t,e,"patch",n,[this.Content_Type,i])},t}(),EnumNetMessage;!function(t){t[t.C_UserLogin_1000=1e3]="C_UserLogin_1000",t[t.S_UserLogin_1001=1001]="S_UserLogin_1001",t[t.C_GetOpenId_1100=1100]="C_GetOpenId_1100",t[t.S_GetOpenId_1101=1101]="S_GetOpenId_1101",t[t.C_ExchangeWithDiamond_2000=2e3]="C_ExchangeWithDiamond_2000",t[t.S_ExchangeWithDiamond_2001=2001]="S_ExchangeWithDiamond_2001",t[t.C_UpgradeWeaponLvl_2010=2010]="C_UpgradeWeaponLvl_2010",t[t.S_UpgradeWeaponLvl_2011=2011]="S_UpgradeWeaponLvl_2011",t[t.S_UpgradeSpawnLvl_2013=2013]="S_UpgradeSpawnLvl_2013",t[t.C_UpgradeSpawnLvl_2012=2012]="C_UpgradeSpawnLvl_2012",t[t.C_WeaponEvolution_2014=2014]="C_WeaponEvolution_2014",t[t.S_WeaponEvolution_2015=2015]="S_WeaponEvolution_2015",t[t.C_EquipSideWeapon_2020=2020]="C_EquipSideWeapon_2020",t[t.S_EquipSideWeapon_2021=2021]="S_EquipSideWeapon_2021",t[t.C_UnlockSideWeapon_2022=2022]="C_UnlockSideWeapon_2022",t[t.S_UnlockSideWeapon_2023=2023]="S_UnlockSideWeapon_2023",t[t.C_CreateMoneySpawn_2030=2030]="C_CreateMoneySpawn_2030",t[t.S_CreateMoneySpawn_2031=2031]="S_CreateMoneySpawn_2031",t[t.C_UpdateMoneySpawn_2032=2032]="C_UpdateMoneySpawn_2032",t[t.S_UpdateMoneySpawn_2033=2033]="S_UpdateMoneySpawn_2033",t[t.C_GainMoneySpawn_2034=2034]="C_GainMoneySpawn_2034",t[t.S_GainMoneySpawn_2035=2035]="S_GainMoneySpawn_2035",t[t.C_RemoveMoneySpawn_2036=2036]="C_RemoveMoneySpawn_2036",t[t.S_RemoveMoneySpawn_2037=2037]="S_RemoveMoneySpawn_2037",t[t.C_InvitedByFriend_2040=2040]="C_InvitedByFriend_2040",t[t.S_InvitedByFriend_2041=2041]="S_InvitedByFriend_2041",t[t.C_CheckInviteList_2042=2042]="C_CheckInviteList_2042",t[t.S_CheckInviteList_2043=2043]="S_CheckInviteList_2043",t[t.C_GetInviteReward_2044=2044]="C_GetInviteReward_2044",t[t.S_GetInviteReward_2045=2045]="S_GetInviteReward_2045",t[t.C_GetInviteVerifyReward_2046=2046]="C_GetInviteVerifyReward_2046",t[t.S_GetInviteVerifyReward_2047=2047]="S_GetInviteVerifyReward_2047",t[t.C_GainPointByTime_2050=2050]="C_GainPointByTime_2050",t[t.S_GainPointByTime_2051=2051]="S_GainPointByTime_2051",t[t.C_GainPointByMatch_2052=2052]="C_GainPointByMatch_2052",t[t.S_GainPointByMatch_2053=2053]="S_GainPointByMatch_2053",t[t.C_MatchComplete_2100=2100]="C_MatchComplete_2100",t[t.S_MatchComplete_2100=2100]="S_MatchComplete_2100",t[t.C_MatchStart_2101=2101]="C_MatchStart_2101",t[t.S_MatchStart_2101=2101]="S_MatchStart_2101",t[t.C_GetMessageVerifyCode_2200=2200]="C_GetMessageVerifyCode_2200",t[t.S_GetMessageVerifyCode_2201=2201]="S_GetMessageVerifyCode_2201",t[t.C_CheckPhoneVerify_2202=2202]="C_CheckPhoneVerify_2202",t[t.S_CheckPhoneVerify_2203=2203]="S_CheckPhoneVerify_2203",t[t.C_Lottery_2300=2300]="C_Lottery_2300",t[t.S_Lottery_2301=2301]="S_Lottery_2301",t[t.C_CheckLotteryRewardHistroy_2302=2302]="C_CheckLotteryRewardHistroy_2302",t[t.S_CheckLotteryRewardHistroy_2303=2303]="S_CheckLotteryRewardHistroy_2303"}(EnumNetMessage||(EnumNetMessage={}));var WechatFuncManager=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==t._Instance&&(t._Instance=new t),t._Instance},enumerable:!0,configurable:!0}),t.prototype.GetWechatOpenID=function(e){if(CommonUtil.OnMiniGame()){var i=GameDataManager.getInstance().LoginPlayerInfo.OpenID;if(i)e&&e(i);else{var n=StorageManager.GetOpenID();n?(Log.Debug("use local storage openid:"+n),e&&e(n)):t.Instance.GetOpenID(function(t,i){Log.Debug("get openID:"+t),GameDataManager.getInstance().LoginPlayerInfo.OpenID=t,StorageManager.SetOpenID(t),e&&e(t)},function(t){Log.Debug("fail openID:"+t),GameDataManager.getInstance().LoginPlayerInfo.OpenID=null,e&&e(null)})}}else e&&e(null)},t.prototype.CheckLoginQuery=function(){Log.Debug("第一次到登录界面,登录检测是否点击分享进入游戏:"),GameDataManager.ShareQueryData.LoginQuery&&Log.Debug("query at login:"+GameDataManager.ShareQueryData.LoginQuery);var t=GameDataManager.ShareQueryData.ShareRoomID;return!!t&&(Log.Debug("query at login enterRoomID:"+t),!0)},t.prototype.GetWechatShareInfo=function(t){return this.InitShareInfoOnError(),void(t&&t())},t.prototype.InitShareInfoOnError=function(){var t=new HttpShareConfig;t.InitDefault();var e=WechatConstDefine.LOGIN_QUERY_KEY+"="+GameDataManager.getInstance().PlatformData.OpenID;Log.Debug("WechatFuncManager 右上角分享附带query：",e),ConfigManager.GetInstance().SetShareConfig(t),this.InitTopRightCornerShare(t.ShareList[0].ShareImg,t.ShareList[0].ShareTitle,e)},t.prototype.InitWeChatShare=function(t){WechatUtil.getIntance().InitShare(t)},t.prototype.InitTopRightCornerShare=function(t,e,i){WechatUtil.getIntance().InitTopRightCornerShare(t,e,function(){Log.Debug("r分享成功")},function(){Log.Debug("r分享失败")},i)},t.prototype.RegOnShow=function(t){WechatUtil.getIntance().RegOnShow(t)},t.prototype.RegOnHide=function(t){WechatUtil.getIntance().RegOnHide(t)},t.prototype.CheckUserInfoAuth=function(t){WechatUtil.getIntance().CheckUserAuth(function(){t(!0)},function(){t(!1)})},t.prototype.UserInfoAuth=function(t,e,i){WechatUtil.getIntance().CreateAuthButton(t,e,i)},t.prototype.GetUserInfo=function(t,e){WechatUtil.getIntance().GetUserInfo(function(e){t&&t(e)},function(t){e&&e(t)})},t.prototype.GetOpenID=function(t,e){CommonUtil.OnMiniGame()||!t?WechatUtil.getIntance().GetLoginSessionCode(function(i){Log.Debug("从第三方获取OpenID");var n=new com.msg.c_getOpenId_1100;n.appid=WechatConstDefine.WECHAT_APP_ID,n.sessionCode=i;var o=com.msg.c_getOpenId_1100.encode(n).finish();HttpNetworkManager.GetInstance().SendHttpMsg(EnumNetMessage.C_GetOpenId_1100,o,t,e),Log.Debug("http 从第三方获取OpenID 发送 C_GetOpenId_1100")}):t("nominigameID")},t.prototype.Share=function(t,e,i,n,o){CommonUtil.OnMiniGame()||!i?(WechatUtil.getIntance().ShareWithPicAndTitle(t,e,function(t){if(t);else Log.Debug("share to person , or failed geting info of group")},function(){},o),i&&TimeManager.getInst().once(1,cbhandler.gen_handler(function(){i()}))):i()},t.prototype.ShowModal=function(t,e,i,n,o,r){WechatUtil.getIntance().showModel(t,e,!0,i,n,o,r)},t.prototype.RecordWechatImage=function(t){var e=StorageManager.GetHeaderImage();return e&&e==t?(Log.Debug("已经保存, 不重复本地保存image url:"+e),!1):(StorageManager.SetWechatImage(t),!0)},t.prototype.RecordNickName=function(t){var e=StorageManager.GetNickName();return e&&e==t?(Log.Debug("已经保存, 不重复本地保存nickname:"+e),!1):(StorageManager.SetNickName(t),!0)},t.prototype.GetHeaderUrl=function(){return StorageManager.GetHeaderImage()},t.prototype.GetNickName=function(){return StorageManager.GetNickName()},t.prototype.InviteFriend=function(t){},t.prototype.RecordOpenGID=function(t,e){if(!t)return!1;var i=e.toString(),n=t.toString(),o="GID"+i,r=localStorage.getItem(o),a=(new Date).toDateString();if(!r)return localStorage.setItem(o,a+"_"+n),!0;if(this.GetDateFromString(r,"_")!=a)return localStorage.setItem(o,a+"_"+n),!0;return!this.HasGroupIDInString(n,r,"_")&&(localStorage.setItem(o,r+"_"+n),!0)},t.prototype.GetDateFromString=function(t,e){var i=t.split(e);return i&&i.length>0?i[0]:null},t.prototype.GetGroupIDsFromString=function(t,e){var i=[],n=t.split(e);if(n&&n.length>1)for(var o=1;o<n.length;o++){var r=n[o];i.push(r)}return i},t.prototype.HasGroupIDInString=function(t,e,i){return e.indexOf(t)>=0},t.prototype.RegOnKeyboardComplete=function(t){WechatUtil.getIntance().OnKeyboardComplete(t)},t.prototype.RegOnKeyboardConfirm=function(t){WechatUtil.getIntance().OnKeyboardConfirm(t)},t.prototype.RegVideoAd=function(t,e,i){WechatUtil.getIntance().CreateVideoAd(t,e,i)},t}();WechatFuncManager._Instance=null;var StorageManager=function(){function t(){}return t.GetInstance=function(){return null==t._Instance&&(t._Instance=new t),t._Instance},t.ClearAllData=function(){localStorage.clear(),Log.Debug("清除本地的存储数据")},t.GetMusicSetting=function(){var t=localStorage.getItem(ConstDefine.STORAGE_SETTINGS_MUSIC);if(null==t||void 0==t||""==t)return this.SetMusicSetting(!0),!0;var e=parseInt(t);return Boolean(e)},t.SetMusicSetting=function(t){var e=t?"1":"0";localStorage.setItem(ConstDefine.STORAGE_SETTINGS_MUSIC,e)},t.GetSoundSetting=function(){var t=localStorage.getItem(ConstDefine.STORAGE_SETTINGS_SOUND);if(null==t||void 0==t||""==t)return this.SetSoundSetting(!0),!0;var e=parseInt(t);return Boolean(e)},t.SetSoundSetting=function(t){var e=t?"1":"0";localStorage.setItem(ConstDefine.STORAGE_SETTINGS_SOUND,e)},t.GetVibrateSetting=function(){var t=localStorage.getItem(ConstDefine.STORAGE_SETTINGS_VIBRATE);if(null==t||void 0==t||""==t)return this.SetVibrateSetting(!0),!0;var e=parseInt(t);return Boolean(e)},t.SetVibrateSetting=function(t){var e=t?"1":"0";localStorage.setItem(ConstDefine.STORAGE_SETTINGS_VIBRATE,e)},t.GetOpenID=function(){var t=CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxGetStorageSync(WechatConstDefine.STORAGE_WECHAT_OPEN_ID):localStorage.getItem(WechatConstDefine.STORAGE_WECHAT_OPEN_ID);return null==t||void 0==t||""==t?null:t},t.SetOpenID=function(t){CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxSetStorageSync(WechatConstDefine.STORAGE_WECHAT_OPEN_ID,t):localStorage.setItem(WechatConstDefine.STORAGE_WECHAT_OPEN_ID,t)},t.GetHeaderImage=function(){return CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxGetStorageSync(WechatConstDefine.STORAGE_WECHAT_IMAGE):localStorage.getItem(WechatConstDefine.STORAGE_WECHAT_IMAGE)},t.SetWechatImage=function(t){CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxSetStorageSync(WechatConstDefine.STORAGE_WECHAT_IMAGE,t):localStorage.setItem(WechatConstDefine.STORAGE_WECHAT_IMAGE,t)},t.GetNickName=function(){return CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxGetStorageSync(WechatConstDefine.STORAGE_WECHAT_NICKNAME):localStorage.getItem(WechatConstDefine.STORAGE_WECHAT_IMAGE)},t.SetNickName=function(t){CommonUtil.OnMiniGame()?WechatUtil.getIntance().wxSetStorageSync(WechatConstDefine.STORAGE_WECHAT_NICKNAME,t):localStorage.setItem(WechatConstDefine.STORAGE_WECHAT_NICKNAME,t)},t.GetResultLuckyChance=function(){var t=localStorage.getItem(ConstDefine.STORAGE_RESULT_LUCKY_CHANCE);if(null==t||void 0==t||""==t)return this.SetResultLuckyChance(.1),.1;return parseFloat(t)},t.SetResultLuckyChance=function(t){localStorage.setItem(ConstDefine.STORAGE_RESULT_LUCKY_CHANCE,t.toString())},t.GetResultLuckyNum=function(){var t=localStorage.getItem(ConstDefine.STORAGE_RESULT_LUCKY_NUM);if(null==t||void 0==t||""==t)return this.SetResultLuckyNum(ConstDefine.MaxValue_ResultLucky),ConstDefine.MaxValue_ResultLucky;return parseInt(t)},t.SetResultLuckyNum=function(t){localStorage.setItem(ConstDefine.STORAGE_RESULT_LUCKY_NUM,t.toString())},t.GetLastResultLuckyDate=function(){var t=localStorage.getItem(ConstDefine.STORAGE_RESULT_LUCKY_TIME);if(null==t||void 0==t||""==t){var e=new Date(Date.now()-864e5);return this.SetLastResultLuckyDate(e),e}return new Date(t)},t.SetLastResultLuckyDate=function(t){localStorage.setItem(ConstDefine.STORAGE_RESULT_LUCKY_TIME,t.toTimeString())},t.GetMoreSpawnChance=function(){var t=localStorage.getItem(ConstDefine.STORAGE_MORE_SPAWN_CHANCE);if(null==t||void 0==t||""==t)return this.SetResultLuckyChance(.1),.1;return parseFloat(t)},t.SetMoreSpawnChance=function(t){localStorage.setItem(ConstDefine.STORAGE_MORE_SPAWN_CHANCE,t.toString())},t.GetRebornNum=function(){var t=localStorage.getItem(ConstDefine.STORAGE_REBORN_NUM);if(t){return parseInt(t)}return this.SetRebornNum(ConstDefine.MaxValue_Reborn),ConstDefine.MaxValue_Reborn},t.SetRebornNum=function(t){localStorage.setItem(ConstDefine.STORAGE_REBORN_NUM,t.toString())},t.GetLastRebornDate=function(){var t=localStorage.getItem(ConstDefine.STORAGE_REBORN_DATE);if(null==t||void 0==t||""==t){var e=new Date(Date.now()-864e5);return this.SetLastRebornDate(e),e}return new Date(t)},t.SetLastRebornDate=function(t){localStorage.setItem(ConstDefine.STORAGE_REBORN_DATE,t.toTimeString())},t.GetLastestLevelTemplate=function(t){var e=localStorage.getItem(ConstDefine.STORAGE_LEVEL_TEMPLATE_ID+t.toString());return null==e||void 0==e||""==e?-1:parseInt(e)},t.SetLastestLevelTemplate=function(t,e){Log.Debug("保存关卡模版id: level %i, templateID: %i",t,e),e<0?localStorage.removeItem(ConstDefine.STORAGE_LEVEL_TEMPLATE_ID+t.toString()):localStorage.setItem(ConstDefine.STORAGE_LEVEL_TEMPLATE_ID+t.toString(),e.toString())},t.GetSpawnMoneyNum=function(){var t=localStorage.getItem(ConstDefine.STORAGE_SPAWN_MONEYNUM);return t?parseInt(t):(this.SetSpawnMoneyNum(0),0)},t.SetSpawnMoneyNum=function(t){localStorage.setItem(ConstDefine.STORAGE_SPAWN_MONEYNUM,t.toString())},t.GetSpawnUpdateTime=function(){var t=localStorage.getItem(ConstDefine.STORAGE_SPAWN_UPDATETIME);if(t)return parseInt(t);var e=Math.floor(Date.now()/1e3);return this.SetSpawnUpdateTime(e),e},t.SetSpawnUpdateTime=function(t){localStorage.setItem(ConstDefine.STORAGE_SPAWN_UPDATETIME,t.toString())},t.GetUnlockNewSideweapon=function(){var t=localStorage.getItem(ConstDefine.STORAGE_UNLOCK_NEW_SIDEWEAPON);return t?"1"==t:(this.SetUnlockNewSideweapon(!1),!1)},t.SetUnlockNewSideweapon=function(t){var e=t?"1":"0";localStorage.setItem(ConstDefine.STORAGE_UNLOCK_NEW_SIDEWEAPON,e)},t.GetLastVerifyMessageTime=function(){var t=localStorage.getItem(ConstDefine.STORAGE_LAST_MESSAGEVERIFYTIME);if(t)return parseInt(t);var e=Math.floor(Date.now()/1e3)-1e3;return this.SetLastVerifyMessageTime(e),e},t.SetLastVerifyMessageTime=function(t){localStorage.setItem(ConstDefine.STORAGE_LAST_MESSAGEVERIFYTIME,t.toString())},t.GetLastRebornLevel=function(){var t=localStorage.getItem(ConstDefine.STORAGE_LAST_REBORN_LEVLE);return t?parseInt(t):(this.SetLastRebornLevel(-1),-1)},t.SetLastRebornLevel=function(t){localStorage.setItem(ConstDefine.STORAGE_LAST_REBORN_LEVLE,t.toString())},t}();StorageManager._Instance=null;var StageManager=function(){function t(){}return t.GetInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){this.uiParent=new Laya.Sprite,this.playerParent=new Laya.Sprite,this.playerParent.name="PlayerNode",Laya.stage.addChild(this.uiParent),this.uiParent.zOrder=ZOrderDefine.UI,Laya.stage.addChild(this.playerParent),this.playerParent.pos(0,0),this.playerParent.zOrder=ZOrderDefine.PLAYER},t}(),ShakeManager=function(){function t(){this.shakeDataDic=new Laya.Dictionary}return t.GetInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.ShakeSprite=function(t,e,i,n,o){void 0===n&&(n=.3),void 0===o&&(o=!1);var r=new Vec2(t.x,t.y),a=this.GenRandomPos(r,e,o);return Tween2DUtil.path({node:t,duration:n,x:r.x,y:r.y,path:a,onComplete:cbhandler.gen_handler(function(){t.pos(r.x,r.y),i&&i.exec()},this)})},t.prototype.StopShake=function(t){Tween2DUtil.kill(t)},t.prototype.GenRandomPos=function(t,e,i){void 0===i&&(i=!1);var n=[];n.push(t);for(var o=0;o<6;o++){var r=t.x,a=t.y;r+=o%2==0?(Math.random()*e?e:10)-e?e:10:(Math.random()*e?e:10)+e?e:10,a+=20*Math.random()-10;var s=new Vec2(r,a);if(n.push(s),i){var l=new Vec2(t.x-.5*(r-t.x),t.y-.5*(a-t.y));n.push(l)}}return n.push(t),n},t.prototype.ShakeMonster=function(t,e,i,n,o){void 0===i&&(i=10),void 0===n&&(n=.3),void 0===o&&(o=.1);var r=new ShakeData(t,n,i,o,e);return r.Start(),this.shakeDataDic.set(r.ID,r),r.ID},t.prototype.StopShakeMonster=function(t){this.shakeDataDic.get(t)&&(this.shakeDataDic.remove(t),TimeManager.getInst().remove(t))},t}(),ShakeData=function(){function t(t,e,i,n,o){this.timePassed=0,this.sinceLastShake=0,this.sprite=t,this.originalPos=new Vec2(this.sprite.x,this.sprite.y),this.duration=e,this.range=i,this.frequence=n,this.onCompleteCallback=o}return Object.defineProperty(t.prototype,"ID",{get:function(){return this.id},enumerable:!0,configurable:!0}),t.prototype.Start=function(){this.timePassed=0,this.sinceLastShake=0,this.id=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.updateShake,this,this.sprite,this.originalPos,this.range,this.frequence))},t.prototype.updateShake=function(t,e,i,n,o){if(this.timePassed+=o,this.timePassed>this.duration)return this.onCompleteCallback&&this.onCompleteCallback(),void this.Stop();if(this.sinceLastShake+=o,this.sinceLastShake>=this.frequence){var r=e.x+(2*Math.random()-1)*i,a=e.y+(2*Math.random()-1)*i;t.pos(r,a),this.sinceLastShake=0}},t.prototype.Stop=function(){this.id>0&&TimeManager.getInst().remove(this.id)},t}(),ResourceManager=function(){function t(){this.loaded3DRes=new Laya.Dictionary,this.loaded3DDeps=new Laya.Dictionary,this.taskMap=new Laya.Dictionary,this.loadingUrlMap=new Laya.Dictionary,this.unloadingMap=new Laya.Dictionary,Laya.loader.on(laya.events.Event.ERROR,this,this.onError)}return t.GetInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.onError=function(t){Log.Error("load error:"+t)},t.prototype.loadRes=function(t,e,i){var n=CommonUtil.ConverUrlObject(CommonUtil.FormatURL(t));this.unloadingMap.get(n)&&(Log.Debug("加载资源, 取消卸载"+n),this.recordUnloaded(n));if(this.checkResLoaded(n))Log.Debug("资源已经2d加载, 立刻返回 "+n),e&&e(new LoadTaskCallbackParam(!0,this.getRes(n)));else{var o=this.createLoadingTask(n,n,e,null);if(!this.recordTask(o))return;Laya.loader.load(n,Handler.create(this,this.onloaded,[n,e,null,o]),null,i)}},t.prototype.loadBytesFile=function(t,e){this.loadRes(t,e,Laya.Loader.BUFFER)},t.prototype.onloaded=function(t,e,i,n,o){this.checkAllTaskComplete(n.TaskID)&&this.executeCallbackAndClearTask(n.TaskID,o)},t.prototype.loadResArray=function(t,e,i,n){for(var o=CommonUtil.FormatURLArray(t),r=[],a=0;a<o.length;a++){var s=CommonUtil.ConverUrlObject(o[a]);this.unloadingMap.get(s)&&(Log.Debug("加载资源, 取消卸载"+s),this.recordUnloaded(s));this.checkResLoaded(s)?Log.Warn("资源已经2d加载, 不需要重复加载 "+s):r.indexOf(s)<0&&r.push(s)}if(0==r.length)return Log.Debug("没有需要加载的2d资源"),void(e&&e(new LoadTaskCallbackParam(!0,t)));var l=this.getNotLoadingUrl(r),h=this.createLoadingTask(r,o,e,null);this.recordTask(h)&&(0==l.length&&Log.Error("没有需要加载的2d资源, 但是通过了this.recordTask的检测."),Laya.loader.load(l,Handler.create(this,this.onArrayloaded,[r,e,null,h,n]),n?Handler.create(this,n):null,i))},t.prototype.onArrayloaded=function(t,e,i,n,o){o&&o(1);this.checkAllTaskComplete(n.TaskID)&&this.executeCallbackAndClearTask(n.TaskID)},t.prototype.createTextureArray=function(t,e){this.createResArray(t,e,Laya.Texture2D)},t.prototype.createResArray=function(t,e,i,n){Log.Debug("开始加载资源 "+t[0]);var o=CommonUtil.FormatURLArray(t),r=[];try{for(h=0;h<o.length;h++){var a=o[h];this.unloadingMap.get(a)&&(Log.Debug("加载资源, 取消卸载"+a),this.recordUnloaded(a));this.checkResLoaded(a)?Log.Warn("资源已经加载, 不需要重复加载 "+a):r.push(a)}if(0==r.length)return Log.Debug("没有需要加载的资源"),void(e&&e(new LoadTaskCallbackParam(!0,t)));var s=this.getNotLoadingUrl(r),l=this.createLoadingTask(r,o,e,null);if(!this.recordTask(l))return;0==s.length&&Log.Error("没有需要加载的资源, 但是通过了this.recordTask的检测."),Laya.loader.create(s,Handler.create(this,this.onArrayCreated,[r,e,null,l.TaskID]),n?Handler.create(null,n):null,i,null)}catch(t){for(var h=0;h<r.length;h++){var u=r[h];Log.Debug("加载报错 "+(u.url?u.url:u))}Log.Error("createResArray catch error:"+t+" ")}},t.prototype.onArrayCreated=function(t,e,i,n){var o=this;Log.Debug("3d资源加载成功 taskid:"+n+" url[0]:"+t[0].url);if(this.checkAllTaskComplete(n)){var r=this.taskMap.get(n),a=this.getLoadedArray(r.LoadingUrlArray);this.recordLoadedDependencies(a,function(){o.executeCallbackAndClearTask(n)})}},t.prototype.checkLoadedSuccess=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];this.checkResLoaded(n)||e.push(n)}if(e.length>0){Log.Warn("资源加载失败, 数量:"+e.length);for(i=0;i<e.length;i++){var o=e[i];Log.Warn("加载失败资源:"+(o.url?o.url:o))}return!1}return!0},t.prototype.getLoadedArray=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];this.checkResLoaded(n)&&e.push(n)}return e},t.prototype.getRes=function(t){var e=CommonUtil.FormatURL(t),i=Laya.loader.getRes(e);return null==i&&Log.Error("获取资源为空, 没有加载:"+e),i},t.prototype.checkResExist=function(t){var e=t.url?t.url:t,i=CommonUtil.FormatURL(e);return!!Laya.loader.getRes(i)},t.prototype.checkResLoaded=function(t){var e=CommonUtil.ConverUrlObject(t),i=CommonUtil.FormatURL(e),n=Laya.loader.getRes(i);return!!n&&(!(CommonUtil.isObject(n)&&"loaded"in n)||n.loaded)},t.prototype.release=function(t,e){var i=this;if(!t)return Log.Debug("卸载的资源为空, 不需要卸载"),void(e&&e());var n=null;if(t instanceof Laya.Image||t instanceof Laya.Sprite){if(t&&t.texture&&t.texture.url)n=t.texture.url;else if(!t.texture)return Log.Error("Image的texture为空, 只能卸载通过 Image.texture = ResourceManger.getRes() 方式加载的Image! 其他的只能手动destory Image后, release(url)"),void(e&&e())}else!ConstDefine.USING_2D_ENGINE&&t instanceof Laya.Sprite3D?t&&t.url&&(n=t.url):n=t;var o=CommonUtil.FormatURL(n);if(this.checkIsLoading(o))return Log.Warn("正在加载资源, 不进行卸载"+o),void(e&&e());if(!this.checkResLoaded(o))return!ConstDefine.USING_2D_ENGINE&&t instanceof Laya.Sprite3D||t instanceof Laya.Image||t instanceof Laya.Sprite?Log.Warn("资源已经卸载, 但是sprite3d模型/Image变量没有设空, 导致重复卸载!!"+o):Log.Warn("资源没有加载, 不需要卸载"+o),void(e&&e());if(t instanceof Laya.Image)this.releaseImage(t,e);else if(t instanceof Laya.Sprite)this.releaseSprite(t,e);else if(!ConstDefine.USING_2D_ENGINE&&t instanceof Laya.Sprite3D)this.releaseSprite3d(t,e);else{var r=CommonUtil.FormatURL(t);this.recordUnloading(t),this.releaseDependency(r,function(t){t?(Laya.loader.clearRes(r,!0),i.loaded3DRes.remove(r),i.recordUnloaded(r)):Log.Debug("卸载中断"),e&&e()})}},t.prototype.releaseImage=function(t,e){t&&t.texture?this.releaseSprite(t,e):""!=t.skin?(t.destroy(!0),t=null):Log.Error("传入的image为空,或者image的texture为空, 同时不包含图集中小图, 无法卸载")},t.prototype.releaseSprite=function(t,e){if(t&&t.texture){var i=t.texture.url;i?this.release(i,function(){e&&e(),t.destroy(!0),t=null}):Log.Error("传入的Sprite.Texture的url为空, 无法卸载")}else Log.Error("传入的Sprite为空,或者image的texture为空, 同时不包含图集中小图, 无法卸载")},t.prototype.releaseSprite3d=function(t,e){if(t&&t.url){var i=t.url,n=CommonUtil.FormatURL(i);this.release(n,function(){t.destroy(!0),e()})}else Log.Error("传入的model为空,或者model的url为空 无法卸载")},t.prototype.releaseDependency=function(e,i){var n=this,o=e.lastIndexOf(".lh");if(o<0&&(o=e.lastIndexOf(".ls"))<0)i(!0);else{Log.Debug("开始卸载依赖资源 "+e);var r=e.substring(0,o)+".json";Log.Debug("--卸载依赖资源, 使用依赖资源记录文档-"+r),t.GetInstance().loadRes(r,function(o){if(o.Ok){var a=o.Param;if(Log.Debug("加载卸载依赖资源json完成 "+e),!n.unloadingMap.get(e))return Log.Debug("资源卸载被取消, 不继续卸载 "+e),void i(!1);for(var s=0;s<a.denpendenciesList.length;s++){var l=a.denpendenciesList[s],h=r.substring(0,r.lastIndexOf("/"))+"/"+l.Path,u=n.loaded3DDeps.get(h);if(u&&u>1)u-=1,n.loaded3DDeps.set(h,u);else{n.loaded3DDeps.remove(h);var c=Laya.loader.getRes(h);c?c.dispose():Log.Warn(r+" 资源不存在, 已经卸载,"+h)}}Log.Debug("卸载完依赖资源"),t.GetInstance().release(r),i(!0)}else Log.Error("加载依赖资源json出错. "+r),i(!1)})}},t.prototype.recordLoadedDependencies=function(t,e){Log.Debug("开始记录 依赖资源");for(var i=t.length,n=0,o=0;o<t.length;o++){var r=t[o],a=r.url?r.url:r;this.recordLoadedDependency(a,function(){(n+=1)==i&&(Log.Debug("完成 依赖资源记录"),e&&e())})}},t.prototype.recordLoadedDependency=function(e,i){var n=this;if(this.loaded3DRes.get(e))return Log.Debug("3d资源已经加载过, 不记录相同依赖资源"+e),void i(!0);var o=e.lastIndexOf(".lh");o<0&&(o=e.lastIndexOf(".ls"))<0?i(!0):(this.loaded3DRes.set(e,1),e=e.substring(0,o)+".json",Log.Debug("--根据依赖配置文件, 记录加载依赖 "+e),t.GetInstance().loadRes(e,function(o){if(o.Ok){var r=o.Param;Log.Debug("依赖资源json 加载成功");for(var a=0;a<r.denpendenciesList.length;a++){var s=r.denpendenciesList[a],l=e.substring(0,e.lastIndexOf("/"))+"/"+s.Path,h=n.loaded3DDeps.get(l);h?n.loaded3DDeps.set(l,h+1):n.loaded3DDeps.set(l,1)}t.GetInstance().release(e),i(!0)}else Log.Error("加载依赖资源json出错. "+e),i(!1)}))},t.prototype.createLoadingTask=function(e,i,n,o){var r=new LoadingTask;return n&&r.CompleteCallbackList.push(n),o&&r.FailCallbackList.push(o),e instanceof Array?(r.LoadingUrlArray=this.converUrlObjectArray(e),r.AllTaskUrlArray=this.converUrlObjectArray(i)):(r.LoadingUrlArray=[this.converUrlObject(e)],r.AllTaskUrlArray=[this.converUrlObject(i)]),r.isArray=r.LoadingUrlArray.length>1,r.TaskID=t.LOADING_TASK_ID++,r},t.prototype.recordTask=function(t){for(var e=!0,i=0;i<t.LoadingUrlArray.length;i++){n=t.LoadingUrlArray[i];if(!this.checkIsLoading(n)){e=!1;break}}if(e){for(i=0;i<t.LoadingUrlArray.length;i++){(o=this.loadingUrlMap.get(t.LoadingUrlArray[i]))?o.push(t.TaskID):this.loadingUrlMap.set(t.LoadingUrlArray[i],[t.TaskID]),t.LoadingComplete=!0,this.taskMap.set(t.TaskID,t)}return!1}if(!t.isArray&&!e)return this.loadingUrlMap.set(t.LoadingUrlArray[0],[t.TaskID]),this.taskMap.set(t.TaskID,t),!0;if(t.isArray&&!e){this.taskMap.set(t.TaskID,t);for(i=0;i<t.LoadingUrlArray.length;i++){var n=t.LoadingUrlArray[i],o=this.loadingUrlMap.get(n);o?o.push(t.TaskID):this.loadingUrlMap.set(n,[t.TaskID])}}return!0},t.prototype.checkAllTaskComplete=function(t){var e=this.taskMap.get(t);if(e){e.LoadingComplete=!0;for(var i=!0,n=0;n<e.LoadingUrlArray.length;n++){var o=e.LoadingUrlArray[n],r=this.loadingUrlMap.get(o);if(r){for(var a=0;a<r.length;a++){var s=r[a],l=this.taskMap.get(s);if(!l.LoadingComplete){i=!1,Log.Debug("任务id:"+t+" 加载完成, 其中url:"+o+" 还有相关task任务没有完成下载"),Log.Debug("完成的任务 id:"+t+"包含url");for(var h=0;h<e.LoadingUrlArray.length;h++){c=e.LoadingUrlArray[h];Log.Debug("url:"+c)}Log.Debug("没完成的任务 id:"+s+"包含url");for(var u=0;u<l.LoadingUrlArray.length;u++){var c=l.LoadingUrlArray[u];Log.Debug("url:"+c)}break}}if(!i)break}else Log.Error("检测加载完成任务的url完成情况, url不存在 "+o)}return i}return Log.Error("加载完成, taskid不存在 "+t),!1},t.prototype.executeCallbackAndClearTask=function(t,e){var i=this.taskMap.get(t);if(i){for(var n=[],o=[],r=0;r<i.LoadingUrlArray.length;r++)for(var a=i.LoadingUrlArray[r],s=this.loadingUrlMap.get(a),l=0;l<s.length;l++){var h=s[l],u=this.taskMap.get(h);if(!u.CallBackExecuted){for(var c=this.checkLoadedSuccess(u.LoadingUrlArray),d=u.CompleteCallbackList,p=0;p<d.length;p++){_=d[p];n.push(_);var f=new LoadTaskCallbackParam(c,e||CommonUtil.ReformatURLArray(u.AllTaskUrlArray));o.push(f)}u.CallBackExecuted=!0}}for(r=0;r<i.LoadingUrlArray.length;r++){for(var a=i.LoadingUrlArray[r],s=this.loadingUrlMap.get(a),g=0;g<s.length;g++){h=s[g];this.taskMap.remove(h)}this.loadingUrlMap.remove(a)}for(r=0;r<n.length;r++){var _;(_=n[r])(o[r])}if(0==n.length){c=this.checkLoadedSuccess(i.LoadingUrlArray);Log.Warn("当前任务执行 "+(c?"成功":"失败")+", 但是没有设置对应回调! task:"+t)}}else Log.Error("任务不存在, 无法执行回调 "+t)},t.prototype.checkIsLoading=function(t){var e=this.converUrlObject(t);return!!this.loadingUrlMap.get(e)},t.prototype.recordUnloading=function(t){var e=t.url?t.url:t;this.unloadingMap.get(e)?Log.Warn("已经在卸载ap中, 重复记录"+e):this.unloadingMap.set(e,!0)},t.prototype.recordUnloaded=function(t){var e=t.url?t.url:t;this.unloadingMap.get(e)?(this.unloadingMap.remove(e),Log.Debug("记录卸载完成/取消卸载:"+e)):Log.Warn("没有在卸载map中, 无法删除记录"+e)},t.prototype.converUrlObjectArray=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(this.converUrlObject(n))}return e},t.prototype.converUrlObject=function(t){return t.url?t.url:t},t.prototype.getNotLoadingUrl=function(t){for(var e=[],i=0;i<t.length;i++){var n=CommonUtil.ConverUrlObject(t[i]);this.checkIsLoading(n)||e.push(n)}return e},t}();ResourceManager._instance=null,ResourceManager.LOADING_TASK_ID=1;var DependenciesResInfos=function(){return function(){}}(),DependenciesResInfo=function(){return function(){}}(),LoadingTask=function(){return function(){this.CompleteCallbackList=[],this.FailCallbackList=[],this.isArray=!1,this.LoadingComplete=!1,this.CallBackExecuted=!1}}(),LoadTaskCallbackParam=function(){return function(t,e){this.Ok=t,this.Param=e}}(),PropManager=function(){function t(){}return t.GetInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.InitPropPool=function(t){this.allSpawnedPropDic=new Laya.Dictionary,this.propIdList=t;for(var e=0;e<this.propIdList.length;e++){var i=this.propIdList[e];GamePoolManager.Instance.InitPool(this.GetPropPoolName(i),2,Prop,i)}},t.prototype.Spawn=function(t){var e=GamePoolManager.Instance.Spawn(this.GetPropPoolName(t));return this.allSpawnedPropDic.set(e.UID,e),e},t.prototype.GetAll=function(){return this.allSpawnedPropDic.values},t.prototype.Recycle=function(t,e){this.allSpawnedPropDic.remove(e.UID),GamePoolManager.Instance.Recycle(e,this.GetPropPoolName(t))},t.prototype.Destory=function(){for(var t=0;t<this.propIdList.length;t++)GamePoolManager.Instance.Destory(this.GetPropPoolName(this.propIdList[t]));this.propIdList=null,this.allSpawnedPropDic=null},t.prototype.RandomSpawn=function(){for(var t=Math.random(),e=ConfigManager.GetInstance().GetPropSpawnWeight(),i=0;i<e.length;i++){var n=e[i];if(n.ProbabilityRange>=t||i==e.length-1)return this.Spawn(n.Config.GetID())}},t.prototype.PauseAll=function(t){},t.prototype.GetPropPoolName=function(t){return"PropPoolName"+t},t}(),PlayerManager=function(){function t(){}return t.GetInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"MainPlayer",{get:function(){return this.mainPlayer},set:function(t){this.mainPlayer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monsterPoolDic",{get:function(){return Log.Error("使用GamePoolManager.Instance.Spawn<Monster>(configID)"),null},enumerable:!0,configurable:!0}),t.prototype.initManager=function(){this.allSpawnedMonsterDic=new Laya.Dictionary},t.prototype.InitMonsterPool=function(t){this.monsterIDList=t;for(var e=0;e<this.monsterIDList.length;e++)GamePoolManager.Instance.InitPool(this.monsterIDList[e].toString(),10,Monster,this.monsterIDList[e])},t.prototype.Destory=function(){for(var t=0;t<this.monsterIDList.length;t++)GamePoolManager.Instance.Destory(this.monsterIDList[t].toString());this.monsterIDList=null,this.allSpawnedMonsterDic=null},t.prototype.SpawnMonster=function(t,e,i){void 0===e&&(e=!1),GameDataManager.getInstance().LevelInfo.OnMonsterSpawn(e);var n=GamePoolManager.Instance.Spawn(t.toString(),i);return n.AddToStage(),this.allSpawnedMonsterDic.set(n.UID,n),Log.Debug("刷出怪物%i, uiid:%i， 记录刷怪数据",t,n.UID),n},t.prototype.GetMonsterByUid=function(t){return this.allSpawnedMonsterDic.get(t)},t.prototype.GetAllSpawnedMonster=function(){return this.allSpawnedMonsterDic.values},t.prototype.RecycleMonster=function(t,e){Log.Info("怪物%i死亡 uid:%i， 记录死亡数据",t,e.UID),GameDataManager.getInstance().LevelInfo.OnMonsterDie(),this.allSpawnedMonsterDic.remove(e.UID),GamePoolManager.Instance.Recycle(e,t.toString())},t.prototype.PauseAll=function(t){for(var e=this.GetAllSpawnedMonster(),i=0;i<e.length;i++){e[i].Freeze(t)}},t}(),GamePoolManager=function(){function t(){this.scriptPoolDic=new Laya.Dictionary}return Object.defineProperty(t,"Instance",{get:function(){return t._inst||(t._inst=new t),t._inst},enumerable:!0,configurable:!0}),t.prototype.InitPool=function(t,e,i,n,o){if(void 0===o&&(o=!0),this.IsExist(t))Log.Warn("对象池已经存在, 不需要重复Init %s",t);else{var r=new ScriptObjectPool;r.Init(e,i,n,o),this.scriptPoolDic.set(t,r)}},t.prototype.Spawn=function(t,e){var i=this.scriptPoolDic.get(t);return i?i.Spawn(e):(Log.Warn("Spawn的对象池没有初始化%s",t),null)},t.prototype.Recycle=function(t,e){var i=this.scriptPoolDic.get(e);return i?i.Recycle(t):(Log.Warn("Recycle的对象池没有初始化%s",e),null)},t.prototype.Destory=function(t){var e=this.scriptPoolDic.get(t);e?(e.Destory(),this.scriptPoolDic.remove(t)):Log.Warn("Destory的对象池没有初始化%s",t)},t.prototype.GetAllSpawned=function(t){var e=this.scriptPoolDic.get(t);return e?e.GetAllSpawned():(Log.Warn("GetAllSpawned的对象池没有初始化%s",t),null)},t.prototype.IsExist=function(t){return null!=this.scriptPoolDic.get(t)},t}(),BulletManager=function(){function t(){this.maxMonsterBulletCount=60,this.bulletIdList=[],this.recycledID=[]}return Object.defineProperty(t.prototype,"bullPool",{get:function(){return Log.Error("use BulletManager.Spawn instead"),null},enumerable:!0,configurable:!0}),t.GetInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.initManager=function(){this.monsterBulletPool=new ScriptObjectPool,this.monsterBulletDic=new Laya.Dictionary,this.monsterBulletPool.Init(this.maxMonsterBulletCount,MonsterBullet,EnumBulletOutLookType.MonsterBullet)},t.prototype.InitBulletPool=function(t){this.allSpawnedMonsterBulletDic=new Laya.Dictionary,this.allSpawnedPlayerBulletDic=new Laya.Dictionary,this.bulletIdList=CommonUtil.RemoveRepeated(t);for(var e=0;e<this.bulletIdList.length;e++){var i=this.bulletIdList[e],n=ConfigManager.GetInstance().GetBulletConfig(i);i==EnumBulletOutLookType.MonsterBullet?GamePoolManager.Instance.InitPool(this.GetBulletPoolName(i),n.MaxBulletNum,MonsterBullet,i,!1):GamePoolManager.Instance.InitPool(this.GetBulletPoolName(i),n.MaxBulletNum,Bullet,i,!1)}},t.prototype.Destory=function(){this.RecycleAllMonsterBullet(),this.RecycelAllPlayerBullet();for(var t=0;t<this.bulletIdList.length;t++){var e=this.bulletIdList[t];EnumBulletOutLookType.MonsterBullet,GamePoolManager.Instance.Destory(this.GetBulletPoolName(e))}this.bulletIdList=null,this.allSpawnedMonsterBulletDic=null,this.allSpawnedPlayerBulletDic=null,Log.Debug("BulletManager Destory")},t.prototype.GetBulletPoolName=function(t){return"BulletPool"+t},t.prototype.Spawn=function(t){var e=null;return t==EnumBulletOutLookType.MonsterBullet?(e=GamePoolManager.Instance.Spawn(this.GetBulletPoolName(t)),this.allSpawnedMonsterBulletDic.set(e.UID,e),Log.Debug("spawn monster bullet %i",e.UID)):(e=GamePoolManager.Instance.Spawn(this.GetBulletPoolName(t)),this.allSpawnedPlayerBulletDic.set(e.UID,e)),e},t.prototype.GetAllSpawnedBullet=function(t){if(t==EnumBulletOutLookType.MonsterBullet)return this.GetAllSpawnedMonseterBullet();for(var e=[],i=this.allSpawnedPlayerBulletDic.values,n=0;n<i.length;n++){var o=i[n];o.Type==t&&e.push(o)}return e},t.prototype.GetAllSpawnedMonseterBullet=function(){if(null==this.allSpawnedMonsterBulletDic)return[];return this.allSpawnedMonsterBulletDic.values},t.prototype.GetAllSpawnedNonMonseterBullet=function(){if(null==this.allSpawnedPlayerBulletDic)return[];return this.allSpawnedPlayerBulletDic.values},t.prototype.Recycle=function(t){this.RecycleBullet(t.Type,t)},t.prototype.RecycleBullet=function(t,e){t==EnumBulletOutLookType.MonsterBullet?(null==this.allSpawnedMonsterBulletDic&&Log.Error(""),this.allSpawnedMonsterBulletDic.remove(e.UID),GamePoolManager.Instance.Recycle(e,this.GetBulletPoolName(t)),Log.Debug("recycle monster bullet %i",e.UID)):(this.allSpawnedPlayerBulletDic.remove(e.UID),GamePoolManager.Instance.Recycle(e,this.GetBulletPoolName(t))),this.recycledID.indexOf(e.UID)>=0&&Log.Debug("error"),this.recycledID.push(e.UID)},t.prototype.RecycleAllMonsterBullet=function(){for(var t=this.GetAllSpawnedMonseterBullet(),e=[],i=0;i<t.length;i++){var n=t[i];e.push(n)}for(i=0;i<e.length;i++){var o=e[i];this.Recycle(o)}this.allSpawnedMonsterBulletDic=null,Log.Debug("RecycleAllMonsterBullet")},t.prototype.RecycelAllPlayerBullet=function(){for(var t=this.GetAllSpawnedNonMonseterBullet(),e=[],i=0;i<t.length;i++){var n=t[i];e.push(n)}for(i=0;i<e.length;i++){var o=e[i];this.Recycle(o)}this.allSpawnedPlayerBulletDic=null},t}(),EnumMoneyAnimType;!function(t){t[t.Coin=0]="Coin",t[t.Diamond=1]="Diamond",t[t.Power=2]="Power",t[t.Lottery=3]="Lottery",t[t.CoinAnim=4]="CoinAnim"}(EnumMoneyAnimType||(EnumMoneyAnimType={}));var MoneyAnimManager=function(){function t(){this.Time_PosAnim_Straight=.8,this.Time_PosAnim_Curve=.8,this.Time_PosAnim_Step1=.1,this.Time_PosAnim_Step2=.3,this.Time_AlphaAnim=1,this.coinShowList=new Array,this.diamondShowList=new Array,this.powerShowList=new Array,this.turntableShowList=new Array,this.coinAnimShowList=new Array,this.itemPool=new Array,this.taskList_Anim=new Array,this.taskList_Time=new Array}return Object.defineProperty(t,"Instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.PlayMoneyAnim_Pos_2Step=function(t,e,i,n,o,r){var a=this;if(e<=0)r&&r.exec();else{for(var s=2*Math.PI/e,l=function(){var e=h.CreateMoney(t);e.pos(i.x,i.y);var r=new Vec2(i.x+Math.cos(s*u)*o,i.y+Math.sin(s*u)*o),l=h.Anim_To(e,h.Time_PosAnim_Step1,r,cbhandler.gen_handler(function(){a.taskList_Anim.splice(a.taskList_Anim.indexOf(l),1),l=a.Anim_To(e,a.Time_PosAnim_Step2,n,cbhandler.gen_handler(function(){a.taskList_Anim.splice(a.taskList_Anim.indexOf(l),1),a.DeleteMoney(t,e)})),a.taskList_Anim.push(l)}));h.taskList_Anim.push(l)},h=this,u=0;u<e;u++)l();if(r){var c=TimeManager.getInst().once(this.Time_PosAnim_Step1+this.Time_PosAnim_Step2+.05,cbhandler.gen_handler(function(){a.taskList_Time.splice(a.taskList_Anim.indexOf(c),1),r.exec()},this));this.taskList_Time.push(c)}}},t.prototype.PlayMoneyAnim_Pos_Curve=function(t,e,i,n,o,r,a,s,l){var h=this;if(e<=0)r&&r.exec();else{for(var u=2*Math.PI/e,c=0,d=function(){var e=p.CreateMoney(t,a,s);e.pos(i.x,i.y);var r=new Vec2(i.x+Math.cos(u*f)*o,i.y+Math.sin(u*f)*o),d=CurveUtil.CreateCurvePath(i,r,n,10),g=(l||p.Time_PosAnim_Curve)*(.45*Math.random()+.8),_=p.Anim_Path(e,g,n,d,cbhandler.gen_handler(function(){h.taskList_Anim.splice(h.taskList_Anim.indexOf(_),1),h.DeleteMoney(t,e),h.MoneySound(t)}));p.taskList_Anim.push(_),g>c&&(c=g)},p=this,f=0;f<e;f++)d();if(r){var g=TimeManager.getInst().once(c+.05,cbhandler.gen_handler(function(){h.taskList_Time.splice(h.taskList_Anim.indexOf(g),1),r.exec()},this));this.taskList_Time.push(g)}}},t.prototype.PlayMoneyAnim_Pos_Straight=function(t,e,i,n,o){var r=this;if(e<=0)o&&o.exec();else{for(var a=function(){var e=TimeManager.getInst().once(.1*l,cbhandler.gen_handler(function(){r.taskList_Time.splice(r.taskList_Anim.indexOf(e),1);var o=r.CreateMoney(t);o.pos(i.x,i.y);var a=r.Anim_To(o,r.Time_PosAnim_Straight,n,cbhandler.gen_handler(function(){r.taskList_Anim.splice(r.taskList_Anim.indexOf(a),1),r.DeleteMoney(t,o)}))}));s.taskList_Time.push(e)},s=this,l=0;l<e;l++)a();if(o){var h=TimeManager.getInst().once(e*(this.Time_PosAnim_Straight+.1)+.05,cbhandler.gen_handler(function(){r.taskList_Time.splice(r.taskList_Anim.indexOf(h),1),o.exec()},this));this.taskList_Time.push(h)}}},t.prototype.PlayMoneyAnim_Explose=function(t,e,i,n,o){var r=this;if(e<=0)o&&o.exec();else{for(var a=2*Math.PI/e,s=function(){var e=l.CreateMoney(t);e.pos(i.x,i.y),e.alpha=1;var o=new Vec2(i.x+Math.cos(a*h)*n,i.y+Math.sin(a*h)*n),s=l.Anim_To(e,l.Time_AlphaAnim,o,cbhandler.gen_handler(function(){r.taskList_Anim.splice(r.taskList_Anim.indexOf(s),1),r.DeleteMoney(t,e)}),0)},l=this,h=0;h<e;h++)s();if(o){var u=TimeManager.getInst().once(this.Time_AlphaAnim+.05,cbhandler.gen_handler(function(){r.taskList_Time.splice(r.taskList_Anim.indexOf(u),1),o.exec()},this));this.taskList_Time.push(u)}}},t.prototype.StopAllMoneyAnim=function(){for(t=0;t<this.taskList_Anim.length;t++){e=this.taskList_Anim[t];Tween2DUtil.kill(e)}this.taskList_Anim=new Array;for(var t=0;t<this.taskList_Time.length;t++){var e=this.taskList_Time[t];TimeManager.getInst().remove(e)}this.taskList_Time=new Array},t.prototype.CreateMoney=function(t,e,i){var n=null;switch((n=this.itemPool.pop())||((n=new MoneyAnimItem).anchorX=.5,n.anchorY=.5),i?n.scale(i,i):n.scale(1,1),t){case EnumMoneyAnimType.Coin:this.coinShowList.push(n);break;case EnumMoneyAnimType.Diamond:this.diamondShowList.push(n);break;case EnumMoneyAnimType.Power:this.powerShowList.push(n);break;case EnumMoneyAnimType.Lottery:this.turntableShowList.push(n);break;case EnumMoneyAnimType.CoinAnim:this.coinAnimShowList.push(n)}return n.InitItem(t),e?e.addChild(n):ui.UIMediator.GetInstance().uiParentMoneyAnim.addChild(n),n},t.prototype.DeleteMoney=function(t,e){switch(e.removeSelf(),e.DeleteItem(),t){case EnumMoneyAnimType.Coin:i=this.coinShowList.indexOf(e);this.coinShowList.splice(i,1);break;case EnumMoneyAnimType.Diamond:i=this.diamondShowList.indexOf(e);this.diamondShowList.splice(i,1);break;case EnumMoneyAnimType.Power:i=this.powerShowList.indexOf(e);this.powerShowList.splice(i,1);break;case EnumMoneyAnimType.Lottery:i=this.turntableShowList.indexOf(e);this.turntableShowList.splice(i,1);break;case EnumMoneyAnimType.CoinAnim:var i=this.coinAnimShowList.indexOf(e);this.coinAnimShowList.splice(i,1)}this.itemPool.push(e)},t.prototype.MoneySound=function(t){var e=null;switch(t){case EnumMoneyAnimType.Coin:e=EnumSoundID.sound_function_gold_01;break;case EnumMoneyAnimType.Diamond:e=EnumSoundID.sound_function_diamonds_01;break;case EnumMoneyAnimType.Power:e=EnumSoundID.sound_function_energy_01;break;case EnumMoneyAnimType.CoinAnim:e=EnumSoundID.sound_function_gold_01}e&&AudioManager.GetInstance().PlaySoundByConfigID(e)},t.prototype.Anim_To=function(t,e,i,n,o,r){var a={node:t,duration:e,x:i.x,y:i.y};return null!=o&&(a.alpha=o),null!=r&&(a.scalex=r.x,a.scaley=r.y),null!=n&&(a.onComplete=n),Tween2DUtil.to(a)},t.prototype.Anim_Path=function(t,e,i,n,o,r,a){var s={node:t,duration:e,x:i.x,y:i.y};return null!=r&&(s.alpha=r),null!=a&&(s.scalex=a.x,s.scaley=a.y),null!=o&&(s.onComplete=o),null!=n&&(s.path=n),Tween2DUtil.path(s)},t}(),MatchSpineManager=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==t.instance&&(t.instance=new t),t.instance},enumerable:!0,configurable:!0}),t.prototype.addToLoadSpineId=function(t){t>0&&this.loadedSpineID.indexOf(t)<0&&this.loadedSpineID.push(t)},t.prototype.PreloadAll=function(t,e){this.loadedSpineID=[];for(var i=CommonUtil.LoopEnum(EnumSideWeaponType),n=0;n<i.length;n++){var o=ConfigManager.GetInstance().GetWeaponConfig(i[n]);this.addToLoadSpineId(o.PreparingFxID),this.addToLoadSpineId(o.FiringFxID),this.addToLoadSpineId(o.EndingFxID)}var r=ConfigManager.GetInstance().GetMainPlayerConfig().SpineConfigID;this.addToLoadSpineId(r);for(var a=ConfigManager.GetInstance().GetAllSkillConfig(),n=0;n<a.length;n++){var s=a[n];s&&(this.addToLoadSpineId(s.FireSpineConfigID1),this.addToLoadSpineId(s.FireSpineConfigID2),this.addToLoadSpineId(s.PrepareSpineConfigID))}for(var l=ConfigManager.GetInstance().GetAllMonsterConfig(),n=0;n<l.length;n++){var h=l[n];this.addToLoadSpineId(h.SpineConfigID)}for(var u=CommonUtil.LoopEnum(EnumBulletOutLookType),n=0;n<u.length;n++)if(u[n]!=EnumBulletOutLookType.None){var c=ConfigManager.GetInstance().GetBulletConfig(u[n]);c.HitFxSpineID>0&&this.addToLoadSpineId(c.HitFxSpineID)}SpinePoolManager.GetInstance().InitPool(this.loadedSpineID,t,null,e)},t.prototype.InitBeforeMatch=function(t,e,i){this.loadedSpineID=[];var n=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID);this.addToLoadSpineId(n.PreparingFxID),this.addToLoadSpineId(n.FiringFxID),this.addToLoadSpineId(n.EndingFxID);var o=ConfigManager.GetInstance().GetMainPlayerConfig().SpineConfigID;this.addToLoadSpineId(o);for(var r=e.MonsterIDList,a=0;a<r.length;a++){var s=r[a],l=ConfigManager.GetInstance().GetMonsterConfig(s);this.addToLoadSpineId(l.SpineConfigID);for(var h=0;h<l.MonsterSkillID.length;h++){var u=l.MonsterSkillID[h],c=ConfigManager.GetInstance().GetSkillConfig(u);c&&(this.addToLoadSpineId(c.FireSpineConfigID1),this.addToLoadSpineId(c.FireSpineConfigID2),this.addToLoadSpineId(c.PrepareSpineConfigID),c.Type==EnumMonsterPowerType.Spawn&&c.Param3>0&&this.addToLoadSpineId(c.Param3))}}for(var d=CommonUtil.LoopEnum(EnumBulletOutLookType),a=0;a<d.length;a++)if(d[a]!=EnumBulletOutLookType.None){var p=ConfigManager.GetInstance().GetBulletConfig(d[a]);p.HitFxSpineID>0&&this.addToLoadSpineId(p.HitFxSpineID)}SpinePoolManager.GetInstance().InitPool(this.loadedSpineID,i)},t.prototype.DestroyOnExitMatch=function(){for(var t=0;t<this.loadedSpineID.length;t++){var e=this.loadedSpineID[t];SpinePoolManager.GetInstance().Destory(e)}this.loadedSpineID=[]},t.prototype.Spawn=function(t){return SpinePoolManager.GetInstance().Spawn(t)},t.prototype.Recycle=function(t,e){SpinePoolManager.GetInstance().Recycle(t,e)},t}(),EnumLotteryGirdLoopState;!function(t){t[t.None=0]="None",t[t.SpeedUp=1]="SpeedUp",t[t.SpeedMax=2]="SpeedMax",t[t.WaittingSpeedDown=3]="WaittingSpeedDown",t[t.SpeedDown=4]="SpeedDown",t[t.StopDown=5]="StopDown",t[t.Stop=6]="Stop"}(EnumLotteryGirdLoopState||(EnumLotteryGirdLoopState={}));var LotteryManager=function(){function t(){this.girdLotteryLoopTask=-1}return Object.defineProperty(t,"Instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopInterval",{get:function(){return.02},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"girdNum_SpeedChange",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LoopNum_MaxSpeed",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SecondPerGird_Max",{get:function(){return.02},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SecondPerGird_Min",{get:function(){return.5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"girdScale_Big",{get:function(){return 1.3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"girdScale_Middle",{get:function(){return 1.2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"girdScale_Small",{get:function(){return 1.1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"girdScale_Normal",{get:function(){return 1},enumerable:!0,configurable:!0}),t.prototype.InitLottery_Gird=function(t,e){void 0===e&&(e=0),this.girdList=t,this.curSelectGirdIndex=e,this.RenderSelectGird_Single(this.curSelectGirdIndex),this.aimGirdIndex=-1,this.speedDownGirdIndex=-1,this.girdNum_Changing=0,this.SetLotteryState(EnumLotteryGirdLoopState.None),-1!=this.girdLotteryLoopTask&&(TimeManager.getInst().remove(this.girdLotteryLoopTask),this.girdLotteryLoopTask=-1),this.girdLotteryLoopTask=TimeManager.getInst().loop(this.loopInterval,cbhandler.gen_handler(this.LotteryLoop_Gird,this))},t.prototype.CloseLottery_Gird=function(){this.girdList?(-1!=this.girdLotteryLoopTask&&(TimeManager.getInst().remove(this.girdLotteryLoopTask),this.girdLotteryLoopTask=-1),this.girdList=null):Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！")},t.prototype.LotterySpeedUp_Gird=function(){this.girdList?(this.aimGirdIndex=-1,this.speedDownGirdIndex=-1,this.lastGirdChangeTime=Date.now(),this.girdState==EnumLotteryGirdLoopState.None?(this.girdNum_Changing=0,this.SetLotteryState(EnumLotteryGirdLoopState.SpeedUp),this.Lottery_SelectNextGird()):(this.girdNum_Changing=this.girdNum_SpeedChange,this.SetLotteryState(EnumLotteryGirdLoopState.SpeedMax)),-1==this.girdLotteryLoopTask&&(this.girdLotteryLoopTask=TimeManager.getInst().loop(this.loopInterval,cbhandler.gen_handler(this.LotteryLoop_Gird,this)))):Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！")},t.prototype.LotterySpeedDown_Gird=function(t,e){this.girdList?(this.girdStopHandler=e,this.aimGirdIndex=t,this.speedDownGirdIndex=this.CalcSpeedDownIndex(),-1!=this.speedDownGirdIndex?this.SetLotteryState(EnumLotteryGirdLoopState.WaittingSpeedDown):(Log.Debug("Lottery 减速点计算错误，强制停止转盘！"),this.SetLotteryState(EnumLotteryGirdLoopState.None))):Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！")},t.prototype.LotteryStop_Gird=function(){this.girdList?this.SetLotteryState(EnumLotteryGirdLoopState.None):Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！")},t.prototype.SetLotteryState=function(t){this.girdState=t},t.prototype.LotteryLoop_Gird=function(){if(this.girdList)switch(this.girdState){case EnumLotteryGirdLoopState.None:break;case EnumLotteryGirdLoopState.SpeedUp:this.LotteryLoop_Gird_SpeedUp();break;case EnumLotteryGirdLoopState.SpeedMax:this.LotteryLoop_Gird_SpeedMax();break;case EnumLotteryGirdLoopState.WaittingSpeedDown:this.LotteryLoop_Gird_WaittingSpeedDown();break;case EnumLotteryGirdLoopState.SpeedDown:this.LotteryLoop_Gird_SpeedDown();break;case EnumLotteryGirdLoopState.StopDown:this.LotteryLoop_Gird_StopDown();break;case EnumLotteryGirdLoopState.Stop:this.LotteryLoop_Gird_Stop();break;default:this.LotteryLoop_Gird_None()}else Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！")},t.prototype.LotteryLoop_Gird_None=function(){},t.prototype.LotteryLoop_Gird_SpeedUp=function(){this.Lottery_CheckGirdChange_SpeedChanging(!0),this.girdNum_Changing>=this.girdNum_SpeedChange&&(Log.Debug("Lottery 加速格子数已走完，进入匀速模式"),this.girdNum_Changing=this.girdNum_SpeedChange,this.SetLotteryState(EnumLotteryGirdLoopState.SpeedMax))},t.prototype.LotteryLoop_Gird_SpeedMax=function(){this.Lottery_CheckGirdChange_Max()},t.prototype.LotteryLoop_Gird_WaittingSpeedDown=function(){this.Lottery_CheckGirdChange_Max(),this.curSelectGirdIndex==this.speedDownGirdIndex&&(this.SetLotteryState(EnumLotteryGirdLoopState.SpeedDown),Log.Debug("进入减速状态！"))},t.prototype.LotteryLoop_Gird_SpeedDown=function(){this.Lottery_CheckGirdChange_SpeedChanging(!1),this.girdNum_Changing<=0&&(Log.Debug("Lottery 减速格子数已走完，进入停止模式"),this.girdNum_Changing=0,this.SetLotteryState(EnumLotteryGirdLoopState.StopDown))},t.prototype.LotteryLoop_Gird_StopDown=function(){this.SetLotteryState(EnumLotteryGirdLoopState.Stop)},t.prototype.LotteryLoop_Gird_Stop=function(){Log.Debug("Lottery 完全停止，执行回调"),this.girdStopHandler&&this.girdStopHandler.exec(),this.aimGirdIndex=-1,this.speedDownGirdIndex=-1,-1!=this.girdLotteryLoopTask&&(TimeManager.getInst().remove(this.girdLotteryLoopTask),this.girdLotteryLoopTask=-1),this.SetLotteryState(EnumLotteryGirdLoopState.None)},t.prototype.Lottery_CheckGirdChange_Max=function(){var t=Date.now(),e=t-this.lastGirdChangeTime;this.SecondPerGird_Max;e>=1e3*this.SecondPerGird_Max&&(this.lastGirdChangeTime=t,this.Lottery_SelectNextGird())},t.prototype.Lottery_CheckGirdChange_SpeedChanging=function(t){var e=Date.now();e-this.lastGirdChangeTime>=1e3*((this.SecondPerGird_Min-this.SecondPerGird_Max)/(this.girdNum_Changing+1))&&(this.lastGirdChangeTime=e,this.Lottery_SelectNextGird(),t?this.girdNum_Changing+=1:this.girdNum_Changing-=1)},t.prototype.Lottery_SelectNextGird=function(){AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_warship),this.curSelectGirdIndex=this.GetNextGirdIndex(this.curSelectGirdIndex,1),this.RenderSelectGird_Single(this.curSelectGirdIndex)},t.prototype.GetNextGirdIndex=function(t,e){return this.girdList?t>this.girdList.length-1||t<0?(Log.Debug("LotteryManager 查找Index 越界"),-1):(t+e)%this.girdList.length:(Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！"),-1)},t.prototype.GetPrevGirdIndex=function(t,e){if(this.girdList){if(t>this.girdList.length-1||t<0)return Log.Debug("LotteryManager 查找Index 越界"),-1;if(t>=e)return t-e;var i=(e-t)%this.girdList.length;return 0==i?i:this.girdList.length-i}return Log.Debug("LotteryManager 当前没有格子，请初始化后再调用！"),-1},t.prototype.CalcSpeedDownIndex=function(){if(-1==this.aimGirdIndex)return Log.Debug("Lottery 需要目标点才能计算减速点！"),-1;var t=this.GetPrevGirdIndex(this.aimGirdIndex,this.girdNum_Changing);return Log.Debug("Lottery 目标点：",this.aimGirdIndex,"减速路程：",this.girdNum_Changing,"减速点索引：",t),t},t.prototype.RenderSelectGird_Triple=function(t){for(var e=0;e<this.girdList.length;e++){var i=this.girdList[e];e==t?i.scale(this.girdScale_Big,this.girdScale_Big):e==this.GetPrevGirdIndex(t,1)?i.scale(this.girdScale_Middle,this.girdScale_Middle):e==this.GetPrevGirdIndex(t,2)?i.scale(this.girdScale_Small,this.girdScale_Small):i.scale(this.girdScale_Normal,this.girdScale_Normal)}},t.prototype.RenderSelectGird_Double=function(t){for(var e=0;e<this.girdList.length;e++){var i=this.girdList[e];e==t?i.scale(this.girdScale_Big,this.girdScale_Big):e==this.GetPrevGirdIndex(t,1)?i.scale(this.girdScale_Middle,this.girdScale_Small):i.scale(this.girdScale_Normal,this.girdScale_Normal)}},t.prototype.RenderSelectGird_Single=function(t){for(var e=0;e<this.girdList.length;e++){var i=this.girdList[e];e==t?i.scale(this.girdScale_Big,this.girdScale_Big):i.scale(this.girdScale_Normal,this.girdScale_Normal)}},t.prototype.RenderSelectGird_None=function(t){for(var e=0;e<this.girdList.length;e++){this.girdList[e].scale(this.girdScale_Normal,this.girdScale_Normal)}},t}(),ui;!function(t){var e;!function(t){t[t.CHN=0]="CHN",t[t.ENG=1]="ENG"}(e=t.LanguageEnum||(t.LanguageEnum={}));var i=function(){function t(){this.curLanageTye=e.CHN}return t.GetInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.ChangeLanguage=function(t){this.curLanageTye=t},t.prototype.GetTxt=function(t){var i=ConfigManager.GetInstance().GetLocalizationConfig(t);if(null==i)return console.error("ID对应语言配置不存在:"+t),"";switch(this.curLanageTye){case e.CHN:return i.CHN;case e.ENG:return i.ENG}},t}();t.LanguageManager=i}(ui||(ui={}));var GameDataManager=function(){function t(){this.serverLocalDeltaTime=0,this.ShareEnable=!1,this.LuckyEnable=!1,this.InviteType=0,this.VerifyReward=100,this.Exchange_Coin=2e4,this.Exchange_Power=5,this.VerifyColddown=300}return t.getInstance=function(){return null==t._instace&&(t._instace=new t),t._instace},Object.defineProperty(t.prototype,"PlatformData",{get:function(){return this.platformData},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ShareQueryData",{get:function(){return null==t.shareQueryData&&(t.shareQueryData=new ShareQueryData),t.shareQueryData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LoginPlayerInfo",{get:function(){return this.loginPlayerInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LevelInfo",{get:function(){return this.levelInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MatchInfo",{get:function(){return this.matchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HallBg",{get:function(){return this.hallBg},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.platformData=new PlatformData,this.loginPlayerInfo=new LoginPlayerInfo,this.levelInfo=new LevelInfo,this.levelInfo.OnInit(),this.matchInfo=new MatchInfo,this.matchInfo.OnInit(),this.protoOpenId=null,this.hallBg=Math.random()>.5?EnumSoundID.bg_hall_bgm:EnumSoundID.sound_bg_bg_01},t.prototype.InitLoginPlayer=function(t,e){this.loginPlayerInfo.OpenID=t,this.loginPlayerInfo.Init(e)},t.prototype.GetLoginPlayerID=function(){return this.loginPlayerInfo.GetPlayerID()},t.prototype.OnMathEnter=function(){this.levelInfo.OnEnter(),this.matchInfo.OnEnter(),AttachDataCenter.Instance.OnEnterMatch()},t.prototype.OnMatchExit=function(){this.levelInfo.OnExit(),this.matchInfo.OnExit()},t.prototype.GetCurSideWeaponLvl=function(){return this.loginPlayerInfo.CurSideWeaponInfo.level},t.prototype.InitServerLoginTime=function(t){this.serverLoginTime=t},Object.defineProperty(t.prototype,"ServerLoginTime",{get:function(){return this.serverLoginTime},enumerable:!0,configurable:!0}),t.prototype.InitServerLocalDeltaTime=function(t){this.serverLocalDeltaTime=t-Math.floor(Date.now()/1e3)},Object.defineProperty(t.prototype,"ServerNowTime",{get:function(){return Math.floor(Date.now()/1e3)+this.serverLocalDeltaTime},enumerable:!0,configurable:!0}),t.prototype.InitServerConfig=function(t){this.ShareEnable=1==t.shareEnable,this.LuckyEnable=1==t.luckyEnable,this.InviteType=t.inviteType,this.VerifyReward=t.verifyReward,this.Exchange_Coin=t.exchange_Coin,this.Exchange_Power=t.exchange_Point,this.VerifyColddown=t.verifyColddown},t}(),EnumFloatAnimType;!function(t){t[t.UpgradeTip=0]="UpgradeTip",t[t.LotteryTip=1]="LotteryTip"}(EnumFloatAnimType||(EnumFloatAnimType={}));var FloatTipAnimManager=function(){function t(){this.tipGroupDic=new Laya.Dictionary,this.upgradeItemPool=new Array,this.lotteryItemPool=new Array}return Object.defineProperty(t,"Instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.CreateTipGroup=function(t){var e=this.tipGroupDic.keys.length,i=-1;return i=e<=0?0:this.tipGroupDic.keys[e-1]+1,this.tipGroupDic.set(i,new FloatTipGroup(i,t)),i},t.prototype.AddTip=function(t,e,i,n,o){void 0===o&&(o=!0);var r=this.tipGroupDic.get(t);r?r.AddTip(e,i,n,o):Log.Error("FloatTipAnimManager 未找到指定组ID：",t)},t.prototype.DeleteAllItemByGroupID=function(t){var e=this.tipGroupDic.get(t);e&&e.DeleteAll()},t.prototype.CreateUpgradeItem=function(){var t=this.upgradeItemPool.pop();return t||(t=new FloatTipItem_Upgrade),t},t.prototype.CreateLotteryItem=function(){var t=this.lotteryItemPool.pop();return t||(t=new FloatTipItem_Lottery),t},t.prototype.DeleteUpgradeItem=function(t){t.removeSelf(),this.upgradeItemPool.push(t)},t.prototype.DeleteLotteryItem=function(t){t.removeSelf(),this.lotteryItemPool.push(t)},t}(),FloatTipGroup=function(){function t(t,e){this.upgradeTipSkin="resources/common/img_floatTip.png",this.lotteryTipSkin="resources/common/img_black.png",this.groupID=t,this.upgradeList=new Array,this.lotteryList=new Array,this.animType=e}return t.prototype.AddTip=function(t,e,i,n){switch(void 0===n&&(n=!0),this.animType){case EnumFloatAnimType.UpgradeTip:this.UpgradeTip_AddTip(t,e,i,n);break;case EnumFloatAnimType.LotteryTip:this.LotteryTip_AddTip(t,e,i)}},t.prototype.UpgradeTip_AddTip=function(t,e,i,n){var o=this;if(void 0===n&&(n=!0),this.upgradeList.length>=3){var r=this.upgradeList.shift();r.DeleteItem(),FloatTipAnimManager.Instance.DeleteUpgradeItem(r)}for(var a=0;a<this.upgradeList.length;a++){this.upgradeList[a].UpgradeTipAnim_FloatUp()}var s=FloatTipAnimManager.Instance.CreateUpgradeItem();s.InitItem(t,n),i?i.addChild(s):ui.UIMediator.GetInstance().uiParentMoneyAnim.addChild(s),s.pos(e.x,e.y),s.deleteTimeTask=TimeManager.getInst().once(3,cbhandler.gen_handler(function(){var t=o.upgradeList.shift();t&&t.UpgradeTipAnim_Alpha(cbhandler.gen_handler(function(){t.DeleteItem(),FloatTipAnimManager.Instance.DeleteUpgradeItem(t)},o))},this)),s.UpgradeTipAnim_Scale(),this.upgradeList.push(s)},t.prototype.LotteryTip_AddTip=function(t,e,i){var n=this;if(this.lotteryList.length>=1){var o=this.lotteryList.shift();-1!=o.deleteTimeTask&&(TimeManager.getInst().remove(o.deleteTimeTask),o.deleteTimeTask=-1),o.LotteryTipAnim_Disappear(cbhandler.gen_handler(function(){o.DeleteItem(),FloatTipAnimManager.Instance.DeleteLotteryItem(o)},this))}var r=FloatTipAnimManager.Instance.CreateLotteryItem();r.InitItem(t),i?i.addChild(r):ui.UIMediator.GetInstance().uiParentMoneyAnim.addChild(r),r.pos(e.x,e.y),r.deleteTimeTask=TimeManager.getInst().once(.5,cbhandler.gen_handler(function(){var t=n.lotteryList.shift();t&&t.LotteryTipAnim_Disappear(cbhandler.gen_handler(function(){t.DeleteItem(),FloatTipAnimManager.Instance.DeleteLotteryItem(t)},n))},this)),r.LotteryTipAnim_Appear(),this.lotteryList.push(r)},t.prototype.DeleteAll=function(){for(var t=this.upgradeList.length,e=0;e<t;e++){(i=this.upgradeList.shift())&&(i.DeleteItem(),FloatTipAnimManager.Instance.DeleteUpgradeItem(i))}t=this.lotteryList.length;for(e=0;e<t;e++){var i=this.lotteryList.shift();i&&(i.DeleteItem(),FloatTipAnimManager.Instance.DeleteLotteryItem(i))}},t}(),ConfigTypeEnum;!function(t){t[t.SoundConfig=1]="SoundConfig",t[t.UIConfig=2]="UIConfig",t[t.LocalizationConfig=3]="LocalizationConfig",t[t.LevelConfig=4]="LevelConfig",t[t.MonsterConfig=5]="MonsterConfig",t[t.PlayerConfig=6]="PlayerConfig",t[t.SkillConfig=7]="SkillConfig",t[t.WeaponConfig=8]="WeaponConfig",t[t.SpineConfig=9]="SpineConfig",t[t.BulletConfig=10]="BulletConfig",t[t.BuffConfig=11]="BuffConfig",t[t.PropConfig=12]="PropConfig",t[t.FormulaConfig=13]="FormulaConfig",t[t.GoldUpgradeConfig=14]="GoldUpgradeConfig",t[t.MainWeaponEvolutionConfig=15]="MainWeaponEvolutionConfig",t[t.LevelTemplateConfig=16]="LevelTemplateConfig",t[t.LevelBrushConfig=17]="LevelBrushConfig",t[t.ConstConfig=18]="ConstConfig",t[t.PhoneVerifyErrorMessage=19]="PhoneVerifyErrorMessage",t[t.LotteryRewardConfig=20]="LotteryRewardConfig"}(ConfigTypeEnum||(ConfigTypeEnum={}));var ConfigManager=function(){function t(){this.m_LoadItem=[],this.byteTables=new ByteTableManager,this.PropSpawnProbability=null,this.mainWeaponEvloveConfigList=null}return t.GetInstance=function(){return null==t._Instance&&(t._Instance=new t),t._Instance},t.prototype.getConfig=function(t){this.m_LoadItem=[{url:"res/configs/SoundConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.SoundConfig},{url:"res/configs/UIInfo.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.UIConfig},{url:"res/configs/Localization.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.LocalizationConfig},{url:"res/configs/LevelConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.LevelConfig},{url:"res/configs/MonsterConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.MonsterConfig},{url:"res/configs/PlayerConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.PlayerConfig},{url:"res/configs/SkillConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.SkillConfig},{url:"res/configs/WeaponConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.WeaponConfig},{url:"res/configs/SpineConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.SpineConfig},{url:"res/configs/BulletConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.BulletConfig},{url:"res/configs/BuffConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.BuffConfig},{url:"res/configs/PropConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.PropConfig},{url:"res/configs/FormulaConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.FormulaConfig},{url:"res/configs/GoldUpgradeConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.GoldUpgradeConfig},{url:"res/configs/MainWeaponEvolutionConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.MainWeaponEvolutionConfig},{url:"res/configs/LevelTemplateConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.LevelTemplateConfig},{url:"res/configs/LevelBrushConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.LevelBrushConfig},{url:"res/configs/ConstConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.ConstConfig},{url:"res/configs/PhoneVerifyErrorMessage.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.PhoneVerifyErrorMessage},{url:"res/configs/LotteryRewardConfig.bin",type:Laya.Loader.BUFFER,CType:ConfigTypeEnum.LotteryRewardConfig}];for(var e=0;e<this.m_LoadItem.length;e++)t.push(this.m_LoadItem[e])},t.prototype.InitOnLoaded=function(){for(var t=0;t<this.m_LoadItem.length;t++){var e=ResourceManager.GetInstance().getRes(this.m_LoadItem[t].url);if(null!=e)switch(this.m_LoadItem[t].CType){case ConfigTypeEnum.LocalizationConfig:this.byteTables.OnTableLoaded(LocalizationConfigData,e);break;case ConfigTypeEnum.UIConfig:this.byteTables.OnTableLoaded(UIInfoConfigData,e);break;case ConfigTypeEnum.SoundConfig:this.byteTables.OnTableLoaded(SoundConfigConfigData,e);break;case ConfigTypeEnum.LevelConfig:this.byteTables.OnTableLoaded(LevelConfigConfigData,e);break;case ConfigTypeEnum.MonsterConfig:this.byteTables.OnTableLoaded(MonsterConfigConfigData,e);break;case ConfigTypeEnum.PlayerConfig:this.byteTables.OnTableLoaded(PlayerConfigConfigData,e);break;case ConfigTypeEnum.SkillConfig:this.byteTables.OnTableLoaded(SkillConfigConfigData,e);break;case ConfigTypeEnum.WeaponConfig:this.byteTables.OnTableLoaded(WeaponConfigConfigData,e);break;case ConfigTypeEnum.SpineConfig:this.byteTables.OnTableLoaded(SpineConfigConfigData,e);break;case ConfigTypeEnum.BulletConfig:this.byteTables.OnTableLoaded(BulletConfigConfigData,e);break;case ConfigTypeEnum.BuffConfig:this.byteTables.OnTableLoaded(BuffConfigConfigData,e);break;case ConfigTypeEnum.PropConfig:this.byteTables.OnTableLoaded(PropConfigConfigData,e);break;case ConfigTypeEnum.FormulaConfig:this.byteTables.OnTableLoaded(FormulaConfigConfigData,e);break;case ConfigTypeEnum.MainWeaponEvolutionConfig:this.byteTables.OnTableLoaded(MainWeaponEvolutionConfigConfigData,e),this.InitMainWeaponEvolutionConfig();break;case ConfigTypeEnum.LevelBrushConfig:this.byteTables.OnTableLoaded(LevelBrushConfigConfigData,e);break;case ConfigTypeEnum.LevelTemplateConfig:this.byteTables.OnTableLoaded(LevelTemplateConfigConfigData,e),this.InitMainWeaponEvolutionConfig();break;case ConfigTypeEnum.GoldUpgradeConfig:this.byteTables.OnTableLoaded(GoldUpgradeConfigConfigData,e);break;case ConfigTypeEnum.ConstConfig:this.byteTables.OnTableLoaded(ConstConfigConfigData,e);break;case ConfigTypeEnum.PhoneVerifyErrorMessage:this.byteTables.OnTableLoaded(PhoneVerifyErrorMessageConfigData,e);break;case ConfigTypeEnum.LotteryRewardConfig:this.byteTables.OnTableLoaded(LotteryRewardConfigConfigData,e)}ResourceManager.GetInstance().release(this.m_LoadItem[t].url)}},t.prototype.GetConfigDataByUIID=function(t){var e=null;return this.byteTables.GetAll(UIInfoConfigData).forEach(function(i){ui.UIID[i.UIID]==t&&(e=i)}),e},t.prototype.GetUIConfig=function(t){var e=this.GetConfigDataByUIID(t);return e||null},t.prototype.GetLocalizationConfig=function(t){return this.byteTables.GetConfigByID(t,LocalizationConfigData)},t.prototype.GetAudioConfig=function(t){return this.byteTables.GetConfigByID(t,SoundConfigConfigData)},t.prototype.GetAllAudioConfig=function(){return this.byteTables.GetAll(SoundConfigConfigData)},t.prototype.SetShareConfig=function(t){this.shareconfig=t},t.prototype.GetShareConfig=function(){return this.shareconfig},t.prototype.GetLevelConfig=function(t){for(var e=this.byteTables.GetAll(LevelConfigConfigData),i=0;i<e.length;i++){var n=e[i];if(!(n.ID<t))return n}return null},t.prototype.GetLevelMax=function(){for(var t=this.byteTables.GetAll(LevelConfigConfigData),e=0,i=0;i<t.length;i++){var n=t[i];e<n.ID&&(e=n.ID)}return e},t.prototype.GetMaxLevelID=function(){for(var t=0,e=this.byteTables.GetAll(LevelConfigConfigData),i=0;i<e.length;i++){var n=e[i];n.ID>t&&(t=n.ID)}return t},t.prototype.GetMonsterConfig=function(t){return this.byteTables.GetConfigByID(t,MonsterConfigConfigData)},t.prototype.GetAllMonsterConfig=function(){return this.byteTables.GetAll(MonsterConfigConfigData)},t.prototype.GetMainPlayerConfig=function(){return this.GetPlayerConfig(ConstDefine.MAIN_PLAYRE_CONFIG_ID)},t.prototype.GetPlayerConfig=function(t){return this.byteTables.GetConfigByID(t,PlayerConfigConfigData)},t.prototype.GetSkillConfig=function(t){return this.byteTables.GetConfigByID(t,SkillConfigConfigData)},t.prototype.GetAllSkillConfig=function(){return this.byteTables.GetAll(SkillConfigConfigData)},t.prototype.GetWeaponConfig=function(t){return this.byteTables.GetConfigByID(t,WeaponConfigConfigData)},t.prototype.GetAllWeaponConfig=function(){return this.byteTables.GetAll(WeaponConfigConfigData)},t.prototype.GetSpineConfig=function(t){return this.byteTables.GetConfigByID(t,SpineConfigConfigData)},t.prototype.GetBulletConfig=function(t){return this.byteTables.GetConfigByID(t,BulletConfigConfigData)},t.prototype.GetBuffConfig=function(t){return this.byteTables.GetConfigByID(t,BuffConfigConfigData)},t.prototype.GetPropConfig=function(t){return this.byteTables.GetConfigByID(t,PropConfigConfigData)},t.prototype.GetPropSpawnWeight=function(){if(this.PropSpawnProbability)return this.PropSpawnProbability;this.PropSpawnProbability=[];for(var t=this.byteTables.GetAll(PropConfigConfigData),e=0,i=0;i<t.length;i++){e+=(o=t[i]).SpawnWeight}for(var n=0,i=0;i<t.length;i++){var o=t[i],r=new PropSpawnWeight;r.Config=o;var a=o.SpawnWeight/e;r.ProbabilityRange=n+a,n+=a,this.PropSpawnProbability.push(r)}return this.PropSpawnProbability},t.prototype.GetFormulaConfig=function(t){return this.byteTables.GetConfigByID(t,FormulaConfigConfigData)},t.prototype.GetGoldUpgradeConfig=function(){return this.byteTables.GetConfigByID(1,GoldUpgradeConfigConfigData)},t.prototype.GetConstConfig=function(t){return this.byteTables.GetConfigByID(t,ConstConfigConfigData)},t.prototype.GetPhoneVerifyErrorMessageConfig=function(t){return this.byteTables.GetConfigByID(t,PhoneVerifyErrorMessageConfigData)},t.prototype.GetLotteryRewardConfig=function(t){return this.byteTables.GetConfigByID(t,LotteryRewardConfigConfigData)},t.prototype.InitMainWeaponEvolutionConfig=function(){var t=this.byteTables.GetAll(MainWeaponEvolutionConfigConfigData);this.mainWeaponEvloveConfigList=[null];for(var e=0,i=0;i<t.length;i++){var n=t[i];e+=n.IncreBulletNumber;var o=new MainWeaponEvloveConfig;o.ID=n.GetID(),o.IconPath=n.IconPath,o.RequiredPowerLvl=n.RequiredPowerLvl,o.RequiredGoldNumber=n.ID*n.GoldCoefficient,o.BulletNumber=e,o.WeaponName=n.WeaponName,o.ID!=this.mainWeaponEvloveConfigList.length&&Log.Error("主武器进阶配置表的id不连续"),this.mainWeaponEvloveConfigList.push(o)}},t.prototype.GetMainWeaponEvolutionConfig=function(t){return t>0&&t<this.mainWeaponEvloveConfigList.length?this.mainWeaponEvloveConfigList[t]:(Log.Error("查询的主武器进阶等级%i 不在配置表中",t),t=t>0?Math.min(t,this.mainWeaponEvloveConfigList.length-1):1,this.mainWeaponEvloveConfigList[t])},t.prototype.IsMaxMainWeaponEvolutionLevel=function(t){return t>=this.mainWeaponEvloveConfigList.length-1},t.prototype.GetMaxMainWeaponEvolutionLevel=function(){return this.mainWeaponEvloveConfigList[this.mainWeaponEvloveConfigList.length-1].ID},t.prototype.GetLevelTemplateConfig=function(t){return this.byteTables.GetConfigByID(t,LevelTemplateConfigConfigData)},t.prototype.GetLevelBrushConfig=function(t){return this.byteTables.GetConfigByID(t,LevelBrushConfigConfigData)},t}();ConfigManager._Instance=null;var EnumSoundPlayMode;!function(t){t[t.MultiPlay=1]="MultiPlay",t[t.InterruptCurrPlaying=2]="InterruptCurrPlaying",t[t.NoInterrupt=3]="NoInterrupt"}(EnumSoundPlayMode||(EnumSoundPlayMode={}));var AudioManager=function(){function t(){this.isSoundMuted=!1,this.isMusiceMuted=!1,this.curMusicUid=-1,this.curMusicConfigId=-1,this.curPlayingSound=new Laya.Dictionary,this.curPlayingSoundCallBack=new Laya.Dictionary}return t.GetInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.InitAudioSetting=function(){Laya.SoundManager.autoStopMusic=!0,this.SetMusicMute(!StorageManager.GetMusicSetting()),this.SetSoundMute(!StorageManager.GetSoundSetting()),this.SetMusicVolume(ConstDefine.Audio_Music_Volume),this.SetSoundVolume(ConstDefine.Audio_Sound_Volume)},t.prototype.InitWxSoundPool=function(t,e){t=CommonUtil.RemoveRepeated(t);for(var i=0;i<t.length;i++){var n=t[i];WechatUtil.getIntance().InitSoundPool(n,e[i])}},t.prototype.SetMusicMute=function(t){this.isMusiceMuted=t,Laya.SoundManager.musicMuted=t,StorageManager.SetMusicSetting(!t),this.isMusiceMuted?this.StopMusic():this.curMusicUid<=0&&this.PlayMusicByID()},t.prototype.SetMusicVolume=function(t){Laya.SoundManager.setMusicVolume(t)},t.prototype.PlayMusicByID=function(t){void 0===t&&(t=EnumSoundID.sound_bg_bg_01),this.curMusicUid>=0&&this.StopMusic();var e=this.PlaySoundByConfigID(t,!1);null!=e&&(this.curMusicUid=e,this.curMusicConfigId=t)},t.prototype.RePlayCurMusic=function(){this.curMusicUid>=0&&this.PlayMusicByID(this.curMusicConfigId)},t.prototype.StopMusic=function(){this.curMusicUid<0||(this.StopSoundByUID(this.curMusicUid),this.curMusicUid=-1,this.curMusicConfigId=-1)},t.prototype.SetSoundMute=function(t){this.isSoundMuted=t,Laya.SoundManager.soundMuted=t,StorageManager.SetSoundSetting(!t)},t.prototype.SetSoundVolume=function(t){Laya.SoundManager.setSoundVolume(t)},t.prototype.PlaySoundByConfigID=function(e,i,n,o){if(void 0===i&&(i=!0),void 0===n&&(n=null),i&&this.isSoundMuted)return null;if(!i&&this.isMusiceMuted)return null;var r=ConfigManager.GetInstance().GetAudioConfig(e);switch(r.PlayMode){case EnumSoundPlayMode.InterruptCurrPlaying:this.StopSoundByConfigID(e);break;case EnumSoundPlayMode.NoInterrupt:if(this.getCurPlayingSoundByConfigID(e).length>0)return null;break;case EnumSoundPlayMode.MultiPlay:}var a=t.soundId++,s=this.Play(r.URL,r.Loop?0:1,this.onSoundCompleted.bind(this,a,e),i,o),l=new AudioClipInfo(a,e,r.URL,s);return this.curPlayingSound.set(l.UID,l),!r.Loop&&n&&this.curPlayingSoundCallBack.set(l.UID,n),l.UID},t.prototype.PauseBG=function(t){this.Pause(t,this.curMusicUid)},t.prototype.Pause=function(t,e){var i=this.curPlayingSound.get(e);i&&i.Pause(t)},t.prototype.SetBGSoundVolum=function(t){var e=this.curPlayingSound.get(this.curMusicUid);e&&e.SetVolume(t)},t.prototype.SetSoundVolum=function(t,e){var i=this.curPlayingSound.get(t);i&&i.SetVolume(e)},t.prototype.StopSoundByUID=function(t){var e=this.curPlayingSound.get(t);e&&(this.RemoveSoundRecordByUid(t),e.Stop())},t.prototype.StopSoundByConfigID=function(t){ConfigManager.GetInstance().GetAudioConfig(t);for(var e=this.curPlayingSound.values,i=e.length-1;i>=0;i--){var n=e[i];n.ConfigID==t&&(this.RemoveSoundRecordByUid(n.UID),n.Stop())}},t.prototype.StopAllSound=function(){if(Laya.SoundManager.stopAllSound(),CommonUtil.OnMiniGame())for(var t=this.curPlayingSound.values,e=0;e<t.length;e++){t[e].Stop()}this.curPlayingSound.clear(),this.curPlayingSoundCallBack.clear()},t.prototype.getCurPlayingSoundByConfigID=function(t){for(var e=[],i=this.curPlayingSound.values,n=0;n<i.length;n++){var o=i[n];if(o.ConfigID==t){e.push(o);break}}return e},t.prototype.Play=function(t,e,i,n,o){if(CommonUtil.OnMiniGame()){var r=0==e;return o||(o=n?Laya.SoundManager.soundVolume:Laya.SoundManager.musicVolume),WechatUtil.getIntance().PlaySound(t,r,i,o)}var a=i?Handler.create(this,i):null;return n?Laya.SoundManager.playSound(t,e,a):Laya.SoundManager.playMusic(t,e,a)},t.prototype.onSoundCompleted=function(t,e){this.curPlayingSound.remove(t);var i=this.curPlayingSoundCallBack.get(t);i&&(this.curPlayingSoundCallBack.remove(t),i())},t.prototype.RemoveSoundRecordByUid=function(t){this.curPlayingSound.remove(t),this.curPlayingSoundCallBack.remove(t)},t}();AudioManager.soundId=0;var AudioClipInfo=function(){function t(t,e,i,n){CommonUtil.OnMiniGame()?this.wechatSoundChannel=n:this.soundChannel=n,this.soundUid=t,this.soundConfigId=e,this.soundUrl=i}return Object.defineProperty(t.prototype,"UID",{get:function(){return this.soundUid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ConfigID",{get:function(){return this.soundConfigId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Channel",{get:function(){return CommonUtil.OnMiniGame()?this.wechatSoundChannel:this.soundChannel},enumerable:!0,configurable:!0}),t.prototype.SetVolume=function(t){CommonUtil.OnMiniGame()?(this.Pause(!0),this.wechatSoundChannel.volume=t,this.Pause(!1)):this.soundChannel&&(this.soundChannel.volume=t)},t.prototype.Pause=function(t){CommonUtil.OnMiniGame()?t?this.wechatSoundChannel.pause():this.wechatSoundChannel.play():t?this.soundChannel.pause():this.soundChannel.resume()},t.prototype.Stop=function(){CommonUtil.OnMiniGame()?WechatUtil.getIntance().StopSound(this.wechatSoundChannel,this.soundUrl):this.soundChannel&&!this.soundChannel.isStopped&&this.soundChannel.stop()},t}(),IDGenerator=function(){function t(){}return t.GenMonsterID=function(){var e=t.MONSTER_ID_BASE+ ++t.monsterIdCount;return e>=Number.MAX_VALUE-1&&(t.monsterIdCount=0,e=t.MONSTER_ID_BASE+ ++t.monsterIdCount),e},t.GenPropID=function(){var e=t.PROP_ID_BASE+ ++t.propIdCount;return e>=Number.MAX_VALUE-1&&(t.propIdCount=0,e=t.PROP_ID_BASE+ ++t.propIdCount),e},t.GenBulletID=function(){var e=t.BULLET_ID_BASE+ ++t.bulletIdCount;return e>=Number.MAX_VALUE-1&&(t.bulletIdCount=0,e=t.BULLET_ID_BASE+ ++t.bulletIdCount),e},t}();IDGenerator.MONSTER_ID_BASE=1e4,IDGenerator.PROP_ID_BASE=2e4,IDGenerator.BULLET_ID_BASE=3e4,IDGenerator.monsterIdCount=0,IDGenerator.propIdCount=0,IDGenerator.bulletIdCount=0;var GameUtil=function(){function t(){}return t.ParseDisConfigString=function(t){for(var e=0,i=[],n=t.split(";"),o=0;o<n.length;o++){var r=n[o],a=r.split(",");a.length<2&&Log.Error("Dist的配置异常%s, 来自分布配置%s",r,t);var s=new DistConfigInfo;s.Key=parseInt(a[0]),s.Weight=parseInt(a[1]),e+=s.Weight,i.push(s)}for(o=0;o<i.length;o++){var l=i[o];l.Percentage=0==e?0:l.Weight/e}return i},t.StrLength=function(t){for(var e=0,i=t.split(""),n=0;n<i.length;n++)i[n].charCodeAt(0)<299?e++:e+=2;return e},t}(),FormulaUtil=function(){function t(){}return t.CalcBulletNumPerSec=function(t,e,i){switch(e){case EnumBulletOutLookType.MonsterBullet:var n=ConfigManager.GetInstance().GetBulletConfig(e);return Log.Error("怪物子弹的发射公式还没有, 固定用%i个子弹每秒",n.MaxBulletRow),n.MaxBulletRow;default:var o=GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.evolveLevel;return i.indexOf(EnumBuffType.FireSpeedIntensified)>=0&&(o=ConfigManager.GetInstance().GetMaxMainWeaponEvolutionLevel()),ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(o).BulletNumber}},t.CalcPlayerBulletDamage=function(t,e,i,n){var o=ConfigManager.GetInstance().GetBulletConfig(e),r=o.BaseBulletDamage,a=1,s=this.calcBulletNum(t,o)-o.MaxBulletNum;if(s>0&&i<s&&(a=2),n.indexOf(EnumBuffType.PowerIntensified)>=0){a*=(e==EnumBulletOutLookType.MainPlayerBullet_PowerBuff?o:ConfigManager.GetInstance().GetBulletConfig(EnumBulletOutLookType.MainPlayerBullet_PowerBuff)).DamageMultFactor}return this.CalcByConfig(EnumFormulaType.MainWeaponBulletPower,r,t)*a},t.calcBulletNum=function(t,e){return e.BaseBulletNum+(t-1)},t.CalcMonsterHp=function(t,e,i){return this.CalcByConfig(EnumFormulaType.MonsterBlood,t,e,i)},t.CalcMonsterScale=function(t,e,i){return this.CalcByConfig(EnumFormulaType.MonsterScale,t-i)},t.CalcSideWeaponParams=function(t,e,i){var n=[];switch(e=e<1?1:e,t){case EnumSideWeaponType.Missile:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/20),s=i.Param4,l=i.Param3,h=Math.min(s,l+(e-1)),u=this.GetSideWeaponDamage(t,e);n.push(a),n.push(h),n.push(u);break;case EnumSideWeaponType.Laser:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/10),c=i.Param4,d=i.Param3,p=Math.min(c,d+(e-1)),f=i.MaxDuration,g=i.MinDuration,_=Math.min(f,g+(e-1)/10),u=this.GetSideWeaponDamage(t,e);n.push(a),n.push(p),n.push(_),n.push(u);break;case EnumSideWeaponType.Guard:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/10),m=i.Param4,y=i.Param3,h=Math.min(m,y+2*e),_=f=i.MaxDuration,u=this.GetSideWeaponDamage(t,e);n.push(a),n.push(h),n.push(_),n.push(u);break;case EnumSideWeaponType.MagnetDisturb:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/10),v=i.Param4,I=i.Param3,w=Math.min(v,I+2*(e-1)),u=this.GetSideWeaponDamage(t,e);n.push(a),n.push(w),n.push(u);break;case EnumSideWeaponType.ChildPlane:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/10),f=i.MaxDuration,g=i.MinDuration,_=Math.min(f,g+(e-1)/10),u=this.GetSideWeaponDamage(t,e);n.push(a),n.push(_),n.push(u);break;case EnumSideWeaponType.ElectricNet:var o=i.Param2,r=i.Param1,a=Math.max(o,r-(e-1)/10),b=i.Param4,C=i.Param3,S=Math.min(b,C+2*(e-1)),x=i.Param5,u=this.GetSideWeaponDamage(t,e),_=i.MaxDuration;n.push(a),n.push(S),n.push(x),n.push(u),n.push(_);break;default:Log.Error("没有副武器%s对应等级%i的参数配置",t,e)}return n},t.CalcMonsterReward=function(t){return this.CalcByConfig(EnumFormulaType.MonsterGold,t)},t.GetSideWeaponDamage=function(t,e){var i=ConfigManager.GetInstance().GetWeaponConfig(t).weaponPower;return this.CalcByConfig(EnumFormulaType.SideWeaponBulletPower1+t-EnumSideWeaponType.Missile,i,e)},t.CalcByConfig=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=ConfigManager.GetInstance().GetFormulaConfig(t);switch(t){case EnumFormulaType.MonsterBlood:var o=e[2];return o&&(n=ConfigManager.GetInstance().GetFormulaConfig(o)),e[0]*n.Param1+n.Param2*(e[1]*n.Param3-n.Param4);case EnumFormulaType.MonsterGold:var r=n.Param1+e[0]*n.Param2*n.Param3;return n.Param4>0&&(r=Math.min(r,n.Param4)),r;case EnumFormulaType.DiamondUpgrade:return(a=e[0])<=1?n.Param4:this.CalcByConfig(t,a-1)+Math.floor(a*n.Param1/n.Param2)+n.Param3;case EnumFormulaType.GoldUpgrade:var a=e[0],s=ConfigManager.GetInstance().GetGoldUpgradeConfig();return s.BaseSpeed+s.IncreSpeed*(a-1);case EnumFormulaType.SpawnUpgradeCost:case EnumFormulaType.MainWeaponUpgradeCost:u=e[0];return n.Param1+(n.Param2+u*n.Param3*n.Param4)*u*n.Param5;case EnumFormulaType.MainWeaponBulletPower:return e[0]*n.Param1+Math.ceil(e[1]*n.Param2/n.Param3);case EnumFormulaType.MonsterTotalLevel:case EnumFormulaType.MonsterTotalLevel2:case EnumFormulaType.MonsterTotalLevel3:case EnumFormulaType.MonsterTotalLevel4:case EnumFormulaType.MonsterTotalLevel5:case EnumFormulaType.MonsterTotalLevel6:var l=e[0];return n.Param1+(n.Param2+l*n.Param3)*l*n.Param4;case EnumFormulaType.SideWeaponBulletPower1:case EnumFormulaType.SideWeaponBulletPower2:case EnumFormulaType.SideWeaponBulletPower3:case EnumFormulaType.SideWeaponBulletPower4:case EnumFormulaType.SideWeaponBulletPower5:case EnumFormulaType.SideWeaponBulletPower6:var h=e[0],a=e[1];return h*n.Param1+n.Param2*(a-1);case EnumFormulaType.SideWeaponUpgradeCost1:case EnumFormulaType.SideWeaponUpgradeCost2:case EnumFormulaType.SideWeaponUpgradeCost3:case EnumFormulaType.SideWeaponUpgradeCost4:case EnumFormulaType.SideWeaponUpgradeCost5:case EnumFormulaType.SideWeaponUpgradeCost6:var u=e[0];return n.Param1+(n.Param2+u*n.Param3*n.Param4)*u*n.Param5;case EnumFormulaType.MonsterScale:var c=e[0];return 1*n.Param1*(n.Param2+c*n.Param3)}},t}(),LevelFormula=function(){function t(){}return t.CalcTotalMonsterLvl=function(t,e){return FormulaUtil.CalcByConfig(t,e)},t}(),PropSpawnLogic=function(){function t(){this.curSpawnProbability=ConstDefine.PROP_PROBABILITY}return Object.defineProperty(t,"Instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.TrySpawn=function(){this.spawn()},t.prototype.checkCanSpawn=function(){return Math.random()<=this.curSpawnProbability},t.prototype.spawn=function(){PropManager.GetInstance().RandomSpawn().setPlayerPos(Laya.stage.width*Math.random(),100)},t}(),LevelSpawnDatas=function(){return function(){this.IsBossLevel=!1}}(),LevelSpawnData=function(){return function(){this.SoundId=-1}}(),MonsterSpawnData=function(){function t(){this.HulkComing=!1,this.CanTriggerPropSpawn=!1}return t.prototype.Clone=function(){var e=new t;e.MonsterId=this.MonsterId,e.Level=this.Level,e.PowerNum=this.PowerNum,e.PowerConfigs=[];for(var i=0;i<this.PowerConfigs.length;i++){var n=this.PowerConfigs[i];e.PowerConfigs.push(n)}return e.SizeScale=new Vec2(this.SizeScale.x,this.SizeScale.y),e.HulkComing=this.HulkComing,e.CanTriggerPropSpawn=this.CanTriggerPropSpawn,e},t}(),MonsterSpawnCheckResult=function(){return function(){}}(),MonsterSpawnLogic=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.CheckCanSpawn=function(){return!GameDataManager.getInstance().LevelInfo.IsScreenFull()},t.prototype.GetSpawnData=function(t){var e=ConfigManager.GetInstance().GetLevelConfig(t);if(null==e)return Log.Error("关卡%i配置不存在, 无法生成刷怪数据",t),null;var i=new LevelSpawnDatas;i.LevelSpawnData=[];var n=this.GetTemplateId(e,t);Log.Debug("获取templet id %i",n);var o=ConfigManager.GetInstance().GetLevelTemplateConfig(n);i.IsBossLevel=o.IsBossLvl;i.IsBossLevel;for(var r=o.FormulaID,a=[],s=0,l=0;l<r.length;l++){var h=new LevelSpawnData,u=r[l],c=ConfigManager.GetInstance().GetLevelBrushConfig(u),d=this.BrushMonster(c,t);h.Monsters=d.MonsterSpawnData,h.Delay=c.RefreshDuration,h.SoundId=c.soundId,i.LevelSpawnData.push(h);for(var p=0;p<d.MonsterIDList.length;p++){g=d.MonsterIDList[p];a.indexOf(g)<0&&a.push(g)}s+=h.Monsters.length}for(var f=[],l=0;l<a.length;l++)for(var g=a[l],_=ConfigManager.GetInstance().GetMonsterConfig(g),m=0;m<_.MonsterSkillID.length;m++){var y=_.MonsterSkillID[m],v=y>0?ConfigManager.GetInstance().GetSkillConfig(y):null;v&&v.Type==EnumMonsterPowerType.Spawn&&v.Param3>0&&a.indexOf(v.Param3)<0&&f.push(v.Param3)}f.length>0&&(a=a.concat(f)),i.LevelId=t,i.MaxInScreenNum=e.MaxNumInScreen,i.MonsterIDList=a,i.RefreshInterval=.1,i.TotalMonsterCount=s;var I="\n";I+="关卡"+t+"中分成"+i.LevelSpawnData.length+"波.\n",I+="关卡中出现MonsterID:";for(l=0;l<i.MonsterIDList.length;l++)I+=i.MonsterIDList[l]+",";I+="\n";for(l=0;l<i.LevelSpawnData.length;l++){var w=i.LevelSpawnData[l];I+="  第"+l+"波有怪物数量:"+w.Monsters.length+"\n";for(var b=0;b<w.Monsters.length;b++){var C=w.Monsters[b],S="";if(C.PowerNum>0)for(var x=0;x<C.PowerNum;x++)S+=C.PowerConfigs[x].ID,S+=":",S+=EnumMonsterPowerType[C.PowerConfigs[x].Type],S+=",";I+="      怪物id:"+C.MonsterId+" 怪物等级:"+C.Level+" 怪物能力数量:"+C.PowerNum+" 怪物能力:"+S+"\n"}}return Log.Info(I),i},t.prototype.GetTemplateId=function(t,e){var i=StorageManager.GetLastestLevelTemplate(e);if(!(i<0))return Log.Debug("获取保存的关卡模版: %i",i),i;for(var n=GameUtil.ParseDisConfigString(t.TemplateId),o=Math.random(),r=0,a=0;a<n.length;a++){var s=n[a];if(r+=s.Percentage,a==n.length-1&&(r=1),o<=r)return i=s.Key,StorageManager.SetLastestLevelTemplate(e,i),Log.Debug("随机获取关卡模版: %i",i),s.Key}},t.prototype.BrushMonster=function(t,e){for(var i=t.MonsterLvlRange[0],n=t.MonsterLvlRange[1],o=t.BuffSpawnNumber,r=[],a=[],s=t.MonsterDist.split(";"),l=0;l<s.length;l++){var h=s[l],u=h.split(",");u.length<3&&Log.Error("Dist的配置异常%s, 来自分布配置%s",h,t.MonsterDist);var c=parseInt(u[0]),d=parseInt(u[1]);if(d>0){var p=parseInt(u[2]),f=ConfigManager.GetInstance().GetMonsterConfig(c).MonsterSkillID;r.push(c);for(var g=0;g<d;g++){d;var _=new MonsterSpawnData;_.Level=e+Math.round(Math.random()*(n-i))+i,_.MonsterId=c,_.PowerNum=g<p?f.length:0,_.PowerConfigs=[];for(var m=0;m<_.PowerNum;m++){var y=f[m];if(y>0){var v=ConfigManager.GetInstance().GetSkillConfig(y);v&&_.PowerConfigs.push(v)}}_.PowerNum=_.PowerNum>0?_.PowerConfigs.length:0,_.HulkComing=!1;var I=this.GetMonsterScale(_.Level,e);_.SizeScale=new Vec2(I,I),_.CanTriggerPropSpawn=a.length<o,a.push(_)}}}var w=new TempSpawnMonsterInfo;return w.MonsterIDList=r,w.MonsterSpawnData=a,w},t.prototype.GetMonsterScale=function(t,e){return t==e?1:t<e?.5:t<e+10?1.5:t<e+20?2:2.5},t}(),TempSpawnMonsterInfo=function(){return function(){}}(),DistConfigInfo=function(){return function(){}}(),AttachTree=function(){function t(){this.uid=-1,this.childs=[],this.parent=null}return t.prototype.GetTopParent=function(){for(var t=this;t;){var e=t.parent;if(null==e)break;t=e}return t},t.prototype.RemoveFromParent=function(){var t=this.parent,e=null,i=(e=t?t.childs:AttachDataCenter.Instance.attachCenters).indexOf(this);i>=0&&e.splice(i,1)},t.prototype.IsUnderSameParent=function(t){return this.GetTopParent()==t.GetTopParent()},t.prototype.GetTotalChildCount=function(){for(var t=0,e=0;e<this.childs.length;e++){t+=1,t+=this.childs[e].GetTotalChildCount()}return t},t}(),AttachDataCenter=function(){function t(){this.attachCenters=[],this.lastAttachCheckTime=0,this.lastFrameNo=0}return Object.defineProperty(t,"Instance",{get:function(){return null==t._instace&&(t._instace=new t),t._instace},enumerable:!0,configurable:!0}),t.prototype.OnEnterMatch=function(){this.attachCenters=[]},t.prototype.AddAttach=function(t,e){var i=this.GetAttachCenter(t.UID);null==i&&(i=this.CreateTree(t.UID),this.attachCenters.push(i));var n=this.GetAttachCenter(e.UID);return null==n&&(n=this.CreateTree(e.UID)),n.RemoveFromParent(),i.childs.push(n),n.parent=i,t.AddChild(e.comParent),e.monsterMoveComp.monsterStop(),Log.Debug("怪物uid%i,attach到父节点%i",e.UID,t.UID),n},t.prototype.RemoveAttach=function(t){var e=this.GetAttachCenter(t.UID);if(null!=e){Log.Debug("怪物uid%i死亡删除attach, 父节点%i",t.UID,e.parent?e.parent.uid:-1),e.RemoveFromParent();for(var i=0;i<e.childs.length;i++){var n=e.childs[i];this.attachCenters.push(n),n.parent=null;var o=PlayerManager.GetInstance().GetMonsterByUid(n.uid);null==o&&Log.Error("remove atach error"),o.AddToStage(),o.monsterMoveComp.monsterRandomMove()}}},t.prototype.IsUnderSameParent=function(t,e){var i=this.GetAttachCenter(t.UID),n=this.GetAttachCenter(e.UID);return i&&n&&i.IsUnderSameParent(n)},t.prototype.GetAttachCenter=function(t){for(var e=0;e<this.attachCenters.length;e++){var i=this.attachCenters[e],n=this.findInTree(i,t);if(n)return n}return null},t.prototype.IsChildTreeFull=function(t,e){var i=this.GetAttachCenter(t.UID);if(null==i)return!1;return i.GetTopParent().GetTotalChildCount()>=e},t.prototype.findInTree=function(t,e){if(t.uid==e)return t;for(var i=0;i<t.childs.length;i++){var n=t.childs[i],o=this.findInTree(n,e);if(o)return o}return null},t.prototype.CreateTree=function(t){var e=new AttachTree;return e.uid=t,e},t.prototype.CheckAttach=function(e,i){void 0===i&&(i=100);var n=(new Date).getTime(),o=Laya.timer.currFrame;if(n-this.lastAttachCheckTime>=1e3*e&&o>this.lastFrameNo){this.lastAttachCheckTime=n,this.lastFrameNo=o;for(var r=[],a=PlayerManager.GetInstance().GetAllSpawnedMonster(),s=0;s<a.length-1;s++){var l=a[s],h=this.hasAttachSkill(l);if(!h||!this.IsChildTreeFull(l,i))for(var u=s+1;u<a.length;u++){var c=a[u],d=this.hasAttachSkill(c);if((h||d)&&((!d||!this.IsChildTreeFull(c,i))&&l.IsAlive()&&c.IsAlive()&&l.UID!=c.UID&&!(r.indexOf(c.UID)>=0||t.Instance.IsUnderSameParent(l,c)))){var p=l.GetCollisionShapeInfo(!0);CommonUtil.IsBoxCrossed(p,c.GetCollisionShapeInfo(!0))&&(h?this.Attach(l,c):this.Attach(c,l),r.push(c.UID))}}}}},t.prototype.Attach=function(e,i){if(t.Instance.AddAttach(e,i),!this.hasAttachSkill(i)){var n=e.skillComp.GetSkill(EnumMonsterPowerType.Attach);i.skillComp.Start(EnumMonsterPowerType.Attach,n.Config)}},t.prototype.hasAttachSkill=function(t){return t.attributeComp.ContainsSkill(EnumMonsterPowerType.Attach)||t.skillComp.ConstainSkill(EnumMonsterPowerType.Attach)},t}(),CollisionDetector=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==t._instace&&(t._instace=new t),t._instace},enumerable:!0,configurable:!0}),t.prototype.CheckBoxCollision=function(t,e){return CommonUtil.IsBoxCrossed(t,e)},t.prototype.CheckMonsterCollision=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o=new BoxCollisonInfo(t,e);return this.CheckMonsterCollisionByShape(o,i,n)},t.prototype.CheckMonsterCollisionByShape=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!0);for(var n=[],o=PlayerManager.GetInstance().GetAllSpawnedMonster(),r=0;r<o.length;r++){var a=o[r];if(a.IsAlive()){var s=a.GetCollisionShapeInfo(e);if(CommonUtil.IsBoxCrossed(s,t)&&(n.push(a),!i))break}}return n},t.prototype.CheckMonsterBulletCollision=function(t){for(var e=BulletManager.GetInstance().GetAllSpawnedBullet(EnumBulletOutLookType.MonsterBullet),i=0;i<e.length;i++){var n=e[i],o=n.GetCollisionShapeInfo();if(CommonUtil.IsBoxCrossed(o,t))return n}return null},t.prototype.CheckPropCollision=function(t){for(var e=[],i=PropManager.GetInstance().GetAll(),n=0;n<i.length;n++){var o=i[n],r=o.GetCollisionShapeInfo();CommonUtil.IsBoxCrossed(r,t)&&e.push(o)}return e},t.prototype.CheckMonsterCollisionSectorByShape=function(t,e){void 0===e&&(e=!1);for(var i=[],n=e?BulletManager.GetInstance().GetAllSpawnedBullet(EnumBulletOutLookType.MonsterBullet):PlayerManager.GetInstance().GetAllSpawnedMonster(),o=0;o<n.length;o++){var r=n[o];if(e||r.IsAlive()){var a=r.GetCollisionShapeInfo();if(CommonUtil.IsBoxCrossedSector(a,t,!0)){i.push(r);break}}}return i},t.prototype.CheckMonsterInCircle=function(t,e,i,n){for(var o=[],r=PlayerManager.GetInstance().GetAllSpawnedMonster(),a=0;a<r.length;a++){var s=r[a];if(s.IsAlive()&&!(i&&i.indexOf(s.UID)>=0)){var l=s.GetCollisionShapeInfo().center;if(CommonUtil.IsPointInCircle(l,t,e)&&(o.push(s),n&&o.length==n))break}}return o},t.prototype.IsPlayerInCircle=function(t,e,i){var n=i.GetCollisionShapeInfo().center;return CommonUtil.IsPointInCircle(n,t,e)},t}(),MoveComponentHelp2D=function(){function t(){this.speed=.5,this.rotation=0,this.yDir=1,this.xOffset=0,this.yOffset=0}return t.prototype.getMoveSpeedOnRotation=function(t){this.rotation=t,this.rotation<=90?(this.xOffset=-this.speed*Math.sin(Math.PI/180*this.rotation),this.yOffset=this.speed*Math.cos(Math.PI/180*this.rotation)):this.rotation<=180&&this.rotation>90?(this.xOffset=-this.speed*Math.sin(Math.PI/180*(180-this.rotation)),this.yOffset=-this.speed*Math.cos(Math.PI/180*(180-this.rotation))):this.rotation>180&&this.rotation<=270?(this.xOffset=this.speed*Math.sin(Math.PI/180*(this.rotation-180)),this.yOffset=-this.speed*Math.cos(Math.PI/180*(this.rotation-180))):this.rotation>270&&this.rotation<=360&&(this.yOffset=this.speed*Math.sin(Math.PI/180*(this.rotation-270)),this.xOffset=this.speed*Math.cos(Math.PI/180*(this.rotation-270))),this.yOffset*=this.yDir},t.prototype.getMoveSpeedOnDir=function(t){this.xOffset=t.x*this.speed,this.yOffset=t.y*this.speed},t}(),SpinePoolManager=function(){function t(){this.loadedSpinePoolCount=0,this.targetSpinePoolNum=0,this.scriptPoolDic=new Laya.Dictionary}return t.GetInstance=function(){return this._inst||(this._inst=new t),this._inst},t.prototype.InitPool=function(t,e,i,n){var o=CommonUtil.RemoveRepeated(t);this.targetSpinePoolNum=o.length,this.loadedSpinePoolCount=0,this.successIds=[],this.failedIds=[];for(var r=0;r<o.length;r++){var a=o[r],s=ConfigManager.GetInstance().GetSpineConfig(a);if(s){var l=new SpineObjectPool;l.Init(s.SpinePath,s.PoolSize,this.onSpineLoadedSuccess.bind(this),this.onSpienLoadedFail.bind(this),[s.id,e,n],[s.id,e,n]),this.scriptPoolDic.set(s.GetID(),l)}else Log.Error("spineConfigID:%i没有配置",a)}},t.prototype.onSpineLoadedSuccess=function(t,e){this.loadedSpinePoolCount++,this.successIds.push(e[0]),e[2]&&e[2](this.loadedSpinePoolCount/this.targetSpinePoolNum),this.targetSpinePoolNum==this.loadedSpinePoolCount&&e[1](this.successIds,this.failedIds)},t.prototype.onSpienLoadedFail=function(t,e,i){this.loadedSpinePoolCount++,this.failedIds.push(i[0]),i[2]&&i[2](this.loadedSpinePoolCount/this.targetSpinePoolNum),this.targetSpinePoolNum==this.loadedSpinePoolCount&&i[1](this.successIds,this.failedIds)},t.prototype.Spawn=function(t){var e=this.scriptPoolDic.get(t);return e?e.Spawn():(Log.Error("Spawn的Spine对象池没有初始化 %i",t),null)},t.prototype.Recycle=function(t,e){var i=this.scriptPoolDic.get(t);return i?i.Recycle(e):(Log.Warn("Recycle的Spine对象池没有初始化%i",t),null)},t.prototype.Destory=function(t){var e=this.scriptPoolDic.get(t);e?(e.Destory(),this.scriptPoolDic.remove(t)):Log.Warn("Destory的Spine对象池没有初始化%s",t)},t}(),SpineObjectPool=function(){function t(){}return t.prototype.Init=function(t,e,i,n,o,r,a){void 0===a&&(a=0),this.m_Unusedskeletons=new Array,this.m_Usedskeletons=new Array,this.animMode=a,this.templet=new Laya.Templet;var s=[t,e,i];s.push(o);var l=[t,n];l.push(r),this.templet.on(Laya.Event.COMPLETE,this,this.loadSuccess,s),this.templet.on(Laya.Event.ERROR,this,this.loadError,l),Log.Debug("load spine "+t),this.templet.loadAni(t)},t.prototype.loadError=function(t,e,i,n){Log.Error("加载spine失败%s",t),e(t,n,i)},t.prototype.loadSuccess=function(t,e,i,n,o){Log.Debug("on spine loaded "+t);for(var r=0;r<e;r++){var a=this.templet.buildArmature(this.animMode);this.m_Unusedskeletons.push(a)}i(t,n)},t.prototype.Spawn=function(){var t=null;return t=this.m_Unusedskeletons.length>0?this.m_Unusedskeletons.pop():this.templet.buildArmature(this.animMode),this.m_Usedskeletons.push(t),t},t.prototype.Recycle=function(t){t.stop(),t.removeSelf();this.m_Unusedskeletons.indexOf(t)>=0?Log.Error("重复回收已经同一个Spine"):this.m_Unusedskeletons.push(t);var e=this.m_Usedskeletons.indexOf(t);e>=0&&this.m_Usedskeletons.splice(e,1)},t.prototype.Destory=function(){for(t=0;t<this.m_Unusedskeletons.length;t++){(e=this.m_Unusedskeletons[t]).destroy(!0)}this.m_Unusedskeletons=null;for(var t=0;t<this.m_Usedskeletons.length;t++){var e=this.m_Usedskeletons[t];e.stop(),e.removeSelf(),e.destroy(!0)}this.m_Usedskeletons=null,this.templet.destroy(),this.templet=null},t}(),OBB=function(){function t(t){this.USING_LAYA_COORDINATE=!0,this.detectingAxis=[],this.boxCollsionInfo=t;var e=(this.USING_LAYA_COORDINATE?-1:1)*this.boxCollsionInfo.rotation;this.GenDetectingAxis(e)}return Object.defineProperty(t.prototype,"Axis",{get:function(){return this.detectingAxis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Center",{get:function(){return this.boxCollsionInfo.center},enumerable:!0,configurable:!0}),t.prototype.IsCollidedWith=function(t){var e=t.Center.sub(this.Center);this.USING_LAYA_COORDINATE&&(e.y*=-1);for(i=0;i<this.Axis.length;i++){n=this.Axis[i],this.GetRadiusProjectionOn(n),t.GetRadiusProjectionOn(n),Math.abs(e.dot(n));if(this.GetRadiusProjectionOn(n)+t.GetRadiusProjectionOn(n)<=Math.abs(e.dot(n)))return!1}for(var i=0;i<t.Axis.length;i++){var n;if(!(n=t.Axis[i]).equal(this.Axis[0])&&!n.equal(this.Axis[1])){this.GetRadiusProjectionOn(n),t.GetRadiusProjectionOn(n),Math.abs(e.dot(n));if(this.GetRadiusProjectionOn(n)+t.GetRadiusProjectionOn(n)<=Math.abs(e.dot(n)))return!1}}return!0},t.prototype.GenDetectingAxis=function(t){var e=t/180*Math.PI,i=new Vec2(Math.cos(e),Math.sin(e)),n=new Vec2(-Math.sin(e),Math.cos(e));this.detectingAxis.push(i),this.detectingAxis.push(n)},t.prototype.GetRadiusProjectionOn=function(t){var e=t.dot(this.detectingAxis[0]),i=t.dot(this.detectingAxis[1]);return Math.abs(e)*this.boxCollsionInfo.size.x*.5+Math.abs(i)*this.boxCollsionInfo.size.y*.5},t}(),CollisionUtil=function(){function t(){}return t.IsPointInCircle=function(t,e,i){var n=e.sub(t);return n.x*n.x+n.y*n.y<=i*i},t.IsCirclesCrossed=function(t,e,i,n){return t.dist(i)<=e+n},t.IsCirleLineCrossed=function(t,e,i,n,o){void 0===o&&(o=!0);if(i.dist(t)<=e)return!0;if(n.dist(t)<=e)return!0;o&&(i.y*=-1,n.y*=-1,t.y*=-1);return this.GetMiniDistFromPointToLine(t,i,n)<=e},t.GetMiniDistFromPointToLine=function(t,e,i){var n=t.sub(e),o=i.sub(e).normalise(),r=n.dot(o),a=e.dist(i);if(r>0&&r<=a){return e.add(o.mul(r)).sub(t).magnitude()}var s=t.sub(i).magnitude();return Math.min(s,n.magnitude())},t.IsCircleBoxCrossed=function(t,e,i){void 0===i&&(i=!0);var n=this.GetBoxCorners(t,i);return!!this.IsCirleLineCrossed(e.center,e.radius,n[0],n[1],i)||(!!this.IsCirleLineCrossed(e.center,e.radius,n[0],n[2],i)||(!!this.IsCirleLineCrossed(e.center,e.radius,n[3],n[1],i)||!!this.IsCirleLineCrossed(e.center,e.radius,n[3],n[2],i)))},t.GetBoxCorners=function(t,e){void 0===e&&(e=!0);var i=CommonUtil.GetXAxisInNormalCoByAngle(t.rotation,!e);e&&(i.y*=-1);var n=CommonUtil.GetYAxisInNormalCoByAngle(t.rotation,!e);e&&(n.y*=-1);for(var o=[i,n],r=[],a=0;a<2;a++)for(var s=o[0].mul(0==a?-1:1),l=t.center.add(s.mul(.5*t.size.x)),h=0;h<2;h++){var u=o[1].mul(0==h?-1:1),c=l.add(u.mul(.5*t.size.y));r.push(c)}return r},t.IsBoxCrossed=function(t,e){if(Math.abs(t.center.x-e.center.x)>t.size.x+e.size.x)return!1;if(Math.abs(t.center.y-e.center.y)>t.size.y+e.size.y)return!1;var i=new OBB(t),n=new OBB(e);return i.IsCollidedWith(n)},t.IsBoxPointCrossed=function(t,e){var i=.5*t.size.x,n=.5*t.size.y;return e.x<t.center.x+i&&e.x>t.center.x-i&&e.y<t.center.y+n&&e.y>t.center.y-n},t.IsPointInSector=function(t,e,i,n,o,r){void 0===r&&(r=!0);var a=t.sub(e);if(r&&(a.y*=-1),a.magnitudePower2()<=i*i){var s=CommonUtil.GetYAxisInNormalCoByAngle(o,!r);return(a=a.normalise()).dot(s)>Math.cos(.5*n/180*Math.PI)}return!1},t.IsLineCrossedInSector=function(t,e,i,n,o,r,a){void 0===a&&(a=!0);var s=t.clone(),l=e.clone(),h=i.clone(),u=r;a&&(s.y*=-1,l.y*=-1,h.y*=-1,u*=-1);var c=CommonUtil.GetYAxisInNormalCoByAngle(u,!0),d=CommonUtil.RotateVector(c,.5*o,!0),p=CommonUtil.RotateVector(c,.5*o,!1),f=h.add(d.mul(n)),g=h.add(p.mul(n));if(this.LineLineCrossed(h,f,s,l))return!0;if(this.LineLineCrossed(h,g,s,l))return!0;if(this.IsPointInSector(s,h,n,o,u,!1))return!0;if(this.IsPointInSector(l,h,n,o,u,!1))return!0;var _=this.GetProjectionPointToLine(h,s,l);if(_.x>=Math.min(s.x,l.x)&&_.x<=Math.max(s.x,l.x)){var m=_.sub(h);return!(m.magnitudePower2()>=n*n)&&m.normalise().dot(c)>Math.cos(.5*o/180*Math.PI)}return!1},t.IsBoxCrossedSector=function(t,e,i){void 0===i&&(i=!0);var n=CommonUtil.GetXAxisInNormalCoByAngle(t.rotation,!i);i&&(n.y*=-1);var o=CommonUtil.GetYAxisInNormalCoByAngle(t.rotation,!i);i&&(o.y*=-1);for(var r=[n,o],a=[],s=0;s<2;s++)for(var l=r[0].mul(0==s?-1:1),h=t.center.add(l.mul(.5*t.size.x)),u=0;u<2;u++){var c=r[1].mul(0==u?-1:1),d=h.add(c.mul(.5*t.size.y));a.push(d)}return!!this.IsLineCrossedInSector(a[0],a[1],e.center,e.radius,e.sectorAngle,e.rotation,i)||(!!this.IsLineCrossedInSector(a[0],a[2],e.center,e.radius,e.sectorAngle,e.rotation,i)||(!!this.IsLineCrossedInSector(a[3],a[1],e.center,e.radius,e.sectorAngle,e.rotation,i)||!!this.IsLineCrossedInSector(a[3],a[2],e.center,e.radius,e.sectorAngle,e.rotation,i)))},t.GetProjectionPointToLine=function(t,e,i){var n=t.sub(e),o=i.sub(e).normalise(),r=n.dot(o);return e.add(o.mul(r))},t.LineLineCrossed=function(t,e,i,n){var o=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/((n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y)),r=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/((n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y));return o>0&&o<1&&r>0&&r<1},t}(),GameStruct=function(){return function(){}}(),SpawnInfo=function(){return function(t,e,i,n){this.spawnID=t,this.moneyNum=e,this.createTime=i,this.spawnType=n}}(),MatchProgressInfo=function(){return function(t,e){this.Gold=0,this.MonsterLeftNum=t,this.Progress=e}}(),MonsterDieInfo=function(){return function(t,e,i,n,o){this.GoldADD=0,this.MonsterConfigID=t,this.Postion=e,this.Level=i,this.Config=n,this.CanSpawnProp=o}}(),FireRule=function(){return function(t,e,i){this.BulletNumsInRows=t,this.Interval=e,this.MaxColumnCount=this.BulletNumsInRows[0],this.MinColumnCount=this.BulletNumsInRows[this.BulletNumsInRows.length-1],this.BulletCountPerSec=i}}(),PropSpawnWeight=function(){return function(){}}(),ShareQueryData=function(){return function(){}}(),PlatformData=function(){function t(){}return Object.defineProperty(t.prototype,"OpenID",{get:function(){return this.wechatOpenID},set:function(t){this.wechatOpenID=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UserHeader",{get:function(){return this.wechatHeader},set:function(t){this.wechatHeader=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UserNickName",{get:function(){return this.wechatNickName},set:function(t){this.wechatNickName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsChanged",{get:function(){return this.IsPlatformDataChanged},set:function(t){this.IsPlatformDataChanged=t},enumerable:!0,configurable:!0}),t}(),ZOrderDefine=function(){return function(){}}();ZOrderDefine.BOTTOM_UI=0,ZOrderDefine.UI=500,ZOrderDefine.TOP_UI=1e3,ZOrderDefine.PLAYER=200,ZOrderDefine.MAINPLAYER=100,ZOrderDefine.MONEY_ANIM=9999,ZOrderDefine.VIEW_ZORDER=1,ZOrderDefine.HP_BAR_ZORDER=2;var WechatConstDefine=function(){return function(){}}();WechatConstDefine.WECHAT_APP_ID="wx0aa79fc3563eb94a",WechatConstDefine.WECHAT_APP_SECRETE="9394ce8929b579a03819399f741c0ffb",WechatConstDefine.WEITUIBAO_LOGIN_URL="http://vff8wz.natappfree.cc/myUser/getOpenId/",WechatConstDefine.WETCHAT_SHARE_CONFIG_URL="https://www.baizhoutj.com/shareconfig?app_id=",WechatConstDefine.WECHAT_SHARE_LOCAL_IMG_URL="res/texture/share_bg.png",WechatConstDefine.STORAGE_WECHAT_OPEN_ID="STORAGE_WECHAT_OPEN_ID",WechatConstDefine.STORAGE_WECHAT_IMAGE="STORAGE_WECHAT_IMAGE",WechatConstDefine.STORAGE_WECHAT_NICKNAME="STORAGE_WECHAT_NICKNAME",WechatConstDefine.LOGIN_QUERY_KEY="LOGIN_QUERY_KEY",WechatConstDefine.SHARE_ROOM_ID="SHARE_ROOM_ID",WechatConstDefine.SHARE_SCENE_ID="SHARE_SCENE_ID",WechatConstDefine.SHARE_PLAYER_ID="SHARE_PLAYER_ID",WechatConstDefine.AD_Banner_ID="adunit-40c7bc3bd57d4d23",WechatConstDefine.AD_Video_ID="adunit-28c6ef2d7d749f76",WechatConstDefine.AD_Interstitial_ID="adunit-31426e25c27c8e2a";var ResPathConst=function(){return function(){}}();ResPathConst.USE_WEB_RES=!1,ResPathConst.RES_URL_HEADER="http://118.25.217.95/RashBall/",ResPathConst.SHARE_PIC=["res/texture/share/share.jpg"],ResPathConst.PLAYER_SKIN="resources/player/planes/role_fight_weapon_01.png",ResPathConst.MONSTER_SKIN="resources/monster/role_fight_monster_01.png",ResPathConst.MISSILE_BULLET_SKIN="resources/player/planes/role_fight_weapon_bullet_01.png";var OpenDataContextKeyDefine=function(){return function(){}}();OpenDataContextKeyDefine.CURRENT_COMPLETE_LEVEL="CURRENT_COMPLETE_LEVEL",OpenDataContextKeyDefine.PLAYER_OPENID="PLAYER_OPENID";var OpenDataContextCmdDefine=function(){return function(){}}();OpenDataContextCmdDefine.OPENID="OPENID",OpenDataContextCmdDefine.BATTLEUI_OPEN="BATTLEUI_OPEN",OpenDataContextCmdDefine.BATTLEUI_CLOSE="BATTLEUI_CLOSE",OpenDataContextCmdDefine.RESULTUI_OPEN="RESULTUI_OPEN",OpenDataContextCmdDefine.RESULTUI_CLOSE="RESULTUI_CLOSE",OpenDataContextCmdDefine.LEADERBOARDUI_OPEN="LEADERBOARDUI_OPEN",OpenDataContextCmdDefine.LEADERBOARDUI_CLOSE="LEADERBOARDUI_CLOSE",OpenDataContextCmdDefine.LEADERBOARDUI_DRAG="LEADERBOARDUI_DRAG";var NotificationNames=function(){return function(){}}();NotificationNames.OPENUI="OPENUI",NotificationNames.OPENUIWITHPARAM="OPENUIWITHPARAM",NotificationNames.HIDEUI="HIDEUI",NotificationNames.HIDEALLUI="HIDEALLUI",NotificationNames.DESTROYUI="DESTROYUI",NotificationNames.DESTROYALLUI="DESTROYALLUI",NotificationNames.HomePageUI_SetInteractive="HomePageUI_SetInteractive",NotificationNames.BackgroundUI_ChangeBackground="BackgroundUI_ChangeBackground",NotificationNames.BackgroundUI_Shake="BackgroundUI_Shake",NotificationNames.BackgroundUI_HomepageEnter="BackgroundUI_HomepageEnter",NotificationNames.BackgroundUI_BattleEnter="BackgroundUI_BattleEnter",NotificationNames.BackgroundUI_BgMoveStart="BackgorundUI_BgMoveStart",NotificationNames.BackgroundUI_BgMoveEnd="BackgorundUI_BgMoveEnd",NotificationNames.BackgroundUI_StopShakeBg="BackgroundUI_StopShakeBg",NotificationNames.HomepageUI_CreateMoneySpawn="HomepageUI_CreateMoneySpawn",NotificationNames.HomepageUI_UpdateMoneySpawn="HomepageUI_UpdateMoneySpawn",NotificationNames.HomepageUI_GainMoneySpawn="HomepageUI_GainMoneySpawn",NotificationNames.HomepageUI_RemoveMoneySpawn="HomepageUI_RemoveMoneySpawn",NotificationNames.HomepageUI_SetBottomButtonState="HomepageUI_SetBottomButtonState",NotificationNames.HomepageUI_UnlockNewSideweapon="HomepageUI_UnlockNewSideweapon",NotificationNames.HomepageUI_PlaySpawnAnim="HomepageUI_PlaySpawnAnim",NotificationNames.HomepageUI_ShowText="HomepageUI_ShowText",NotificationNames.HomepageUI_HidenText="HomepageUI_HidenText",NotificationNames.ResultUI_Finish="ResultUI_Finish",NotificationNames.ResultUI_GainPower="ResultUI_GainPower",NotificationNames.UpgradeUI_RefreshMainWeaponInfo="UpgradeUI_RefreshMainWeaponInfo",NotificationNames.UpgradeUI_RefreshSideWeaponInfo="UpgradeUI_RefreshSideWeaponInfo",NotificationNames.UpgradeUI_RefreshSpawnInfo="UpgradeUI_RefreshSpawnInfo",NotificationNames.UpgradeUI_EquipSideWeapon="UpgradeUI_EquipSideWeapon",NotificationNames.UpgradeUI_RefreshWeaponEvolutionInfo="UpgradeUI_RefreshWeaponEvolutionInfo",NotificationNames.UpgradeUI_ElementTweenTo="UpgradUI_ElementTweenTo",NotificationNames.ExchangeUI_ExchangeResult="ExchangeUI_ExchangeResult",NotificationNames.InviteFriendUI_RefreshFriendListInfo="InviteFriendUI_RefreshFriendListInfo",NotificationNames.InviteFriendUI_CheckInviteListComplete="InviteFriendUI_CheckInviteListComplete",NotificationNames.InviteFriendUI_LotteryResult="InviteFriendUI_LotteryResult",NotificationNames.InviteFriendUI_RefreshLotteryNum="InviteFriendUI_RefreshLotteryNum",NotificationNames.LoadingUI_Progress="LoadingUI_Progress",NotificationNames.MoreSpawnUI_Hide="MoreSpawnUI_Hide",NotificationNames.LevelUI_PlayAnim="LevelUI_PlayAnim",NotificationNames.VerifyUI_GetMessageResult="VerifyUI_GetMessageResult",NotificationNames.VerifyUI_VerifyResult="VerifyUI_VerifyResult",NotificationNames.LotteryRewardHistUI_CheckResult="LotteryRewardHistUI_CheckResult",NotificationNames.UI_StartGame="UI_StartGame",NotificationNames.UI_RefreshMoneyInfo="UI_RefreshMoneyInfo",NotificationNames.UI_RefreshMatchProgressInfo="UI_RefreshMatchProgressInfo",NotificationNames.UI_OnMonsterKill="UI_OnMonsterKill",NotificationNames.UI_OnPropBuff="UI_OnPropBuff",NotificationNames.START_UP_INIT_COMMAND="START_UP_INIT_COMMAND",NotificationNames.CHECK_VERSION_COMMAND="CHECK_VERSION_COMMAND",NotificationNames.PRELOAD_COMMAND="PRELOAD_COMMAND",NotificationNames.GAME_INIT_COMMAND="GAME_INIT_COMMAND",NotificationNames.GET_PLATFORM_AUTH_COMMAND="GET_PLATFORM_AUTH_COMMAND",NotificationNames.INIT_PLATFORM_INFO_COMMAND="INIT_PLATFORM_INFO_COMMAND",NotificationNames.NETWORK_GAME_LOG_IN_COMMAND="NETWORK_GAME_LOG_IN_COMMAND",NotificationNames.ENTER_LOGIN_SCENE_COMMAND="ENTER_LOGIN_SCENE_COMMAND",NotificationNames.EXIT_LOGIN_SCENE_COMMAND="EXIT_LOGIN_SCENE_COMMAND",NotificationNames.SOCKET_DISCONNECTED_COMMAND="SOCKET_DISCONNECTED_COMMAND",NotificationNames.MATCH_RES_PRELOAD_COMMAND="MATCH_RES_PRELOAD_COMMAND",NotificationNames.MATCH_ENTER_COMMAND="MATCH_ENTER_COMMAND",NotificationNames.MATCH_READY="MATCH_READY",NotificationNames.MATCH_START="MATCH_START",NotificationNames.MATCH_COMPLETE="MATCH_COMPLETE",NotificationNames.MATCH_RESUME="MATCH_RESUME",NotificationNames.MATCH_EXIT_COMMAND="MATCH_EXIT_COMMAND",NotificationNames.CONTINUE_NEXT_MATCH="CONTINUE_NEXT_MATCH",NotificationNames.PAUSE_MATCH="PAUSE_MATCH",NotificationNames.CREATER_MAIN_PLAYER="CREATER_MAIN_PLAYER",NotificationNames.ON_SIDE_WEAPON_CHANGED="ON_SIDE_WEAPON_CHANGED",NotificationNames.MAIN_PLAYER_DIE="MAIN_PLAYER_DIE",NotificationNames.MAIN_PLAYER_REBORN="MAIN_PLAYER_REBORN",NotificationNames.SLOT_FORCE_OCCUPIED="SLOT_FORCE_OCCUPIED",NotificationNames.SLOT_INTERVAL_CHANGED="SLOT_INTERVAL_CHANGED",NotificationNames.CREATE_MONSTER="CREATE_MONSTER",NotificationNames.MONSTER_DIE="MONSTER_DIE",NotificationNames.MONSTER_ENLARGE="MONSTER_ENLARGE",NotificationNames.MONSTER_PAUSE="MONSTER_PAUSE",NotificationNames.HULK_COMING="HULK_COMING",NotificationNames.WeChat_VideoAd_Load_Success="WeChat_VideoAd_Load_Success",NotificationNames.WeChat_VideoAd_Load_Fail="WeChat_VideoAd_Load_Fail",NotificationNames.WeChat_VideoAd_OnClose="WeChat_VideoAd_Load_OnClose",NotificationNames.WeChat_OnKeyboardComplete="WeChat_OnKeyboardComplete",NotificationNames.WeChat_OnKeyboardConfirm="WeChat_OnKeyboardConfirm";var MediatorNames=function(){return function(){}}();MediatorNames.MAIN_PLAYER_MEDIATOR="MAIN_PLAYER_MEDIATOR",MediatorNames.MONSTER_MEDIATOR="MONSTER_MEDIATOR",MediatorNames.LEVEL_MEDIATOR="LEVEL_MEDIATOR";var EnumWechatEnterScene;!function(t){t[t.ShareFromFriend=1007]="ShareFromFriend",t[t.ShareFromGroup=1008]="ShareFromGroup",t[t.QRScan=1011]="QRScan",t[t.QRFromPic=1012]="QRFromPic",t[t.ShareFromGroupWithShareTicket=1044]="ShareFromGroupWithShareTicket",t[t.WechatDroplist=1089]="WechatDroplist"}(EnumWechatEnterScene||(EnumWechatEnterScene={}));var EnumCollisionShape;!function(t){t[t.Box=0]="Box",t[t.Circle=1]="Circle",t[t.Sector=2]="Sector"}(EnumCollisionShape||(EnumCollisionShape={}));var EnumMatchState;!function(t){t[t.Enter=0]="Enter",t[t.Start=1]="Start",t[t.Pause=2]="Pause",t[t.Complete=3]="Complete",t[t.Exit=4]="Exit"}(EnumMatchState||(EnumMatchState={}));var EnumSpawnCheckResult;!function(t){t[t.None=0]="None",t[t.SpawnCurGroup=1]="SpawnCurGroup",t[t.SpawnNextGroup=2]="SpawnNextGroup"}(EnumSpawnCheckResult||(EnumSpawnCheckResult={}));var EnumDiamondExchangeType;!function(t){t[t.Coin=1]="Coin",t[t.Power=2]="Power"}(EnumDiamondExchangeType||(EnumDiamondExchangeType={}));var EnumWeaopnUpgradeType;!function(t){t[t.Speed=1]="Speed",t[t.Intensity=2]="Intensity"}(EnumWeaopnUpgradeType||(EnumWeaopnUpgradeType={}));var EnumMoneyType;!function(t){t[t.Coin=1]="Coin",t[t.Diamond=2]="Diamond"}(EnumMoneyType||(EnumMoneyType={}));var EnumNumberTally;!function(t){t[t.None=0]="None",t[t.K=1]="K",t[t.M=2]="M",t[t.G=3]="G",t[t.T=4]="T",t[t.P=5]="P",t[t.E=6]="E",t[t.Z=7]="Z",t[t.Y=8]="Y",t[t.B=9]="B",t[t.N=10]="N",t[t.D=11]="D"}(EnumNumberTally||(EnumNumberTally={}));var EnumSpineConfigID;!function(t){t[t.SkillMissileExplode=2]="SkillMissileExplode",t[t.Laser=3]="Laser",t[t.Guard=4]="Guard",t[t.MagnetDisturb=5]="MagnetDisturb",t[t.MagnetDisturbPrepare=6]="MagnetDisturbPrepare",t[t.ElectricNet=7]="ElectricNet",t[t.MonsterHealSelf=8]="MonsterHealSelf",t[t.MonsterHealOther=9]="MonsterHealOther",t[t.MonsterPrepareExplosion=10]="MonsterPrepareExplosion",t[t.MonsterExplosion=11]="MonsterExplosion"}(EnumSpineConfigID||(EnumSpineConfigID={}));var EnumSideWeaponType;!function(t){t[t.Missile=2]="Missile",t[t.Laser=3]="Laser",t[t.Guard=4]="Guard",t[t.MagnetDisturb=5]="MagnetDisturb",t[t.ChildPlane=6]="ChildPlane",t[t.ElectricNet=7]="ElectricNet"}(EnumSideWeaponType||(EnumSideWeaponType={}));var EnumPlayerState;!function(t){t[t.Live=0]="Live",t[t.Die=1]="Die"}(EnumPlayerState||(EnumPlayerState={}));var EnumBulletOutLookType;!function(t){t[t.None=0]="None",t[t.MainPlayerBullet=1]="MainPlayerBullet",t[t.MonsterBullet=2]="MonsterBullet",t[t.ChildPlaneBullet=3]="ChildPlaneBullet",t[t.MainPlayerBullet_PowerBuff=4]="MainPlayerBullet_PowerBuff",t[t.MainPlayerBullet_FightBackBuff=5]="MainPlayerBullet_FightBackBuff",t[t.MainPlayerBullet_GoldBuffs=6]="MainPlayerBullet_GoldBuffs",t[t.MISSILE_WEAPON_BULLET=7]="MISSILE_WEAPON_BULLET"}(EnumBulletOutLookType||(EnumBulletOutLookType={}));var EnumBuffType;!function(t){t[t.FireSpeedIntensified=1]="FireSpeedIntensified",t[t.PowerIntensified=2]="PowerIntensified",t[t.CallAlliance=3]="CallAlliance",t[t.FightBack=4]="FightBack",t[t.Weaken=5]="Weaken",t[t.BulletThrough=6]="BulletThrough",t[t.Gold=7]="Gold",t[t.Enlarge=8]="Enlarge",t[t.LimitInput=9]="LimitInput",t[t.MagnetFreezen=10]="MagnetFreezen"}(EnumBuffType||(EnumBuffType={}));var EnumPropType;!function(t){t[t.FireSpeedIntensified=1]="FireSpeedIntensified",t[t.PowerIntensified=2]="PowerIntensified",t[t.CallAlliance=3]="CallAlliance",t[t.FightBack=4]="FightBack",t[t.Weaken=5]="Weaken",t[t.BulletThrough=6]="BulletThrough",t[t.Gold=7]="Gold",t[t.Enlarge=8]="Enlarge",t[t.LimitInput=9]="LimitInput"}(EnumPropType||(EnumPropType={}));var EnumMonsterPowerType;!function(t){t[t.ScaleUp=1]="ScaleUp",t[t.Healing=2]="Healing",t[t.Explosion=3]="Explosion",t[t.Split=4]="Split",t[t.Attach=5]="Attach",t[t.Spawn=6]="Spawn",t[t.FollowPlayer=7]="FollowPlayer",t[t.Attack=8]="Attack"}(EnumMonsterPowerType||(EnumMonsterPowerType={}));var EnumSoundID;!function(t){t[t.sound_bg_bg_01=1]="sound_bg_bg_01",t[t.sound_fight_bullet_01=2]="sound_fight_bullet_01",t[t.sound_fight_bullet_crash=3]="sound_fight_bullet_crash",t[t.sound_fight_bullet_02=4]="sound_fight_bullet_02",t[t.sound_fight_bullet_03=5]="sound_fight_bullet_03",t[t.sound_fight_bullet_04=6]="sound_fight_bullet_04",t[t.sound_fight_buff_01=7]="sound_fight_buff_01",t[t.sound_fight_buff_02=8]="sound_fight_buff_02",t[t.sound_fight_monster_gold=9]="sound_fight_monster_gold",t[t.sound_fight_monster_01=10]="sound_fight_monster_01",t[t.sound_fight_warcraft_boom=11]="sound_fight_warcraft_boom",t[t.sound_fight_hint_01=12]="sound_fight_hint_01",t[t.sound_fight_hint_02=13]="sound_fight_hint_02",t[t.sound_fight_succeed=14]="sound_fight_succeed",t[t.sound_fight_ten_award=15]="sound_fight_ten_award",t[t.sound_fight_guided_01=16]="sound_fight_guided_01",t[t.sound_fight_guided_02=17]="sound_fight_guided_02",t[t.sound_fight_laser=18]="sound_fight_laser",t[t.sound_fight_bounce=19]="sound_fight_bounce",t[t.sound_fight_warship=20]="sound_fight_warship",t[t.sound_fight_netting=21]="sound_fight_netting",t[t.sound_function_touch_01=22]="sound_function_touch_01",t[t.sound_function_touch_02=23]="sound_function_touch_02",t[t.sound_function_touch_03=24]="sound_function_touch_03",t[t.sound_function_gold_01=25]="sound_function_gold_01",t[t.sound_function_upgrade_01=26]="sound_function_upgrade_01",t[t.sound_function_diamonds_01=27]="sound_function_diamonds_01",t[t.sound_function_energy_01=28]="sound_function_energy_01",t[t.bg_hall_bgm=29]="bg_hall_bgm",t[t.bg_fight1=30]="bg_fight1",t[t.bg_fight2=31]="bg_fight2",t[t.bg_bossfight=32]="bg_bossfight",t[t.sound_fight_defeat=32]="sound_fight_defeat",t[t.sound_function_numberup=33]="sound_function_numberup",t[t.sound_function_planepass=34]="sound_function_planepass"}(EnumSoundID||(EnumSoundID={}));var EnumBuffEffectType;!function(t){t[t.Buff=1]="Buff",t[t.Debuff=2]="Debuff"}(EnumBuffEffectType||(EnumBuffEffectType={}));var EnumFormulaType;!function(t){t[t.MonsterBlood=1]="MonsterBlood",t[t.MonsterGold=2]="MonsterGold",t[t.GoldUpgrade=3]="GoldUpgrade",t[t.DiamondUpgrade=4]="DiamondUpgrade",t[t.MainWeaponUpgradeCost=5]="MainWeaponUpgradeCost",t[t.MainWeaponBulletPower=6]="MainWeaponBulletPower",t[t.SideWeaponUpgradeCost1=7]="SideWeaponUpgradeCost1",t[t.SideWeaponUpgradeCost2=8]="SideWeaponUpgradeCost2",t[t.SideWeaponUpgradeCost3=9]="SideWeaponUpgradeCost3",t[t.SideWeaponUpgradeCost4=10]="SideWeaponUpgradeCost4",t[t.SideWeaponUpgradeCost5=11]="SideWeaponUpgradeCost5",t[t.SideWeaponUpgradeCost6=12]="SideWeaponUpgradeCost6",t[t.SideWeaponBulletPower1=13]="SideWeaponBulletPower1",t[t.SideWeaponBulletPower2=14]="SideWeaponBulletPower2",t[t.SideWeaponBulletPower3=15]="SideWeaponBulletPower3",t[t.SideWeaponBulletPower4=16]="SideWeaponBulletPower4",t[t.SideWeaponBulletPower5=17]="SideWeaponBulletPower5",t[t.SideWeaponBulletPower6=18]="SideWeaponBulletPower6",t[t.MonsterTotalLevel=19]="MonsterTotalLevel",t[t.MonsterTotalLevel2=20]="MonsterTotalLevel2",t[t.MonsterTotalLevel3=21]="MonsterTotalLevel3",t[t.MonsterTotalLevel4=22]="MonsterTotalLevel4",t[t.MonsterTotalLevel5=23]="MonsterTotalLevel5",t[t.MonsterTotalLevel6=24]="MonsterTotalLevel6",t[t.MonsterScale=25]="MonsterScale",t[t.SpawnUpgradeCost=26]="SpawnUpgradeCost"}(EnumFormulaType||(EnumFormulaType={}));var EnumLevelUIAnimType;!function(t){t[t.HomePage=1]="HomePage",t[t.Battle=2]="Battle",t[t.Result_Win=3]="Result_Win",t[t.Result_Lose=4]="Result_Lose"}(EnumLevelUIAnimType||(EnumLevelUIAnimType={}));var EnumCompleteType;!function(t){t[t.None=0]="None",t[t.Continue=1]="Continue",t[t.Finish=2]="Finish",t[t.Lucky=3]="Lucky",t[t.Replay=4]="Replay"}(EnumCompleteType||(EnumCompleteType={}));var EnumUpgradeUIType;!function(t){t[t.Main=0]="Main",t[t.Sub=1]="Sub",t[t.Money=2]="Money"}(EnumUpgradeUIType||(EnumUpgradeUIType={}));var EnumConstConfigType;!function(t){t[t.Common_PanelScaleUpTime=0]="Common_PanelScaleUpTime",t[t.UpgradeUI_MainWeapon_ArrowAppearTime=1]="UpgradeUI_MainWeapon_ArrowAppearTime",t[t.UpgradeUI_MainWeapon_RightBoxAppearTime=2]="UpgradeUI_MainWeapon_RightBoxAppearTime",t[t.UpgradeUI_MainWeapon_EvolutionPauseTime=3]="UpgradeUI_MainWeapon_EvolutionPauseTime",t[t.UpgradeUI_MainWeapon_EvolutionEndTime=4]="UpgradeUI_MainWeapon_EvolutionEndTime",t[t.UpgradeUI_SubWeapon_SwitchTime=5]="UpgradeUI_SubWeapon_SwitchTime",t[t.UpgradeUI_MainWeapon_BulletMaxNum=6]="UpgradeUI_MainWeapon_BulletMaxNum",t[t.Common_PanelScaleBounceTime=7]="Common_PanelScaleBounceTime",t[t.Common_PanelScaleUpMax=8]="Common_PanelScaleUpMax",t[t.HomepageUI_Spawn_RefreshIntervalTime=9]="HomepageUI_Spawn_RefreshIntervalTime",t[t.HomepageUI_Spawn_OverTime=10]="HomepageUI_Spawn_OverTime",t[t.UpgradeUI_UpgradeEffectTime_Left=11]="UpgradeUI_UpgradeEffectTime_Left",t[t.UpgradeUI_UpgradeEffectTime_Right=12]="UpgradeUI_UpgradeEffectTime_Right",t[t.Plane_Homepage_Scale=13]="Plane_Homepage_Scale"}(EnumConstConfigType||(EnumConstConfigType={}));var ConstDefine=function(){function t(){}return t.setScreenHeight=function(){this.screenHeigth=Laya.Browser.clientHeight/Laya.Browser.clientWidth*1080},Object.defineProperty(t,"Common_PanelScaleUpTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.Common_PanelScaleUpTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_MainWeapon_ArrowAppearTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_MainWeapon_ArrowAppearTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_MainWeapon_RightBoxAppearTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_MainWeapon_RightBoxAppearTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_MainWeapon_EvolutionPauseTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_MainWeapon_EvolutionPauseTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_MainWeapon_EvolutionEndTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_MainWeapon_EvolutionEndTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_SubWeapon_SwitchTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_SubWeapon_SwitchTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_MainWeapon_BulletMaxNum",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_MainWeapon_BulletMaxNum);return parseInt(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Common_PanelScaleBounceTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.Common_PanelScaleBounceTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Common_PanelScaleUpMax",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.Common_PanelScaleUpMax);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SpawnTime_Coin",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.HomepageUI_Spawn_RefreshIntervalTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SpawnTime_OverTime",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.HomepageUI_Spawn_OverTime);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_UpgradeEffectTime_Left",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_UpgradeEffectTime_Left);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UpgradeUI_UpgradeEffectTime_Right",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.UpgradeUI_UpgradeEffectTime_Right);return parseFloat(t.const)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Plane_Homepage_Scale",{get:function(){var t=ConfigManager.GetInstance().GetConstConfig(EnumConstConfigType.Plane_Homepage_Scale);return parseFloat(t.const)},enumerable:!0,configurable:!0}),t}();ConstDefine.SPAWN_MONSTER_NUM=1,ConstDefine.SPAWN_BULLET_NUM_PER_SECOND=100,ConstDefine.SWITCH_INPUT=!0,ConstDefine.PLAYER_INFO_STORE_IN_LOCAL=!1,ConstDefine.USING_2D_ENGINE=!0,ConstDefine.HTTP_LOGIN=!0,ConstDefine.HTTP_LOGIN_SERVER=window.HTTP_LOGIN_SERVER?window.HTTP_LOGIN_SERVER:"http://mw6nzh.natappfree.cc/myUser/interface/",ConstDefine.WS_LOGIN_SERVER="",ConstDefine.HTTP_OFFLINE="local",ConstDefine.HTTP_OFFLINE_OPEN_ID="HTTP_OFFLINE_OPEN_ID",ConstDefine.OFFLINE_PLAYER_ID=1e8,ConstDefine.STORAGE_SETTINGS_MUSIC="STORAGE_SETTINGS_MUSIC",ConstDefine.STORAGE_SETTINGS_SOUND="STORAGE_SETTINGS_SOUND",ConstDefine.STORAGE_SETTINGS_VIBRATE="STORATE_SETTINGS_VIBRATE",ConstDefine.STORAGE_RESULT_LUCKY_CHANCE="STORAGE_RESULT_LUCKY_CHANCE",ConstDefine.STORAGE_RESULT_LUCKY_NUM="STORAGE_RESULT_LUCKY_NUM",ConstDefine.STORAGE_RESULT_LUCKY_TIME="STORAGE_RESULT_LUCKY_TIME",ConstDefine.STORAGE_MORE_SPAWN_CHANCE="STORAGE_MORE_SPAWN_CHANCE",ConstDefine.STORAGE_REBORN_NUM="STORAGE_REBORN_NUM",ConstDefine.STORAGE_REBORN_DATE="STORAGE_REBORN_DATE",ConstDefine.STORAGE_LEVEL_TEMPLATE_ID="STORAGE_LEVEL_TEMPLATE_ID",ConstDefine.STORAGE_SPAWN_MONEYNUM="STORAGE_SPAWN_MONEYNUM",ConstDefine.STORAGE_SPAWN_UPDATETIME="STORAGE_SPAWN_UPDATETIME",ConstDefine.STORAGE_UNLOCK_NEW_SIDEWEAPON="STORAGE_UNLOCK_NEW_SIDEWEAPON",ConstDefine.STORAGE_LAST_MESSAGEVERIFYTIME="STORAGE_LAST_MESSAGEVERIFYTIME",ConstDefine.STORAGE_LAST_REBORN_LEVLE="STORAGE_LAST_REBORN_LEVLE",ConstDefine.DEFAULT_USER_HEADER_URL="res/texture/share/icon.png",ConstDefine.DEFAULT_USER_NICKNAME="DefaultName",ConstDefine.CHILD_PLANE_CONFIG_ID=8,ConstDefine.PROP_PROBABILITY=.1,ConstDefine.FIGHTBACK_BUFF_OFFSET=10,ConstDefine.ENLARGE_BUFF_SCALE=3,ConstDefine.MAIN_PLAYRE_CONFIG_ID=0,ConstDefine.GOLD_BUFF_REWARD_SCALE=-1,ConstDefine.MoneyImgPos_Coin_Battle={x:217,y:341},ConstDefine.MoneyImgPos_Coin={x:196,y:128+WechatUtil.getIntance().WechatTop()},ConstDefine.MoneyImgPos_Power={x:460,y:128+WechatUtil.getIntance().WechatTop()},ConstDefine.MoneyImgPos_Diamond={x:745,y:128+WechatUtil.getIntance().WechatTop()},ConstDefine.Audio_Music_Volume=.45,ConstDefine.Audio_Sound_Volume=1,ConstDefine.IconSkin_Coin="resources/moneyinfo/img_icon_coin.png",ConstDefine.IconSkin_Diamond="resources/moneyinfo/img_icon_diamond.png",ConstDefine.IconSkin_Power="resources/moneyinfo/img_icon_power.png",ConstDefine.IconSkin_Lottery="resources/moneyinfo/img_icon_lottery.png",ConstDefine.bgSpeed=3,ConstDefine.FLY_ANI_SPEED=1,ConstDefine.UI_CHANGE_SEEPD_GROW=1,ConstDefine.UI_CHANGE_SEEPD_MAX=1,ConstDefine.MaxValue_Power=100,ConstDefine.PowerReviewTime=300,ConstDefine.SpawnTime_Diamond=3600,ConstDefine.MaxValue_Reborn=1,ConstDefine.MaxValue_ResultLucky=10,ConstDefine.URL_MODE_FOR_TEST=!1,ConstDefine.URL_MODE_KEY_Player_OpenId="openId",ConstDefine.URL_MODE_KEY_Inviter_OpenId="inviter",ConstDefine.URL_MODE_KEY_LOGIN_URL="loginServer",ConstDefine.HP_BAR_DURATION=10,ConstDefine.REBORN_DURATION=4,ConstDefine.TAIL_ANIM_INTERVAL=1/15*1e3,ConstDefine.USE_MODIFY=!0,ConstDefine.HIT_FX_PLAY_INTERVAL=.2,ConstDefine.TEST_EFFICIENCY=!1,ConstDefine.BULLET_PER_SEC=100,ConstDefine.COLLISION_CHECK=!0,ConstDefine.INPUT_SWITCH=!0,ConstDefine.PLAYER_COLLISION=!0;var MainWeaponEvloveConfig=function(){return function(){}}(),HttpShareConfig=function(){function t(){}return t.prototype.InitDefault=function(){this.Copyright_registration_number="",this.showShareButton=!1,t.SetDefaultShareList(this)},t.SetDefaultShareList=function(t){t.ShareList=[new ShareContent("消灭那些虫子！",ResPathConst.SHARE_PIC[0])]},t}(),ShareContent=function(){return function(t,e){this.ShareImg=e,this.ShareTitle=t}}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CheckVersionControlCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("2. laya version control"),TimeWatch.Start(),this.enableResourceVersionControl()},e.prototype.enableResourceVersionControl=function(){Laya.ResourceVersion.enable("version.json",Handler.create(this,this.versionLoaded),Laya.ResourceVersion.FILENAME_VERSION)},e.prototype.versionLoaded=function(){this.next()},e.prototype.next=function(){TimeWatch.Stop("check version ok"),this.facade.registerCommand(NotificationNames.PRELOAD_COMMAND,PreloadCommand),this.facade.sendNotification(NotificationNames.PRELOAD_COMMAND)},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GameInitCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("4. Game Init"),TimeWatch.Start(),GameDataManager.getInstance().init(),this.initTimerManager(),this.initCommands(),this.initGameSettings(),this.initDebugMode(),this.next()},e.prototype.initTimerManager=function(){Laya.timer.frameLoop(1,null,function(){TimeManager.getInst().update(.001*Laya.timer.delta)})},e.prototype.initCommands=function(){Facade.instance.registerCommand(NotificationNames.ENTER_LOGIN_SCENE_COMMAND,LoginSceneEnterCommand),Facade.instance.registerCommand(NotificationNames.EXIT_LOGIN_SCENE_COMMAND,LoginSceneExitCommand),Facade.instance.registerCommand(NotificationNames.MATCH_RES_PRELOAD_COMMAND,MatchResPreloadCommand),Facade.instance.registerCommand(NotificationNames.MATCH_ENTER_COMMAND,MatchEnterCommand),Facade.instance.registerCommand(NotificationNames.MATCH_EXIT_COMMAND,MatchExitCommand)},e.prototype.initGameSettings=function(){AudioManager.GetInstance().InitAudioSetting()},e.prototype.initDebugMode=function(){CommonUtil.OnMiniGame()},e.prototype.next=function(){var t=this;TimeWatch.Stop("gameinit ok"),this.facade.registerCommand(NotificationNames.INIT_PLATFORM_INFO_COMMAND,InitPlatfromInfoCommand),WechatFuncManager.Instance.CheckUserInfoAuth(function(e){e||!CommonUtil.OnMiniGame()?Facade.getInstance().sendNotification(NotificationNames.INIT_PLATFORM_INFO_COMMAND,!0):(t.facade.registerCommand(NotificationNames.GET_PLATFORM_AUTH_COMMAND,PlatformAuthSceneCommand),Facade.getInstance().sendNotification(NotificationNames.GET_PLATFORM_AUTH_COMMAND))})},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},InitPlatfromInfoCommand=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wechatStepCount=0,e}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("5. InitPlatfromInfoCommand 已经获取授权, 开始获取平台信息"),TimeWatch.Start();t.getBody();this.wechatStepCount=0,this.initHttpConnection(),WechatFuncManager.Instance.GetUserInfo(this.onGetUserInfoSuccess.bind(this),this.onGetuserInfoFail.bind(this)),WechatFuncManager.Instance.GetWechatOpenID(this.OnGetOpenIDByProto.bind(this))},e.prototype.OnGetPlatformInfoCompleted=function(){WechatFuncManager.Instance.GetWechatShareInfo(this.OnGetShareConfigInfo.bind(this))},e.prototype.next=function(){TimeWatch.Stop("init platform Info ok"),this.facade.registerCommand(NotificationNames.NETWORK_GAME_LOG_IN_COMMAND,NetworkGameLoginCommand),this.facade.sendNotification(NotificationNames.NETWORK_GAME_LOG_IN_COMMAND)},e.prototype.initHttpConnection=function(){HttpNetworkManager.GetInstance().Init(ConstDefine.HTTP_LOGIN_SERVER,new MessageHandler),HttpMessageSender.GetInstance().InitMessageSender(ConstDefine.PLAYER_INFO_STORE_IN_LOCAL?new HttpDummyMessageSender:new HttpProtoMessageSender)},e.prototype.onGetUserInfoSuccess=function(t){this.wechatStepCount+=1;var e=t.nickName,i=t.avatarUrl;t.gender,t.province,t.city,t.country;Log.Debug("获取微信头像: nickname "+e+" url:"+i),GameDataManager.getInstance().PlatformData.UserHeader=t.avatarUrl,GameDataManager.getInstance().PlatformData.UserNickName=t.nickName,this.CheckWechatInfoComplete()},e.prototype.onGetuserInfoFail=function(t){this.wechatStepCount+=1,Log.Warn("获取微信头像信息错误, get user info error:"+t),GameDataManager.getInstance().PlatformData.UserHeader=null,GameDataManager.getInstance().PlatformData.UserNickName=null,this.CheckWechatInfoComplete()},e.prototype.OnGetOpenID=function(t){if(this.wechatStepCount+=1,Log.Debug(t?"获取到openId"+t:"获取openid为空"),!t)if(CommonUtil.OnMiniGame())t=(new Date).getTime()+"_"+Math.random(),Log.Debug("微信上获取openid失败, 使用随机openid:"+t);else{if(ConstDefine.URL_MODE_FOR_TEST){var e=CommonUtil.GetRequest()[ConstDefine.URL_MODE_KEY_Player_OpenId];e&&StorageManager.SetOpenID(e)}(t=StorageManager.GetOpenID())||(t="pc6"+Math.random(),StorageManager.SetOpenID(t)),Log.Debug("pc上测试, 使用固定openid:"+t)}GameDataManager.getInstance().PlatformData.OpenID=t,CommonUtil.OnMiniGame()&&WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.OPENID,openid:t}),this.CheckWechatInfoComplete()},e.prototype.OnGetOpenIDByProto=function(){this.wechatStepCount+=1;var t=GameDataManager.getInstance().protoOpenId;if(Log.Debug(t?"获取到openId"+t:"获取openid为空"),!t)if(CommonUtil.OnMiniGame())t=(new Date).getTime()+"_"+Math.random(),Log.Debug("微信上获取openid失败, 使用随机openid:"+t);else{if(ConstDefine.URL_MODE_FOR_TEST){var e=CommonUtil.GetRequest()[ConstDefine.URL_MODE_KEY_Player_OpenId];e&&StorageManager.SetOpenID(e)}(t=StorageManager.GetOpenID())||(t="pc6"+Math.random(),StorageManager.SetOpenID(t)),Log.Debug("pc上测试, 使用固定openid:"+t)}GameDataManager.getInstance().PlatformData.OpenID=t,GameDataManager.getInstance().protoOpenId=null,CommonUtil.OnMiniGame()&&WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.OPENID,openid:t}),this.CheckWechatInfoComplete()},e.prototype.CheckWechatInfoComplete=function(){if(2==this.wechatStepCount){TimeWatch.Stop("get openid and head info"),Log.Debug("获取到openid和头像信息, 发送登录信息"),TimeWatch.Start();var t=GameDataManager.getInstance().PlatformData.UserHeader,e=GameDataManager.getInstance().PlatformData.UserNickName;t=t||ConstDefine.DEFAULT_USER_HEADER_URL,e=e||ConstDefine.DEFAULT_USER_NICKNAME,GameDataManager.getInstance().PlatformData.UserHeader=t,GameDataManager.getInstance().PlatformData.UserNickName=e,GameDataManager.getInstance().PlatformData.IsChanged=this.CheckWechatInfoChanged(t,e),this.OnGetPlatformInfoCompleted()}},e.prototype.CheckWechatInfoChanged=function(t,e){var i=WechatFuncManager.Instance.RecordNickName(e),n=WechatFuncManager.Instance.RecordWechatImage(t);return Log.Debug("nickname "+(i?"正":"不")+"需要更新:"+e),Log.Debug("头像 "+(n?"正":"不")+"需要更新:需要更新:"+n),i||n},e.prototype.OnGetShareConfigInfo=function(t,e){TimeWatch.Stop("get share config"),TimeWatch.Start(),this.next()},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoginSceneEnterCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){var i=this;t.getBody();Log.Debug("COMMAND: enter login scene"),e.InScene=!0,this.DailyCheck(),this.initSceneMeditar(),this.sendNotification(NotificationNames.OPENUIWITHPARAM,new ui.UIParamStruct(ui.UIID.BackgroundUIID,function(){i.sendNotification(NotificationNames.BackgroundUI_ChangeBackground),i.sendNotification(NotificationNames.OPENUIWITHPARAM,new ui.UIParamStruct(ui.UIID.HomePageUIID,function(){i.sendNotification(NotificationNames.HomePageUI_SetInteractive),i.sendNotification(NotificationNames.OPENUI,ui.UIID.MoneyInfoUIID),i.sendNotification(NotificationNames.OPENUI,ui.UIID.LevelUIID)}))})),e.BeenEntered||(e.BeenEntered=!0,this.firstLoginCheck()),Facade.getInstance().sendNotification(NotificationNames.HIDEUI,ui.UIID.LoadingUIID)},e.prototype.initSceneMeditar=function(){this.facade.registerMediator(new MainPlayerMediator(MediatorNames.MAIN_PLAYER_MEDIATOR)),this.facade.registerMediator(new MonsterMediator(MediatorNames.MONSTER_MEDIATOR))},e.prototype.firstLoginCheck=function(){if(ConstDefine.URL_MODE_FOR_TEST){var t=CommonUtil.GetRequest()[ConstDefine.URL_MODE_KEY_Inviter_OpenId];if(t)return Log.Debug("LoginSceneEnterCommand 测试，URL传入他人OpenID:",t),void HttpMessageSender.GetSender().SendInvitedByFriend(GameDataManager.getInstance().LoginPlayerInfo.OpenID,t)}GameDataManager.ShareQueryData.LoginQuery&&(Log.Debug("LoginSceneEnterCommand 点击他人链接进入！"),HttpMessageSender.GetSender().SendInvitedByFriend(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.ShareQueryData.LoginQuery))},e.prototype.DailyCheck=function(){var t=new Date,e=StorageManager.GetLastResultLuckyDate();GameDataUtil.IsSameDate(e,t)||StorageManager.SetResultLuckyNum(ConstDefine.MaxValue_ResultLucky)},e}(puremvc.SimpleCommand);LoginSceneEnterCommand.BeenEntered=!1,LoginSceneEnterCommand.InScene=!1;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoginSceneExitCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("COMMAND: exit login scene"),LoginSceneEnterCommand.InScene=!1},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MatchEnterCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("进入比赛前检测是否需要下载资源"),TimeWatch.Start();var e=t.getBody(),i=ConfigManager.GetInstance().GetMaxLevelID();GameDataManager.getInstance().LoginPlayerInfo.CurLevel;e>i&&(Log.Warn("关卡id越界, 最大关卡%i, 进入关卡%i",i,e),e=i,GameDataManager.getInstance().LoginPlayerInfo.CurLevel=e),this.checkDownloadRes(e)},e.prototype.checkDownloadRes=function(t){this.enter(t)},e.prototype.enter=function(t){TimeWatch.Stop("比赛初始化"),TimeWatch.Start(),this.sendNotification(NotificationNames.HIDEUI,ui.UIID.HomePageUIID),this.sendNotification(NotificationNames.DESTROYUI,ui.UIID.MoneyInfoUIID),this.facade.registerMediator(new LevelMediator(MediatorNames.LEVEL_MEDIATOR)),GameDataManager.getInstance().OnMathEnter();var e=MonsterSpawnLogic.Instance.GetSpawnData(t);GameDataManager.getInstance().LevelInfo.LevelSpawnDatas=e,ConstDefine.USE_MODIFY||MatchSpineManager.Instance.InitBeforeMatch(t,e,this.onSpineLoaded.bind(this)),this.sendNotification(NotificationNames.OPENUI,ui.UIID.BattleUIID),BulletManager.GetInstance().initManager();var i=CommonUtil.LoopEnum(EnumBulletOutLookType);BulletManager.GetInstance().InitBulletPool(i);var n=CommonUtil.LoopEnum(EnumPropType);PropManager.GetInstance().InitPropPool(n),PlayerManager.GetInstance().MainPlayer.OnEnterMatch(),StorageManager.SetRebornNum(ConstDefine.MaxValue_Reborn),ConstDefine.USE_MODIFY&&this.onSpineLoaded()},e.prototype.onSpineLoaded=function(){TimeWatch.Stop("比赛Spine加载完成, 初始化怪物"),TimeWatch.Start(),PlayerManager.GetInstance().initManager(),PlayerManager.GetInstance().InitMonsterPool(GameDataManager.getInstance().LevelInfo.LevelSpawnDatas.MonsterIDList),TimeWatch.Stop("比赛初始化完成"),this.sendNotification(NotificationNames.MATCH_READY)},e}(puremvc.SimpleCommand),MatchExitCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("退出比赛");!!t.getBody()&&t.getBody();PlayerManager.GetInstance().Destory(),BulletManager.GetInstance().Destory(),PropManager.GetInstance().Destory(),ConstDefine.USE_MODIFY||MatchSpineManager.Instance.DestroyOnExitMatch(),GameDataManager.getInstance().OnMatchExit(),this.facade.removeMediator(MediatorNames.LEVEL_MEDIATOR),PlayerManager.GetInstance().MainPlayer.OnExitMathch(),this.sendNotification(NotificationNames.HIDEUI,ui.UIID.BattleUIID),this.sendNotification(NotificationNames.HIDEUI,ui.UIID.ResultUIID),this.sendNotification(NotificationNames.OPENUI,ui.UIID.HomePageUIID)},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MatchResPreloadCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){e.IsInited=!0;var i=t.getBody(),n=i.cb,o=i.progress;PoolManger.GetInstance().Create3DPoolsByURLs([],function(){TimeManager.getInst().once(0,cbhandler.gen_handler(function(){n&&n()}))},function(t){o&&o(t)})},e}(puremvc.SimpleCommand);MatchResPreloadCommand.IsInited=!1;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},NetworkGameLoginCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("6. NetworkGameLoginCommand 网络游戏登录"),TimeWatch.Start(),ConstDefine.HTTP_LOGIN?this.initHttpConnection():this.initWebsocketConnection()},e.prototype.initHttpConnection=function(){if(ConstDefine.URL_MODE_FOR_TEST){var t=CommonUtil.GetRequest()[ConstDefine.URL_MODE_KEY_LOGIN_URL];t&&(ConstDefine.HTTP_LOGIN_SERVER=t)}HttpNetworkManager.GetInstance().Init(ConstDefine.HTTP_LOGIN_SERVER,new MessageHandler),this.OnHttpInited(!0,"")},e.prototype.initWebsocketConnection=function(){WebsocketNetworkManager.GetInstance().Init(ConstDefine.WS_LOGIN_SERVER,new MessageHandler),WebsocketNetworkManager.GetInstance().Connect(this.OnWebSocketInited.bind(this))},e.prototype.OnWebSocketInited=function(t,e){t?(Log.Debug("连接websock成功"),WebsocketMessageSender.GetInstance().InitMessageSender(new SocketMessageSender),NetworkHeartBeat.GetInstance().Init()):Log.Debug("连接websock 失败"+e),this.OnConnectionInited()},e.prototype.OnHttpInited=function(t,e){HttpMessageSender.GetInstance().InitMessageSender(ConstDefine.PLAYER_INFO_STORE_IN_LOCAL?new HttpDummyMessageSender:new HttpProtoMessageSender),this.OnConnectionInited()},e.prototype.OnConnectionInited=function(){var t=this;Log.Debug("进行网络服务器登录:");var e=GameDataManager.getInstance().PlatformData,i=e.OpenID,n=e.UserHeader,o=e.UserNickName;ConstDefine.HTTP_LOGIN?HttpMessageSender.GetSender().SendLogin(i,n,o,function(){Log.Debug("http 登录成功 suceed openid",i,"imageUrl",n,"nickname",o)},function(i){Log.Debug("http 登录失败 error:"+i),t.onLoginError(e)}):WebsocketMessageSender.GetSender().SendLogin(i,n,o)},e.prototype.onLoginError=function(t){Log.Warn("登录服务器失败, 使用单机游戏模式 %s",ConstDefine.HTTP_LOGIN_SERVER),HttpMessageSender.GetInstance().InitMessageSender(new HttpDummyMessageSender),this.OnConnectionInited()},e.prototype.next=function(){this.facade.sendNotification(NotificationNames.ENTER_LOGIN_SCENE_COMMAND,!0)},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PlatformAuthSceneCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){Log.Debug("enter auth scene");var e=WechatUtil.getIntance().GetSystemInfoSync();Log.Debug("width: "+Laya.stage.width+" "+Laya.Browser.width+" "+e.windowWidth),Log.Debug("height: "+Laya.stage.height+" "+Laya.Browser.height+" "+e.windowHeight),Log.Debug("ration:"+e.pixelRatio+" "+Laya.Browser.pixelRatio);var i=Laya.Browser.width/Laya.Browser.pixelRatio,n=Laya.Browser.height/Laya.Browser.pixelRatio,o=351/Laya.stage.width*i,r=366/Laya.stage.height*n,a={type:"image",image:"res/texture/btn_auth.png",style:{left:.5*i-.5*o,top:.5*n-.5*r,width:o,height:r,backgroundColor:"#ff0000",color:"#ffffff",borderRadius:4}};WechatFuncManager.Instance.UserInfoAuth(a,this.onSuccess.bind(this),this.onCancel.bind(this))},e.prototype.onSuccess=function(t){Log.Debug("获取用户授权成功"),Facade.getInstance().sendNotification(NotificationNames.INIT_PLATFORM_INFO_COMMAND,!0)},e.prototype.onCancel=function(t){Log.Debug("用户取消授权"),Facade.getInstance().sendNotification(NotificationNames.INIT_PLATFORM_INFO_COMMAND,!1)},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PreloadCommand=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.step=0,e}return __extends(e,t),e.prototype.execute=function(e){var i=this;Log.Debug("3. preload"),TimeWatch.Start(),t.prototype.execute.call(this,e),ui.UIMediator.GetInstance().Init(function(){var t=[];ConfigManager.GetInstance().getConfig(t),ResourceManager.GetInstance().loadResArray(t,function(){return i.onConfigLoaded()},t[0].type)})},e.prototype.onConfigLoaded=function(){Log.Debug("on config loade"),this.initConfiguration(),ConstDefine.USE_MODIFY?this.sendNotification(NotificationNames.OPENUIWITHPARAM,new ui.UIParamStruct(ui.UIID.LoadingUIID,this.onLoadingUIOpend.bind(this))):this.onLoadingUIOpend()},e.prototype.onLoadingUIOpend=function(){var t=0,e=[];ui.UIMediator.GetInstance().GetResItem(e),ResourceManager.GetInstance().loadResArray(e,this.AtlasLoaded.bind(this),null,function(e){t=e,Facade.instance.sendNotification(NotificationNames.LoadingUI_Progress,t/2)})},e.prototype.AtlasLoaded=function(){Log.Debug("on atlas loaded");var t=0;ConstDefine.USE_MODIFY?MatchSpineManager.Instance.PreloadAll(this.onLoaded.bind(this),function(e){t=e,Facade.instance.sendNotification(NotificationNames.LoadingUI_Progress,.5+t/2)}):this.onLoaded(),ConstDefine.USE_MODIFY?this.initSoundRes(this.onLoaded.bind(this)):(this.initSoundRes(function(){}),this.onLoaded())},e.prototype.onLoaded=function(){Log.Debug("on spine or sound loaded"),this.step++,this.step<2||this.next()},e.prototype.next=function(){TimeWatch.Stop("preloaded ok"),this.facade.registerCommand(NotificationNames.GAME_INIT_COMMAND,GameInitCommand),this.facade.sendNotification(NotificationNames.GAME_INIT_COMMAND)},e.prototype.initConfiguration=function(){ConfigManager.GetInstance().InitOnLoaded(),ui.LanguageManager.GetInstance().ChangeLanguage(ui.LanguageEnum.CHN),this.initGameConst()},e.prototype.initGameConst=function(){var t=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Gold);ConstDefine.GOLD_BUFF_REWARD_SCALE=t?t.Param1:1;var e=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Enlarge);ConstDefine.ENLARGE_BUFF_SCALE=e?e.Param1:1},e.prototype.initSoundRes=function(t){for(var e=ConfigManager.GetInstance().GetAllAudioConfig(),i=[],n=[],o=0;o<e.length;o++){var r=e[o];i.push(r.URL),n.push(r.PoolSize)}CommonUtil.OnMiniGame()?(AudioManager.GetInstance().InitWxSoundPool(i,n),t()):(Log.Debug("start loade sound coutn: "+i.length),ResourceManager.GetInstance().loadResArray(i,function(){t()},Laya.Loader.SOUND))},e}(puremvc.SimpleCommand),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},StartupInitCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){this.initGameEnging(1080,1920),this.initScreenMode(Laya.Stage.SCALE_FIXED_AUTO),Log.Debug("1. StartupInitCommand"),TimeWatch.Start(),this.initOnStartup(),this.next()},e.prototype.initGameEnging=function(t,e){Laya.MiniAdpter.init(!0,!1),Laya.MiniAdpter.nativefiles=["wxlocal","res/audio"],ConstDefine.setScreenHeight(),Laya.init(t,e,Laya.WebGL),Laya.AtlasResourceManager._disable(),Laya.stage.frameRate=Laya.Stage.FRAME_FAST,StageManager.GetInstance().init()},e.prototype.initScreenMode=function(t){Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.scaleMode=t},e.prototype.initOnStartup=function(){WechatFuncManager.Instance.InitWeChatShare(this.onWechatShow.bind(this)),WechatFuncManager.Instance.RegOnHide(this.onHide.bind(this)),WechatFuncManager.Instance.RegOnKeyboardComplete(this.onKeyboardComplete.bind(this)),WechatFuncManager.Instance.RegOnKeyboardConfirm(this.onKeyboardConfirm.bind(this)),WechatFuncManager.Instance.RegVideoAd(cbhandler.gen_handler(this.onVideoAdLoadSuccess,this),cbhandler.gen_handler(this.onVideoAdLoadFail,this),cbhandler.gen_handler(this.onVideoClose,this))},e.prototype.next=function(){TimeWatch.Stop("startupu init ok"),this.facade.registerCommand(NotificationNames.CHECK_VERSION_COMMAND,CheckVersionControlCommand),this.facade.sendNotification(NotificationNames.CHECK_VERSION_COMMAND)},e.prototype.onWechatShow=function(t){if(Log.Debug("InitWeChat注册的onshow 回调"),t.query){var e=t.query[WechatConstDefine.LOGIN_QUERY_KEY];e&&(Log.Debug("query LOGIN_QUERY_KEY value:"+e),GameDataManager.ShareQueryData.LoginQuery=e);var i=t.query[WechatConstDefine.SHARE_ROOM_ID];i&&(Log.Debug("query SHARE_ROOM_ID value:"+i),GameDataManager.ShareQueryData.ShareRoomID=i);var n=t.query[WechatConstDefine.SHARE_SCENE_ID];n&&(Log.Debug("query SHARE_SCENE_ID value:"+n),GameDataManager.ShareQueryData.ShareRoomSceneID=n);var o=t.query[WechatConstDefine.SHARE_PLAYER_ID];o&&(Log.Debug("query SHARE_PLAYER_ID value:"+o),GameDataManager.ShareQueryData.ShareRoomCreatorID=o);var r=t.scene;Log.Debug("enterScene: "+t.scene),r!=EnumWechatEnterScene.ShareFromFriend&&r!=EnumWechatEnterScene.ShareFromGroup&&r!=EnumWechatEnterScene.ShareFromGroupWithShareTicket||i&&n&&o&&LoginSceneEnterCommand.BeenEntered&&WechatFuncManager.Instance.CheckLoginQuery(),LoginSceneEnterCommand.BeenEntered&&(NetworkHeartBeat.GetInstance().Start(),AudioManager.GetInstance().RePlayCurMusic())}},e.prototype.onHide=function(){Log.Debug("程序启动时候注册的onhide 回调"),ConstDefine.HTTP_LOGIN||NetworkHeartBeat.GetInstance().Stop()},e.prototype.onKeyboardComplete=function(t){Facade.instance.sendNotification(NotificationNames.WeChat_OnKeyboardComplete,t)},e.prototype.onKeyboardConfirm=function(t){Facade.instance.sendNotification(NotificationNames.WeChat_OnKeyboardConfirm,t)},e.prototype.onVideoAdLoadSuccess=function(){Facade.instance.sendNotification(NotificationNames.WeChat_VideoAd_Load_Success)},e.prototype.onVideoAdLoadFail=function(){Facade.instance.sendNotification(NotificationNames.WeChat_VideoAd_Load_Fail)},e.prototype.onVideoClose=function(t){Facade.instance.sendNotification(NotificationNames.WeChat_VideoAd_OnClose,t)},e}(puremvc.SimpleCommand),ConfigTable=function(){function t(){this.configDic=new Laya.Dictionary}return t.prototype.Load=function(t,e){this.curType=e;for(var i=CommonUtil.ConvertArrayBuffer(t),n=i.getInt32(),o=0;o<n;o++){var r=new this.curType;r.LoadRowBytes(i),this.configDic.get(r.GetID())?Log.Error("配置表 %s ID %s 重复",r.GetTableName(),r.GetID()):this.configDic.set(r.GetID(),r)}},t.prototype.GetByID=function(t){return this.configDic.get(t)},t.prototype.GetAll=function(){return this.configDic.values},t.prototype.GetCount=function(){return this.configDic.keys.length},t.prototype.PrintTable=function(){for(var t=this.configDic.values,e="\n",i=0;i<t.length;i++){var n=t[i];0==i&&(e+="打印表 "+n.GetTableName()+"=========================================================================\n"),e+=n.Print()}e+="表尾=========================================================================\n",Log.Debug(e)},t.prototype.GetTableName=function(){var t=this.configDic.values;return t.length>0?t[0].GetTableName():""},t}(),ByteTableManager=function(){function t(){this.m_configDic=new Laya.Dictionary}return t.prototype.OnTableLoaded=function(t,e){if(this.m_configDic.get(t))Log.Error("表格重复添加, %s 已经存在",t.toString());else{var i=new ConfigTable;i.Load(e,t),this.m_configDic.set(t,i)}},t.prototype.GetConfigByID=function(t,e){var i=this.m_configDic.get(e);if(i){var n=i.GetByID(t);return null==n&&Log.Warn("配置表 %s中id %d 不存在",i.GetTableName(),t),n}return Log.Warn("配置表不存在 %s",e.toString()),null},t.prototype.GetAll=function(t){var e=this.m_configDic.get(t);return e?e.GetAll():(Log.Warn("配置表不存在 %s",t.toString()),null)},t.prototype.GetCount=function(t){var e=this.m_configDic.get(t);return e?e.GetCount():(Log.Warn("配置表不存在 %s",t.toString()),null)},t.prototype.UnLoadLevelFile=function(t){ResourceManager.GetInstance().release(t)},t}(),BuffConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.id=t.getFloat32(),this.duration=t.getFloat32(),this.copy=t.getInt32()>0,this.BuffType=t.getFloat32(),this.BuffSource=t.getFloat32(),this.Param1=t.getFloat32()},t.prototype.GetID=function(){return this.id},t.prototype.Print=function(){var t="";return t+=" id: "+this.id,t+=" duration: "+this.duration,t+=" copy: "+this.copy,t+=" BuffType: "+this.BuffType,t+=" BuffSource: "+this.BuffSource,t+=" Param1: "+this.Param1,t+="\n"},t.prototype.GetTableName=function(){return"BuffConfigConfigData"},t}(),BulletConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.id=t.getFloat32(),this.BaseBulletNum=t.getFloat32(),this.MaxBulletNum=t.getFloat32(),this.BaseBulletDamage=t.getFloat32(),this.DamageMultFactor=t.getFloat32(),this.MaxBulletRow=t.getFloat32(),this.ImagePath=t.getUTFString();var e=t.getInt16();this.ColliderSize=[];for(var i=0;i<e;i++)this.ColliderSize.push(t.getFloat32());this.MoveSpeed=t.getFloat32(),this.HitFxSpineID=t.getFloat32()},t.prototype.GetID=function(){return this.id},t.prototype.Print=function(){var t="";t+=" id: "+this.id,t+=" BaseBulletNum: "+this.BaseBulletNum,t+=" MaxBulletNum: "+this.MaxBulletNum,t+=" BaseBulletDamage: "+this.BaseBulletDamage,t+=" DamageMultFactor: "+this.DamageMultFactor,t+=" MaxBulletRow: "+this.MaxBulletRow,t+=" ImagePath: "+this.ImagePath,t+=" ColliderSize: ";for(var e=this.ColliderSize.length,i=0;i<e;i++)t+=this.ColliderSize[i],i<e-1&&(t+=",");return t+=" MoveSpeed: "+this.MoveSpeed,t+=" HitFxSpineID: "+this.HitFxSpineID,t+="\n"},t.prototype.GetTableName=function(){return"BulletConfigConfigData"},t}(),ConstConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.const=t.getUTFString()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" const: "+this.const,t+="\n"},t.prototype.GetTableName=function(){return"ConstConfigConfigData"},t}(),FormulaConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.FormulaType=t.getFloat32(),this.Param1=t.getFloat32(),this.Param2=t.getFloat32(),this.Param3=t.getFloat32(),this.Param4=t.getFloat32(),this.Param5=t.getFloat32(),this.Param6=t.getFloat32(),this.Param7=t.getFloat32()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" FormulaType: "+this.FormulaType,t+=" Param1: "+this.Param1,t+=" Param2: "+this.Param2,t+=" Param3: "+this.Param3,t+=" Param4: "+this.Param4,t+=" Param5: "+this.Param5,t+=" Param6: "+this.Param6,t+=" Param7: "+this.Param7,t+="\n"},t.prototype.GetTableName=function(){return"FormulaConfigConfigData"},t}(),GoldUpgradeConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.BaseSpeed=t.getFloat32(),this.IncreSpeed=t.getFloat32()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";return t+=" ID: "+this.ID,t+=" BaseSpeed: "+this.BaseSpeed,t+=" IncreSpeed: "+this.IncreSpeed,t+="\n"},t.prototype.GetTableName=function(){return"GoldUpgradeConfigConfigData"},t}(),LevelBrushConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.RefreshDuration=t.getFloat32(),this.MonsterNumber=t.getFloat32(),this.MonsterDist=t.getUTFString();var e=t.getInt16();this.MonsterLvlRange=[];for(var i=0;i<e;i++)this.MonsterLvlRange.push(t.getFloat32());this.BuffSpawnNumber=t.getFloat32(),this.soundId=t.getFloat32()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";t+=" ID: "+this.ID,t+=" RefreshDuration: "+this.RefreshDuration,t+=" MonsterNumber: "+this.MonsterNumber,t+=" MonsterDist: "+this.MonsterDist,t+=" MonsterLvlRange: ";for(var e=this.MonsterLvlRange.length,i=0;i<e;i++)t+=this.MonsterLvlRange[i],i<e-1&&(t+=",");return t+=" BuffSpawnNumber: "+this.BuffSpawnNumber,t+=" soundId: "+this.soundId,t+="\n"},t.prototype.GetTableName=function(){return"LevelBrushConfigConfigData"},t}(),LevelConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.TemplateId=t.getUTFString(),this.MaxNumInScreen=t.getFloat32()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";return t+=" ID: "+this.ID,t+=" TemplateId: "+this.TemplateId,t+=" MaxNumInScreen: "+this.MaxNumInScreen,t+="\n"},t.prototype.GetTableName=function(){return"LevelConfigConfigData"},t}(),LevelTemplateConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32();var e=t.getInt16();this.FormulaID=[];for(var i=0;i<e;i++)this.FormulaID.push(t.getFloat32());this.IsBossLvl=t.getInt32()>0},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";t+=" ID: "+this.ID,t+=" FormulaID: ";for(var e=this.FormulaID.length,i=0;i<e;i++)t+=this.FormulaID[i],i<e-1&&(t+=",");return t+=" IsBossLvl: "+this.IsBossLvl,t+="\n"},t.prototype.GetTableName=function(){return"LevelTemplateConfigConfigData"},t}(),LocalizationConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.CHN=t.getUTFString(),this.ENG=t.getUTFString()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" CHN: "+this.CHN,t+=" ENG: "+this.ENG,t+="\n"},t.prototype.GetTableName=function(){return"LocalizationConfigData"},t}(),LotteryRewardConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.rewardName=t.getUTFString(),this.rewardSkin=t.getUTFString(),this.rewardType=t.getFloat32(),this.rewardNum=t.getFloat32()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" rewardName: "+this.rewardName,t+=" rewardSkin: "+this.rewardSkin,t+=" rewardType: "+this.rewardType,t+=" rewardNum: "+this.rewardNum,t+="\n"},t.prototype.GetTableName=function(){return"LotteryRewardConfigConfigData"},t}(),MainWeaponEvolutionConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.RequiredPowerLvl=t.getFloat32(),this.IncreBulletNumber=t.getFloat32(),this.GoldCoefficient=t.getFloat32(),this.IconPath=t.getUTFString(),this.WeaponName=t.getUTFString()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";return t+=" ID: "+this.ID,t+=" RequiredPowerLvl: "+this.RequiredPowerLvl,t+=" IncreBulletNumber: "+this.IncreBulletNumber,t+=" GoldCoefficient: "+this.GoldCoefficient,t+=" IconPath: "+this.IconPath,t+=" WeaponName: "+this.WeaponName,t+="\n"},t.prototype.GetTableName=function(){return"MainWeaponEvolutionConfigConfigData"},t}(),MonsterConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32();var e=t.getInt16();this.ColliderSize=[];for(o=0;o<e;o++)this.ColliderSize.push(t.getFloat32());var i=t.getInt16();this.AttackingColliderSize=[];for(o=0;o<i;o++)this.AttackingColliderSize.push(t.getFloat32());this.BaseHP=t.getFloat32(),this.SpineConfigID=t.getInt32(),this.GoldProbability=t.getFloat32(),this.MoveSpeed=t.getFloat32();var n=t.getInt16();this.MonsterSkillID=[];for(var o=0;o<n;o++)this.MonsterSkillID.push(t.getFloat32());this.HpFormulaID=t.getFloat32()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";t+=" ID: "+this.ID,t+=" ColliderSize: ";for(var e=this.ColliderSize.length,i=0;i<e;i++)t+=this.ColliderSize[i],i<e-1&&(t+=",");t+=" AttackingColliderSize: ";for(var n=this.AttackingColliderSize.length,i=0;i<n;i++)t+=this.AttackingColliderSize[i],i<n-1&&(t+=",");t+=" BaseHP: "+this.BaseHP,t+=" SpineConfigID: "+this.SpineConfigID,t+=" GoldProbability: "+this.GoldProbability,t+=" MoveSpeed: "+this.MoveSpeed,t+=" MonsterSkillID: ";for(var o=this.MonsterSkillID.length,i=0;i<o;i++)t+=this.MonsterSkillID[i],i<o-1&&(t+=",");return t+=" HpFormulaID: "+this.HpFormulaID,t+="\n"},t.prototype.GetTableName=function(){return"MonsterConfigConfigData"},t}(),PhoneVerifyErrorMessageConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.errorMsg=t.getUTFString()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" errorMsg: "+this.errorMsg,t+="\n"},t.prototype.GetTableName=function(){return"PhoneVerifyErrorMessageConfigData"},t}(),PlayerConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.SpineConfigID=t.getFloat32();var e=t.getInt16();this.BirthPoint=[];for(var i=0;i<e;i++)this.BirthPoint.push(t.getFloat32())},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";t+=" ID: "+this.ID,t+=" SpineConfigID: "+this.SpineConfigID,t+=" BirthPoint: ";for(var e=this.BirthPoint.length,i=0;i<e;i++)t+=this.BirthPoint[i],i<e-1&&(t+=",");return t+="\n"},t.prototype.GetTableName=function(){return"PlayerConfigConfigData"},t}(),PropConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.id=t.getFloat32(),this.PropImagePath=t.getUTFString(),this.BuffConfigID=t.getFloat32(),this.Duration=t.getFloat32(),this.MoveSpeed=t.getFloat32();var e=t.getInt16();this.ColliderSize=[];for(var i=0;i<e;i++)this.ColliderSize.push(t.getFloat32());this.SpawnWeight=t.getFloat32()},t.prototype.GetID=function(){return this.id},t.prototype.Print=function(){var t="";t+=" id: "+this.id,t+=" PropImagePath: "+this.PropImagePath,t+=" BuffConfigID: "+this.BuffConfigID,t+=" Duration: "+this.Duration,t+=" MoveSpeed: "+this.MoveSpeed,t+=" ColliderSize: ";for(var e=this.ColliderSize.length,i=0;i<e;i++)t+=this.ColliderSize[i],i<e-1&&(t+=",");return t+=" SpawnWeight: "+this.SpawnWeight,t+="\n"},t.prototype.GetTableName=function(){return"PropConfigConfigData"},t}(),SkillConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.ID=t.getFloat32(),this.IconPath=t.getUTFString(),this.Type=t.getFloat32(),this.PrepareSpineConfigID=t.getFloat32(),this.FireSpineConfigID1=t.getFloat32(),this.FireSpineConfigID2=t.getFloat32(),this.TriggerOnDie=t.getInt32()>0,this.Param1=t.getFloat32(),this.Param2=t.getFloat32(),this.Param3=t.getFloat32(),this.Param4=t.getFloat32(),this.Param5=t.getFloat32()},t.prototype.GetID=function(){return this.ID},t.prototype.Print=function(){var t="";return t+=" ID: "+this.ID,t+=" IconPath: "+this.IconPath,t+=" Type: "+this.Type,t+=" PrepareSpineConfigID: "+this.PrepareSpineConfigID,t+=" FireSpineConfigID1: "+this.FireSpineConfigID1,t+=" FireSpineConfigID2: "+this.FireSpineConfigID2,t+=" TriggerOnDie: "+this.TriggerOnDie,t+=" Param1: "+this.Param1,t+=" Param2: "+this.Param2,t+=" Param3: "+this.Param3,t+=" Param4: "+this.Param4,t+=" Param5: "+this.Param5,t+="\n"},t.prototype.GetTableName=function(){return"SkillConfigConfigData"},t}(),SoundConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.URL=t.getUTFString(),this.Type=t.getFloat32(),this.Duration=t.getFloat32(),this.Loop=t.getInt32()>0,this.PlayMode=t.getFloat32(),this.PoolSize=t.getFloat32()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";return t+=" index: "+this.index,t+=" URL: "+this.URL,t+=" Type: "+this.Type,t+=" Duration: "+this.Duration,t+=" Loop: "+this.Loop,t+=" PlayMode: "+this.PlayMode,t+=" PoolSize: "+this.PoolSize,t+="\n"},t.prototype.GetTableName=function(){return"SoundConfigConfigData"},t}(),SpineConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.id=t.getFloat32(),this.SpinePath=t.getUTFString(),this.Loop=t.getInt32()>0,this.PoolSize=t.getFloat32();var e=t.getInt16();this.SpineSize=[];for(n=0;n<e;n++)this.SpineSize.push(t.getFloat32());var i=t.getInt16();this.SpinePivot=[];for(var n=0;n<i;n++)this.SpinePivot.push(t.getFloat32());this.Duration=t.getFloat32(),this.ReplayMode=t.getFloat32()},t.prototype.GetID=function(){return this.id},t.prototype.Print=function(){var t="";t+=" id: "+this.id,t+=" SpinePath: "+this.SpinePath,t+=" Loop: "+this.Loop,t+=" PoolSize: "+this.PoolSize,t+=" SpineSize: ";for(var e=this.SpineSize.length,i=0;i<e;i++)t+=this.SpineSize[i],i<e-1&&(t+=",");t+=" SpinePivot: ";for(var n=this.SpinePivot.length,i=0;i<n;i++)t+=this.SpinePivot[i],i<n-1&&(t+=",");return t+=" Duration: "+this.Duration,t+=" ReplayMode: "+this.ReplayMode,t+="\n"},t.prototype.GetTableName=function(){return"SpineConfigConfigData"},t}(),UIInfoConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.UIID=t.getUTFString(),this.atlas=t.getUTFString();var e=t.getInt16();this.unpackImagList=[];for(var i=0;i<e;i++)this.unpackImagList.push(t.getUTFString());this.uiOpenAnimType=t.getFloat32(),this.uiCloseAnimType=t.getFloat32(),this.uiAutoCloseType=t.getFloat32(),this.uiShowType=t.getFloat32(),this.depth=t.getFloat32(),this.showImageBG=t.getInt32()>0,this.imageBGPath=t.getUTFString(),this.imageBGSizeGrid=t.getUTFString(),this.parentType=t.getInt32()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";t+=" index: "+this.index,t+=" UIID: "+this.UIID,t+=" atlas: "+this.atlas,t+=" unpackImagList: ";for(var e=this.unpackImagList.length,i=0;i<e;i++)t+=this.unpackImagList[i],i<e-1&&(t+=",");return t+=" uiOpenAnimType: "+this.uiOpenAnimType,t+=" uiCloseAnimType: "+this.uiCloseAnimType,t+=" uiAutoCloseType: "+this.uiAutoCloseType,t+=" uiShowType: "+this.uiShowType,t+=" depth: "+this.depth,t+=" showImageBG: "+this.showImageBG,t+=" imageBGPath: "+this.imageBGPath,t+=" imageBGSizeGrid: "+this.imageBGSizeGrid,t+=" parentType: "+this.parentType,t+="\n"},t.prototype.GetTableName=function(){return"UIInfoConfigData"},t}(),WeaponConfigConfigData=function(){function t(){}return t.prototype.LoadRowBytes=function(t){this.index=t.getFloat32(),this.weaponSkin=t.getUTFString(),this.weaponName=t.getUTFString(),this.UnlockLevel=t.getFloat32(),this.PreparingFxID=t.getFloat32(),this.FiringFxID=t.getFloat32(),this.EndingFxID=t.getFloat32();var e=t.getInt16();this.TailAnimPos=[];for(n=0;n<e;n++)this.TailAnimPos.push(t.getFloat32());var i=t.getInt16();this.ColliderSize=[];for(var n=0;n<i;n++)this.ColliderSize.push(t.getFloat32());this.weaponPower=t.getFloat32(),this.MinDuration=t.getFloat32(),this.MaxDuration=t.getFloat32(),this.Param1=t.getFloat32(),this.Param2=t.getFloat32(),this.Param3=t.getFloat32(),this.Param4=t.getFloat32(),this.Param5=t.getFloat32(),this.Param6=t.getFloat32()},t.prototype.GetID=function(){return this.index},t.prototype.Print=function(){var t="";t+=" index: "+this.index,t+=" weaponSkin: "+this.weaponSkin,t+=" weaponName: "+this.weaponName,t+=" UnlockLevel: "+this.UnlockLevel,t+=" PreparingFxID: "+this.PreparingFxID,t+=" FiringFxID: "+this.FiringFxID,t+=" EndingFxID: "+this.EndingFxID,t+=" TailAnimPos: ";for(var e=this.TailAnimPos.length,i=0;i<e;i++)t+=this.TailAnimPos[i],i<e-1&&(t+=",");t+=" ColliderSize: ";for(var n=this.ColliderSize.length,i=0;i<n;i++)t+=this.ColliderSize[i],i<n-1&&(t+=",");return t+=" weaponPower: "+this.weaponPower,t+=" MinDuration: "+this.MinDuration,t+=" MaxDuration: "+this.MaxDuration,t+=" Param1: "+this.Param1,t+=" Param2: "+this.Param2,t+=" Param3: "+this.Param3,t+=" Param4: "+this.Param4,t+=" Param5: "+this.Param5,t+=" Param6: "+this.Param6,t+="\n"},t.prototype.GetTableName=function(){return"WeaponConfigConfigData"},t}(),LevelInfo=function(){function t(){}return Object.defineProperty(t.prototype,"CurLevelID",{get:function(){return this.levelSpawnDatas.LevelId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NextLevelID",{get:function(){return ConfigManager.GetInstance().GetLevelConfig(this.CurLevelID+1)?this.CurLevelID+1:this.CurLevelID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LevelSpawnDatas",{get:function(){return this.levelSpawnDatas},set:function(t){this.levelSpawnDatas=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurLiveMonsterCount",{get:function(){return this.curLiveMonsterCount},set:function(t){this.curLiveMonsterCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurMatchProgressInfo",{get:function(){return this.curMatchProgressInfo},enumerable:!0,configurable:!0}),t.prototype.OnInit=function(){this.reset()},t.prototype.OnEnter=function(){Log.Debug("LevelInfo OnEnter"),this.reset()},t.prototype.OnExit=function(){Log.Debug("LevelInfo OnExit"),this.reset()},t.prototype.reset=function(){this.levelSpawnDatas=null,this.curLiveMonsterCount=0,this.totalKilled=0,this.totalSpawnBySkill=0,this.curMatchProgressInfo=null,this.totalSpawnByConfig=0},t.prototype.OnMonsterSpawn=function(t){GameDataManager.getInstance().MatchInfo.IsGameEnd()||(this.curLiveMonsterCount++,t?this.totalSpawnByConfig++:this.totalSpawnBySkill++,this.LogLevelData())},t.prototype.OnMonsterDie=function(){GameDataManager.getInstance().MatchInfo.IsGameEnd()||(this.curLiveMonsterCount--,this.totalKilled++,this.LogLevelData())},t.prototype.GetCurProgress=function(){var t=this.levelSpawnDatas.TotalMonsterCount-this.totalSpawnByConfig,e=this.curLiveMonsterCount+t,i=this.totalKilled/(this.levelSpawnDatas.TotalMonsterCount+this.totalSpawnBySkill);return this.curMatchProgressInfo=new MatchProgressInfo(e,i),this.curMatchProgressInfo},t.prototype.IsScreenFull=function(){return this.curLiveMonsterCount>=this.levelSpawnDatas.MaxInScreenNum},t.prototype.IsGameComplete=function(){return this.totalSpawnByConfig==this.levelSpawnDatas.TotalMonsterCount&&0==this.curLiveMonsterCount},t.prototype.IsBossLevel=function(){return this.levelSpawnDatas.IsBossLevel},t.prototype.LogLevelData=function(){Log.Debug("总数%i 已经刷出%i, 当前存活怪物%i",this.levelSpawnDatas.TotalMonsterCount,this.totalSpawnByConfig,this.curLiveMonsterCount)},t}(),MatchInfo=function(){function t(){}return Object.defineProperty(t.prototype,"GoldNum",{get:function(){return this.curGoldNum},set:function(t){this.curGoldNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"State",{get:function(){return this.state},set:function(t){this.state=t},enumerable:!0,configurable:!0}),t.prototype.OnInit=function(){this.curGoldNum=0,this.state=EnumMatchState.Exit},t.prototype.OnEnter=function(){Log.Debug("MatchInfo OnEnter"),this.curGoldNum=0,this.state=EnumMatchState.Enter},t.prototype.OnExit=function(){Log.Debug("MatchInfo OnExit"),this.curGoldNum=0,this.state=EnumMatchState.Exit},t.prototype.IsGameEnd=function(){return this.state==EnumMatchState.Complete||this.state==EnumMatchState.Exit},t.prototype.IsGameStart=function(){return this.state==EnumMatchState.Start},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoginPlayerInfo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"OpenID",{get:function(){return this.openID},set:function(t){this.openID=t},enumerable:!0,configurable:!0}),e.prototype.Init=function(e){t.prototype.Init.call(this,e),this.netPlayerInfo=e,this.initLocalStorageData()},e.prototype.initLocalStorageData=function(){},e.prototype.SetHeaderInfo=function(t,e){t||Log.Error("设置玩家的头像Image为空!!!!"),e||Log.Error("设置玩家的昵称为空!!!!");var i=new com.msg.wxInfo;i.imageUrl=t,i.nickName=e,this.playerWxInfo=i},Object.defineProperty(e.prototype,"PlayerHeader",{get:function(){return this.playerWxInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MoneyInfo",{get:function(){return this.netPlayerInfo.moneyInfo},set:function(t){this.netPlayerInfo.moneyInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MainWeaponInfo",{get:function(){return this.netPlayerInfo.playerWeaponInfo.mainWeapon},set:function(t){this.netPlayerInfo.playerWeaponInfo.mainWeapon=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurSideWeaponID",{get:function(){return this.netPlayerInfo.playerWeaponInfo.curSideWeaponId},set:function(t){this.netPlayerInfo.playerWeaponInfo.curSideWeaponId=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurSideWeaponInfo",{get:function(){for(var t=null,e=0;e<this.netPlayerInfo.playerWeaponInfo.sideWeapons.length;e++){var i=this.netPlayerInfo.playerWeaponInfo.sideWeapons[e];if(i.id==this.netPlayerInfo.playerWeaponInfo.curSideWeaponId){t=i;break}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AllSideWeaponList",{get:function(){return this.netPlayerInfo.playerWeaponInfo.sideWeapons},set:function(t){this.netPlayerInfo.playerWeaponInfo.sideWeapons=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SpawnLvl",{get:function(){return this.netPlayerInfo.playerWeaponInfo.spawnLvl},set:function(t){this.netPlayerInfo.playerWeaponInfo.spawnLvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InvitedList",{get:function(){return this.netPlayerInfo.inviteList},set:function(t){this.netPlayerInfo.inviteList=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurLevel",{get:function(){return this.netPlayerInfo.levelInfo.latestUnCompeleteLevel},set:function(t){this.netPlayerInfo.levelInfo.latestUnCompeleteLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VerifyInfo",{get:function(){return this.netPlayerInfo.verifyInfo},set:function(t){this.netPlayerInfo.verifyInfo=t},enumerable:!0,configurable:!0}),e}(BasePlayerInfo),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CommonStruct=function(){return function(){}}(),Vec2=function(){function t(t,e){this.x=t,this.y=e}return Object.defineProperty(t,"UPForLaya2D",{get:function(){return new t(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UP",{get:function(){return new t(0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RIGHT",{get:function(){return new t(1,0)},enumerable:!0,configurable:!0}),t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.mul=function(e){return new t(this.x*e,this.y*e)},t.prototype.mulVec2=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.normalise=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y);return e>0?new t(this.x/e,this.y/e):(Log.Error("向量长度为0 %f %f, 返回(0 0)向量",this.x,this.y),new t(0,0))},t.prototype.dist=function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},t.prototype.equal=function(t){return this.x==t.x&&this.y==t.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.magnitudePower2=function(){return this.x*this.x+this.y*this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),CollsionShapInfo=function(){return function(t,e){this.center=t,this.shape=e}}(),BoxCollisonInfo=function(t){function e(e,i,n){void 0===n&&(n=0);var o=t.call(this,e,EnumCollisionShape.Box)||this;return o.size=i,o.rotation=n,o}return __extends(e,t),e}(CollsionShapInfo),SectorCollisonInfo=function(t){function e(e,i,n,o){void 0===o&&(o=0);var r=t.call(this,e,EnumCollisionShape.Sector)||this;return r.radius=i,r.sectorAngle=n,r.rotation=o,r}return __extends(e,t),e}(CollsionShapInfo),CircleCollisonInfo=function(t){function e(e,i){var n=t.call(this,e,EnumCollisionShape.Circle)||this;return n.radius=i,n}return __extends(e,t),e}(CollsionShapInfo),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){var e=function(t){function e(e,i,n){void 0===n&&(n=!1);var o=t.call(this,i,n)||this;return o.ID=e,o}return __extends(e,t),e}(t.WindowContextDataBase);t.UIParamStruct=e;var i=function(e){function i(i){var n=e.call(this,t.UIID.ExchangeUIID,null)||this;return n.exchangeType=i,n}return __extends(i,e),i}(e);t.ExchangeUIParam=i;var n=function(e){function i(i){var n=e.call(this,t.UIID.ResultUIID,null)||this;return n.win=i,n}return __extends(i,e),i}(e);t.ResultUIParam=n;var o=function(e){function i(i){var n=e.call(this,t.UIID.UpgradeUIID,null)||this;return n.upgradeType=i,n}return __extends(i,e),i}(e);t.UpgradeUIParam=o;var r=function(e){function i(i){var n=e.call(this,t.UIID.LotteryResultUIID,null)||this;return n.rewardConfigList=i,n}return __extends(i,e),i}(e);t.LotteryRewardUIParam=r}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},NotifcationStruct=function(){return function(){}}(),PreloadMsgBody=function(){return function(t,e){this.cb=t,this.progress=e}}(),CommonPanelUIParam=function(t){function e(e,i,n){var o=t.call(this,e,null)||this;return o.context=i,o.callback=n,o}return __extends(e,t),e}(ui.UIParamStruct),HomepageBottomButtonState=function(){return function(t,e){this.buttonID=t,this.selected=e}}(),PlayerBuffInfo=function(){return function(t,e){this.BuffType=t,this.Active=e}}(),MoreSpawnUIParam=function(t){function e(e,i){var n=t.call(this,ui.UIID.MoreSpawnUIID,null,null)||this;return n.moneyType=e,n.spawnID=i,n}return __extends(e,t),e}(ui.UIParamStruct),LevelUIAnimParam=function(){return function(){}}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BuffComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"AllBuffs",{get:function(){return this.runingBuffDic.keys},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.Reset()},e.prototype.onReomove=function(){this.stopAll()},e.prototype.Reset=function(){this.runingBuffDic=new Laya.Dictionary},e.prototype.OnEnterMatch=function(){},e.prototype.OnExitMatch=function(){},e.prototype.AddBuff=function(t,e){this.ContainBuff(t)?this.refreshBuff(t,e):this.exeBuff(t,e),this.player.playerID==ConstDefine.MAIN_PLAYRE_CONFIG_ID&&Facade.instance.sendNotification(NotificationNames.UI_OnPropBuff,new PlayerBuffInfo(t,!0))},e.prototype.ContainBuff=function(t){return null!=this.runingBuffDic.get(t)},e.prototype.stopAll=function(){for(var t=this.runingBuffDic.keys,e=t.length-1;e>=0;e--){var i=t[e];this.stopBuff(i)}this.Reset()},e.prototype.exeBuff=function(t,e){var i=this,n=this.getBuffSkill(t);this.runingBuffDic.set(t,n),n.Start(this.player,e,function(){i.endBuff(t)})},e.prototype.refreshBuff=function(t,e){var i=this,n=this.runingBuffDic.get(t);n&&n.Refresh(this.player,function(){i.endBuff(t)},e)},e.prototype.endBuff=function(t){var e=this,i=this.runingBuffDic.get(t);i&&i.End(this.player,function(){e.runingBuffDic.remove(t),e.onRemove(t)},null)},e.prototype.stopBuff=function(t){var e=this.runingBuffDic.get(t);e&&(this.runingBuffDic.remove(t),e.Stop(this.player,null),this.onRemove(t))},e.prototype.onRemove=function(t){this.player.playerID==ConstDefine.MAIN_PLAYRE_CONFIG_ID&&Facade.instance.sendNotification(NotificationNames.UI_OnPropBuff,new PlayerBuffInfo(t,!1))},e.prototype.getBuffSkill=function(t){switch(t){case EnumBuffType.MagnetFreezen:return new MagnetFreezenBuff;case EnumBuffType.CallAlliance:return new CallAllianceBuff;case EnumBuffType.BulletThrough:return new BulletThroughBuff;case EnumBuffType.Enlarge:return new EnlargeBuff;case EnumBuffType.FightBack:return new FightBackBuff;case EnumBuffType.FireSpeedIntensified:return new FireSpeedBuff;case EnumBuffType.Gold:return new GoldBuff;case EnumBuffType.LimitInput:return new LimitInputBuff;case EnumBuffType.PowerIntensified:return new FirePowerBuff;case EnumBuffType.Weaken:return new WeakenBuff;default:return Log.Error("没有对应武器的技能逻辑 %i",t),null}},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BulletMoveComponent2D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPosX=0,e.offSetX=0,e.lastPosXTime=.1,e}return __extends(e,t),Object.defineProperty(e.prototype,"MoveDir",{get:function(){return this.moveDir},set:function(t){this.moveDir=t},enumerable:!0,configurable:!0}),e.prototype.onReomove=function(){this.bulletStopMove()},e.prototype.bulletMove=function(){this.StartMovement()},e.prototype.bulletStopMove=function(){this.StopMovement()},e.prototype.OnMoveOutStage=function(){this.onBulletOutStage()},e.prototype.OnMove=function(t){this.onbulletMoveHander(t)},e.prototype.onBulletOutStage=function(){BulletManager.GetInstance().Recycle(this.player),this.player.comParent.visible=!1},e.prototype.onbulletMoveHander=function(t){this.checkSpeedX(t);var e=this.moveDir.x*this.speedX*t,i=this.moveDir.y*this.speedY*t;this.player.movePlayer(-e,-i),this.clampXPos()},e.prototype.checkSpeedX=function(t){this.offSetX>0&&this.player.comParent.x>=this.lastPosX||this.offSetX<0&&this.player.comParent.x<=this.lastPosX||0==this.offSetX?(this.speedX=0,this.player.comParent.x=this.lastPosX):this.speedX=this.offSetX/this.lastPosXTime},e.prototype.clampXPos=function(){0!=this.speedX&&(this.offSetX>0&&this.player.comParent.x>=this.lastPosX||this.offSetX<0&&this.player.comParent.x<=this.lastPosX||0==this.offSetX)&&(this.player.comParent.x=this.lastPosX)},e}(BaseMoveComponent),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Skeleton=Laya.Skeleton,Templet=Laya.Templet,EventLaya=Laya.Event,EnumEffectRePlayMode;!function(t){t[t.MultiPlay=1]="MultiPlay",t[t.ReplayPrevious=2]="ReplayPrevious",t[t.NotPlay=3]="NotPlay"}(EnumEffectRePlayMode||(EnumEffectRePlayMode={}));var EffectComponent2D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectZorder=10,e}return __extends(e,t),e.prototype.onAdd=function(){this.playingFxDic=new Laya.Dictionary,this.playingTimerIds=[],this.playingTimerCallbacks=[]},e.prototype.onReomove=function(){this.player=null;for(i=0;i<this.playingTimerIds.length;i++){var t=this.playingTimerIds[i];TimeManager.getInst().remove(t)}this.playingTimerIds=null,this.playingTimerCallbacks=null;for(var e=this.playingFxDic.keys,i=0;i<e.length;i++)for(var n=e[i],o=this.playingFxDic.get(n),r=0;r<o.length;r++){var a=o[r];a.stop(),MatchSpineManager.Instance.Recycle(n,a)}this.playingFxDic=null},e.prototype.showEffect=function(t,e,i,n,o,r){this.nameOrIndex=t;var a=this.playingFxDic.get(e),s=ConfigManager.GetInstance().GetSpineConfig(e);if(a&&a.length>0){if(s.ReplayMode==EnumEffectRePlayMode.ReplayPrevious)return this.completeHandler(a[0],s.Loop,i,n,r),a[0];if(s.ReplayMode==EnumEffectRePlayMode.NotPlay)return Log.Warn("不重复播放特效 fxID: %i",s.GetID()),null;if(s.ReplayMode!=EnumEffectRePlayMode.MultiPlay)return Log.Error("fxID: %i 配置的重播模式不存在 %i",s.GetID(),s.ReplayMode),null}var l=MatchSpineManager.Instance.Spawn(e);if(l){if(a||(a=[],this.playingFxDic.set(e,a)),a.push(l),!s.Loop){s.Duration<=0&&Log.Error("非循环播放的特效配置时长不对 %i, 时长%i",e,s.Duration);var h=TimeManager.getInst().once(s.Duration,cbhandler.gen_handler(this.endNonLoopFx.bind(this),this,e,l));this.playingTimerIds.push(h),this.playingTimerCallbacks.push(o||null)}return this.completeHandler(l,s.Loop,i,n,r),l.pivot(s.SpinePivot[0],s.SpinePivot[1]),l}return Log.Error("spine对象池没有初始化, 无法播放特效id:%i",e),null},e.prototype.RemoveEffect=function(t,e){var i=this.playingFxDic.get(e);if(i){var n=i.indexOf(t);n>=0?i.splice(n,1):Log.Error("回收的特效没有在播放list中, configID:%i",e),0==i.length&&this.playingFxDic.remove(e)}MatchSpineManager.Instance.Recycle(e,t)},e.prototype.completeHandler=function(t,e,i,n,o){i||(i=this.player.comParent.parent),t.parent!=i&&i.addChild(t),t.zOrder=this.effectZorder;var r=n?n.x:this.player.comParent.x,a=n?n.y:this.player.comParent.y;this.setEffectPos(r,a,t),this.setEffectScale(o?o.x:1,o?o.y:1,t),this.playEffectHandler(t,this.nameOrIndex,e)},e.prototype.endNonLoopFx=function(t,e,i){var n=null,o=this.playingTimerIds.indexOf(i);o>=0&&(this.playingTimerIds.splice(o,1),n=this.playingTimerCallbacks[o],this.playingTimerCallbacks.splice(o,1)),this.RemoveEffect(e,t),n&&n()},e.prototype.playEffectHandler=function(t,e,i,n,o){void 0===n&&(n=!0),void 0===o&&(o=0),t.play(e,i,n,o)},e.prototype.setEffectPos=function(t,e,i){i||(i=this.playingFxDic.values[0]),i.y=e,i.x=t},e.prototype.setEffectRotation=function(t,e){e||(e=this.playingFxDic.values[0]),e.rotation=t},e.prototype.setEffectScale=function(t,e,i){i||(i=this.playingFxDic.values[0]),i.scale(t,e)},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HitComponentBase2D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timer=-1,e.checkHitInterval=.1,e}return __extends(e,t),e.prototype.onReomove=function(){this.stopCheckHit()},e.prototype.startCheckHit=function(){this.timer=TimeManager.getInst().loop(this.checkHitInterval,cbhandler.gen_handler(this.checkHitHandler,this))},e.prototype.stopCheckHit=function(){this.timer<0||(TimeManager.getInst().remove(this.timer),this.timer=-1)},e.prototype.checkHitHandler=function(){},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterAttributeComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewScale=null,e.adjustScale=1,e.monsterSkillScale=1,e.latestGetHitTime=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"MonsterSpawnData",{get:function(){return this.monsterData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonsterLvl",{get:function(){return this.monsterData?this.monsterData.Level:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonsterSkillConfigs",{get:function(){return this.monsterData&&this.monsterData.PowerNum>0?this.monsterData.PowerConfigs:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Speed",{get:function(){return this.speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxHP",{get:function(){return this.maxHP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurHP",{get:function(){return this.curHP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ColliderSize",{get:function(){return this.colliderBoxSize.mulVec2(this.Scale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Scale",{get:function(){return this.viewScale.mul(this.adjustScale).mul(this.monsterSkillScale)},set:function(t){this.viewScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdjustScale",{get:function(){return this.adjustScale},set:function(t){this.adjustScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdjustScale2",{get:function(){return this.monsterSkillScale},set:function(t){this.monsterSkillScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TimeSinceLastHit",{get:function(){return((new Date).getTime()-this.latestGetHitTime)/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanSpawnProp",{get:function(){return this.monsterData.CanTriggerPropSpawn},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){},e.prototype.onRemove=function(){},e.prototype.Init=function(t){this.monsterData=t;var e=ConfigManager.GetInstance().GetMonsterConfig(this.player.playerID);e?(this.speed=e.MoveSpeed,this.maxHP=FormulaUtil.CalcMonsterHp(e.BaseHP,this.MonsterLvl,e.HpFormulaID),this.curHP=this.maxHP,this.viewScale=new Vec2(t.SizeScale.x,t.SizeScale.y),this.colliderBoxSize=new Vec2(e.ColliderSize[0],e.ColliderSize[1])):Log.Error("没有怪物configid:%i",this.player.playerID)},e.prototype.SetMaxHpAndSize=function(t,e){this.maxHP*=t,this.curHP>this.maxHP&&(this.curHP=this.maxHP),this.Scale=this.Scale.mul(e)},e.prototype.ReduceHp=function(t){return this.latestGetHitTime=(new Date).getTime(),this.curHP-=t,this.curHP<=0},e.prototype.IncreaseHp=function(t){this.curHP+=t,this.curHP>this.maxHP&&(this.curHP=this.maxHP)},e.prototype.IsFull=function(){return this.curHP>=this.maxHP},e.prototype.GetOnDieSkills=function(t){void 0===t&&(t=!1);for(var e=[],i=this.MonsterSkillConfigs,n=0;n<i.length;n++){var o=i[n];(o.TriggerOnDie&&!t||!o.TriggerOnDie&&t)&&e.push(o)}return e},e.prototype.ContainsSkill=function(t){for(var e=0;e<this.MonsterSkillConfigs.length;e++){if(this.MonsterSkillConfigs[e].Type==t)return!0}return!1},e.prototype.CopySpawnData=function(){return this.monsterData.Clone()},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BulletComponent2D=function(t){function e(e){var i=t.call(this)||this;return i.timer=-1,i.canFire=!1,i.through=!1,i.bulletType=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"EnableFire",{set:function(t){this.canFire=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnableThrough",{set:function(t){this.through=t},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.curBulletSoundType=EnumBulletOutLookType.None},e.prototype.onReomove=function(){this.OnExitMatch(),this.curBulletSoundType=EnumBulletOutLookType.None},e.prototype.OnEnterMatch=function(e){t.prototype.OnEnterMatch.call(this),this.weaponLvel=e,this.timer=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this)),this.InitBeforeFire()},e.prototype.OnExitMatch=function(){this.timer>=0&&TimeManager.getInst().remove(this.timer),this.timer=-1},e.prototype.InitBeforeFire=function(){this.fireTimeCount=0,this.curFiringRowIndex=-1,this.InitBulletType(this.bulletType,[])},e.prototype.ChangeBulletType=function(t,e){this.InitBulletType(t,e)},e.prototype.InitBulletType=function(t,e){Log.Info("新子弹形态%s",EnumBulletOutLookType[t]),this.bulletType=t,this.bulletConfig=ConfigManager.GetInstance().GetBulletConfig(t),this.containBuffs=e||[],this.fireRule=this.calcPlayerFireRule(),this.bulletXPosForMaxColumn=this.calBulletRelativeXPos(this.fireRule.MaxColumnCount,this.GetBulletInterval()),this.fireRule.MaxColumnCount!=this.fireRule.MinColumnCount?this.bulletXPosForMinColumn=this.calBulletRelativeXPos(this.fireRule.MinColumnCount,this.GetBulletInterval()):this.bulletXPosForMinColumn=this.bulletXPosForMaxColumn},e.prototype.update=function(t){if(this.canFire){this.fireTimeCount+=t;var e=this.fireRule.Interval;if(this.fireTimeCount>=e){var i=Math.floor(this.fireTimeCount/e);this.curFiringRowIndex+=i,this.curFiringRowIndex>=this.fireRule.BulletNumsInRows.length&&(this.curFiringRowIndex=this.curFiringRowIndex%this.fireRule.BulletNumsInRows.length),this.fireTimeCount-=i*this.fireRule.Interval;var n=this.fireRule.BulletNumsInRows[this.curFiringRowIndex];this.fire(n,n==this.fireRule.MaxColumnCount?this.bulletXPosForMaxColumn:this.bulletXPosForMinColumn)}}},e.prototype.fire=function(t,e){for(var i=this.getIndexInSec(this.curFiringRowIndex,this.fireRule),n=0;n<t;n++){var o=BulletManager.GetInstance().Spawn(this.bulletType),r=CommonUtil2D.GetPosUnderTargetObj(this.player.comParent,o.comParent.parent);o.setBulletPos(r.x,r.y-20),o.bulletMoveCom.lastPosX=r.x+e[n],o.bulletMoveCom.offSetX=e[n],o.bulletMoveCom.MoveDir=new Vec2(1,-1),o.bulletMoveCom.SpeedY=this.bulletConfig.MoveSpeed,o.DamageValue=FormulaUtil.CalcPlayerBulletDamage(this.weaponLvel,this.bulletType,i,this.containBuffs),o.Through=this.through}},e.prototype.GetBulletInterval=function(){return ConfigManager.GetInstance().GetBulletConfig(this.bulletType).ColliderSize[0]},e.prototype.calcPlayerFireRule=function(){return this.calcFireRule(this.weaponLvel,this.bulletType,this.containBuffs)},e.prototype.calcFireRule=function(t,e,i){for(var n=ConfigManager.GetInstance().GetBulletConfig(e),o=ConstDefine.TEST_EFFICIENCY?ConstDefine.BULLET_PER_SEC:FormulaUtil.CalcBulletNumPerSec(t,e,i),r=Math.min(o,n.MaxBulletRow),a=1/r,s=Math.ceil(o/r),l=o%r,h=0==l,u=[],c=0;c<r;c++){var d=s;!h&&c>=l&&(d-=1),u.push(d)}return new FireRule(u,a,o)},e.prototype.calBulletRelativeXPos=function(t,e){var i=new Array(t),n=t%2==0,o=t/2;n||(i[o=Math.floor(o)]=0);for(var r=1;r<=o;r++){var a=o-r,s=o+r+(n?-1:0);i[s]=n?(r-.5)*e:r*e,i[a]=-1*i[s]}return i},e.prototype.getIndexInSec=function(t,e){for(var i=0,n=0;n<this.fireRule.BulletNumsInRows.length;n++){var o=this.fireRule.BulletNumsInRows[n];if(t==n)return i;i+=o}},e.prototype.playSound=function(t){switch(t){case EnumBulletOutLookType.ChildPlaneBullet:case EnumBulletOutLookType.MainPlayerBullet:AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bullet_01);break;case EnumBulletOutLookType.MainPlayerBullet_FightBackBuff:AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bullet_04);break;case EnumBulletOutLookType.MainPlayerBullet_GoldBuffs:AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bullet_03);break;case EnumBulletOutLookType.MainPlayerBullet_PowerBuff:AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bullet_02);break;case EnumBulletOutLookType.MISSILE_WEAPON_BULLET:AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_guided_01)}},e.prototype.stopSound=function(t){switch(t){case EnumBulletOutLookType.ChildPlaneBullet:case EnumBulletOutLookType.MainPlayerBullet:AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_bullet_01);break;case EnumBulletOutLookType.MainPlayerBullet_FightBackBuff:AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_bullet_04);break;case EnumBulletOutLookType.MainPlayerBullet_GoldBuffs:AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_bullet_03);break;case EnumBulletOutLookType.MainPlayerBullet_PowerBuff:AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_bullet_02);break;case EnumBulletOutLookType.MISSILE_WEAPON_BULLET:AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_guided_01)}},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterBulletComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.OnEnterMatch=function(){t.prototype.OnEnterMatch.call(this,1)},e.prototype.onFile=function(){},e.prototype.skillFire=function(t){var e=new Vec2(t.x,t.y);return this.skillFireByTargetPos(e)},e.prototype.skillFireByTargetPos=function(t){null==this.bulletConfig&&(this.bulletConfig=ConfigManager.GetInstance().GetBulletConfig(EnumBulletOutLookType.MonsterBullet));var e=BulletManager.GetInstance().Spawn(EnumBulletOutLookType.MonsterBullet),i=CommonUtil2D.GetPosUnderTargetObj(this.player.comParent,e.comParent.parent);return e.setBulletPos(i.x,i.y),e.bulletMoveCom.setMoveDir(t.sub(e.PlayerPos).normalise(),!0),e.bulletMoveCom.SpeedX=this.bulletConfig.MoveSpeed,e.bulletMoveCom.SpeedY=this.bulletConfig.MoveSpeed,e.bulletMoveCom.bulletMove(),e},e}(BulletComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterEffectComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(EffectComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterHitComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkHitHandler=function(){if(this.player.isInStage()){for(var t=BulletManager.GetInstance().GetAllSpawnedNonMonseterBullet(),e=t.length,i=this.player.GetCollisionShapeInfo(),n=PlayerManager.GetInstance().MainPlayer.BuffComp.ContainBuff(EnumBuffType.FightBack),o=[],r=e-1;r>=0&&(this.player.State!=EnumPlayerState.Die&&!GameDataManager.getInstance().MatchInfo.IsGameEnd());r--){var a=t[r];if((!ConstDefine.TEST_EFFICIENCY||ConstDefine.COLLISION_CHECK)&&CollisionDetector.Instance.CheckBoxCollision(i,a.GetCollisionShapeInfo())){var s=this.player;s.OnBulletCollison(),s.GetHit(a.DamageValue)||n&&s.PushBack(0,-ConstDefine.FIGHTBACK_BUFF_OFFSET),a.Through||o.push(a)}}for(var l=o.length-1;l>=0;l--){var h=o[l];BulletManager.GetInstance().Recycle(h)}}},e}(HitComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterHpBarComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timerId=-1,e}return __extends(e,t),e.prototype.onAdd=function(){this.hpBarUI=new ui.PrefabUI.MonsterProgressPrefabUI,this.player.AddChild(this.hpBarUI),this.hpBarUI.anchorX=.5,this.hpBarUI.anchorY=.5,this.hpBarUI.zOrder=ZOrderDefine.HP_BAR_ZORDER,this.MaxWidth=this.hpBarUI.width,this.SetPos(0,0)},e.prototype.onReomove=function(){this.clearTimer(),this.hpBarUI.destroy(!0),this.hpBarUI=null},e.prototype.SetPos=function(t,e){this.hpBarUI.pos(t,e)},e.prototype.SetPosOnExpode=function(t,e){var i=this;this.hpBarUI.pos(t,e),this.clearTimer(),this.SetActive(!0),this.timerId=TimeManager.getInst().once(ConstDefine.HP_BAR_DURATION,cbhandler.gen_handler(function(){i.SetActive(!1)}))},e.prototype.clearTimer=function(){this.timerId>0&&(TimeManager.getInst().remove(this.timerId),this.timerId=-1)},e.prototype.SetProgress=function(t){this.hpBarUI.ProgressBar.width=t*this.MaxWidth},e.prototype.SetSkillIcons=function(t){for(var e=this.hpBarUI.height,i=0;i<t.length;i++){var n=i%2==0,o=n?-e:this.MaxWidth,r=t[i];if(r){var a=new Laya.Image;a.skin=r.IconPath,a.anchorX=0,a.anchorY=0,this.hpBarUI.addChild(a);var s=Math.floor(i/2);a.pos(o+(n?-1:1)*s*e,0),a.size(e,e)}}},e.prototype.SetActive=function(t){this.hpBarUI.visible=t},e.prototype.OnRecycle=function(){this.clearTimer(),this.SetActive(!1)},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},RandomMovementComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BeforeStartMovement=function(){t.prototype.BeforeStartMovement.call(this),this.SetRandomDir()},e.prototype.OnMove=function(t){var e=!1;this.player.PlayerPos.x<=0&&(this.moveDir.x=Math.abs(this.moveDir.x),this.moveDir.y=Math.abs(this.moveDir.y),e=!0),this.player.PlayerPos.x>=Laya.stage.width&&(this.moveDir.x=-Math.abs(this.moveDir.x),this.moveDir.y=Math.abs(this.moveDir.y),e=!0),e&&this.setMoveDir(this.moveDir);var i=this.moveDir.x*this.speedX,n=this.moveDir.y*this.speedY;this.Move(i,n)},e.prototype.OnMoveOutStage=function(){var t=this.player.PlayerPos.x;t<0?t=Laya.stage.width+this.player.viewWidthHalf+t:t>Laya.stage.width+this.player.viewWidthHalf&&(t-=Laya.stage.width+this.player.viewWidthHalf),this.moveDir.y=Math.abs(this.moveDir.y),this.player.setPlayerPos(t,0)},e.prototype.SetRandomDir=function(){var t=1,e=Math.random();e>.5&&(t=-1);var i=new Vec2(t,2*e+.5);this.setMoveDir(i)},e}(BaseMoveComponent),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterMoveComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"SpeedScale",{get:function(){return this.speedScale},set:function(t){this.speedScale=Math.max(0,t)},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){},e.prototype.monsterPause=function(t){this.Pause(t)},e.prototype.monsterStop=function(){this.StopMovement()},e.prototype.monsterRandomMove=function(t){void 0===t&&(t=0),this.StartMovement(t)},e.prototype.BeforeStartMovement=function(){t.prototype.BeforeStartMovement.call(this);var e=ConfigManager.GetInstance().GetMonsterConfig(this.player.playerID);this.speedX=e.MoveSpeed,this.speedY=e.MoveSpeed},e.prototype.Move=function(t,i){this.player.movePlayer(-t*e.SpeedScale,-i*e.SpeedScale)},e}(RandomMovementComponent);MonsterMoveComponent2D.speedScale=1;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterShakeComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shakeTask=-1,e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onReomove=function(){},e.prototype.Shake=function(){var t=this;this.shakeTask<0&&(this.shakeTask=ShakeManager.GetInstance().ShakeMonster(this.player.viewComp.View,function(){t.shakeTask=-1},5,.2,0))},e.prototype.OnRecycle=function(){this.shakeTask>0&&(ShakeManager.GetInstance().StopShakeMonster(this.shakeTask),this.shakeTask=-1)},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterSkillComponent2D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillScale=2,e.keepScaleTime=4e3,e.scaleChangeTime=2e3,e.skillType1Interval=5,e.skillTpye1RandomTime=3,e.skillMoveToMainPlayerInterval=2,e.skillFireInterval=5,e.createMonsterInterval=5,e.childRange=50,e.childCount=1,e.childMoveTime=500,e.createChildScale=.6,e.splitChileCount=2,e.currentSplitLev=1,e.maxSplitLev=3,e.splitScale=.8,e.skillTreatmentInterval=.1,e.skillTreatmentMaxRange=.5*Laya.stage.width,e}return __extends(e,t),e.prototype.onAdd=function(){this.monster=this.player,this.curRuningSkillId=[],this.curRuningSkill=[]},e.prototype.onReomove=function(){this.stopAll()},e.prototype.useSkill=function(){},e.prototype.Start=function(t,e,i){Log.Debug("怪物%i, uid:%i, 开始技能%s",this.player.playerID,this.player.UID,t),this.exe(t,e,i)},e.prototype.Stop=function(t){this.stop(t)},e.prototype.End=function(t,e){this.end(t,e)},e.prototype.ConstainSkill=function(t){return this.curRuningSkillId.indexOf(t)>=0},e.prototype.GetSkill=function(t){var e=this.curRuningSkillId.indexOf(t);return this.curRuningSkill[e]},e.prototype.exe=function(t,e,i){if(this.curRuningSkillId.indexOf(t)>=0)Log.Error("当前怪物已经开始技能%s,不重复执行",t);else{var n=this.getMonsterSkill(t);n.Start(this.player,e,i),this.curRuningSkill.push(n),this.curRuningSkillId.push(t)}},e.prototype.stop=function(t){var e=this.curRuningSkillId.indexOf(t);e<0?Log.Error("当前怪物没有开始技能%s,无法停止",t):(this.curRuningSkill[e].Stop(this.player,null),this.curRuningSkill.splice(e,1),this.curRuningSkillId.splice(e,1))},e.prototype.end=function(t,e){var i=this,n=this.curRuningSkillId.indexOf(t);n<0?Log.Error("当前怪物没有开始技能%s,无法End",t):this.curRuningSkill[n].End(this.player,function(){i.curRuningSkill.splice(n,1),i.curRuningSkillId.splice(n,1),e()},null)},e.prototype.stopAll=function(){for(var t=0;t<this.curRuningSkill.length;t++){this.curRuningSkill[t].Stop(this.player,null)}this.curRuningSkillId=[],this.curRuningSkill=[]},e.prototype.getMonsterSkill=function(t){switch(t){case EnumMonsterPowerType.ScaleUp:return new ScaleUpSkill;case EnumMonsterPowerType.Healing:return new HealingSkill;case EnumMonsterPowerType.Spawn:return new SpawnSkill;case EnumMonsterPowerType.Attach:return new AttachSkill;case EnumMonsterPowerType.Attack:return new AttackSkill;case EnumMonsterPowerType.Explosion:return new ExplosionSkill;case EnumMonsterPowerType.FollowPlayer:return new FollowSkill;case EnumMonsterPowerType.Split:return new SplitSkill;default:return Log.Error("没有对应Monster的技能逻辑 %s",t),null}},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterBulletMoveComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onbulletMoveHander=function(t){var e=this.moveDir.x*this.SpeedX*t,i=this.moveDir.y*this.SpeedY*t;this.player.movePlayer(-e,-i)},e.prototype.onBulletOutStage=function(){BulletManager.GetInstance().Recycle(this.player),this.player.comParent.visible=!1},e}(BulletMoveComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},InputComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"InputScale",{set:function(t){this.inputScale=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MouseDown",{get:function(){return this.isMouseDown},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.isMouseDown=!1,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.mouseOut),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove),this.active=!0,this.mainPlayer=this.player},e.prototype._destroy=function(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.mouseUp),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.mouseOut),Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove)},e.prototype.mouseDown=function(t){this.isMouseDown||(this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.touchDownID=t.touchId,this.touchDownX=0,this.touchDownY=0,this.touchDownTime=Laya.timer.currTimer,this.isMouseDown=!0),ConstDefine.TEST_EFFICIENCY&&!ConstDefine.INPUT_SWITCH||!GameDataManager.getInstance().MatchInfo.IsGameStart()||(this.mainPlayer.bulletComp.EnableFire=!0)},e.prototype.mouseUp=function(t){if(this.isMouseDown){if(t.touchId!=this.touchDownID)return;Laya.timer.currTimer,this.touchDownTime;this.touchDownX=0,this.touchDownY=0,this.isMouseDown=!1}this.mainPlayer.bulletComp.EnableFire=!1},e.prototype.mouseOut=function(t){if(this.isMouseDown){if(t.touchId!=this.touchDownID)return;Laya.timer.currTimer,this.touchDownTime;this.touchDownX=0,this.touchDownY=0,this.isMouseDown=!1}this.mainPlayer.bulletComp.EnableFire=!1},e.prototype.mouseMove=function(t){if(this.active&&t.touchId==this.touchDownID&&this.isMouseDown){var i=this.lastMouseX-Laya.stage.mouseX,n=this.lastMouseY-Laya.stage.mouseY;this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.touchDownX+=Math.abs(i),this.touchDownY+=Math.abs(n),GameDataManager.getInstance().MatchInfo.IsGameStart()&&this.player.movePlayer(i*e.inputScale,n*e.inputScale)}},e.prototype.SetActive=function(t){this.active=t},e}(ComponentBase2D);InputComponent2D.inputScale=1;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PlayerAnimComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rebornAlphaAnimTweenId=-1,e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onRemove=function(){},e.prototype.PlayRebornAlphaAnim=function(t,e){var i=this;this.rebornAlphaAnimTweenId=Tween2DUtil.getInst().to({node:this.player.viewComp.View,duration:.5,alpha:.2,repeated:e/.5,tweenFunc:TweenFunc.PingPong.easeInOut,onComplete:cbhandler.gen_handler(function(){i.rebornAlphaAnimTweenId=-1,t&&t()},this)})},e.prototype.StopRebornAlphaAnim=function(){this.rebornAlphaAnimTweenId>0&&(Tween2DUtil.getInst().kill(this.rebornAlphaAnimTweenId),this.rebornAlphaAnimTweenId=-1)},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PlayerEffectComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(EffectComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},EnumPlayerCollisionMode;!function(t){t[t.All=0]="All",t[t.PropOnly=1]="PropOnly"}(EnumPlayerCollisionMode||(EnumPlayerCollisionMode={}));var PlayerHitComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SetCollisionMode=function(t){this.collisionMode=t},e.prototype.checkHitHandler=function(){if(this.player.State!=EnumPlayerState.Die&&!GameDataManager.getInstance().MatchInfo.IsGameEnd()&&(!ConstDefine.TEST_EFFICIENCY||ConstDefine.PLAYER_COLLISION)){if(this.collisionMode==EnumPlayerCollisionMode.All){for(var t=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID).ColliderSize,e=new Vec2(t[0],t[1]),i=CollisionDetector.Instance.CheckMonsterCollision(this.player.PlayerPos,e,!1),n=0;n<i.length;n++){var o=i[n];return Log.Debug("玩家碰撞怪物%i, uid%i, 死亡",o.playerID,o.UID),void Facade.instance.sendNotification(NotificationNames.MAIN_PLAYER_DIE)}var r=CollisionDetector.Instance.CheckMonsterBulletCollision(this.player.GetCollisionShapeInfo());if(r)return Log.Debug("玩家碰撞怪物子弹%i, uid%i, 死亡",r.playerID,r.UID),void Facade.instance.sendNotification(NotificationNames.MAIN_PLAYER_DIE)}for(var a=CollisionDetector.Instance.CheckPropCollision(this.player.GetCollisionShapeInfo()),n=0;n<a.length;n++){var s=a[n];this.playPropSound(s),this.player.BuffComp.AddBuff(s.PropBuff,null),PropManager.GetInstance().Recycle(s.Type,s),Log.Debug("玩家碰到道具buff %s",EnumBuffType[s.PropBuff])}}},e.prototype.startCheckHit=function(){t.prototype.startCheckHit.call(this),this.SetCollisionMode(EnumPlayerCollisionMode.All)},e.prototype.stopCheckHit=function(){t.prototype.stopCheckHit.call(this)},e.prototype.playPropSound=function(t){ConfigManager.GetInstance().GetBuffConfig(t.PropBuff).BuffType==EnumBuffEffectType.Buff?AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_buff_01):AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_buff_02)},e}(HitComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PlayerSkillComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onReomove=function(){},e.prototype.Start=function(){var t=GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID;Log.Debug("玩家开始技能%s",EnumSideWeaponType[t]);var e=ConfigManager.GetInstance().GetWeaponConfig(t);this.exe(e)},e.prototype.Stop=function(){var t=GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID;Log.Debug("玩家停止技能%s",EnumSideWeaponType[t]);var e=ConfigManager.GetInstance().GetWeaponConfig(t);this.stop(e)},e.prototype.exe=function(t){null==this.curWeapon?(this.curWeapon=this.getWeaponSkill(t.GetID()),this.curWeapon.Start(this.player,t)):Log.Error("当前技能已经开始执行, 不需要重复执行")},e.prototype.stop=function(t){null!=this.curWeapon?(this.curWeapon.Stop(this.player,t),this.curWeapon=null):Log.Warn("技能已经停止, 不需要重复停止")},e.prototype.getWeaponSkill=function(t){switch(t){case EnumSideWeaponType.Missile:return new MissileWeapon;case EnumSideWeaponType.Laser:return new LaserWeapon;case EnumSideWeaponType.Guard:return new GuardWeapon;case EnumSideWeaponType.MagnetDisturb:return new MagnetDisturbWeapon;case EnumSideWeaponType.ChildPlane:return new ChildPlaneWeapon;case EnumSideWeaponType.ElectricNet:return new ElectricNetWeapon;default:return Log.Error("没有对应武器的技能逻辑 %i",t),null}},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},EnumSlotType;!function(t){t[t.None=0]="None",t[t.Alliance=1]="Alliance",t[t.ChildPlane=2]="ChildPlane"}(EnumSlotType||(EnumSlotType={}));var PlayerSlotComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curSlotType=EnumSlotType.None,e}return __extends(e,t),e.prototype.onAdd=function(){this.Reset()},e.prototype.onReomove=function(){this.Reset()},e.prototype.OnEnterMatch=function(t){this.Reset()},e.prototype.OnExitMatch=function(){this.Reset()},e.prototype.Reset=function(){this.curSlotType=EnumSlotType.None,this.planePositionSlot=[]},e.prototype.getEmpetySlot=function(){for(var t=-1,e=0;e<this.planePositionSlot.length;e++)if(this.planePositionSlot[e]==EnumSlotType.None){t=e;break}return t<0&&(this.planePositionSlot.push(EnumSlotType.None),t=this.planePositionSlot.length-1),t},e.prototype.OccupySlot=function(t,e){this.planePositionSlot[t]!=EnumSlotType.None&&Log.Error("slot index %i 不为空, 不可以被占用"),this.curSlotType==EnumSlotType.None&&(this.curSlotType=e),this.planePositionSlot[t]=e,e==EnumSlotType.Alliance&&this.ResetSlotInterval(e)},e.prototype.ForceOccupySlot=function(t,e){this.planePositionSlot[t]!=EnumSlotType.None&&(Facade.instance.sendNotification(NotificationNames.SLOT_FORCE_OCCUPIED,t),this.planePositionSlot[t]=EnumSlotType.None),this.OccupySlot(t,e)},e.prototype.ClearSlot=function(t,e){this.planePositionSlot[t]=EnumSlotType.None,e==EnumSlotType.Alliance&&this.ResetSlotInterval(EnumSlotType.ChildPlane)},e.prototype.ResetSlotInterval=function(t){this.curSlotType!=t&&(this.curSlotType=t,Facade.instance.sendNotification(NotificationNames.SLOT_INTERVAL_CHANGED,t))},e.prototype.getAlliancePlaneRelativePos=function(){return new Vec2(-this.player.ViewSize.x,0)},e.prototype.getChildPlaneRelativePosBySlotIndex=function(t,e){var i=e,n=this.player.ViewSize,o=new Vec2(0,0),r=t%2==0,a=Math.floor(t/2)+1,s=o.x+(r?-1:1)*(.5*(n.x-i.x)+a*(i.x+10));return this.curSlotType==EnumSlotType.Alliance&&r&&(s-=n.x-i.x),new Vec2(s,0)},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},TailComponent=function(t){function e(e){var i=t.call(this)||this;return i.tailAnim=null,i.animCacheName="animCacheName",i.CreateAnimation(e),i}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onRemove=function(){this.tailAnim&&(this.tailAnim.destroy(!0),this.tailAnim=null)},e.prototype.CreateAnimation=function(t){if(!this.tailAnim){var e=ConfigManager.GetInstance().GetWeaponConfig(t);this.tailAnim=new Laya.Animation,this.tailAnim.loadAtlas("res/atlas/resources/tailAnim.atlas",Laya.Handler.create(this,this.onLoaded,[e]),this.animCacheName)}},e.prototype.onLoaded=function(t){this.player.comParent.addChild(this.tailAnim),this.tailAnim.zOrder=-1,this.tailAnim.interval=ConstDefine.TAIL_ANIM_INTERVAL,this.tailAnim.play(0,!0,this.animCacheName,!0),this.SetTailPosByWeapon(t)},e.prototype.SetTailPosByWeapon=function(t){this.tailAnim&&this.tailAnim.pos(t.TailAnimPos[0],t.TailAnimPos[1])},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PropMoveComponent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BeforeStartMovement=function(){this.ROTATE_VIEW_ON_DIR_CHANGE=!1,t.prototype.BeforeStartMovement.call(this);var e=ConfigManager.GetInstance().GetPropConfig(this.player.Type);this.speedX=e.MoveSpeed,this.speedY=e.MoveSpeed},e}(RandomMovementComponent),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Show2DShapeComponent=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enable=!1,e}return __extends(e,t),e.prototype.onAdd=function(){this.enable&&(null==this.shapeSprite&&(this.shapeSprite=new Laya.Sprite),this.player.AddChild(this.shapeSprite),this.shapeSprite.visible=!1,this.shapeSprite.zOrder=100)},e.prototype.onReomove=function(){this.enable&&this.shapeSprite&&this.shapeSprite.destroy(!0)},e.prototype.SetShape=function(t){this.shapeInfo=t},e.prototype.ShowShape=function(t){void 0===t&&(t=!0),this.enable&&(this.shapeSprite.visible=t,t&&(this.shapeSprite.graphics.clear(),this.setCollisionRegionActive(t,!0),this.setCollisionRegionActive(t,!1,"#FF0000")))},e.prototype.setCollisionRegionActive=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i="#FFFF00"),this.enable&&(this.shapeSprite.visible=t,t)){this.SetShape(this.player.GetCollisionShapeInfo(e));this.shapeInfo.shape;switch(this.shapeInfo.shape){case EnumCollisionShape.Box:var n=(o=this.shapeInfo).size;this.shapeSprite.graphics.drawRect(.5*-n.x,.5*-n.y,n.x,n.y,i),this.shapeSprite.rotation=o.rotation;break;case EnumCollisionShape.Circle:var o=this.shapeInfo,r=CommonUtil2D.GetPosUnderTargetObj(this.shapeSprite,StageManager.GetInstance().playerParent),a=this.shapeInfo.center.sub(r);this.shapeSprite.graphics.drawCircle(a.x,a.y,o.radius,i);break;case EnumCollisionShape.Sector:var o=this.shapeInfo,r=CommonUtil2D.GetPosUnderTargetObj(this.shapeSprite,StageManager.GetInstance().playerParent),a=this.shapeInfo.center.sub(r);this.shapeSprite.graphics.drawPie(a.x,a.y,o.radius,.5*-o.sectorAngle-90,.5*o.sectorAngle-90,i),this.shapeSprite.rotation=o.rotation}}},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ViewComponentBase2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"View",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewSize",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.showView()},e.prototype.onRemove=function(){this.player=null,this.destoryView()},e.prototype.showView=function(t){this.destoryView(),this.createView(t),this.setPlayerView(),this.onVewCreated()},e.prototype.createView=function(t){},e.prototype.destoryView=function(){},e.prototype.setPlayerView=function(){},e.prototype.onVewCreated=function(){},e.prototype.ChangeView=function(t){},e.prototype.setViewScale=function(t,e){},e.prototype.SetActive=function(t){},e}(ComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ImageViewComponent=function(t){function e(e){var i=t.call(this)||this;return i.img_Second=new Laya.Image,i.imgUrl=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"ViewSize",{get:function(){return new Vec2(this.view.width*this.view.scaleX,this.view.height*this.view.scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"View",{get:function(){return this.view},enumerable:!0,configurable:!0}),e.prototype.createView=function(){this.createImageView(this.imgUrl)},e.prototype.ChangeView=function(t){this.imgUrl=t,this.showView()},e.prototype.createImageView=function(t){this.view=new Laya.Image,this.view.skin=t,this.view.anchorX=.5,this.view.anchorY=.5,this.player.comParent.addChild(this.view),this.player.comParent.addChild(this.img_Second),this.width=this.view.width,this.height=this.view.height,this.SetActive(!0)},e.prototype.destoryView=function(){this.view&&this.view.destroy(!0),this.view=null},e.prototype.setPlayerView=function(){this.player.viewHeight=this.view.height,this.player.viewHeightHalf=.5*this.view.height,this.player.viewWidth=this.view.width,this.player.viewWidthHalf=.5*this.view.width},e.prototype.checkHit=function(t){var e=!1;return Math.abs(this.player.comParent.x-t.x)<this.player.viewHeightHalf*this.player.viewComp.view.scaleX+t.width&&Math.abs(this.player.comParent.y-t.y)<this.view.height+t.height&&(e=!0),e},e.prototype.setViewScale=function(t,e){this.view.scale(t,e)},e.prototype.SetActive=function(t){this.player.setPlayerActive(t)},e.prototype.changeStyle=function(t){this.img_Second?this.img_Second.graphics.clear():this.img_Second=new Laya.Image,this.img_Second.anchorX=.5,this.img_Second.anchorY=.5,this.img_Second.loadImage(this.imgUrl);var e=new Laya.ColorFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,.5,0,0,0,0,1,0]);this.img_Second.filters=[e],t.addChild(this.img_Second),console.log("--------------"),console.log("width:"+this.width+"height"+this.height),console.log(this.img_Second),console.log(t),console.log(this.view)},e}(ViewComponentBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},SpineViewComponent=function(t){function e(e){var i=t.call(this)||this;return i.spineConfigID=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"ViewSize",{get:function(){return new Vec2(this.viewSize.x*this.view.scaleX,this.viewSize.y*this.view.scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"View",{get:function(){return this.view},enumerable:!0,configurable:!0}),e.prototype.createView=function(){this.createSpineView(this.spineConfigID)},e.prototype.ChangeView=function(t){this.spineConfigID=t,this.showView()},e.prototype.createSpineView=function(t){this.view=MatchSpineManager.Instance.Spawn(t);var e=ConfigManager.GetInstance().GetSpineConfig(t);this.viewSize=new Vec2(e.SpineSize[0],e.SpineSize[1]),this.view.pivot(e.SpinePivot[0],e.SpinePivot[1]),this.player.comParent.addChild(this.view),this.specialDeal(t),this.SetActive(!0)},e.prototype.specialDeal=function(t){var e=ZOrderDefine.VIEW_ZORDER;this.view.zOrder=e},e.prototype.destoryView=function(){this.view&&MatchSpineManager.Instance.Recycle(this.spineConfigID,this.view),this.view=null},e.prototype.setPlayerView=function(){this.player.viewHeight=this.viewSize.y,this.player.viewHeightHalf=.5*this.viewSize.y,this.player.viewWidth=this.viewSize.x,this.player.viewWidthHalf=.5*this.viewSize.x},e.prototype.setViewScale=function(t,e){this.view.scale(t,e)},e.prototype.SetActive=function(t){if(t){this.view.visible=!0,this.view.play(0,!0);var e=ConfigManager.GetInstance().GetMonsterConfig(this.player.playerID);e?this.view.playbackRate(ConstDefine.FLY_ANI_SPEED*e.MoveSpeed/6):Log.Error("怪物Id:"+this.player.playerID+"  不存在",e)}else this.view.visible=!1,this.view.stop()},e.prototype.Pause=function(t){t?this.view.stop():this.view.play(0,!0)},e}(ViewComponentBase2D),EnumBuffState;!function(t){t[t.Start=0]="Start",t[t.Ending=1]="Ending",t[t.Complete=2]="Complete"}(EnumBuffState||(EnumBuffState={}));var BulletThroughBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.BulletThrough),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this));t?t.SetBulletThroughable(!0):Log.Error("非Plane类型无法使用buff %s",EnumBuffType.BulletThrough)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,t.SetBulletThroughable(!1),e&&e()},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},PlayerBase2D=function(t){function e(e){var i=t.call(this)||this;return i.playerOrderZ=0,i.compList=Array(),i.tempBoxCollisionInfo=null,i.beforeCreate(),i.playerID=e,i.compList=new Array,i.initComParnet(),i}return __extends(e,t),Object.defineProperty(e.prototype,"Show2DShapeCom",{get:function(){return this.showShapCom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewSize",{get:function(){return this.viewComp.ViewSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UID",{get:function(){return this.uId},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){},e.prototype.initComponent=function(){this.showShapCom=new Show2DShapeComponent,this.addComponent(this.showShapCom)},e.prototype.initComParnet=function(){this.comParent=new Laya.Sprite,this.AddToStage()},e.prototype.addComponent=function(t){t.player=this,t.onAdd(),this.compList.push(t)},e.prototype.removeAllComponent=function(){for(var t=this.compList.length,e=0;e<t;e++)this.compList[e].onReomove(),this.compList[e]=null;this.compList=null},e.prototype.AddToStage=function(){var t=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);StageManager.GetInstance().playerParent.addChild(this.comParent),this.comParent.pos(t.x,t.y),this.comParent.zOrder=this.playerOrderZ},e.prototype.RemoveFromStage=function(){this.comParent.removeSelf()},e.prototype.isInStage=function(){var t=CommonUtil2D.GetGlobalPosition(this.comParent);return this.isPosInStage(t.x,t.y)},e.prototype.isPosInStage=function(t,e,i){void 0===i&&(i=!1);var n=(i?0:1)*this.viewWidthHalf,o=(i?0:1)*this.viewHeightHalf,r=!0;return(t<0-n||t>Laya.stage.width+n||e<0-o||e>Laya.stage.height+o)&&(r=!1),r},e.prototype.GetCollisionShapeInfo=function(t){void 0===t&&(t=!1);var e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);return null==this.tempBoxCollisionInfo&&(this.tempBoxCollisionInfo=new BoxCollisonInfo(null,null)),this.tempBoxCollisionInfo.center=new Vec2(e.x,e.y),this.tempBoxCollisionInfo.size=new Vec2(this.viewWidth,this.viewHeight),new BoxCollisonInfo(new Vec2(e.x,e.y),new Vec2(this.viewWidth,this.viewHeight))},e.prototype.GoLive=function(){this.state=EnumPlayerState.Live,this.setPlayerActive(!0)},e.prototype.Die=function(){this.state=EnumPlayerState.Die,this.setPlayerActive(!1)},e.prototype.IsAlive=function(){return this.state==EnumPlayerState.Live},e.prototype.DestroyPlayer=function(){this.setPlayerActive(!0),this.removeAllComponent(),this.RemoveFromStage(),this.comParent.destroy(!0),this.tempBoxCollisionInfo=null},e.prototype.setPlayerPos=function(t,e){this.comParent.x=t,this.comParent.y=e},Object.defineProperty(e.prototype,"PlayerPos",{get:function(){return new Vec2(this.comParent.x,this.comParent.y)},enumerable:!0,configurable:!0}),e.prototype.movePlayer=function(t,e){this.comParent.x-=t,this.comParent.y-=e},e.prototype.setPlayerActive=function(t){this.comParent.visible=t},e.prototype.AddChild=function(t){var e=CommonUtil2D.GetPosUnderTargetObj(t,this.comParent);this.comParent.addChild(t),t.pos(e.x,e.y)},e}(Mediator),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Plane=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"BuffComp",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.effectComp=new PlayerEffectComponent2D,this.addComponent(this.effectComp)},e.prototype.ChangeBullet=function(t){var e=this.getBulletType();e?this.bulletComp.ChangeBulletType(e.LatestBullletOutLook,e.AllRuningBulletBuff):Log.Error("没有buff组件, 不需要切换子弹形态")},e.prototype.SetBulletThroughable=function(t){this.bulletComp.EnableThrough=t},e.prototype.getBulletType=function(){if(!this.BuffComp)return null;var t=new BulletBuffInfo;t.AllRuningBulletBuff=[];for(var e=EnumBulletOutLookType.MainPlayerBullet,i=this.BuffComp.AllBuffs,n=0;n<i.length;n++){var o=i[n];o==EnumBuffType.Gold&&(e=EnumBulletOutLookType.MainPlayerBullet_GoldBuffs,t.AllRuningBulletBuff.push(o)),o==EnumBuffType.FightBack&&(e=EnumBulletOutLookType.MainPlayerBullet_FightBackBuff,t.AllRuningBulletBuff.push(o)),o==EnumBuffType.PowerIntensified&&(e=EnumBulletOutLookType.MainPlayerBullet_PowerBuff,t.AllRuningBulletBuff.push(o)),o==EnumBuffType.FireSpeedIntensified&&t.AllRuningBulletBuff.push(o)}return t.LatestBullletOutLook=e,t},e}(PlayerBase2D),BulletBuffInfo=function(){return function(){}}(),ScriptObjectPool=function(){function t(){}return t.prototype.Init=function(t,e,i,n){void 0===n&&(n=!0),this.param=i,this.curType=e,this.m_UnusedObjects=new Array,this.m_UsedObjects=new Array,this.recordeUsed=n;for(var o=0;o<t;o++){var r=new this.curType;r.InitPool(this,this.param),this.m_UnusedObjects.push(r)}},t.prototype.Spawn=function(t){var e=null;return this.m_UnusedObjects.length>0?e=this.m_UnusedObjects.pop():(e=new this.curType).InitPool(this,this.param),this.recordeUsed&&this.m_UsedObjects.push(e),e.OnSpawn(t),e},t.prototype.Recycle=function(t){if(t.OnRecycle(),this.m_UnusedObjects.push(t),this.recordeUsed){var e=this.m_UsedObjects.indexOf(t);e>=0&&this.m_UsedObjects.splice(e,1)}},t.prototype.Destory=function(){for(t=0;t<this.m_UnusedObjects.length;t++){(e=this.m_UnusedObjects[t]).OnDestory()}this.m_UnusedObjects=null;for(var t=0;t<this.m_UsedObjects.length;t++){var e=this.m_UsedObjects[t];e.OnRecycle(),e.OnDestory()}this.m_UsedObjects=null},t.prototype.GetAllSpawned=function(){return this.m_UsedObjects},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},AlliancePlane=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curTweenId=-1,e.slotIndex=-1,e}return __extends(e,t),Object.defineProperty(e.prototype,"BuffComp",{get:function(){return this.buffComp},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){},e.prototype.initComponent=function(){t.prototype.initComponent.call(this);var e=ConfigManager.GetInstance().GetMainPlayerConfig();this.comParent.x=e.BirthPoint[0],this.comParent.y=e.BirthPoint[1];var i=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID).weaponSkin;this.viewComp=new ImageViewComponent(i),this.viewComp.changeStyle(this.comParent),this.addComponent(this.viewComp),this.bulletComp=new BulletComponent2D(EnumBulletOutLookType.MainPlayerBullet),this.addComponent(this.bulletComp),this.buffComp=new BuffComponent,this.addComponent(this.buffComp),this.comParent.name="AlliancePlane"+CommonUtil.GetUID()},e.prototype.InitPool=function(t,e){this.initComponent(),this.viewComp.SetActive(!1)},e.prototype.OnSpawn=function(){this.viewComp.SetActive(!0),this.bulletComp.OnEnterMatch(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level),this.buffComp.Reset(),this.mediatorName=this.comParent.name,Facade.instance.registerMediator(this)},e.prototype.OnRecycle=function(){this.viewComp.SetActive(!1),this.bulletComp.OnExitMatch(),this.buffComp.stopAll(),Facade.instance.removeMediator(this.mediatorName)},e.prototype.OnDestory=function(){this.DestroyPlayer()},e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[NotificationNames.UI_OnPropBuff]},e.prototype.handleNotification=function(e){switch(t.prototype.handleNotification.call(this,e),e.getName()){case NotificationNames.UI_OnPropBuff:var i=e.getBody(),n=i.BuffType;i.Active?this.addBuff(n):this.buffComp.stopBuff(n)}},e.prototype.copyBuffFromMain=function(){for(var t=PlayerManager.GetInstance().MainPlayer.BuffComp.AllBuffs,e=0;e<t.length;e++){var i=t[e];this.addBuff(i)}},e.prototype.addBuff=function(t){ConfigManager.GetInstance().GetBuffConfig(t).copy&&this.buffComp.AddBuff(t,null)},e.prototype.start=function(t){var e=this;this.curTweenId=-1,this.playEnterAnim(t,function(){e.EnableShoot(!0),e.copyBuffFromMain()})},e.prototype.stop=function(){this.EnableShoot(!1),this.stopAnim(),this.clearSlot(),GamePoolManager.Instance.Recycle(this,CallAllianceBuff.GetPoolID())},e.prototype.end=function(t){var e=this;this.EnableShoot(!1),this.clearSlot(),this.playExitAnim(function(){e.curTweenId=-1,e.stop(),t()})},e.prototype.playEnterAnim=function(t,e){this.curTweenId>=0&&this.stopAnim(),t.comParent.addChild(this.comParent),this.setPlayerPos(0,0),this.occupySlot();var i=PlayerManager.GetInstance().MainPlayer.SlotComp.getAlliancePlaneRelativePos();this.curTweenId=Tween2DUtil.getInst().to({node:this.comParent,duration:1,delay:0,x:i.x,y:i.y,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){e()},this)})},e.prototype.playExitAnim=function(t){this.curTweenId>=0&&this.stopAnim(),CommonUtil2D.ChangeToGrandParent(this.comParent,this.comParent.parent.parent),this.curTweenId=Tween2DUtil.getInst().to({node:this.comParent,duration:1,delay:0,y:-10,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){t()},this)})},e.prototype.stopAnim=function(){this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1},e.prototype.EnableShoot=function(t){this.bulletComp.EnableFire=t},e.prototype.occupySlot=function(){this.slotIndex=0,PlayerManager.GetInstance().MainPlayer.SlotComp.ForceOccupySlot(this.slotIndex,EnumSlotType.Alliance)},e.prototype.clearSlot=function(){this.slotIndex>=0&&PlayerManager.GetInstance().MainPlayer.SlotComp.ClearSlot(this.slotIndex,EnumSlotType.Alliance)},e}(Plane),CallAllianceBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(e,i,n){this.state=EnumBuffState.Start,this.onEnd=n,t.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.CallAlliance),this.resetParam(),GamePoolManager.Instance.InitPool(t.GetPoolID(),1,AlliancePlane),this.StartChildPlane(e,t.config),this.startTimer()},t.prototype.startTimer=function(){var e=this;this.timerId=TimeManager.getInst().once(t.config.duration,cbhandler.gen_handler(function(){Log.Debug("callaliance 技能到时间 %i ",e.timerId),e.timerId=-1,e.onEnd(),e.onEnd=null},this))},t.prototype.stopTimer=function(){this.timerId>=0&&(Log.Debug("callaliance 技能clean up %i ",this.timerId),TimeManager.getInst().remove(this.timerId)),this.timerId=-1},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.state==EnumBuffState.Start?(this.stopTimer(),this.startTimer()):(this.Stop(t,null),this.Start(t,i,this.onEnd))},t.prototype.Stop=function(t,e){for(var i=0;i<this.spawnedPlane.length;i++){var n=this.spawnedPlane[i];this.StopChildPlane(n)}this.cleanUp(t,null),this.state=EnumBuffState.Complete},t.prototype.End=function(t,e,i){var n=this;this.state=EnumBuffState.Ending;for(var o=0,r=this.spawnedPlane.length,a=0;a<this.spawnedPlane.length;a++){var s=this.spawnedPlane[a];this.EndChildPlane(s,function(){++o==r&&n.cleanUp(t,e)})}o==r&&this.cleanUp(t,e)},t.prototype.cleanUp=function(e,i){this.stopTimer(),GamePoolManager.Instance.Destory(t.GetPoolID()),this.state=EnumBuffState.Complete,i&&i()},t.GetPoolID=function(){return"CallAllianceBuff"+t.config.GetID()},t.prototype.resetParam=function(){this.spawnedPlane=[]},t.prototype.StartChildPlane=function(e,i){var n=GamePoolManager.Instance.Spawn(t.GetPoolID());n.start(e),this.recordChildPlane(n)},t.prototype.EndChildPlane=function(t,e){var i=this;t.end(function(){i.deleteChildPlaneRecord(t),e()})},t.prototype.StopChildPlane=function(t){this.deleteChildPlaneRecord(t),t.stop()},t.prototype.recordChildPlane=function(t){this.spawnedPlane.push(t)},t.prototype.deleteChildPlaneRecord=function(t){this.spawnedPlane.splice(this.spawnedPlane.indexOf(t),1)},t}(),EnlargeBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Enlarge),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this)),Facade.instance.sendNotification(NotificationNames.MONSTER_ENLARGE,!0)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,Facade.instance.sendNotification(NotificationNames.MONSTER_ENLARGE,!1),e&&e()},t}(),FightBackBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.FightBack),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this));t?t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet_FightBackBuff):Log.Error("非Plane类型无法使用buff %s",EnumBuffType.FightBack)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e(),t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet)},t}(),FirePowerBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.PowerIntensified),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this));t?t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet_PowerBuff):Log.Error("非Plane类型无法使用buff %s",EnumBuffType.PowerIntensified)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e(),t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet)},t}(),FireSpeedBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.FireSpeedIntensified),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this));t?t.ChangeBullet():Log.Error("非Plane类型无法使用buff %s",EnumBuffType.FireSpeedIntensified)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e(),t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet)},t}(),GoldBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Gold),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this));t?t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet_GoldBuffs):Log.Error("非Plane类型无法使用buff %s",EnumBuffType.Gold)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e(),t.ChangeBullet(EnumBulletOutLookType.MainPlayerBullet)},t}(),LimitInputBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.LimitInput),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){n.timerId=-1,n.onEnd(),n.onEnd=null},this)),InputComponent2D.InputScale=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.LimitInput).Param1},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,InputComponent2D.InputScale=1,e&&e()},t}(),MagnetFreezenBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(t,e,i){var n=this;this.onEnd=i,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.MagnetFreezen);t.Freeze(!0),this.timerId=TimeManager.getInst().once(e,cbhandler.gen_handler(function(){t.Freeze(!1),n.timerId=-1,n.onEnd(),n.onEnd=null},this))},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e()},t}(),WeakenBuff=function(){function t(){this.timerId=-1}return t.prototype.Start=function(e,i,n){var o=this;this.onEnd=n,this.config=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Weaken),this.timerId=TimeManager.getInst().once(this.config.duration,cbhandler.gen_handler(function(){o.timerId=-1,o.onEnd(),o.onEnd=null},this)),t.weakenScale<0&&(t.weakenScale=ConfigManager.GetInstance().GetBuffConfig(EnumBuffType.Weaken).Param1),Facade.instance.sendNotification(NotificationNames.MONSTER_PAUSE,t.weakenScale)},t.prototype.Refresh=function(t,e,i){this.onEnd=e,this.Stop(t,null),this.Start(t,i,this.onEnd)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,Facade.instance.sendNotification(NotificationNames.MONSTER_PAUSE,1),e&&e()},t}();WeakenBuff.weakenScale=-1;var AttachSkill=function(){function t(){this.fireBulletCount=0}return Object.defineProperty(t.prototype,"Config",{get:function(){return this.config},enumerable:!0,configurable:!0}),t.prototype.InitParam=function(e){t.ATTACH_RADIUS=e.Param1,t.MAX_ATTACH_NUM=e.Param2<=0?1e4:e.Param2},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.reset(),this.startTimer(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.OnParentKill(t),e&&e()},t.prototype.startTimer=function(e,i){this.timerId=TimeManager.getInst().once(t.CHECH_ATTCH_INTERVAL,cbhandler.gen_handler(this.exe,this,e,i))},t.prototype.exe=function(t,e){this.checkAttach(t,e),this.startTimer(t,e)},t.prototype.checkAttach=function(e,i){e.State==EnumPlayerState.Die&&Log.Debug("玩家已经死亡UID:%i, playerID: %i",e.UID,e.playerID),AttachDataCenter.Instance.CheckAttach(t.CHECH_ATTCH_INTERVAL,t.MAX_ATTACH_NUM)},t.prototype.Attach=function(t,e){AttachDataCenter.Instance.AddAttach(t,e),e.attributeComp.ContainsSkill(EnumMonsterPowerType.Attach)||e.skillComp.ConstainSkill(EnumMonsterPowerType.Attach)||e.skillComp.Start(EnumMonsterPowerType.Attach,this.config)},t.prototype.OnParentKill=function(t){AttachDataCenter.Instance.RemoveAttach(t)},t.prototype.reset=function(){this.timerId=-1},t}();AttachSkill.CHECH_ATTCH_INTERVAL=.2,AttachSkill.GOLABLE_ATTACHED_MONSTER_UID=null;var AttackSkill=function(){function t(){this.fireBulletCount=0}return t.prototype.InitParam=function(e){t.ATTACK_INTERVAL=e.Param1,t.FIRE_BULLET_COUNT=e.Param2},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.reset(),this.startTimer(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,e&&e()},t.prototype.startTimer=function(e,i){this.timerId=TimeManager.getInst().once(t.ATTACK_INTERVAL,cbhandler.gen_handler(this.exe,this,e,i))},t.prototype.exe=function(t,e){this.reset(),this.fireBullet(t,e)},t.prototype.fireBullet=function(e,i){this.timerId=-1,e.monsterBulletComp.skillFire(PlayerManager.GetInstance().MainPlayer.comParent),this.fireBulletCount++,this.fireBulletCount==t.FIRE_BULLET_COUNT?this.startTimer(e,i):this.timerId=TimeManager.getInst().once(t.BULLET_INTERVAL,cbhandler.gen_handler(this.fireBullet,this,e,i))},t.prototype.reset=function(){this.timerId=-1,this.fireBulletCount=0},t}();AttackSkill.BULLET_INTERVAL=.3;var ExplosionSkill=function(){function t(){this.explosionBulletNum=10,this.preapareFx=null,this.explosionFx=null}return t.prototype.InitParam=function(t){this.explosionBulletNum=t.Param1},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config)},t.prototype.Stop=function(t,e){this.preapareFx&&(t.monsterEffectComp.RemoveEffect(this.preapareFx,EnumSpineConfigID.MonsterPrepareExplosion),this.preapareFx=null),this.explosionFx&&(t.monsterEffectComp.RemoveEffect(this.explosionFx,EnumSpineConfigID.MonsterExplosion),this.explosionFx=null)},t.prototype.End=function(t,e,i){this.playPrepareExplosion(t,e)},t.prototype.playPrepareExplosion=function(t,e){var i=this;t.monsterMoveComp.monsterStop(),t.setPlayerActive(!0),this.preapareFx=t.monsterEffectComp.showEffect(0,EnumSpineConfigID.MonsterPrepareExplosion,null,null,function(){i.preapareFx=null,i.playExplosion(t,e)})},t.prototype.playExplosion=function(t,e){var i=this;t.setPlayerActive(!1),this.explosionFx=t.monsterEffectComp.showEffect(0,EnumSpineConfigID.MonsterExplosion,null,null,function(){i.explosionFx=null,i.shoot(t),e()})},t.prototype.shoot=function(t){for(var e=CommonUtil2D.DivideCircle(t.PlayerPos,10,this.explosionBulletNum),i=0;i<e.length;i++)t.monsterBulletComp.skillFireByTargetPos(e[i])},t}(),FollowSkill=function(){function t(){}return t.prototype.InitParam=function(e){t.FOLLOW_CHECK_RANGE=e.Param1,t.STOP_FOLLOW_CHECK_RANGE=e.Param2},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.reset(),this.startTimer(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1,e&&e()},t.prototype.startTimer=function(e,i){this.timerId=TimeManager.getInst().once(t.CHECK_FOLLOW_INTERVAL,cbhandler.gen_handler(this.exe,this,e,i))},t.prototype.exe=function(e,i){var n=!1,o=0;if(this.isFollowing?GameDataManager.getInstance().MatchInfo.IsGameEnd()||(n=!0,o=t.STOP_FOLLOW_CHECK_RANGE):(n=!0,o=t.FOLLOW_CHECK_RANGE),n){var r=PlayerManager.GetInstance().MainPlayer,a=r.PlayerPos;e.comParent.y<a.y&&CollisionDetector.Instance.IsPlayerInCircle(e.PlayerPos,o,r)?(e.monsterMoveComp.setMoveDir(a.sub(e.PlayerPos)),this.isFollowing=!0):(this.isFollowing&&e.monsterMoveComp.SetRandomDir(),this.isFollowing=!1)}this.timerId=-1,this.startTimer(e,i)},t.prototype.reset=function(){this.curTweenId=-1,this.timerId=-1,this.isFollowing=!1},t}();FollowSkill.CHECK_FOLLOW_INTERVAL=.2;var HealingSkill=function(){function t(){this.checkHitIntervalCount=0,this.checkHealingIntervalCount=0}return t.prototype.InitParam=function(e){t.NO_HIT_LIMIT=e.Param1,t.HEALING_RANGE_PERCENTAGE=e.Param2,e.Param3<=e.Param2&&(e.Param3=e.Param2+.1),t.OUT_HEALING_RANGE_PERCENTAGE=e.Param3,t.MAX_HEALING_NUM=e.Param4,t.HEALING_SPEED=e.Param5},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.reset(),this.checkStartSkill(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.stopSkill(t),e&&e()},t.prototype.reset=function(){this.timerId=-1,this.healingMonsterId=[],this.checkHitIntervalCount=0,this.checkHealingIntervalCount=0,this.healingOtherFx=[],this.healingSelfFx=null},t.prototype.checkStartSkill=function(e,i){this.timerId=-1;e.attributeComp.TimeSinceLastHit;if(e.attributeComp.TimeSinceLastHit>=t.NO_HIT_LIMIT)this.reset(),this.timerId=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this,e,i));else{var n=Math.max(t.NO_HIT_LIMIT-e.attributeComp.TimeSinceLastHit,t.CHECK_HIT_INTERVAL);this.timerId=TimeManager.getInst().once(n,cbhandler.gen_handler(this.checkStartSkill,this,e,i))}},t.prototype.update=function(e,i,n){if(this.checkHealingIntervalCount+=n,this.checkHitIntervalCount+=n,this.checkHitIntervalCount>=t.CHECK_HIT_INTERVAL){if(e.attributeComp.TimeSinceLastHit<t.NO_HIT_LIMIT)return this.stopSkill(e),void this.checkStartSkill(e,i);this.checkHitIntervalCount=0}if(this.checkHealingIntervalCount>=t.CHECK_Healing_INTERVAL){var o=t.MAX_HEALING_NUM-this.healingMonsterId.length;if(o>0)for(var r=this.GetHealingMonster(e,o,this.healingMonsterId),a=0;a<r.length;a++){var s=r[a];this.StartHealingOther(e,s)}this.checkHealingIntervalCount=0}e.attributeComp.IsFull()?this.PlaySelfHealingFx(e,!1):(this.PlaySelfHealingFx(e,!0),e.RecoverHp(e.attributeComp.MaxHP*t.HEALING_SPEED*n));for(a=this.healingMonsterId.length-1;a>=0;a--){var l=this.healingMonsterId[a],h=PlayerManager.GetInstance().GetMonsterByUid(l);if(null==h||h.attributeComp.IsFull())this.StopHealingOther(e,a);else{CollisionDetector.Instance.IsPlayerInCircle(e.PlayerPos,t.OUT_HEALING_RANGE_PERCENTAGE*Laya.stage.width*.5,h)?h.RecoverHp(h.attributeComp.MaxHP*t.HEALING_SPEED*n):this.StopHealingOther(e,a)}}for(a=0;a<this.healingOtherFx.length;a++)this.UpdateHealingOtherFxPosAndRotation(e,a)},t.prototype.stopSkill=function(t){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.StopAllHealingOtherFx(t),this.PlaySelfHealingFx(t,!1),this.reset()},t.prototype.StartHealingOther=function(t,e){var i=t.monsterEffectComp.showEffect(0,EnumSpineConfigID.MonsterHealOther);this.healingMonsterId.push(e.UID),this.healingOtherFx.push(i)},t.prototype.UpdateHealingOtherFxPosAndRotation=function(t,e){var i=this.healingOtherFx[e],n=this.healingMonsterId[e],o=PlayerManager.GetInstance().GetMonsterByUid(n);CommonUtil2D.LookAt(i,o.comParent),t.monsterEffectComp.setEffectPos(t.PlayerPos.x,t.PlayerPos.y,i);var r=t.PlayerPos.dist(o.PlayerPos)/ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.MonsterHealOther).SpineSize[1];t.monsterEffectComp.setEffectScale(r,r,i)},t.prototype.StopHealingOther=function(t,e){t.monsterEffectComp.RemoveEffect(this.healingOtherFx[e],EnumSpineConfigID.MonsterHealOther),this.healingMonsterId.splice(e,1),this.healingOtherFx.splice(e,1)},t.prototype.StopAllHealingOtherFx=function(t){for(var e=this.healingMonsterId.length-1;e>=0;e--)this.StopHealingOther(t,e)},t.prototype.PlaySelfHealingFx=function(t,e){if(e){if(this.healingSelfFx)return;this.healingSelfFx=t.monsterEffectComp.showEffect(0,EnumSpineConfigID.MonsterHealSelf,t.comParent,new Vec2(0,0))}else{if(null==this.healingSelfFx)return;t.monsterEffectComp.RemoveEffect(this.healingSelfFx,EnumSpineConfigID.MonsterHealSelf),this.healingSelfFx=null}},t.prototype.GetHealingMonster=function(e,i,n){for(var o=[],r=0,a=t.HEALING_RANGE_PERCENTAGE*Laya.stage.width*.5,s=CollisionDetector.Instance.CheckMonsterInCircle(e.PlayerPos,a,n),l=0;l<s.length;l++){var h=s[l];if(h.UID!=e.UID&&h.attributeComp.CurHP<h.attributeComp.MaxHP&&(o.push(h),++r==i))break}return o},t}();HealingSkill.CHECK_HIT_INTERVAL=.2,HealingSkill.CHECK_Healing_INTERVAL=.2;var ScaleUpSkill=function(){function t(){this.count=0}return t.prototype.InitParam=function(e){t.DURATION=e.Param1,t.TWEEN_TIME=e.Param2,t.SCALE_SIZE=e.Param3,t.MIN_FIRE_INTERVAL=e.Param4,t.MAX_FIRE_INTERVAL=e.Param5},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.reset(),this.startScalUpTimer(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1,e&&e()},t.prototype.startScalUpTimer=function(e,i){this.interval=t.MIN_FIRE_INTERVAL+Math.random()*(t.MAX_FIRE_INTERVAL-t.MIN_FIRE_INTERVAL),this.timerId=TimeManager.getInst().once(this.interval,cbhandler.gen_handler(this.exe,this,e,i,!0))},t.prototype.startScaleBackTimer=function(e,i){this.timerId=TimeManager.getInst().once(t.DURATION,cbhandler.gen_handler(this.exe,this,e,i,!1))},t.prototype.exe=function(t,e,i){i?this.scaleUp(t,this.startScaleBackTimer.bind(this,t,e)):this.scaleBack(t,this.startScalUpTimer.bind(this,t,e))},t.prototype.reset=function(){this.curTweenId=-1,this.timerId=-1,this.interval=0,this.count=0},t.prototype.scaleUp=function(e,i){e.attributeComp.AdjustScale2=t.SCALE_SIZE;var n=e.attributeComp.Scale;this.curTweenId=Tween2DUtil.getInst().to({node:e.viewComp.View,duration:t.TWEEN_TIME,delay:0,scalex:n.x,scaley:n.y,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){e.RefreshScale(),i()},this)})},t.prototype.scaleBack=function(e,i){e.attributeComp.AdjustScale2=1;var n=e.attributeComp.Scale;this.curTweenId=Tween2DUtil.getInst().to({node:e.viewComp.View,duration:t.TWEEN_TIME,delay:0,scalex:n.x,scaley:n.y,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){e.RefreshScale(),i()},this)})},t}(),SpawnSkill=function(){function t(){}return t.prototype.InitParam=function(e,i){t.SPAWN_INTERVAL=i.Param1,t.SIZE_HP_PERCENTAGE=i.Param2,this.SPAWN_MONSTER_ID=i.Param3>0?i.Param3:e.attributeComp.MonsterSpawnData.MonsterId,this.spawnPowerID=ConfigManager.GetInstance().GetMonsterConfig(this.SPAWN_MONSTER_ID).MonsterSkillID,this.spawnPowerConfigs=[];for(var n=0;n<this.spawnPowerID.length;n++){var o=this.spawnPowerID[n],r=o>0?ConfigManager.GetInstance().GetSkillConfig(o):null;r&&this.spawnPowerConfigs.push(r)}},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(t,this.config),this.reset(),this.startTimer(t,e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(t,e,i){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1,e&&e()},t.prototype.startTimer=function(e,i){this.timerId=TimeManager.getInst().once(t.SPAWN_INTERVAL,cbhandler.gen_handler(this.exe,this,e,i))},t.prototype.exe=function(e,i){if(e.State!=EnumPlayerState.Die&&!GameDataManager.getInstance().MatchInfo.IsGameEnd()){if(MonsterSpawnLogic.Instance.CheckCanSpawn()){var n=e.attributeComp.CopySpawnData();n.CanTriggerPropSpawn=!1,n.PowerNum=this.spawnPowerID.length,n.PowerConfigs=this.spawnPowerConfigs,n.MonsterId=this.SPAWN_MONSTER_ID,n.SizeScale=n.SizeScale.mul(t.SIZE_HP_PERCENTAGE);var o=PlayerManager.GetInstance().SpawnMonster(n.MonsterId,!1,n);o.setPlayerPos(e.PlayerPos.x,e.PlayerPos.y),o.monsterMoveComp.monsterRandomMove()}this.startTimer(e,i)}},t.prototype.reset=function(){this.curTweenId=-1,this.timerId=-1},t}(),SplitSkill=function(){function t(){this.splitedCount=0}return t.prototype.InitParam=function(e){t.SPAWN_NUM=e.Param1,t.MAX_SPLIT_NUM=e.Param2,t.SIZE_HP_PERCENTAGE=e.Param3},t.prototype.Start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.config=e[0],this.InitParam(this.config),this.splitedCount=e.length>1&&e[1]?e[1]:0,this.reset()},t.prototype.Stop=function(t,e){this.cleanUp()},t.prototype.End=function(t,e,i){this.cleanUp(),this.exe(t,i,e)},t.prototype.cleanUp=function(){this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1},t.prototype.exe=function(e,i,n){if(this.splitedCount<t.MAX_SPLIT_NUM)for(var o=0;o<t.SPAWN_NUM;o++){var r=e.attributeComp.CopySpawnData();r.CanTriggerPropSpawn=!1;var a=PlayerManager.GetInstance().SpawnMonster(r.MonsterId,!1,r),s=t.SIZE_HP_PERCENTAGE;a.ResetSizeAndHp(s,s),a.setPlayerPos(e.PlayerPos.x,e.PlayerPos.y),a.skillComp.Stop(EnumMonsterPowerType.Split),a.skillComp.Start(EnumMonsterPowerType.Split,this.config,this.splitedCount+1),a.monsterMoveComp.monsterRandomMove(),Log.Debug("分裂出怪物 %i",a.UID)}n()},t.prototype.reset=function(){this.curTweenId=-1},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ChildPlane=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curTweenId=-1,e}return __extends(e,t),e.prototype.beforeCreate=function(){},e.prototype.initComponent=function(){t.prototype.initComponent.call(this);var e=ConfigManager.GetInstance().GetMainPlayerConfig();this.comParent.x=e.BirthPoint[0],this.comParent.y=e.BirthPoint[1];var i=ConfigManager.GetInstance().GetWeaponConfig(ConstDefine.CHILD_PLANE_CONFIG_ID).weaponSkin;this.viewComp=new ImageViewComponent(i),this.addComponent(this.viewComp),this.bulletComp=new BulletComponent2D(EnumBulletOutLookType.ChildPlaneBullet),this.addComponent(this.bulletComp),this.comParent.name="ChildPlane"+CommonUtil.GetUID()},e.prototype.InitPool=function(t,e){this.initComponent(),this.viewComp.SetActive(!1)},e.prototype.OnSpawn=function(){this.viewComp.SetActive(!0),this.bulletComp.OnEnterMatch(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level),this.mediatorName=this.comParent.name,Facade.instance.registerMediator(this)},e.prototype.OnRecycle=function(){this.viewComp.SetActive(!1),this.bulletComp.OnExitMatch(),Facade.instance.removeMediator(this.mediatorName)},e.prototype.OnDestory=function(){this.DestroyPlayer()},e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[NotificationNames.SLOT_FORCE_OCCUPIED,NotificationNames.SLOT_INTERVAL_CHANGED]},e.prototype.handleNotification=function(e){switch(t.prototype.handleNotification.call(this,e),e.getName()){case NotificationNames.SLOT_FORCE_OCCUPIED:var i=e.getBody();if(this.slotIndex==i){var n=PlayerManager.GetInstance().MainPlayer.SlotComp.getEmpetySlot();this.PlayMoveSlotAnim(n)}break;case NotificationNames.SLOT_INTERVAL_CHANGED:this.PlayMoveSlotAnim(this.slotIndex)}},Object.defineProperty(e.prototype,"Duration",{get:function(){return this.duration},set:function(t){this.duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackDamage",{get:function(){return this.attackDamage},set:function(t){this.attackDamage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SlotIndex",{get:function(){return this.slotIndex},enumerable:!0,configurable:!0}),e.prototype.IsTimeUp=function(){return this.curLiveTimePassed>=this.duration},e.prototype.start=function(t,e){var i=this;this.curLiveTimePassed=0,this.curTweenId=-1,AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_warship),this.playEnterAnim(t,e,function(){i.EnableShoot(!0)})},e.prototype.stop=function(){this.EnableShoot(!1),this.stopAnim(),GamePoolManager.Instance.Recycle(this,ChildPlaneWeapon.GetPoolID())},e.prototype.end=function(){var t=this;this.EnableShoot(!1),this.playExitAnim(function(){t.curTweenId=-1,t.stop()})},e.prototype.playEnterAnim=function(t,e,i){e.comParent.addChild(this.comParent),this.setPlayerPos(0,0),this.PlayMoveSlotAnim(t,i)},e.prototype.PlayMoveSlotAnim=function(t,e){this.curTweenId>=0&&this.stopAnim();var i=this.getPosBySlot(t);this.curTweenId=Tween2DUtil.getInst().to({node:this.comParent,duration:1,delay:0,x:i.x,y:i.y,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:e?cbhandler.gen_handler(function(){e()},this):null})},e.prototype.playExitAnim=function(t){this.curTweenId>=0&&this.stopAnim(),CommonUtil2D.ChangeToGrandParent(this.comParent,this.comParent.parent.parent),this.curTweenId=Tween2DUtil.getInst().to({node:this.comParent,duration:1,delay:0,y:-10,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){t()},this)})},e.prototype.stopAnim=function(){this.curTweenId>=0&&Tween2DUtil.getInst().kill(this.curTweenId),this.curTweenId=-1},e.prototype.Update=function(t){this.curLiveTimePassed+=t},e.prototype.EnableShoot=function(t){this.bulletComp.EnableFire=t},e.prototype.getPosBySlot=function(t){return this.slotIndex=t,PlayerManager.GetInstance().MainPlayer.SlotComp.getChildPlaneRelativePosBySlotIndex(t,this.GetSize())},e.prototype.GetSize=function(){return this.viewComp.ViewSize},e}(Plane),ChildPlaneWeapon=function(){function t(){this.timerId=-1,this.planeSpawnIntevalCount=0}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.ChildPlane,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.CHILD_DURATION=i[1],t.ATTACK_DAMAGE=i[2]},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),this.resetParam(),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,ChildPlane),this.timerId=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this,e,i))},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1;for(var o=0;o<this.spawnedPlane.length;o++){var r=this.spawnedPlane[o];this.StopChildPlane(r)}GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.GetPoolID=function(){return"ChildPlaneWeapon"+t.config.GetID()},t.prototype.resetParam=function(){this.planeSpawnIntevalCount=0,this.spawnedPlane=[]},t.prototype.update=function(e,i,n){this.planeSpawnIntevalCount+=n,this.planeSpawnIntevalCount>=t.FIRE_INTERVAL&&(this.StartChildPlane(e,i),this.planeSpawnIntevalCount=0);for(var o=0;o<this.spawnedPlane.length;o++){var r=this.spawnedPlane[o];r.Update(n),r.IsTimeUp()&&this.EndChildPlane(r)}},t.prototype.StartChildPlane=function(e,i){var n=GamePoolManager.Instance.Spawn(t.GetPoolID());n.Duration=t.CHILD_DURATION,n.AttackDamage=t.ATTACK_DAMAGE;var o=this.getEmptySlot();n.start(o,e),this.recordChildPlane(o,n)},t.prototype.EndChildPlane=function(t){this.deleteChildPlaneRecord(t),t.end()},t.prototype.StopChildPlane=function(t){this.deleteChildPlaneRecord(t),t.stop()},t.prototype.recordChildPlane=function(t,e){PlayerManager.GetInstance().MainPlayer.SlotComp.OccupySlot(t,EnumSlotType.ChildPlane),this.spawnedPlane.push(e)},t.prototype.deleteChildPlaneRecord=function(t){PlayerManager.GetInstance().MainPlayer.SlotComp.ClearSlot(t.SlotIndex,EnumSlotType.ChildPlane),this.spawnedPlane.splice(this.spawnedPlane.indexOf(t),1)},t.prototype.getEmptySlot=function(){return PlayerManager.GetInstance().MainPlayer.SlotComp.getEmpetySlot()},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Bullet=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIt=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.bulletType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DamageValue",{get:function(){return this.damage},set:function(t){this.damage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Through",{get:function(){return this.through},set:function(t){this.through=t},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){t.prototype.beforeCreate.call(this)},e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.isIt=!0,this.bulletMoveCom=new BulletMoveComponent2D,this.config=ConfigManager.GetInstance().GetBulletConfig(this.bulletType),this.viewComp=new ImageViewComponent(this.config.ImagePath),this.addComponent(this.viewComp),this.addComponent(this.bulletMoveCom),this.comParent.name="Bullet"},e.prototype.setBulletPos=function(t,e){this.comParent.x=t,this.comParent.y=e},e.prototype.GetCollisionShapeInfo=function(){var t=this.config,e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);return null==this.tempBoxCollisionInfo&&(this.tempBoxCollisionInfo=new BoxCollisonInfo(null,null)),this.tempBoxCollisionInfo.center=new Vec2(e.x,e.y),this.tempBoxCollisionInfo.size=new Vec2(t.ColliderSize[0],t.ColliderSize[1]),this.tempBoxCollisionInfo.rotation=this.viewComp.View.rotation,this.tempBoxCollisionInfo},e.prototype.InitPool=function(t,e){this.bulletType=e,this.isIt||(this.initComponent(),this.viewComp.SetActive(!1))},e.prototype.OnSpawn=function(){this.uId=IDGenerator.GenBulletID(),this.GoLive(),this.bulletOnSpawn(),this.showShapCom&&this.showShapCom.ShowShape()},e.prototype.OnRecycle=function(){this.Die(),this.bulletOnRecycle(),this.showShapCom&&this.showShapCom.ShowShape(!1)},e.prototype.OnDestory=function(){this.DestroyPlayer(),this.config=null,this.tempBoxCollisionInfo=null},e.prototype.bulletOnRecycle=function(){this.bulletMoveCom.bulletStopMove()},e.prototype.bulletOnSpawn=function(){this.bulletMoveCom.bulletMove()},e}(PlayerBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ElectricNet=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIt=!1,e.timerId=-1,e.attackMonsterTimeCounter=0,e.checkCollisionCounter=0,e.COLLISION_CHECK_INTERVAL=.1,e}return __extends(e,t),e.prototype.initComponent=function(){this.isIt=!0,this.bulletMoveCom=new ElectricNetMoveComponent2D,this.viewComp=new ElectricNetViewComponent2D(EnumSpineConfigID.ElectricNet),this.fxComp=new EffectComponent2D,this.addComponent(this.viewComp),this.addComponent(this.bulletMoveCom),this.addComponent(this.fxComp),this.viewComp.SetActive(!1)},e.prototype.bulletOnSpawn=function(){this.viewComp.SetActive(!0)},e.prototype.bulletOnRecycle=function(){this.viewComp.SetActive(!1),this.stop()},e.prototype.OnDestory=function(){t.prototype.OnDestory.call(this)},e.prototype.GetCollisionShapeInfo=function(){var t=this.PlayerPos;return new BoxCollisonInfo(new Vec2(t.x,t.y),this.netSize,this.viewComp.View.rotation)},Object.defineProperty(e.prototype,"NetLen",{set:function(t){this.netSize=new Vec2(t,this.ViewSize.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.netDuration},set:function(t){this.netDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackInterval",{get:function(){return this.attackInterval},set:function(t){this.attackInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackDamage",{get:function(){return this.attackDamage},set:function(t){this.attackDamage=t},enumerable:!0,configurable:!0}),e.prototype.start=function(){null==this.showShapCom&&(this.showShapCom=new Show2DShapeComponent,this.addComponent(this.showShapCom)),this.showShapCom.ShowShape(),this.hitedMonsterIds=[],this.timeCount=0,this.checkCollisionCounter=0,this.attackMonsterTimeCounter=0,this.timerId=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this)),this.bulletMoveCom.Reset(),this.bulletMoveCom.bulletMove();var t=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.ElectricNet);this.viewComp.setViewScale(this.netSize.x/t.SpineSize[0],1),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_netting)},e.prototype.end=function(){GamePoolManager.Instance.Recycle(this,ElectricNetWeapon.GetPoolID())},e.prototype.stop=function(){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,this.UnFreezAll(),this.bulletMoveCom.bulletStopMove(),this.comParent.visible=!1,AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_netting)},e.prototype.update=function(t){this.timeCount>=this.netDuration?this.end():(this.checkCollisionDuringMovement(t),this.attackMonstersInNet(t)),this.timeCount+=t},e.prototype.checkCollisionDuringMovement=function(t){if(this.checkCollisionCounter+=t,this.checkCollisionCounter>this.COLLISION_CHECK_INTERVAL){this.checkCollisionCounter=0;for(var e=CollisionDetector.Instance.CheckMonsterCollisionByShape(this.GetCollisionShapeInfo()),i=0;i<e.length;i++){var n=e[i];this.hitedMonsterIds.indexOf(n.UID)<0&&(this.hitedMonsterIds.push(n.UID),Log.Debug("电网网住怪物%i, uid:%i",n.playerID,n.UID),this.FreezeMonstersAndAttach(n))}}},e.prototype.attackMonstersInNet=function(t){if(this.attackMonsterTimeCounter+=t,this.attackMonsterTimeCounter>this.AttackInterval){this.attackMonsterTimeCounter=0;for(var e=0;e<this.hitedMonsterIds.length;e++){var i=this.hitedMonsterIds[e],n=PlayerManager.GetInstance().GetMonsterByUid(i);n&&n.GetHit(this.attackDamage)&&this.hitedMonsterIds.splice(this.hitedMonsterIds.indexOf(i),1)}}},e.prototype.OnNetMoveTopLeft=function(t,e){for(var i=0;i<this.hitedMonsterIds.length;i++){var n=this.hitedMonsterIds[i],o=PlayerManager.GetInstance().GetMonsterByUid(n);o&&o.movePlayer(t,e)}},e.prototype.OnNetReachEnd=function(){this.bulletMoveCom.bulletStopMove()},e.prototype.FreezeMonstersAndAttach=function(t){t.Freeze(!0)},e.prototype.UnFreezAll=function(){for(var t=0;t<this.hitedMonsterIds.length;t++){var e=this.hitedMonsterIds[t],i=PlayerManager.GetInstance().GetMonsterByUid(e);i&&i.Freeze(!1)}},e}(Bullet),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ElectricNetMoveComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onAdd=function(){this.Reset()},e.prototype.Reset=function(){t.prototype.Reset.call(this)},e.prototype.onbulletMoveHander=function(t){if(this.player.PlayerPos.y<=0)this.player.OnNetReachEnd();else{var e=this.SpeedY*t;this.player.movePlayer(0,e),this.player.OnNetMoveTopLeft(0,e)}},e.prototype.onBulletOutStage=function(){},e}(BulletMoveComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ElectricNetViewComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(SpineViewComponent),ElectricNetWeapon=function(){function t(){this.timerId=-1}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.ElectricNet,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.WIDTH=i[1],t.ATTACK_INTERVAL=i[2],t.ATTACK_DAMAGE=i[3],t.NET_DURATION=i[4],t.MOVE_VELOCITY=e.Param6},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,ElectricNet),this.timerId=TimeManager.getInst().loop(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e,i))},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.prototype.exeSkill=function(e,i){var n=GamePoolManager.Instance.Spawn(t.GetPoolID());n.setBulletPos(e.comParent.x,e.comParent.y),n.bulletMoveCom.SpeedY=t.MOVE_VELOCITY,n.bulletMoveCom.setMoveDir(new Vec2(0,-1),!0),n.NetLen=t.WIDTH,n.Duration=t.NET_DURATION,n.AttackDamage=t.ATTACK_DAMAGE,n.AttackInterval=t.ATTACK_INTERVAL,n.start()},t.GetPoolID=function(){return"ElectricNetWeapon"+t.config.GetID()},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},SkillSpawnObject=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIt=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.skillType},enumerable:!0,configurable:!0}),e.prototype.InitPool=function(t,e){this.skillType=e,this.isIt||this.initComponent()},e.prototype.OnSpawn=function(){this.uId=IDGenerator.GenBulletID(),this.GoLive(),this.OnSkillObjSpawn()},e.prototype.OnRecycle=function(){this.Die(),this.OnSkillObjRecycle()},e.prototype.OnDestory=function(){this.OnSkillObjDestroy(),this.DestroyPlayer()},e.prototype.initComponent=function(){this.isIt=!0},e.prototype.OnSkillObjSpawn=function(){},e.prototype.OnSkillObjRecycle=function(){},e.prototype.OnSkillObjDestroy=function(){},e.prototype.OnStart=function(){null==this.showShapCom&&(this.showShapCom=new Show2DShapeComponent,this.addComponent(this.showShapCom)),this.showShapCom.ShowShape()},e}(PlayerBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Guard=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sectorAngle=90,e.timerId=-1,e.checkCollisionCounter=0,e.COLLISION_CHECK_INTERVAL=.1,e}return __extends(e,t),e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.viewComp=new ElectricNetViewComponent2D(EnumSpineConfigID.Guard),this.addComponent(this.viewComp),this.comParent.name="Guard",this.viewComp.SetActive(!1)},e.prototype.OnSkillObjSpawn=function(){this.viewComp.SetActive(!0)},e.prototype.OnSkillObjRecycle=function(){this.viewComp.SetActive(!1),this.stop()},e.prototype.OnSkillObjDestroy=function(){},e.prototype.GetCollisionShapeInfo=function(){var t=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID).ColliderSize,e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);e.y-=.5*t[1];var i=.5*this.guardSize.x;return new SectorCollisonInfo(new Vec2(e.x,e.y),i,this.sectorAngle,this.viewComp.View.rotation)},Object.defineProperty(e.prototype,"Size",{get:function(){return this.guardSize},set:function(t){this.guardSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.duration},set:function(t){this.duration=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t){this.OnStart(),this.hitedMonsterIds=[],this.timeCount=0,this.checkCollisionCounter=0,this.parent=t.comParent,this.parent.addChild(this.comParent),this.setPlayerPos(0,0),this.timerId=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this));var e=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.Guard);this.viewComp.setViewScale(this.guardSize.x/e.SpineSize[0],1)},e.prototype.end=function(){GamePoolManager.Instance.Recycle(this,GuardWeapon.GetPoolID())},e.prototype.stop=function(){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1},e.prototype.update=function(t){this.timeCount>=this.duration?this.end():this.checkCollisionDuringMovement(t),this.timeCount+=t},e.prototype.checkCollisionDuringMovement=function(t){if(this.checkCollisionCounter+=t,this.checkCollisionCounter>this.COLLISION_CHECK_INTERVAL){this.checkCollisionCounter=0;for(var e=this.GetCollisionShapeInfo(),i=CollisionDetector.Instance.CheckMonsterCollisionSectorByShape(e),n=0;n<i.length;n++){var o=i[n];return o.GetHit(o.attributeComp.CurHP),this.end(),void Log.Debug("钢铁守卫击中怪物id:%i, uid:%i",o.playerID,o.UID)}for(var r=CollisionDetector.Instance.CheckMonsterCollisionSectorByShape(e,!0),n=0;n<r.length;n++){var a=r[n];return this.end(),BulletManager.GetInstance().Recycle(a),void Log.Debug("钢铁守卫击中子弹, uid:%i",a.UID)}}},e}(SkillSpawnObject),GuardWeapon=function(){function t(){this.timerId=-1}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.Guard,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.WIDTH=i[1],t.DURATION=i[2],t.ATTACK_DAMAGE=i[3],t.HEIGHT=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.Guard).SpineSize[1]},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,Guard),this.timerId=TimeManager.getInst().loop(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e,i))},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.prototype.exeSkill=function(e,i){var n=GamePoolManager.Instance.Spawn(t.GetPoolID());n.setPlayerPos(e.comParent.x,e.comParent.y),n.Size=new Vec2(t.WIDTH,t.HEIGHT),n.Duration=t.DURATION,n.start(e)},t.GetPoolID=function(){return"GuardWeapon"+t.config.GetID()},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Laser=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timerId=-1,e.checkCollisionCounter=0,e.COLLISION_CHECK_INTERVAL=.1,e}return __extends(e,t),e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.viewComp=new ElectricNetViewComponent2D(EnumSpineConfigID.Laser),this.addComponent(this.viewComp),this.comParent.name="Laser",this.viewComp.SetActive(!1)},e.prototype.OnSkillObjSpawn=function(){this.viewComp.SetActive(!0)},e.prototype.OnSkillObjRecycle=function(){this.viewComp.SetActive(!1),this.stop()},e.prototype.OnSkillObjDestroy=function(){},Object.defineProperty(e.prototype,"Size",{get:function(){return this.laserSize},set:function(t){this.laserSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.duration},set:function(t){this.duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackInterval",{get:function(){return this.attackInterval},set:function(t){this.attackInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackDamage",{get:function(){return this.attackDamage},set:function(t){this.attackDamage=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){this.hitedMonsterInfos=[],this.timeCount=0,this.checkCollisionCounter=0,this.parent=t.comParent,this.parent.addChild(this.comParent),this.setPlayerPos(e.x,e.y+50),this.timerId=TimeManager.getInst().addUpdater(cbhandler.gen_handler(this.update,this));var i=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.Laser);this.viewComp.setViewScale(this.laserSize.x/i.SpineSize[0],1),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_laser)},e.prototype.end=function(){GamePoolManager.Instance.Recycle(this,LaserWeapon.GetPoolID())},e.prototype.stop=function(){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,CommonUtil2D.ChangeToGrandParent(this.comParent,this.parent.parent),AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_fight_laser)},e.prototype.update=function(t){this.timeCount>=this.duration?this.end():this.checkCollisionDuringMovement(t),this.timeCount+=t},e.prototype.checkCollisionDuringMovement=function(t){if(this.checkCollisionCounter+=t,this.checkCollisionCounter>this.COLLISION_CHECK_INTERVAL){this.checkCollisionCounter=0;for(var e=CommonUtil2D.GetLoalPostionUnderSameParent(this.comParent,this.parent),i=new Vec2(e.x,e.y-.5*this.laserSize.y),n=CollisionDetector.Instance.CheckMonsterCollision(i,this.laserSize),o=(new Date).getTime(),r=[],a=0;a<n.length;a++){var s=n[a],l=this.GetLastHitInfo(s.UID);if(null==l)l=new LaserHitedMonsterInfo(s.UID),this.HitMonster(s)||r.push(l);else{var h=!1;l.LastHitTime-o>1e3*this.AttackInterval&&(l.LastHitTime=o,h=this.HitMonster(s)),h||r.push(l)}}this.hitedMonsterInfos=r}},e.prototype.GetLastHitInfo=function(t){for(var e=0;e<this.hitedMonsterInfos.length;e++){var i=this.hitedMonsterInfos[e];if(i.UId==t)return i}return null},e.prototype.HitMonster=function(t){return t.GetHit(this.attackDamage)},e}(SkillSpawnObject),LaserHitedMonsterInfo=function(){return function(t){this.UId=t,this.LastHitTime=(new Date).getTime()}}(),LaserWeapon=function(){function t(){this.timerId=-1}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.Laser,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.WIDTH=i[1],t.DURATION=i[2],t.ATTACK_DAMAGE=i[3],t.HEIGHT=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.Laser).SpineSize[1],t.ATTACK_INTERVAL=e.Param5},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,Laser),this.timerId=TimeManager.getInst().loop(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e,i))},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.prototype.exeSkill=function(e,i){for(var n=0;n<2;n++){var o=GamePoolManager.Instance.Spawn(t.GetPoolID());o.Size=new Vec2(t.WIDTH,t.HEIGHT),o.Duration=t.DURATION,o.AttackInterval=t.ATTACK_INTERVAL,o.AttackDamage=t.ATTACK_DAMAGE,o.start(e,new Vec2((0==n?1:-1)*t.LASER_POS,0))}},t.GetPoolID=function(){return"LaserWeapon"+t.config.GetID()},t}();LaserWeapon.LASER_POS=150;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MagenetBounce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.viewComp=new ElectricNetViewComponent2D(EnumSpineConfigID.MagnetDisturb),this.addComponent(this.viewComp),this.comParent.name="MagenetBounce",this.comParent.zOrder=5,this.viewComp.SetActive(!1)},e.prototype.OnSkillObjSpawn=function(){this.viewComp.SetActive(!0)},e.prototype.OnSkillObjRecycle=function(){this.viewComp.SetActive(!1),this.stop()},e.prototype.OnSkillObjDestroy=function(){},Object.defineProperty(e.prototype,"FreezeDuration",{get:function(){return this.freezDuration},set:function(t){this.freezDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackRange",{get:function(){return this.attackRange},set:function(t){this.attackRange=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackDamage",{get:function(){return this.attackDamage},set:function(t){this.attackDamage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxBounceNum",{get:function(){return this.maxBounceNum},set:function(t){this.maxBounceNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SPEED",{get:function(){return this.moveSpeed},set:function(t){this.moveSpeed=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,i,n){var o=this;this.curBounceIndex=t,this.fromPos=e,this.targetMonster=i,this.onReachMonster=n,this.curTimerId=-1,this.setPlayerPos(e.x,e.y),i.BuffComp.AddBuff(EnumBuffType.MagnetFreezen,this.freezDuration),this.setDir(i),this.curPlayingTweenId=this.exeBouncingAnim(e,i,function(){AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bounce),o.onReachMonster(o.curBounceIndex,o.targetMonster.PlayerPos),o.end()})},e.prototype.end=function(){GamePoolManager.Instance.Recycle(this,MagnetDisturbWeapon.GetPoolID())},e.prototype.stop=function(){this.curPlayingTweenId>=0&&Tween2DUtil.getInst().kill(this.curPlayingTweenId),this.curPlayingTweenId=-1},e.prototype.exeBouncingAnim=function(t,e,i){return Tween2DUtil.getInst().to({node:this.comParent,duration:.5,delay:0,x:e.PlayerPos.x,y:e.PlayerPos.y,tweenFunc:TweenFunc.Sine.easeInOut,onComplete:cbhandler.gen_handler(function(){i()},this)})},e.prototype.setDir=function(t){CommonUtil2D.LookAt(this.comParent,t.comParent)},e}(SkillSpawnObject),MagnetDisturbWeapon=function(){function t(){this.timerId=-1}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.MagnetDisturb,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.MAX_BOUNCE_NUM=i[1],t.ATTACK_DAMAGE=i[2],t.ATTACK_RANGE=2*e.Param5,t.FREEZ_DURATION=e.Param6},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,MagenetBounce),this.timerId=TimeManager.getInst().once(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e)),this.playPrepareFx(e)},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){this.stopPrepareFx(),this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.prototype.exeSkill=function(t){this.stopPrepareFx(),this.bounceToNext(0,t.PlayerPos,t)},t.GetPoolID=function(){return"MagnetDisturbWeapon"+t.config.GetID()},t.prototype.bounceToNext=function(e,i,n){if(e>=t.MAX_BOUNCE_NUM)this.stopBounce(n);else{var o=this.getValidMonsterInRange(i,t.ATTACK_RANGE);o?this.exeBounce(e,i,o,n):this.stopBounce(n)}},t.prototype.exeBounce=function(e,i,n,o){var r=this,a=GamePoolManager.Instance.Spawn(t.GetPoolID());a.MaxBounceNum=t.MAX_BOUNCE_NUM,a.AttackRange=t.ATTACK_RANGE,a.FreezeDuration=t.FREEZ_DURATION,a.AttackDamage=t.ATTACK_DAMAGE,a.SPEED=t.MOVE_SPEED,a.start(e,i,n,function(t,e){r.bounceToNext(t+1,e,o)})},t.prototype.stopBounce=function(e){this.timerId=TimeManager.getInst().once(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e)),this.playPrepareFx(e)},t.prototype.getValidMonsterInRange=function(t,e){for(var i=CollisionDetector.Instance.CheckMonsterInCircle(t,e),n=0;n<i.length;n++){var o=i[n];if(!o.BuffComp.ContainBuff(EnumBuffType.MagnetFreezen))return o}return null},t.prototype.playPrepareFx=function(t){this.curPlayingFx?Log.Warn("电磁干扰的准备动画, 没有停止, 直接播放"):this.curPlayingFx=MatchSpineManager.Instance.Spawn(EnumSpineConfigID.MagnetDisturbPrepare),t.comParent.addChild(this.curPlayingFx);var e=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.MagnetDisturbPrepare);this.curPlayingFx.pivot(e.SpinePivot[0],e.SpinePivot[1]),this.curPlayingFx.play(0,!0)},t.prototype.stopPrepareFx=function(){this.curPlayingFx&&(this.curPlayingFx.removeSelf(),MatchSpineManager.Instance.Recycle(EnumSpineConfigID.MagnetDisturbPrepare,this.curPlayingFx)),this.curPlayingFx=null},t}();MagnetDisturbWeapon.MOVE_SPEED=100;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MissileBullet=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIt=!1,e}return __extends(e,t),e.prototype.initComponent=function(){this.isIt=!0,this.bulletMoveCom=new MissileBulletMoveComponent2D,this.config=ConfigManager.GetInstance().GetBulletConfig(this.bulletType),this.viewComp=new ImageViewComponent(this.config.ImagePath),this.fxComp=new EffectComponent2D,this.addComponent(this.viewComp),this.addComponent(this.bulletMoveCom),this.addComponent(this.fxComp),null==this.showShapCom&&(this.showShapCom=new Show2DShapeComponent,this.addComponent(this.showShapCom)),this.showShapCom.ShowShape()},e.prototype.bulletOnRecycle=function(){this.bulletMoveCom.bulletStopMove()},e.prototype.bulletOnSpawn=function(){this.bulletMoveCom.Reset(),this.hitedMonsterIds=[]},e.prototype.OnDestory=function(){t.prototype.OnDestory.call(this)},Object.defineProperty(e.prototype,"AttackDamage",{get:function(){return this.attackDamage},set:function(t){this.attackDamage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackRadius",{get:function(){return this.attackRadius},set:function(t){this.attackRadius=t},enumerable:!0,configurable:!0}),e.prototype.CheckCollisionDuringMovement=function(){for(var t=CollisionDetector.Instance.CheckMonsterCollisionByShape(this.GetCollisionShapeInfo()),e=0;e<t.length;e++){var i=t[e];this.hitedMonsterIds.indexOf(i.UID)<0&&(this.HitMonster(i)||this.hitedMonsterIds.push(i.UID))}},e.prototype.OnExplode=function(){this.fxComp.showEffect(0,EnumSpineConfigID.SkillMissileExplode),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_guided_02);for(var t=CollisionDetector.Instance.CheckMonsterCollision(this.PlayerPos,new Vec2(MissileWeapon.BULLET_ATTACT_RADIUS,MissileWeapon.BULLET_ATTACT_RADIUS)),e=0;e<t.length;e++){var i=t[e];Log.Debug("导弹击中怪物%i, uid:%i",i.playerID,i.UID),this.HitMonster(i)}},e.prototype.HitMonster=function(t){return t.GetHit(this.attackDamage)},e}(Bullet),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MissileBulletEffectComponent2D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(EffectComponent2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MissileBulletMoveComponent2D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.totalMoveDist=0,e.checkCollisionCounter=0,e}return __extends(e,t),e.prototype.onAdd=function(){this.Reset()},e.prototype.Reset=function(){t.prototype.Reset.call(this),this.totalMoveDist=0,this.checkCollisionCounter=0},e.prototype.onbulletMoveHander=function(t){if(this.totalMoveDist>=MissileWeapon.BULLET_MOVE_DIST)this.HideSelf(),this.player.OnExplode();else{var e=MissileWeapon.BULLET_SPEED*t;this.player.movePlayer(0,e),this.totalMoveDist+=e,this.checkCollisionCounter+=t,this.checkCollisionCounter>.1&&(this.checkCollisionCounter=0,this.player.CheckCollisionDuringMovement())}},e.prototype.onBulletOutStage=function(){this.HideSelf()},e.prototype.HideSelf=function(){this.player.comParent.visible=!1,GamePoolManager.Instance.Recycle(this.player,MissileWeapon.GetPoolID())},e}(BulletMoveComponent2D),MissileWeapon=function(){function t(){this.timerId=-1}return t.prototype.InitWeaponParam=function(e){var i=FormulaUtil.CalcSideWeaponParams(EnumSideWeaponType.Missile,GameDataManager.getInstance().GetCurSideWeaponLvl(),e);t.FIRE_INTERVAL=i[0],t.BULLET_ATTACT_RADIUS=.5*i[1],t.BULLET_ATTACT_DAMAGE=i[2],t.BULLET_MOVE_DIST=e.Param5},t.prototype.Start=function(e,i){t.config=i,this.InitWeaponParam(t.config),GamePoolManager.Instance.InitPool(t.GetPoolID(),5,MissileBullet,EnumBulletOutLookType.MISSILE_WEAPON_BULLET),this.timerId=TimeManager.getInst().loop(t.FIRE_INTERVAL,cbhandler.gen_handler(this.exeSkill,this,e,t.config))},t.prototype.Stop=function(t,e){this.End(t,null,e)},t.prototype.End=function(e,i,n){t.config=n,this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1,GamePoolManager.Instance.Destory(t.GetPoolID()),i&&i()},t.prototype.exeSkill=function(e,i){for(var n=0;n<2;n++){var o=GamePoolManager.Instance.Spawn(t.GetPoolID());o.setBulletPos(e.comParent.x+(0==n?1:-1)*t.BULLET_FIRE_POS,e.comParent.y),o.bulletMoveCom.bulletMove(),o.AttackDamage=t.BULLET_ATTACT_DAMAGE,o.AttackRadius=t.BULLET_ATTACT_RADIUS}},t.GetPoolID=function(){return"MissileBullet"+t.config.GetID()},t}();MissileWeapon.BULLET_FIRE_POS=150,MissileWeapon.BULLET_SPEED=1e3;var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BasePlayerMediator=function(t){function e(e){var i=t.call(this)||this;return i.playerDic=new Laya.Dictionary,i.mediatorName=e,i}return __extends(e,t),e.prototype.onRegister=function(){},e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[]},e.prototype.handleNotification=function(e){t.prototype.handleNotification.call(this,e),e.getName()},e.prototype.createPlayer=function(){console.log("createPlayer")},e}(puremvc.Mediator),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LevelMediator=function(t){function e(e){var i=t.call(this)||this;return i.monsterToSpawns=[],i.monsterTimers=[],i.mediatorName=e,i}return __extends(e,t),e.prototype.onRegister=function(){},e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[NotificationNames.MATCH_READY,NotificationNames.MATCH_COMPLETE,NotificationNames.MATCH_RESUME,NotificationNames.MONSTER_DIE,NotificationNames.PAUSE_MATCH,NotificationNames.CONTINUE_NEXT_MATCH]},e.prototype.handleNotification=function(e){var i=this;switch(t.prototype.handleNotification.call(this,e),e.getName()){case NotificationNames.MATCH_READY:GameDataManager.getInstance().LevelInfo.LevelSpawnDatas.IsBossLevel?AudioManager.GetInstance().PlayMusicByID(EnumSoundID.bg_bossfight):AudioManager.GetInstance().PlayMusicByID(Math.random()>.5?EnumSoundID.bg_fight1:EnumSoundID.bg_fight2);var n=CommonUtil2D.GetGlobalPosition(PlayerManager.GetInstance().MainPlayer.comParent);MoneyAnimManager.Instance.PlayMoneyAnim_Explose(EnumMoneyAnimType.Power,5,n,PlayerManager.GetInstance().MainPlayer.ViewSize.x,cbhandler.gen_handler(function(){GameDataManager.getInstance().MatchInfo.State=EnumMatchState.Start,i.StartSpawnTimer(),i.sendNotification(NotificationNames.MATCH_START),i.refreshBattleUI()}));break;case NotificationNames.PAUSE_MATCH:var o=e.getBody();TimeManager.getInst().Pause(o);break;case NotificationNames.MATCH_COMPLETE:var r=e.getBody();Log.Debug("MATCH_COMPLETE, win?%s",r),this.ClearSpawnTimer(),GameDataManager.getInstance().MatchInfo.State=EnumMatchState.Complete,AudioManager.GetInstance().PlaySoundByConfigID(r?EnumSoundID.sound_fight_succeed:EnumSoundID.sound_fight_defeat);break;case NotificationNames.MATCH_RESUME:GameDataManager.getInstance().MatchInfo.State=EnumMatchState.Start;break;case NotificationNames.CONTINUE_NEXT_MATCH:var a=e.getBody();Log.Debug("继续挑战关卡%i",a);this.sendNotification(NotificationNames.MATCH_EXIT_COMMAND,!0),this.sendNotification(NotificationNames.MATCH_ENTER_COMMAND,a),GameDataManager.getInstance().MatchInfo.GoldNum=0,this.refreshBattleUI(!0);break;case NotificationNames.MONSTER_DIE:var s=e.getBody(),l=PlayerManager.GetInstance().MainPlayer.BuffComp.ContainBuff(EnumBuffType.Gold),h=l||Math.random()<=s.Config.GoldProbability?FormulaUtil.CalcMonsterReward(s.Level):0;if(l&&(h*=ConstDefine.GOLD_BUFF_REWARD_SCALE,AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_monster_gold)),GameDataManager.getInstance().MatchInfo.GoldNum+=h,s.GoldADD=h,this.sendNotification(NotificationNames.UI_OnMonsterKill,s),this.refreshBattleUI(),GameDataManager.getInstance().LevelInfo.IsGameComplete()){if(Log.Debug("怪物都死亡, 玩家胜利"),GameDataManager.getInstance().MatchInfo.IsGameEnd())return void Log.Warn("比赛已经结束, 但重复判定胜利");BulletManager.GetInstance().RecycleAllMonsterBullet(),StorageManager.SetLastestLevelTemplate(GameDataManager.getInstance().LevelInfo.CurLevelID,-1),this.facade.sendNotification(NotificationNames.MATCH_COMPLETE,!0)}else this.spawnVer2(),s.CanSpawnProp&&PropSpawnLogic.Instance.TrySpawn()}},e.prototype.StartSpawnTimer=function(){this.monsterToSpawns=[],this.monsterTimers=[];for(var t=GameDataManager.getInstance().LevelInfo.LevelSpawnDatas,e=0,i=0;i<t.LevelSpawnData.length;i++){var n=t.LevelSpawnData[i];e+=n.Delay;var o=TimeManager.getInst().once(e,cbhandler.gen_handler(this.spawnBrushMonsterByTimer,this,n,i));this.monsterTimers.push(o)}t.IsBossLevel&&(this.sendNotification(NotificationNames.HULK_COMING),AudioManager.GetInstance().SetBGSoundVolum(0),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_hint_02,!0,function(){AudioManager.GetInstance().SetBGSoundVolum(ConstDefine.Audio_Music_Volume)}))},e.prototype.ClearSpawnTimer=function(){for(var t=0;t<this.monsterTimers.length;t++){var e=this.monsterTimers[t];TimeManager.getInst().remove(e)}},e.prototype.spawnBrushMonsterByTimer=function(t,e){Log.Debug("定时刷怪, 波次"+e),this.monsterToSpawns=this.monsterToSpawns.concat(t.Monsters),t.SoundId>0&&AudioManager.GetInstance().PlaySoundByConfigID(t.SoundId),this.spawnVer2()},e.prototype.spawnVer2=function(){if(this.monsterToSpawns.length>0&&MonsterSpawnLogic.Instance.CheckCanSpawn()){var t=GameDataManager.getInstance().LevelInfo,e=t.LevelSpawnDatas.MaxInScreenNum-t.CurLiveMonsterCount,i=Math.min(this.monsterToSpawns.length,e),n=this.monsterToSpawns.splice(0,i);this.sendNotification(NotificationNames.CREATE_MONSTER,n)}},e.prototype.refreshBattleUI=function(t){void 0===t&&(t=!1);var e=GameDataManager.getInstance().LevelInfo.GetCurProgress();t&&(e.Gold=GameDataManager.getInstance().MatchInfo.GoldNum),this.sendNotification(NotificationNames.UI_RefreshMatchProgressInfo,e)},e}(puremvc.Mediator),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MainPlayerMediator=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[NotificationNames.CREATER_MAIN_PLAYER,NotificationNames.ON_SIDE_WEAPON_CHANGED,NotificationNames.MAIN_PLAYER_DIE,NotificationNames.MAIN_PLAYER_REBORN,NotificationNames.MATCH_START,NotificationNames.MATCH_COMPLETE]},e.prototype.handleNotification=function(e){switch(t.prototype.handleNotification.call(this,e),e.getName()){case NotificationNames.CREATER_MAIN_PLAYER:this.createrMainPlayer();break;case NotificationNames.ON_SIDE_WEAPON_CHANGED:PlayerManager.GetInstance().MainPlayer.ChangeView(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID);break;case NotificationNames.MATCH_START:PlayerManager.GetInstance().MainPlayer.OnMatchStart();break;case NotificationNames.MAIN_PLAYER_DIE:if(GameDataManager.getInstance().MatchInfo.IsGameEnd())return void Log.Warn("比赛已经结束, 但重复判定死亡");PlayerManager.GetInstance().MainPlayer.Die(),this.sendNotification(NotificationNames.PAUSE_MATCH,!0);StorageManager.GetRebornNum()>0&&GameDataManager.getInstance().ShareEnable?this.sendNotification(NotificationNames.OPENUI,ui.UIID.RebornUIID):this.sendNotification(NotificationNames.MAIN_PLAYER_REBORN,!1);break;case NotificationNames.MAIN_PLAYER_REBORN:var i=e.getBody();this.sendNotification(NotificationNames.PAUSE_MATCH,!1),i?(PlayerManager.GetInstance().MainPlayer.Reborn(),Facade.instance.sendNotification(NotificationNames.MATCH_RESUME)):(PlayerManager.GetInstance().MainPlayer.Explode(),Facade.instance.sendNotification(NotificationNames.MATCH_COMPLETE,!1),this.sendNotification(NotificationNames.OPENUIWITHPARAM,new ui.ResultUIParam(!1)),this.sendNotification(NotificationNames.BackgroundUI_Shake),CommonUtil.OnMiniGame()&&WechatUtil.getIntance().Vibrate());break;case NotificationNames.MATCH_COMPLETE:e.getBody();PlayerManager.GetInstance().MainPlayer.OnMatchComplete()}},e.prototype.createrMainPlayer=function(){new MainPlayer(ConstDefine.MAIN_PLAYRE_CONFIG_ID).initComponent()},e}(BasePlayerMediator),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterMediator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spawnedCount=0,e.spawn=!0,e}return __extends(e,t),e.prototype.listNotificationInterests=function(){return t.prototype.listNotificationInterests.call(this),[NotificationNames.CREATE_MONSTER,NotificationNames.MONSTER_ENLARGE,NotificationNames.MONSTER_PAUSE,NotificationNames.MATCH_COMPLETE]},e.prototype.handleNotification=function(e){switch(t.prototype.handleNotification.call(this,e),e.getName()){case NotificationNames.CREATE_MONSTER:var i=e.getBody();i instanceof Array?this.createrMonstersByLevel(i):this.createrMonster(i);break;case NotificationNames.MONSTER_ENLARGE:for(var n=e.getBody(),o=PlayerManager.GetInstance().GetAllSpawnedMonster(),r=0;r<o.length;r++){if((s=o[r]).IsAlive()){s.attributeComp.Scale;s.attributeComp.AdjustScale=n?ConstDefine.ENLARGE_BUFF_SCALE:1,s.RefreshScale()}}break;case NotificationNames.MONSTER_PAUSE:var a=e.getBody();MonsterMoveComponent2D.SpeedScale=a;for(var o=PlayerManager.GetInstance().GetAllSpawnedMonster(),r=0;r<o.length;r++){(s=o[r]).IsAlive()&&s.OnPauseBuff(a<1)}break;case NotificationNames.MATCH_COMPLETE:for(var o=PlayerManager.GetInstance().GetAllSpawnedMonster(),r=0;r<o.length;r++){var s=o[r];s.IsAlive()&&s.OnGameComplete()}}},e.prototype.createrMonster=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);var n=PlayerManager.GetInstance().SpawnMonster(t.MonsterId,i,t);n.comParent.x=Laya.stage.width*Math.random(),n.comParent.y=.5*-n.ViewSize.y,n.monsterMoveComp.monsterRandomMove(e)},e.prototype.createrMonstersByLevel=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];this.createrMonster(n,e,!0),e+=GameDataManager.getInstance().LevelInfo.LevelSpawnDatas.RefreshInterval}},e}(BasePlayerMediator),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MainPlayer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"SkillComp",{get:function(){return this.skillComp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BuffComp",{get:function(){return this.buffComp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SlotComp",{get:function(){return this.slotComp},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){this.playerOrderZ=ZOrderDefine.MAINPLAYER},e.prototype.initComponent=function(){t.prototype.initComponent.call(this);var e=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID);this.viewComp=new ImageViewComponent(e.weaponSkin),this.inputComp=new InputComponent2D,this.bulletComp=new BulletComponent2D(EnumBulletOutLookType.MainPlayerBullet),this.skillComp=new PlayerSkillComponent2D,this.buffComp=new BuffComponent,this.hitComp=new PlayerHitComponent,this.slotComp=new PlayerSlotComponent,this.GuideBubble=new ui.PrefabUI.GuideItemPrefabUI,this.comParent.addChild(this.GuideBubble),this.GuideBubble.centerX=0,this.GuideBubble.bottom=-200,this.GuideBubble.visible=!1,this.tailComp=new TailComponent(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID),this.tailComp.SetTailPosByWeapon(e),this.animComp=new PlayerAnimComponent,this.addComponent(this.viewComp),this.addComponent(this.inputComp),this.addComponent(this.bulletComp),this.addComponent(this.skillComp),this.addComponent(this.buffComp),this.addComponent(this.hitComp),this.addComponent(this.slotComp),this.addComponent(this.tailComp),this.addComponent(this.animComp),this.comParent.name="MainPlayers",PlayerManager.GetInstance().MainPlayer=this,this.MoveToBirthPoint(),this.inputComp.SetActive(!1),this.showShapCom.ShowShape(),this.playerAnimTask=-1},e.prototype.GetCollisionShapeInfo=function(){var t=ConfigManager.GetInstance().GetWeaponConfig(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID).ColliderSize,e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);return new BoxCollisonInfo(new Vec2(e.x,e.y),new Vec2(t[0],t[1]))},e.prototype.OnEnterMatch=function(){this.GoLive(),this.bulletComp.OnEnterMatch(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level),this.slotComp.OnEnterMatch(),this.GuideBubble.visible=1==GameDataManager.getInstance().LoginPlayerInfo.CurLevel},e.prototype.OnMatchStart=function(){this.SetComponentOn(!0,!0),this.inputComp.MouseDown&&(this.bulletComp.EnableFire=!0)},e.prototype.Die=function(){t.prototype.Die.call(this),this.comParent.visible=!0,this.sendNotification(NotificationNames.BackgroundUI_BgMoveEnd),this.SetComponentOn(!1,!1)},e.prototype.Reborn=function(){var t=this;this.animComp.PlayRebornAlphaAnim(function(){t.hitComp.SetCollisionMode(EnumPlayerCollisionMode.All)},ConstDefine.REBORN_DURATION),this.GoLive(),this.SetComponentOn(!0,!1),this.hitComp.SetCollisionMode(EnumPlayerCollisionMode.PropOnly),this.sendNotification(NotificationNames.BackgroundUI_BgMoveStart)},e.prototype.Explode=function(){this.comParent.visible=!1,AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_warcraft_boom),this.effectComp.showEffect(0,EnumSpineConfigID.SkillMissileExplode,null,null,null,new Vec2(3,3))},e.prototype.OnMatchComplete=function(){this.SetComponentOn(!1,!0),this.MoveOutOfScreen()},e.prototype.OnExitMathch=function(){this.bulletComp.OnExitMatch(),this.slotComp.OnExitMatch(),this.MoveToBirthPoint(),this.comParent.visible=!0,this.GuideBubble.visible=!1},e.prototype.SetComponentOn=function(t,e){t?(e&&this.SkillComp.Start(),e&&this.buffComp.Reset(),this.hitComp.startCheckHit(),this.inputComp.SetActive(!0)):(this.bulletComp.EnableFire=!1,e&&this.SkillComp.Stop(),e&&this.BuffComp.stopAll(),this.hitComp.stopCheckHit(),this.inputComp.SetActive(!1))},e.prototype.MoveToBirthPoint=function(){var t=ConfigManager.GetInstance().GetMainPlayerConfig();this.comParent.x=Laya.stage.width/2,this.comParent.y=t.BirthPoint[1]},e.prototype.MoveOutOfScreen=function(){var t=this;this.CancelCameraAnim(),this.playerAnimTask=Tween2DUtil.getInst().to({node:this.comParent,duration:1.5,delay:1,y:-500-this.comParent.height,onComplete:cbhandler.gen_handler(function(){t.playerAnimTask=-1},this)})},e.prototype.EnterHomepageScene=function(){var t=this;this.CancelCameraAnim();var e=ConfigManager.GetInstance().GetMainPlayerConfig();this.comParent.x=Laya.stage.width/2,this.comParent.y=1920+this.comParent.height,this.sendNotification(NotificationNames.HomepageUI_HidenText),this.playerAnimTask=Tween2DUtil.getInst().to({node:this.comParent,duration:1.5,x:Laya.stage.width/2,y:e.BirthPoint[1],onComplete:cbhandler.gen_handler(function(){t.sendNotification(NotificationNames.BackgroundUI_HomepageEnter),t.sendNotification(NotificationNames.BackgroundUI_BgMoveEnd),t.playerAnimTask=Tween2DUtil.getInst().to({node:t.comParent,duration:1,scalex:ConstDefine.Plane_Homepage_Scale,scaley:ConstDefine.Plane_Homepage_Scale,onComplete:cbhandler.gen_handler(function(){t.sendNotification(NotificationNames.HomepageUI_ShowText),t.playerAnimTask=-1},t)})},this)})},e.prototype.EnterBattleScene=function(){var t=this;this.CancelCameraAnim();var e=ConfigManager.GetInstance().GetMainPlayerConfig();this.comParent.x=Laya.stage.width/2,this.comParent.y=e.BirthPoint[1],this.sendNotification(NotificationNames.BackgroundUI_BattleEnter),this.sendNotification(NotificationNames.HomepageUI_HidenText),this.sendNotification(NotificationNames.BackgroundUI_BgMoveStart),this.playerAnimTask=Tween2DUtil.getInst().to({node:this.comParent,duration:1,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){t.playerAnimTask=-1},this)})},e.prototype.CancelCameraAnim=function(){-1!=this.playerAnimTask&&(Tween2DUtil.getInst().kill(this.playerAnimTask),this.playerAnimTask=-1)},e.prototype.ChangeView=function(t){var e=ConfigManager.GetInstance().GetWeaponConfig(t);this.viewComp.ChangeView(e.weaponSkin),this.tailComp.SetTailPosByWeapon(e)},e.prototype.SetAlpha=function(t){},e.prototype.movePlayer=function(t,e){var i=this.comParent.x-t,n=this.comParent.y-e;this.isPosInStage(i,n,!0)&&(this.comParent.x=i,this.comParent.y=n)},e}(Plane),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Monster=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SoundInterval=120,e}return __extends(e,t),Object.defineProperty(e.prototype,"BuffComp",{get:function(){return this.buffComp},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){t.prototype.beforeCreate.call(this),this.playerOrderZ=1},e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.config=ConfigManager.GetInstance().GetMonsterConfig(this.playerID),this.viewComp=new SpineViewComponent(this.config.SpineConfigID),this.hitComp=new MonsterHitComponent2D,this.skillComp=new MonsterSkillComponent2D,this.monsterEffectComp=new MonsterEffectComponent2D,this.monsterMoveComp=new MonsterMoveComponent2D,this.monsterBulletComp=new MonsterBulletComponent2D(EnumBulletOutLookType.MonsterBullet),this.attributeComp=new MonsterAttributeComponent,this.buffComp=new BuffComponent,this.hpBarComp=new MonsterHpBarComponent,this.shakeComp=new MonsterShakeComponent,this.addComponent(this.viewComp),this.addComponent(this.hitComp),this.addComponent(this.monsterEffectComp),this.addComponent(this.monsterMoveComp),this.addComponent(this.monsterBulletComp),this.addComponent(this.skillComp),this.addComponent(this.attributeComp),this.addComponent(this.buffComp),this.addComponent(this.hpBarComp),this.addComponent(this.shakeComp),this.comParent.x=this.viewWidth+500,this.comParent.y=this.viewHeight+500},e.prototype.GetCollisionShapeInfo=function(t){void 0===t&&(t=!1);var e=this.attributeComp.Scale,i=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent,this);return null==this.tempBoxCollisionInfo&&(this.tempBoxCollisionInfo=new BoxCollisonInfo(null,null)),this.tempBoxCollisionInfo.center=new Vec2(i.x,i.y),this.tempBoxCollisionInfo.size=new Vec2((t?this.config.AttackingColliderSize[0]:this.config.ColliderSize[0])*e.x,(t?this.config.AttackingColliderSize[1]:this.config.ColliderSize[1])*e.y),this.tempBoxCollisionInfo.rotation=this.viewComp.View.rotation,this.tempBoxCollisionInfo},e.prototype.Die=function(){var e=this;t.prototype.Die.call(this);var i=this.attributeComp.GetOnDieSkills(),n=0,o=function(){if(n==i.length){e.explode();var t=new MonsterDieInfo(e.playerID,e.PlayerPos,e.attributeComp.MonsterLvl,e.config,e.attributeComp.CanSpawnProp);PlayerManager.GetInstance().RecycleMonster(e.playerID,e),Facade.instance.sendNotification(NotificationNames.MONSTER_DIE,t)}};if(i.length>0)for(var r=0;r<i.length;r++){var a=i[r].Type;this.skillComp.End(a,function(){n++,o()})}else n=i.length,o()},e.prototype.explode=function(){var t=this.monsterEffectComp.showEffect(0,EnumSpineConfigID.SkillMissileExplode,StageManager.GetInstance().playerParent,CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent));this.monsterEffectComp.setEffectScale(3,3,t),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_monster_01)},e.prototype.InitPool=function(t,e){this.playerID=e,this.initComponent(),this.comParent.visible=!1},e.prototype.OnSpawn=function(t){this.uId=IDGenerator.GenMonsterID(),this.comParent.name=this.uId.toString(),this.soundEffectPlayTimeStamp=0,this.lastHitFxPlayTimeStamp=0,this.attributeComp.Init(t),this.GoLive(),this.hitComp.startCheckHit(),this.state=EnumPlayerState.Live,this.buffComp.Reset(),this.hpBarComp.SetProgress(1),this.hpBarComp.SetSkillIcons(this.attributeComp.MonsterSkillConfigs),this.hpBarComp.SetActive(!1),this.RefreshScale();for(var e=this.attributeComp.MonsterSkillConfigs,i=0;i<e.length;i++){var n=e[i];this.skillComp.Start(n.Type,n)}PlayerManager.GetInstance().MainPlayer.BuffComp.ContainBuff(EnumBuffType.Weaken)&&this.OnPauseBuff(!0)},e.prototype.OnRecycle=function(){this.showShapCom.ShowShape(!1),this.hitComp.stopCheckHit(),this.monsterMoveComp.monsterStop(),this.buffComp.Reset(),this.skillComp.stopAll(),this.hpBarComp.OnRecycle(),this.shakeComp.OnRecycle()},e.prototype.OnDestory=function(){this.DestroyPlayer()},e.prototype.Freeze=function(t){this.monsterMoveComp.monsterPause(t)},e.prototype.GetHit=function(t){return this.attributeComp.ReduceHp(t)?(this.hpBarComp.SetProgress(0),this.Die(),!0):(this.hpBarComp.SetActive(!0),this.hpBarComp.SetProgress(this.attributeComp.CurHP/this.attributeComp.MaxHP),!1)},e.prototype.OnBulletCollison=function(){var t=Date.now();if(t-this.soundEffectPlayTimeStamp>=this.SoundInterval&&(AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_fight_bullet_crash),this.soundEffectPlayTimeStamp=t),t-this.lastHitFxPlayTimeStamp>=ConstDefine.HIT_FX_PLAY_INTERVAL){var e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent),i=(this.monsterEffectComp.showEffect(0,EnumSpineConfigID.SkillMissileExplode,StageManager.GetInstance().playerParent,e),new Vec2(0,0)),n=ConfigManager.GetInstance().GetSpineConfig(EnumSpineConfigID.SkillMissileExplode),o=i.y-.5*n.SpineSize[1];this.hpBarComp.SetPosOnExpode(i.x,o),ConstDefine.USE_MODIFY&&this.shakeComp.Shake(),this.lastHitFxPlayTimeStamp=t}},e.prototype.RecoverHp=function(t){this.attributeComp.CurHP!=this.attributeComp.MaxHP&&(this.attributeComp.IncreaseHp(t),this.hpBarComp.SetProgress(this.attributeComp.CurHP/this.attributeComp.MaxHP))},e.prototype.ResetSizeAndHp=function(t,e){this.attributeComp.SetMaxHpAndSize(t,e),this.RefreshScale()},e.prototype.PushBack=function(t,e){var i=this.PlayerPos,n=i.x+t,o=Math.max(0,i.y+e);this.setPlayerPos(n,o)},e.prototype.RefreshScale=function(){this.viewComp.setViewScale(this.attributeComp.Scale.x,this.attributeComp.Scale.y),this.hpBarComp.SetPos(0,-this.viewComp.ViewSize.y/2),this.showShapCom.ShowShape()},e.prototype.OnPauseBuff=function(t){this.viewComp.Pause(t)},e.prototype.OnGameComplete=function(){this.skillComp.stopAll()},e}(PlayerBase2D),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MonsterBullet=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIt=!1,e}return __extends(e,t),e.prototype.initComponent=function(){this.isIt=!0,this.bulletMoveCom=new MonsterBulletMoveComponent2D,this.config=ConfigManager.GetInstance().GetBulletConfig(this.bulletType),this.viewComp=new ImageViewComponent(this.config.ImagePath),this.showShapCom=new Show2DShapeComponent,this.addComponent(this.showShapCom),this.addComponent(this.viewComp),this.addComponent(this.bulletMoveCom)},e.prototype.bulletOnRecycle=function(){this.bulletMoveCom.bulletStopMove()},e.prototype.bulletOnSpawn=function(){},e}(Bullet),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Prop=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timerId=-1,e}return __extends(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.propType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PropBuff",{get:function(){return this.config.BuffConfigID},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){t.prototype.beforeCreate.call(this)},e.prototype.initComponent=function(){this.moveCom=new PropMoveComponent,this.viewComp=new ImageViewComponent(this.config.PropImagePath),this.addComponent(this.viewComp),this.addComponent(this.moveCom),this.viewComp.SetActive(!1),this.comParent.name="PropID"+EnumPropType[this.Type]},e.prototype.InitPool=function(t,e){this.propType=e,this.config=ConfigManager.GetInstance().GetPropConfig(this.propType),this.initComponent()},e.prototype.OnSpawn=function(){this.uId=IDGenerator.GenPropID(),this.GoLive(),this.propOnSpawn()},e.prototype.OnRecycle=function(){this.propOnRecycle(),this.Die()},e.prototype.OnDestory=function(){this.DestroyPlayer(),this.config=null},e.prototype.GetCollisionShapeInfo=function(){var t=this.config.ColliderSize,e=CommonUtil2D.GetPosUnderTargetObj(this.comParent,StageManager.GetInstance().playerParent);return new BoxCollisonInfo(new Vec2(e.x,e.y),new Vec2(t[0],t[1]))},e.prototype.propOnSpawn=function(){this.moveCom.StartMovement(),this.startDurationTimer()},e.prototype.propOnRecycle=function(){this.moveCom.StopMovement(),this.stopTimer()},e.prototype.startDurationTimer=function(){var t=this;this.timerId=TimeManager.getInst().once(this.config.Duration,cbhandler.gen_handler(function(){t.timerId=-1,PropManager.GetInstance().Recycle(t.propType,t)}))},e.prototype.stopTimer=function(){this.timerId>=0&&TimeManager.getInst().remove(this.timerId),this.timerId=-1},e}(PlayerBase2D),Player=function(){function t(t){this.playerID=t}return t.prototype.GetPlayerID=function(){return this.playerID},t.prototype.InitComponent=function(){},t.prototype.AddComponent=function(){},t.prototype.RemoveAllComponent=function(){},t.prototype.SetPlayerActive=function(t){},t.prototype.DestroyPlayer=function(){this.SetPlayerActive(!0),this.RemoveAllComponent()},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoginPlayer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(Player),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HttpDummyMessageSender=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SendHttpMsg=function(t,e,i,n){HttpNetworkManager.GetInstance().onMessage(t,e),i&&i()},e.prototype.SendLogin=function(t,e,i,n,o){var r=CommonUtil.CreateOfflineDummyPlayerInfo(),a=new com.msg.s_userLogin_1001;a.playerInfo=r,a.playerInfo.openId=t,a.serverConfig=new com.msg.serverConfig,a.serverConfig.shareEnable=1,a.serverConfig.luckyEnable=1,a.serverConfig.inviteType=1,a.serverConfig.verifyReward=10,a.serverConfig.exchange_Coin=20,a.serverConfig.exchange_Point=10,a.serverConfig.verifyColddown=300;var s=com.msg.s_userLogin_1001.encode(a).finish();this.SendHttpMsg(EnumNetMessage.S_UserLogin_1001,s,n,o),Log.Debug("http 本地测试 发送login:"+a.playerInfo.openId)},e.prototype.SendExchangeWithDiamond=function(t,e,i,n,o){var r=new com.msg.s_ExchangeWithDiamond_2001;switch(r.result=1,r.moneyInfo=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo,r.moneyInfo.diamondNum-=i,e){case EnumDiamondExchangeType.Coin:r.moneyInfo.goldNum+=GameDataUtil.DiamondExchange_Coin(i);break;case EnumDiamondExchangeType.Power:r.moneyInfo.pointNum+=GameDataUtil.DiamondExchange_Power(i)}var a=com.msg.s_ExchangeWithDiamond_2001.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_ExchangeWithDiamond_2001,a,n,o),Log.Debug("http 本地测试发送 S_ExchangeWithDiamond_2001:openId: "+t)},e.prototype.SendUpgradeWeaopnLvl=function(t,e,i,n,o,r){var a=new com.msg.s_UpgradeWeaponLvl_2011;a.result=1,a.weaponID=e,a.newLvl=i+1,a.totalGold=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum-=n;var s=com.msg.s_UpgradeWeaponLvl_2011.encode(a).finish();this.SendHttpMsg(EnumNetMessage.S_UpgradeWeaponLvl_2011,s,o,r),Log.Debug("http 本地测试发送 S_UpgradeWeaponLvl_2011:openId: "+t)},e.prototype.SendUpgradeSpawnLvl=function(t,e,i,n,o,r,a){var s=new com.msg.s_UpgradeSpawnLvl_2013;s.result=1,s.newLvl=e+1,s.totalGold=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum-=i;var l=com.msg.s_UpgradeSpawnLvl_2013.encode(s).finish();this.SendHttpMsg(EnumNetMessage.S_UpgradeSpawnLvl_2013,l,r,a),Log.Debug("http 本地测试发送 S_UpgradeSpawnLvl_2013:openId: "+t)},e.prototype.SendWeaponEvolution=function(t,e,i,n,o,r){var a=new com.msg.s_WeaponEvolution_2015;a.result=1,a.weaponID=e,a.newEvolutionLvl=i+1,a.totalGold=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum-=n;var s=com.msg.s_WeaponEvolution_2015.encode(a).finish();this.SendHttpMsg(EnumNetMessage.S_WeaponEvolution_2015,s,o,r),Log.Debug("http 本地测试发送 S_WeaponEvolution_2015:openId: "+t)},e.prototype.SendEquipSideWeapon=function(t,e,i,n){var o=new com.msg.s_EquipSideWeapon_2021;o.result=1,o.sideWeaponID=e;var r=com.msg.s_EquipSideWeapon_2021.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_EquipSideWeapon_2021,r,i,n),Log.Debug("http 本地测试发送 S_EquipSideWeapon_2021:openId: "+t)},e.prototype.SendUnlockSideWeapon=function(t,e,i,n){var o=new com.msg.s_UnlockSideWeapon_2023;o.result=1,o.sideWeaponInfo=new com.msg.weaponDetail,o.sideWeaponInfo.id=e,o.sideWeaponInfo.level=1;var r=com.msg.s_UnlockSideWeapon_2023.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_UnlockSideWeapon_2023,r,i,n),Log.Debug("http 本地测试发送 S_UnlockSideWeapon_2023:openId: "+t)},e.prototype.SendCreateMoneySpawn=function(t,e,i,n){var o=new com.msg.s_CreateMoneySpawn_2031;o.result=1;var r=new com.msg.moneySpawnInfo;r.moneyType=e,r.spawnType=1,r.moneyNum=0,r.createTime=Math.floor(Date.now()/1e3),r.latestPointRefreshTime=Math.floor(Date.now()/1e3);var a=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length-1];r.spawnID=null!=a?a.spawnID+1:1,o.newSpawnInfo=r;var s=com.msg.s_CreateMoneySpawn_2031.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_CreateMoneySpawn_2031,s,i,n)},e.prototype.SendUpdateMoneySpawn=function(t,e,i,n,o){for(var r=new com.msg.s_UpdateMoneySpawn_2033,a=-1,s=0;s<GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length;s++){if(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[s].spawnID==e){a=s;break}}-1!=a?(r.result=1,r.spawnInfo=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[a],1==r.spawnInfo.moneyType?r.spawnInfo.moneyNum>=GameDataUtil.Spawn_Coin_Max(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl)?r.spawnInfo.spawnType=2:(r.spawnInfo.moneyNum+=GameDataUtil.Spawn_Coin(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl),r.spawnInfo.moneyNum>=GameDataUtil.Spawn_Coin_Max(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl)&&(r.spawnInfo.spawnType=2)):r.spawnInfo.moneyNum>=GameDataUtil.Spawn_Diamond_Max(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl)?r.spawnInfo.spawnType=2:(r.spawnInfo.moneyNum+=GameDataUtil.Spawn_Diamond(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl),r.spawnInfo.moneyNum>=GameDataUtil.Spawn_Diamond_Max(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl)&&(r.spawnInfo.spawnType=2)),r.spawnInfo.latestPointRefreshTime=Math.floor((new Date).getTime()/1e3)):r.result=0;var l=com.msg.s_UpdateMoneySpawn_2033.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_UpdateMoneySpawn_2033,l,n,o)},e.prototype.SendGainMoneySpawn=function(t,e,i,n,o,r){for(var a=new com.msg.s_GainMoneySpawn_2035,s=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList,l=-1,h=0;h<s.length;h++){if(s[h].spawnID==e){l=h;break}}-1!=l?(a.result=1,a.spawnInfo=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[l],a.spawnInfo.moneyNum=i*n):a.result=0;var u=com.msg.s_GainMoneySpawn_2035.encode(a).finish();this.SendHttpMsg(EnumNetMessage.S_GainMoneySpawn_2035,u,o,r)},e.prototype.SendRemoveMoneySpawn=function(t,e,i,n){var o=new com.msg.s_RemoveMoneySpawn_2037;o.result=1,o.spawnID=e;var r=com.msg.s_RemoveMoneySpawn_2037.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_RemoveMoneySpawn_2037,r,i,n),Log.Debug("http 本地测试发送 发送 S_RemoveMoneySpawn_2037:openId: "+t)},e.prototype.SendInvitedByFriend=function(t,e,i,n){var o=new com.msg.s_InvitedByFriend_2041;o.result=1;var r=com.msg.s_InvitedByFriend_2041.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_InvitedByFriend_2041,r,i,n),Log.Debug("http 本地测试发送 S_InvitedByFriend_2041:openId: "+t)},e.prototype.SendCheckInviteList=function(t,e,i){var n=new com.msg.s_CheckInviteList_2043;n.inviteList=GameDataManager.getInstance().LoginPlayerInfo.InvitedList;var o=com.msg.s_CheckInviteList_2043.encode(n).finish();this.SendHttpMsg(EnumNetMessage.S_CheckInviteList_2043,o,e,i),Log.Debug("http 本地测试发送 S_CheckInviteList_2043:openId: "+t)},e.prototype.SendGetInviteReward=function(t,e,i,n){for(var o=new com.msg.s_GetInviteReward_2045,r=GameDataManager.getInstance().LoginPlayerInfo.InvitedList,a=0,s=0;s<r.length;s++){var l=r[s];if(l.friendOpenID==e){a=1,o.rewardInfo=new com.msg.inviteDetail,o.rewardInfo.friendOpenID=l.friendOpenID,o.rewardInfo.index=l.index,o.rewardInfo.picUrl=l.picUrl,o.rewardInfo.rewardNum=l.rewardGained<1?10:1,o.rewardInfo.rewardGained=1;break}}o.result=a;var h=com.msg.s_GetInviteReward_2045.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_GetInviteReward_2045,h,i,n),Log.Debug("http 本地测试发送 S_GetInviteReward_2045:openId: "+t)},e.prototype.SendGetInviteVerifyReward=function(t,e,i,n,o){for(var r=new com.msg.s_GetInviteVerifyReward_2047,a=GameDataManager.getInstance().LoginPlayerInfo.InvitedList,s=0,l=0;l<a.length;l++){var h=a[l];if(h.friendOpenID==e){s=1,r.firendInfo=new com.msg.inviteDetail,r.firendInfo.friendOpenID=h.friendOpenID,r.firendInfo.index=h.index,r.firendInfo.picUrl=h.picUrl,r.firendInfo.rewardNum=0==i?10:1,r.firendInfo.rewardGained=1==i?2:3,r.rewardNum=0==i?10:1;break}}r.result=s;var u=com.msg.s_GetInviteVerifyReward_2047.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_GetInviteVerifyReward_2047,u,n,o),Log.Debug("http 本地测试发送 S_GetInviteVerifyReward_2047:openId: "+t)},e.prototype.SendGainPointByTime=function(t,e,i){var n=new com.msg.s_GainPointByTime_2051;n.result=1,n.moneyInfo=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo,n.moneyInfo.pointNum+=1,n.moneyInfo.latestPointRefreshTime=Math.floor(Date.now()/1e3);var o=com.msg.s_GainPointByTime_2051.encode(n).finish();this.SendHttpMsg(EnumNetMessage.S_GainPointByTime_2051,o,e,i),Log.Debug("http 本地测试发送 S_GainPointByTime_2051:openId: "+t)},e.prototype.SendGainPointByMatch=function(t,e,i,n){var o=new com.msg.s_GainPointByMatch_2053;o.result=1,o.pointNum=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum,o.pointNum+=5,o.pointNum>100&&(o.pointNum=100);var r=com.msg.s_GainPointByMatch_2053.encode(o).finish();this.SendHttpMsg(EnumNetMessage.S_GainPointByMatch_2053,r,i,n),Log.Debug("http 本地测试发送 S_GainPointByMatch_2053:openId: "+t)},e.prototype.SendMatchComplete=function(t,e,i,n,o){var r=new com.msg.s_MatchComplete_2100;if(r.goldReward=i,r.latestUnCompletedLevelID=GameDataManager.getInstance().LoginPlayerInfo.CurLevel,e>0){var a=e+1;ConfigManager.GetInstance().GetLevelConfig(a)&&(r.latestUnCompletedLevelID+=1)}var s=com.msg.s_MatchComplete_2100.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_MatchComplete_2100,s,n,o),Log.Debug("http 本地测试发送 s_MatchComplete_2100:goldReward: "+i)},e.prototype.SendMatchStart=function(t,e,i){var n=new com.msg.s_MatchStart_2101;n.curPoint=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum,n.result=n.curPoint>=5?1:0,100==n.curPoint&&(n.latestPointRefreshTime=Math.floor(Date.now()/1e3)),n.curPoint-=5;var o=com.msg.s_MatchStart_2101.encode(n).finish();this.SendHttpMsg(EnumNetMessage.S_MatchStart_2101,o,e,i),Log.Debug("http 本地测试发送 S_MatchStart_2101:openId: "+t)},e.prototype.SendGetMessageVerifyCode=function(t,e,i){var n=new com.msg.s_GetMessageVerifyCode_2201;n.result=1;var o=com.msg.s_GetMessageVerifyCode_2201.encode(n).finish();this.SendHttpMsg(EnumNetMessage.S_GetMessageVerifyCode_2201,o,e,i),Log.Debug("http 本地测试发送 S_GetMessageVerifyCode_2201:phonenumber: "+t)},e.prototype.SendCheckPhoneVerify=function(t,e,i,n,o){var r=new com.msg.s_CheckPhoneVerify_2203;r.result=1,r.verifyReward=new com.msg.verifyInfo,r.verifyReward.diamondNum=1e3,r.verifyReward.lotteryNum=1;var a=com.msg.s_CheckPhoneVerify_2203.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_CheckPhoneVerify_2203,a,n,o),Log.Debug("http 本地测试发送 S_CheckPhoneVerify_2203:openId: "+t)},e.prototype.SendLottery=function(t,e,i){var n=new com.msg.s_Lottery_2301;n.result=0,n.rewardConfigID=Math.floor(12*Math.random()+1);var o=com.msg.s_Lottery_2301.encode(n).finish();this.SendHttpMsg(EnumNetMessage.S_Lottery_2301,o,e,i),Log.Debug("http 本地测试发送 S_Lottery_2301:openId: "+t)},e.prototype.SendCheckLotteryRewardHistroy=function(t,e,i,n,o){var r=new com.msg.s_CheckLotteryRewardHistroy_2303;r.result=0;var a=com.msg.s_CheckLotteryRewardHistroy_2303.encode(r).finish();this.SendHttpMsg(EnumNetMessage.S_CheckLotteryRewardHistroy_2303,a,n,o),Log.Debug("http 本地测试发送 S_CheckLotteryRewardHistroy_2303:openId: "+t)},e}(BaseMessageSender),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HttpProtoMessageSender=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SendLogin=function(t,e,i,n,o){var r=new com.msg.c_userLogin_1000;r.openId=t,e&&i&&(r.wxInfo=new com.msg.wxInfo,r.wxInfo.imageUrl=e,r.wxInfo.nickName=i);var a=com.msg.c_userLogin_1000.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_UserLogin_1000,a,n,o),Log.Debug("http 发送 C_UserLogin_1000:openId: "+t+"wxInfo: "+e)},e.prototype.SendUserLogin=function(t,e,i,n){},e.prototype.SendExchangeWithDiamond=function(t,e,i,n,o){var r=new com.msg.c_ExchangeWithDiamond_2000;r.openId=t,r.type=e,r.diamondNum=i;var a=com.msg.c_ExchangeWithDiamond_2000.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_ExchangeWithDiamond_2000,a,n,o),Log.Debug("http 发送 C_ExchangeWithDiamond_2000:openId: "+t)},e.prototype.SendUpgradeWeaopnLvl=function(t,e,i,n,o,r){var a=new com.msg.c_UpgradeWeaponLvl_2010;a.openId=t,a.weaponID=e,a.curLvl=i,a.costGold=n;var s=com.msg.c_UpgradeWeaponLvl_2010.encode(a).finish();this.SendHttpMsg(EnumNetMessage.C_UpgradeWeaponLvl_2010,s,o,r),Log.Debug("http 发送 C_UpgradeWeaponLvl_2010:openId: "+t)},e.prototype.SendUpgradeSpawnLvl=function(t,e,i,n,o,r,a){var s=new com.msg.c_UpgradeSpawnLvl_2012;s.openId=t,s.curLvl=e,s.costGold=i,s.newGoldSpawnLvl=n,s.newDiamondSpawnLvl=o;var l=com.msg.c_UpgradeSpawnLvl_2012.encode(s).finish();this.SendHttpMsg(EnumNetMessage.C_UpgradeSpawnLvl_2012,l,r,a),Log.Debug("http 发送 C_UpgradeSpawnLvl_2012:openId: "+t)},e.prototype.SendWeaponEvolution=function(t,e,i,n,o,r){var a=new com.msg.c_WeaponEvolution_2014;a.openId=t,a.weaponID=e,a.curEvolutionLvl=i,a.costGold=n;var s=com.msg.c_WeaponEvolution_2014.encode(a).finish();this.SendHttpMsg(EnumNetMessage.C_WeaponEvolution_2014,s,o,r),Log.Debug("http 发送 C_WeaponEvolution_2014:openId: "+t)},e.prototype.SendEquipSideWeapon=function(t,e,i,n){var o=new com.msg.c_EquipSideWeapon_2020;o.openId=t,o.sideWeaponID=e;var r=com.msg.c_EquipSideWeapon_2020.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_EquipSideWeapon_2020,r,i,n),Log.Debug("http 发送 C_EquipSideWeapon_2020:openId: "+t)},e.prototype.SendUnlockSideWeapon=function(t,e,i,n){var o=new com.msg.c_UnlockSideWeapon_2022;o.openId=t,o.sideWeaponID=e;var r=com.msg.c_UnlockSideWeapon_2022.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_UnlockSideWeapon_2022,r,i,n),Log.Debug("http 发送 C_UnlockSideWeapon_2022:openId: "+t)},e.prototype.SendCreateMoneySpawn=function(t,e,i,n){var o=new com.msg.c_CreateMoneySpawn_2030;o.openId=t,o.moneyType=e;var r=com.msg.c_CreateMoneySpawn_2030.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_CreateMoneySpawn_2030,r,i,n),Log.Debug("http 发送 C_CreateMoneySpawn_2030:openId: "+t)},e.prototype.SendUpdateMoneySpawn=function(t,e,i,n,o){var r=new com.msg.c_UpdateMoneySpawn_2032;r.openId=t,r.spawnID=e,r.moneyDelta=i;var a=com.msg.c_UpdateMoneySpawn_2032.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_UpdateMoneySpawn_2032,a,n,o),Log.Debug("http 发送 C_UpdateMoneySpawn_2032:openId: "+t)},e.prototype.SendGainMoneySpawn=function(t,e,i,n,o,r){var a=new com.msg.c_GainMoneySpawn_2034;a.openId=t,a.spawnID=e,a.base=i,a.lucky=n;var s=com.msg.c_GainMoneySpawn_2034.encode(a).finish();this.SendHttpMsg(EnumNetMessage.C_GainMoneySpawn_2034,s,o,r),Log.Debug("http 发送 C_GainMoneySpawn_2034:openId: "+t)},e.prototype.SendRemoveMoneySpawn=function(t,e,i,n){var o=new com.msg.c_RemoveMoneySpawn_2036;o.openId=t,o.spawnID=e;var r=com.msg.c_RemoveMoneySpawn_2036.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_RemoveMoneySpawn_2036,r,i,n),Log.Debug("http 发送 C_RemoveMoneySpawn_2036:openId: "+t)},e.prototype.SendInvitedByFriend=function(t,e,i,n){var o=new com.msg.c_InvitedByFriend_2040;o.openId=t,o.inviterOpenID=e;var r=com.msg.c_InvitedByFriend_2040.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_InvitedByFriend_2040,r,i,n),Log.Debug("http 发送 C_InvitedByFriend_2040:openId: "+t)},e.prototype.SendCheckInviteList=function(t,e,i){var n=new com.msg.c_CheckInviteList_2042;n.openId=t;var o=com.msg.c_CheckInviteList_2042.encode(n).finish();this.SendHttpMsg(EnumNetMessage.C_CheckInviteList_2042,o,e,i),Log.Debug("http 发送 C_CheckInviteList_2042:openId: "+t)},e.prototype.SendGetInviteReward=function(t,e,i,n){var o=new com.msg.c_GetInviteReward_2044;o.openId=t,o.friendOpenId=e;var r=com.msg.c_GetInviteReward_2044.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_GetInviteReward_2044,r,i,n),Log.Debug("http 发送 C_GetInviteReward_2044:openId: "+t)},e.prototype.SendGetInviteVerifyReward=function(t,e,i,n,o){var r=new com.msg.c_GetInviteVerifyReward_2046;r.openId=t,r.friendOpenId=e,r.rewardType=i;var a=com.msg.c_GetInviteVerifyReward_2046.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_GetInviteVerifyReward_2046,a,n,o),Log.Debug("http 发送 C_GetInviteVerifyReward_2046:openId: "+t)},e.prototype.SendGainPointByTime=function(t,e,i){var n=new com.msg.c_GainPointByTime_2050;n.openId=t;var o=com.msg.c_GainPointByTime_2050.encode(n).finish();this.SendHttpMsg(EnumNetMessage.C_GainPointByTime_2050,o,e,i),Log.Debug("http 发送 C_GainPointByTime_2050:openId: "+t)},e.prototype.SendGainPointByMatch=function(t,e,i,n){var o=new com.msg.c_GainPointByMatch_2052;o.openId=t,o.curLevel=e;var r=com.msg.c_GainPointByMatch_2052.encode(o).finish();this.SendHttpMsg(EnumNetMessage.C_GainPointByMatch_2052,r,i,n),Log.Debug("http 发送 C_GainPointByMatch_2052:openId: "+t)},e.prototype.SendMatchComplete=function(t,e,i,n,o){var r=new com.msg.c_MatchComplete_2100;r.openId=t,r.completedLevel=e,r.goldReward=i;var a=com.msg.c_MatchComplete_2100.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_MatchComplete_2100,a,n,o),Log.Debug("http 发送c_MatchComplete_2100:openId: "+t+"completedLevel: "+e+"goldReward: "+i)},e.prototype.SendMatchStart=function(t,e,i){var n=new com.msg.c_MatchStart_2101;n.openId=t;var o=com.msg.c_MatchStart_2101.encode(n).finish();this.SendHttpMsg(EnumNetMessage.C_MatchStart_2101,o,e,i),Log.Debug("http 发送 C_MatchStart_2101:openId: "+t)},e.prototype.SendGetMessageVerifyCode=function(t,e,i){var n=new com.msg.c_GetMessageVerifyCode_2200;n.phoneNumber=t;var o=com.msg.c_GetMessageVerifyCode_2200.encode(n).finish();this.SendHttpMsg(EnumNetMessage.C_GetMessageVerifyCode_2200,o,e,i),Log.Debug("http 发送 C_GetMessageVerifyCode_2200:phonenumber: "+t)},e.prototype.SendCheckPhoneVerify=function(t,e,i,n,o){var r=new com.msg.c_CheckPhoneVerify_2202;r.openId=t,r.phoneNumber=e,r.verifyCode=i;var a=com.msg.c_CheckPhoneVerify_2202.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_CheckPhoneVerify_2202,a,n,o),Log.Debug("http 发送 C_CheckPhoneVerify_2202:openId: "+t)},e.prototype.SendLottery=function(t,e,i){var n=new com.msg.c_Lottery_2300;n.openId=t;var o=com.msg.c_Lottery_2300.encode(n).finish();this.SendHttpMsg(EnumNetMessage.C_Lottery_2300,o,e,i),Log.Debug("http 发送 C_Lottery_2300:openId: "+t)},e.prototype.SendCheckLotteryRewardHistroy=function(t,e,i,n,o){var r=new com.msg.c_CheckLotteryRewardHistroy_2302;r.openId=t,r.pageIndex=e,r.histCount=i;var a=com.msg.c_CheckLotteryRewardHistroy_2302.encode(r).finish();this.SendHttpMsg(EnumNetMessage.C_CheckLotteryRewardHistroy_2302,a,n,o),Log.Debug("http 发送 C_CheckLotteryRewardHistroy_2302:openId: "+t)},e}(BaseMessageSender),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},EchoMessageSender=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NETPLAYERID=10002,e.LoginPlayerID=10001,e.ROOM_ID=1e4,e}return __extends(e,t),e.GetInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.SendLogin=function(t,e,i){var n=this.LoginPlayerID,o=this.CreateDummyPlayerInfo("testOpenID",n,30,1,1,1),r=new com.msg.s_userLogin_1001;r.openID="testOpenID",r.playerInfo=o;var a=com.msg.s_userLogin_1001.encode(r).finish();this.SendSocketMessage(EnumNetMessage.S_UserLogin_1001,a),Log.Debug("发送login:")},e.prototype.CreateDummyPlayerInfo=function(t,e,i,n,o,r){var a=new com.msg.playerInfo;return a.attr=new com.msg.attribute,a.attr.moveSpeed=i,a.matchInfo=new com.msg.matchInfo,a.matchInfo.highestScore=n,a.outlook=new com.msg.outlookInfo,a.outlook.skinID=o,a.outlook.trailID=r,a.playerID=e,a.money=new com.msg.moneyInfo,a.money.coinNum=10,a.header=new com.msg.playerHeaderInfo,a.header.imageUrl=ConstDefine.DEFAULT_USER_HEADER_URL,a.header.nickName=ConstDefine.DEFAULT_USER_NICKNAME+"_fromServer",a},e.prototype.SendHeartBeatPackage=function(t){var e=new com.msg.s_heartBeatPackage_7001,i=com.msg.s_heartBeatPackage_7001.encode(e).finish();this.SendSocketMessage(EnumNetMessage.S_HeartBeatPackage_7001,i),Log.Debug("c_heartBeatPackage_7000:"+t)},e}(BaseMessageSender),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},SingleMessageSender=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SendSocketMessage=function(t,e){WebsocketNetworkManager.GetInstance().onMessage(t,e)},e.prototype.SendLogin=function(t,e,i){Log.Error("single mode 不会发送socket登录消息")},e.prototype.SendHeartBeatPackage=function(t){Log.Error("单机不发送SendHeartBeatPackage消息")},e}(BaseMessageSender),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},SocketMessageSender=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SendLogin=function(t,e,i){var n=new com.msg.c_userLogin_1000;n.openID=t,e&&i&&(n.header=new com.msg.playerHeaderInfo,n.header.imageUrl=e,n.header.nickName=i);var o=com.msg.c_userLogin_1000.encode(n).finish();this.SendSocketMessage(EnumNetMessage.C_UserLogin_1000,o),Log.Debug("发送login:"+n.openID)},e.prototype.SendHeartBeatPackage=function(t){var e=new com.msg.c_heartBeatPackage_7000;e.playerID=t;var i=com.msg.c_heartBeatPackage_7000.encode(e).finish();this.SendSocketMessage(EnumNetMessage.C_HeartBeatPackage_7000,i),Log.Debug("c_heartBeatPackage_7000:"+t)},e}(BaseMessageSender),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CheckInviteListHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_CheckInviteList_2043.decode(t);if(Log.Debug("获取信息 s_CheckInviteList_2043:%o",e),e.inviteList){var i=SortUtil.orderby(e.inviteList,function(t){return t.index});GameDataManager.getInstance().LoginPlayerInfo.InvitedList=i,Facade.instance.sendNotification(NotificationNames.InviteFriendUI_CheckInviteListComplete)}},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CheckLotteryRewardHistroyHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_CheckLotteryRewardHistroy_2303.decode(t);Log.Debug("收到 s_CheckLotteryRewardHistroy_2303:",e),Facade.instance.sendNotification(NotificationNames.LotteryRewardHistUI_CheckResult,e)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CheckPhoneVerifyHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_CheckPhoneVerify_2203.decode(t);1==e.result&&(GameDataManager.getInstance().LoginPlayerInfo.VerifyInfo.state=1,e.verifyReward&&(e.verifyReward.diamondNum&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum+=e.verifyReward.diamondNum),e.verifyReward.goldNum&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=e.verifyReward.goldNum),e.verifyReward.pointNum&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum+=e.verifyReward.pointNum),e.verifyReward.lotteryNum&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.lotteryNum+=e.verifyReward.lotteryNum),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo))),Facade.instance.sendNotification(NotificationNames.VerifyUI_VerifyResult,e.result)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ChooseServerHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_chooseServer_999.decode(t);Log.Debug("收到http消息s_chooseServer_999,  address:"+e.serverAddress),e.serverAddress&&""!=e.serverAddress?HttpNetworkManager.GetInstance().ProtoHttpUrl=e.serverAddress:Log.Error("获取登录服务器地址异常, 地址为:"+e.serverAddress)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CreateMoneySpawnHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_CreateMoneySpawn_2031.decode(t);Log.Debug("获取信息 s_CreateMoneySpawn_2031:%o",e),1==e.result?(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.push(e.newSpawnInfo),Facade.instance.sendNotification(NotificationNames.HomepageUI_CreateMoneySpawn,e.newSpawnInfo)):Log.Error("创建钱币产能失败！")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},EquipSideWeaponHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_EquipSideWeapon_2021.decode(t);Log.Debug("获取信息 s_EquipSideWeapon_2021:%o",e),1==e.result?(Log.Debug("角色切换武器:%s",EnumSideWeaponType[e.sideWeaponID]),GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID=e.sideWeaponID,Facade.instance.sendNotification(NotificationNames.UpgradeUI_EquipSideWeapon),Facade.instance.sendNotification(NotificationNames.ON_SIDE_WEAPON_CHANGED)):Log.Error("副武器更换失败")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ExchangeWithDiamondHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_ExchangeWithDiamond_2001.decode(t);Log.Debug("获取信息 s_ExchangeWithDiamond_2001:%o",e),1==e.result&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo=e.moneyInfo,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo),Facade.instance.sendNotification(NotificationNames.ExchangeUI_ExchangeResult))},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GainMoneySpawnHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GainMoneySpawn_2035.decode(t);if(Log.Debug("获取信息 s_GainMoneySpawn_2035:%o",e),1==e.result){for(var i=-1,n=0;n<GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length;n++){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[n].spawnID==e.spawnInfo.spawnID&&(i=n)}-1!=i&&GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.splice(i,1),1==e.spawnInfo.moneyType?GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=e.spawnInfo.moneyNum:2==e.spawnInfo.moneyType&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum+=e.spawnInfo.moneyNum),Facade.instance.sendNotification(NotificationNames.HomepageUI_GainMoneySpawn,e.spawnInfo.spawnID),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo),Facade.instance.sendNotification(NotificationNames.MoreSpawnUI_Hide)}else Log.Error("收获钱币产能失败"),Facade.instance.sendNotification(NotificationNames.MoreSpawnUI_Hide)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GainPointByMatchHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GainPointByMatch_2053.decode(t);Log.Debug("获取信息 s_GainPointByMatch_2053:%o",e),1==e.result&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum=e.pointNum,Facade.instance.sendNotification(NotificationNames.ResultUI_GainPower),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo))},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GainPointByTimeHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GainPointByTime_2051.decode(t);Log.Debug("获取信息 s_GainPointByTime_2051:%o",e),1==e.result?(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo=e.moneyInfo,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)):Log.Error("倒计时结束 获取体力失败！")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GetInviteRewardHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GetInviteReward_2045.decode(t);if(Log.Debug("获取信息 s_GetInviteReward_2045:%o",e),1==e.result){for(var i=0;i<GameDataManager.getInstance().LoginPlayerInfo.InvitedList.length;i++){var n=GameDataManager.getInstance().LoginPlayerInfo.InvitedList[i];n.friendOpenID==e.rewardInfo.friendOpenID&&(0==n.rewardGained&&1==e.rewardInfo.rewardGained&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum+=e.rewardInfo.rewardNum),GameDataManager.getInstance().LoginPlayerInfo.InvitedList[i]=e.rewardInfo)}Facade.instance.sendNotification(NotificationNames.InviteFriendUI_RefreshFriendListInfo,e.rewardInfo.friendOpenID),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)}else Log.Debug("领取奖励失败！")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GetInviteVerifyRewardHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GetInviteVerifyReward_2047.decode(t);if(1==e.result){for(var i=0;i<GameDataManager.getInstance().LoginPlayerInfo.InvitedList.length;i++){var n=GameDataManager.getInstance().LoginPlayerInfo.InvitedList[i];n.friendOpenID==e.firendInfo.friendOpenID&&(0==n.rewardGained&&1==e.firendInfo.rewardGained?GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum+=e.rewardNum:2==n.rewardGained&&3==e.firendInfo.rewardGained&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.lotteryNum+=e.rewardNum,Facade.instance.sendNotification(NotificationNames.InviteFriendUI_RefreshLotteryNum,e.rewardNum)),GameDataManager.getInstance().LoginPlayerInfo.InvitedList[i]=e.firendInfo)}Facade.instance.sendNotification(NotificationNames.InviteFriendUI_RefreshFriendListInfo,e.firendInfo.friendOpenID),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)}else Log.Debug("领取奖励失败！")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GetMessageVerifyCodeHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_GetMessageVerifyCode_2201.decode(t);Log.Debug("收到 s_GetMessageVerifyCode_2201:",e),Facade.instance.sendNotification(NotificationNames.VerifyUI_GetMessageResult,e.result)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GetOpenIdHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_getOpenId_1101.decode(t);Log.Debug("s_getOpenId_1101 通过Proto获取OpenID",e),e.openId&&(GameDataManager.getInstance().protoOpenId=e.openId)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},InvitedByFriendHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_InvitedByFriend_2041.decode(t);Log.Debug("获取信息 s_InvitedByFriend_2041:%o",e),e.result},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LotteryHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_Lottery_2301.decode(t);if(Log.Debug("收到 s_CheckLotteryRewardHistroy_2303:",e),1==e.result){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.lotteryNum-=1,Facade.instance.sendNotification(NotificationNames.InviteFriendUI_LotteryResult,e.rewardConfigID);var i=ConfigManager.GetInstance().GetLotteryRewardConfig(e.rewardConfigID);switch(i.rewardType){case 0:break;case 1:GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=i.rewardNum;break;case 2:GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum+=i.rewardNum;break;case 3:GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum+=i.rewardNum}}else Facade.instance.sendNotification(NotificationNames.InviteFriendUI_LotteryResult,-1)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MatchCompleteHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_MatchComplete_2100.decode(t);Log.Debug("获取信息 s_MatchComplete_2100:%o",e),GameDataManager.getInstance().LoginPlayerInfo.CurLevel=e.latestUnCompletedLevelID,GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=e.goldReward,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo),Facade.instance.sendNotification(NotificationNames.ResultUI_Finish)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MatchStartHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_MatchStart_2101.decode(t);Log.Debug("获取信息 s_MatchStart_2101:%o",e),1==e.result&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum=e.curPoint,e.latestPointRefreshTime&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.latestPointRefreshTime=e.latestPointRefreshTime),Facade.instance.sendNotification(NotificationNames.UI_StartGame))},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},RemoveMoneySpawnHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_RemoveMoneySpawn_2037.decode(t);if(Log.Debug("获取信息 s_RemoveMoneySpawn_2037:%o",e),1==e.result){for(var i=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList,n=-1,o=0;o<i.length;o++){if(i[o].spawnID==e.spawnID){n=o;break}}GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.splice(n,1),Facade.instance.sendNotification(NotificationNames.HomepageUI_RemoveMoneySpawn,e.spawnID)}else Log.Error("移除钱币产能失败")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UnlockSideWeaponHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_UnlockSideWeapon_2023.decode(t);Log.Debug("获取信息 s_UnlockSideWeapon_2023:%o",e),1==e.result?(StorageManager.SetUnlockNewSideweapon(!0),GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList.push(e.sideWeaponInfo),Facade.instance.sendNotification(NotificationNames.HomepageUI_UnlockNewSideweapon)):Log.Debug("解锁副武器失败")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UpdateMoneySpawnHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_UpdateMoneySpawn_2033.decode(t);if(Log.Debug("获取信息 s_UpdateMoneySpawn_2033:%o",e),1==e.result){for(var i=0;i<GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length;i++)GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[i].spawnID==e.spawnInfo.spawnID&&(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[i]=e.spawnInfo);Facade.instance.sendNotification(NotificationNames.HomepageUI_UpdateMoneySpawn,e.spawnInfo)}else Log.Error("更新钱币产能失败")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UpgradeSpawnLvlHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_UpgradeSpawnLvl_2013.decode(t);Log.Debug("获取信息 s_UpgradeSpawnLvl_2013:%o",e),1==e.result?(GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl=e.newLvl,GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum=e.totalGold,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)):Log.Error("产能升级失败")},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UpgradeWeaponLvlHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_UpgradeWeaponLvl_2011.decode(t);Log.Debug("获取信息 s_UpgradeWeaponLvl_2011:%o",e),Log.Debug("获取信息XXXXXXXXXXXXXXXXXXXXX："+e.totalGold),1==e.result?1==e.weaponID?(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level=e.newLvl,GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum=e.totalGold,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)):(GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList.forEach(function(t){t.id==e.weaponID&&(t.level=e.newLvl)}),GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum=e.totalGold,Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)):Log.Error("武器升级失败："+e.weaponID)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UserLoginHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var i=com.msg.s_userLogin_1001.decode(t);Log.Debug("获取信息 s_userLogin_1001:%o",i),e.InitLoginPlayerInfo(i.playerInfo.openId,i.playerInfo),i.serverConfig&&GameDataManager.getInstance().InitServerConfig(i.serverConfig),GameDataManager.getInstance().InitServerLoginTime(i.loginTime),GameDataManager.getInstance().InitServerLocalDeltaTime(i.loginTime),TimeWatch.Stop("Neworklogin ok"),LoginSceneEnterCommand.BeenEntered?Log.Debug("断线重连, 发送的登录请求, 不回到登录界面"):(ConstDefine.HTTP_LOGIN||NetworkHeartBeat.GetInstance().Start(),Facade.instance.sendNotification(NotificationNames.ENTER_LOGIN_SCENE_COMMAND))},e.InitLoginPlayerInfo=function(t,e){GameDataManager.getInstance().InitLoginPlayer(t,e),Log.Debug("初始化玩家信息"),GameDataManager.getInstance().LoginPlayerInfo.SetHeaderInfo(WechatFuncManager.Instance.GetHeaderUrl(),WechatFuncManager.Instance.GetNickName()),Log.Debug("已保存玩家头像信息："+GameDataManager.getInstance().LoginPlayerInfo.PlayerHeader.nickName+" "+GameDataManager.getInstance().LoginPlayerInfo.PlayerHeader.imageUrl),Laya.Browser.onWeiXin&&WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.OPENID,openid:t})},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},WeaponEvolutionHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){var e=com.msg.s_WeaponEvolution_2015.decode(t);if(Log.Debug("获取信息 s_WeaponEvolution_2015:",e),1==e.result){if(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum=e.totalGold,console.log("副武器返回金币："+e.totalGold),1==e.weaponID)GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.evolveLevel=e.newEvolutionLvl;else{for(var i=GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList,n=0;n<i.length;n++){var o=i[n];o.id==e.weaponID&&(o.evolveLevel=e.newEvolutionLvl)}GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList=i}Facade.instance.sendNotification(NotificationNames.UpgradeUI_RefreshWeaponEvolutionInfo,e),Facade.instance.sendNotification(NotificationNames.UI_RefreshMoneyInfo)}},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},HeartBeatPackageHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.BaseMsgHandler=function(t){com.msg.s_heartBeatPackage_7001.decode(t)},e}(BaseMsgHandler),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},View=laya.ui.View,Dialog=laya.ui.Dialog,EffectAnimation=laya.display.EffectAnimation,ui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.BackgroundUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{width:3e3,var:"UI_Img_Black_Cover",height:3e3,centerY:0,centerX:0}},{type:"Box",props:{y:980,x:540,width:1080,var:"shakBox",height:1960,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{y:-1180,width:1280,var:"UI_Img_Background2",left:-95,height:2120,anchorY:.5,anchorX:.5}},{type:"Image",props:{y:940,width:1280,var:"UI_Img_Background",left:-97,height:2120,anchorY:.5,anchorX:.5}}]}]},t.BackgroundUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.WarningEffectUI",t.Effect.WarningEffectUI),e.prototype.createChildren.call(this),this.createView(t.BattleUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{y:80,x:30,width:104,var:"UI_Btn_Setting",stateNum:1,skin:"resources/common/img_setting.png",height:113}},{type:"Box",props:{width:130,var:"UI_Box_Prop",top:560,right:80,height:130,anchorY:1,anchorX:.5}},{type:"Box",props:{width:819,var:"UI_Box_MatchInfo",top:91,height:316,centerX:19},child:[{type:"Box",props:{y:0,x:210,width:400,visible:!1,var:"UI_Box_Level",top:0,height:160,centerX:0}},{type:"Box",props:{width:741,name:"Progress",height:59,centerY:0,centerX:0},child:[{type:"Image",props:{y:0,x:0,width:741,skin:"resources/unpack/img_progress_0.png",height:59}},{type:"Image",props:{y:0,x:0,width:741,skin:"resources/unpack/img_progress_1.png",height:59},child:[{type:"Image",props:{y:0,x:0,width:741,var:"UI_Img_Progress",skin:"resources/unpack/img_progress_1.png",renderType:"mask",height:59}}]}]},{type:"Image",props:{y:255,x:65,width:69,var:"UI_Img_Coin",skin:"resources/moneyinfo/img_icon_coin.png",height:63,anchorY:.5,anchorX:.5},child:[{type:"Label",props:{width:157,var:"UI_Txt_CoinCount",valign:"middle",text:"88.8M",right:-157,height:68,fontSize:48,color:"#ffffff",centerY:0,bold:!0,align:"left"}}]},{type:"Image",props:{y:257,x:653,width:75,skin:"resources/battle/img_insect.png",name:"Img_Enemy",height:54,anchorY:.5,anchorX:.5},child:[{type:"Label",props:{width:98,var:"UI_Txt_EnemyCount",valign:"middle",text:"888",right:-98,height:68,fontSize:48,color:"#ffffff",centerY:0,bold:!0,anchorY:.5,align:"left"}}]}]},{type:"Box",props:{y:341,x:217,width:100,visible:!1,name:"PosTest",height:100,anchorY:.5,anchorX:.5}},{type:"Image",props:{var:"UI_Img_Warning",top:0,skin:"resources/battle/img_warning_frame.png",right:0,left:0,bottom:0,sizeGrid:"75,75,75,75"},child:[{type:"Image",props:{width:764,top:500,skin:"resources/battle/img_warning_hint.png",height:285,centerX:8},child:[{type:"Label",props:{valign:"middle",top:0,text:"巨型虫子入侵",right:0,left:0,fontSize:60,font:"黑体",color:"#ff0400",bottom:0,bold:!0,align:"center"}}]},{type:"Script",props:{var:"UI_Anim_Warning",runtime:"ui.Effect.WarningEffectUI"}}]}]},t.BattleUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.CommonPanelUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Box",props:{top:0,right:0,left:0,bottom:0}},{type:"Image",props:{width:974,skin:"resources/common/interface_common_bg.png",height:712,centerY:0,centerX:0,sizeGrid:"90,90,90,90"},child:[{type:"Label",props:{wordWrap:!0,width:702,var:"txt_context",valign:"middle",text:"1111111111111111111111111111111111111111111111111111111111111111111",height:341,fontSize:50,font:"黑体",color:"#ffffff",centerY:-76,centerX:0,align:"center"}},{type:"Button",props:{width:299,var:"btn_exit",stateNum:1,skin:"resources/common/interface_btn_orange.png",labelSize:50,labelFont:"黑体",labelColors:"#FFFFFF",labelAlign:"center",label:"确认",height:107,centerX:0,bottom:103,sizeGrid:"50,70,50,70"}}]}]},t.CommonPanelUI=e}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.effectData=t.Effect.ClickDownEffectUI.uiView,i}return __extends(i,e),i}(EffectAnimation);i.uiView={type:"View",props:{},child:[{type:"Image",props:{skin:"resources/unpack/img_logo.png"},compId:2}],animations:[{nodes:[{target:2,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:1}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleX",index:1}]}}],name:"ClickDown",id:1,frameRate:120,action:0}]},e.ClickDownEffectUI=i}(t.Effect||(t.Effect={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.effectData=t.Effect.ClickUpEffectUI.uiView,i}return __extends(i,e),i}(EffectAnimation);i.uiView={type:"View",props:{},child:[{type:"Image",props:{skin:"resources/unpack/img_logo.png"},compId:2}],animations:[{nodes:[{target:2,keyframes:{scaleY:[{value:1.2,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:1}],scaleX:[{value:1.2,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleX",index:1}]}}],name:"ClickUp",id:1,frameRate:120,action:0}]},e.ClickUpEffectUI=i}(t.Effect||(t.Effect={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.effectData=t.Effect.DoubleCoinScaleEffectUI.uiView,i}return __extends(i,e),i}(EffectAnimation);i.uiView={type:"View",props:{},child:[{type:"Label",props:{},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:4}]}}],name:"ani1",id:1,frameRate:24,action:0}]},e.DoubleCoinScaleEffectUI=i}(t.Effect||(t.Effect={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.effectData=t.Effect.SeeSawEffectUI.uiView,i}return __extends(i,e),i}(EffectAnimation);i.uiView={type:"View",props:{},child:[{type:"Image",props:{y:0,x:0,skin:"resources/invitefriend/img_turntable.png",anchorY:.5,anchorX:.5},compId:2}],animations:[{nodes:[{target:2,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:36},{value:15,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:40},{value:-15,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:44},{value:15,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:48},{value:-15,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:52},{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"rotation",index:56}]}}],name:"SeeSaw",id:1,frameRate:24,action:0}]},e.SeeSawEffectUI=i}(t.Effect||(t.Effect={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.effectData=t.Effect.WarningEffectUI.uiView,i}return __extends(i,e),i}(EffectAnimation);i.uiView={type:"View",props:{},child:[{type:"Image",props:{skin:"resources/battle/img_warning_frame.png",sizeGrid:"75,75,75,75"},compId:2}],animations:[{nodes:[{target:2,keyframes:{x:[{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"x",index:0}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"alpha",index:12},{value:0,tweenMethod:"linearNone",tween:!0,target:2,key:"alpha",index:24}]}}],name:"Warning",id:1,frameRate:24,action:0}]},e.WarningEffectUI=i}(t.Effect||(t.Effect={}))}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),e.prototype.createChildren.call(this),this.createView(t.ExchangeUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Cancel",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:843,skin:"resources/unpack/img_panel_bg_0.png",height:1121,centerY:14,centerX:0,alpha:1},child:[{type:"Image",props:{width:244,var:"UI_Img_Title_Coin",top:115,skin:"resources/exchange/img_txt_title_coin.png",height:65,centerX:0}},{type:"Image",props:{width:242,var:"UI_Img_Title_Power",top:115,skin:"resources/exchange/img_txt_title_power.png",height:64,centerX:0}},{type:"Image",props:{width:620,top:241,skin:"resources/unpack/img_bg.png",sizeGrid:"15,15,15,15",height:200,centerX:0},child:[{type:"Image",props:{width:95,top:30,skin:"resources/exchange/img_txt_diamond.png",height:41,centerX:0}},{type:"Image",props:{width:84,skin:"resources/moneyinfo/img_icon_diamond.png",height:77,centerY:20,centerX:-60}},{type:"TextInput",props:{width:180,var:"UI_Ipt_DiamondNum",valign:"middle",type:"number",text:"8888",promptColor:"#ffff00",prompt:"数量",mouseEnabled:!1,height:70,fontSize:70,color:"#ffff00",centerY:20,centerX:60,bold:!0,align:"center"}},{type:"Button",props:{x:100,width:100,var:"UI_Btn_Reduce",height:100,centerY:20,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:70,skin:"resources/exchange/img_reduce.png",height:15,centerY:0,centerX:0}}]},{type:"Button",props:{x:520,width:100,var:"UI_Btn_Add",height:100,centerY:20,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:73,skin:"resources/exchange/img_add.png",height:72,centerY:0,centerX:0}}]}]},{type:"Image",props:{y:537,x:421,skin:"resources/exchange/img_arrow.png",rotation:90,name:"arrow",anchorY:.5,anchorX:.5}},{type:"Image",props:{width:620,top:618,skin:"resources/unpack/img_bg.png",sizeGrid:"15,15,15,15",height:200,centerX:0},child:[{type:"Image",props:{width:84,var:"UI_Img_Power",skin:"resources/moneyinfo/img_icon_power.png",height:77,centerY:20,centerX:-60,anchorY:.5,anchorX:.5}},{type:"Image",props:{width:84,var:"UI_Img_Coin",skin:"resources/moneyinfo/img_icon_coin.png",height:77,centerY:20,centerX:-60,anchorY:.5,anchorX:.5}},{type:"Image",props:{width:95,top:30,skin:"resources/exchange/img_txt_gain.png",height:41,centerX:0}},{type:"Label",props:{width:180,var:"UI_Txt_GainNum",valign:"middle",text:"15K",height:70,fontSize:70,color:"#ffff00",centerY:20,centerX:60,bold:!0,align:"center"}}]},{type:"Button",props:{y:925,x:232,width:263,var:"UI_Btn_GainDiamond",stateNum:1,skin:"resources/common/img_btn_orange.png",height:93,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{width:222,skin:"resources/exchange/img_txt_invite.png",height:70,centerY:0,centerX:0}},{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]},{type:"Button",props:{y:925,x:612,width:263,var:"UI_Btn_Exchange",stateNum:1,skin:"resources/common/img_btn_orange.png",height:93,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{width:119,skin:"resources/exchange/img_txt_exchange.png",height:44,centerY:0,centerX:0}},{type:"Script",props:{y:0,x:0,playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]}]}]},t.ExchangeUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.HomePageUI.uiView)},i}(Dialog);e.uiView={type:"Dialog",props:{width:1080,height:1920},child:[{type:"Box",props:{top:0,right:0,left:4,bottom:0},child:[{type:"Button",props:{y:881,x:286,width:509,var:"UI_Btn_GameStart",height:639,centerX:0,bottom:400},child:[{type:"Image",props:{width:290,var:"img_ClickToGame",skin:"resources/homepage/img_bg_0.png",height:56,centerX:0,bottom:22,anchorY:.5,anchorX:.5},compId:197,child:[{type:"Image",props:{var:"UI_Img_PowerTxt_1",skin:"resources/homepage/img_txt_startgame.png",centerY:0,centerX:0}},{type:"Image",props:{var:"UI_Img_PowerTxt_0",skin:"resources/homepage/img_txt_noenergy.png",centerY:0,centerX:0}}]}]},{type:"Label",props:{width:510,visible:!1,var:"UI_Txt_CurLevel",valign:"middle",top:820,text:"当前关卡：888",height:60,fontSize:60,font:"黑体",color:"#ffffff",centerX:9,align:"center"}}]},{type:"Box",props:{y:0,x:540,top:0,right:0,name:"Box_TopCenter",left:0,height:200,anchorX:.5},child:[{type:"Image",props:{width:868,top:256,skin:"resources/unpack/img_logo.png",name:"logo",height:320,centerX:-25},child:[{type:"Label",props:{width:130,var:"UI_Txt_Version",valign:"middle",text:"v8.8.8",right:0,height:53,fontSize:30,color:"#ffffff",bottom:0,bold:!0,align:"left"}}]}]},{type:"Box",props:{width:200,var:"Anchor_BottomCenter",height:400,centerX:0,bottom:0,anchorY:1,anchorX:.5},child:[{type:"Image",props:{width:1080,skin:"resources/unpack/img_func_down.png",height:152,centerX:0,bottom:0},child:[{type:"Button",props:{width:120,var:"UI_Btn_Leaderboard",stateNum:1,skin:"resources/homepage/img_func_bg_0.png",left:73,height:120,bottom:98},child:[{type:"Image",props:{width:112,skin:"resources/homepage/img_leaderboard.png",centerY:0,centerX:0}},{type:"Image",props:{skin:"resources/homepage/img_txt_leaderboard.png",centerX:0,bottom:-80}}]},{type:"Button",props:{width:120,var:"UI_Btn_InviteFriend",stateNum:1,skin:"resources/homepage/img_func_bg_0.png",left:261,height:120,bottom:98},child:[{type:"Image",props:{skin:"resources/homepage/img_invite.png",centerY:0,centerX:0}},{type:"Image",props:{skin:"resources/homepage/img_txt_invite.png",centerX:0,bottom:-80}},{type:"Image",props:{y:-40,width:88,var:"UI_Img_UpgradeArrow_Invite",skin:"resources/homepage/img_upgrade_arrow.png",height:32,centerX:0},compId:194,child:[{type:"Animation",props:{wrapMode:"0",name:"arrwojump",index:0,autoPlay:!0,autoAnimation:"ArrowJump"}}]}]},{type:"Button",props:{width:210,var:"UI_Btn_Upgrade_Main",stateNum:1,skin:"resources/homepage/img_func_bg_0.png",labelSize:40,labelFont:"黑体",labelColors:"#FFFFFF",height:210,centerX:0,bottom:98},child:[{type:"Image",props:{skin:"resources/homepage/img_main.png",centerY:0,centerX:0}},{type:"Image",props:{skin:"resources/homepage/img_txt_main.png",centerX:0,bottom:-80}},{type:"Image",props:{y:-50,width:120,var:"UI_Img_UpgradeArrow_Main",skin:"resources/homepage/img_upgrade_arrow.png",height:44,centerX:0},compId:190,child:[{type:"Animation",props:{wrapMode:"0",name:"arrwojump",index:0,autoPlay:!0,autoAnimation:"ArrowJump"}}]}]},{type:"Button",props:{width:120,var:"UI_Btn_Upgrade_Sub",stateNum:1,skin:"resources/homepage/img_func_bg_0.png",right:261,labelSize:40,labelFont:"黑体",labelColors:"#FFFFFF",height:120,bottom:98},child:[{type:"Image",props:{skin:"resources/homepage/img_sub.png",centerY:0,centerX:0}},{type:"Image",props:{skin:"resources/homepage/img_txt_sub.png",centerX:0,bottom:-80}},{type:"Image",props:{y:-40,width:88,var:"UI_Img_UpgradeArrow_Sub",skin:"resources/homepage/img_upgrade_arrow.png",height:32,centerX:0},compId:189,child:[{type:"Animation",props:{wrapMode:"0",name:"arrwojump",index:0,autoPlay:!0,autoAnimation:"ArrowJump"}}]}]},{type:"Button",props:{width:120,var:"UI_Btn_Upgrade_Money",stateNum:1,skin:"resources/homepage/img_func_bg_0.png",right:73,labelSize:40,labelFont:"黑体",labelColors:"#FFFFFF",height:120,bottom:98},child:[{type:"Image",props:{skin:"resources/homepage/img_spawn.png",centerY:0,centerX:0}},{type:"Image",props:{skin:"resources/homepage/img_txt_spawn.png",centerX:0,bottom:-80}},{type:"Image",props:{y:-40,width:88,var:"UI_Img_UpgradeArrow_Money",skin:"resources/homepage/img_upgrade_arrow.png",height:32,centerX:0},compId:188,child:[{type:"Animation",props:{wrapMode:"0",name:"arrwojump",index:0,autoPlay:!0,autoAnimation:"ArrowJump"}}]}]},{type:"Box",props:{width:186,var:"UI_Box_Coin_Pos",right:40,height:100,bottom:275}}]}]},{type:"Box",props:{width:200,top:0,name:"Box_TopLeft",left:0,height:200},child:[{type:"Button",props:{y:80,x:30,width:104,var:"UI_Btn_Setting",stateNum:1,skin:"resources/common/img_setting.png",height:113}},{type:"TextInput",props:{y:137,x:27,width:417,visible:!1,var:"UI_Ipt_SelectLevel",type:"number",skin:"resources/common/interface_btn_gray.png",promptColor:"#ababab",prompt:"点击输入关卡编号",height:158,fontSize:45,font:"黑体",color:"#ffffff",align:"center",sizeGrid:"50,70,50,70"}},{type:"Button",props:{y:317,x:36,width:401,visible:!1,var:"UI_Btn_EnterSelectedLevel",stateNum:1,skin:"resources/common/interface_btn_green.png",labelSize:40,labelFont:"黑体",labelColors:"#FFFFFF",label:"点击进入特定关卡",height:119,sizeGrid:"50,70,50,70"}}]},{type:"Image",props:{width:2e3,var:"UI_Img_Black_Cover",height:3e3,centerY:0,centerX:0}}],animations:[{nodes:[{target:188,keyframes:{y:[{value:-40,tweenMethod:"linearNone",tween:!0,target:188,key:"y",index:0},{value:-50,tweenMethod:"linearNone",tween:!0,target:188,key:"y",index:3},{value:-56,tweenMethod:"linearNone",tween:!0,target:188,key:"y",index:5},{value:-50,tweenMethod:"linearNone",tween:!0,target:188,key:"y",index:7},{value:-40,tweenMethod:"linearNone",tween:!0,target:188,key:"y",index:10}]}},{target:189,keyframes:{y:[{value:-40,tweenMethod:"linearNone",tween:!0,target:189,key:"y",index:0},{value:-50,tweenMethod:"linearNone",tween:!0,target:189,key:"y",index:3},{value:-56,tweenMethod:"linearNone",tween:!0,target:189,key:"y",index:5},{value:-50,tweenMethod:"linearNone",tween:!0,target:189,key:"y",index:7},{value:-40,tweenMethod:"linearNone",tween:!0,target:189,key:"y",index:10}]}},{target:190,keyframes:{y:[{value:-50,tweenMethod:"linearNone",tween:!0,target:190,key:"y",index:0},{value:-60,tweenMethod:"linearNone",tween:!0,target:190,key:"y",index:3},{value:-66,tweenMethod:"linearNone",tween:!0,target:190,key:"y",index:5},{value:-60,tweenMethod:"linearNone",tween:!0,target:190,key:"y",index:7},{value:-50,tweenMethod:"linearNone",tween:!0,target:190,key:"y",index:10}]}},{target:194,keyframes:{y:[{value:-40,tweenMethod:"linearNone",tween:!0,target:194,key:"y",index:0},{value:-50,tweenMethod:"linearNone",tween:!0,target:194,key:"y",index:3},{value:-56,tweenMethod:"linearNone",tween:!0,target:194,key:"y",index:5},{value:-50,tweenMethod:"linearNone",tween:!0,target:194,key:"y",index:7},{value:-40,tweenMethod:"linearNone",tween:!0,target:194,key:"y",index:10}]}}],name:"ArrowJump",id:2,frameRate:24,action:2},{nodes:[{target:197,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:36},{value:15,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:40},{value:-15,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:44},{value:15,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:48},{value:-15,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:52},{value:0,tweenMethod:"linearNone",tween:!0,target:197,key:"rotation",index:56}]}}],name:"SeeSaw",id:3,frameRate:24,action:2}]},t.HomePageUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),e.prototype.createChildren.call(this),this.createView(t.InviteFriendUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Cancel",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:843,var:"UI_Img_Scale",skin:"resources/unpack/img_panel_bg_0.png",height:1121,centerX:0,bottom:300,anchorY:1,anchorX:.5},child:[{type:"List",props:{width:770,var:"UI_List_InviteFriend",top:50,height:880,centerX:0}},{type:"Label",props:{var:"UI_Txt_CheckTip",valign:"middle",top:0,text:"查询中，请稍后...",right:0,left:0,fontSize:45,font:"黑体",color:"#ffffff",bottom:0,align:"center"}},{type:"Button",props:{y:1004,width:263,var:"UI_Btn_InviteFriend",stateNum:1,skin:"resources/common/img_btn_orange.png",sizeGrid:"40,50,40,50",labelSize:45,labelFont:"黑体",labelColors:"#ffffff",label:"邀请好友",height:93,centerX:0,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]}]}]},t.InviteFriendUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),e.prototype.createChildren.call(this),this.createView(t.InviteVerifyFriendUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Cancel",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:947,var:"UI_Img_Scale",skin:"resources/unpack/img_panel_bg_0.png",height:1442,centerX:0,bottom:256,anchorY:1,anchorX:.5},child:[{type:"Image",props:{width:418,top:107,skin:"resources/verify/img_txt_invite.png",height:91,centerX:6}},{type:"Image",props:{width:700,top:208,skin:"resources/unpack/img_lottery_bg.png",height:700,centerX:0},child:[{type:"Box",props:{y:125,x:125,width:150,var:"UI_LotteryBox_0",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:125,x:275,width:150,var:"UI_LotteryBox_1",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:125,x:425,width:150,var:"UI_LotteryBox_2",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:125,x:575,width:150,var:"UI_LotteryBox_3",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:275,x:575,width:150,var:"UI_LotteryBox_4",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:425,x:575,width:150,var:"UI_LotteryBox_5",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:575,x:575,width:150,var:"UI_LotteryBox_6",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:575,x:425,width:150,var:"UI_LotteryBox_7",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:575,x:275,width:150,var:"UI_LotteryBox_8",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:575,x:125,width:150,var:"UI_LotteryBox_9",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:425,x:125,width:150,var:"UI_LotteryBox_10",height:150,anchorY:.5,anchorX:.5}},{type:"Box",props:{y:275,x:125,width:150,var:"UI_LotteryBox_11",height:150,anchorY:.5,anchorX:.5}},{type:"Button",props:{y:350,x:350,width:300,var:"UI_Btn_Lottery",stateNum:1,skin:"resources/invitefriend/img_btn_lottery.png",labelSize:100,labelColors:"#FFFFFF",label:"10",height:300,centerY:0,centerX:0,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]}]},{type:"Box",props:{width:770,var:"UI_Box_InviteList",height:145,centerX:0,bottom:295},child:[{type:"Image",props:{width:780,skin:"resources/unpack/img_list_bg.png",height:129,centerY:0,centerX:0},child:[{type:"List",props:{width:605,var:"UI_List_InviteFriend",spaceX:20,repeatY:1,height:105,centerY:0,centerX:0}}]},{type:"Image",props:{width:15,skin:"resources/invitefriend/img_arrow.png",right:36,height:39,centerY:0,anchorY:.5,anchorX:.5}},{type:"Image",props:{width:15,skin:"resources/invitefriend/img_arrow.png",rotation:180,left:36,height:39,centerY:0,anchorY:.5,anchorX:.5}}]},{type:"Label",props:{width:600,var:"UI_Txt_CheckTip",valign:"middle",text:"查询中，请稍后...",height:145,fontSize:45,font:"黑体",color:"#ffffff",centerX:0,bottom:295,align:"center"}},{type:"Button",props:{width:263,var:"UI_Btn_InviteFriend",stateNum:1,skin:"resources/common/img_btn_orange.png",labelSize:36,labelFont:"黑体",labelColors:"#ffffff",label:"邀请好友",height:93,centerX:0,bottom:126,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]},{type:"Button",props:{y:-53,x:167,width:241,visible:!1,var:"UI_Btn_Lottery_SpeedUp",stateNum:1,skin:"resources/common/interface_btn_orange.png",labelSize:50,labelFont:"黑体",labelColors:"#FFFFFF",label:"加速转盘",height:110,sizeGrid:"50,70,50,70"}},{type:"Button",props:{y:-53,x:547,width:241,visible:!1,var:"UI_Btn_Lottery_SpeedDown",stateNum:1,skin:"resources/common/interface_btn_green.png",labelSize:50,labelFont:"黑体",labelColors:"#FFFFFF",label:"减速转盘",height:110,sizeGrid:"50,70,50,70"}},{type:"Box",props:{width:500,height:100,centerX:0,bottom:441},child:[{type:"Image",props:{x:285,width:58,skin:"resources/invitefriend/img_phone.png",height:86,centerY:0},child:[{type:"Label",props:{x:100,width:185,var:"UI_Txt_VerifyNum",valign:"middle",text:"888",height:100,fontSize:80,color:"#fff510",centerY:0}}]},{type:"Image",props:{x:0,width:89,skin:"resources/invitefriend/img_verify.png",height:87,centerY:0},child:[{type:"Label",props:{x:100,width:185,var:"UI_Txt_InviteNum",valign:"middle",text:"888",height:100,fontSize:80,color:"#fff510",centerY:0}}]}]},{type:"Button",props:{var:"UI_Btn_CheckLotteryHist",top:48,stateNum:1,skin:"resources/invitefriend/img_checkhist.png",right:33}}]}]},t.InviteVerifyFriendUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),e.prototype.createChildren.call(this),this.createView(t.LeaderboardUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Cancel",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:948,var:"UI_Img_Scale",skin:"resources/unpack/img_panel_bg_0.png",height:1171,centerX:0,bottom:300,anchorY:1,anchorX:.5},child:[{type:"Image",props:{width:307,top:110,skin:"resources/leaderboard/interface_title_rank.png",height:77,centerX:0}},{type:"Button",props:{y:1035,width:263,var:"UI_Btn_Invite_Friend",stateNum:1,skin:"resources/common/img_btn_orange.png",height:93,centerX:0,anchorY:.5,anchorX:.5},child:[{type:"Label",props:{valign:"middle",top:0,text:"邀请好友",right:0,left:0,fontSize:36,font:"黑体",color:"#ffffff",bottom:0,bold:!1,align:"center"}},{type:"Script",props:{y:0,x:0,playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]},{type:"Image",props:{y:200,width:780,var:"UI_Img_SharedCanvas",height:750,centerX:0}}]}]},t.LeaderboardUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.LevelUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Box",props:{width:300,var:"UI_Box_Level",top:316,height:150,centerX:0},child:[{type:"Image",props:{x:-74,width:224,var:"UI_Img_Prev",skin:"resources/level/img_level_other.png",height:84,centerY:0,anchorY:.5,anchorX:.5}},{type:"Image",props:{x:150,width:224,var:"UI_Img_Cur",skin:"resources/level/img_level_now.png",height:84,centerY:-20,anchorY:.5,anchorX:.5}},{type:"Image",props:{x:374,width:224,var:"UI_Img_Next",skin:"resources/level/img_level_other.png",height:84,centerY:0,anchorY:.5,anchorX:.5}},{type:"Label",props:{y:76,x:38,width:100,visible:!1,valign:"middle",text:"8888",height:70,fontSize:30,font:"黑体",color:"#ffffff",bold:!0,anchorY:.5,anchorX:.5,align:"center"}},{type:"Label",props:{y:76,x:150,width:100,visible:!1,valign:"middle",text:"88",height:70,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,anchorY:.5,anchorX:.5,align:"center"}},{type:"Label",props:{y:75,x:265,width:100,visible:!1,valign:"middle",text:"888",height:70,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,anchorY:.5,anchorX:.5,align:"center"}}]}]},t.LevelUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.LoadingUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{top:0,skin:"resources/background/main_bg_04.jpg",right:0,name:"loadingBG",left:0,bottom:0}},{type:"Image",props:{width:883,visible:!1,top:255,skin:"resources/unpack/img_logo.png",name:"logo",height:360,centerX:-25}},{type:"Box",props:{width:741,var:"UI_Box_Progress",height:59,centerY:59,centerX:0},child:[{type:"Image",props:{width:371,top:-69,skin:"resources/unpack/img_loading.png",height:53,centerX:32}},{type:"Image",props:{y:0,x:0,width:741,var:"UI_Progress_0",skin:"resources/unpack/img_progress_0.png",sizeGrid:"0,128,0,128",height:59,centerY:0,centerX:0},child:[{type:"Label",props:{y:17,x:856,width:46,visible:!1,var:"UI_Txt_Progress",valign:"middle",text:"100%",right:8,height:24,fontSize:21,font:"黑体",color:"#8bebf6",centerY:0,bold:!0,align:"center"}}]},{type:"Image",props:{y:0,x:0,width:741,var:"UI_Progress_1",skin:"resources/unpack/img_progress_1.png",sizeGrid:"0,8,0,8",height:59,centerY:0,centerX:0},child:[{type:"Image",props:{y:0,x:0,width:0,var:"UI_Progress_Mask",skin:"resources/unpack/img_progress_1.png",renderType:"mask",height:59}}]}]},{type:"Image",props:{width:908,skin:"resources/unpack/img_message.png",height:171,centerX:0,bottom:103}}]},t.LoadingUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.LotteryResultUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Back",top:0,stateNum:1,skin:"resources/common/background.png",right:0,left:0,bottom:0,sizeGrid:"5,5,5,5"},child:[{type:"Image",props:{y:429,width:825,skin:"resources/unpack/img_lottery_result_bg.png",sizeGrid:"90,90,90,90",height:468,centerX:0},child:[{type:"List",props:{width:600,var:"UI_List_LotteryReward",repeatX:4,height:300,centerY:17,centerX:0,anchorY:.5,anchorX:.5}},{type:"Image",props:{width:400,skin:"resources/invitefriend/img_qrcode.png",height:400,centerX:0,bottom:-439},child:[{type:"Label",props:{y:410,width:386,text:"领奖平台",height:92,fontSize:48,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"}}]}]}]}]},t.LotteryResultUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.LotteryRewardHistUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Back",top:0,stateNum:1,skin:"resources/common/background.png",right:0,left:0,bottom:0,sizeGrid:"5,5,5,5"}},{type:"Image",props:{width:784,top:195,skin:"resources/unpack/img_lottery_history_bg.png",height:653,centerX:0}},{type:"List",props:{width:746,var:"UI_List_Hist",top:360,height:400,centerX:0}},{type:"Image",props:{width:400,skin:"resources/invitefriend/img_qrcode.png",height:400,centerX:0,bottom:500},child:[{type:"Label",props:{y:410,width:386,text:"领奖平台",height:92,fontSize:48,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"}}]}]},t.LotteryRewardHistUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.MoneyInfoUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,mouseThrough:!0,mouseEnabled:!0,height:1920},child:[{type:"HBox",props:{width:784,var:"UI_Anchor_Top",top:0,space:0,left:160,height:160,align:"middle"},child:[{type:"Button",props:{width:240,var:"UI_Btn_Add_Coin",stateNum:1,skin:"resources/moneyinfo/img_bg.png",left:0,height:70,bottom:0,sizeGrid:"16,16,16,16"},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_coin.png",left:5,height:63,centerY:0}},{type:"Label",props:{wordWrap:!0,width:145,var:"UI_Txt_Coin",valign:"top",text:"8.88M",height:40,fontSize:40,color:"#ffffff",centerY:0,centerX:0,align:"center"}},{type:"Image",props:{width:46,skin:"resources/moneyinfo/img_icon_add.png",right:10,height:45,centerY:0}}]},{type:"Button",props:{width:240,var:"UI_Btn_Add_Power",stateNum:1,skin:"resources/moneyinfo/img_bg.png",height:70,centerX:0,bottom:0,sizeGrid:"16,16,16,16"},child:[{type:"Box",props:{width:159,height:73,centerY:0,centerX:0},child:[{type:"Image",props:{width:151,visible:!1,skin:"resources/moneyinfo/power_progress_bg.png",name:"progressBG",height:46,centerY:0,centerX:0},child:[{type:"Image",props:{top:0,skin:"resources/moneyinfo/power_progress.png",right:0,left:0,bottom:0},child:[{type:"Image",props:{width:151,var:"UI_Img_Power_Mask",top:0,skin:"resources/common/img_blue.png",renderType:"mask",left:0,height:46,sizeGrid:"2,2,2,2"}}]}]},{type:"Label",props:{wordWrap:!0,width:145,var:"UI_Txt_Power",valign:"top",text:"8.88M",height:40,fontSize:40,color:"#ffffff",centerY:0,centerX:0,align:"center"}},{type:"Label",props:{x:29,width:182,var:"UI_Txt_PowerCount",valign:"top",text:"88:88 +1",height:30,fontSize:25,color:"#ffffff",centerX:0,bottom:-8,align:"center"}}]},{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_power.png",left:5,height:63,centerY:0}},{type:"Image",props:{width:46,skin:"resources/moneyinfo/img_icon_add.png",right:10,height:45,centerY:0}}]},{type:"Button",props:{width:240,var:"UI_Btn_Add_Diamond",stateNum:1,skin:"resources/moneyinfo/img_bg.png",right:0,height:70,bottom:0,sizeGrid:"16,16,16,16"},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_diamond.png",left:5,height:63,centerY:0}},{type:"Label",props:{wordWrap:!0,width:145,var:"UI_Txt_Diamond",valign:"top",text:"8.88M",height:40,fontSize:40,color:"#ffffff",centerY:0,centerX:0,align:"center"}},{type:"Image",props:{width:46,skin:"resources/moneyinfo/img_icon_add.png",right:10,height:45,centerY:0}}]}]}]},t.MoneyInfoUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),e.prototype.createChildren.call(this),this.createView(t.MoreSpawnUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{top:0,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:870,skin:"resources/common/interface_common_bg.png",height:434,centerY:0,centerX:0,sizeGrid:"90,90,90,90"},child:[{type:"Label",props:{width:614,var:"UI_Txt_Tip",top:114,text:"观看视频可以五倍领取",height:51,fontSize:50,font:"黑体",color:"#ffffff",centerX:0,align:"center"}},{type:"Button",props:{var:"UI_Btn_Normal",stateNum:1,skin:"resources/common/interface_btn_green.png",right:150,labelSize:50,labelFont:"黑体",labelColors:"#ffffff",label:"一倍领取",bottom:100,anchorY:.5,anchorX:.5,sizeGrid:"50,70,50,70"},child:[{type:"Script",props:{y:0,x:0,playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]},{type:"Button",props:{var:"UI_Btn_More",stateNum:1,skin:"resources/common/interface_btn_orange.png",left:150,labelSize:50,labelFont:"黑体",labelColors:"#ffffff",label:"五倍领取",bottom:100,anchorY:.5,anchorX:.5,sizeGrid:"50,70,50,70"},child:[{type:"Script",props:{y:0,x:0,playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]}]}]},t.MoreSpawnUI=e}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.BattlePropPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:128,height:128},child:[{type:"Image",props:{width:126,var:"img_Prop",height:126,centerY:0,centerX:0}},{type:"Image",props:{y:0,x:0,width:128,var:"img_Pie",height:128},child:[{type:"Image",props:{width:128,skin:"resources/prop/icon_circle.png",renderType:"mask",height:128,centerY:0,centerX:0}}]}]},e.BattlePropPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.FloatTipItemPrefab_LotteryUI.uiView)},i}(View);i.uiView={type:"View",props:{width:500,height:60},child:[{type:"Image",props:{top:0,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Label",props:{var:"UI_Txt_Tip",valign:"middle",top:0,text:"网络不好，请重试",right:0,left:0,fontSize:36,font:"黑体",color:"#ffffff",bottom:0,align:"center"}}]},e.FloatTipItemPrefab_LotteryUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.FloatTipItemPrefab_UpgradeUI.uiView)},i}(View);i.uiView={type:"View",props:{width:212,height:81},child:[{type:"Image",props:{top:0,skin:"resources/common/img_floatTip.png",right:0,left:0,bottom:0}},{type:"Label",props:{var:"UI_Txt_Tip",valign:"middle",top:0,text:"强化",right:60,left:0,fontSize:36,font:"黑体",color:"#ffffff",bottom:0,align:"center"}},{type:"Label",props:{var:"UI_Txt_Extra",valign:"middle",top:0,text:"+1",right:0,left:117,fontSize:40,font:"黑体",color:"#5bffff",bottom:0,align:"left"}}]},e.FloatTipItemPrefab_UpgradeUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.GuideItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:400,height:56},child:[{type:"Image",props:{width:400,top:0,skin:"resources/guide/img_bubble.png",height:56,centerX:0},child:[{type:"Label",props:{width:400,valign:"top",text:"注意不要碰到任何敌方单位",height:30,fontSize:30,font:"黑体",color:"#ffffff",centerY:4,centerX:0,bold:!0,align:"center"}}]}]},e.GuideItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.InviteItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:770,height:200},child:[{type:"Label",props:{width:115,var:"UI_Txt_Order",valign:"middle",text:"100",left:9,height:162,fontSize:45,font:"黑体",color:"#ffffff",centerY:0,bold:!0,align:"center"}},{type:"Image",props:{width:109,var:"UI_Img_Default_Icon",skin:"resources/common/interface_icon_static_invite.png",left:129,height:99,centerY:0}},{type:"Image",props:{width:150,var:"UI_Img_ProfileIcon",left:129,height:150,centerY:0},child:[{type:"Image",props:{y:0,x:0,width:150,skin:"resources/invitefriend/img_leaderboard_profile.png",renderType:"mask",height:150}}]},{type:"Image",props:{width:148,skin:"resources/moneyinfo/img_icon_diamond.png",left:264,height:140,centerY:0},child:[{type:"Label",props:{width:113,var:"UI_Txt_Reward",valign:"middle",top:0,text:"+10",right:-71,fontSize:45,color:"#ffffff",bottom:0,bold:!0,align:"center"}}]},{type:"Button",props:{width:250,var:"UI_Btn_GetReward",stateNum:1,skin:"resources/common/interface_btn_green.png",right:20,labelSize:45,labelFont:"黑体",labelColors:"#FFFFFF",labelAlign:"center",label:"领取状态",height:110,centerY:0,sizeGrid:"50,70,50,70"}}]},e.InviteItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.SeeSawEffectUI",t.Effect.SeeSawEffectUI),e.prototype.createChildren.call(this),this.createView(t.PrefabUI.InviteVerifyItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:105,height:105},child:[{type:"Label",props:{visible:!1,var:"UI_Txt_Order",valign:"middle",top:0,text:"100",right:0,left:0,fontSize:45,font:"黑体",color:"#ffffff",bottom:0,bold:!0,align:"center"}},{type:"Image",props:{top:0,skin:"resources/invitefriend/img_darkblue.png",right:0,left:0,bottom:0}},{type:"Image",props:{width:58,var:"UI_Img_Default_Icon",top:10,skin:"resources/invitefriend/img_plus.png",height:58,centerX:0}},{type:"Image",props:{y:0,x:0,width:105,var:"UI_Img_ProfileIcon",height:105}},{type:"Image",props:{width:69,var:"UI_Img_Loading",top:6,skin:"resources/invitefriend/img_loading.png",rotation:45,height:69,centerX:0,anchorY:.5,anchorX:.5},compId:11},{type:"Image",props:{x:0,width:105,var:"UI_Img_RewardBG",height:31,bottom:0},child:[{type:"Label",props:{width:84,var:"UI_Txt_RewardInfo",valign:"middle",text:"+99",height:32,fontSize:30,font:"黑体",color:"#ffffff",centerY:0,centerX:10,bold:!0,align:"center"}},{type:"Image",props:{y:16,x:17,var:"UI_Img_RewardIcon",skin:"resources/moneyinfo/img_icon_lottery.png",scaleY:.5,scaleX:.5,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{var:"UI_Efc_SeeSaw",runtime:"ui.Effect.SeeSawEffectUI"}}]}]},{type:"Button",props:{var:"UI_Btn_GetReward",top:0,right:0,left:0,labelSize:45,labelFont:"黑体",labelColors:"#FFFFFF",labelAlign:"center",bottom:0}}],animations:[{nodes:[{target:11,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"rotation",index:0},{value:1080,tweenMethod:"linearNone",tween:!0,target:11,key:"rotation",index:72}]}}],name:"loading",id:1,frameRate:24,action:1}]},e.InviteVerifyItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.LevelItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:224,height:84},child:[{type:"Image",props:{width:224,var:"UI_Img_CurLevel",skin:"resources/level/img_level_now.png",height:84,centerY:0,centerX:0}},{type:"Image",props:{width:224,var:"UI_Img_OtherLevel",skin:"resources/level/img_level_other.png",height:84,centerY:0,centerX:0}},{type:"Label",props:{width:160,var:"UI_Txt_Level",valign:"top",text:"100",height:40,fontSize:40,color:"#ffffff",centerY:0,centerX:0,bold:!0,align:"center"}}]},e.LevelItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.LotteryHistItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:746,height:80},child:[{type:"Image",props:{var:"UI_Img_BG",top:0,skin:"resources/unpack/img_lottery_result_item.png",right:0,left:0,bottom:0}},{type:"Label",props:{width:260,var:"UI_Txt_Date",valign:"middle",text:"2017-07-07 16:01",left:20,height:90,fontSize:30,color:"#ffffff",centerY:0}},{type:"Label",props:{width:200,var:"UI_Txt_Info",valign:"middle",text:"金币100K",height:90,fontSize:30,font:"黑体",color:"#ffffff",centerY:0,centerX:50,align:"center"}},{type:"Label",props:{width:180,var:"UI_Txt_LeftTime",valign:"middle",text:"24小时",right:20,height:90,fontSize:30,font:"黑体",color:"#ffffff",centerY:0,align:"center"}}]},e.LotteryHistItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.LotteryItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:150,height:150},child:[{type:"Image",props:{width:120,var:"UI_Img_Icon",skin:"resources/lotteryItem/1.png",height:120,centerY:0,centerX:0,anchorY:.5,anchorX:.5}},{type:"Image",props:{y:75,x:75,visible:!1,var:"UI_Img_Select",top:0,skin:"resources/lotteryItem/img_selected.png",right:0,left:0,bottom:0,anchorY:.5,anchorX:.5}},{type:"Label",props:{width:50,var:"UI_Txt_Num",valign:"middle",text:"10",strokeColor:"#000000",stroke:3,right:0,height:50,fontSize:30,color:"#000000",bottom:0,align:"center"}}]},e.LotteryItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.MoneyAnimItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:100,height:100,centerY:.5,centerX:.5},child:[{type:"Image",props:{var:"UI_Img_Icon",skin:"resources/moneyinfo/img_icon_diamond.png",centerY:0,centerX:0,anchorY:.5,anchorX:.5}},{type:"Animation",props:{y:50,x:50,var:"UI_Anim_Coin",source:"Anim/GoldAnim.ani",index:0}}]},e.MoneyAnimItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.MonsterProgressPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:86,height:29},child:[{type:"Image",props:{skin:"resources/battle/interface_fight_hpbar_bg.png"},child:[{type:"Image",props:{y:0,x:0,width:86,skin:"resources/battle/interface_fight_hpbar.png",height:29},child:[{type:"Image",props:{y:0,x:0,width:86,var:"ProgressBar",skin:"resources/common/img_blue.png",sizeGrid:"2,2,2,2",renderType:"mask",height:29}}]}]}]},e.MonsterProgressPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.SpawnItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:186,height:100},child:[{type:"Image",props:{y:0,x:0,width:186,skin:"resources/spawn/img_spawn_bg_0.png",height:84}},{type:"Image",props:{y:0,x:0,width:186,skin:"resources/spawn/img_spawn_bg_1.png",height:84},child:[{type:"Image",props:{y:0,x:0,width:186,var:"UI_Img_Mask",skin:"resources/common/img_white.jpg",renderType:"mask",height:84,sizeGrid:"2,2,2,2"}}]},{type:"Image",props:{width:69,var:"UI_Img_Icon",skin:"resources/moneyinfo/img_icon_coin.png",left:13,height:63,centerY:-7},child:[{type:"Label",props:{width:104,var:"UI_Txt_Num",valign:"middle",text:"88.8M",right:-93,height:40,fontSize:24,color:"#ffffff",centerY:-3,bold:!1,align:"center"}}]},{type:"Image",props:{width:51,skin:"resources/spawn/img_spawn_arrow.png",height:38,centerX:0,bottom:0}},{type:"Button",props:{y:0,x:0,var:"UI_Btn_GainSpawn",top:0,right:0,left:0,bottom:0}}]},e.SpawnItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.PrefabUI.UpgradeItemPrefabUI.uiView)},i}(View);i.uiView={type:"View",props:{width:210,height:273},child:[{type:"Box",props:{y:0,x:0,visible:!1,var:"UI_Box_HidePool"}},{type:"Box",props:{width:140,var:"UI_Box_Main",height:100,centerX:0,bottom:0},child:[{type:"Label",props:{width:50,var:"UI_Txt_Main",valign:"middle",text:"5",strokeColor:"#ffd600",stroke:0,left:-10,height:45,fontSize:45,color:"#ffd600",centerY:-8,bold:!0,align:"right"},child:[{type:"Image",props:{width:101,skin:"resources/upgrade/img_txt_weapon_1.png",right:-101,height:36,bottom:0}}]}]},{type:"Box",props:{width:140,var:"UI_Box_Sub",height:100,centerX:0,bottom:0},child:[{type:"Label",props:{x:65,width:112,var:"UI_Txt_Sub",valign:"middle",text:"8888",height:45,fontSize:45,color:"#ffd600",centerY:-8,bold:!0,anchorY:0,anchorX:.75,align:"center"},child:[{type:"Image",props:{width:36,var:"UI_Img_Txt_Level_Sub",skin:"resources/upgrade/img_txt_level_game.png",right:-36,height:35,bottom:0}}]},{type:"Image",props:{var:"UI_Img_Txt_SubWeapon",skin:"resources/upgrade/img_txt_weapon_2.png",centerY:0,centerX:0}}]},{type:"Box",props:{width:140,var:"UI_Box_Money",height:100,centerX:0,bottom:0},child:[{type:"Image",props:{skin:"resources/upgrade/img_txt_weapon_spawn.png",centerY:0,centerX:0}}]},{type:"Image",props:{x:27,width:157,var:"UI_Img_Main",skin:"resources/upgrade/img_main_weapon.png",height:118,centerX:0,bottom:100},child:[{type:"HBox",props:{var:"UI_HBox_Main",top:-45,centerX:0}}]},{type:"Image",props:{x:105,var:"UI_Img_Sub",skin:"resources/player/planes/role_fight_weapon_02.png",scaleY:.5,scaleX:.5,centerX:0,bottom:100,anchorY:.5,anchorX:.5}},{type:"Image",props:{x:16,width:179,var:"UI_Img_Money",skin:"resources/upgrade/img_gold_heap.png",height:177,centerX:0,bottom:80}},{type:"Image",props:{y:0,x:0,width:57,var:"UI_Img_Lock",skin:"resources/upgrade/img_lock.png",height:74}},{type:"Button",props:{var:"UI_Btn_Action",top:0,right:0,left:0,bottom:0}}]},e.UpgradeItemPrefabUI=i}(t.PrefabUI||(t.PrefabUI={}))}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.createView(t.ProgressUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Box",props:{width:1080,height:1920},child:[{type:"Image",props:{var:"img_BG",top:0,skin:"resources/common/background.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0}},{type:"Image",props:{width:38,var:"img_progressBG",skin:"resources/common/img_jindutiao_06.png",sizeGrid:"24,0,24,0",scaleY:1.5,scaleX:1.5,rotation:90,name:"speed",height:684,centerY:0,centerX:0,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{width:26,var:"img_progress",skin:"resources/common/img_jindutiao_04.png",sizeGrid:"15,0,15,0",height:672,centerX:0,bottom:6,anchorY:1,anchorX:.5}}]},{type:"Text",props:{y:1023,x:387,width:290,var:"txt_progress",valign:"middle",text:"这里有个进度条",strokeColor:"#272727",stroke:4,name:"speed",height:55,fontSize:40,font:"黑体",color:"#dbe8ef",bold:!0,align:"center"}}]}]},t.ProgressUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.RebornUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{top:0,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"},child:[{type:"Button",props:{width:420,var:"UI_Btn_Reborn",stateNum:1,skin:"resources/reborn/interface_fight_resurgence.png",height:386,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:3,child:[{type:"Label",props:{width:61,var:"UI_Txt_Second",valign:"middle",text:"3",height:60,fontSize:50,font:"黑体",color:"#ffffff",centerX:94,bottom:48,bold:!1,align:"center"}}]}]}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:24},{value:.95,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:36},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:48}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:24},{value:.95,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:36},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:48}]}}],name:"breath",id:1,frameRate:24,action:2}]},t.RebornUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),View.regComponent("ui.Effect.DoubleCoinScaleEffectUI",t.Effect.DoubleCoinScaleEffectUI),e.prototype.createChildren.call(this),this.createView(t.ResultUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{top:0,skin:"resources/common/img_black.png",right:0,name:"BG",left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Button",props:{y:80,x:30,width:104,var:"UI_Btn_Setting",stateNum:1,skin:"resources/common/img_setting.png",height:113}},{type:"Box",props:{y:0,x:0,width:1083,var:"box_AllUi",height:1410},child:[{type:"Image",props:{y:386,x:549,width:1080,var:"UI_Img_Win",top:226,skin:"resources/unpack/img_win.png",height:320,centerX:9,anchorY:.5,anchorX:.5},compId:30},{type:"Image",props:{y:335,x:173,width:719,var:"UI_Img_Lose",top:335,skin:"resources/unpack/img_lose.png",height:208,centerX:-8},compId:29},{type:"Image",props:{y:500,x:0,width:1080,var:"info",top:500,skin:"resources/unpack/img_panel.png",name:"Info",height:455,centerX:0},compId:31,child:[{type:"Button",props:{width:252,var:"UI_Btn_Lucky",sizeGrid:"40,40,40,40",labelSize:48,labelFont:"黑体",labelColors:"#FFFFFF",height:70,centerX:-11,bottom:7,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:59,skin:"resources/result/img_video_icon.png",left:30,height:52,centerY:0}},{type:"Label",props:{width:126,text:"2倍奖励",right:30,height:30,fontSize:30,font:"黑体",color:"#ffffff",centerY:0,align:"center"}}]},{type:"HBox",props:{var:"UI_HBox_Reward",space:100,height:70,centerY:-35,centerX:0},child:[{type:"Image",props:{width:224,var:"UI_Img_Coin",skin:"resources/moneyinfo/img_bg.png",height:70,sizeGrid:"16,16,16,16"},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_coin.png",height:63}},{type:"Label",props:{width:141,var:"UI_Txt_Coin",valign:"middle",text:"88.8M",right:20,height:70,fontSize:36,color:"#ffffff",centerY:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"},child:[{type:"Script",props:{var:"UI_Eft_DoubleCoinScale",runtime:"ui.Effect.DoubleCoinScaleEffectUI"}}]}]},{type:"Image",props:{width:224,visible:!1,var:"UI_Img_Power",skin:"resources/moneyinfo/img_bg.png",height:70,sizeGrid:"16,16,16,16"},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_power.png",height:63}},{type:"Label",props:{width:141,var:"UI_Txt_Power",valign:"middle",text:"88.8M",right:20,height:70,fontSize:36,color:"#ffffff",centerY:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"},child:[{type:"Script",props:{runtime:"ui.Effect.DoubleCoinScaleEffectUI"}}]}]},{type:"Image",props:{width:224,visible:!1,var:"UI_Img_Diamond",skin:"resources/moneyinfo/img_bg.png",height:70,sizeGrid:"16,16,16,16"},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_diamond.png",height:63}},{type:"Label",props:{width:141,var:"UI_Txt_Diamond",valign:"middle",text:"88.8M",right:20,height:70,fontSize:36,color:"#ffffff",centerY:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"},child:[{type:"Script",props:{runtime:"ui.Effect.DoubleCoinScaleEffectUI"}}]}]}]}]},{type:"Box",props:{y:1320,x:0,width:1080,var:"buttonBox",name:"buttonBox",height:100,centerX:0},compId:12,child:[{type:"Button",props:{y:50,x:799,width:263,var:"UI_Btn_Continue",stateNum:1,skin:"resources/common/img_btn_blue.png",labelSize:48,labelFont:"黑体",labelColors:"#FFFFFF",height:91,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:164,skin:"resources/result/img_next.png",height:62,centerY:0,centerX:0}}]},{type:"Button",props:{y:50,x:799,width:263,var:"UI_Btn_Replay",stateNum:1,skin:"resources/common/img_btn_blue.png",labelSize:48,labelFont:"黑体",labelColors:"#FFFFFF",height:91,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:164,skin:"resources/result/img_retry.png",height:62,centerY:0,centerX:0}}]},{type:"Button",props:{y:50,x:282,width:263,var:"UI_Btn_GameOver",stateNum:1,skin:"resources/common/img_btn_orange.png",labelSize:48,labelFont:"黑体",labelColors:"#FFFFFF",height:93,anchorY:.5,anchorX:.5},child:[{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Image",props:{width:184,skin:"resources/result/img_back.png",height:65,centerY:0,centerX:0}}]}]}]}],animations:[{nodes:[{target:31,keyframes:{x:[{value:0,tweenMethod:"linearNone",tween:!0,target:31,key:"x",index:0}],height:[{value:0,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:0},{value:445,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:3},{value:460,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:4},{value:465,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:5},{value:460,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:6},{value:455,tweenMethod:"linearNone",tween:!0,target:31,key:"height",index:7}]}},{target:12,keyframes:{y:[{value:2241,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:0},{value:2241,tweenMethod:"linearNone",tween:!0,target:12,label:null,key:"y",index:7},{value:1629,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:8},{value:1320,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:9},{value:1290,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:10},{value:1310,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:11},{value:1315,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:12},{value:1320,tweenMethod:"linearNone",tween:!0,target:12,key:"y",index:13}],x:[{value:0,tweenMethod:"linearNone",tween:!0,target:12,key:"x",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:12,label:null,key:"x",index:7}]}}],name:"ani1",id:1,frameRate:24,action:0},{nodes:[{target:30,keyframes:{scaleY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleY",index:1},{value:1,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleY",index:2},{value:1.05,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleY",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleY",index:4}],scaleX:[{value:.5,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleX",index:1},{value:1,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleX",index:2},{value:1.05,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleX",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:30,key:"scaleX",index:4}]}}],name:"ani2",id:2,frameRate:24,action:0},{nodes:[{target:29,keyframes:{scaleY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleY",index:1},{value:1,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleY",index:2},{value:1.05,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleY",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleY",index:4}],scaleX:[{value:.5,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleX",index:1},{value:1,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleX",index:2},{value:1.05,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleX",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:29,key:"scaleX",index:4}]}}],name:"ani3",id:3,frameRate:24,action:0}]},t.ResultUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.SettingUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Setting",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:0,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Image",props:{width:914,skin:"resources/unpack/img_panel_bg_1.png",height:629,centerY:-117,centerX:0,sizeGrid:"50,50,50,50"},child:[{type:"Label",props:{y:180,x:190,width:248,valign:"middle",text:"音效开关",height:90,fontSize:48,font:"黑体",color:"#ffffff",align:"center"}},{type:"Label",props:{y:335,x:190,width:248,valign:"middle",text:"震动开关",height:90,fontSize:48,font:"黑体",color:"#ffffff",align:"center"}},{type:"CheckBox",props:{y:172,x:500,width:173,var:"UI_Tgl_Music",stateNum:1,skin:"resources/setting/interface_icon_button_02.png",height:100}},{type:"CheckBox",props:{y:332,x:500,width:173,var:"UI_Tgl_Vibrate",stateNum:1,skin:"resources/setting/interface_icon_button_01.png",height:100}}]}]},t.SettingUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){View.regComponent("ui.Effect.ClickDownEffectUI",t.Effect.ClickDownEffectUI),View.regComponent("ui.Effect.ClickUpEffectUI",t.Effect.ClickUpEffectUI),e.prototype.createChildren.call(this),this.createView(t.UpgradeUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Cancel",top:0,stateNum:1,skin:"resources/common/img_black.png",right:0,left:-16,bottom:0,sizeGrid:"2,2,2,2"}},{type:"Box",props:{width:1080,right:0,mouseThrough:!0,left:0,height:800,bottom:285},child:[{type:"Image",props:{width:1080,var:"UI_Box_MainPanel",skin:"resources/upgrade/img_panel.png",sizeGrid:"80,40,80,40",name:"MainPanel",height:328,centerX:0,bottom:0,anchorY:1,anchorX:.5},child:[{type:"Image",props:{width:1080,var:"UI_Box_SubPanel",name:"SubPanel",height:275,centerX:0,bottom:312,anchorY:1,anchorX:.5},child:[{type:"HBox",props:{var:"UI_HBox_Location",space:0,height:273,centerY:0,centerX:0,align:"middle"},child:[{type:"Box",props:{width:210,height:273,centerY:0},child:[{type:"Image",props:{width:210,top:0,skin:"resources/upgrade/img_sub_bg.png",height:273,centerX:0}}]},{type:"Box",props:{width:210,height:273,centerY:0},child:[{type:"Image",props:{width:210,top:0,skin:"resources/upgrade/img_sub_bg.png",height:273,centerX:0}}]},{type:"Box",props:{width:210,height:273,centerY:0},child:[{type:"Image",props:{width:210,top:0,skin:"resources/upgrade/img_sub_bg.png",height:273,centerX:0}}]},{type:"Box",props:{width:210,height:273,centerY:0},child:[{type:"Image",props:{width:210,top:0,skin:"resources/upgrade/img_sub_bg.png",height:273,centerX:0}}]},{type:"Box",props:{width:210,height:273,centerY:0},child:[{type:"Image",props:{width:210,top:0,skin:"resources/upgrade/img_sub_bg.png",height:273,centerX:0}}]}]}]},{type:"Box",props:{width:210,var:"UI_Box_Left",left:80,height:273,centerY:0}},{type:"Box",props:{width:226,name:"Anim_L",left:70,height:226,centerY:-35},child:[{type:"Animation",props:{y:0,x:0,width:226,var:"UI_Anim_Upgrade_Left",source:"Anim/UpgradeAnim.ani",height:226}}]},{type:"Box",props:{width:360,var:"UI_Box_UpgradeInfo_Main",height:50,centerY:0,centerX:0},child:[{type:"Label",props:{width:112,var:"UI_Txt_UpgradeInfo_Main",valign:"middle",text:"8888",height:50,fontSize:50,color:"#ffd600",centerY:0,centerX:0,bold:!0,align:"center"},child:[{type:"Image",props:{width:103,skin:"resources/upgrade/img_txt_power_main.png",left:-103,height:51}},{type:"Image",props:{width:53,skin:"resources/upgrade/img_txt_level_weapon_0.png",right:-53,height:53}}]}]},{type:"Box",props:{width:360,var:"UI_Box_UpgradeInfo_Sub",height:50,centerY:0,centerX:0},child:[{type:"Label",props:{width:56,var:"UI_Txt_UpgradeInfo_Sub",valign:"middle",text:"11",height:50,fontSize:50,color:"#ffd600",centerY:0,centerX:0,bold:!0,align:"center"},child:[{type:"Image",props:{skin:"resources/upgrade/img_txt_power_sub.png",left:-132,centerY:0}},{type:"Image",props:{skin:"resources/upgrade/img_txt_level_weapon_0.png",right:-53,height:53,centerY:0}}]}]},{type:"Box",props:{width:360,var:"UI_Box_UpgradeInfo_Money",height:50,centerY:0,centerX:0},child:[{type:"Label",props:{width:56,var:"UI_Txt_UpgradeInfo_Spawn",valign:"middle",text:"11",height:50,fontSize:50,color:"#ffd600",centerY:0,centerX:0,bold:!0,align:"center"},child:[{type:"Image",props:{width:124,skin:"resources/upgrade/img_txt_spawn.png",left:-124,height:53,centerY:0}},{type:"Image",props:{width:82,skin:"resources/upgrade/img_txt_second.png",right:-82,height:51,centerY:0}}]}]},{type:"Box",props:{width:86,name:"arrow",height:82,centerY:0,centerX:-122},child:[{type:"Image",props:{width:86,var:"UI_Img_Arrow",skin:"resources/upgrade/img_arrow.png",left:0,height:82,centerY:0}},{type:"Image",props:{width:86,skin:"resources/common/img_white.jpg",right:0,renderType:"mask",name:"Mask",height:82,centerY:0,sizeGrid:"2,2,2,2"}}]},{type:"Box",props:{width:210,name:"right",left:510,height:273,centerY:0},child:[{type:"Box",props:{width:210,var:"UI_Box_Right",left:0,height:273,centerY:0}},{type:"Image",props:{width:210,skin:"resources/common/img_white.jpg",right:0,renderType:"mask",name:"Mask",height:273,bottom:0,sizeGrid:"2,2,2,2"}}]},{type:"Box",props:{y:27,width:226,name:"Anim_R",left:504,height:226,centerY:-35},child:[{type:"Animation",props:{width:226,var:"UI_Anim_Upgrade_Right",source:"Anim/UpgradeAnim.ani",height:226}}]},{type:"Box",props:{width:226,right:50,height:231,centerY:0},child:[{type:"Button",props:{width:180,var:"UI_Btn_UpgradeCost",stateNum:1,skin:"resources/upgrade/img_cost_bg.png",height:64,centerY:0,centerX:0,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{width:69,skin:"resources/moneyinfo/img_icon_coin.png",mouseEnabled:!1,left:-25,height:63,centerY:0}},{type:"Label",props:{width:125,var:"UI_Txt_UpgradeCost",valign:"top",text:"8.888M",right:22,mouseEnabled:!1,height:36,fontSize:36,color:"#ffffff",centerY:0,align:"center"}},{type:"Script",props:{playEvent:"mousedown",name:"d",runtime:"ui.Effect.ClickDownEffectUI"}},{type:"Script",props:{playEvent:"mouseup",name:"u",runtime:"ui.Effect.ClickUpEffectUI"}},{type:"Script",props:{playEvent:"mouseout",name:"o",runtime:"ui.Effect.ClickUpEffectUI"}}]}]},{type:"Box",props:{width:100,var:"UI_Box_FloatTip_L",left:185,height:100,centerY:-130}},{type:"Box",props:{width:100,var:"UI_Box_FloatTip_R",left:615,height:100,centerY:-130}}]}]},{type:"Button",props:{y:316,x:440,width:200,visible:!1,var:"UI_Btn_Test_FloatTip",stateNum:1,skin:"resources/common/img_white.jpg",labelSize:30,labelFont:"黑体",label:"浮字提示测试",height:100,centerX:0,sizeGrid:"2,2,2,2"}}]},t.UpgradeUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.VerifyUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Button",props:{var:"UI_Btn_Back",top:0,right:0,left:0,bottom:0}},{type:"Image",props:{width:843,var:"UI_Img_Scale",skin:"resources/unpack/img_panel_bg_0.png",height:1121,centerX:0,bottom:250,anchorY:1,anchorX:.5},child:[{type:"Image",props:{width:418,top:157,skin:"resources/verify/img_txt_invite.png",height:91,centerX:0}},{type:"HBox",props:{top:295,space:25,centerX:0,align:"middle"},child:[{type:"Image",props:{y:0,x:0,width:132,skin:"resources/lotteryItem/1.png",height:132}},{type:"Image",props:{y:0,x:0,width:132,skin:"resources/lotteryItem/5.png",height:132}},{type:"Image",props:{y:0,x:0,width:132,skin:"resources/lotteryItem/8.png",height:132}},{type:"Image",props:{y:0,x:0,width:132,skin:"resources/lotteryItem/10.png",height:132}}]},{type:"Box",props:{width:600,top:502,name:"phone",height:88,centerX:0},child:[{type:"Image",props:{top:0,skin:"resources/verify/img_input.png",right:0,left:0,height:88,sizeGrid:"25,25,25,25"}},{type:"TextInput",props:{var:"UI_Ipt_PhoneNumber",type:"number",top:0,right:0,promptColor:"#d4d4d4",prompt:"输入手机号",left:32,height:100,fontSize:36,font:"黑体",color:"#ffffff",bottom:0}}]},{type:"Box",props:{width:600,top:645,name:"verify",height:88,centerX:0},child:[{type:"Image",props:{width:322,skin:"resources/verify/img_input.png",left:0,height:88,centerY:0,sizeGrid:"25,25,25,25"}},{type:"TextInput",props:{width:282,var:"UI_Ipt_Verify",type:"number",top:0,promptColor:"#d4d4d4",prompt:"验证码",left:32,height:88,fontSize:36,font:"黑体",color:"#ffffff",bottom:0}},{type:"Button",props:{width:263,var:"UI_Btn_GetMessageVerify",stateNum:1,skin:"resources/common/img_btn_orange.png",right:0,labelSize:36,labelFont:"黑体",labelColors:"#FFFFFF",labelAlign:"center",height:93,centerY:0},child:[{type:"Image",props:{width:200,var:"UI_Img_Verify",skin:"resources/verify/img_txt_verify.png",height:55,centerY:0,centerX:0}},{type:"Label",props:{var:"UI_Txt_Verify",valign:"middle",top:0,text:"label",right:0,left:0,fontSize:36,font:"黑体",color:"#ffffff",bottom:0,bold:!0,align:"center"}}]}]},{type:"Image",props:{width:515,top:782,skin:"resources/verify/img_txt_reward.png",height:52,centerX:0},child:[{type:"Label",props:{width:164,var:"UI_Txt_DiamondNum",valign:"middle",text:"1000",right:68,height:60,fontSize:60,color:"#ffea00",bottom:0,bold:!0,align:"center"}}]},{type:"Button",props:{width:263,var:"UI_Btn_Submit",stateNum:1,skin:"resources/common/img_btn_orange.png",labelSize:36,labelFont:"黑体",labelColors:"#FFFFFF",label:"确定",height:93,centerX:0,bottom:121}}]},{type:"Image",props:{var:"UI_Pnl_Tip",top:0,skin:"resources/common/background.png",right:0,left:0,bottom:0,sizeGrid:"5,5,5,5"},child:[{type:"Button",props:{var:"UI_Btn_Confirm_0",top:0,right:0,left:0,bottom:0}},{type:"Image",props:{width:541,skin:"resources/unpack/img_panel_bg_1.png",sizeGrid:"60,60,60,60",height:367,centerY:0,centerX:0},child:[{type:"Label",props:{wordWrap:!0,width:381,var:"UI_Txt_Tip_Msg",valign:"middle",top:47,text:"恭喜您获得　　　钻石 啊啊啊啊",overflow:"scroll",height:178,fontSize:36,font:"黑体",color:"#ffffff",centerX:0,align:"center"}},{type:"Button",props:{width:263,var:"UI_Btn_Confirm_1",stateNum:1,skin:"resources/common/img_btn_orange.png",labelSize:36,labelFont:"黑体",labelColors:"#FFFFFF",label:"确定",height:93,centerX:0,bottom:36,anchorY:.5,anchorX:.5}}]}]}]},t.VerifyUI=e}(ui||(ui={})),function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.WaitingUI.uiView)},i}(View);e.uiView={type:"View",props:{width:1080,height:1920},child:[{type:"Image",props:{width:512,var:"waitingAnim",skin:"resources/waiting/loadingicon.png",scaleY:.3,scaleX:.3,height:512,centerY:0,centerX:0,anchorY:.5,anchorX:.5}}]},t.WaitingUI=e}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},BattleProp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.radius=64,e.lineColor_Blue="#48d4ff",e.lineColor_Red="#ff5b49",e.timeTask=-1,e}return __extends(e,t),e.prototype.RefreshPrefab=function(t){var e=ConfigManager.GetInstance().GetPropConfig(t.BuffType);e?(this.propConfig=e,this.buffConfig=ConfigManager.GetInstance().GetBuffConfig(this.propConfig.BuffConfigID),this.showTimeStamp=Date.now(),this.img_Prop.skin=this.propConfig.PropImagePath,-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.timeTask=TimeManager.getInst().loop(.02,cbhandler.gen_handler(this.Loop,this)),this.Loop()):Log.Error("BattleProp 未找到对应Config：",t.BuffType)},e.prototype.HidePrefab=function(){-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.propConfig=null,this.buffConfig=null},e.prototype.Loop=function(){if(this.buffConfig){var t=1==this.buffConfig.BuffType?this.lineColor_Blue:this.lineColor_Red,e=1-(Date.now()-this.showTimeStamp)/(1e3*this.buffConfig.duration);e>1?e=1:e<0&&(e=0,TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.DrawPie(e,!0,t)}},e.prototype.DrawPie=function(t,e,i){t>1&&(t=1),t<0&&(t=0);var n=0;n=e?360*t-90:-360*t+270,this.img_Pie.graphics.clear(),this.img_Pie.graphics.drawPie(this.img_Pie.width/2,this.img_Pie.height/2,this.radius,-90,n,i)},e}(ui.PrefabUI.BattlePropPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},FloatTipItem_Lottery=function(t){function e(){var e=t.call(this)||this;return e.fontSize=40,e.anchorX=.5,e.anchorY=.5,e.deleteTimeTask=-1,e.animTask=-1,e}return __extends(e,t),e.prototype.InitItem=function(t){this.UI_Txt_Tip.text=t,this.alpha=1,this.scale(1,1),this.aimY=-1,this.deleteTimeTask=-1,this.animTask=-1},e.prototype.DeleteItem=function(){-1!=this.deleteTimeTask&&TimeManager.getInst().remove(this.deleteTimeTask),-1!=this.animTask&&Tween2DUtil.kill(this.animTask),this.deleteTimeTask=-1,this.animTask=-1,this.aimY=-1},e.prototype.LotteryTipAnim_Appear=function(){-1!=this.animTask&&(Tween2DUtil.kill(this.animTask),this.animTask=-1),this.scale(1,1),this.alpha=1},e.prototype.LotteryTipAnim_Disappear=function(t){var e=this;-1!=this.animTask&&(Tween2DUtil.kill(this.animTask),this.animTask=-1),this.scale(1,1),this.alpha=1,this.aimY=this.y-300,this.animTask=Tween2DUtil.to({node:this,duration:.5,alpha:0,y:this.aimY,onComplete:cbhandler.gen_handler(function(){e.animTask=-1,t&&t.exec()},this)})},e}(ui.PrefabUI.FloatTipItemPrefab_LotteryUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},FloatTipItem_Upgrade=function(t){function e(){var e=t.call(this)||this;return e.fontSize=40,e.anchorX=.5,e.anchorY=.5,e.deleteTimeTask=-1,e.animTask=-1,e}return __extends(e,t),e.prototype.InitItem=function(t,e){void 0===e&&(e=!0),this.UI_Txt_Tip.text=t,this.UI_Txt_Tip.right=e?60:0,this.UI_Txt_Extra.visible=e,this.alpha=1,this.scale(1,1),this.aimY=-1,this.deleteTimeTask=-1,this.animTask=-1},e.prototype.DeleteItem=function(){-1!=this.deleteTimeTask&&TimeManager.getInst().remove(this.deleteTimeTask),-1!=this.animTask&&Tween2DUtil.kill(this.animTask),this.deleteTimeTask=-1,this.animTask=-1,this.aimY=-1},e.prototype.UpgradeTipAnim_FloatUp=function(){var t=this;-1!=this.animTask&&(Tween2DUtil.kill(this.animTask),this.animTask=-1),-1!=this.aimY?this.aimY-=this.height+10:this.aimY=this.y-this.height-10,this.scale(1,1),this.animTask=Tween2DUtil.to({node:this,duration:.2,scalex:1,scaley:1,y:this.aimY,onComplete:cbhandler.gen_handler(function(){t.animTask=-1,t.aimY=-1},this)})},e.prototype.UpgradeTipAnim_Scale=function(){var t=this;-1!=this.animTask&&(Tween2DUtil.kill(this.animTask),this.animTask=-1),this.scale(0,0),this.animTask=Tween2DUtil.to({node:this,duration:.2,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){t.animTask=-1},this)})},e.prototype.UpgradeTipAnim_Alpha=function(t){var e=this;-1!=this.animTask&&(Tween2DUtil.kill(this.animTask),this.animTask=-1),this.alpha=1,this.animTask=Tween2DUtil.to({node:this,duration:.2,alpha:0,onComplete:cbhandler.gen_handler(function(){e.animTask=-1,t&&t.exec()},this)})},e}(ui.PrefabUI.FloatTipItemPrefab_UpgradeUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},InviteItem=function(t){function e(){var e=t.call(this)||this;return e.UI_Btn_GetReward.on(Laya.Event.CLICK,e,e.OnUI_Btn_GetRewardClick),e}return __extends(e,t),e.prototype.OnUI_Btn_GetRewardClick=function(){this.itemData&&(HttpMessageSender.GetSender().SendGetInviteReward(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.itemData.friendOpenID),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02))},e.prototype.RenderItem=function(t,e){var i=this;if(this.itemData&&t&&this.itemData.friendOpenID==t.friendOpenID&&0==this.itemData.rewardGained&&0!=t.rewardGained){var n=CommonUtil2D.GetGlobalPosition(this.UI_Btn_GetReward);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Diamond,5,n,new Vec2(ConstDefine.MoneyImgPos_Diamond.x,ConstDefine.MoneyImgPos_Diamond.y),500)}this.itemData=t,this.UI_Txt_Order.text=(e+1).toString(),null!=this.itemData?(this.UI_Img_Default_Icon.visible=!1,this.UI_Img_ProfileIcon.visible=!0,this.UI_Img_ProfileIcon.loadImage(this.itemData.picUrl,0,0,this.UI_Img_ProfileIcon.width,this.UI_Img_ProfileIcon.height,Laya.Handler.create(this,function(){Log.Debug("InivteItem 加载图片完成：",i.itemData.picUrl)},null,!1)),this.UI_Btn_GetReward.label=this.itemData.rewardGained<1?"领取":"已领取",this.UI_Btn_GetReward.gray=this.itemData.rewardGained>=1,this.UI_Btn_GetReward.mouseEnabled=this.itemData.rewardGained<1,this.UI_Txt_Reward.text="+"+t.rewardNum):(this.UI_Img_Default_Icon.visible=!0,this.UI_Img_ProfileIcon.visible=!1,this.UI_Btn_GetReward.label="待邀请",this.UI_Btn_GetReward.gray=!0,this.UI_Btn_GetReward.mouseEnabled=!1,this.UI_Txt_Reward.text="+"+10*(e+1))},e}(ui.PrefabUI.InviteItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},InviteVerifyItem=function(t){function e(){var e=t.call(this)||this;return e.UI_Btn_GetReward.on(Laya.Event.CLICK,e,e.OnUI_Btn_GetRewardClick),e}return __extends(e,t),e.prototype.OnUI_Btn_GetRewardClick=function(){if(this.itemData){var t=0==this.itemData.rewardGained?1:2;HttpMessageSender.GetSender().SendGetInviteVerifyReward(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.itemData.friendOpenID,t),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)}},e.prototype.RenderItem=function(t,e){var i=this;if(this.itemData&&t&&this.itemData.friendOpenID==t.friendOpenID)if(0==this.itemData.rewardGained&&0!=t.rewardGained){n=CommonUtil2D.GetGlobalPosition(this.UI_Btn_GetReward);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Diamond,5,n,new Vec2(ConstDefine.MoneyImgPos_Diamond.x,ConstDefine.MoneyImgPos_Diamond.y),500)}else if(2==this.itemData.rewardGained&&2!=t.rewardGained){var n=CommonUtil2D.GetGlobalPosition(this.UI_Btn_GetReward);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Straight(EnumMoneyAnimType.Lottery,1,n,new Vec2(540,820))}if(this.itemData=t,this.UI_Txt_Order.text=(e+1).toString(),null!=this.itemData)switch(this.UI_Img_Default_Icon.visible=!1,this.UI_Img_Loading.visible=!0,this.UI_Img_ProfileIcon.visible=!1,this.UI_Img_ProfileIcon.loadImage(this.itemData.picUrl,0,0,this.UI_Img_ProfileIcon.width,this.UI_Img_ProfileIcon.height,Laya.Handler.create(this,function(){Log.Debug("InivteItem 加载图片完成：",i.itemData.picUrl),i.UI_Img_ProfileIcon.visible=!0,i.UI_Img_Loading.visible=!1},null,!1)),this.UI_Img_RewardBG.skin=3==this.itemData.rewardGained?"":"resources/invitefriend/img_lottery_text_bg.png",this.UI_Txt_RewardInfo.color=1==this.itemData.rewardGained?"#fd5555":"#ffffff",this.itemData.rewardGained){case 0:this.UI_Btn_GetReward.mouseEnabled=!0,this.UI_Txt_RewardInfo.visible=!0,this.UI_Img_RewardIcon.visible=!0,this.UI_Txt_RewardInfo.text="+"+t.rewardNum,this.UI_Img_RewardIcon.gray=!1,this.UI_Img_RewardIcon.skin=ConstDefine.IconSkin_Diamond,this.UI_Efc_SeeSaw.play(0,!0);break;case 1:this.UI_Txt_RewardInfo.visible=!0,this.UI_Img_RewardIcon.visible=!1,this.UI_Btn_GetReward.mouseEnabled=!1,this.UI_Txt_RewardInfo.text="未绑定",this.UI_Img_RewardIcon.gray=!1,this.UI_Img_RewardIcon.skin=ConstDefine.IconSkin_Lottery,this.UI_Efc_SeeSaw.play(0,!0);break;case 2:this.UI_Txt_RewardInfo.visible=!0,this.UI_Img_RewardIcon.visible=!0,this.UI_Btn_GetReward.mouseEnabled=!0,this.UI_Txt_RewardInfo.text="+"+t.rewardNum,this.UI_Img_RewardIcon.gray=!1,this.UI_Img_RewardIcon.skin=ConstDefine.IconSkin_Lottery,this.UI_Efc_SeeSaw.play(0,!0);break;case 3:this.UI_Txt_RewardInfo.visible=!1,this.UI_Img_RewardIcon.visible=!1,this.UI_Btn_GetReward.mouseEnabled=!1,this.UI_Efc_SeeSaw.stop(),this.UI_Img_RewardIcon.gray=!1}else this.UI_Img_RewardBG.skin="resources/invitefriend/img_lottery_text_bg.png",this.UI_Txt_RewardInfo.color="#ffffff",this.UI_Txt_RewardInfo.visible=!0,this.UI_Img_RewardIcon.visible=!0,this.UI_Img_Default_Icon.visible=!0,this.UI_Img_Loading.visible=!1,this.UI_Img_ProfileIcon.visible=!1,this.UI_Btn_GetReward.mouseEnabled=!1,this.UI_Img_RewardIcon.gray=!0,this.UI_Txt_RewardInfo.text="+99",this.UI_Img_RewardIcon.skin=ConstDefine.IconSkin_Diamond,this.UI_Img_RewardIcon.rotation=0,this.UI_Efc_SeeSaw.isPlaying&&this.UI_Efc_SeeSaw.stop()},e}(ui.PrefabUI.InviteVerifyItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LotteryHistItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.RenderItem=function(t,e){this.UI_Img_BG.visible=e%2==0;var i=1e3*t.lotteryTime,n=new Date(i),o=this.GetDateStr(n);this.UI_Txt_Date.text=o;var r=ConfigManager.GetInstance().GetLotteryRewardConfig(t.rewardConfigID);this.UI_Txt_Info.text=r.rewardName;var a=t.messageDeleteTime-Date.now()/1e3,s=Math.floor(a/3600),l=Math.floor(s/24);this.UI_Txt_LeftTime.text=l>1?l+"天":s>1?s+"小时":"即将删除"},e.prototype.GetDateStr=function(t){return t.getFullYear().toString()+"-"+((t.getMonth()+1<10?"0":"")+(t.getUTCMonth()+1).toString())+"-"+((t.getDate()<10?"0":"")+t.getDate().toString())+" "+((t.getHours()<10?"0":"")+t.getHours().toString())+":"+((t.getMinutes()<10?"0":"")+t.getMinutes().toString())+":"+((t.getSeconds()<10?"0":"")+t.getSeconds().toString())},e}(ui.PrefabUI.LotteryHistItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LotteryItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.InitItem=function(t,e,i){void 0===i&&(i=120),this.UI_Img_Icon.skin=t,this.UI_Img_Icon.width=i,this.UI_Img_Icon.height=i,this.UI_Txt_Num.visible=e>1,this.UI_Txt_Num.text=e.toString()},e}(ui.PrefabUI.LotteryItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},MoneyAnimItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.InitItem=function(t){switch(this.UI_Anim_Coin.visible=t==EnumMoneyAnimType.CoinAnim,this.UI_Img_Icon.visible=t!=EnumMoneyAnimType.CoinAnim,t){case EnumMoneyAnimType.Coin:this.UI_Img_Icon.skin=ConstDefine.IconSkin_Coin;break;case EnumMoneyAnimType.Diamond:this.UI_Img_Icon.skin=ConstDefine.IconSkin_Diamond;break;case EnumMoneyAnimType.Power:this.UI_Img_Icon.skin=ConstDefine.IconSkin_Power;break;case EnumMoneyAnimType.Lottery:this.UI_Img_Icon.skin=ConstDefine.IconSkin_Lottery;break;case EnumMoneyAnimType.CoinAnim:this.UI_Anim_Coin.play(0,!0)}this.visible=!0,this.alpha=1},e.prototype.DeleteItem=function(){this.UI_Anim_Coin.isPlaying&&this.UI_Anim_Coin.stop(),this.scale(1,1),this.alpha=1,this.rotation=0,this.visible=!1},e}(ui.PrefabUI.MoneyAnimItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},SpawnItem=function(t){function e(){var e=t.call(this)||this;return e.timeTask=-1,e.radius=64,e.lineWidth=10,e.interval=.02,e.ProgressWidth_Max=186,e.ProgressWidth_Min=0,e.UI_Btn_GainSpawn.on(Laya.Event.CLICK,e,e.OnUI_Btn_GainSpawnClick),e}return __extends(e,t),e.prototype.InitSpawnItem=function(t){this.spawnInfo=t,this.UI_Img_Icon.skin=ConstDefine.IconSkin_Coin,Log.Debug("SpawnItem Init Num:",this.spawnInfo.moneyNum),this.UI_Txt_Num.text=GameDataUtil.NumberToString(this.spawnInfo.moneyNum),this.SetColor(),-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.timeTask=TimeManager.getInst().loop(this.interval,cbhandler.gen_handler(this.SecondLoop,this)),this.SecondLoop()},e.prototype.UpdateSpawnItem=function(){var t=0,e=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl;t=FormulaUtil.CalcByConfig(EnumFormulaType.GoldUpgrade,e)*ConstDefine.SpawnTime_Coin;var i=StorageManager.GetSpawnMoneyNum();i+=t,StorageManager.SetSpawnMoneyNum(i),StorageManager.SetSpawnUpdateTime(Math.floor(Date.now()/1e3)),this.spawnInfo.moneyNum=StorageManager.GetSpawnMoneyNum();var n=Date.now()/1e3-this.spawnInfo.createTime;this.spawnInfo.spawnType=n>=ConstDefine.SpawnTime_OverTime?2:1,this.UI_Txt_Num.text=GameDataUtil.NumberToString(this.spawnInfo.moneyNum),-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.timeTask=TimeManager.getInst().loop(this.interval,cbhandler.gen_handler(this.SecondLoop,this)),this.SecondLoop()},e.prototype.DeleteSpawnItem=function(){-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.spawnInfo=null},e.prototype.PauseSpawnItem=function(t){t?-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1):(-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1),this.timeTask=TimeManager.getInst().loop(this.interval,cbhandler.gen_handler(this.SecondLoop,this)),this.SecondLoop())},e.prototype.SetColor=function(){this.spawnInfo},e.prototype.SecondLoop=function(){if(this.spawnInfo){this.visible=this.spawnInfo.moneyNum>0,this.UI_Btn_GainSpawn.mouseEnabled=this.spawnInfo.moneyNum>0;var t=StorageManager.GetSpawnUpdateTime(),e=Date.now()/1e3-t;if(1==this.spawnInfo.spawnType){var i=0;(i=ConstDefine.SpawnTime_Coin-e)<=0?(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1,this.UpdateSpawnItem()):this.SetProgress(1-i/ConstDefine.SpawnTime_Coin)}else this.SetProgress(0),TimeManager.getInst().remove(this.timeTask),this.timeTask=-1}},e.prototype.OnUI_Btn_GainSpawnClick=function(){if(this.spawnInfo){this.PauseSpawnItem(!0);var t=StorageManager.GetMoreSpawnChance();Math.random();t+=.2,StorageManager.SetMoreSpawnChance(t),this.PlayMoneyAnim(),this.SendGainMoneySpawn(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)}},e.prototype.SendGainMoneySpawn=function(){var t=this,e=StorageManager.GetSpawnMoneyNum();HttpMessageSender.GetSender().SendGainMoneySpawn(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.spawnInfo.spawnID,e,1,null,function(){t.ConnectError()})},e.prototype.PlayMoneyAnim=function(){var t=CommonUtil2D.GetGlobalPosition(this);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Coin,5,new Vec2(t.x,t.y),new Vec2(ConstDefine.MoneyImgPos_Coin.x,ConstDefine.MoneyImgPos_Coin.y),500),this.visible=!1},e.prototype.ConnectError=function(){this.visible=!0,this.PauseSpawnItem(!1)},e.prototype.SetProgress=function(t){this.UI_Img_Mask.width=this.ProgressWidth_Min+(this.ProgressWidth_Max-this.ProgressWidth_Min)*t},e}(ui.PrefabUI.SpawnItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},UpgradeItem=function(t){function e(){var e=t.call(this)||this;return e.bulletSkin="resources/upgrade/img_main_bullet.png",e.UI_Btn_Action.on(Laya.Event.CLICK,e,e.OnUI_Btn_ActionClick),e.bulletPool=new Array,e}return __extends(e,t),e.prototype.OnUI_Btn_ActionClick=function(){Facade.instance.sendNotification(NotificationNames.UpgradeUI_ElementTweenTo,this.sideWeaponID),HttpMessageSender.GetSender().SendEquipSideWeapon(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.sideWeaponID)},e.prototype.InitItem=function(t,e,i){switch(void 0===i&&(i=!0),this.UI_Img_Main.visible=this.UI_Box_Main.visible=t==EnumUpgradeUIType.Main,this.UI_Img_Sub.visible=this.UI_Box_Sub.visible=t==EnumUpgradeUIType.Sub,this.UI_Img_Money.visible=this.UI_Box_Money.visible=t==EnumUpgradeUIType.Money,t){case EnumUpgradeUIType.Main:for(var n=this.UI_HBox_Main.numChildren,o=0;o<n;o++)this.DeleteBulletImg(this.UI_HBox_Main.getChildAt(0));if(this.UI_Img_Lock.visible=!1,e){this.UI_Txt_Main.text=e.toString();var r=e<ConstDefine.UpgradeUI_MainWeapon_BulletMaxNum?e:ConstDefine.UpgradeUI_MainWeapon_BulletMaxNum;this.UI_HBox_Main.space=this.CalBulletSpace(r);for(o=0;o<r;o++){var a=this.CreateBulletImg();this.UI_HBox_Main.addChild(a),a.y=0}}this.UI_Btn_Action.mouseEnabled=!1,this.gray=!1;break;case EnumUpgradeUIType.Sub:var s=ConfigManager.GetInstance().GetWeaponConfig(e);if(this.UI_Img_Sub.skin=s.weaponSkin,this.sideWeaponID=e,i)this.UI_Img_Lock.visible=!1,this.UI_Txt_Sub.visible=!1,this.UI_Img_Txt_Level_Sub.visible=!1,this.UI_Img_Txt_SubWeapon.visible=!0,this.UI_Img_Txt_SubWeapon.skin="resources/upgrade/img_txt_weapon_"+e+".png",this.UI_Btn_Action.mouseEnabled=!1,this.gray=!1;else{this.UI_Txt_Sub.visible=!0,this.UI_Img_Txt_Level_Sub.visible=!0,this.UI_Img_Txt_SubWeapon.visible=!1;var l=GameDataUtil.CheckSideWeaponIDUnlocked(this.sideWeaponID);this.UI_Img_Lock.visible=!l,this.UI_Img_Txt_Level_Sub.skin=l?"resources/upgrade/img_txt_level_weapon_1.png":"resources/upgrade/img_txt_level_game.png",this.UI_Txt_Sub.text=l?GameDataUtil.CheckSideWeaponLevel(this.sideWeaponID).toString():s.UnlockLevel.toString(),this.UI_Txt_Sub.width=28*this.UI_Txt_Sub.text.length,this.UI_Btn_Action.mouseEnabled=l,this.gray=!l}break;case EnumUpgradeUIType.Money:this.UI_Img_Lock.visible=!1,this.UI_Btn_Action.mouseEnabled=!1,this.gray=!1}},e.prototype.SetButtonEnable=function(t){this.UI_Btn_Action.mouseEnabled=t},e.prototype.CreateBulletImg=function(){var t=this.bulletPool.pop();return t||(t=new Laya.Image("resources/upgrade/img_main_bullet.png")),t},e.prototype.DeleteBulletImg=function(t){t.removeSelf(),this.bulletPool.push(t),this.UI_Box_HidePool.addChild(t)},e.prototype.CalBulletSpace=function(t){return 0==t||1==t?0:50/t-10},e}(ui.PrefabUI.UpgradeItemPrefabUI),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.BackgroundUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent();var r=this.GetView();this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),r.UI_Img_Background.height=ConstDefine.screenHeigth,r.UI_Img_Background.width=1.2*r.UI_Img_Background.width,r.UI_Img_Background2.height=ConstDefine.screenHeigth,r.UI_Img_Background2.width=1.2*r.UI_Img_Background2.width,r.UI_Img_Background.pivotY=r.UI_Img_Background.height/2,r.UI_Img_Background2.pivotY=r.UI_Img_Background2.height/2,r.UI_Img_Background.y=ConstDefine.screenHeigth/2,r.UI_Img_Background2.y=r.UI_Img_Background.y-r.UI_Img_Background.height,this.bgSkinArray=new Array,this.bgSkinArray.push("resources/background/main_bg_01.jpg"),this.bgSkinArray.push("resources/background/main_bg_02.jpg"),this.bgSkinArray.push("resources/background/main_bg_03.jpg"),this.bgSkinArray.push("resources/background/main_bg_04.jpg"),this.centerPos=new Vec2(this.GetView().shakBox.x,this.GetView().shakBox.y),this.shakeTask=-1,r.UI_Img_Black_Cover.visible=!1,r.UI_Img_Black_Cover.graphics.drawRect(0,0,r.UI_Img_Black_Cover.width,r.UI_Img_Black_Cover.height,"#000000")},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName())},n.prototype.listNotificationInterests=function(){return[NotificationNames.BackgroundUI_ChangeBackground,NotificationNames.BackgroundUI_Shake,NotificationNames.HULK_COMING,NotificationNames.BackgroundUI_HomepageEnter,NotificationNames.BackgroundUI_BattleEnter,NotificationNames.BackgroundUI_BgMoveStart,NotificationNames.BackgroundUI_BgMoveEnd,NotificationNames.BackgroundUI_StopShakeBg]},n.prototype.handleNotification=function(t){var e=this,i=this.GetView();switch(t.getName()){case NotificationNames.BackgroundUI_StopShakeBg:this.isShake=t.getBody();break;case NotificationNames.BackgroundUI_ChangeBackground:Math.floor(Math.random()*this.bgSkinArray.length);var n="resources/background/main_bg_0.jpg";i.UI_Img_Background.skin=n,i.UI_Img_Background2.skin=n;break;case NotificationNames.BackgroundUI_Shake:-1!=this.shakeTask&&(ShakeManager.GetInstance().StopShake(this.shakeTask),i.shakBox.pos(this.centerPos.x,this.centerPos.y),this.shakeTask=-1),this.isShake&&(this.shakeTask=ShakeManager.GetInstance().ShakeSprite(i.shakBox,20,cbhandler.gen_handler(function(){e.shakeTask=-1},this),.1));break;case NotificationNames.HULK_COMING:i.UI_Img_Black_Cover.visible=!0,TimeManager.getInst().once(1,cbhandler.gen_handler(function(){i.UI_Img_Black_Cover.visible=!1},this));break;case NotificationNames.BackgroundUI_HomepageEnter:Tween2DUtil.getInst().to({node:i.shakBox,duration:1,scalex:1.5,scaley:1.5,onComplete:cbhandler.gen_handler(function(){},this)});break;case NotificationNames.BackgroundUI_BattleEnter:Tween2DUtil.getInst().to({node:i.shakBox,duration:1,scalex:1,scaley:1});break;case NotificationNames.BackgroundUI_BgMoveStart:this.backgroundUIMove(!0);break;case NotificationNames.BackgroundUI_BgMoveEnd:this.backgroundUIMove(!1)}},n.prototype.backgroundUIMove=function(t){t?Laya.timer.loop(16,this,this.mapMove):Laya.timer.clear(this,this.mapMove)},n.prototype.mapMove=function(){var t=this.GetView();t.UI_Img_Background.y+=ConstDefine.bgSpeed,t.UI_Img_Background2.y+=ConstDefine.bgSpeed,t.UI_Img_Background.y>=t.UI_Img_Background.height/2+ConstDefine.screenHeigth&&(t.UI_Img_Background.y=t.UI_Img_Background2.y-t.UI_Img_Background2.height),t.UI_Img_Background2.y>=t.UI_Img_Background2.height/2+ConstDefine.screenHeigth&&(t.UI_Img_Background2.y=t.UI_Img_Background.y-t.UI_Img_Background.height)},n}(t.BaseUICtrl);e.BackgroundUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.ProgressWidth_Max=741,i.ProgressWidth_Min=0,i.LevelPos_Prev=0,i.LevelPos_Cur=120,i.LevelPos_Next=240,i.coinSkin="resources/common/interface_icon_gold_02.png",i.PropImage_X=65,i.PropImage_Height=130,i.levelComplete=!1,i.playerWin=!1,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.BattleUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.moneyNumArray=new Array,this.levelArray=new Array,this.propDic=new Laya.Dictionary,this.propArray=new Array,this.propTweenTaskList=new Array,this.coinPos=this.CalGlobalCoinPos()},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.RefreshBattleInfo();var i=new LevelUIAnimParam;i.LevelAnimType=EnumLevelUIAnimType.Battle,i.curLevel=GameDataManager.getInstance().LoginPlayerInfo.CurLevel,this.sendNotification(NotificationNames.LevelUI_PlayAnim,i),PlayerManager.GetInstance().MainPlayer.EnterBattleScene()},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.DeleteLevel(),this.DeleteAllProp()},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Setting.on(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Setting.off(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick)},n.prototype.OnUI_Btn_SettingClick=function(){this.sendNotification(NotificationNames.OPENUI,t.UIID.SettingUIID)},n.prototype.listNotificationInterests=function(){return[NotificationNames.UI_StartGame,NotificationNames.UI_OnMonsterKill,NotificationNames.UI_RefreshMatchProgressInfo,NotificationNames.UI_OnPropBuff,NotificationNames.MATCH_COMPLETE,NotificationNames.HULK_COMING]},n.prototype.handleNotification=function(e){var n=this,o=this.GetView();switch(e.getName()){case NotificationNames.UI_RefreshMatchProgressInfo:r=e.getBody();this.SetProgress(1-r.Progress),o.UI_Txt_EnemyCount.text=r.MonsterLeftNum.toString(),r.Gold>0&&(this.GetView().UI_Txt_CoinCount.text=GameDataUtil.NumberToString(r.Gold));break;case NotificationNames.UI_OnMonsterKill:r=e.getBody();if(CommonUtil.OnMiniGame()&&StorageManager.GetVibrateSetting(),this.sendNotification(NotificationNames.BackgroundUI_Shake),0==r.GoldADD)return void TimeManager.getInst().once(.5,cbhandler.gen_handler(function(){n.levelComplete&&n.playerWin&&(n.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ResultUIParam(!0)),n.levelComplete=!1)},this));this.moneyNumArray.push(GameDataManager.getInstance().MatchInfo.GoldNum),this.moneyNumArray=SortUtil.orderby(this.moneyNumArray,function(t){return t}).reverse(),MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Coin,3,r.Postion,this.coinPos,500,cbhandler.gen_handler(function(){var e=n.moneyNumArray.pop();e||(e=GameDataManager.getInstance().MatchInfo.GoldNum),n.GetView().UI_Txt_CoinCount.text=GameDataUtil.NumberToString(e),n.levelComplete&&n.playerWin&&(n.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ResultUIParam(!0)),n.levelComplete=!1)},this));break;case NotificationNames.MATCH_COMPLETE:this.playerWin=e.getBody(),this.levelComplete=!0;break;case NotificationNames.UI_StartGame:if(GameDataManager.getInstance().MatchInfo.State!=EnumMatchState.Complete)return;i.instance.sendNotification(NotificationNames.CONTINUE_NEXT_MATCH,GameDataManager.getInstance().LoginPlayerInfo.CurLevel),this.RefreshBattleInfo();break;case NotificationNames.UI_OnPropBuff:var r=e.getBody();this.SetPropVisible(r);break;case NotificationNames.HULK_COMING:o.UI_Img_Warning.alpha=0,o.UI_Img_Warning.visible=!0,o.UI_Anim_Warning.play(0,!0,"Warning"),TimeManager.getInst().once(3,cbhandler.gen_handler(function(){o.UI_Anim_Warning.stop(),o.UI_Img_Warning.alpha=0,o.UI_Img_Warning.visible=!1},this))}},n.prototype.RefreshBattleInfo=function(){var t=this.GetView();this.SetCurLevel(),t.UI_Txt_CoinCount.text=GameDataUtil.NumberToString(GameDataManager.getInstance().MatchInfo.GoldNum),this.levelComplete=!1,this.playerWin=!1,this.SetProgress(1),t.UI_Img_Warning.visible=!1,t.UI_Txt_EnemyCount.text=""},n.prototype.SetCurLevel=function(){var e=this.GetView();this.DeleteLevel();var i=new t.PrefabUI.LevelItemPrefabUI;i.UI_Img_CurLevel.visible=!0,i.UI_Img_OtherLevel.visible=!1,i.UI_Txt_Level.text=GameDataManager.getInstance().LevelInfo.CurLevelID.toString(),e.UI_Box_Level.addChild(i),i.centerY=0,i.x=this.LevelPos_Cur,this.levelArray.push(i);var n=new t.PrefabUI.LevelItemPrefabUI;if(n.UI_Img_CurLevel.visible=!1,n.UI_Img_OtherLevel.visible=!0,n.UI_Txt_Level.text=(GameDataManager.getInstance().LevelInfo.CurLevelID+1).toString(),e.UI_Box_Level.addChild(n),n.centerY=0,n.x=this.LevelPos_Next,this.levelArray.push(n),1!=GameDataManager.getInstance().LevelInfo.CurLevelID){var o=new t.PrefabUI.LevelItemPrefabUI;o.UI_Img_CurLevel.visible=!1,o.UI_Img_OtherLevel.visible=!0,o.UI_Txt_Level.text=(GameDataManager.getInstance().LevelInfo.CurLevelID-1).toString(),e.UI_Box_Level.addChild(o),o.centerY=0,o.x=this.LevelPos_Prev,this.levelArray.push(o)}},n.prototype.DeleteLevel=function(){for(var t=0;t<this.levelArray.length;t++){var e=this.levelArray[t];e.removeSelf(),e.destroy(!0)}this.levelArray=new Array},n.prototype.SetProgress=function(t){this.GetView().UI_Img_Progress.width=this.ProgressWidth_Min+(this.ProgressWidth_Max-this.ProgressWidth_Min)*t},n.prototype.SetPropVisible=function(t){var e=this.GetView();if(t.Active){if(!(n=this.propDic.get(t.BuffType))){n=this.CreatePropPrefab(t),this.propDic.set(t.BuffType,n),e.UI_Box_Prop.addChild(n);var i=e.UI_Box_Prop.numChildren;n.x=this.PropImage_X,n.y=(i-1)*this.PropImage_Height}n.RefreshPrefab(t)}else{var n=this.propDic.get(t.BuffType);if(!n)return void Log.Debug("BattleUI 重复隐藏buff图片，不再处理：",t.BuffType);this.propDic.remove(t.BuffType),n.removeSelf(),this.DeletePropImage(n),this.RefreshPropBoxChild()}},n.prototype.RefreshPropBoxChild=function(){var t=this,e=this.GetView();this.StopAllPropTween();for(var i=function(){var i=Tween2DUtil.to({node:e.UI_Box_Prop.getChildAt(o),duration:.3,x:n.PropImage_X,y:o*n.PropImage_Height,onComplete:cbhandler.gen_handler(function(){t.propTweenTaskList.splice(t.propTweenTaskList.indexOf(i),1)})});n.propTweenTaskList.push(i)},n=this,o=0;o<e.UI_Box_Prop.numChildren;o++)i()},n.prototype.DeleteAllProp=function(){for(var t=0;t<this.propDic.keys.length;t++){var e=this.propDic.keys[t],i=this.propDic.get(e);this.DeletePropImage(i)}this.propDic=new Laya.Dictionary},n.prototype.StopAllPropTween=function(){for(var t=0;t<this.propTweenTaskList.length;t++)Tween2DUtil.kill(this.propTweenTaskList[t]);this.propTweenTaskList=new Array},n.prototype.CreatePropPrefab=function(t){var e=this.propArray.pop();return e||(e=new BattleProp),e.RefreshPrefab(t),e.visible=!0,e},n.prototype.DeletePropImage=function(t){t.visible=!1,t.HidePrefab(),this.propArray.push(t)},n.prototype.CalGlobalCoinPos=function(){var t=this.GetView(),e=(Laya.stage.width-t.UI_Box_MatchInfo.width)/2+t.UI_Box_MatchInfo.centerX+t.UI_Img_Coin.x,i=t.UI_Box_MatchInfo.top+t.UI_Img_Coin.y;return new Vec2(e,i)},n}(t.BaseUICtrl);e.BattleUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.CommonPanelUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=0,this.RegisterEvent()},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=t;this.GetView().txt_context.text=i.context,this.callback=i.callback},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.GetView().txt_context.text="",this.callback=null},n.prototype.BeforeUIDestroy=function(){this.RemoveEvent()},n.prototype.OnUIDestroy=function(){},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().btn_exit.on(Laya.Event.CLICK,this,this.Onbtn_exitClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().btn_exit.off(Laya.Event.CLICK,this,this.Onbtn_exitClick)},n.prototype.Onbtn_exitClick=function(){this.callback&&this.callback(),this.sendNotification(NotificationNames.HIDEUI,t.UIID.CommonPanelUIID)},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n}(t.BaseUICtrl);e.CommonPanelUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.remCount=0,i.changeNum=500,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.ExchangeUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var i=t;this.exchangeType=i.exchangeType,this.localDiamondNum=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum,this.InitLayout(),this.exchangeNum=1,this.ShowExchange(),this.longPressTask=-1},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.CancelBtnLongPress()},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this),this.CancelBtnLongPress()},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Cancel.on(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),this.GetView().UI_Btn_Reduce.on(Laya.Event.CLICK,this,this.OnUI_Btn_ReduceClick),this.GetView().UI_Btn_Add.on(Laya.Event.CLICK,this,this.OnUI_Btn_AddClick),this.GetView().UI_Btn_GainDiamond.on(Laya.Event.CLICK,this,this.OnUI_Btn_GainDiamondClick),this.GetView().UI_Btn_Exchange.on(Laya.Event.CLICK,this,this.OnUI_Btn_ExchangeClick),this.GetView().UI_Btn_Reduce.on(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_ReduceDown),this.GetView().UI_Btn_Reduce.on(Laya.Event.MOUSE_OUT,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Reduce.on(Laya.Event.MOUSE_UP,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Add.on(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_AddDown),this.GetView().UI_Btn_Add.on(Laya.Event.MOUSE_OUT,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Add.on(Laya.Event.MOUSE_UP,this,this.CancelBtnLongPress)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Cancel.off(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),this.GetView().UI_Btn_Reduce.off(Laya.Event.CLICK,this,this.OnUI_Btn_ReduceClick),this.GetView().UI_Btn_Add.off(Laya.Event.CLICK,this,this.OnUI_Btn_AddClick),this.GetView().UI_Btn_GainDiamond.off(Laya.Event.CLICK,this,this.OnUI_Btn_GainDiamondClick),this.GetView().UI_Btn_Exchange.off(Laya.Event.CLICK,this,this.OnUI_Btn_ExchangeClick),this.GetView().UI_Btn_Reduce.off(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_ReduceDown),this.GetView().UI_Btn_Reduce.off(Laya.Event.MOUSE_OUT,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Reduce.off(Laya.Event.MOUSE_UP,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Add.off(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_AddDown),this.GetView().UI_Btn_Add.off(Laya.Event.MOUSE_OUT,this,this.CancelBtnLongPress),this.GetView().UI_Btn_Add.off(Laya.Event.MOUSE_UP,this,this.CancelBtnLongPress)},n.prototype.OnUI_Btn_CancelClick=function(){this.sendNotification(NotificationNames.DESTROYUI,t.UIID.ExchangeUIID)},n.prototype.OnUI_Btn_ReduceClick=function(){this.exchangeNum-=1,this.exchangeNum<0&&(this.exchangeNum=0),this.ShowExchange(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_AddClick=function(){this.exchangeNum+=1,this.exchangeNum>this.localDiamondNum&&(this.exchangeNum=this.localDiamondNum),this.ShowExchange(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_GainDiamondClick=function(){this.sendNotification(NotificationNames.DESTROYUI,t.UIID.ExchangeUIID),0==GameDataManager.getInstance().InviteType?(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)):0==GameDataManager.getInstance().LoginPlayerInfo.VerifyInfo.state?this.sendNotification(NotificationNames.OPENUI,t.UIID.VerifyUIID):(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteVerifyFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_ExchangeClick=function(){var t=this,e=this.exchangeNum;this.localDiamondNum-=e,this.localDiamondNum<=0&&(this.localDiamondNum=0),this.ShowExchange(),HttpMessageSender.GetSender().SendExchangeWithDiamond(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.exchangeType,e,null,function(){t.localDiamondNum+=e}),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)},n.prototype.CancelBtnLongPress=function(){this.changeNum=500,this.remCount=0,Laya.timer.clear(this,this.longPress),Laya.timer.clear(this,this.longProessOne)},n.prototype.OnUI_Btn_ReduceDown=function(){Laya.timer.once(300,this,this.longProessOne,[!1])},n.prototype.OnUI_Btn_AddDown=function(){Laya.timer.once(300,this,this.longProessOne,[!0])},n.prototype.listNotificationInterests=function(){return[NotificationNames.ExchangeUI_ExchangeResult]},n.prototype.handleNotification=function(t){this.GetView();switch(t.getName()){case NotificationNames.ExchangeUI_ExchangeResult:this.exchangeType==EnumDiamondExchangeType.Coin?MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.CoinAnim,5,new Vec2(600,1100),new Vec2(ConstDefine.MoneyImgPos_Coin.x,ConstDefine.MoneyImgPos_Coin.y),500,null,null,null,.4):this.exchangeType==EnumDiamondExchangeType.Power&&MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Power,5,new Vec2(600,1100),new Vec2(ConstDefine.MoneyImgPos_Power.x,ConstDefine.MoneyImgPos_Power.y),500,null,null,null,.4)}},n.prototype.InitLayout=function(){var t=this.GetView();switch(this.exchangeType){case EnumDiamondExchangeType.Coin:t.UI_Img_Title_Coin.visible=t.UI_Img_Coin.visible=!0,t.UI_Img_Title_Power.visible=t.UI_Img_Power.visible=!1;break;case EnumDiamondExchangeType.Power:t.UI_Img_Title_Coin.visible=t.UI_Img_Coin.visible=!1,t.UI_Img_Title_Power.visible=t.UI_Img_Power.visible=!0}},n.prototype.ShowExchange=function(){var t=this.GetView();switch(t.UI_Ipt_DiamondNum.text=this.exchangeNum.toString(),this.exchangeType){case EnumDiamondExchangeType.Coin:var e=GameDataUtil.DiamondExchange_Coin(this.exchangeNum);t.UI_Txt_GainNum.text=GameDataUtil.NumberToString(e);break;case EnumDiamondExchangeType.Power:var i=GameDataUtil.DiamondExchange_Power(this.exchangeNum);t.UI_Txt_GainNum.text=GameDataUtil.NumberToString(i)}var n=this.exchangeNum<=this.localDiamondNum&&this.localDiamondNum>0;t.UI_Btn_Exchange.mouseEnabled=n,t.UI_Btn_Exchange.gray=!n},n.prototype.longProessOne=function(t){Laya.timer.loop(1,this,this.longPress,[t])},n.prototype.longPress=function(t){this.remCount++,30*this.remCount>this.changeNum&&(this.changeNum-=50*(.5+.5*ConstDefine.UI_CHANGE_SEEPD_GROW),t?this.exchangeNum++:this.exchangeNum--,this.remCount=0,this.changeNum<=40*ConstDefine.UI_CHANGE_SEEPD_MAX&&(this.changeNum=50*ConstDefine.UI_CHANGE_SEEPD_MAX),this.exchangeNum>this.localDiamondNum&&(this.exchangeNum=this.localDiamondNum),this.exchangeNum<=0&&(this.exchangeNum=0),this.ShowExchange(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01))},n}(t.BaseUICtrl);e.ExchangeUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.anchorPos_Right_Hide=new Vec2(1480,960),i.anchorPos_Bottom_Hide=new Vec2(540,2320),i.anchorPos_Right_Show=new Vec2(1080,960),i.anchorPos_Bottom_Show=new Vec2(540,1920),i.uiAnimTime=1,i.btnSkin_Normal="resources/homepage/img_func_bg_0.png",i.btnSkin_Selected="resources/homepage/img_func_bg_1.png",i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.HomePageUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),CommonUtil.OnMiniGame()&&WechatUtil.wxSetUserCloudStorage([{key:OpenDataContextKeyDefine.CURRENT_COMPLETE_LEVEL,value:GameDataManager.getInstance().LoginPlayerInfo.CurLevel.toString()},{key:OpenDataContextKeyDefine.PLAYER_OPENID,value:GameDataManager.getInstance().LoginPlayerInfo.OpenID.toString()}],Handler.create(this,function(t){Log.Debug("更新最高分成功",GameDataManager.getInstance().LoginPlayerInfo.CurLevel)}),Handler.create(this,function(t){Log.Debug("更新最高分失败,"+t)})),this.sendNotification(NotificationNames.CREATER_MAIN_PLAYER);var r=this.GetView();r.Anchor_BottomCenter.bottom=-400,window.GameVersion?r.UI_Txt_Version.text=window.GameVersion:r.UI_Txt_Version.text="",this.CheckOfflineSpawn()},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);this.GetView().Anchor_BottomCenter.bottom=-400,PlayerManager.GetInstance().MainPlayer.EnterHomepageScene()},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=this.GetView();i.UI_Txt_CurLevel.text="当前关卡："+GameDataManager.getInstance().LoginPlayerInfo.CurLevel.toString(),1==GameDataManager.getInstance().LoginPlayerInfo.CurLevel?i.UI_Btn_GameStart.mouseEnabled=!0:(i.UI_Btn_GameStart.mouseEnabled=!1,i.Anchor_BottomCenter.centerX=0,Tween2DUtil.to({node:i.Anchor_BottomCenter,duration:this.uiAnimTime,bottom:0}),TimeManager.getInst().once(1,cbhandler.gen_handler(function(){i.UI_Btn_GameStart.mouseEnabled=!0},this)),this.InitSpawnInfo()),this.CheckSideWeaponUnlock(),this.CheckUpgrade();var n=new LevelUIAnimParam;n.LevelAnimType=EnumLevelUIAnimType.HomePage,n.curLevel=GameDataManager.getInstance().LoginPlayerInfo.CurLevel,this.sendNotification(NotificationNames.LevelUI_PlayAnim,n),AudioManager.GetInstance().PlayMusicByID(GameDataManager.getInstance().HallBg)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this);this.GetView();if(this.spawnItem){this.spawnItem.DeleteSpawnItem();var t=this.spawnItem;this.spawnItem=null,t.destroy(!0)}},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this);var t=this.GetView();t.UI_Btn_Setting.on(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick),t.UI_Btn_Leaderboard.on(Laya.Event.CLICK,this,this.OnUI_Btn_LeaderboardClick),t.UI_Btn_InviteFriend.on(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick),t.UI_Btn_GameStart.on(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_GameStartClick),t.UI_Btn_Upgrade_Main.on(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_MainClick),t.UI_Btn_Upgrade_Sub.on(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_SubClick),t.UI_Btn_Upgrade_Money.on(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_MoneyClick),t.UI_Btn_EnterSelectedLevel.on(Laya.Event.CLICK,this,this.OnUI_Btn_EnterSelectedLevelClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName());var t=this.GetView();t.UI_Btn_Setting.off(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick),t.UI_Btn_Leaderboard.off(Laya.Event.CLICK,this,this.OnUI_Btn_LeaderboardClick),t.UI_Btn_InviteFriend.off(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick),t.UI_Btn_GameStart.off(Laya.Event.MOUSE_DOWN,this,this.OnUI_Btn_GameStartClick),t.UI_Btn_Upgrade_Main.off(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_MainClick),t.UI_Btn_Upgrade_Sub.off(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_SubClick),t.UI_Btn_Upgrade_Money.off(Laya.Event.CLICK,this,this.OnUI_Btn_Upgrade_MoneyClick),t.UI_Btn_EnterSelectedLevel.on(Laya.Event.CLICK,this,this.OnUI_Btn_EnterSelectedLevelClick)},n.prototype.OnUI_Btn_SettingClick=function(){this.sendNotification(NotificationNames.OPENUI,t.UIID.SettingUIID),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_LeaderboardClick=function(){this.sendNotification(NotificationNames.OPENUI,t.UIID.LeaderboardUIID),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_InviteFriendClick=function(){0==GameDataManager.getInstance().InviteType?(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)):0==GameDataManager.getInstance().LoginPlayerInfo.VerifyInfo.state?this.sendNotification(NotificationNames.OPENUI,t.UIID.VerifyUIID):(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteVerifyFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_GameStartClick=function(){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum>=5?HttpMessageSender.GetSender().SendMatchStart(GameDataManager.getInstance().LoginPlayerInfo.OpenID):this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Power))},n.prototype.OnUI_Btn_EnterSelectedLevelClick=function(){var t=this.GetView().UI_Ipt_SelectLevel.text;if(t){var e=parseInt(t);GameDataManager.getInstance().LoginPlayerInfo.CurLevel=e,this.sendNotification(NotificationNames.MATCH_ENTER_COMMAND,e)}},n.prototype.OnUI_Btn_Upgrade_MainClick=function(){this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.UpgradeUIParam(EnumUpgradeUIType.Main)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_Upgrade_SubClick=function(){this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.UpgradeUIParam(EnumUpgradeUIType.Sub)),StorageManager.GetUnlockNewSideweapon()&&(StorageManager.SetUnlockNewSideweapon(!1),this.CheckUpgrade()),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_Upgrade_MoneyClick=function(){this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.UpgradeUIParam(EnumUpgradeUIType.Money)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.listNotificationInterests=function(){return[NotificationNames.HomepageUI_CreateMoneySpawn,NotificationNames.HomepageUI_GainMoneySpawn,NotificationNames.UI_StartGame,NotificationNames.UI_RefreshMoneyInfo,NotificationNames.HomepageUI_SetBottomButtonState,NotificationNames.HomePageUI_SetInteractive,NotificationNames.HomepageUI_UnlockNewSideweapon,NotificationNames.HomepageUI_PlaySpawnAnim,NotificationNames.HomepageUI_HidenText,NotificationNames.HomepageUI_ShowText]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.HomepageUI_HidenText:this.GetView().UI_Btn_GameStart.visible=!1;break;case NotificationNames.HomepageUI_ShowText:this.GetView().UI_Btn_GameStart.visible=!0;break;case NotificationNames.HomepageUI_CreateMoneySpawn:if(0==e.visible)return;o=t.getBody();Log.Debug("可以创建产能 type:",o.moneyType,"id:",o.spawnID),this.CreateNewMoneySpawn(o,!0);break;case NotificationNames.HomepageUI_GainMoneySpawn:if(0==e.visible)return;var i=t.getBody();Log.Debug("可以收获产能 id:",i),this.spawnItem&&this.CheckCreateSpawn();break;case NotificationNames.HomepageUI_UpdateMoneySpawn:case NotificationNames.HomepageUI_RemoveMoneySpawn:break;case NotificationNames.UI_StartGame:if(GameDataManager.getInstance().MatchInfo.State!=EnumMatchState.Exit)return;this.sendNotification(NotificationNames.UI_RefreshMoneyInfo);var n=GameDataManager.getInstance().LoginPlayerInfo.CurLevel;this.sendNotification(NotificationNames.MATCH_ENTER_COMMAND,n);break;case NotificationNames.UI_RefreshMoneyInfo:this.CheckUpgrade();break;case NotificationNames.HomepageUI_SetBottomButtonState:var o;switch((o=t.getBody()).buttonID){case 0:this.SetBtnSelectedState(e.UI_Btn_Leaderboard,o.selected);break;case 1:this.SetBtnSelectedState(e.UI_Btn_InviteFriend,o.selected);break;case 2:this.SetBtnSelectedState(e.UI_Btn_Upgrade_Main,o.selected);break;case 3:this.SetBtnSelectedState(e.UI_Btn_Upgrade_Sub,o.selected);break;case 4:this.SetBtnSelectedState(e.UI_Btn_Upgrade_Money,o.selected)}break;case NotificationNames.HomePageUI_SetInteractive:break;case NotificationNames.HomepageUI_UnlockNewSideweapon:this.CheckUpgrade();break;case NotificationNames.HomepageUI_PlaySpawnAnim:t.getBody()?this.spawnItem.PlayMoneyAnim():this.spawnItem.ConnectError()}},n.prototype.InitSpawnInfo=function(){for(var t=new Array,e=0;e<GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length;e++)t.push(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[e]);Log.Debug("HomepageUI 当前产能列表：",t);for(var i=0;i<t.length;i++){var n=t[i];this.CreateNewMoneySpawn(n,!1)}this.CheckCreateSpawn()},n.prototype.CheckCreateSpawn=function(){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length<1&&HttpMessageSender.GetSender().SendCreateMoneySpawn(GameDataManager.getInstance().LoginPlayerInfo.OpenID,EnumMoneyType.Coin)},n.prototype.CreateNewMoneySpawn=function(t,e){var i=this.GetView();this.spawnItem||(this.spawnItem=new SpawnItem,this.spawnItem.scale(1.2,1.2)),i.UI_Box_Coin_Pos.addChild(this.spawnItem),this.spawnItem.centerX=0,this.spawnItem.centerY=0;var n=e?this.CreateSpawnInfo(t):this.UpdateSpawnInfo(t);this.spawnItem.InitSpawnItem(n)},n.prototype.CheckOfflineSpawn=function(){if(!(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList.length<=0)){var t=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.spawnList[0],e=GameDataManager.getInstance().ServerLoginTime,i=t.createTime+ConstDefine.SpawnTime_OverTime,n=(e>i?i:e)-t.createTime;n<=0&&(n=0);var o=0,r=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl;o=FormulaUtil.CalcByConfig(EnumFormulaType.GoldUpgrade,r)*n,StorageManager.SetSpawnMoneyNum(o);var a=Math.floor(Date.now()/1e3);StorageManager.SetSpawnUpdateTime(a)}},n.prototype.CreateSpawnInfo=function(t){StorageManager.SetSpawnMoneyNum(0);var e=Math.floor(Date.now()/1e3);Log.Debug("HomepageUI CreateSpawnItem SeverCreateTime:",t.createTime,"LocalNow:",e,"delta:",e-t.createTime),StorageManager.SetSpawnUpdateTime(e);return new SpawnInfo(t.spawnID,0,t.createTime,1)},n.prototype.UpdateSpawnInfo=function(t){var e=Math.floor(Date.now()/1e3),i=t.createTime+ConstDefine.SpawnTime_OverTime,n=(e>i?i:e)-t.createTime;n<=0&&(n=0);var o=0,r=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl;o=FormulaUtil.CalcByConfig(EnumFormulaType.GoldUpgrade,r)*n,StorageManager.SetSpawnMoneyNum(o),StorageManager.SetSpawnUpdateTime(e);var a=e-t.createTime>=ConstDefine.SpawnTime_OverTime?2:1;return new SpawnInfo(t.spawnID,o,t.createTime,a)},n.prototype.CheckSideWeaponUnlock=function(){for(var t=ConfigManager.GetInstance().GetAllWeaponConfig(),e=GameDataManager.getInstance().LoginPlayerInfo.AllSideWeaponList,i=0;i<t.length;i++){var n=t[i];if(-1!=n.UnlockLevel){for(var o=GameDataManager.getInstance().LoginPlayerInfo.CurLevel-1,r=!1,a=0;a<e.length;a++){if(e[a].id==n.index){r=!0;break}}o>=n.UnlockLevel&&!r&&HttpMessageSender.GetSender().SendUnlockSideWeapon(GameDataManager.getInstance().LoginPlayerInfo.OpenID,n.index)}}},n.prototype.CheckUpgrade=function(){var t=this.GetView(),e=GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo,i=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel+1);if(i.ID==e.evolveLevel+1&&e.level>=i.RequiredPowerLvl){n=i.RequiredGoldNumber<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;Log.Debug("HomePageUI 主武器升阶检查结果",n),t.UI_Img_UpgradeArrow_Main.visible=n}else{GameDataUtil.Upgrade_Weapon_Main(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level);var n=GameDataUtil.Upgrade_Weapon_Main(e.level)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;Log.Debug("HomePageUI 主武器升级检查结果",n),t.UI_Img_UpgradeArrow_Main.visible=n}var o=GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponInfo,r=GameDataUtil.Upgrade_Weapon_Side(o.level)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;Log.Debug("HomePageUI 副武器升级检查结果",r),Log.Debug("HomepageUI 副武器解锁检查结果",StorageManager.GetUnlockNewSideweapon()),t.UI_Img_UpgradeArrow_Sub.visible=r||StorageManager.GetUnlockNewSideweapon();var a=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl,s=GameDataUtil.Upgrade_Spawn(a)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;Log.Debug("HomePageUI 产能升级检查结果",s),t.UI_Img_UpgradeArrow_Money.visible=s;for(var l=GameDataManager.getInstance().LoginPlayerInfo.InvitedList,h=0==GameDataManager.getInstance().LoginPlayerInfo.VerifyInfo.state,u=!1,c=0;c<l.length;c++){var d=l[c];if(0==d.rewardGained||2==d.rewardGained){u=!0;break}}Log.Debug("HomePageUI 邀请奖励可领取检查结果",u||h),t.UI_Img_UpgradeArrow_Invite.visible=u||h,t.UI_Img_PowerTxt_0.visible=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum<5,t.UI_Img_PowerTxt_1.visible=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum>=5},n.prototype.SetBtnSelectedState=function(t,e){t.skin=e?this.btnSkin_Selected:this.btnSkin_Normal},n}(t.BaseUICtrl);e.HomePageUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.curListLength=20,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.InviteFriendUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.tweenTask=-1,this.InitList()},n.prototype.BeforeUIOpen=function(t){var i=this;void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var n=this.GetView();n.UI_Img_Scale.scale(0,0),this.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleUpTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,onComplete:cbhandler.gen_handler(function(){i.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){i.tweenTask=-1},i)})},this)})},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=this.GetView();i.UI_List_InviteFriend.visible=!1,i.UI_Txt_CheckTip.visible=!0,i.UI_Txt_CheckTip.text="查询中，请稍后...",this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(1,!0))},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(1,!1)),-1!=this.tweenTask&&(Tween2DUtil.kill(this.tweenTask),this.tweenTask=-1)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Cancel.on(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),this.GetView().UI_Btn_InviteFriend.on(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Cancel.off(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),this.GetView().UI_Btn_InviteFriend.off(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick)},n.prototype.OnUI_Btn_CancelClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.InviteFriendUIID)},n.prototype.OnUI_Btn_InviteFriendClick=function(){CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShareWithPicAndTitle(ResPathConst.SHARE_PIC[0],"虫子来袭，消灭它们！",null,null,WechatConstDefine.LOGIN_QUERY_KEY+"="+GameDataManager.getInstance().LoginPlayerInfo.OpenID)},n.prototype.listNotificationInterests=function(){return[NotificationNames.InviteFriendUI_CheckInviteListComplete,NotificationNames.InviteFriendUI_RefreshFriendListInfo]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.InviteFriendUI_CheckInviteListComplete:this.OpenList(),e.UI_List_InviteFriend.visible=!0,e.UI_Txt_CheckTip.visible=!1;break;case NotificationNames.InviteFriendUI_RefreshFriendListInfo:for(var i=t.getBody(),n=this.GetOrderedInviteList(),o=0;o<n.length;o++){var r=n[o];if(r.friendOpenID==i){e.UI_List_InviteFriend.changeItem(o,r);break}}}},n.prototype.InitList=function(){var t=this.GetView();t.UI_List_InviteFriend.itemRender=InviteItem,t.UI_List_InviteFriend.vScrollBarSkin="",t.UI_List_InviteFriend.renderHandler=new Handler(this,this.RenderItem),t.UI_List_InviteFriend.array=[];for(var e=this.GetOrderedInviteList(),i=this.GetListLength(e.length),n=0;n<i;n++)n<=e.length-1?t.UI_List_InviteFriend.addItem(e[n]):t.UI_List_InviteFriend.addItem(null);this.curListLength=i},n.prototype.RenderItem=function(t,e){var i=t.dataSource;t.RenderItem(i,e)},n.prototype.OpenList=function(){for(var t=this.GetView(),e=this.GetOrderedInviteList(),i=this.GetListLength(e.length),n=0;n<i;n++)if(n<=this.curListLength-1){if(n<=e.length-1){var o=t.UI_List_InviteFriend.getItem(n);null!=o&&o.rewardGained==e[n].rewardGained||t.UI_List_InviteFriend.changeItem(n,e[n])}}else n<=e.length-1?t.UI_List_InviteFriend.addItem(e[n]):t.UI_List_InviteFriend.addItem(null);this.curListLength=i},n.prototype.GetListLength=function(t){return t<=20?20:Math.round(10*Math.ceil(t/10))},n.prototype.GetOrderedInviteList=function(){return GameDataManager.getInstance().LoginPlayerInfo.InvitedList},n}(t.BaseUICtrl);e.InviteFriendUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.InviteVerifyFriendUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.tweenTask=-1,this.InitList(),this.InitLottery()},n.prototype.BeforeUIOpen=function(t){var i=this;void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var n=this.GetView();n.UI_Img_Scale.scale(0,0),this.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleUpTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,onComplete:cbhandler.gen_handler(function(){i.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){i.tweenTask=-1},i)})},this)})},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=this.GetView();i.UI_List_InviteFriend.visible=!1,i.UI_Txt_CheckTip.visible=!0,i.UI_Txt_CheckTip.text="查询中，请稍后...",i.UI_Txt_InviteNum.text="",i.UI_Txt_VerifyNum.text="",this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(1,!0)),CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShowBannerAd(),this.OpenLottery()},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(1,!1)),-1!=this.tweenTask&&(Tween2DUtil.kill(this.tweenTask),this.tweenTask=-1),this.CloseList(),this.CloseLottery(),CommonUtil.OnMiniGame()&&WechatUtil.getIntance().HideBannerAd()},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){var t=this.GetView();i.getInstance().registerMediator(this),t.UI_Btn_Cancel.on(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_InviteFriend.on(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick),t.UI_Btn_Lottery.on(Laya.Event.CLICK,this,this.OnUI_Btn_LotteryClick),t.UI_Btn_CheckLotteryHist.on(Laya.Event.CLICK,this,this.OnUI_Btn_CheckLotteryHistClick),t.UI_Btn_Lottery_SpeedUp.on(Laya.Event.CLICK,this,this.OnUI_Btn_Lottery_SpeedUpClick),t.UI_Btn_Lottery_SpeedDown.on(Laya.Event.CLICK,this,this.OnUI_Btn_Lottery_SpeedDownClick)},n.prototype.RemoveEvent=function(){var t=this.GetView();i.getInstance().removeMediator(this.getMediatorName()),t.UI_Btn_Cancel.off(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_InviteFriend.off(Laya.Event.CLICK,this,this.OnUI_Btn_InviteFriendClick),t.UI_Btn_Lottery.off(Laya.Event.CLICK,this,this.OnUI_Btn_LotteryClick),t.UI_Btn_CheckLotteryHist.off(Laya.Event.CLICK,this,this.OnUI_Btn_CheckLotteryHistClick),t.UI_Btn_Lottery_SpeedUp.off(Laya.Event.CLICK,this,this.OnUI_Btn_Lottery_SpeedUpClick),t.UI_Btn_Lottery_SpeedDown.off(Laya.Event.CLICK,this,this.OnUI_Btn_Lottery_SpeedDownClick)},n.prototype.OnUI_Btn_CancelClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.InviteVerifyFriendUIID)},n.prototype.OnUI_Btn_InviteFriendClick=function(){CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShareWithPicAndTitle(ResPathConst.SHARE_PIC[0],"虫子来袭，消灭它们！",null,null,WechatConstDefine.LOGIN_QUERY_KEY+"="+GameDataManager.getInstance().LoginPlayerInfo.OpenID)},n.prototype.OnUI_Btn_LotteryClick=function(){this.localLotteryMaxNum-=1,this.localLotteryNum+=1,this.CheckLotteryClickEnable(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01),LotteryManager.Instance.LotterySpeedUp_Gird(),HttpMessageSender.GetSender().SendLottery(GameDataManager.getInstance().LoginPlayerInfo.OpenID),-1!=this.lotteryTimeTask&&TimeManager.getInst().remove(this.lotteryTimeTask),this.lotteryTimeTask=TimeManager.getInst().once(3,cbhandler.gen_handler(this.LotteryTimeUp,this))},n.prototype.OnUI_Btn_CheckLotteryHistClick=function(){this.sendNotification(NotificationNames.OPENUI,t.UIID.LotteryRewardHistUIID),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_Lottery_SpeedUpClick=function(){LotteryManager.Instance.LotterySpeedUp_Gird()},n.prototype.OnUI_Btn_Lottery_SpeedDownClick=function(){var t=this.GetView(),e=Math.floor(12*Math.random());t.UI_Btn_Lottery.label=e.toString(),LotteryManager.Instance.LotterySpeedDown_Gird(e,cbhandler.gen_handler(function(){Log.Debug("转盘停止！")},this))},n.prototype.listNotificationInterests=function(){return[NotificationNames.InviteFriendUI_CheckInviteListComplete,NotificationNames.InviteFriendUI_RefreshFriendListInfo,NotificationNames.InviteFriendUI_LotteryResult,NotificationNames.InviteFriendUI_RefreshLotteryNum]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.InviteFriendUI_CheckInviteListComplete:this.OpenList(),e.UI_List_InviteFriend.visible=!0,e.UI_Txt_CheckTip.visible=!1;break;case NotificationNames.InviteFriendUI_RefreshFriendListInfo:for(var i=t.getBody(),n=this.GetOrderedInviteList(),o=0;o<n.length;o++){var r=n[o];if(r.friendOpenID==i){e.UI_List_InviteFriend.changeItem(o,r);break}}break;case NotificationNames.InviteFriendUI_LotteryResult:var a=t.getBody();AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_03),-1!=a&&this.lotteryResultList.push(a);break;case NotificationNames.InviteFriendUI_RefreshLotteryNum:var s=t.getBody();this.localLotteryMaxNum+=s,this.CheckLotteryClickEnable()}},n.prototype.InitList=function(){var t=this.GetView();t.UI_List_InviteFriend.itemRender=InviteVerifyItem,t.UI_List_InviteFriend.hScrollBarSkin="",t.UI_List_InviteFriend.renderHandler=new Handler(this,this.RenderItem),t.UI_List_InviteFriend.array=[]},n.prototype.RenderItem=function(t,e){var i=t.dataSource;t.RenderItem(i,e)},n.prototype.OpenList=function(){for(var t=this.GetView(),e=this.GetOrderedInviteList(),i=this.GetListLength(e.length),n=0,o=0;o<i;o++)o<i-1?(t.UI_List_InviteFriend.addItem(e[o]),e[o].rewardGained>=2&&n++):t.UI_List_InviteFriend.addItem(null);t.UI_Txt_InviteNum.text=e.length.toString(),t.UI_Txt_VerifyNum.text=n.toString()},n.prototype.CloseList=function(){for(var t=this.GetView(),e=t.UI_List_InviteFriend.length,i=0;i<e;i++)t.UI_List_InviteFriend.deleteItem(0)},n.prototype.GetListLength=function(t){return t+1},n.prototype.GetOrderedInviteList=function(){return GameDataManager.getInstance().LoginPlayerInfo.InvitedList},n.prototype.InitLottery=function(){var t=this.GetView();this.lotteryBoxArray=new Array,this.lotteryBoxArray.push(t.UI_LotteryBox_0),this.lotteryBoxArray.push(t.UI_LotteryBox_1),this.lotteryBoxArray.push(t.UI_LotteryBox_2),this.lotteryBoxArray.push(t.UI_LotteryBox_3),this.lotteryBoxArray.push(t.UI_LotteryBox_4),this.lotteryBoxArray.push(t.UI_LotteryBox_5),this.lotteryBoxArray.push(t.UI_LotteryBox_6),this.lotteryBoxArray.push(t.UI_LotteryBox_7),this.lotteryBoxArray.push(t.UI_LotteryBox_8),this.lotteryBoxArray.push(t.UI_LotteryBox_9),this.lotteryBoxArray.push(t.UI_LotteryBox_10),this.lotteryBoxArray.push(t.UI_LotteryBox_11);for(var e=0;e<this.lotteryBoxArray.length;e++){var i=this.lotteryBoxArray[e],n=ConfigManager.GetInstance().GetLotteryRewardConfig(e+1),o=new LotteryItem;i.addChild(o),o.centerX=0,o.centerY=0,o.InitItem(n.rewardSkin,0,120)}this.lotteryResultList=new Array,this.lotteryFailFloatTipGroupID=FloatTipAnimManager.Instance.CreateTipGroup(EnumFloatAnimType.LotteryTip)},n.prototype.OpenLottery=function(){var t=this.GetView();LotteryManager.Instance.InitLottery_Gird(this.lotteryBoxArray,0),this.localLotteryMaxNum=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.lotteryNum,this.localLotteryNum=0,this.CheckLotteryClickEnable(),t.UI_Txt_InviteNum.text="",t.UI_Txt_VerifyNum.text=""},n.prototype.CloseLottery=function(){LotteryManager.Instance.CloseLottery_Gird()},n.prototype.CheckLotteryClickEnable=function(){var t=this.GetView();t.UI_Btn_Lottery.label=this.localLotteryMaxNum.toString(),t.UI_Btn_Lottery.disabled=this.localLotteryMaxNum<=0},n.prototype.LotteryTimeUp=function(){var e=this;if(this.sendNotification(NotificationNames.UI_RefreshMoneyInfo),this.lotteryResultList.length==this.localLotteryNum){for(var i=new Array,n=0;n<this.lotteryResultList.length;n++){var o=this.lotteryResultList[n];i.push(o)}LotteryManager.Instance.LotterySpeedDown_Gird(this.lotteryResultList[this.lotteryResultList.length-1]-1,cbhandler.gen_handler(function(){e.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.LotteryRewardUIParam(i))},this))}else{Log.Debug("抽奖失败提示"),FloatTipAnimManager.Instance.AddTip(this.lotteryFailFloatTipGroupID,"网络不好，请重试",new Vec2(150,150),this.GetView().UI_Btn_Lottery),LotteryManager.Instance.LotteryStop_Gird();var r=this.localLotteryNum-this.lotteryResultList.length;this.localLotteryMaxNum+=r,this.localLotteryNum-=r,this.CheckLotteryClickEnable()}this.lotteryResultList=new Array,this.localLotteryNum=0},n}(t.BaseUICtrl);e.InviteVerifyFriendUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.LeaderboardUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.tweenTask=-1},n.prototype.BeforeUIOpen=function(t){var i=this;if(void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t),CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getOpenDataContext();WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.LEADERBOARDUI_OPEN}),Laya.timer.once(400,this,this.LoopRenderCanvas)}var n=this.GetView();n.UI_Img_Scale.scale(0,0),this.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleUpTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,onComplete:cbhandler.gen_handler(function(){i.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){i.tweenTask=-1},i)})},this)})},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(0,!0)),CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShowBannerAd()},n.prototype.OnUIHide=function(){if(e.prototype.OnUIHide.call(this),CommonUtil.OnMiniGame()){Laya.Browser.window.wx.getOpenDataContext();WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.LEADERBOARDUI_CLOSE}),Laya.timer.clear(this,this.LoopRenderCanvas),null!=this.sharedCanvas&&void 0!=this.sharedCanvas&&(this.sharedCanvas.bitmap.alwaysChange=!1),this.GetView().UI_Img_SharedCanvas.graphics.clear(),this.GetView().UI_Img_SharedCanvas.skin=""}this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(0,!1)),-1!=this.tweenTask&&(Tween2DUtil.kill(this.tweenTask),this.tweenTask=-1),CommonUtil.OnMiniGame()&&WechatUtil.getIntance().HideBannerAd()},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this);var t=this.GetView();t.UI_Btn_Cancel.on(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_Invite_Friend.on(Laya.Event.CLICK,this,this.OnUI_Btn_Invite_FriendClick),t.UI_Img_SharedCanvas.on(Laya.Event.MOUSE_DOWN,this,this.OnPanelMouseDown),t.UI_Img_SharedCanvas.on(Laya.Event.MOUSE_MOVE,this,this.OnPanelMouseMove),t.UI_Img_SharedCanvas.on(Laya.Event.MOUSE_UP,this,this.OnPanelMouseUp),t.UI_Img_SharedCanvas.on(Laya.Event.MOUSE_OUT,this,this.OnPanelMouseOut)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName());var t=this.GetView();t.UI_Btn_Cancel.off(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_Invite_Friend.off(Laya.Event.CLICK,this,this.OnUI_Btn_Invite_FriendClick),t.UI_Img_SharedCanvas.off(Laya.Event.MOUSE_DOWN,this,this.OnPanelMouseDown),t.UI_Img_SharedCanvas.off(Laya.Event.MOUSE_MOVE,this,this.OnPanelMouseMove),t.UI_Img_SharedCanvas.off(Laya.Event.MOUSE_UP,this,this.OnPanelMouseUp),t.UI_Img_SharedCanvas.off(Laya.Event.MOUSE_OUT,this,this.OnPanelMouseOut)},n.prototype.OnUI_Btn_CancelClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.LeaderboardUIID)},n.prototype.OnUI_Btn_Invite_FriendClick=function(){CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShareWithPicAndTitle(ResPathConst.SHARE_PIC[0],"虫子来袭，消灭它们！",null,null,WechatConstDefine.LOGIN_QUERY_KEY+"="+GameDataManager.getInstance().LoginPlayerInfo.OpenID)},n.prototype.OnPanelMouseDown=function(){this.mouseY=Laya.stage.mouseY,this.mouseDown=!0},n.prototype.OnPanelMouseMove=function(){if(this.mouseDown){var t=Laya.stage.mouseY,e=t-this.mouseY;CommonUtil.OnMiniGame()&&WechatUtil.wxPostMessage({cmd:OpenDataContextCmdDefine.LEADERBOARDUI_DRAG,deltaY:e}),this.mouseY=t}},n.prototype.OnPanelMouseUp=function(){this.mouseDown=!1},n.prototype.OnPanelMouseOut=function(){this.mouseDown=!1},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n.prototype.LoopRenderCanvas=function(){var t=this.GetView();Laya.Browser.window.sharedCanvas.width=t.UI_Img_SharedCanvas.width,Laya.Browser.window.sharedCanvas.height=t.UI_Img_SharedCanvas.height,this.sharedCanvas=new Laya.Texture(Laya.Browser.window.sharedCanvas),this.sharedCanvas.bitmap.alwaysChange=!0,t.UI_Img_SharedCanvas.graphics.drawTexture(this.sharedCanvas,0,0,this.sharedCanvas.width,this.sharedCanvas.height)},n}(t.BaseUICtrl);e.LeaderboardUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.boxPos_Homepage_Top=820,i.boxPos_Battle_Top=90,i.boxPos_Result_Top=1e3,i.animTime_Homepage=.5,i.animTime_Battle=.5,i.animTime_Result=.5,i.lastTextPosX=376,i.firstTextPosX=-298,i.animTime=1,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.LevelUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height,o.GetView().UI_Box_Level.centerX=0});var r=this.GetView();this.LevelTextArray=new Array;for(var a=0;a<4;a++){var s=new Laya.Label;s.color="#FFFFFF",s.font="黑体",s.bold=!0,s.fontSize=30,s.align="center",s.valign="middle",s.anchorX=.5,s.anchorY=.5,s.width=100,s.height=70,r.UI_Box_Level.addChild(s),s.centerY=0,this.LevelTextArray.push(s)}this.animTask=-1,this.levelTask=new Array(-1,-1,-1,-1)},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName())},n.prototype.listNotificationInterests=function(){return[NotificationNames.LevelUI_PlayAnim]},n.prototype.handleNotification=function(t){this.GetView();switch(t.getName()){case NotificationNames.LevelUI_PlayAnim:var e=t.getBody();this.PlayAnim(e)}},n.prototype.ShowCurLevel=function(t){this.LevelTextArray[0].alpha=t>1?1:0,this.LevelTextArray[1].alpha=1,this.LevelTextArray[2].alpha=t<ConfigManager.GetInstance().GetLevelMax()?1:0,this.LevelTextArray[3].alpha=0;for(var e=0;e<this.LevelTextArray.length;e++){var i=this.LevelTextArray[e];i.text=(t+e-1).toString(),i.fontSize=t+e-1>=1e3?30:t+e-1>=100&&t+e-1<1e3?40:45,this.SetLabelPos(i,e+1)}},n.prototype.ShowAimLevel=function(t){var e=this;this.CancelLevelAnim(),this.ShowCurLevel(t);var i=this.GetView();this.levelTask[0]=Tween2DUtil.getInst().to({node:this.LevelTextArray[0],duration:this.animTime,x:this.firstTextPosX,alpha:0,onComplete:cbhandler.gen_handler(function(){e.levelTask[0]=-1},this)}),this.levelTask[1]=Tween2DUtil.getInst().to({node:this.LevelTextArray[1],duration:this.animTime,x:i.UI_Img_Prev.x,y:i.UI_Img_Prev.y,alpha:1,onComplete:cbhandler.gen_handler(function(){e.levelTask[1]=-1},this)}),this.levelTask[2]=Tween2DUtil.getInst().to({node:this.LevelTextArray[2],duration:this.animTime,x:i.UI_Img_Cur.x,y:i.UI_Img_Cur.y,alpha:1,onComplete:cbhandler.gen_handler(function(){e.levelTask[2]=-1},this)}),this.levelTask[3]=Tween2DUtil.getInst().to({node:this.LevelTextArray[3],duration:this.animTime,x:i.UI_Img_Next.x,y:i.UI_Img_Next.y,alpha:1,onComplete:cbhandler.gen_handler(function(){e.levelTask[3]=-1},this)})},n.prototype.SetLabelPos=function(t,e){var i=this.GetView();switch(e){case 0:t.x=this.firstTextPosX,t.centerY=i.UI_Img_Prev.centerY;break;case 1:t.x=i.UI_Img_Prev.x,t.centerY=i.UI_Img_Prev.centerY;break;case 2:t.x=i.UI_Img_Cur.x,t.centerY=i.UI_Img_Cur.centerY;break;case 3:t.x=i.UI_Img_Next.x,t.centerY=i.UI_Img_Next.centerY;break;case 4:t.x=this.lastTextPosX}},n.prototype.PlayAnim=function(t){var e=this.GetView();switch(this.CancelAnim(),this.CancelLevelAnim(),t.LevelAnimType){case EnumLevelUIAnimType.HomePage:Log.Debug("LevelUI 主页"),e.visible=!0,this.animTask=Tween2DUtil.getInst().to({node:e.UI_Box_Level,duration:this.animTime_Homepage,top:this.boxPos_Homepage_Top,scalex:1.2,scaley:1.2}),this.ShowCurLevel(t.curLevel);break;case EnumLevelUIAnimType.Battle:Log.Debug("LevelUI 战斗"),e.visible=!0,Tween2DUtil.getInst().to({node:e.UI_Box_Level,duration:this.animTime_Battle,top:this.boxPos_Battle_Top,scalex:1,scaley:1}),this.ShowCurLevel(t.curLevel);break;case EnumLevelUIAnimType.Result_Win:Log.Debug("LevelUI 结算 胜利"),e.visible=!1;break;case EnumLevelUIAnimType.Result_Lose:Log.Debug("LevelUI 结算 失败"),e.visible=!1}},n.prototype.CancelAnim=function(){-1!=this.animTask&&(Tween2DUtil.getInst().kill(this.animTask),this.animTask=-1)},n.prototype.CancelLevelAnim=function(){for(var t=0;t<this.levelTask.length;t++)-1!=this.levelTask[t]&&(Tween2DUtil.getInst().kill(this.levelTask[t]),this.levelTask[t]=-1)},n}(t.BaseUICtrl);e.LevelUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.ProgressWidth_Max=741,i.ProgressWidth_Min=0,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.LoadingUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName())},n.prototype.listNotificationInterests=function(){return[NotificationNames.LoadingUI_Progress]},n.prototype.handleNotification=function(t){switch(t.getName()){case NotificationNames.LoadingUI_Progress:var e=t.getBody();this.SetProgress(e),e>=1&&(this.GetView().UI_Box_Progress.visible=!1)}},n.prototype.SetProgress=function(t){var e=this.GetView();e.UI_Progress_Mask.width=this.ProgressWidth_Min+(this.ProgressWidth_Max-this.ProgressWidth_Min)*t,e.UI_Txt_Progress.text=Math.floor(100*t)+"%"},n}(t.BaseUICtrl);e.LoadingUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.LotteryResultUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.InitList(),this.itemPool=new Array},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);for(var i=t,n=new Array,o=0;o<i.rewardConfigList.length;o++){for(var r=i.rewardConfigList[o],a=!1,s=0;s<n.length;s++){(l=n[s]).configID==r&&(l.num+=1,a=!0)}if(!a){var l={configID:r,num:1};n.push(l)}}var h=this.GetView();h.UI_List_LotteryReward.array=n,n.length<5?(h.UI_List_LotteryReward.height=150,h.UI_List_LotteryReward.width=150*n.length):(h.UI_List_LotteryReward.height=300,h.UI_List_LotteryReward.width=600)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this);for(var t=this.GetView(),i=t.UI_List_LotteryReward.length,n=0;n<i;n++)t.UI_List_LotteryReward.deleteItem(0);t.UI_List_LotteryReward.array=null},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Back.on(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Back.off(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick)},n.prototype.OnUI_Btn_BackClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.LotteryResultUIID)},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n.prototype.InitList=function(){var t=this.GetView();t.UI_List_LotteryReward.itemRender=LotteryItem,t.UI_List_LotteryReward.renderHandler=new Handler(this,this.RenderItem),t.UI_List_LotteryReward.vScrollBarSkin=""},n.prototype.RenderItem=function(t,e){var i=t.dataSource,n=ConfigManager.GetInstance().GetLotteryRewardConfig(i.configID);t.InitItem(n.rewardSkin,i.num,150)},n.prototype.CreateItem=function(){var t=this.itemPool.pop();return t||(t=new LotteryItem),t},n.prototype.DeleteItem=function(t){t.removeSelf(),this.itemPool.push(t)},n}(t.BaseUICtrl);e.LotteryResultUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.checkNum=10,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.LotteryRewardHistUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.InitList()},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.page=1,this.checking=!0,this.allData=!1,HttpMessageSender.GetSender().SendCheckLotteryRewardHistroy(GameDataManager.getInstance().GetLoginPlayerID(),this.page,this.checkNum)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this);for(var t=this.GetView(),i=t.UI_List_Hist.length,n=0;n<i;n++)t.UI_List_Hist.deleteItem(0);t.UI_List_Hist.array=[]},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){var t=this.GetView();i.getInstance().registerMediator(this),t.UI_Btn_Back.on(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick),t.UI_List_Hist.on(Laya.Event.MOUSE_DOWN,this,this.OnListMouseDown),t.UI_List_Hist.on(Laya.Event.MOUSE_MOVE,this,this.OnListMouseMove),t.UI_List_Hist.on(Laya.Event.MOUSE_UP,this,this.OnListMouseUp),t.UI_List_Hist.on(Laya.Event.MOUSE_OUT,this,this.OnListMouseOut)},n.prototype.RemoveEvent=function(){var t=this.GetView();i.getInstance().removeMediator(this.getMediatorName()),t.UI_Btn_Back.off(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick),t.UI_List_Hist.on(Laya.Event.MOUSE_DOWN,this,this.OnListMouseDown),t.UI_List_Hist.on(Laya.Event.MOUSE_MOVE,this,this.OnListMouseMove),t.UI_List_Hist.on(Laya.Event.MOUSE_UP,this,this.OnListMouseUp),t.UI_List_Hist.on(Laya.Event.MOUSE_OUT,this,this.OnListMouseOut)},n.prototype.OnUI_Btn_BackClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.LotteryRewardHistUIID)},n.prototype.OnListMouseDown=function(){this.mouseDown=!0},n.prototype.OnListMouseMove=function(){this.mouseDown&&!this.allData&&!this.checking&&this.GetView().UI_List_Hist.scrollBar.value>=1&&(this.checking=!0,this.page+=1,HttpMessageSender.GetSender().SendCheckLotteryRewardHistroy(GameDataManager.getInstance().GetLoginPlayerID(),this.page,this.checkNum))},n.prototype.OnListMouseUp=function(){this.mouseDown=!1},n.prototype.OnListMouseOut=function(){this.mouseDown=!1},n.prototype.listNotificationInterests=function(){return[NotificationNames.LotteryRewardHistUI_CheckResult]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.LotteryRewardHistUI_CheckResult:var i=t.getBody();if(0==i.result?(this.checking=!1,this.page-=1):1==i.result?(this.checking=!1,this.allData=!1):2==i.result&&(this.checking=!1,this.allData=!0),i.rewardHistList)for(var n=0;n<i.rewardHistList.length;n++){var o=i.rewardHistList[n];e.UI_List_Hist.addItem(o)}}},n.prototype.InitList=function(){var t=this.GetView();t.UI_List_Hist.itemRender=LotteryHistItem,t.UI_List_Hist.vScrollBarSkin="",t.UI_List_Hist.renderHandler=new Handler(this,this.RenderItem),t.UI_List_Hist.array=[]},n.prototype.RenderItem=function(t,e){var i=t.dataSource;t.RenderItem(i,e)},n}(t.BaseUICtrl);e.LotteryRewardHistUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.ProgressWidth_Max=151,i.ProgressWidth_Min=0,i.uiAnimTime=1,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.MoneyInfoUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.powerTimeTask=-1,this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.wechatTop=WechatUtil.getIntance().WechatTop()},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);this.GetView().UI_Anchor_Top.top=-110},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=this.GetView();Tween2DUtil.to({node:i.UI_Anchor_Top,duration:this.uiAnimTime,top:0+this.wechatTop}),this.RefreshMoneyInfo()},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),-1!=this.powerTimeTask&&(TimeManager.getInst().remove(this.powerTimeTask),this.powerTimeTask=-1)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Add_Coin.on(Laya.Event.CLICK,this,this.OnUI_Btn_Add_CoinClick),this.GetView().UI_Btn_Add_Power.on(Laya.Event.CLICK,this,this.OnUI_Btn_Add_PowerClick),this.GetView().UI_Btn_Add_Diamond.on(Laya.Event.CLICK,this,this.OnUI_Btn_Add_DiamondClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Add_Coin.off(Laya.Event.CLICK,this,this.OnUI_Btn_Add_CoinClick),this.GetView().UI_Btn_Add_Power.off(Laya.Event.CLICK,this,this.OnUI_Btn_Add_PowerClick),this.GetView().UI_Btn_Add_Diamond.off(Laya.Event.CLICK,this,this.OnUI_Btn_Add_DiamondClick)},n.prototype.OnUI_Btn_Add_CoinClick=function(){this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Coin)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_Add_PowerClick=function(){this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Power)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_Add_DiamondClick=function(){0==GameDataManager.getInstance().InviteType?(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)):0==GameDataManager.getInstance().LoginPlayerInfo.VerifyInfo.state?this.sendNotification(NotificationNames.OPENUI,t.UIID.VerifyUIID):(this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteVerifyFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.listNotificationInterests=function(){return[NotificationNames.UI_RefreshMoneyInfo]},n.prototype.handleNotification=function(t){switch(t.getName()){case NotificationNames.UI_RefreshMoneyInfo:this.RefreshMoneyInfo()}},n.prototype.RefreshMoneyInfo=function(){var t=this.GetView();t.UI_Txt_Coin.text=GameDataUtil.NumberToString(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum),t.UI_Txt_Diamond.text=GameDataUtil.NumberToString(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.diamondNum),t.UI_Txt_Power.text=GameDataUtil.NumberToString(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum);var e=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum<ConstDefine.MaxValue_Power;t.UI_Txt_PowerCount.visible=e,e&&-1==this.powerTimeTask&&(this.SecondLoopPower(),this.powerTimeTask=TimeManager.getInst().loop(1,cbhandler.gen_handler(this.SecondLoopPower,this)));var i=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum/ConstDefine.MaxValue_Power;i>1?i=1:i<0&&(i=0),this.SetProgress(i)},n.prototype.SecondLoopPower=function(){var t=ConstDefine.PowerReviewTime-(Math.floor(Date.now()/1e3)-GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.latestPointRefreshTime),e=this.GetView();t>=0&&(e.UI_Txt_PowerCount?e.UI_Txt_PowerCount.text=GameDataUtil.ConvertSecondToTimeStr(t,!1)+" +1":Log.Error("MoneyInfoUICtl.ts -secondLoopPower() - view.UI_Txt_PowerCount")),t<=0&&(-1!=this.powerTimeTask&&(TimeManager.getInst().remove(this.powerTimeTask),this.powerTimeTask=-1),GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum<ConstDefine.MaxValue_Power&&HttpMessageSender.GetSender().SendGainPointByTime(GameDataManager.getInstance().LoginPlayerInfo.OpenID))},n.prototype.SetProgress=function(t){this.GetView().UI_Img_Power_Mask.width=this.ProgressWidth_Min+(this.ProgressWidth_Max-this.ProgressWidth_Min)*t},n}(t.BaseUICtrl);e.MoneyInfoUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.MoreSpawnUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t),this.data=t,this.data&&this.InitLayout()},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Normal.on(Laya.Event.CLICK,this,this.OnUI_Btn_NormalClick),this.GetView().UI_Btn_More.on(Laya.Event.CLICK,this,this.OnUI_Btn_MoreClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Normal.off(Laya.Event.CLICK,this,this.OnUI_Btn_NormalClick),this.GetView().UI_Btn_More.off(Laya.Event.CLICK,this,this.OnUI_Btn_MoreClick)},n.prototype.OnUI_Btn_NormalClick=function(){this.GetView().UI_Btn_Normal.mouseEnabled=!1,this.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!0);var e=StorageManager.GetSpawnMoneyNum();HttpMessageSender.GetSender().SendGainMoneySpawn(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.data.spawnID,e,1,null,function(){i.instance.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!1)}),this.sendNotification(NotificationNames.HIDEUI,t.UIID.MoreSpawnUIID)},n.prototype.OnUI_Btn_MoreClick=function(){var e=this;this.GetView().UI_Btn_More.mouseEnabled=!1,this.video?WechatUtil.getIntance().ShowVideoAd(cbhandler.gen_handler(function(){AudioManager.GetInstance().StopAllSound(),AudioManager.GetInstance().StopMusic()},this),cbhandler.gen_handler(function(t){t?e.HandleVideoSuccess():WechatUtil.getIntance().LoadVideoAd(cbhandler.gen_handler(e.ReloadAdCallback,e),cbhandler.gen_handler(e.ReloadAdCallback,e))},this)):CommonUtil.OnMiniGame()?WechatUtil.getIntance().ShareWithPicAndTitle(ResPathConst.SHARE_PIC[0],"虫子来袭，消灭它们！",function(){e.HandleShareSuccess()}):this.HandleShareSuccess(),this.sendNotification(NotificationNames.HIDEUI,t.UIID.MoreSpawnUIID)},n.prototype.listNotificationInterests=function(){return[NotificationNames.MoreSpawnUI_Hide]},n.prototype.handleNotification=function(e){switch(e.getName()){case NotificationNames.MoreSpawnUI_Hide:this.GetView().visible&&this.sendNotification(NotificationNames.HIDEUI,t.UIID.MoreSpawnUIID)}},n.prototype.InitLayout=function(){if(this.data){var t=this.GetView();if(CommonUtil.OnMiniGame()&&WechatUtil.getIntance().WxVideoAdReady){var e=Math.random();this.video=e<.5}else this.video=!1;t.UI_Txt_Tip.text=this.video?"观看视频广告可以五倍领取":"分享给好友可以十倍领取",t.UI_Btn_More.label=this.video?"五倍领取":"十倍领取",t.UI_Btn_More.mouseEnabled=!0,t.UI_Btn_Normal.mouseEnabled=!0}},n.prototype.ReloadAdCallback=function(){var t=this.GetView();this.video=WechatUtil.getIntance().WxVideoAdReady,this.InitLayout(),t.UI_Btn_More.mouseEnabled=!0,t.UI_Btn_Normal.mouseEnabled=!0},n.prototype.HandleVideoSuccess=function(){AudioManager.GetInstance().PlayMusicByID(EnumSoundID.sound_bg_bg_01),this.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!0);var t=StorageManager.GetSpawnMoneyNum();HttpMessageSender.GetSender().SendGainMoneySpawn(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.data.spawnID,t,5,null,function(){i.instance.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!1)})},n.prototype.HandleShareSuccess=function(){this.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!0);var t=StorageManager.GetSpawnMoneyNum();HttpMessageSender.GetSender().SendGainMoneySpawn(GameDataManager.getInstance().LoginPlayerInfo.OpenID,this.data.spawnID,t,10,null,function(){i.instance.sendNotification(NotificationNames.HomepageUI_PlaySpawnAnim,!1)})},n}(t.BaseUICtrl);e.MoreSpawnUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.progressMinValue=30,i.progressMaxValue=i.GetView().img_progressBG.height-12,Log.Debug("ProgressUI 进度条长度初始化：",i.progressMinValue,i.progressMaxValue),i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.ProgressUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=0,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(){e.prototype.BeforeUIOpen.call(this),this.UpdateProgress(0)},n.prototype.OnUIOpened=function(){e.prototype.OnUIOpened.call(this)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.UpdateProgress(0)},n.prototype.BeforeUIDestroy=function(){this.RemoveEvent()},n.prototype.OnUIDestroy=function(){},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName())},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n.prototype.UpdateProgress=function(t){this.GetView().img_progress.height=this.RatioConvertToPixel(t),Log.Debug("ProgressUI ratio",t,this.RatioConvertToPixel(t)),this.GetView().txt_progress.text=Math.floor(100*t).toString()+"%"},n.prototype.RatioConvertToPixel=function(t){return(this.progressMaxValue-this.progressMinValue)*t+this.progressMinValue},n}(t.BaseUICtrl);e.ProgressUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.RebornUIID.toString(),t.UIMediator.GetInstance().uiParentMoneyAnim.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth+1e9,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t);var i=this.GetView();this.videoAdWatched=!1,CommonUtil.OnMiniGame()&&!WechatUtil.getIntance().WxVideoAdReady?(i.UI_Btn_Reborn.visible=!1,WechatUtil.getIntance().LoadVideoAd()):this.VideoReady()},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),TimeManager.getInst().remove(this.timeLoopTask),TimeManager.getInst().remove(this.timeUpTask)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Reborn.on(Laya.Event.CLICK,this,this.OnUI_Btn_RebornClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Reborn.off(Laya.Event.CLICK,this,this.OnUI_Btn_RebornClick)},n.prototype.OnUI_Btn_RebornClick=function(){this.GetView().UI_Btn_Reborn.mouseEnabled=!1,TimeManager.getInst().remove(this.timeLoopTask),TimeManager.getInst().remove(this.timeUpTask),CommonUtil.OnMiniGame()?this.VideoPlay():this.RebornSuccess()},n.prototype.listNotificationInterests=function(){return[NotificationNames.WeChat_VideoAd_Load_Success,NotificationNames.WeChat_VideoAd_Load_Fail,NotificationNames.WeChat_VideoAd_OnClose]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.WeChat_VideoAd_Load_Success:if(!e.visible)break;if(this.videoAdWatched){Log.Debug("RebornUI 视频已观看，不再重复处理");break}Log.Debug("RebornUI 视频拉取成功"),this.VideoReady();break;case NotificationNames.WeChat_VideoAd_Load_Fail:if(!e.visible)break;Log.Debug("RebornUI 视频拉取失败"),this.TimeUpHandler();break;case NotificationNames.WeChat_VideoAd_OnClose:if(!e.visible)break;e.UI_Btn_Reborn.mouseEnabled=!0;var i=t.getBody();Log.Debug("RebornUI 视频观看完成，isEnd：",i),i?(this.videoAdWatched=!0,AudioManager.GetInstance().PauseBG(!1),this.RebornSuccess()):(this.TimeUpHandler(),WechatUtil.getIntance().LoadVideoAd())}},n.prototype.VideoReady=function(){var t=3,e=this.GetView();e.UI_Txt_Second.text=t.toString(),e.UI_Btn_Reborn.visible=!0,this.timeLoopTask=TimeManager.getInst().loopTimes(1,3,cbhandler.gen_handler(function(){Log.Debug("timeLoopTask"),t--,e.UI_Txt_Second.text=t.toString()},this),!0),this.timeUpTask=TimeManager.getInst().once(3,cbhandler.gen_handler(this.TimeUpHandler,this),!0)},n.prototype.VideoPlay=function(){this.GetView();WechatUtil.getIntance().ShowVideoAd(cbhandler.gen_handler(function(){AudioManager.GetInstance().StopAllSound(),AudioManager.GetInstance().PauseBG(!0)},this))},n.prototype.RebornSuccess=function(){Log.Debug("RebornUI reborn success");var e=StorageManager.GetRebornNum();StorageManager.SetRebornNum(e-1),this.sendNotification(NotificationNames.HIDEUI,t.UIID.RebornUIID),this.sendNotification(NotificationNames.MAIN_PLAYER_REBORN,!0)},n.prototype.TimeUpHandler=function(){Log.Debug("timeUpTask"),this.sendNotification(NotificationNames.MAIN_PLAYER_REBORN,!1)},n}(t.BaseUICtrl);e.RebornUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.gainLuckyReward=!1,i.completeType=EnumCompleteType.None,i.win=!1,i.gainPointResult=!1,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.ResultUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.completeType=EnumCompleteType.None,this.timeTaskList=new Array},n.prototype.BeforeUIOpen=function(i){void 0===i&&(i=null),e.prototype.BeforeUIOpen.call(this,i),this.gainPointResult=!1;var n=i;this.InitLayout(n.win),this.sendNotification(NotificationNames.HIDEUI,t.UIID.BattleUIID)},n.prototype.OnUIOpened=function(i){void 0===i&&(i=null),e.prototype.OnUIOpened.call(this,i),this.sendNotification(NotificationNames.OPENUI,t.UIID.MoneyInfoUIID);var n=new LevelUIAnimParam;n.LevelAnimType=this.win?EnumLevelUIAnimType.Result_Win:EnumLevelUIAnimType.Result_Lose,n.curLevel=GameDataManager.getInstance().LoginPlayerInfo.CurLevel,this.sendNotification(NotificationNames.LevelUI_PlayAnim,n),this.lucky=1;this.GetView();CommonUtil.OnMiniGame()&&WechatUtil.getIntance().ShowBannerAd(),AudioManager.GetInstance().StopMusic(),this.GetView().box_AllUi.visible=!0},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.completeType=EnumCompleteType.None,CommonUtil.OnMiniGame()&&WechatUtil.getIntance().HideBannerAd();for(var t=0;t<this.timeTaskList.length;t++){var i=this.timeTaskList.pop();-1!=i&&TimeManager.getInst().remove(i)}this.timeTaskList=new Array,this.GetView().UI_Eft_DoubleCoinScale.isPlaying&&this.GetView().UI_Eft_DoubleCoinScale.stop(),AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_function_numberup)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Continue.on(Laya.Event.CLICK,this,this.OnUI_Btn_ContinueClick),this.GetView().UI_Btn_GameOver.on(Laya.Event.CLICK,this,this.OnUI_Btn_GameOverClick),this.GetView().UI_Btn_Lucky.on(Laya.Event.CLICK,this,this.OnUI_Btn_LuckyClick),this.GetView().UI_Btn_Replay.on(Laya.Event.CLICK,this,this.OnUI_Btn_ReplayClick),this.GetView().ani2.on(Laya.Event.COMPLETE,this,this.onAni),this.GetView().ani3.on(Laya.Event.COMPLETE,this,this.onAni),this.GetView().UI_Btn_Setting.on(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Continue.off(Laya.Event.CLICK,this,this.OnUI_Btn_ContinueClick),this.GetView().UI_Btn_GameOver.off(Laya.Event.CLICK,this,this.OnUI_Btn_GameOverClick),this.GetView().UI_Btn_Lucky.off(Laya.Event.CLICK,this,this.OnUI_Btn_LuckyClick),this.GetView().UI_Btn_Replay.off(Laya.Event.CLICK,this,this.OnUI_Btn_ReplayClick),this.GetView().UI_Btn_Setting.off(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick)},n.prototype.OnUI_Btn_ContinueClick=function(){var t=this;this.completeType=EnumCompleteType.Continue;var e=this.GetView();e.UI_Btn_Continue.mouseEnabled=!1,e.UI_Btn_GameOver.mouseEnabled=!1,e.UI_Btn_Lucky.mouseEnabled=!1,e.UI_Btn_Replay.mouseEnabled=!1;var i=GameDataManager.getInstance().LevelInfo.CurLevelID+1;ConfigManager.GetInstance().GetLevelConfig(i)?HttpMessageSender.GetSender().SendMatchComplete(GameDataManager.getInstance().GetLoginPlayerID(),GameDataManager.getInstance().LevelInfo.CurLevelID,GameDataManager.getInstance().MatchInfo.GoldNum*this.lucky,null,function(){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=GameDataManager.getInstance().MatchInfo.GoldNum*t.lucky,t.sendNotification(NotificationNames.CONTINUE_NEXT_MATCH,i)}):Log.Warn("完成最后一关,没有下一关"),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_GameOverClick=function(){var t=this;this.completeType=EnumCompleteType.Finish;var e=this.GetView();e.UI_Btn_Continue.mouseEnabled=!1,e.UI_Btn_GameOver.mouseEnabled=!1,e.UI_Btn_Lucky.mouseEnabled=!1,e.UI_Btn_Replay.mouseEnabled=!1,HttpMessageSender.GetSender().SendMatchComplete(GameDataManager.getInstance().GetLoginPlayerID(),this.win?GameDataManager.getInstance().LevelInfo.CurLevelID:-1,GameDataManager.getInstance().MatchInfo.GoldNum*this.lucky,null,function(){t.win&&(GameDataManager.getInstance().LoginPlayerInfo.CurLevel=GameDataManager.getInstance().LevelInfo.NextLevelID),GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=GameDataManager.getInstance().MatchInfo.GoldNum,t.sendNotification(NotificationNames.MATCH_EXIT_COMMAND)}),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_LuckyClick=function(){this.completeType=EnumCompleteType.Lucky;this.GetView().UI_Btn_Lucky.mouseEnabled=!1;var t=StorageManager.GetResultLuckyNum();StorageManager.SetResultLuckyNum(t-1),CommonUtil.OnMiniGame()?this.VideoReady():this.VideoSuccess(),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_ReplayClick=function(){var e=this;if(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.pointNum<5)this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Power));else{this.completeType=EnumCompleteType.Replay;var i=this.GetView();i.UI_Btn_Continue.mouseEnabled=!1,i.UI_Btn_GameOver.mouseEnabled=!1,i.UI_Btn_Lucky.mouseEnabled=!1,i.UI_Btn_Replay.mouseEnabled=!1,HttpMessageSender.GetSender().SendMatchComplete(GameDataManager.getInstance().GetLoginPlayerID(),-1,GameDataManager.getInstance().MatchInfo.GoldNum*this.lucky,null,function(){GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+=GameDataManager.getInstance().MatchInfo.GoldNum*e.lucky,e.sendNotification(NotificationNames.CONTINUE_NEXT_MATCH,GameDataManager.getInstance().LevelInfo.CurLevelID)})}AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_01)},n.prototype.OnUI_Btn_SettingClick=function(){this.sendNotification(NotificationNames.OPENUI,t.UIID.SettingUIID)},n.prototype.listNotificationInterests=function(){return[NotificationNames.ResultUI_Finish,NotificationNames.ResultUI_GainPower,NotificationNames.WeChat_VideoAd_Load_Success,NotificationNames.WeChat_VideoAd_Load_Fail,NotificationNames.WeChat_VideoAd_OnClose]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.ResultUI_Finish:this.HandleComplete(),this.GetView().box_AllUi.visible=!1;break;case NotificationNames.ResultUI_GainPower:this.gainPointResult=!0;break;case NotificationNames.WeChat_VideoAd_Load_Success:if(!e.visible)break;Log.Debug("ResultUI 视频拉取成功");var i=StorageManager.GetResultLuckyNum();this.VideoLoadSucceedHandle(i);break;case NotificationNames.WeChat_VideoAd_Load_Fail:if(!e.visible)break;Log.Debug("ResultUI 视频拉取失败"),this.VideoLoadFailedHandle();break;case NotificationNames.WeChat_VideoAd_OnClose:if(!e.visible)break;var n=t.getBody();Log.Debug("ResultUI 视频观看完成，isEnd：",n),n?this.VideoSuccess():(e.UI_Btn_Lucky.mouseEnabled=!0,WechatUtil.getIntance().LoadVideoAd())}},n.prototype.InitLayout=function(t){this.win=t;var e=this.GetView();e.UI_Img_Win.visible=this.win,e.UI_Img_Lose.visible=!this.win,this.win?e.ani2.play(0,!1):e.ani3.play(0,!1),e.info.visible=!1,e.buttonBox.visible=!1,e.UI_Btn_Continue.visible=this.win,e.UI_Btn_Replay.visible=!this.win,e.UI_Btn_Continue.mouseEnabled=!0,e.UI_Btn_GameOver.mouseEnabled=!0,e.UI_Btn_Lucky.mouseEnabled=!0,e.UI_Btn_Replay.mouseEnabled=!0,e.UI_Txt_Coin.text=GameDataUtil.NumberToString(GameDataManager.getInstance().MatchInfo.GoldNum),e.UI_Img_Power.visible=t,e.UI_Txt_Power.text="5",this.SetHBoxWidth();var i=StorageManager.GetResultLuckyNum();this.videoAdWatched=!1,CommonUtil.OnMiniGame()&&!WechatUtil.getIntance().WxVideoAdReady?WechatUtil.getIntance().LoadVideoAd():e.UI_Btn_Lucky.disabled=!(i>0&&GameDataManager.getInstance().LuckyEnable),this.completeType=-1,this.win&&(HttpMessageSender.GetSender().SendGainPointByMatch(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.getInstance().LoginPlayerInfo.CurLevel),CommonUtil.OnMiniGame()&&WechatUtil.wxSetUserCloudStorage([{key:OpenDataContextKeyDefine.CURRENT_COMPLETE_LEVEL,value:GameDataManager.getInstance().LoginPlayerInfo.CurLevel.toString()},{key:OpenDataContextKeyDefine.PLAYER_OPENID,value:GameDataManager.getInstance().LoginPlayerInfo.OpenID.toString()}],Handler.create(this,function(t){Log.Debug("更新最高分成功",GameDataManager.getInstance().LoginPlayerInfo.CurLevel)}),Handler.create(this,function(t){Log.Debug("更新最高分失败,"+t)})))},n.prototype.HandleComplete=function(){var t=this;this.GetView();switch(this.completeType){case EnumCompleteType.Continue:if(GameDataManager.getInstance().MatchInfo.GoldNum>0){this.PlayCoinAnim(10);e=TimeManager.getInst().once(.8,cbhandler.gen_handler(function(){HttpMessageSender.GetSender().SendMatchStart(GameDataManager.getInstance().LoginPlayerInfo.OpenID)},this));this.timeTaskList.push()}else HttpMessageSender.GetSender().SendMatchStart(GameDataManager.getInstance().LoginPlayerInfo.OpenID);break;case EnumCompleteType.Finish:if(GameDataManager.getInstance().MatchInfo.GoldNum>0){this.PlayCoinAnim(10);e=TimeManager.getInst().once(.8,cbhandler.gen_handler(function(){t.sendNotification(NotificationNames.MATCH_EXIT_COMMAND)},this));this.timeTaskList.push(e)}else this.sendNotification(NotificationNames.MATCH_EXIT_COMMAND);break;case EnumCompleteType.Lucky:if(GameDataManager.getInstance().MatchInfo.GoldNum>0){this.PlayCoinAnim(20);e=TimeManager.getInst().once(.8,cbhandler.gen_handler(function(){t.sendNotification(NotificationNames.MATCH_EXIT_COMMAND)},this));this.timeTaskList.push(e)}else this.sendNotification(NotificationNames.MATCH_EXIT_COMMAND);break;case EnumCompleteType.Replay:if(GameDataManager.getInstance().MatchInfo.GoldNum>0){this.PlayCoinAnim(10);var e=TimeManager.getInst().once(.8,cbhandler.gen_handler(function(){HttpMessageSender.GetSender().SendMatchStart(GameDataManager.getInstance().LoginPlayerInfo.OpenID)},this));this.timeTaskList.push(e)}else HttpMessageSender.GetSender().SendMatchStart(GameDataManager.getInstance().LoginPlayerInfo.OpenID)}this.win&&this.PlayPointAnim()},n.prototype.PlayPointAnim=function(){var t=this.GetView(),e=CommonUtil2D.GetGlobalPosition(t.UI_Img_Power);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Power,5,new Vec2(e.x+30,e.y+30),new Vec2(ConstDefine.MoneyImgPos_Power.x,ConstDefine.MoneyImgPos_Power.y),500)},n.prototype.PlayCoinAnim=function(t){var e=this.GetView(),i=CommonUtil2D.GetGlobalPosition(e.UI_Img_Coin);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Coin,t,new Vec2(i.x+30,i.y+30),new Vec2(ConstDefine.MoneyImgPos_Coin.x,ConstDefine.MoneyImgPos_Coin.y),500)},n.prototype.VideoSuccess=function(){var t=this;this.lucky=2,AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_numberup);var e=this.GetView();e.UI_Eft_DoubleCoinScale.play(0,!0);var i=1,n=(this.lucky-i)/100,o=TimeManager.getInst().loopTimes(.008,100,cbhandler.gen_handler(function(){i+=n,e.UI_Txt_Coin.text=GameDataUtil.NumberToString(GameDataManager.getInstance().MatchInfo.GoldNum*i),i>=t.lucky-.01&&(e.UI_Eft_DoubleCoinScale.stop(),AudioManager.GetInstance().StopSoundByConfigID(EnumSoundID.sound_function_numberup))},this)),r=TimeManager.getInst().once(3,cbhandler.gen_handler(function(){},this));this.timeTaskList.push(o,r),e.UI_Btn_Lucky.disabled=!0,this.videoAdWatched=!0},n.prototype.VideoReady=function(){this.GetView();WechatUtil.getIntance().ShowVideoAd(cbhandler.gen_handler(function(){},this))},n.prototype.VideoLoadFailedHandle=function(){this.GetView().UI_Btn_Lucky.disabled=!0},n.prototype.VideoLoadSucceedHandle=function(t){var e=this.GetView();this.videoAdWatched?e.UI_Btn_Lucky.disabled=!0:e.UI_Btn_Lucky.disabled=!(t>0&&GameDataManager.getInstance().LuckyEnable)},n.prototype.SetHBoxWidth=function(){var t=this.GetView(),e=0;t.UI_Img_Coin.visible&&e++,t.UI_Img_Power.visible&&e++,t.UI_Img_Diamond.visible&&e++,t.UI_HBox_Reward.width=224*e+100*(e-1)},n.prototype.onAni=function(){this.GetView().buttonBox.visible=!0,this.GetView().info.visible=!0,this.GetView().ani1.play(0,!1)},n}(t.BaseUICtrl);e.ResultUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.SettingUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height})},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var i=this.GetView();i.UI_Tgl_Music.selected=StorageManager.GetMusicSetting(),i.UI_Tgl_Vibrate.selected=StorageManager.GetVibrateSetting(),this.SwitchTglImg(i.UI_Tgl_Music),this.SwitchTglImg(i.UI_Tgl_Vibrate)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),GameDataManager.getInstance().MatchInfo.IsGameEnd()||this.sendNotification(NotificationNames.PAUSE_MATCH,!0)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this),this.GetView().UI_Btn_Setting.on(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick),this.GetView().UI_Tgl_Music.on(Laya.Event.CLICK,this,this.OnUI_Tgl_MusicClick),this.GetView().UI_Tgl_Vibrate.on(Laya.Event.CLICK,this,this.OnUI_Tgl_VibrateClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName()),this.GetView().UI_Btn_Setting.off(Laya.Event.CLICK,this,this.OnUI_Btn_SettingClick),this.GetView().UI_Tgl_Music.off(Laya.Event.CLICK,this,this.OnUI_Tgl_MusicClick),this.GetView().UI_Tgl_Vibrate.off(Laya.Event.CLICK,this,this.OnUI_Tgl_VibrateClick)},n.prototype.OnUI_Btn_SettingClick=function(){GameDataManager.getInstance().MatchInfo.IsGameEnd()||this.sendNotification(NotificationNames.PAUSE_MATCH,!1),this.sendNotification(NotificationNames.DESTROYUI,t.UIID.SettingUIID)},n.prototype.OnUI_Tgl_MusicClick=function(){var t=this.GetView().UI_Tgl_Music.selected;AudioManager.GetInstance().SetMusicMute(!t),AudioManager.GetInstance().SetSoundMute(!t),this.SwitchTglImg(this.GetView().UI_Tgl_Music)},n.prototype.OnUI_Tgl_VibrateClick=function(){var t=this.GetView().UI_Tgl_Vibrate.selected;StorageManager.SetVibrateSetting(this.GetView().UI_Tgl_Vibrate.selected),this.SwitchTglImg(this.GetView().UI_Tgl_Vibrate),this.sendNotification(NotificationNames.BackgroundUI_StopShakeBg,t)},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n.prototype.SwitchTglImg=function(t){t.skin=t.selected?"resources/setting/interface_icon_button_01.png":"resources/setting/interface_icon_button_02.png"},n}(t.BaseUICtrl);e.SettingUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.switchFlag=0,i.sideWeaponPosY_Top_2=0,i.sideWeaponPosY_Top=260,i.sideWeaponPosY_Center=613,i.sideWeaponPosY_Bottom=1020,i.sideWeaponPosY_Bottom_2=1336,i.sideWeaponAnimTime=.5,i.rightBoxPosX_Start=-200,i.rightBoxPosX_End=0,i.arrowPosX_Start=-260,i.arrowPosX_End=0,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.UpgradeUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent();var r=this.GetView();r.on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.subWeaponLocateBoxArray=new Array;for(var a=0;a<r.UI_HBox_Location.numChildren;a++){var s=r.UI_HBox_Location.getChildAt(a);this.subWeaponLocateBoxArray.push(s)}this.upgradeItemPool=new Array,this.timeTaskArray=new Array,this.tweenTaskArray=new Array,this.subWeaponItemArray=new Array,this.testFloatTipGroupID=FloatTipAnimManager.Instance.CreateTipGroup(EnumFloatAnimType.UpgradeTip),this.floatTipGroup_L=FloatTipAnimManager.Instance.CreateTipGroup(EnumFloatAnimType.UpgradeTip),this.floatTipGroup_R=FloatTipAnimManager.Instance.CreateTipGroup(EnumFloatAnimType.UpgradeTip)},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var i=t;i&&this.InitUpgradeItem(i)},n.prototype.OnUIOpened=function(t){switch(void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.upgradeType){case EnumUpgradeUIType.Main:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(2,!0));break;case EnumUpgradeUIType.Sub:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(3,!0));break;case EnumUpgradeUIType.Money:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(4,!0))}},n.prototype.OnUIHide=function(){switch(e.prototype.OnUIHide.call(this),this.upgradeType){case EnumUpgradeUIType.Main:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(2,!1));break;case EnumUpgradeUIType.Sub:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(3,!1));break;case EnumUpgradeUIType.Money:this.sendNotification(NotificationNames.HomepageUI_SetBottomButtonState,new HomepageBottomButtonState(4,!1))}-1!=this.upgradeAnimTask&&TimeManager.getInst().remove(this.upgradeAnimTask),this.DeleteAllInfo()},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this);var t=this.GetView();t.UI_Btn_Cancel.on(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_UpgradeCost.on(Laya.Event.CLICK,this,this.OnUI_Btn_UpgradeCostClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName());var t=this.GetView();t.UI_Btn_Cancel.off(Laya.Event.CLICK,this,this.OnUI_Btn_CancelClick),t.UI_Btn_UpgradeCost.off(Laya.Event.CLICK,this,this.OnUI_Btn_UpgradeCostClick)},n.prototype.OnUI_Btn_CancelClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.UpgradeUIID)},n.prototype.OnUI_Btn_Upgrade_MainClick=function(){var e=GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo,n=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel+1);if(n.ID==e.evolveLevel+1&&e.level>=n.RequiredPowerLvl){(r=(o=n.RequiredGoldNumber)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum)?(this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!1,i.instance.sendNotification(NotificationNames.UpgradeUI_RefreshMainWeaponInfo,1),console.log("客户端金币："+GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum),HttpMessageSender.GetSender().SendWeaponEvolution(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.id,GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.evolveLevel,o)):this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Coin))}else{var o=GameDataUtil.Upgrade_Weapon_Main(GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level),r=o<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;r?(this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!1,i.instance.sendNotification(NotificationNames.UpgradeUI_RefreshMainWeaponInfo,1),HttpMessageSender.GetSender().SendUpgradeWeaopnLvl(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.id,GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo.level,o)):this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Coin))}AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)},n.prototype.OnUI_Btn_Upgrade_SubClick=function(){var e=GameDataUtil.Upgrade_Weapon_Side(GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponInfo.level),n=e<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;console.log(e+"|||||需要花费的金币"),console.log(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum+"|||||账户中有多少"),console.log(GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum-e+"|||||剩下的金币"),n?(this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!1,i.instance.sendNotification(NotificationNames.UpgradeUI_RefreshSideWeaponInfo,1),HttpMessageSender.GetSender().SendUpgradeWeaopnLvl(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponInfo.id,GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponInfo.level,e)):this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Coin)),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)},n.prototype.OnUI_Btn_Upgrade_PlaneClick=function(){var e=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl,n=GameDataUtil.Upgrade_Spawn(e);if(n<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum){var o=GameDataUtil.Spawn_Coin_Lvl(e+1),r=GameDataUtil.Spawn_Diamond_Lvl(e+1);this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!1,i.instance.sendNotification(NotificationNames.UpgradeUI_RefreshSpawnInfo,1),HttpMessageSender.GetSender().SendUpgradeSpawnLvl(GameDataManager.getInstance().LoginPlayerInfo.OpenID,GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl,n,o,r)}else this.sendNotification(NotificationNames.OPENUIWITHPARAM,new t.ExchangeUIParam(EnumDiamondExchangeType.Coin));AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_02)},n.prototype.OnUI_Btn_UpgradeCostClick=function(){switch(this.upgradeType){case EnumUpgradeUIType.Main:this.OnUI_Btn_Upgrade_MainClick();break;case EnumUpgradeUIType.Sub:this.OnUI_Btn_Upgrade_SubClick();break;case EnumUpgradeUIType.Money:this.OnUI_Btn_Upgrade_PlaneClick()}},n.prototype.listNotificationInterests=function(){return[NotificationNames.UpgradeUI_RefreshMainWeaponInfo,NotificationNames.UpgradeUI_RefreshSideWeaponInfo,NotificationNames.UpgradeUI_RefreshSpawnInfo,NotificationNames.UpgradeUI_EquipSideWeapon,NotificationNames.UI_RefreshMoneyInfo,NotificationNames.UpgradeUI_RefreshWeaponEvolutionInfo,NotificationNames.UpgradeUI_ElementTweenTo]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.UpgradeUI_RefreshMainWeaponInfo:this.RefreshMainWeaponInfo(),this.RefreshCoinInfo();1==(i=t.getBody())&&(AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_upgrade_01),this.PlayUpgradeEffect_Left(),FloatTipAnimManager.Instance.AddTip(this.floatTipGroup_L,"火力",new Vec2(0,0),e.UI_Box_FloatTip_L)),this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!0;break;case NotificationNames.UpgradeUI_RefreshSideWeaponInfo:i=t.getBody();this.RefreshSideWeaponInfo(),this.RefreshCoinInfo(),1==i&&(AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_upgrade_01),this.PlayUpgradeEffect_Left(),FloatTipAnimManager.Instance.AddTip(this.floatTipGroup_L,"强度",new Vec2(0,0),e.UI_Box_FloatTip_L)),this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!0;break;case NotificationNames.UpgradeUI_EquipSideWeapon:this.RefreshSideWeaponInfo(),this.SwitchSideWeapon();break;case NotificationNames.UpgradeUI_RefreshSpawnInfo:this.RefreshSpawnInfo(),this.RefreshCoinInfo();var i;1==(i=t.getBody())&&(AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_upgrade_01),this.PlayUpgradeEffect_Left(),FloatTipAnimManager.Instance.AddTip(this.floatTipGroup_L,"金币",new Vec2(0,0),e.UI_Box_FloatTip_L)),this.GetView().UI_Btn_UpgradeCost.mouseEnabled=!0;break;case NotificationNames.UI_RefreshMoneyInfo:this.RefreshCoinInfo();break;case NotificationNames.UpgradeUI_RefreshWeaponEvolutionInfo:this.GetView();var n=t.getBody();this.HandleWeaponEvolution(n);break;case NotificationNames.UpgradeUI_ElementTweenTo:this.elementTweenTo(t.getBody())}},n.prototype.RefreshMainWeaponInfo=function(){var t=this.GetView(),e=GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo,i=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel);this.leftUpgradeItem||(this.leftUpgradeItem=this.CreateUpgradeItem(),t.UI_Box_Left.addChild(this.leftUpgradeItem),this.leftUpgradeItem.pos(0,0)),this.leftUpgradeItem.InitItem(EnumUpgradeUIType.Main,i.ID),this.SetTextValueAndWidth(t.UI_Txt_UpgradeInfo_Main,e.level.toString());var n=!1;if(ConfigManager.GetInstance().IsMaxMainWeaponEvolutionLevel(e.evolveLevel))n=!1;else{o=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel+1);n=e.level>=o.RequiredPowerLvl,this.rightUpgradeItem||(this.rightUpgradeItem=this.CreateUpgradeItem(),t.UI_Box_Right.addChild(this.rightUpgradeItem),this.rightUpgradeItem.pos(0,0)),this.rightUpgradeItem.InitItem(EnumUpgradeUIType.Main,o.ID)}if(t.UI_Img_Arrow.visible=n,t.UI_Box_Right.visible=n,t.UI_Box_UpgradeInfo_Main.visible=!n,n){t.UI_Box_Right.left=this.rightBoxPosX_Start,t.UI_Img_Arrow.left=this.arrowPosX_Start,this.rightBoxAnimTask=Tween2DUtil.to({node:t.UI_Box_Right,duration:ConstDefine.UpgradeUI_MainWeapon_RightBoxAppearTime,delay:ConstDefine.Common_PanelScaleUpTime+ConstDefine.UpgradeUI_MainWeapon_ArrowAppearTime,left:this.rightBoxPosX_End}),this.arrowAnimTask=Tween2DUtil.to({node:t.UI_Img_Arrow,duration:ConstDefine.UpgradeUI_MainWeapon_ArrowAppearTime,delay:ConstDefine.Common_PanelScaleUpTime,left:this.arrowPosX_End});var o=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel+1);t.UI_Txt_UpgradeCost.text=GameDataUtil.NumberToString(o.RequiredGoldNumber)}else t.UI_Txt_UpgradeCost.text=GameDataUtil.NumberToString(FormulaUtil.CalcByConfig(EnumFormulaType.MainWeaponUpgradeCost,e.level))},n.prototype.RefreshSideWeaponInfo=function(){for(var t=this.GetView(),e=GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponInfo,i=0;i<6;i++){var n=this.subWeaponItemArray[i],o=i+2,r=GameDataUtil.CheckSideWeaponIDUnlocked(o);n.gray=!r,n.InitItem(EnumUpgradeUIType.Sub,o,o==e.id)}this.SetTextValueAndWidth(t.UI_Txt_UpgradeInfo_Sub,e.level.toString()),t.UI_Txt_UpgradeCost.text=GameDataUtil.NumberToString(GameDataUtil.Upgrade_Weapon_Side(e.level))},n.prototype.RefreshSpawnInfo=function(){var t=this.GetView(),e=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl;this.leftUpgradeItem||(this.leftUpgradeItem=this.CreateUpgradeItem(),t.UI_Box_Left.addChild(this.leftUpgradeItem),this.leftUpgradeItem.pos(0,0)),this.leftUpgradeItem.InitItem(EnumUpgradeUIType.Money);var i=FormulaUtil.CalcByConfig(EnumFormulaType.GoldUpgrade,e);this.SetTextValueAndWidth(t.UI_Txt_UpgradeInfo_Spawn,i.toString()),t.UI_Txt_UpgradeCost.text=GameDataUtil.NumberToString(GameDataUtil.Upgrade_Spawn(e))},n.prototype.RefreshCoinInfo=function(){var t=this.GetView();switch(this.upgradeType){case EnumUpgradeUIType.Main:var e=GameDataManager.getInstance().LoginPlayerInfo.MainWeaponInfo,i=!1,n=null;if(ConfigManager.GetInstance().IsMaxMainWeaponEvolutionLevel(e.evolveLevel)?i=!1:(n=ConfigManager.GetInstance().GetMainWeaponEvolutionConfig(e.evolveLevel+1),i=e.level>=n.RequiredPowerLvl),i){o=n.RequiredGoldNumber<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;t.UI_Txt_UpgradeCost.color=o?"#FFFFFF":"#FF0000"}else{var o=GameDataUtil.Upgrade_Weapon_Main(e.level)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;t.UI_Txt_UpgradeCost.color=o?"#FFFFFF":"#FF0000"}break;case EnumUpgradeUIType.Sub:var r=GameDataManager.getInstance().GetCurSideWeaponLvl(),a=GameDataUtil.Upgrade_Weapon_Side(r)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;t.UI_Txt_UpgradeCost.color=a?"#FFFFFF":"#FF0000";break;case EnumUpgradeUIType.Money:var s=GameDataManager.getInstance().LoginPlayerInfo.SpawnLvl,l=GameDataUtil.Upgrade_Spawn(s)<=GameDataManager.getInstance().LoginPlayerInfo.MoneyInfo.goldNum;t.UI_Txt_UpgradeCost.color=l?"#FFFFFF":"#FF0000"}},n.prototype.InitSideWeaponImage=function(){this.GetView();for(var t=0;t<6;t++){var e=t+2,i=this.CreateUpgradeItem();this.GetSiedWeaponBox(e).addChild(i),i.pos(0,0),this.subWeaponItemArray.push(i)}},n.prototype.InitUpgradeItem=function(t){var e=this;this.upgradeType=t.upgradeType;var i=this.GetView();switch(i.UI_Box_MainPanel.scale(0,0,!0),i.UI_Box_MainPanel.bottom=-50,i.UI_Box_MainPanel.alpha=0,this.mainPanelTweenTask=Tween2DUtil.to({node:i.UI_Box_MainPanel,duration:ConstDefine.Common_PanelScaleUpTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,bottom:0,alpha:1,onComplete:cbhandler.gen_handler(function(){e.mainPanelTweenTask=Tween2DUtil.to({node:i.UI_Box_MainPanel,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){e.mainPanelTweenTask=-1},e)})},this)}),i.UI_Box_SubPanel.visible=this.upgradeType==EnumUpgradeUIType.Sub,i.UI_Box_SubPanel.scale(0,0,!0),i.UI_Box_SubPanel.alpha=0,this.upgradeType==EnumUpgradeUIType.Sub&&(this.subPanelTweenTask=Tween2DUtil.to({node:i.UI_Box_SubPanel,duration:ConstDefine.Common_PanelScaleUpTime,delay:ConstDefine.Common_PanelScaleUpTime+ConstDefine.Common_PanelScaleBounceTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,alpha:1,onComplete:cbhandler.gen_handler(function(){e.subPanelTweenTask=Tween2DUtil.to({node:i.UI_Box_SubPanel,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){e.subPanelTweenTask=-1},e)})},this)})),i.UI_Img_Arrow.visible=!1,i.UI_Box_Right.visible=!1,i.UI_Anim_Upgrade_Left.visible=!1,i.UI_Anim_Upgrade_Right.visible=!1,i.UI_Btn_UpgradeCost.mouseEnabled=!0,i.UI_Btn_UpgradeCost.gray=!1,i.UI_Box_UpgradeInfo_Main.visible=this.upgradeType==EnumUpgradeUIType.Main,i.UI_Box_UpgradeInfo_Sub.visible=this.upgradeType==EnumUpgradeUIType.Sub,i.UI_Box_UpgradeInfo_Money.visible=this.upgradeType==EnumUpgradeUIType.Money,this.upgradeType){case EnumUpgradeUIType.Main:this.RefreshMainWeaponInfo();break;case EnumUpgradeUIType.Sub:this.InitSideWeaponImage(),this.RefreshSideWeaponInfo();break;case EnumUpgradeUIType.Money:this.RefreshSpawnInfo()}this.RefreshCoinInfo()},n.prototype.DeleteAllInfo=function(){-1!=this.mainPanelTweenTask&&(Tween2DUtil.kill(this.mainPanelTweenTask),this.mainPanelTweenTask=-1),-1!=this.subPanelTweenTask&&(Tween2DUtil.kill(this.subPanelTweenTask),this.subPanelTweenTask=-1);for(t=0;t<this.subWeaponItemArray.length;t++)this.DeleteUpgradeItem(this.subWeaponItemArray[t]);this.subWeaponItemArray=new Array,this.leftUpgradeItem&&(this.DeleteUpgradeItem(this.leftUpgradeItem),this.leftUpgradeItem=null),this.rightUpgradeItem&&(this.DeleteUpgradeItem(this.rightUpgradeItem),this.rightUpgradeItem=null);for(t=0;t<this.timeTaskArray.length;t++){e=this.timeTaskArray[t];TimeManager.getInst().remove(e)}this.timeTaskArray=new Array;for(var t=0;t<this.tweenTaskArray.length;t++){var e=this.tweenTaskArray[t];TimeManager.getInst().remove(e)}this.tweenTaskArray=new Array,-1!=this.upgradeAnimTask_L&&(TimeManager.getInst().remove(this.upgradeAnimTask_L),this.upgradeAnimTask_L=-1),-1!=this.upgradeAnimTask_R&&(TimeManager.getInst().remove(this.upgradeAnimTask_R),this.upgradeAnimTask_R=-1),-1!=this.rightBoxAnimTask&&(Tween2DUtil.kill(this.rightBoxAnimTask),this.rightBoxAnimTask=-1),-1!=this.arrowAnimTask&&(Tween2DUtil.kill(this.arrowAnimTask),this.arrowAnimTask=-1),FloatTipAnimManager.Instance.DeleteAllItemByGroupID(this.floatTipGroup_L),FloatTipAnimManager.Instance.DeleteAllItemByGroupID(this.floatTipGroup_R)},n.prototype.GetSiedWeaponBox=function(t){var e=this.GetView(),i=GameDataManager.getInstance().LoginPlayerInfo.CurSideWeaponID;if(t==i)return e.UI_Box_Left;for(var n=-1,o=0;o<6;o++)if(o+2!=i&&n++,o+2==t)return this.subWeaponLocateBoxArray[n];return Log.Error("UpgradeUI GetSiedWeaponBox 查找错误，请检查代码。副武器ID："+t),null},n.prototype.CreateUpgradeItem=function(){var t=this.upgradeItemPool.pop();return t||new UpgradeItem},n.prototype.DeleteUpgradeItem=function(t){t&&(t.removeSelf(),this.upgradeItemPool.push(t))},n.prototype.SwitchSideWeapon=function(){this.GetView();for(var t=0;t<this.subWeaponItemArray.length;t++){var e=this.subWeaponItemArray[t],i=this.GetSiedWeaponBox(e.sideWeaponID);if(e.parent!=i){e.scaleX=1,e.scaleY=1;var n=CommonUtil2D.GetPosUnderTargetObj(e,i);i.addChild(e),e.pos(n.x,n.y);var o=Tween2DUtil.to({node:e,duration:ConstDefine.UpgradeUI_SubWeapon_SwitchTime,x:0,y:0});this.tweenTaskArray.push(o)}}},n.prototype.elementTweenTo=function(t){this.GetView();for(var e=function(e){var n=i.subWeaponItemArray[e],o=i.GetSiedWeaponBox(t);n.parent==o&&(console.log("变大变小"),AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_touch_03),Laya.Tween.to(n,{scaleX:1.1,scaleY:1.1},125,null,Laya.Handler.create(i,function(){Laya.Tween.to(n,{scaleX:1,scaleY:1},125)})))},i=this,n=0;n<this.subWeaponItemArray.length;n++)e(n)},n.prototype.HandleWeaponEvolution=function(t){var e=this,i=this.GetView();if(1==t.result){if(1==t.weaponID){-1!=this.rightBoxAnimTask&&(Tween2DUtil.kill(this.rightBoxAnimTask),this.rightBoxAnimTask=-1),-1!=this.arrowAnimTask&&(Tween2DUtil.kill(this.arrowAnimTask),this.arrowAnimTask=-1),i.UI_Img_Arrow.left=this.arrowPosX_End,i.UI_Box_Right.left=this.rightBoxPosX_End,this.PlayUpgradeEffect_Right(),FloatTipAnimManager.Instance.AddTip(this.floatTipGroup_R,"进阶成功",new Vec2(0,0),i.UI_Box_FloatTip_R,!1),i.UI_Btn_UpgradeCost.gray=!0;var n=TimeManager.getInst().once(ConstDefine.UpgradeUI_MainWeapon_EvolutionPauseTime,cbhandler.gen_handler(function(){e.RefreshCoinInfo(),e.DeleteUpgradeItem(e.leftUpgradeItem),e.leftUpgradeItem=e.rightUpgradeItem,e.rightUpgradeItem=null;var t=CommonUtil2D.GetPosUnderTargetObj(e.leftUpgradeItem,i.UI_Box_Left);i.UI_Box_Left.addChild(e.leftUpgradeItem),e.leftUpgradeItem.pos(t.x,t.y),i.UI_Img_Arrow.visible=!1,i.UI_Box_Right.visible=!1;Tween2DUtil.to({node:e.leftUpgradeItem,duration:ConstDefine.UpgradeUI_MainWeapon_EvolutionEndTime,x:0,y:0,onComplete:cbhandler.gen_handler(function(){e.RefreshMainWeaponInfo(),i.UI_Btn_UpgradeCost.mouseEnabled=!0,i.UI_Btn_UpgradeCost.gray=!1},e)})},this));this.timeTaskArray.push(n)}AudioManager.GetInstance().PlaySoundByConfigID(EnumSoundID.sound_function_upgrade_01)}},n.prototype.PlayUpgradeEffect_Left=function(){var t=this,e=this.GetView();e.UI_Anim_Upgrade_Left.visible=!0,e.UI_Anim_Upgrade_Left.play(0,!1),-1!=this.upgradeAnimTask_L&&TimeManager.getInst().remove(this.upgradeAnimTask_L),this.upgradeAnimTask_L=TimeManager.getInst().once(ConstDefine.UpgradeUI_UpgradeEffectTime_Left,cbhandler.gen_handler(function(){e.UI_Anim_Upgrade_Left.visible=!1,t.upgradeAnimTask_L=-1},this))},n.prototype.PlayUpgradeEffect_Right=function(){var t=this,e=this.GetView();e.UI_Anim_Upgrade_Right.visible=!0,e.UI_Anim_Upgrade_Right.play(0,!1),-1!=this.upgradeAnimTask_R&&TimeManager.getInst().remove(this.upgradeAnimTask_R),this.upgradeAnimTask_R=TimeManager.getInst().once(ConstDefine.UpgradeUI_UpgradeEffectTime_Right,cbhandler.gen_handler(function(){e.UI_Anim_Upgrade_Right.visible=!1,t.upgradeAnimTask_R=-1},this))},n.prototype.SetTextValueAndWidth=function(t,e){t.text=e,t.width=28*e.length},n}(t.BaseUICtrl);e.UpgradeUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){var o=this;e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.VerifyUIID.toString(),i.addChild(this.uiView),this.uiView.zOrder=this.uiConfig.depth,this.RegisterEvent(),this.GetView().on(Laya.Event.RESIZE,this,function(){o.GetView().width=Laya.stage.width,o.GetView().height=Laya.stage.height}),this.timeTask=-1;this.GetView().UI_Txt_DiamondNum.text=GameDataManager.getInstance().VerifyReward.toString(),this.innerHeight=window.innerHeight},n.prototype.BeforeUIOpen=function(t){var i=this;void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t);var n=this.GetView();n.UI_Pnl_Tip.visible=!1,n.UI_Ipt_PhoneNumber.text="",n.UI_Ipt_Verify.text="",this.VerifyColdDown(),n.UI_Img_Scale.scale(0,0),this.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleUpTime,scalex:ConstDefine.Common_PanelScaleUpMax,scaley:ConstDefine.Common_PanelScaleUpMax,onComplete:cbhandler.gen_handler(function(){i.tweenTask=Tween2DUtil.to({node:n.UI_Img_Scale,duration:ConstDefine.Common_PanelScaleBounceTime,scalex:1,scaley:1,onComplete:cbhandler.gen_handler(function(){i.tweenTask=-1},i)})},this)})},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.ResizeByKeyboard(!1)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),-1!=this.tweenTask&&(Tween2DUtil.kill(this.tweenTask),this.tweenTask=-1),-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1)},n.prototype.BeforeUIDestroy=function(){e.prototype.BeforeUIDestroy.call(this),this.RemoveEvent()},n.prototype.OnUIDestroy=function(){e.prototype.OnUIDestroy.call(this)},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this);var t=this.GetView();t.UI_Btn_GetMessageVerify.on(Laya.Event.CLICK,this,this.OnUI_Btn_GetMessageVerifyClick),t.UI_Btn_Confirm_0.on(Laya.Event.CLICK,this,this.OnUI_Btn_ConfirmClick),t.UI_Btn_Confirm_1.on(Laya.Event.CLICK,this,this.OnUI_Btn_ConfirmClick),t.UI_Btn_Back.on(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick),t.UI_Btn_Submit.on(Laya.Event.CLICK,this,this.OnUI_Btn_SubmitClick)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName());var t=this.GetView();t.UI_Btn_GetMessageVerify.off(Laya.Event.CLICK,this,this.OnUI_Btn_GetMessageVerifyClick),t.UI_Btn_Confirm_0.off(Laya.Event.CLICK,this,this.OnUI_Btn_ConfirmClick),t.UI_Btn_Confirm_1.off(Laya.Event.CLICK,this,this.OnUI_Btn_ConfirmClick),t.UI_Btn_Back.off(Laya.Event.CLICK,this,this.OnUI_Btn_BackClick),t.UI_Btn_Submit.off(Laya.Event.CLICK,this,this.OnUI_Btn_SubmitClick)},n.prototype.OnUI_Btn_GetMessageVerifyClick=function(){var t=this.GetView(),e=t.UI_Ipt_PhoneNumber.text;if(11==e.length&&"1"==e.charAt(0)&&"2"!=e.charAt(1)){var i=parseInt(t.UI_Ipt_PhoneNumber.text);HttpMessageSender.GetSender().SendGetMessageVerifyCode(i),t.UI_Btn_GetMessageVerify.disabled=!0,t.UI_Img_Verify.visible=!1,t.UI_Txt_Verify.visible=!0,t.UI_Txt_Verify.text="发送中"}else this.HandleVerifyResult(100)},n.prototype.OnUI_Btn_ConfirmClick=function(){var e=this.GetView();if(1==this.verifyResult){var i=CommonUtil2D.GetGlobalPosition(e.UI_Btn_Confirm_1);MoneyAnimManager.Instance.PlayMoneyAnim_Pos_Curve(EnumMoneyAnimType.Diamond,10,i,new Vec2(ConstDefine.MoneyImgPos_Diamond.x,ConstDefine.MoneyImgPos_Diamond.y),500),this.sendNotification(NotificationNames.HIDEUI,t.UIID.VerifyUIID),this.sendNotification(NotificationNames.OPENUI,t.UIID.InviteVerifyFriendUIID),HttpMessageSender.GetSender().SendCheckInviteList(GameDataManager.getInstance().LoginPlayerInfo.OpenID)}else e.UI_Pnl_Tip.visible=!1},n.prototype.OnUI_Btn_BackClick=function(){this.sendNotification(NotificationNames.HIDEUI,t.UIID.VerifyUIID)},n.prototype.OnUI_Btn_SubmitClick=function(){var t=this.GetView(),e=t.UI_Ipt_PhoneNumber.text,i=t.UI_Ipt_Verify.text,n=11==e.length&&"1"==e.charAt(0)&&"2"!=e.charAt(1),o=4==i.length;if(n&&o){var r=parseInt(t.UI_Ipt_PhoneNumber.text),a=parseInt(t.UI_Ipt_Verify.text);HttpMessageSender.GetSender().SendCheckPhoneVerify(GameDataManager.getInstance().GetLoginPlayerID(),r,a),t.UI_Btn_Submit.disabled=!0}else n?o||this.HandleVerifyResult(101):this.HandleVerifyResult(100)},n.prototype.OnInputFieldClick=function(t){CommonUtil.OnMiniGame()&&this.ResizeByKeyboard(!0)},n.prototype.listNotificationInterests=function(){return[NotificationNames.VerifyUI_GetMessageResult,NotificationNames.VerifyUI_VerifyResult]},n.prototype.handleNotification=function(t){var e=this.GetView();switch(t.getName()){case NotificationNames.VerifyUI_GetMessageResult:if(1==(n=t.getBody())){var i=Math.floor(Date.now()/1e3);StorageManager.SetLastVerifyMessageTime(i),this.VerifyColdDown()}else e.UI_Btn_GetMessageVerify.disabled=!1,e.UI_Img_Verify.visible=!0,e.UI_Txt_Verify.visible=!1;break;case NotificationNames.VerifyUI_VerifyResult:var n=t.getBody();this.HandleVerifyResult(n)}},n.prototype.VerifyColdDown=function(){var t=this.GetView();t.UI_Btn_GetMessageVerify.disabled=!0,t.UI_Img_Verify.visible=!1,t.UI_Txt_Verify.visible=!0,-1!=this.timeTask&&(TimeManager.getInst().remove(this.timeTask),this.timeTask=-1);var e=StorageManager.GetLastVerifyMessageTime(),i=GameDataManager.getInstance().VerifyColddown-(Math.floor(Date.now()/1e3)-e);i>0?(t.UI_Txt_Verify.text=i.toString()+"秒",this.timeTask=TimeManager.getInst().loopTimes(1,i,cbhandler.gen_handler(function(){var e=StorageManager.GetLastVerifyMessageTime(),i=GameDataManager.getInstance().VerifyColddown-(Math.floor(Date.now()/1e3)-e);i>0?t.UI_Txt_Verify.text=i.toString()+"秒":(t.UI_Btn_GetMessageVerify.disabled=!1,t.UI_Img_Verify.visible=!0,t.UI_Txt_Verify.visible=!1)},this))):(t.UI_Btn_GetMessageVerify.disabled=!1,t.UI_Img_Verify.visible=!0,t.UI_Txt_Verify.visible=!1)},n.prototype.HandleVerifyResult=function(t){var e=this.GetView();this.verifyResult=t,e.UI_Pnl_Tip.visible=!0;var i=ConfigManager.GetInstance().GetPhoneVerifyErrorMessageConfig(this.verifyResult);e.UI_Txt_Tip_Msg.text=i.errorMsg,1!=this.verifyResult&&(e.UI_Btn_Submit.disabled=!1)},n.prototype.ResizeByKeyboard=function(t){var e=this.GetView();t?(Log.Debug("VerifyUI 呼出软键盘"),e.UI_Img_Scale.bottom=1e3):(Log.Debug("VerifyUI 关闭软键盘"),e.UI_Img_Scale.bottom=250)},n}(t.BaseUICtrl);e.VerifyUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){!function(e){var i=puremvc.Facade,n=function(e){function n(t){var i=e.call(this,t)||this;return i.timeLine=null,i}return __extends(n,e),n.prototype.GetView=function(){return this.uiView},n.prototype.Init=function(i,n){e.prototype.Init.call(this,i,n),this.mediatorName=t.UIID.WaitingUIID.toString(),this.uiConfig=new t.WindowConfigData,this.uiConfig.uiOpenAnimType=t.UIAnim.None,this.uiConfig.uiCloseAnimType=t.UIAnim.None,this.uiConfig.depth=0,i.addChild(this.uiView),this.uiView.zOrder=102,this.RegisterEvent(),this.timeLine=new Laya.TimeLine,this.timeLine.addLabel("loading",0).to(this.GetView().waitingAnim,{rotation:360},2e3,Laya.Ease.linearNone,0)},n.prototype.BeforeUIOpen=function(t){void 0===t&&(t=null),e.prototype.BeforeUIOpen.call(this,t)},n.prototype.OnUIOpened=function(t){void 0===t&&(t=null),e.prototype.OnUIOpened.call(this,t),this.timeLine.play("loading",!0)},n.prototype.OnUIHide=function(){e.prototype.OnUIHide.call(this),this.timeLine.pause()},n.prototype.BeforeUIDestroy=function(){this.RemoveEvent(),this.timeLine.pause(),this.timeLine.destroy()},n.prototype.OnUIDestroy=function(){},n.prototype.RegisterEvent=function(){i.getInstance().registerMediator(this)},n.prototype.RemoveEvent=function(){i.getInstance().removeMediator(this.getMediatorName())},n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){t.getName()},n}(t.BaseUICtrl);e.WaitingUICtrl=n}(t.uicontrollers||(t.uicontrollers={}))}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return Facade.getInstance().registerMediator(t),t}return __extends(i,e),i.GetInstance=function(){return null==i._instance&&(i._instance=new i),i._instance},i.prototype.Init=function(t){var e=this;this.allUIDic=new Laya.Dictionary,this.showUIDic=new Laya.Dictionary,this.uiParent=StageManager.GetInstance().uiParent,this.uiParent.name="UIParent",this.uiParentBottom=this.createParentNode(ZOrderDefine.BOTTOM_UI,"BottomUIParent"),this.uiParentTop=this.createParentNode(ZOrderDefine.TOP_UI,"TopUIParent"),this.uiParentMoneyAnim=this.createParentNode(ZOrderDefine.MONEY_ANIM,"MoneyAnimUIParent"),this.initCallback=t;var i=[{url:"res/atlas/resources/common.atlas",type:Laya.Loader.ATLAS}];i.length>0?ResourceManager.GetInstance().loadResArray(i,function(){e.onFinishInit()}):this.onFinishInit()},i.prototype.GetResItem=function(t){for(var e=[{url:"res/atlas/resources/homepage.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/waiting.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/player/planes.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/guide.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/upgrade.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/exchange.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/invitefriend.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/battle.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/setting.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/reborn.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/moneyinfo.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/prop.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/level.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/upgradeAnim.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/result.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/verify.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/lotteryItem.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/coinAnim.atlas",type:Laya.Loader.ATLAS},{url:"res/atlas/resources/spawn.atlas",type:Laya.Loader.ATLAS},{url:"unpack.json",type:Laya.Loader.JSON}],i=0;i<e.length;i++)t.push(e[i])},i.prototype.onFinishInit=function(){null!=this.initCallback&&this.initCallback()},i.prototype.Open=function(t,e){var i=this;if(void 0===e&&(e=null),!this.IsShowing(t)){var n=ConfigManager.GetInstance().GetUIConfig(t);this.loadAtlasBeforeOpen(t,function(){var o=i.prepareUI(t,i.getUIParent(n));i.doBeforeUIOpen(t),o.Open(e),i.AddShowUI(t,o)},n)}},i.prototype.prepareUI=function(e,i){var n=this.allUIDic.get(e);return null==n&&((n=t.UIFactory.Create(e)).Init(i,e),this.AddInstantiated(e,n)),n},i.prototype.Hide=function(e,i){if(void 0===i&&(i=!1),i){var n=ConfigManager.GetInstance().GetUIConfig(e);if(n&&n.uiAutoCloseType==t.UIAutoCloseType.NotAffectedByOthers)return}var o=this.GetShowUI(e);null!=o&&(o.Hide(),this.RemoveShowUI(e))},i.prototype.HideAll=function(t){var e=this;void 0===t&&(t=!1);this.showUIDic.keys.forEach(function(i){e.Hide(i,t)})},i.prototype.Destroy=function(t){var e=this.GetInstantiated(t);null!=e&&(this.Hide(t),e.Destroy(),this.RemoveInstantiated(t),this.releaseAtlasOnDestory(t),this.releaseUnpackImageOnDestory(t))},i.prototype.DestroyAll=function(){for(var t=[],e=0;e<this.allUIDic.keys.length;e++){var i=this.allUIDic.keys[e];t.push(i)}for(var n=0;n<t.length;n++){var o=t[n];this.Destroy(o)}this.showUIDic.clear(),this.allUIDic.clear()},i.prototype.IsShowing=function(t){return null!=this.showUIDic.get(t)},i.prototype.GetShowUI=function(t){return this.showUIDic.get(t)},i.prototype.AddShowUI=function(t,e){this.showUIDic.set(t,e)},i.prototype.RemoveShowUI=function(t){this.showUIDic.remove(t)},i.prototype.IsInstantiated=function(t){return null!=this.allUIDic.get(t)},i.prototype.GetInstantiated=function(t){return this.allUIDic.get(t)},i.prototype.AddInstantiated=function(t,e){this.allUIDic.set(t,e)},i.prototype.RemoveInstantiated=function(t){this.allUIDic.remove(t)},i.prototype.doBeforeUIOpen=function(e){var i=ConfigManager.GetInstance().GetUIConfig(e);i&&i.uiShowType==t.UIShowType.HideOthers&&this.HideAll(!0)},i.prototype.loadAtlasBeforeOpen=function(t,e,i){var n=this;if(i&&null!=i.atlas&&""!=i.atlas.trim()){ResourceManager.GetInstance().checkResLoaded(i.atlas)?e():ResourceManager.GetInstance().loadResArray([i.atlas],function(){return n.onAtlasLoadedForOpen(e)})}else e()},i.prototype.onAtlasLoadedForOpen=function(t){t()},i.prototype.releaseAtlasOnDestory=function(t){var e=ConfigManager.GetInstance().GetUIConfig(t);e&&null!=e.atlas&&""!=e.atlas.trim()&&ResourceManager.GetInstance().release(e.atlas)},i.prototype.releaseUnpackImageOnDestory=function(t){var e=ConfigManager.GetInstance().GetUIConfig(t);if(e&&e.unpackImagList&&e.unpackImagList.length>0)for(var i=0;i<e.unpackImagList.length;i++){var n=e.unpackImagList[i].trim();""!=n&&ResourceManager.GetInstance().release(n)}},i.prototype.createParentNode=function(t,e){var i=new Laya.Sprite;return Laya.stage.addChild(i),i.name=e,i.zOrder=t,i},i.prototype.getUIParent=function(t){return t&&1==t.parentType?this.uiParentBottom:t&&2==t.parentType?this.uiParentTop:this.uiParent},i.prototype.listNotificationInterests=function(){return[NotificationNames.OPENUI,NotificationNames.OPENUIWITHPARAM,NotificationNames.HIDEUI,NotificationNames.DESTROYUI,NotificationNames.DESTROYALLUI,NotificationNames.HIDEALLUI]},i.prototype.handleNotification=function(t){switch(t.getName()){case NotificationNames.OPENUI:i=t.getBody();this.Open(i);break;case NotificationNames.OPENUIWITHPARAM:var e=t.getBody();this.Open(e.ID,e);break;case NotificationNames.HIDEUI:i=t.getBody();this.Hide(i);break;case NotificationNames.DESTROYUI:var i=t.getBody();this.Destroy(i);break;case NotificationNames.DESTROYALLUI:this.DestroyAll();break;case NotificationNames.HIDEALLUI:this.HideAll()}},i}(puremvc.Mediator);t.UIMediator=e}(ui||(ui={}));var WebGL=laya.webgl.WebGL,GameMain=function(){return function(){this._modes=["noscale","exactfit","showall","noborder","full","fixedwidth","fixedheight"],puremvc.Facade.getInstance().registerCommand(NotificationNames.START_UP_INIT_COMMAND,StartupInitCommand),puremvc.Facade.getInstance().sendNotification(NotificationNames.START_UP_INIT_COMMAND)}}();new GameMain;